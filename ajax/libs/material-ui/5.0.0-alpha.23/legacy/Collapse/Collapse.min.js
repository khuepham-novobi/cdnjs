import _defineProperty from"@babel/runtime/helpers/esm/defineProperty";import _extends from"@babel/runtime/helpers/esm/extends";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import*as React from"react";import clsx from"clsx";import PropTypes from"prop-types";import{Transition}from"react-transition-group";import{elementTypeAcceptingRef}from"@material-ui/utils";import withStyles from"../styles/withStyles";import{duration}from"../styles/transitions";import{getTransitionProps}from"../transitions/utils";import useTheme from"../styles/useTheme";import{useForkRef}from"../utils";export var styles=function(e){return{root:{height:0,overflow:"hidden",transition:e.transitions.create("height"),"&$horizontal":{height:"auto",width:0,transition:e.transitions.create("width")}},horizontal:{},entered:{height:"auto",overflow:"visible","&$horizontal":{width:"auto"}},hidden:{visibility:"hidden"},wrapper:{display:"flex",width:"100%","&$horizontal":{width:"auto",height:"100%"}},wrapperInner:{width:"100%","&$horizontal":{width:"auto",height:"100%"}}}};var Collapse=React.forwardRef(function(e,t){var o=e.children,n=e.classes,r=e.className,i=e.collapsedSize,s=void 0===i?"0px":i,a=e.component,p=void 0===a?"div":a,c=e.in,l=e.onEnter,u=e.onEntered,m=e.onEntering,d=e.onExit,f=e.onExited,y=e.onExiting,h=e.orientation,T=void 0===h?"vertical":h,x=e.style,E=e.timeout,P=void 0===E?duration.standard:E,g=e.TransitionComponent,v=void 0===g?Transition:g,b=_objectWithoutProperties(e,["children","classes","className","collapsedSize","component","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"]),R=useTheme(),w=React.useRef(),z=React.useRef(null),_=React.useRef(),N="number"==typeof s?"".concat(s,"px"):s,C="vertical"!==T,D=C?"width":"height";React.useEffect(function(){return function(){clearTimeout(w.current)}},[]);var S=React.useRef(null),j=useForkRef(t,S),A=function(e){return function(t){if(e){var o=S.current;void 0===t?e(o):e(o,t)}}},O=function(){return z.current?z.current[C?"clientWidth":"clientHeight"]:0},W=A(function(e,t){z.current&&C&&(z.current.style.position="absolute"),e.style[D]=N,l&&l(e,t)}),H=A(function(e,t){var o=O();z.current&&C&&(z.current.style.position="");var n=getTransitionProps({style:x,timeout:P},{mode:"enter"}).duration;if("auto"===P){var r=R.transitions.getAutoHeightDuration(o);e.style.transitionDuration="".concat(r,"ms"),_.current=r}else e.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms");e.style[D]="".concat(o,"px"),m&&m(e,t)}),$=A(function(e,t){e.style[D]="auto",u&&u(e,t)}),k=A(function(e){e.style[D]="".concat(O(),"px"),d&&d(e)}),F=A(f),I=A(function(e){var t=O(),o=getTransitionProps({style:x,timeout:P},{mode:"exit"}).duration;if("auto"===P){var n=R.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(n,"ms"),_.current=n}else e.style.transitionDuration="string"==typeof o?o:"".concat(o,"ms");e.style[D]=N,y&&y(e)});return React.createElement(v,_extends({in:c,onEnter:W,onEntered:$,onEntering:H,onExit:k,onExited:F,onExiting:I,addEndListener:function(e){"auto"===P&&(w.current=setTimeout(e,_.current||0))},nodeRef:S,timeout:"auto"===P?null:P},b),function(e,t){return React.createElement(p,_extends({className:clsx(n.root,r,C&&n.horizontal,{entered:n.entered,exited:!c&&"0px"===N&&n.hidden}[e]),style:_extends(_defineProperty({},C?"minWidth":"minHeight",N),x),ref:j},t),React.createElement("div",{className:clsx(n.wrapper,C&&n.horizontal),ref:z},React.createElement("div",{className:clsx(n.wrapperInner,C&&n.horizontal)},o)))})});"production"!==process.env.NODE_ENV&&(Collapse.propTypes={children:PropTypes.node,classes:PropTypes.object,className:PropTypes.string,collapsedSize:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),component:elementTypeAcceptingRef,in:PropTypes.bool,onEnter:PropTypes.func,onEntered:PropTypes.func,onEntering:PropTypes.func,onExit:PropTypes.func,onExited:PropTypes.func,onExiting:PropTypes.func,orientation:PropTypes.oneOf(["horizontal","vertical"]),style:PropTypes.object,timeout:PropTypes.oneOfType([PropTypes.oneOf(["auto"]),PropTypes.number,PropTypes.shape({appear:PropTypes.number,enter:PropTypes.number,exit:PropTypes.number})])}),Collapse.muiSupportAuto=!0;export default withStyles(styles,{name:"MuiCollapse"})(Collapse);