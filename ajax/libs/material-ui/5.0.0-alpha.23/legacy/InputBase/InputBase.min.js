import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import _extends from"@babel/runtime/helpers/esm/extends";import{formatMuiErrorMessage as _formatMuiErrorMessage}from"@material-ui/utils";import*as React from"react";import PropTypes from"prop-types";import clsx from"clsx";import{refType,elementTypeAcceptingRef}from"@material-ui/utils";import formControlState from"../FormControl/formControlState";import FormControlContext,{useFormControl}from"../FormControl/FormControlContext";import withStyles from"../styles/withStyles";import capitalize from"../utils/capitalize";import useForkRef from"../utils/useForkRef";import useEnhancedEffect from"../utils/useEnhancedEffect";import TextareaAutosize from"../TextareaAutosize";import{isFilled}from"./utils";export var styles=function(e){var o="light"===e.palette.mode,r={color:"currentColor",opacity:o?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},t={opacity:"0 !important"},n={opacity:o?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:_extends({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},sizeSmall:{},multiline:{padding:"4px 0 5px","&$sizeSmall":{paddingTop:1}},colorSecondary:{},fullWidth:{width:"100%"},hiddenLabel:{},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&:-ms-input-placeholder":t,"&::-ms-input-placeholder":t,"&:focus::-webkit-input-placeholder":n,"&:focus::-moz-placeholder":n,"&:focus:-ms-input-placeholder":n,"&:focus::-ms-input-placeholder":n},"&$disabled":{opacity:1,WebkitTextFillColor:e.palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputSizeSmall:{paddingTop:1},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}};var InputBase=React.forwardRef(function(e,o){var r=e["aria-describedby"],t=e.autoComplete,n=e.autoFocus,i=e.classes,a=e.className,l=(e.color,e.defaultValue),s=e.disabled,p=e.endAdornment,u=(e.error,e.fullWidth),d=void 0!==u&&u,c=e.id,m=e.inputComponent,f=void 0===m?"input":m,y=e.inputProps,h=void 0===y?{}:y,b=e.inputRef,T=(e.margin,e.maxRows),g=e.minRows,x=e.multiline,P=void 0!==x&&x,C=e.name,v=e.onBlur,w=e.onChange,R=e.onClick,E=e.onFocus,S=e.onKeyDown,F=e.onKeyUp,k=e.placeholder,z=e.readOnly,N=e.renderSuffix,A=e.rows,_=(e.size,e.startAdornment),O=e.type,M=void 0===O?"text":O,B=e.value,D=_objectWithoutProperties(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"]),W=null!=h.value?h.value:B,I=React.useRef(null!=W).current,V=React.useRef(),K=React.useCallback(function(e){"production"!==process.env.NODE_ENV&&e&&"INPUT"!==e.nodeName&&!e.focus&&console.error(["Material-UI: You have provided a `inputComponent` to the input component","that does not correctly handle the `ref` prop.","Make sure the `ref` prop is called with a HTMLInputElement."].join("\n"))},[]),L=useForkRef(h.ref,K),U=useForkRef(b,L),j=useForkRef(V,U),H=React.useState(!1),q=H[0],$=H[1],Y=useFormControl();"production"!==process.env.NODE_ENV&&React.useEffect(function(){if(Y)return Y.registerEffect()},[Y]);var G=formControlState({props:e,muiFormControl:Y,states:["color","disabled","error","hiddenLabel","size","required","filled"]});G.focused=Y?Y.focused:q,React.useEffect(function(){!Y&&s&&q&&($(!1),v&&v())},[Y,s,q,v]);var J=Y&&Y.onFilled,Q=Y&&Y.onEmpty,X=React.useCallback(function(e){isFilled(e)?J&&J():Q&&Q()},[J,Q]);useEnhancedEffect(function(){I&&X({value:W})},[W,X,I]);React.useEffect(function(){X(V.current)},[]);var Z=f,ee=h;P&&"input"===Z&&(A?("production"!==process.env.NODE_ENV&&(g||T)&&console.warn("Material-UI: You can not use the `minRows` or `maxRows` props when the input `rows` prop is set."),ee=_extends({type:void 0},ee),Z="textarea"):(ee=_extends({type:void 0,maxRows:T,minRows:g},ee),Z=TextareaAutosize));return React.useEffect(function(){Y&&Y.setAdornedStart(Boolean(_))},[Y,_]),React.createElement("div",_extends({className:clsx(i.root,i["color".concat(capitalize(G.color||"primary"))],a,G.disabled&&i.disabled,G.error&&i.error,d&&i.fullWidth,G.focused&&i.focused,Y&&i.formControl,P&&i.multiline,_&&i.adornedStart,p&&i.adornedEnd,G.hiddenLabel&&i.hiddenLabel,"small"===G.size&&i.sizeSmall),onClick:function(e){V.current&&e.currentTarget===e.target&&V.current.focus(),R&&R(e)},ref:o},D),_,React.createElement(FormControlContext.Provider,{value:null},React.createElement(Z,_extends({"aria-invalid":G.error,"aria-describedby":r,autoComplete:t,autoFocus:n,defaultValue:l,disabled:G.disabled,id:c,onAnimationStart:function(e){X("mui-auto-fill-cancel"===e.animationName?V.current:{value:"x"})},name:C,placeholder:k,readOnly:z,required:G.required,rows:A,value:W,onKeyDown:S,onKeyUp:F,type:M},ee,{ref:j,className:clsx(i.input,h.className,G.disabled&&i.disabled,P&&i.inputMultiline,G.hiddenLabel&&i.inputHiddenLabel,_&&i.inputAdornedStart,p&&i.inputAdornedEnd,"search"===M&&i.inputTypeSearch,"small"===G.size&&i.inputSizeSmall),onBlur:function(e){v&&v(e),h.onBlur&&h.onBlur(e),Y&&Y.onBlur?Y.onBlur(e):$(!1)},onChange:function(e){if(!I){var o=e.target||V.current;if(null==o)throw new Error("production"!==process.env.NODE_ENV?"Material-UI: Expected valid input target. Did you use a custom `inputComponent` and forget to forward refs? See https://material-ui.com/r/input-component-ref-interface for more info.":_formatMuiErrorMessage(1));X({value:o.value})}for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];h.onChange&&h.onChange.apply(h,[e].concat(t)),w&&w.apply(void 0,[e].concat(t))},onFocus:function(e){G.disabled?e.stopPropagation():(E&&E(e),h.onFocus&&h.onFocus(e),Y&&Y.onFocus?Y.onFocus(e):$(!0))}}))),p,N?N(_extends({},G,{startAdornment:_})):null)});"production"!==process.env.NODE_ENV&&(InputBase.propTypes={"aria-describedby":PropTypes.string,autoComplete:PropTypes.string,autoFocus:PropTypes.bool,classes:PropTypes.object,className:PropTypes.string,color:PropTypes.oneOf(["primary","secondary"]),defaultValue:PropTypes.any,disabled:PropTypes.bool,endAdornment:PropTypes.node,error:PropTypes.bool,fullWidth:PropTypes.bool,id:PropTypes.string,inputComponent:elementTypeAcceptingRef,inputProps:PropTypes.object,inputRef:refType,margin:PropTypes.oneOf(["dense","none"]),maxRows:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),minRows:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),multiline:PropTypes.bool,name:PropTypes.string,onBlur:PropTypes.func,onChange:PropTypes.func,onClick:PropTypes.func,onFocus:PropTypes.func,onKeyDown:PropTypes.func,onKeyUp:PropTypes.func,placeholder:PropTypes.string,readOnly:PropTypes.bool,renderSuffix:PropTypes.func,required:PropTypes.bool,rows:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),size:PropTypes.oneOf(["medium","small"]),startAdornment:PropTypes.node,type:PropTypes.string,value:PropTypes.any});export default withStyles(styles,{name:"MuiInputBase"})(InputBase);