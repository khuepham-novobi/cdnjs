"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutPropertiesLoose2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutPropertiesLoose")),React=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_utils=require("@material-ui/utils"),_reactTransitionGroup=require("react-transition-group"),_useTheme=_interopRequireDefault(require("../styles/useTheme")),_utils2=require("../transitions/utils"),_useForkRef=_interopRequireDefault(require("../utils/useForkRef"));function getScale(e){return`scale(${e}, ${e**2})`}const styles={entering:{opacity:1,transform:getScale(1)},entered:{opacity:1,transform:"none"}},Grow=React.forwardRef(function(e,t){const{appear:r=!0,children:n,in:o,onEnter:i,onEntered:u,onEntering:a,onExit:s,onExited:p,onExiting:l,style:d,timeout:c="auto",TransitionComponent:f=_reactTransitionGroup.Transition}=e,_=(0,_objectWithoutPropertiesLoose2.default)(e,["appear","children","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),y=React.useRef(),m=React.useRef(),T=(0,_useTheme.default)(),E=React.useRef(null),R=(0,_useForkRef.default)(n.ref,t),g=(0,_useForkRef.default)(E,R),x=e=>t=>{if(e){const r=E.current;void 0===t?e(r):e(r,t)}},q=x(a),b=x((e,t)=>{(0,_utils2.reflow)(e);const{duration:r,delay:n}=(0,_utils2.getTransitionProps)({style:d,timeout:c},{mode:"enter"});let o;"auto"===c?(o=T.transitions.getAutoHeightDuration(e.clientHeight),m.current=o):o=r,e.style.transition=[T.transitions.create("opacity",{duration:o,delay:n}),T.transitions.create("transform",{duration:.666*o,delay:n})].join(","),i&&i(e,t)}),h=x(u),D=x(l),v=x(e=>{const{duration:t,delay:r}=(0,_utils2.getTransitionProps)({style:d,timeout:c},{mode:"exit"});let n;"auto"===c?(n=T.transitions.getAutoHeightDuration(e.clientHeight),m.current=n):n=t,e.style.transition=[T.transitions.create("opacity",{duration:n,delay:r}),T.transitions.create("transform",{duration:.666*n,delay:r||.333*n})].join(","),e.style.opacity="0",e.style.transform=getScale(.75),s&&s(e)}),j=x(p);return React.useEffect(()=>()=>{clearTimeout(y.current)},[]),React.createElement(f,(0,_extends2.default)({appear:r,in:o,nodeRef:E,onEnter:b,onEntered:h,onEntering:q,onExit:v,onExited:j,onExiting:D,addEndListener:e=>{"auto"===c&&(y.current=setTimeout(e,m.current||0))},timeout:"auto"===c?null:c},_),(e,t)=>React.cloneElement(n,(0,_extends2.default)({style:(0,_extends2.default)({opacity:0,transform:getScale(.75),visibility:"exited"!==e||o?void 0:"hidden"},styles[e],d,n.props.style),ref:g},t)))});"production"!==process.env.NODE_ENV&&(Grow.propTypes={appear:_propTypes.default.bool,children:_utils.elementAcceptingRef,in:_propTypes.default.bool,onEnter:_propTypes.default.func,onEntered:_propTypes.default.func,onEntering:_propTypes.default.func,onExit:_propTypes.default.func,onExited:_propTypes.default.func,onExiting:_propTypes.default.func,style:_propTypes.default.object,timeout:_propTypes.default.oneOfType([_propTypes.default.oneOf(["auto"]),_propTypes.default.number,_propTypes.default.shape({appear:_propTypes.default.number,enter:_propTypes.default.number,exit:_propTypes.default.number})])}),Grow.muiSupportAuto=!0;var _default=Grow;exports.default=_default;