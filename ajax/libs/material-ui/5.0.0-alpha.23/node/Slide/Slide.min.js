"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.setTranslateValue=setTranslateValue,exports.default=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutPropertiesLoose2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutPropertiesLoose")),React=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_reactTransitionGroup=require("react-transition-group"),_utils=require("@material-ui/utils"),_debounce=_interopRequireDefault(require("../utils/debounce")),_useForkRef=_interopRequireDefault(require("../utils/useForkRef")),_useTheme=_interopRequireDefault(require("../styles/useTheme")),_transitions=require("../styles/transitions"),_utils2=require("../transitions/utils"),_utils3=require("../utils");function getTranslateValue(e,t){const r=t.getBoundingClientRect(),n=(0,_utils3.ownerWindow)(t);let i;if(t.fakeTransform)i=t.fakeTransform;else{const e=n.getComputedStyle(t);i=e.getPropertyValue("-webkit-transform")||e.getPropertyValue("transform")}let s=0,o=0;if(i&&"none"!==i&&"string"==typeof i){const e=i.split("(")[1].split(")")[0].split(",");s=parseInt(e[4],10),o=parseInt(e[5],10)}return"left"===e?`translateX(${n.innerWidth}px) translateX(${s-r.left}px)`:"right"===e?`translateX(-${r.left+r.width-s}px)`:"up"===e?`translateY(${n.innerHeight}px) translateY(${o-r.top}px)`:`translateY(-${r.top+r.height-o}px)`}function setTranslateValue(e,t){const r=getTranslateValue(e,t);r&&(t.style.webkitTransform=r,t.style.transform=r)}const defaultTimeout={enter:_transitions.duration.enteringScreen,exit:_transitions.duration.leavingScreen},Slide=React.forwardRef(function(e,t){const{appear:r=!0,children:n,direction:i="down",in:s,onEnter:o,onEntered:a,onEntering:u,onExit:l,onExited:p,onExiting:d,style:f,timeout:c=defaultTimeout,TransitionComponent:_=_reactTransitionGroup.Transition}=e,T=(0,_objectWithoutPropertiesLoose2.default)(e,["appear","children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),y=(0,_useTheme.default)(),m=React.useRef(null),g=(0,_useForkRef.default)(n.ref,m),x=(0,_useForkRef.default)(g,t),b=e=>t=>{e&&(void 0===t?e(m.current):e(m.current,t))},E=b((e,t)=>{setTranslateValue(i,e),(0,_utils2.reflow)(e),o&&o(e,t)}),R=b((e,t)=>{const r=(0,_utils2.getTransitionProps)({timeout:c,style:f},{mode:"enter"});e.style.webkitTransition=y.transitions.create("-webkit-transform",(0,_extends2.default)({},r,{easing:y.transitions.easing.easeOut})),e.style.transition=y.transitions.create("transform",(0,_extends2.default)({},r,{easing:y.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",u&&u(e,t)}),h=b(a),q=b(d),w=b(e=>{const t=(0,_utils2.getTransitionProps)({timeout:c,style:f},{mode:"exit"});e.style.webkitTransition=y.transitions.create("-webkit-transform",(0,_extends2.default)({},t,{easing:y.transitions.easing.sharp})),e.style.transition=y.transitions.create("transform",(0,_extends2.default)({},t,{easing:y.transitions.easing.sharp})),setTranslateValue(i,e),l&&l(e)}),k=b(e=>{e.style.webkitTransition="",e.style.transition="",p&&p(e)}),v=React.useCallback(()=>{m.current&&setTranslateValue(i,m.current)},[i]);return React.useEffect(()=>{if(s||"down"===i||"right"===i)return;const e=(0,_debounce.default)(()=>{m.current&&setTranslateValue(i,m.current)}),t=(0,_utils3.ownerWindow)(m.current);return t.addEventListener("resize",e),()=>{e.clear(),t.removeEventListener("resize",e)}},[i,s]),React.useEffect(()=>{s||v()},[s,v]),React.createElement(_,(0,_extends2.default)({nodeRef:m,onEnter:E,onEntered:h,onEntering:R,onExit:w,onExited:k,onExiting:q,appear:r,in:s,timeout:c},T),(e,t)=>React.cloneElement(n,(0,_extends2.default)({ref:x,style:(0,_extends2.default)({visibility:"exited"!==e||s?void 0:"hidden"},f,n.props.style)},t)))});"production"!==process.env.NODE_ENV&&(Slide.propTypes={appear:_propTypes.default.bool,children:_utils.elementAcceptingRef,direction:_propTypes.default.oneOf(["down","left","right","up"]),in:_propTypes.default.bool,onEnter:_propTypes.default.func,onEntered:_propTypes.default.func,onEntering:_propTypes.default.func,onExit:_propTypes.default.func,onExited:_propTypes.default.func,onExiting:_propTypes.default.func,style:_propTypes.default.object,timeout:_propTypes.default.oneOfType([_propTypes.default.number,_propTypes.default.shape({appear:_propTypes.default.number,enter:_propTypes.default.number,exit:_propTypes.default.number})])});var _default=Slide;exports.default=_default;