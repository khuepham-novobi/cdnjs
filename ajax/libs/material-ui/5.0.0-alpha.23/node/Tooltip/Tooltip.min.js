"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.testReset=testReset,exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutPropertiesLoose2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutPropertiesLoose")),React=_interopRequireWildcard(require("react")),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_colorManipulator=require("../styles/colorManipulator"),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_capitalize=_interopRequireDefault(require("../utils/capitalize")),_Grow=_interopRequireDefault(require("../Grow")),_Popper=_interopRequireDefault(require("../Popper")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_useForkRef=_interopRequireDefault(require("../utils/useForkRef")),_useId=_interopRequireDefault(require("../utils/useId")),_useIsFocusVisible=_interopRequireDefault(require("../utils/useIsFocusVisible")),_useControlled=_interopRequireDefault(require("../utils/useControlled")),_useTheme=_interopRequireDefault(require("../styles/useTheme"));function round(e){return Math.round(1e5*e)/1e5}function arrowGenerator(){return{'&[data-popper-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},'&[data-popper-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},'&[data-popper-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}},'&[data-popper-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}}}}const styles=e=>({popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:arrowGenerator(),tooltip:{backgroundColor:(0,_colorManipulator.alpha)(e.palette.grey[700],.92),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:0},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:(0,_colorManipulator.alpha)(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:`${round(16/14)}em`,fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:{transformOrigin:"right center",marginRight:"24px",[e.breakpoints.up("sm")]:{marginRight:"14px"}},tooltipPlacementRight:{transformOrigin:"left center",marginLeft:"24px",[e.breakpoints.up("sm")]:{marginLeft:"14px"}},tooltipPlacementTop:{transformOrigin:"center bottom",marginBottom:"24px",[e.breakpoints.up("sm")]:{marginBottom:"14px"}},tooltipPlacementBottom:{transformOrigin:"center top",marginTop:"24px",[e.breakpoints.up("sm")]:{marginTop:"14px"}}});exports.styles=styles;let hystersisOpen=!1,hystersisTimer=null;function testReset(){hystersisOpen=!1,clearTimeout(hystersisTimer)}function composeEventHandler(e,t){return r=>{t&&t(r),e(r)}}const Tooltip=React.forwardRef(function(e,t){const{arrow:r=!1,children:o,classes:n,describeChild:i=!1,disableFocusListener:s=!1,disableHoverListener:a=!1,disableTouchListener:l=!1,enterDelay:p=100,enterNextDelay:u=0,enterTouchDelay:c=700,followCursor:d=!1,id:m,disableInteractive:f=!1,leaveDelay:h=0,leaveTouchDelay:y=1500,onClose:b,onOpen:T,open:_,placement:R="bottom",PopperComponent:g=_Popper.default,PopperProps:v={},title:x,TransitionComponent:q=_Grow.default,TransitionProps:w}=e,E=(0,_objectWithoutPropertiesLoose2.default)(e,["arrow","children","classes","describeChild","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","disableInteractive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),D=(0,_useTheme.default)(),[O,C]=React.useState(),[k,P]=React.useState(null),M=React.useRef(!1),L=f||d,F=React.useRef(),N=React.useRef(),S=React.useRef(),I=React.useRef(),[W,j]=(0,_useControlled.default)({controlled:_,default:!1,name:"Tooltip",state:"open"});let B=W;if("production"!==process.env.NODE_ENV){const{current:e}=React.useRef(void 0!==_);React.useEffect(()=>{O&&O.disabled&&!e&&""!==x&&"button"===O.tagName.toLowerCase()&&console.error(["Material-UI: You are providing a disabled `button` child to the Tooltip component.","A disabled element does not fire events.","Tooltip needs to listen to the child element's events to display the title.","","Add a simple wrapper element, such as a `span`."].join("\n"))},[x,O,e])}const A=(0,_useId.default)(m),H=React.useRef(),z=React.useCallback(()=>{void 0!==H.current&&(document.body.style.WebkitUserSelect=H.current,H.current=void 0),clearTimeout(I.current)},[]);React.useEffect(()=>()=>{clearTimeout(F.current),clearTimeout(N.current),clearTimeout(S.current),z()},[z]);const V=e=>{clearTimeout(hystersisTimer),hystersisOpen=!0,j(!0),T&&!B&&T(e)},U=(0,_useEventCallback.default)(e=>{clearTimeout(hystersisTimer),hystersisTimer=setTimeout(()=>{hystersisOpen=!1},800+h),j(!1),b&&B&&b(e),clearTimeout(F.current),F.current=setTimeout(()=>{M.current=!1},D.transitions.duration.shortest)}),$=e=>{M.current&&"touchstart"!==e.type||(O&&O.removeAttribute("title"),clearTimeout(N.current),clearTimeout(S.current),p||hystersisOpen&&u?(e.persist(),N.current=setTimeout(()=>{V(e)},hystersisOpen?u:p)):V(e))},G=e=>{clearTimeout(N.current),clearTimeout(S.current),e.persist(),S.current=setTimeout(()=>{U(e)},h)},{isFocusVisibleRef:Y,onBlur:X,onFocus:J,ref:K}=(0,_useIsFocusVisible.default)(),[,Q]=React.useState(!1),Z=e=>{X(e),!1===Y.current&&(Q(!1),G(e))},ee=e=>{O||C(e.currentTarget),J(e),!0===Y.current&&(Q(!0),$(e))},te=e=>{M.current=!0;const t=o.props;t.onTouchStart&&t.onTouchStart(e)},re=$,oe=G,ne=e=>{te(e),clearTimeout(S.current),clearTimeout(F.current),z(),e.persist(),H.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",I.current=setTimeout(()=>{document.body.style.WebkitUserSelect=H.current,$(e)},c)},ie=e=>{o.props.onTouchEnd&&o.props.onTouchEnd(e),clearTimeout(I.current),clearTimeout(S.current),e.persist(),S.current=setTimeout(()=>{U(e)},y)};React.useEffect(()=>{if(B)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)};function e(e){"Escape"!==e.key&&"Esc"!==e.key||U(e)}},[U,B]);const se=(0,_useForkRef.default)(C,t),ae=(0,_useForkRef.default)(K,se),le=(0,_useForkRef.default)(o.ref,ae);""===x&&(B=!1);const pe=React.useRef({x:0,y:0}),ue=React.useRef(),ce={},de="string"==typeof x;i?(ce.title=B||!de||a?null:x,ce["aria-describedby"]=B?A:null):(ce["aria-label"]=de?x:null,ce["aria-labelledby"]=B&&!de?A:null);const me=(0,_extends2.default)({},ce,E,o.props,{className:(0,_clsx.default)(E.className,o.props.className),onTouchStart:te,ref:le},d?{onMouseMove:e=>{const t=o.props;t.onMouseMove&&t.onMouseMove(e),pe.current={x:e.clientX,y:e.clientY},ue.current&&ue.current.update()}}:{});"production"!==process.env.NODE_ENV&&(me["data-mui-internal-clone-element"]=!0,React.useEffect(()=>{O&&!O.getAttribute("data-mui-internal-clone-element")&&console.error(["Material-UI: The `children` component of the Tooltip is not forwarding its props correctly.","Please make sure that props are spread on the same element that the ref is applied to."].join("\n"))},[O]));const fe={};l||(me.onTouchStart=ne,me.onTouchEnd=ie),a||(me.onMouseOver=composeEventHandler(re,me.onMouseOver),me.onMouseLeave=composeEventHandler(oe,me.onMouseLeave),L||(fe.onMouseOver=re,fe.onMouseLeave=oe)),s||(me.onFocus=composeEventHandler(ee,me.onFocus),me.onBlur=composeEventHandler(Z,me.onBlur),L||(fe.onFocus=ee,fe.onBlur=Z)),"production"!==process.env.NODE_ENV&&o.props.title&&console.error(["Material-UI: You have provided a `title` prop to the child of <Tooltip />.",`Remove this title prop \`${o.props.title}\` or the Tooltip component.`].join("\n"));const he=React.useMemo(()=>{var e;let t=[{name:"arrow",enabled:Boolean(k),options:{element:k,padding:4}}];return null!==(e=v.popperOptions)&&void 0!==e&&e.modifiers&&(t=t.concat(v.popperOptions.modifiers)),(0,_extends2.default)({},v.popperOptions,{modifiers:t})},[k,v]);return React.createElement(React.Fragment,null,React.cloneElement(o,me),React.createElement(g,(0,_extends2.default)({className:(0,_clsx.default)(n.popper,!L&&n.popperInteractive,r&&n.popperArrow),placement:R,anchorEl:d?{getBoundingClientRect:()=>({top:pe.current.y,left:pe.current.x,right:pe.current.x,bottom:pe.current.y,width:0,height:0})}:O,popperRef:ue,open:!!O&&B,id:A,transition:!0},fe,v,{popperOptions:he}),({placement:e,TransitionProps:t})=>React.createElement(q,(0,_extends2.default)({timeout:D.transitions.duration.shorter},t,w),React.createElement("div",{className:(0,_clsx.default)(n.tooltip,n[`tooltipPlacement${(0,_capitalize.default)(e.split("-")[0])}`],M.current&&n.touch,r&&n.tooltipArrow)},x,r?React.createElement("span",{className:n.arrow,ref:P}):null))))});"production"!==process.env.NODE_ENV&&(Tooltip.propTypes={arrow:_propTypes.default.bool,children:_utils.elementAcceptingRef.isRequired,classes:_propTypes.default.object,className:_propTypes.default.string,describeChild:_propTypes.default.bool,disableFocusListener:_propTypes.default.bool,disableHoverListener:_propTypes.default.bool,disableInteractive:_propTypes.default.bool,disableTouchListener:_propTypes.default.bool,enterDelay:_propTypes.default.number,enterNextDelay:_propTypes.default.number,enterTouchDelay:_propTypes.default.number,followCursor:_propTypes.default.bool,id:_propTypes.default.string,leaveDelay:_propTypes.default.number,leaveTouchDelay:_propTypes.default.number,onClose:_propTypes.default.func,onOpen:_propTypes.default.func,open:_propTypes.default.bool,placement:_propTypes.default.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),PopperComponent:_propTypes.default.elementType,PopperProps:_propTypes.default.object,title:_propTypes.default.node.isRequired,TransitionComponent:_propTypes.default.elementType,TransitionProps:_propTypes.default.object});var _default=(0,_withStyles.default)(styles,{name:"MuiTooltip",flip:!1})(Tooltip);exports.default=_default;