"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutPropertiesLoose2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutPropertiesLoose")),React=_interopRequireWildcard(require("react")),_reactIs=require("react-is"),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_Popover=_interopRequireDefault(require("../Popover")),_MenuList=_interopRequireDefault(require("../MenuList")),_setRef=_interopRequireDefault(require("../utils/setRef")),_useTheme=_interopRequireDefault(require("../styles/useTheme"));const RTL_ORIGIN={vertical:"top",horizontal:"right"},LTR_ORIGIN={vertical:"top",horizontal:"left"},styles={paper:{maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"},list:{outline:0}};exports.styles=styles;const Menu=React.forwardRef(function(e,t){const{autoFocus:r=!0,children:o,classes:s,disableAutoFocusItem:a=!1,MenuListProps:n={},onClose:u,open:i,PaperProps:p={},PopoverClasses:l,transitionDuration:c="auto",variant:d="selectedMenu",TransitionProps:{onEntering:f}={}}=e,_=(0,_objectWithoutPropertiesLoose2.default)(e.TransitionProps,["onEntering"]),R=(0,_objectWithoutPropertiesLoose2.default)(e,["autoFocus","children","classes","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","variant","TransitionProps"]),y=(0,_useTheme.default)(),T=r&&!a&&i,b=React.useRef(null),m=React.useRef(null);let h=-1;React.Children.map(o,(e,t)=>{React.isValidElement(e)&&("production"!==process.env.NODE_ENV&&(0,_reactIs.isFragment)(e)&&console.error(["Material-UI: The Menu component doesn't accept a Fragment as a child.","Consider providing an array instead."].join("\n")),e.props.disabled||("menu"!==d&&e.props.selected?h=t:-1===h&&(h=t)))});const q=React.Children.map(o,(e,t)=>t===h?React.cloneElement(e,{ref:t=>{m.current=t,(0,_setRef.default)(e.ref,t)}}):e);return React.createElement(_Popover.default,(0,_extends2.default)({getContentAnchorEl:()=>m.current,classes:l,onClose:u,anchorOrigin:"rtl"===y.direction?RTL_ORIGIN:LTR_ORIGIN,transformOrigin:"rtl"===y.direction?RTL_ORIGIN:LTR_ORIGIN,PaperProps:(0,_extends2.default)({},p,{classes:(0,_extends2.default)({},p.classes,{root:s.paper})}),open:i,ref:t,transitionDuration:c,TransitionProps:(0,_extends2.default)({onEntering:(e,t)=>{b.current&&b.current.adjustStyleForScrollbar(e,y),f&&f(e,t)}},_)},R),React.createElement(_MenuList.default,(0,_extends2.default)({onKeyDown:e=>{"Tab"===e.key&&(e.preventDefault(),u&&u(e,"tabKeyDown"))},actions:b,autoFocus:r&&(-1===h||a),autoFocusItem:T,variant:d},n,{className:(0,_clsx.default)(s.list,n.className)}),q))});"production"!==process.env.NODE_ENV&&(Menu.propTypes={anchorEl:_propTypes.default.oneOfType([_utils.HTMLElementType,_propTypes.default.func]),autoFocus:_propTypes.default.bool,children:_propTypes.default.node,classes:_propTypes.default.object,disableAutoFocusItem:_propTypes.default.bool,MenuListProps:_propTypes.default.object,onClose:_propTypes.default.func,open:_propTypes.default.bool.isRequired,PaperProps:_propTypes.default.object,PopoverClasses:_propTypes.default.object,transitionDuration:_propTypes.default.oneOfType([_propTypes.default.oneOf(["auto"]),_propTypes.default.number,_propTypes.default.shape({appear:_propTypes.default.number,enter:_propTypes.default.number,exit:_propTypes.default.number})]),TransitionProps:_propTypes.default.object,variant:_propTypes.default.oneOf(["menu","selectedMenu"])});var _default=(0,_withStyles.default)(styles,{name:"MuiMenu"})(Menu);exports.default=_default;