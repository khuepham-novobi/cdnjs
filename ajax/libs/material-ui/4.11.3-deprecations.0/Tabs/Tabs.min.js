"use strict";var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard"),_interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.styles=void 0;var _extends2=_interopRequireDefault(require("@babel/runtime/helpers/extends")),_objectWithoutProperties2=_interopRequireDefault(require("@babel/runtime/helpers/objectWithoutProperties")),_defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty")),React=_interopRequireWildcard(require("react")),_reactIs=require("react-is"),_propTypes=_interopRequireDefault(require("prop-types")),_clsx=_interopRequireDefault(require("clsx")),_utils=require("@material-ui/utils"),_debounce=_interopRequireDefault(require("../utils/debounce")),_ownerWindow=_interopRequireDefault(require("../utils/ownerWindow")),_scrollLeft=require("../utils/scrollLeft"),_animate=_interopRequireDefault(require("../internal/animate")),_ScrollbarSize=_interopRequireDefault(require("./ScrollbarSize")),_withStyles=_interopRequireDefault(require("../styles/withStyles")),_TabIndicator=_interopRequireDefault(require("./TabIndicator")),_TabScrollButton=_interopRequireDefault(require("../TabScrollButton")),_useEventCallback=_interopRequireDefault(require("../utils/useEventCallback")),_useTheme=_interopRequireDefault(require("../styles/useTheme")),styles=function(e){return{root:{overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},vertical:{flexDirection:"column"},flexContainer:{display:"flex"},flexContainerVertical:{flexDirection:"column"},centered:{justifyContent:"center"},scroller:{position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},fixed:{overflowX:"hidden",width:"100%"},scrollable:{overflowX:"scroll",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},scrollButtons:{},scrollButtonsDesktop:(0,_defineProperty2.default)({},e.breakpoints.down("xs"),{display:"none"}),indicator:{}}};exports.styles=styles;var Tabs=React.forwardRef(function(e,t){var r=e["aria-label"],l=e["aria-labelledby"],o=e.action,a=e.centered,n=void 0!==a&&a,i=e.children,c=e.classes,s=e.className,u=e.component,d=void 0===u?"div":u,f=e.indicatorColor,p=void 0===f?"secondary":f,b=e.onChange,a=e.orientation,_=void 0===a?"horizontal":a,u=e.ScrollButtonComponent,v=void 0===u?_TabScrollButton.default:u,f=e.scrollButtons,h=void 0===f?"auto":f,m=e.selectionFollowsFocus,a=e.TabIndicatorProps,u=void 0===a?{}:a,y=e.TabScrollButtonProps,f=e.textColor,T=void 0===f?"inherit":f,R=e.value,a=e.variant,g=void 0===a?"standard":a,f=(0,_objectWithoutProperties2.default)(e,["aria-label","aria-labelledby","action","centered","children","classes","className","component","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant"]),q=(0,_useTheme.default)(),w="scrollable"===g,C="rtl"===q.direction,x="vertical"===_,S=x?"scrollTop":"scrollLeft",E=x?"top":"left",D=x?"bottom":"right",B=x?"clientHeight":"clientWidth",N=x?"height":"width";"production"!==process.env.NODE_ENV&&n&&w&&console.error('Material-UI: You can not use the `centered={true}` and `variant="scrollable"` properties at the same time on a `Tabs` component.');function k(){var e,t,r=U.current;return r&&(e=r.getBoundingClientRect(),e={clientWidth:r.clientWidth,scrollLeft:r.scrollLeft,scrollTop:r.scrollTop,scrollLeftNormalized:(0,_scrollLeft.getNormalizedScrollLeft)(r,q.direction),scrollWidth:r.scrollWidth,top:e.top,bottom:e.bottom,left:e.left,right:e.right}),!r||!1===R||0<(r=X.current.children).length&&(t=r[H.get(R)],"production"!==process.env.NODE_ENV&&(t||console.error(["Material-UI: The value provided to the Tabs component is invalid.","None of the Tabs' children match with `".concat(R,"`."),H.keys?"You can provide one of the following values: ".concat(Array.from(H.keys()).join(", "),"."):null].join("\n"))),t=t?t.getBoundingClientRect():null),{tabsMeta:e,tabMeta:t}}function W(e){(0,_animate.default)(S,U.current,e)}function L(e){var t=U.current[S];x?t+=e:(t+=e*(C?-1:1),t*=C&&"reverse"===(0,_scrollLeft.detectScrollType)()?-1:1),W(t)}function P(){L(-U.current[B])}function M(){L(U.current[B])}var a=React.useState(!1),z=a[0],I=a[1],e=React.useState({}),j=e[0],O=e[1],a=React.useState({start:!1,end:!1}),F=a[0],A=a[1],e=React.useState({overflow:"hidden",marginBottom:null}),a=e[0],V=e[1],H=new Map,U=React.useRef(null),X=React.useRef(null),Y=(0,_useEventCallback.default)(function(){var e=k(),t=e.tabsMeta,r=e.tabMeta,e=0;r&&t&&(e=x?r.top-t.top+t.scrollTop:(l=C?t.scrollLeftNormalized+t.clientWidth-t.scrollWidth:t.scrollLeft,r.left-t.left+l));var l,e=(l={},(0,_defineProperty2.default)(l,E,e),(0,_defineProperty2.default)(l,N,r?r[N]:0),l);isNaN(j[E])||isNaN(j[N])?O(e):(r=Math.abs(j[E]-e[E]),l=Math.abs(j[N]-e[N]),(1<=r||1<=l)&&O(e))}),K=React.useCallback(function(e){V({overflow:null,marginBottom:-e})},[]),G=(0,_useEventCallback.default)(function(){var e=k(),t=e.tabsMeta,r=e.tabMeta;r&&t&&(r[E]<t[E]?(e=t[S]+(r[E]-t[E]),W(e)):r[D]>t[D]&&(t=t[S]+(r[D]-t[D]),W(t)))}),J=(0,_useEventCallback.default)(function(){var e,t,r,l,o,a;w&&"off"!==h&&(e=(a=U.current).scrollTop,t=a.scrollHeight,l=a.clientHeight,r=a.scrollWidth,a=a.clientWidth,a=x?(o=1<e,e<t-l-1):(l=(0,_scrollLeft.getNormalizedScrollLeft)(U.current,q.direction),o=C?l<r-a-1:1<l,C?1<l:l<r-a-1),o===F.start&&a===F.end||A({start:o,end:a}))});React.useEffect(function(){var e=(0,_debounce.default)(function(){Y(),J()}),t=(0,_ownerWindow.default)(U.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}},[Y,J]);var Q=React.useCallback((0,_debounce.default)(function(){J()}));React.useEffect(function(){return function(){Q.clear()}},[Q]),React.useEffect(function(){I(!0)},[]),React.useEffect(function(){Y(),J()}),React.useEffect(function(){G()},[G,j]),React.useImperativeHandle(o,function(){return{updateIndicator:Y,updateScrollButtons:J}},[Y,J]);var Z=React.createElement(_TabIndicator.default,(0,_extends2.default)({className:c.indicator,orientation:_,color:p},u,{style:(0,_extends2.default)({},j,u.style)})),$=0,u=React.Children.map(i,function(e){if(!React.isValidElement(e))return null;"production"!==process.env.NODE_ENV&&(0,_reactIs.isFragment)(e)&&console.error(["Material-UI: The Tabs component doesn't accept a Fragment as a child.","Consider providing an array instead."].join("\n"));var t=void 0===e.props.value?$:e.props.value;H.set(t,$);var r=t===R;return $+=1,React.cloneElement(e,{fullWidth:"fullWidth"===g,indicator:r&&!z&&Z,selected:r,selectionFollowsFocus:m,onChange:b,textColor:T,value:t})}),i=function(){var e={};e.scrollbarSizeListener=w?React.createElement(_ScrollbarSize.default,{className:c.scrollable,onChange:K}):null;var t=F.start||F.end,t=w&&("auto"===h&&t||"desktop"===h||"on"===h);return e.scrollButtonStart=t?React.createElement(v,(0,_extends2.default)({orientation:_,direction:C?"right":"left",onClick:P,disabled:!F.start,className:(0,_clsx.default)(c.scrollButtons,"on"!==h&&c.scrollButtonsDesktop)},y)):null,e.scrollButtonEnd=t?React.createElement(v,(0,_extends2.default)({orientation:_,direction:C?"left":"right",onClick:M,disabled:!F.end,className:(0,_clsx.default)(c.scrollButtons,"on"!==h&&c.scrollButtonsDesktop)},y)):null,e}();return React.createElement(d,(0,_extends2.default)({className:(0,_clsx.default)(c.root,s,x&&c.vertical),ref:t},f),i.scrollButtonStart,i.scrollbarSizeListener,React.createElement("div",{className:(0,_clsx.default)(c.scroller,w?c.scrollable:c.fixed),style:a,ref:U,onScroll:Q},React.createElement("div",{"aria-label":r,"aria-labelledby":l,className:(0,_clsx.default)(c.flexContainer,x&&c.flexContainerVertical,n&&!w&&c.centered),onKeyDown:function(e){var t=e.target;if("tab"===t.getAttribute("role")){var r=null,l="vertical"!==_?"ArrowLeft":"ArrowUp",o="vertical"!==_?"ArrowRight":"ArrowDown";switch("vertical"!==_&&"rtl"===q.direction&&(l="ArrowRight",o="ArrowLeft"),e.key){case l:r=t.previousElementSibling||X.current.lastChild;break;case o:r=t.nextElementSibling||X.current.firstChild;break;case"Home":r=X.current.firstChild;break;case"End":r=X.current.lastChild}null!==r&&(r.focus(),e.preventDefault())}},ref:X,role:"tablist"},u),z&&Z),i.scrollButtonEnd)});"production"!==process.env.NODE_ENV&&(Tabs.propTypes={action:_utils.refType,"aria-label":_propTypes.default.string,"aria-labelledby":_propTypes.default.string,centered:_propTypes.default.bool,children:_propTypes.default.node,classes:_propTypes.default.object,className:_propTypes.default.string,component:_propTypes.default.elementType,indicatorColor:_propTypes.default.oneOf(["primary","secondary"]),onChange:_propTypes.default.func,orientation:_propTypes.default.oneOf(["horizontal","vertical"]),ScrollButtonComponent:_propTypes.default.elementType,scrollButtons:_propTypes.default.oneOf(["auto","desktop","off","on"]),selectionFollowsFocus:_propTypes.default.bool,TabIndicatorProps:_propTypes.default.object,TabScrollButtonProps:_propTypes.default.object,textColor:_propTypes.default.oneOf(["inherit","primary","secondary"]),value:_propTypes.default.any,variant:_propTypes.default.oneOf(["fullWidth","scrollable","standard"])});var _default=(0,_withStyles.default)(styles,{name:"MuiTabs"})(Tabs);exports.default=_default;