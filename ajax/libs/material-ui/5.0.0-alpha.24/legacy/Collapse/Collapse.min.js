import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import _defineProperty from"@babel/runtime/helpers/esm/defineProperty";import _extends from"@babel/runtime/helpers/esm/extends";import*as React from"react";import clsx from"clsx";import PropTypes from"prop-types";import{Transition}from"react-transition-group";import{deepmerge,elementTypeAcceptingRef}from"@material-ui/utils";import{unstable_composeClasses as composeClasses}from"@material-ui/unstyled";import experimentalStyled from"../styles/experimentalStyled";import useThemeProps from"../styles/useThemeProps";import{duration}from"../styles/transitions";import{getTransitionProps}from"../transitions/utils";import useTheme from"../styles/useTheme";import{useForkRef}from"../utils";import collapseClasses,{getCollapseUtilityClass}from"./collapseClasses";var overridesResolver=function(e,t){var o,r=e.styleProps;return deepmerge(t.root||{},_extends({},t[r.orientation],"entered"===r.state&&t.entered,"exited"===r.state&&!r.in&&"0px"===r.collapsedSize&&t.hidden,(_defineProperty(o={},"& .".concat(collapseClasses.wrapper),t.wrapper),_defineProperty(o,"& .".concat(collapseClasses.wrapperInner),t.wrapperInner),o)))},useUtilityClasses=function(e){var t=e.orientation,o=e.classes,r={root:["root","".concat(t)],entered:["entered"],hidden:["hidden"],wrapper:["wrapper","".concat(t)],wrapperInner:["wrapperInner","".concat(t)]};return composeClasses(r,getCollapseUtilityClass,o)},CollapseRoot=experimentalStyled("div",{},{name:"MuiCollapse",slot:"Root",overridesResolver:overridesResolver})(function(e){var t=e.theme,o=e.styleProps;return _extends({height:0,overflow:"hidden",transition:t.transitions.create("height")},"horizontal"===o.orientation&&{height:"auto",width:0,transition:t.transitions.create("width")},"entered"===o.state&&_extends({height:"auto",overflow:"visible"},"horizontal"===o.orientation&&{width:"auto"}),"exited"===o.state&&!o.in&&"0px"===o.collapsedSize&&{visibility:"hidden"})}),CollapseWrapper=experimentalStyled("div",{},{name:"MuiCollapse",slot:"Wrapper"})(function(e){var t=e.styleProps;return _extends({display:"flex",width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})}),CollapseWrapperInner=experimentalStyled("div",{},{name:"MuiCollapse",slot:"WrapperInner"})(function(e){var t=e.styleProps;return _extends({width:"100%"},"horizontal"===t.orientation&&{width:"auto",height:"100%"})}),Collapse=React.forwardRef(function(e,t){var o=useThemeProps({props:e,name:"MuiCollapse"}),r=o.children,n=o.className,s=o.collapsedSize,i=void 0===s?"0px":s,a=o.component,p=o.in,l=o.onEnter,c=o.onEntered,u=o.onEntering,d=o.onExit,m=o.onExited,y=o.onExiting,f=o.orientation,h=void 0===f?"vertical":f,x=o.style,P=o.timeout,T=void 0===P?duration.standard:P,g=o.TransitionComponent,v=void 0===g?Transition:g,E=_objectWithoutProperties(o,["children","className","collapsedSize","component","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"]),C=_extends({},o,{orientation:h,collapsedSize:i}),R=useUtilityClasses(C),b=useTheme(),w=React.useRef(),_=React.useRef(null),z=React.useRef(),S="number"==typeof i?"".concat(i,"px"):i,W="horizontal"===h,I=W?"width":"height";React.useEffect(function(){return function(){clearTimeout(w.current)}},[]);var N=React.useRef(null),D=useForkRef(t,N),j=function(e){return function(t){if(e){var o=N.current;void 0===t?e(o):e(o,t)}}},A=function(){return _.current?_.current[W?"clientWidth":"clientHeight"]:0},O=j(function(e,t){_.current&&W&&(_.current.style.position="absolute"),e.style[I]=S,l&&l(e,t)}),H=j(function(e,t){var o=A();_.current&&W&&(_.current.style.position="");var r=getTransitionProps({style:x,timeout:T},{mode:"enter"}).duration;if("auto"===T){var n=b.transitions.getAutoHeightDuration(o);e.style.transitionDuration="".concat(n,"ms"),z.current=n}else e.style.transitionDuration="string"==typeof r?r:"".concat(r,"ms");e.style[I]="".concat(o,"px"),u&&u(e,t)}),M=j(function(e,t){e.style[I]="auto",c&&c(e,t)}),U=j(function(e){e.style[I]="".concat(A(),"px"),d&&d(e)}),k=j(m),F=j(function(e){var t=A(),o=getTransitionProps({style:x,timeout:T},{mode:"exit"}).duration;if("auto"===T){var r=b.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(r,"ms"),z.current=r}else e.style.transitionDuration="string"==typeof o?o:"".concat(o,"ms");e.style[I]=S,y&&y(e)});return React.createElement(v,_extends({in:p,onEnter:O,onEntered:M,onEntering:H,onExit:U,onExited:k,onExiting:F,addEndListener:function(e){"auto"===T&&(w.current=setTimeout(e,z.current||0))},nodeRef:N,timeout:"auto"===T?null:T},E),function(e,t){return React.createElement(CollapseRoot,_extends({as:a,className:clsx(R.root,n,{entered:R.entered,exited:!p&&"0px"===S&&R.hidden}[e]),style:_extends(_defineProperty({},W?"minWidth":"minHeight",S),x),styleProps:_extends({},C,{state:e}),ref:D},t),React.createElement(CollapseWrapper,{styleProps:_extends({},C,{state:e}),className:R.wrapper,ref:_},React.createElement(CollapseWrapperInner,{styleProps:_extends({},C,{state:e}),className:R.wrapperInner},r)))})});"production"!==process.env.NODE_ENV&&(Collapse.propTypes={children:PropTypes.node,classes:PropTypes.object,className:PropTypes.string,collapsedSize:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),component:elementTypeAcceptingRef,in:PropTypes.bool,onEnter:PropTypes.func,onEntered:PropTypes.func,onEntering:PropTypes.func,onExit:PropTypes.func,onExited:PropTypes.func,onExiting:PropTypes.func,orientation:PropTypes.oneOf(["horizontal","vertical"]),style:PropTypes.object,sx:PropTypes.object,timeout:PropTypes.oneOfType([PropTypes.oneOf(["auto"]),PropTypes.number,PropTypes.shape({appear:PropTypes.number,enter:PropTypes.number,exit:PropTypes.number})])}),Collapse.muiSupportAuto=!0;export default Collapse;