import _extends from"@babel/runtime/helpers/esm/extends";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import*as React from"react";import PropTypes from"prop-types";import{Transition}from"react-transition-group";import{elementAcceptingRef}from"@material-ui/utils";import debounce from"../utils/debounce";import useForkRef from"../utils/useForkRef";import useTheme from"../styles/useTheme";import{duration}from"../styles/transitions";import{reflow,getTransitionProps}from"../transitions/utils";import{ownerWindow}from"../utils";function getTranslateValue(e,t){var n,r=t.getBoundingClientRect(),o=ownerWindow(t);if(t.fakeTransform)n=t.fakeTransform;else{var i=o.getComputedStyle(t);n=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("transform")}var s=0,a=0;if(n&&"none"!==n&&"string"==typeof n){var p=n.split("(")[1].split(")")[0].split(",");s=parseInt(p[4],10),a=parseInt(p[5],10)}return"left"===e?"translateX(".concat(o.innerWidth,"px) translateX(").concat(s-r.left,"px)"):"right"===e?"translateX(-".concat(r.left+r.width-s,"px)"):"up"===e?"translateY(".concat(o.innerHeight,"px) translateY(").concat(a-r.top,"px)"):"translateY(-".concat(r.top+r.height-a,"px)")}export function setTranslateValue(e,t){var n=getTranslateValue(e,t);n&&(t.style.webkitTransform=n,t.style.transform=n)};var defaultTimeout={enter:duration.enteringScreen,exit:duration.leavingScreen},Slide=React.forwardRef(function(e,t){var n=e.appear,r=void 0===n||n,o=e.children,i=e.direction,s=void 0===i?"down":i,a=e.in,p=e.onEnter,u=e.onEntered,l=e.onEntering,c=e.onExit,f=e.onExited,m=e.onExiting,d=e.style,T=e.timeout,y=void 0===T?defaultTimeout:T,g=e.TransitionComponent,x=void 0===g?Transition:g,E=_objectWithoutProperties(e,["appear","children","direction","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),b=useTheme(),P=React.useRef(null),h=useForkRef(o.ref,P),v=useForkRef(h,t),w=function(e){return function(t){e&&(void 0===t?e(P.current):e(P.current,t))}},R=w(function(e,t){setTranslateValue(s,e),reflow(e),p&&p(e,t)}),k=w(function(e,t){var n=getTransitionProps({timeout:y,style:d},{mode:"enter"});e.style.webkitTransition=b.transitions.create("-webkit-transform",_extends({},n,{easing:b.transitions.easing.easeOut})),e.style.transition=b.transitions.create("transform",_extends({},n,{easing:b.transitions.easing.easeOut})),e.style.webkitTransform="none",e.style.transform="none",l&&l(e,t)}),_=w(u),V=w(m),W=w(function(e){var t=getTransitionProps({timeout:y,style:d},{mode:"exit"});e.style.webkitTransition=b.transitions.create("-webkit-transform",_extends({},t,{easing:b.transitions.easing.sharp})),e.style.transition=b.transitions.create("transform",_extends({},t,{easing:b.transitions.easing.sharp})),setTranslateValue(s,e),c&&c(e)}),S=w(function(e){e.style.webkitTransition="",e.style.transition="",f&&f(e)}),C=React.useCallback(function(){P.current&&setTranslateValue(s,P.current)},[s]);return React.useEffect(function(){if(!a&&"down"!==s&&"right"!==s){var e=debounce(function(){P.current&&setTranslateValue(s,P.current)}),t=ownerWindow(P.current);return t.addEventListener("resize",e),function(){e.clear(),t.removeEventListener("resize",e)}}},[s,a]),React.useEffect(function(){a||C()},[a,C]),React.createElement(x,_extends({nodeRef:P,onEnter:R,onEntered:_,onEntering:k,onExit:W,onExited:S,onExiting:V,appear:r,in:a,timeout:y},E),function(e,t){return React.cloneElement(o,_extends({ref:v,style:_extends({visibility:"exited"!==e||a?void 0:"hidden"},d,o.props.style)},t))})});"production"!==process.env.NODE_ENV&&(Slide.propTypes={appear:PropTypes.bool,children:elementAcceptingRef,direction:PropTypes.oneOf(["down","left","right","up"]),in:PropTypes.bool,onEnter:PropTypes.func,onEntered:PropTypes.func,onEntering:PropTypes.func,onExit:PropTypes.func,onExited:PropTypes.func,onExiting:PropTypes.func,style:PropTypes.object,timeout:PropTypes.oneOfType([PropTypes.number,PropTypes.shape({appear:PropTypes.number,enter:PropTypes.number,exit:PropTypes.number})])});export default Slide;