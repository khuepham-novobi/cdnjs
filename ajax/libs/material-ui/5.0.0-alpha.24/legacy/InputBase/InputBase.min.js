import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import _defineProperty from"@babel/runtime/helpers/esm/defineProperty";import _extends from"@babel/runtime/helpers/esm/extends";import{formatMuiErrorMessage as _formatMuiErrorMessage}from"@material-ui/utils";import*as React from"react";import PropTypes from"prop-types";import clsx from"clsx";import{refType,elementTypeAcceptingRef,deepmerge}from"@material-ui/utils";import{unstable_composeClasses as composeClasses}from"@material-ui/unstyled";import formControlState from"../FormControl/formControlState";import FormControlContext,{useFormControl}from"../FormControl/FormControlContext";import experimentalStyled,{shouldForwardProp as _shouldForwardProp}from"../styles/experimentalStyled";import useThemeProps from"../styles/useThemeProps";import capitalize from"../utils/capitalize";import useForkRef from"../utils/useForkRef";import useEnhancedEffect from"../utils/useEnhancedEffect";import TextareaAutosize from"../TextareaAutosize";import GlobalStyles from"../GlobalStyles";import{isFilled}from"./utils";import inputBaseClasses,{getInputBaseUtilityClass}from"./inputBaseClasses";var overridesResolver=function(e,o){var t=e.styleProps;return deepmerge(o.root||{},_extends({},t.formControl&&o.formControl,t.startAdornment&&o.adornedStart,t.endAdornment&&o.adornedEnd,t.error&&o.error,"small"===t.size&&o.sizeSmall,t.multiline&&o.multiline,t.color&&o["color".concat(capitalize(t.color))],t.fullWidth&&o.fullWidth,t.hiddenLabel&&o.hiddenLabel,_defineProperty({},"& .".concat(inputBaseClasses.input),_extends({},o.input,"small"===t.size&&o.inputSizeSmall,t.multiline&&o.inputMultiline,"search"===t.type&&o.inputTypeSearch,t.startAdornment&&o.inputAdornedStart,t.endAdornment&&o.inputAdornedEnd,t.hiddenLabel&&o.inputHiddenLabel))))},useUtilityClasses=function(e){var o=e.classes,t=e.color,r=e.disabled,n=e.error,i=e.endAdornment,a=e.focused,s=e.formControl,l=e.fullWidth,p=e.hiddenLabel,u=e.multiline,d=e.size,c=e.startAdornment,m=e.type,f={root:["root","color".concat(capitalize(t)),r&&"disabled",n&&"error",l&&"fullWidth",a&&"focused",s&&"formControl","small"===d&&"sizeSmall",u&&"multiline",c&&"adornedStart",i&&"adornedEnd",p&&"hiddenLabel"],input:["input",r&&"disabled","search"===m&&"inputTypeSearch",u&&"inputMultiline","small"===d&&"inputSizeSmall",p&&"inputHiddenLabel",c&&"inputAdornedStart",i&&"inputAdornedEnd"]};return composeClasses(f,getInputBaseUtilityClass,o)},InputBaseRoot=experimentalStyled("div",{},{name:"MuiInputBase",slot:"Root",overridesResolver:overridesResolver})(function(e){var o=e.theme,t=e.styleProps;return _extends({},o.typography.body1,{color:o.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&.Mui-disabled":{color:o.palette.text.disabled,cursor:"default"}},t.multiline&&_extends({padding:"4px 0 5px"},"small"===t.size&&{paddingTop:1}),t.fullWidth&&{width:"100%"})}),InputBaseComponent=experimentalStyled("input",{shouldForwardProp:function(e){return _shouldForwardProp(e)||"classes"===e}},{name:"MuiInputBase",slot:"Input"})(function(e){var o,t=e.theme,r=e.styleProps,n="light"===t.palette.mode,i={color:"currentColor",opacity:n?.42:.5,transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})},a={opacity:"0 !important"},s={opacity:n?.42:.5};return _extends((_defineProperty(o={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},"label[data-shrink=false] + .".concat(inputBaseClasses.formControl," &"),{"&::-webkit-input-placeholder":a,"&::-moz-placeholder":a,"&:-ms-input-placeholder":a,"&::-ms-input-placeholder":a,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s}),_defineProperty(o,"&.Mui-disabled",{opacity:1,WebkitTextFillColor:t.palette.text.disabled}),_defineProperty(o,"&:-webkit-auto-fill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),o),"small"===r.size&&{paddingTop:1},r.multiline&&{height:"auto",resize:"none",padding:0},"search"===r.type&&{MozAppearance:"textfield",WebkitAppearance:"textfield"})}),InputBase=React.forwardRef(function(e,o){var t=useThemeProps({props:e,name:"MuiInputBase"}),r=t["aria-describedby"],n=t.autoComplete,i=t.autoFocus,a=t.className,s=(t.color,t.defaultValue),l=t.disabled,p=t.endAdornment,u=(t.error,t.fullWidth),d=void 0!==u&&u,c=t.id,m=t.inputComponent,f=void 0===m?"input":m,y=t.inputProps,h=void 0===y?{}:y,b=t.inputRef,P=(t.margin,t.maxRows),T=t.minRows,x=t.multiline,C=void 0!==x&&x,g=t.name,v=t.onBlur,R=t.onChange,w=t.onClick,E=t.onFocus,F=t.onKeyDown,S=t.onKeyUp,A=t.placeholder,z=t.readOnly,_=t.renderSuffix,k=t.rows,B=(t.size,t.startAdornment),N=t.type,I=void 0===N?"text":N,M=t.value,W=_objectWithoutProperties(t,["aria-describedby","autoComplete","autoFocus","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"]),O=null!=h.value?h.value:M,D=React.useRef(null!=O).current,U=React.useRef(),L=React.useCallback(function(e){"production"!==process.env.NODE_ENV&&e&&"INPUT"!==e.nodeName&&!e.focus&&console.error(["Material-UI: You have provided a `inputComponent` to the input component","that does not correctly handle the `ref` prop.","Make sure the `ref` prop is called with a HTMLInputElement."].join("\n"))},[]),V=useForkRef(h.ref,L),K=useForkRef(b,V),j=useForkRef(U,K),H=React.useState(!1),q=H[0],G=H[1],Y=useFormControl();"production"!==process.env.NODE_ENV&&React.useEffect(function(){if(Y)return Y.registerEffect()},[Y]);var J=formControlState({props:t,muiFormControl:Y,states:["color","disabled","error","hiddenLabel","size","required","filled"]});J.focused=Y?Y.focused:q,React.useEffect(function(){!Y&&l&&q&&(G(!1),v&&v())},[Y,l,q,v]);var Q=Y&&Y.onFilled,X=Y&&Y.onEmpty,Z=React.useCallback(function(e){isFilled(e)?Q&&Q():X&&X()},[Q,X]);useEnhancedEffect(function(){D&&Z({value:O})},[O,Z,D]);React.useEffect(function(){Z(U.current)},[]);var $=f,ee=h;C&&"input"===$&&(k?("production"!==process.env.NODE_ENV&&(T||P)&&console.warn("Material-UI: You can not use the `minRows` or `maxRows` props when the input `rows` prop is set."),ee=_extends({type:void 0},ee),$="textarea"):(ee=_extends({type:void 0,maxRows:P,minRows:T},ee),$=TextareaAutosize));React.useEffect(function(){Y&&Y.setAdornedStart(Boolean(B))},[Y,B]);var oe=_extends({},t,{color:J.color||"primary",disabled:J.disabled,endAdornment:p,error:J.error,focused:J.focused,formControl:Y,fullWidth:d,hiddenLabel:J.hiddenLabel,multiline:C,size:J.size,startAdornment:B,type:I}),te=useUtilityClasses(oe);return React.createElement(React.Fragment,null,React.createElement(GlobalStyles,{styles:{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}}}),React.createElement(InputBaseRoot,_extends({className:clsx(te.root,a),styleProps:oe,onClick:function(e){U.current&&e.currentTarget===e.target&&U.current.focus(),w&&w(e)},ref:o},W),B,React.createElement(FormControlContext.Provider,{value:null},React.createElement(InputBaseComponent,_extends({as:$,styleProps:oe,"aria-invalid":J.error,"aria-describedby":r,autoComplete:n,autoFocus:i,defaultValue:s,disabled:J.disabled,id:c,onAnimationStart:function(e){Z("mui-auto-fill-cancel"===e.animationName?U.current:{value:"x"})},name:g,placeholder:A,readOnly:z,required:J.required,rows:k,value:O,onKeyDown:F,onKeyUp:S,type:I},ee,{ref:j,className:clsx(te.input,h.className),onBlur:function(e){v&&v(e),h.onBlur&&h.onBlur(e),Y&&Y.onBlur?Y.onBlur(e):G(!1)},onChange:function(e){if(!D){var o=e.target||U.current;if(null==o)throw new Error("production"!==process.env.NODE_ENV?"Material-UI: Expected valid input target. Did you use a custom `inputComponent` and forget to forward refs? See https://material-ui.com/r/input-component-ref-interface for more info.":_formatMuiErrorMessage(1));Z({value:o.value})}for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];h.onChange&&h.onChange.apply(h,[e].concat(r)),R&&R.apply(void 0,[e].concat(r))},onFocus:function(e){J.disabled?e.stopPropagation():(E&&E(e),h.onFocus&&h.onFocus(e),Y&&Y.onFocus?Y.onFocus(e):G(!0))}}))),p,_?_(_extends({},J,{startAdornment:B})):null))});"production"!==process.env.NODE_ENV&&(InputBase.propTypes={"aria-describedby":PropTypes.string,autoComplete:PropTypes.string,autoFocus:PropTypes.bool,classes:PropTypes.object,className:PropTypes.string,color:PropTypes.oneOf(["primary","secondary"]),defaultValue:PropTypes.any,disabled:PropTypes.bool,endAdornment:PropTypes.node,error:PropTypes.bool,fullWidth:PropTypes.bool,id:PropTypes.string,inputComponent:elementTypeAcceptingRef,inputProps:PropTypes.object,inputRef:refType,margin:PropTypes.oneOf(["dense","none"]),maxRows:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),minRows:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),multiline:PropTypes.bool,name:PropTypes.string,onBlur:PropTypes.func,onChange:PropTypes.func,onClick:PropTypes.func,onFocus:PropTypes.func,onKeyDown:PropTypes.func,onKeyUp:PropTypes.func,placeholder:PropTypes.string,readOnly:PropTypes.bool,renderSuffix:PropTypes.func,required:PropTypes.bool,rows:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),size:PropTypes.oneOf(["medium","small"]),startAdornment:PropTypes.node,sx:PropTypes.object,type:PropTypes.string,value:PropTypes.any});export default InputBase;