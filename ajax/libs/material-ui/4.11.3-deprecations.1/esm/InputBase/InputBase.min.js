import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import _extends from"@babel/runtime/helpers/esm/extends";import{formatMuiErrorMessage as _formatMuiErrorMessage}from"@material-ui/utils";import*as React from"react";import PropTypes from"prop-types";import clsx from"clsx";import{refType}from"@material-ui/utils";import formControlState from"../FormControl/formControlState";import FormControlContext,{useFormControl}from"../FormControl/FormControlContext";import withStyles from"../styles/withStyles";import capitalize from"../utils/capitalize";import useForkRef from"../utils/useForkRef";import TextareaAutosize from"../TextareaAutosize";import{isFilled}from"./utils";export var styles=function(e){var o="light"===e.palette.type,r={color:"currentColor",opacity:o?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},t={opacity:"0 !important"},n={opacity:o?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:_extends({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"".concat(6,"px 0 ").concat(7,"px"),"&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"".concat(6,"px 0 ").concat(7,"px"),border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&:-ms-input-placeholder":t,"&::-ms-input-placeholder":t,"&:focus::-webkit-input-placeholder":n,"&:focus::-moz-placeholder":n,"&:focus:-ms-input-placeholder":n,"&:focus::-ms-input-placeholder":n},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}};var useEnhancedEffect="undefined"==typeof window?React.useEffect:React.useLayoutEffect,InputBase=React.forwardRef(function(e,o){var r=e["aria-describedby"],t=e.autoComplete,n=e.autoFocus,a=e.classes,i=e.className,s=(e.color,e.defaultValue),p=e.disabled,l=e.endAdornment,u=(e.error,e.fullWidth),c=void 0!==u&&u,d=e.id,m=e.inputComponent,f=void 0===m?"input":m,y=e.inputProps,b=void 0===y?{}:y,h=e.inputRef,T=(e.margin,e.multiline),g=void 0!==T&&T,P=e.name,x=e.onBlur,w=e.onChange,C=e.onClick,v=e.onFocus,R=e.onKeyDown,E=e.onKeyUp,F=e.placeholder,k=e.readOnly,S=e.renderSuffix,M=e.rows,N=e.rowsMax,A=e.rowsMin,_=e.maxRows,D=e.minRows,O=e.startAdornment,z=e.type,B=void 0===z?"text":z,W=e.value,I=_objectWithoutProperties(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),K=null!=b.value?b.value:W,V=React.useRef(null!=K).current,U=React.useRef(),j=React.useCallback(function(e){"production"!==process.env.NODE_ENV&&e&&"INPUT"!==e.nodeName&&!e.focus&&console.error(["Material-UI: You have provided a `inputComponent` to the input component","that does not correctly handle the `inputRef` prop.","Make sure the `inputRef` prop is called with a HTMLInputElement."].join("\n"))},[]),L=useForkRef(b.ref,j),H=useForkRef(h,L),q=useForkRef(U,H),$=React.useState(!1),Y=$[0],G=$[1],J=useFormControl();"production"!==process.env.NODE_ENV&&React.useEffect(function(){if(J)return J.registerEffect()},[J]);var Q=formControlState({props:e,muiFormControl:J,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});Q.focused=J?J.focused:Y,React.useEffect(function(){!J&&p&&Y&&(G(!1),x&&x())},[J,p,Y,x]);var X=J&&J.onFilled,Z=J&&J.onEmpty,ee=React.useCallback(function(e){isFilled(e)?X&&X():Z&&Z()},[X,Z]);useEnhancedEffect(function(){V&&ee({value:K})},[K,ee,V]);React.useEffect(function(){ee(U.current)},[]);var oe=f,re=_extends({},b,{ref:q});"string"!=typeof oe?re=_extends({inputRef:q,type:B},re,{ref:null}):g?!M||_||D||N||A?(re=_extends({minRows:M||D,rowsMax:N,maxRows:_},re),oe=TextareaAutosize):oe="textarea":re=_extends({type:B},re);return React.useEffect(function(){J&&J.setAdornedStart(Boolean(O))},[J,O]),React.createElement("div",_extends({className:clsx(a.root,a["color".concat(capitalize(Q.color||"primary"))],i,Q.disabled&&a.disabled,Q.error&&a.error,c&&a.fullWidth,Q.focused&&a.focused,J&&a.formControl,g&&a.multiline,O&&a.adornedStart,l&&a.adornedEnd,"dense"===Q.margin&&a.marginDense),onClick:function(e){U.current&&e.currentTarget===e.target&&U.current.focus(),C&&C(e)},ref:o},I),O,React.createElement(FormControlContext.Provider,{value:null},React.createElement(oe,_extends({"aria-invalid":Q.error,"aria-describedby":r,autoComplete:t,autoFocus:n,defaultValue:s,disabled:Q.disabled,id:d,onAnimationStart:function(e){ee("mui-auto-fill-cancel"===e.animationName?U.current:{value:"x"})},name:P,placeholder:F,readOnly:k,required:Q.required,rows:M,value:K,onKeyDown:R,onKeyUp:E},re,{className:clsx(a.input,b.className,Q.disabled&&a.disabled,g&&a.inputMultiline,Q.hiddenLabel&&a.inputHiddenLabel,O&&a.inputAdornedStart,l&&a.inputAdornedEnd,"search"===B&&a.inputTypeSearch,"dense"===Q.margin&&a.inputMarginDense),onBlur:function(e){x&&x(e),b.onBlur&&b.onBlur(e),J&&J.onBlur?J.onBlur(e):G(!1)},onChange:function(e){if(!V){var o=e.target||U.current;if(null==o)throw new Error("production"!==process.env.NODE_ENV?"Material-UI: Expected valid input target. Did you use a custom `inputComponent` and forget to forward refs? See https://material-ui.com/r/input-component-ref-interface for more info.":_formatMuiErrorMessage(1));ee({value:o.value})}for(var r=arguments.length,t=new Array(r>1?r-1:0),n=1;n<r;n++)t[n-1]=arguments[n];b.onChange&&b.onChange.apply(b,[e].concat(t)),w&&w.apply(void 0,[e].concat(t))},onFocus:function(e){Q.disabled?e.stopPropagation():(v&&v(e),b.onFocus&&b.onFocus(e),J&&J.onFocus?J.onFocus(e):G(!0))}}))),l,S?S(_extends({},Q,{startAdornment:O})):null)});"production"!==process.env.NODE_ENV&&(InputBase.propTypes={"aria-describedby":PropTypes.string,autoComplete:PropTypes.string,autoFocus:PropTypes.bool,classes:PropTypes.object,className:PropTypes.string,color:PropTypes.oneOf(["primary","secondary"]),defaultValue:PropTypes.any,disabled:PropTypes.bool,endAdornment:PropTypes.node,error:PropTypes.bool,fullWidth:PropTypes.bool,id:PropTypes.string,inputComponent:PropTypes.elementType,inputProps:PropTypes.object,inputRef:refType,margin:PropTypes.oneOf(["dense","none"]),maxRows:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),minRows:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),multiline:PropTypes.bool,name:PropTypes.string,onBlur:PropTypes.func,onChange:PropTypes.func,onClick:PropTypes.func,onFocus:PropTypes.func,onKeyDown:PropTypes.func,onKeyUp:PropTypes.func,placeholder:PropTypes.string,readOnly:PropTypes.bool,renderSuffix:PropTypes.func,required:PropTypes.bool,rows:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),rowsMax:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),rowsMin:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),startAdornment:PropTypes.node,type:PropTypes.string,value:PropTypes.any});export default withStyles(styles,{name:"MuiInputBase"})(InputBase);