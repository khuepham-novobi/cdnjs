import _extends from"@babel/runtime/helpers/esm/extends";import _slicedToArray from"@babel/runtime/helpers/esm/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import*as React from"react";import clsx from"clsx";import PropTypes from"prop-types";import{chainPropTypes}from"@material-ui/utils";import{Transition}from"react-transition-group";import withStyles from"../styles/withStyles";import{duration}from"../styles/transitions";import deprecatedPropType from"../utils/deprecatedPropType";import{getTransitionProps}from"../transitions/utils";import useTheme from"../styles/useTheme";import{useForkRef}from"../utils";export var styles=function(e){return{root:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}};var Collapse=React.forwardRef(function(e,t){var o=e.children,r=e.classes,n=e.className,i=e.collapsedHeight,s=e.collapsedSize,a=void 0===s?"0px":s,p=e.component,c=void 0===p?"div":p,l=e.disableStrictModeCompat,u=void 0!==l&&l,d=e.in,m=e.onEnter,y=e.onEntered,f=e.onEntering,h=e.onExit,T=e.onExited,P=e.onExiting,g=e.style,E=e.timeout,x=void 0===E?duration.standard:E,v=e.TransitionComponent,b=void 0===v?Transition:v,R=_objectWithoutProperties(e,["children","classes","className","collapsedHeight","collapsedSize","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),w=useTheme(),S=React.useRef(),C=React.useRef(null),_=React.useRef(),H="number"==typeof(i||a)?"".concat(i||a,"px"):i||a;React.useEffect(function(){return function(){clearTimeout(S.current)}},[]);var N=w.unstable_strictMode&&!u,D=React.useRef(null),j=useForkRef(t,N?D:void 0),A=function(e){return function(t,o){if(e){var r=N?[D.current,t]:[t,o],n=_slicedToArray(r,2),i=n[0],s=n[1];void 0===s?e(i):e(i,s)}}},M=A(function(e,t){e.style.height=H,m&&m(e,t)}),O=A(function(e,t){var o=C.current?C.current.clientHeight:0,r=getTransitionProps({style:g,timeout:x},{mode:"enter"}).duration;if("auto"===x){var n=w.transitions.getAutoHeightDuration(o);e.style.transitionDuration="".concat(n,"ms"),_.current=n}else e.style.transitionDuration="string"==typeof r?r:"".concat(r,"ms");e.style.height="".concat(o,"px"),f&&f(e,t)}),z=A(function(e,t){e.style.height="auto",y&&y(e,t)}),k=A(function(e){var t=C.current?C.current.clientHeight:0;e.style.height="".concat(t,"px"),h&&h(e)}),I=A(T),W=A(function(e){var t=C.current?C.current.clientHeight:0,o=getTransitionProps({style:g,timeout:x},{mode:"exit"}).duration;if("auto"===x){var r=w.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(r,"ms"),_.current=r}else e.style.transitionDuration="string"==typeof o?o:"".concat(o,"ms");e.style.height=H,P&&P(e)});return React.createElement(b,_extends({in:d,onEnter:M,onEntered:z,onEntering:O,onExit:k,onExited:I,onExiting:W,addEndListener:function(e,t){var o=N?e:t;"auto"===x&&(S.current=setTimeout(o,_.current||0))},nodeRef:N?D:void 0,timeout:"auto"===x?null:x},R),function(e,t){return React.createElement(c,_extends({className:clsx(r.root,r.container,n,{entered:r.entered,exited:!d&&"0px"===H&&r.hidden}[e]),style:_extends({minHeight:H},g),ref:j},t),React.createElement("div",{className:r.wrapper,ref:C},React.createElement("div",{className:r.wrapperInner},o)))})});"production"!==process.env.NODE_ENV&&(Collapse.propTypes={children:PropTypes.node,classes:chainPropTypes(PropTypes.object,function(e){if(e.classes&&e.classes.container)throw new Error(["Material-UI: the classes.container key is deprecated.","Use `classes.root` instead","The name of the pseudo-class was changed for consistency."]).join("\n");return null}),className:PropTypes.string,collapsedHeight:deprecatedPropType(PropTypes.oneOfType([PropTypes.number,PropTypes.string]),"The prop was renamed to support the vertical orientation, use `collapsedSize` instead"),collapsedSize:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),component:PropTypes.elementType,disableStrictModeCompat:PropTypes.bool,in:PropTypes.bool,onEnter:PropTypes.func,onEntered:PropTypes.func,onEntering:PropTypes.func,onExit:PropTypes.func,onExited:PropTypes.func,onExiting:PropTypes.func,style:PropTypes.object,timeout:PropTypes.oneOfType([PropTypes.oneOf(["auto"]),PropTypes.number,PropTypes.shape({appear:PropTypes.number,enter:PropTypes.number,exit:PropTypes.number})])}),Collapse.muiSupportAuto=!0;export default withStyles(styles,{name:"MuiCollapse"})(Collapse);