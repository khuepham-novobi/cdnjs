import _objectWithoutPropertiesLoose from"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose";import _extends from"@babel/runtime/helpers/esm/extends";import{formatMuiErrorMessage as _formatMuiErrorMessage}from"@material-ui/utils";import*as React from"react";import PropTypes from"prop-types";import clsx from"clsx";import{refType}from"@material-ui/utils";import formControlState from"../FormControl/formControlState";import FormControlContext,{useFormControl}from"../FormControl/FormControlContext";import withStyles from"../styles/withStyles";import capitalize from"../utils/capitalize";import useForkRef from"../utils/useForkRef";import TextareaAutosize from"../TextareaAutosize";import{isFilled}from"./utils";export const styles=e=>{const o="light"===e.palette.type,r={color:"currentColor",opacity:o?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},t={opacity:"0 !important"},n={opacity:o?.42:.5};return{"@global":{"@keyframes mui-auto-fill":{},"@keyframes mui-auto-fill-cancel":{}},root:_extends({},e.typography.body1,{color:e.palette.text.primary,lineHeight:"1.1876em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center","&$disabled":{color:e.palette.text.disabled,cursor:"default"}}),formControl:{},focused:{},disabled:{},adornedStart:{},adornedEnd:{},error:{},marginDense:{},multiline:{padding:"6px 0 7px","&$marginDense":{paddingTop:3}},colorSecondary:{},fullWidth:{width:"100%"},input:{font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"6px 0 7px",border:0,boxSizing:"content-box",background:"none",height:"1.1876em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{"-webkit-appearance":"none"},"label[data-shrink=false] + $formControl &":{"&::-webkit-input-placeholder":t,"&::-moz-placeholder":t,"&:-ms-input-placeholder":t,"&::-ms-input-placeholder":t,"&:focus::-webkit-input-placeholder":n,"&:focus::-moz-placeholder":n,"&:focus:-ms-input-placeholder":n,"&:focus::-ms-input-placeholder":n},"&$disabled":{opacity:1},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},inputMarginDense:{paddingTop:3},inputMultiline:{height:"auto",resize:"none",padding:0},inputTypeSearch:{"-moz-appearance":"textfield","-webkit-appearance":"textfield"},inputAdornedStart:{},inputAdornedEnd:{},inputHiddenLabel:{}}};const useEnhancedEffect="undefined"==typeof window?React.useEffect:React.useLayoutEffect,InputBase=React.forwardRef(function(e,o){const{"aria-describedby":r,autoComplete:t,autoFocus:n,classes:a,className:i,defaultValue:s,disabled:p,endAdornment:l,fullWidth:u=!1,id:d,inputComponent:c="input",inputProps:m={},inputRef:f,multiline:y=!1,name:b,onBlur:h,onChange:T,onClick:g,onFocus:P,onKeyDown:x,onKeyUp:w,placeholder:C,readOnly:R,renderSuffix:E,rows:F,rowsMax:k,rowsMin:S,maxRows:v,minRows:M,startAdornment:N,type:_="text",value:A}=e,D=_objectWithoutPropertiesLoose(e,["aria-describedby","autoComplete","autoFocus","classes","className","color","defaultValue","disabled","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","rowsMax","rowsMin","maxRows","minRows","startAdornment","type","value"]),O=null!=m.value?m.value:A,{current:z}=React.useRef(null!=O),B=React.useRef(),W=React.useCallback(e=>{"production"!==process.env.NODE_ENV&&e&&"INPUT"!==e.nodeName&&!e.focus&&console.error(["Material-UI: You have provided a `inputComponent` to the input component","that does not correctly handle the `inputRef` prop.","Make sure the `inputRef` prop is called with a HTMLInputElement."].join("\n"))},[]),I=useForkRef(m.ref,W),L=useForkRef(f,I),K=useForkRef(B,L),[V,U]=React.useState(!1),j=useFormControl();"production"!==process.env.NODE_ENV&&React.useEffect(()=>{if(j)return j.registerEffect()},[j]);const H=formControlState({props:e,muiFormControl:j,states:["color","disabled","error","hiddenLabel","margin","required","filled"]});H.focused=j?j.focused:V,React.useEffect(()=>{!j&&p&&V&&(U(!1),h&&h())},[j,p,V,h]);const $=j&&j.onFilled,q=j&&j.onEmpty,Y=React.useCallback(e=>{isFilled(e)?$&&$():q&&q()},[$,q]);useEnhancedEffect(()=>{z&&Y({value:O})},[O,Y,z]);React.useEffect(()=>{Y(B.current)},[]);let G=c,J=_extends({},m,{ref:K});"string"!=typeof G?J=_extends({inputRef:K,type:_},J,{ref:null}):y?!F||v||M||k||S?(J=_extends({minRows:F||M,rowsMax:k,maxRows:v},J),G=TextareaAutosize):G="textarea":J=_extends({type:_},J);return React.useEffect(()=>{j&&j.setAdornedStart(Boolean(N))},[j,N]),React.createElement("div",_extends({className:clsx(a.root,a[`color${capitalize(H.color||"primary")}`],i,H.disabled&&a.disabled,H.error&&a.error,u&&a.fullWidth,H.focused&&a.focused,j&&a.formControl,y&&a.multiline,N&&a.adornedStart,l&&a.adornedEnd,"dense"===H.margin&&a.marginDense),onClick:e=>{B.current&&e.currentTarget===e.target&&B.current.focus(),g&&g(e)},ref:o},D),N,React.createElement(FormControlContext.Provider,{value:null},React.createElement(G,_extends({"aria-invalid":H.error,"aria-describedby":r,autoComplete:t,autoFocus:n,defaultValue:s,disabled:H.disabled,id:d,onAnimationStart:e=>{Y("mui-auto-fill-cancel"===e.animationName?B.current:{value:"x"})},name:b,placeholder:C,readOnly:R,required:H.required,rows:F,value:O,onKeyDown:x,onKeyUp:w},J,{className:clsx(a.input,m.className,H.disabled&&a.disabled,y&&a.inputMultiline,H.hiddenLabel&&a.inputHiddenLabel,N&&a.inputAdornedStart,l&&a.inputAdornedEnd,"search"===_&&a.inputTypeSearch,"dense"===H.margin&&a.inputMarginDense),onBlur:e=>{h&&h(e),m.onBlur&&m.onBlur(e),j&&j.onBlur?j.onBlur(e):U(!1)},onChange:(e,...o)=>{if(!z){const o=e.target||B.current;if(null==o)throw new Error("production"!==process.env.NODE_ENV?"Material-UI: Expected valid input target. Did you use a custom `inputComponent` and forget to forward refs? See https://material-ui.com/r/input-component-ref-interface for more info.":_formatMuiErrorMessage(1));Y({value:o.value})}m.onChange&&m.onChange(e,...o),T&&T(e,...o)},onFocus:e=>{H.disabled?e.stopPropagation():(P&&P(e),m.onFocus&&m.onFocus(e),j&&j.onFocus?j.onFocus(e):U(!0))}}))),l,E?E(_extends({},H,{startAdornment:N})):null)});"production"!==process.env.NODE_ENV&&(InputBase.propTypes={"aria-describedby":PropTypes.string,autoComplete:PropTypes.string,autoFocus:PropTypes.bool,classes:PropTypes.object,className:PropTypes.string,color:PropTypes.oneOf(["primary","secondary"]),defaultValue:PropTypes.any,disabled:PropTypes.bool,endAdornment:PropTypes.node,error:PropTypes.bool,fullWidth:PropTypes.bool,id:PropTypes.string,inputComponent:PropTypes.elementType,inputProps:PropTypes.object,inputRef:refType,margin:PropTypes.oneOf(["dense","none"]),maxRows:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),minRows:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),multiline:PropTypes.bool,name:PropTypes.string,onBlur:PropTypes.func,onChange:PropTypes.func,onClick:PropTypes.func,onFocus:PropTypes.func,onKeyDown:PropTypes.func,onKeyUp:PropTypes.func,placeholder:PropTypes.string,readOnly:PropTypes.bool,renderSuffix:PropTypes.func,required:PropTypes.bool,rows:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),rowsMax:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),rowsMin:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),startAdornment:PropTypes.node,type:PropTypes.string,value:PropTypes.any});export default withStyles(styles,{name:"MuiInputBase"})(InputBase);