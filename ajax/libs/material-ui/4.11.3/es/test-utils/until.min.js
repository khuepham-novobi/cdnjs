import _extends from"@babel/runtime/helpers/esm/extends";import _objectWithoutPropertiesLoose from"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose";function shallowRecursively(e,t,o){let{context:s}=o,n=_objectWithoutPropertiesLoose(o,["context"]);if(e.isEmptyRender()||"string"==typeof e.getElement().type)return e;let i=s;const r=e.root().instance();r&&r.getChildContext&&(i=_extends({},s,r.getChildContext()));const l=e.shallow(_extends({context:i},n));return t&&e.is(t)?l:shallowRecursively(l,t,{context:i})}export default function until(e,t={}){return this.single("until",()=>shallowRecursively(this,e,t))};