import _extends from"@babel/runtime/helpers/esm/extends";import _slicedToArray from"@babel/runtime/helpers/esm/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import*as React from"react";import clsx from"clsx";import PropTypes from"prop-types";import{Transition}from"react-transition-group";import withStyles from"../styles/withStyles";import{duration}from"../styles/transitions";import{getTransitionProps}from"../transitions/utils";import useTheme from"../styles/useTheme";import{useForkRef}from"../utils";export var styles=function(e){return{container:{height:0,overflow:"hidden",transition:e.transitions.create("height")},entered:{height:"auto",overflow:"visible"},hidden:{visibility:"hidden"},wrapper:{display:"flex"},wrapperInner:{width:"100%"}}};var Collapse=React.forwardRef(function(e,t){var n=e.children,o=e.classes,r=e.className,i=e.collapsedHeight,s=void 0===i?"0px":i,a=e.component,p=void 0===a?"div":a,c=e.disableStrictModeCompat,u=void 0!==c&&c,l=e.in,m=e.onEnter,d=e.onEntered,y=e.onEntering,f=e.onExit,h=e.onExited,T=e.onExiting,g=e.style,E=e.timeout,x=void 0===E?duration.standard:E,P=e.TransitionComponent,v=void 0===P?Transition:P,b=_objectWithoutProperties(e,["children","classes","className","collapsedHeight","component","disableStrictModeCompat","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"]),R=useTheme(),w=React.useRef(),C=React.useRef(null),_=React.useRef(),H="number"==typeof s?"".concat(s,"px"):s;React.useEffect(function(){return function(){clearTimeout(w.current)}},[]);var N=R.unstable_strictMode&&!u,D=React.useRef(null),S=useForkRef(t,N?D:void 0),A=function(e){return function(t,n){if(e){var o=N?[D.current,t]:[t,n],r=_slicedToArray(o,2),i=r[0],s=r[1];void 0===s?e(i):e(i,s)}}},j=A(function(e,t){e.style.height=H,m&&m(e,t)}),M=A(function(e,t){var n=C.current?C.current.clientHeight:0,o=getTransitionProps({style:g,timeout:x},{mode:"enter"}).duration;if("auto"===x){var r=R.transitions.getAutoHeightDuration(n);e.style.transitionDuration="".concat(r,"ms"),_.current=r}else e.style.transitionDuration="string"==typeof o?o:"".concat(o,"ms");e.style.height="".concat(n,"px"),y&&y(e,t)}),O=A(function(e,t){e.style.height="auto",d&&d(e,t)}),W=A(function(e){var t=C.current?C.current.clientHeight:0;e.style.height="".concat(t,"px"),f&&f(e)}),k=A(h),F=A(function(e){var t=C.current?C.current.clientHeight:0,n=getTransitionProps({style:g,timeout:x},{mode:"exit"}).duration;if("auto"===x){var o=R.transitions.getAutoHeightDuration(t);e.style.transitionDuration="".concat(o,"ms"),_.current=o}else e.style.transitionDuration="string"==typeof n?n:"".concat(n,"ms");e.style.height=H,T&&T(e)});return React.createElement(v,_extends({in:l,onEnter:j,onEntered:O,onEntering:M,onExit:W,onExited:k,onExiting:F,addEndListener:function(e,t){var n=N?e:t;"auto"===x&&(w.current=setTimeout(n,_.current||0))},nodeRef:N?D:void 0,timeout:"auto"===x?null:x},b),function(e,t){return React.createElement(p,_extends({className:clsx(o.container,r,{entered:o.entered,exited:!l&&"0px"===H&&o.hidden}[e]),style:_extends({minHeight:H},g),ref:S},t),React.createElement("div",{className:o.wrapper,ref:C},React.createElement("div",{className:o.wrapperInner},n)))})});"production"!==process.env.NODE_ENV&&(Collapse.propTypes={children:PropTypes.node,classes:PropTypes.object,className:PropTypes.string,collapsedHeight:PropTypes.oneOfType([PropTypes.number,PropTypes.string]),component:PropTypes.elementType,disableStrictModeCompat:PropTypes.bool,in:PropTypes.bool,onEnter:PropTypes.func,onEntered:PropTypes.func,onEntering:PropTypes.func,onExit:PropTypes.func,onExited:PropTypes.func,onExiting:PropTypes.func,style:PropTypes.object,timeout:PropTypes.oneOfType([PropTypes.oneOf(["auto"]),PropTypes.number,PropTypes.shape({appear:PropTypes.number,enter:PropTypes.number,exit:PropTypes.number})])}),Collapse.muiSupportAuto=!0;export default withStyles(styles,{name:"MuiCollapse"})(Collapse);