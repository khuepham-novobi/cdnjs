import _extends from"@babel/runtime/helpers/esm/extends";import _slicedToArray from"@babel/runtime/helpers/esm/slicedToArray";import _objectWithoutProperties from"@babel/runtime/helpers/esm/objectWithoutProperties";import _defineProperty from"@babel/runtime/helpers/esm/defineProperty";import*as React from"react";import*as ReactDOM from"react-dom";import PropTypes from"prop-types";import clsx from"clsx";import{deepmerge,elementAcceptingRef}from"@material-ui/utils";import{fade}from"../styles/colorManipulator";import withStyles from"../styles/withStyles";import capitalize from"../utils/capitalize";import Grow from"../Grow";import Popper from"../Popper";import useForkRef from"../utils/useForkRef";import useId from"../utils/unstable_useId";import setRef from"../utils/setRef";import useIsFocusVisible from"../utils/useIsFocusVisible";import useControlled from"../utils/useControlled";import useTheme from"../styles/useTheme";function round(e){return Math.round(1e5*e)/1e5}function arrowGenerator(){return{'&[x-placement*="bottom"] $arrow':{top:0,left:0,marginTop:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"0 100%"}},'&[x-placement*="top"] $arrow':{bottom:0,left:0,marginBottom:"-0.71em",marginLeft:4,marginRight:4,"&::before":{transformOrigin:"100% 0"}},'&[x-placement*="right"] $arrow':{left:0,marginLeft:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"100% 100%"}},'&[x-placement*="left"] $arrow':{right:0,marginRight:"-0.71em",height:"1em",width:"0.71em",marginTop:4,marginBottom:4,"&::before":{transformOrigin:"0 0"}}}}export var styles=function(e){return{popper:{zIndex:e.zIndex.tooltip,pointerEvents:"none"},popperInteractive:{pointerEvents:"auto"},popperArrow:arrowGenerator(),tooltip:{backgroundColor:fade(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(10),lineHeight:"".concat(round(1.4),"em"),maxWidth:300,wordWrap:"break-word",fontWeight:e.typography.fontWeightMedium},tooltipArrow:{position:"relative",margin:"0"},arrow:{overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:fade(e.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}},touch:{padding:"8px 16px",fontSize:e.typography.pxToRem(14),lineHeight:"".concat(round(16/14),"em"),fontWeight:e.typography.fontWeightRegular},tooltipPlacementLeft:_defineProperty({transformOrigin:"right center",margin:"0 24px "},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementRight:_defineProperty({transformOrigin:"left center",margin:"0 24px"},e.breakpoints.up("sm"),{margin:"0 14px"}),tooltipPlacementTop:_defineProperty({transformOrigin:"center bottom",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"}),tooltipPlacementBottom:_defineProperty({transformOrigin:"center top",margin:"24px 0"},e.breakpoints.up("sm"),{margin:"14px 0"})}};var hystersisOpen=!1,hystersisTimer=null;export function testReset(){hystersisOpen=!1,clearTimeout(hystersisTimer)};var Tooltip=React.forwardRef(function(e,t){var o=e.arrow,r=void 0!==o&&o,n=e.children,i=e.classes,s=e.disableFocusListener,a=void 0!==s&&s,p=e.disableHoverListener,l=void 0!==p&&p,c=e.disableTouchListener,u=void 0!==c&&c,m=e.enterDelay,d=void 0===m?100:m,f=e.enterNextDelay,h=void 0===f?0:f,T=e.enterTouchDelay,y=void 0===T?700:T,b=e.id,g=e.interactive,v=void 0!==g&&g,R=e.leaveDelay,P=void 0===R?0:R,x=e.leaveTouchDelay,w=void 0===x?1500:x,O=e.onClose,D=e.onOpen,E=e.open,F=e.placement,L=void 0===F?"bottom":F,M=e.PopperComponent,N=void 0===M?Popper:M,C=e.PopperProps,_=e.title,k=e.TransitionComponent,S=void 0===k?Grow:k,A=e.TransitionProps,I=_objectWithoutProperties(e,["arrow","children","classes","disableFocusListener","disableHoverListener","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","id","interactive","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","title","TransitionComponent","TransitionProps"]),B=useTheme(),W=React.useState(),j=W[0],z=W[1],V=React.useState(null),G=V[0],H=V[1],$=React.useRef(!1),q=React.useRef(),U=React.useRef(),Y=React.useRef(),J=React.useRef(),K=useControlled({controlled:E,default:!1,name:"Tooltip",state:"open"}),Q=_slicedToArray(K,2),X=Q[0],Z=Q[1],ee=X;if("production"!==process.env.NODE_ENV){var te=React.useRef(void 0!==E).current;React.useEffect(function(){j&&j.disabled&&!te&&""!==_&&"button"===j.tagName.toLowerCase()&&console.error(["Material-UI: You are providing a disabled `button` child to the Tooltip component.","A disabled element does not fire events.","Tooltip needs to listen to the child element's events to display the title.","","Add a simple wrapper element, such as a `span`."].join("\n"))},[_,j,te])}var oe=useId(b);React.useEffect(function(){return function(){clearTimeout(q.current),clearTimeout(U.current),clearTimeout(Y.current),clearTimeout(J.current)}},[]);var re=function(e){clearTimeout(hystersisTimer),hystersisOpen=!0,Z(!0),D&&D(e)},ne=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var o=n.props;"mouseover"===t.type&&o.onMouseOver&&e&&o.onMouseOver(t),$.current&&"touchstart"!==t.type||(j&&j.removeAttribute("title"),clearTimeout(U.current),clearTimeout(Y.current),d||hystersisOpen&&h?(t.persist(),U.current=setTimeout(function(){re(t)},hystersisOpen?h:d)):re(t))}},ie=useIsFocusVisible(),se=ie.isFocusVisible,ae=ie.onBlurVisible,pe=ie.ref,le=React.useState(!1),ce=le[0],ue=le[1],me=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){j||z(t.currentTarget),se(t)&&(ue(!0),ne()(t));var o=n.props;o.onFocus&&e&&o.onFocus(t)}},de=function(e){clearTimeout(hystersisTimer),hystersisTimer=setTimeout(function(){hystersisOpen=!1},800+P),Z(!1),O&&O(e),clearTimeout(q.current),q.current=setTimeout(function(){$.current=!1},B.transitions.duration.shortest)},fe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){var o=n.props;"blur"===t.type&&(o.onBlur&&e&&o.onBlur(t),ce&&(ue(!1),ae())),"mouseleave"===t.type&&o.onMouseLeave&&t.currentTarget===j&&o.onMouseLeave(t),clearTimeout(U.current),clearTimeout(Y.current),t.persist(),Y.current=setTimeout(function(){de(t)},P)}},he=function(e){$.current=!0;var t=n.props;t.onTouchStart&&t.onTouchStart(e)},Te=useForkRef(z,t),ye=useForkRef(pe,Te),be=React.useCallback(function(e){setRef(ye,ReactDOM.findDOMNode(e))},[ye]),ge=useForkRef(n.ref,be);""===_&&(ee=!1);var ve=_extends({"aria-describedby":ee?oe:null,title:!ee&&!l&&"string"==typeof _?_:null},I,n.props,{className:clsx(I.className,n.props.className),onTouchStart:he,ref:ge}),Re={};u||(ve.onTouchStart=function(e){he(e),clearTimeout(Y.current),clearTimeout(q.current),clearTimeout(J.current),e.persist(),J.current=setTimeout(function(){ne()(e)},y)},ve.onTouchEnd=function(e){n.props.onTouchEnd&&n.props.onTouchEnd(e),clearTimeout(J.current),clearTimeout(Y.current),e.persist(),Y.current=setTimeout(function(){de(e)},w)}),l||(ve.onMouseOver=ne(),ve.onMouseLeave=fe(),v&&(Re.onMouseOver=ne(!1),Re.onMouseLeave=fe(!1))),a||(ve.onFocus=me(),ve.onBlur=fe(),v&&(Re.onFocus=me(!1),Re.onBlur=fe(!1))),"production"!==process.env.NODE_ENV&&n.props.title&&console.error(["Material-UI: You have provided a `title` prop to the child of <Tooltip />.","Remove this title prop `".concat(n.props.title,"` or the Tooltip component.")].join("\n"));var Pe=React.useMemo(function(){return deepmerge({popperOptions:{modifiers:{arrow:{enabled:Boolean(G),element:G}}}},C)},[G,C]);return React.createElement(React.Fragment,null,React.cloneElement(n,ve),React.createElement(N,_extends({className:clsx(i.popper,v&&i.popperInteractive,r&&i.popperArrow),placement:L,anchorEl:j,open:!!j&&ee,id:ve["aria-describedby"],transition:!0},Re,Pe),function(e){var t=e.placement,o=e.TransitionProps;return React.createElement(S,_extends({timeout:B.transitions.duration.shorter},o,A),React.createElement("div",{className:clsx(i.tooltip,i["tooltipPlacement".concat(capitalize(t.split("-")[0]))],$.current&&i.touch,r&&i.tooltipArrow)},_,r?React.createElement("span",{className:i.arrow,ref:H}):null))}))});"production"!==process.env.NODE_ENV&&(Tooltip.propTypes={arrow:PropTypes.bool,children:elementAcceptingRef.isRequired,classes:PropTypes.object,className:PropTypes.string,disableFocusListener:PropTypes.bool,disableHoverListener:PropTypes.bool,disableTouchListener:PropTypes.bool,enterDelay:PropTypes.number,enterNextDelay:PropTypes.number,enterTouchDelay:PropTypes.number,id:PropTypes.string,interactive:PropTypes.bool,leaveDelay:PropTypes.number,leaveTouchDelay:PropTypes.number,onClose:PropTypes.func,onOpen:PropTypes.func,open:PropTypes.bool,placement:PropTypes.oneOf(["bottom-end","bottom-start","bottom","left-end","left-start","left","right-end","right-start","right","top-end","top-start","top"]),PopperComponent:PropTypes.elementType,PopperProps:PropTypes.object,title:PropTypes.node.isRequired,TransitionComponent:PropTypes.elementType,TransitionProps:PropTypes.object});export default withStyles(styles,{name:"MuiTooltip",flip:!1})(Tooltip);