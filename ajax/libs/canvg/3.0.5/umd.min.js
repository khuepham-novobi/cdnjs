!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).canvg={})}(this,function(t){"use strict";var r=Math.tan,m=Math.atan2,A=Math.PI,i=Math.round,e=String.prototype,z=Math.max,B=Math.min,o=Math.ceil,E=Math.sin,C=Math.cos,g=Math.floor,T=Math.sqrt,O=Math.pow;function n(t,e){return t(e={exports:{}},e.exports),e.exports}function a(t,e){return RegExp(t,e)}function F(t){return t.replace(/(?!\u3000)\s+/gm," ")}function s(t){return t.replace(/^[\n \t]+/,"")}function u(t){return t.replace(/[\n \t]+$/,"")}function L(t){return((t||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[]).map(parseFloat)}function l(t){return Mn.test(t)?t.toLowerCase():t}function c(t){var e=t.match(/url\(('([^']+)'|"([^"]+)"|([^'"\)]+))\)/)||[];return e[2]||e[3]||e[4]}function x(t,e){var n=t.match(e);return n?[t.replace(e," "),n.length]:[t,0]}function h(t){var e=[0,0,0],n=0,r=x(a=t.replace(/:not\(([^\)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),Wn),i=qn(r,2),a=i[0],n=i[1];e[1]+=n;var o=x(a,Xn),s=qn(o,2);a=s[0],n=s[1],e[0]+=n;var u=x(a,Hn),l=qn(u,2);a=l[0],n=l[1],e[1]+=n;var c=x(a,Yn),h=qn(c,2);a=h[0],n=h[1],e[2]+=n;var f=x(a,Qn),g=qn(f,2);a=g[0],n=g[1],e[1]+=n;var d=x(a,Zn),p=qn(d,2);a=p[0],n=p[1],e[1]+=n;var y=x(a=a.replace(/[\*\s\+>~]/g," ").replace(/[#\.]/g," "),Kn),v=qn(y,2);return a=v[0],n=v[1],e[2]+=n,e.join("")}function f(t){return T(O(t[0],2)+O(t[1],2))}function V(t,e){return(t[0]*e[0]+t[1]*e[1])/(f(t)*f(e))}function R(t,e){var n=Math.acos;return(t[0]*e[1]<t[1]*e[0]?-1:1)*n(V(t,e))}function d(t){return t*t*t}function p(t){return 3*t*t*(1-t)}function y(t){return 3*t*(1-t)*(1-t)}function v(t){return(1-t)*(1-t)*(1-t)}function b(t){return t*t}function w(t){return 2*t*(1-t)}function k(t){return(1-t)*(1-t)}function S(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function P(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function N(){throw new Error("setTimeout has not been defined")}function I(){throw new Error("clearTimeout has not been defined")}function j(e){if(Co===setTimeout)return setTimeout(e,0);if((Co===N||!Co)&&setTimeout)return Co=setTimeout,setTimeout(e,0);try{return Co(e,0)}catch(t){try{return Co.call(null,e,0)}catch(t){return Co.call(this,e,0)}}}function D(){Lo&&Oo&&(Lo=!1,Oo.length?Vo=Oo.concat(Vo):Ro=-1,Vo.length&&M())}function M(){if(!Lo){var t=j(D);Lo=!0;for(var e=Vo.length;e;){for(Oo=Vo,Vo=[];++Ro<e;)Oo&&Oo[Ro].run();Ro=-1,e=Vo.length}Oo=null,Lo=!1,function(e){if(To===clearTimeout)return clearTimeout(e);if((To===I||!To)&&clearTimeout)return To=clearTimeout,clearTimeout(e);try{To(e)}catch(t){try{return To.call(null,e)}catch(t){return To.call(this,e)}}}(t)}}function _(t,e){this.fun=t,this.array=e}function $(){}function G(t){var e=t.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function U(t,e,n,r,i,a){return t[n*r*4+4*e+a]}function q(t,e,n,r,i,a,o){t[n*r*4+4*e+a]=o}function W(t,e,n){var r=t[e];return r*(r<0?n-255:n)}function X(t,e,n,r){return e+C(t)*n+E(t)*r}function H(t){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Y(t,e,n,r,i,a){var o;isNaN(a)||a<1||(a|=0,o=function(t,e,n,r){var i,a,o,s,u,l,c,h,f,g,d,p,y,v,m,x,b,w,k,S,P,A,E,C,T,O=t.data,V=e-1,L=n-1,R=r+1,N=R*(R+1)/2,I=new Vh,j=I;for(o=1;o<2*r+1;o++)j=j.next=new Vh,o===R&&(T=j);j.next=I;var D=null,M=null;c=l=0;var z=Th[r],B=Oh[r];for(a=0;a<n;a++){for(x=b=w=k=h=f=g=d=0,p=R*(S=O[l]),y=R*(P=O[l+1]),v=R*(A=O[l+2]),m=R*(E=O[l+3]),h+=N*S,f+=N*P,g+=N*A,d+=N*E,j=I,o=0;o<R;o++)j.r=S,j.g=P,j.b=A,j.a=E,j=j.next;for(o=1;o<R;o++)s=l+((V<o?V:o)<<2),h+=(j.r=S=O[s])*(C=R-o),f+=(j.g=P=O[s+1])*C,g+=(j.b=A=O[s+2])*C,d+=(j.a=E=O[s+3])*C,x+=S,b+=P,w+=A,k+=E,j=j.next;for(D=I,M=T,i=0;i<e;i++)O[l+3]=E=d*z>>B,0===E?O[l]=O[l+1]=O[l+2]=0:(E=255/E,O[l]=(h*z>>B)*E,O[l+1]=(f*z>>B)*E,O[l+2]=(g*z>>B)*E),h-=p,f-=y,g-=v,d-=m,p-=D.r,y-=D.g,v-=D.b,m-=D.a,s=c+((s=i+r+1)<V?s:V)<<2,x+=D.r=O[s],b+=D.g=O[s+1],w+=D.b=O[s+2],k+=D.a=O[s+3],h+=x,f+=b,g+=w,d+=k,D=D.next,p+=S=M.r,y+=P=M.g,v+=A=M.b,m+=E=M.a,x-=S,b-=P,w-=A,k-=E,M=M.next,l+=4;c+=e}for(i=0;i<e;i++){for(b=w=k=x=f=g=d=h=0,p=R*(S=O[l=i<<2]),y=R*(P=O[l+1]),v=R*(A=O[l+2]),m=R*(E=O[l+3]),h+=N*S,f+=N*P,g+=N*A,d+=N*E,j=I,o=0;o<R;o++)j.r=S,j.g=P,j.b=A,j.a=E,j=j.next;for(u=e,o=1;o<=r;o++)l=u+i<<2,h+=(j.r=S=O[l])*(C=R-o),f+=(j.g=P=O[l+1])*C,g+=(j.b=A=O[l+2])*C,d+=(j.a=E=O[l+3])*C,x+=S,b+=P,w+=A,k+=E,j=j.next,o<L&&(u+=e);for(l=i,D=I,M=T,a=0;a<n;a++)O[(s=l<<2)+3]=E=d*z>>B,0<E?(E=255/E,O[s]=(h*z>>B)*E,O[s+1]=(f*z>>B)*E,O[s+2]=(g*z>>B)*E):O[s]=O[s+1]=O[s+2]=0,h-=p,f-=y,g-=v,d-=m,p-=D.r,y-=D.g,v-=D.b,m-=D.a,s=i+((s=a+R)<L?s:L)*e<<2,h+=x+=D.r=O[s],f+=b+=D.g=O[s+1],g+=w+=D.b=O[s+2],d+=k+=D.a=O[s+3],D=D.next,p+=S=M.r,y+=P=M.g,v+=A=M.b,m+=E=M.a,x-=S,b-=P,w-=A,k-=E,M=M.next,l+=e}return t}(o=function(t,e,n,r,i){if("string"==typeof t&&(t=document.getElementById(t)),!(t&&"object"===H(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var a=t.getContext("2d");try{return a.getImageData(e,n,r,i)}catch(e){throw new Error("unable to access image data: "+e)}}(t,e,n,r,i),r,i,a),t.getContext("2d").putImageData(o,e,n))}function Q(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function Z(){return(Z=di(gi.mark(function t(n){var e,r,i=arguments;return gi.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=!!(1<i.length&&void 0!==i[1])&&i[1],r=document.createElement("img"),e&&(r.crossOrigin="Anonymous"),t.abrupt("return",new Promise(function(t,e){r.onload=function(){t(r)},r.onerror=function(){e()},r.src=n}));case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}function K(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function J(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?K(Object(n),!0).forEach(function(t){pi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}function tt(t){return t&&t.Math==Math&&t}function et(t){try{return!!t()}catch(t){return!0}}function nt(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function rt(t){return mt.call(t).slice(8,-1)}function it(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function at(t){return bt(it(t))}function ot(t){return"object"==typeof t?null!==t:"function"==typeof t}function st(t,e){if(!ot(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!ot(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!ot(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!ot(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function ut(t,e){return wt.call(t,e)}function lt(t){return St?kt.createElement(t):{}}function ct(t){if(!ot(t))throw TypeError(t+" is not an object");return t}function ht(e,n){try{Ot(gt,e,n)}catch(t){gt[e]=n}return n}var ft="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,gt=tt("object"==typeof globalThis&&globalThis)||tt("object"==typeof window&&window)||tt("object"==typeof self&&self)||tt("object"==typeof ft&&ft)||Function("return this")(),dt=!et(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),pt={}.propertyIsEnumerable,yt=Object.getOwnPropertyDescriptor,vt={f:yt&&!pt.call({1:2},1)?function(t){var e=yt(this,t);return!!e&&e.enumerable}:pt},mt={}.toString,xt="".split,bt=et(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==rt(t)?xt.call(t,""):Object(t)}:Object,wt={}.hasOwnProperty,kt=gt.document,St=ot(kt)&&ot(kt.createElement),Pt=!dt&&!et(function(){return 7!=Object.defineProperty(lt("div"),"a",{get:function(){return 7}}).a}),At=Object.getOwnPropertyDescriptor,Et={f:dt?At:function(t,e){if(t=at(t),e=st(e,!0),Pt)try{return At(t,e)}catch(t){}return ut(t,e)?nt(!vt.f.call(t,e),t[e]):void 0}},Ct=Object.defineProperty,Tt={f:dt?Ct:function(t,e,n){if(ct(t),e=st(e,!0),ct(n),Pt)try{return Ct(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Ot=dt?function(t,e,n){return Tt.f(t,e,nt(1,n))}:function(t,e,n){return t[e]=n,t},Vt="__core-js_shared__",Lt=gt[Vt]||ht(Vt,{}),Rt=Function.toString;"function"!=typeof Lt.inspectSource&&(Lt.inspectSource=function(t){return Rt.call(t)});function Nt(t){return"Symbol("+(void 0===t?"":t)+")_"+(++Xt+Ht).toString(36)}function It(t){return Yt[t]||(Yt[t]=Nt(t))}var jt,Dt,Mt,zt,Bt,Ft,_t,$t,Gt=Lt.inspectSource,Ut=gt.WeakMap,qt="function"==typeof Ut&&/native code/.test(Gt(Ut)),Wt=n(function(t){(t.exports=function(t,e){return Lt[t]||(Lt[t]=void 0===e?{}:e)})("versions",[]).push({version:"3.6.4",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),Xt=0,Ht=Math.random(),Yt=Wt("keys"),Qt={},Zt=gt.WeakMap;_t=qt?(jt=new Zt,Dt=jt.get,Mt=jt.has,zt=jt.set,Bt=function(t,e){return zt.call(jt,t,e),e},Ft=function(t){return Dt.call(jt,t)||{}},function(t){return Mt.call(jt,t)}):($t=It("state"),Qt[$t]=!0,Bt=function(t,e){return Ot(t,$t,e),e},Ft=function(t){return ut(t,$t)?t[$t]:{}},function(t){return ut(t,$t)});function Kt(t){return"function"==typeof t?t:void 0}function Jt(t,e){return arguments.length<2?Kt(me[t])||Kt(gt[t]):me[t]&&me[t][e]||gt[t]&&gt[t][e]}function te(t){return isNaN(t=+t)?0:(0<t?g:o)(t)}function ee(t){return 0<t?B(te(t),9007199254740991):0}function ne(t,e){var n=te(t);return n<0?z(n+e,0):B(n,e)}function re(s){return function(t,e,n){var r,i=at(t),a=ee(i.length),o=ne(n,a);if(s&&e!=e){for(;o<a;)if((r=i[o++])!=r)return!0}else for(;o<a;o++)if((s||o in i)&&i[o]===e)return s||o||0;return!s&&-1}}function ie(t,e){var n,r=at(t),i=0,a=[];for(n in r)!ut(Qt,n)&&ut(r,n)&&a.push(n);for(;e.length>i;)ut(r,n=e[i++])&&(~be(a,n)||a.push(n));return a}function ae(t,e){for(var n,r=Ae(e),i=Tt.f,a=Et.f,o=0;o<r.length;o++)n=r[o],ut(t,n)||i(t,n,a(e,n))}function oe(t,e){var n=Te[Ce(t)];return n==Ve||n!=Oe&&("function"==typeof e?et(e):!!e)}function se(t,e){var n,r,i,a,o=t.target,s=t.global,u=t.stat,l=s?gt:u?gt[o]||ht(o,{}):(gt[o]||{}).prototype;if(l)for(n in e){if(i=e[n],r=t.noTargetGet?(a=Re(l,n))&&a.value:l[n],!Le(s?n:o+(u?".":"#")+n,t.forced)&&void 0!==r){if(typeof i==typeof r)continue;ae(i,r)}(t.sham||r&&r.sham)&&Ot(i,"sham",!0),ve(l,n,i,t)}}function ue(t){if("function"!=typeof t)throw TypeError(t+" is not a function");return t}function le(r,i,t){return ue(r),void 0===i?r:0===t?function(){return r.call(i)}:1===t?function(t){return r.call(i,t)}:2===t?function(t,e){return r.call(i,t,e)}:3===t?function(t,e,n){return r.call(i,t,e,n)}:function(){return r.apply(i,arguments)}}function ce(t){return Object(it(t))}function he(t){return ut(De,t)||(Ie&&ut(Me,t)?De[t]=Me[t]:De[t]=ze("Symbol."+t)),De[t]}function fe(t,e){var n;return Ne(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Ne(n.prototype)?ot(n)&&(null===(n=n[Be])&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function ge(g){var d=1==g,p=4==g,y=6==g;return function(t,e,n,r){for(var i,a,o=ce(t),s=bt(o),u=le(e,n,3),l=ee(s.length),c=0,h=r||fe,f=d?h(t,l):2==g?h(t,0):void 0;c<l;c++)if((5==g||y||c in s)&&(a=u(i=s[c],c,o),g))if(d)f[c]=a;else if(a)switch(g){case 3:return!0;case 5:return i;case 6:return c;case 2:Fe.call(f,i)}else if(p)return!1;return y?-1:3==g||p?p:f}}var de,pe,ye={set:Bt,get:Ft,has:_t,enforce:function(t){return _t(t)?Ft(t):Bt(t,{})},getterFor:function(n){return function(t){var e;if(!ot(t)||(e=Ft(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},ve=n(function(t){var e=ye.get,s=ye.enforce,u=(String+"").split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,o=!!r&&!!r.noTargetGet;return"function"==typeof n&&("string"!=typeof e||ut(n,"name")||Ot(n,"name",e),s(n).source=u.join("string"==typeof e?e:"")),t===gt?void(a?t[e]=n:ht(e,n)):(i?!o&&t[e]&&(a=!0):delete t[e],void(a?t[e]=n:Ot(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||Gt(this)})}),me=gt,xe={includes:re(!0),indexOf:re(!1)},be=xe.indexOf,we=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ke=we.concat("length","prototype"),Se={f:Object.getOwnPropertyNames||function(t){return ie(t,ke)}},Pe={f:Object.getOwnPropertySymbols},Ae=Jt("Reflect","ownKeys")||function(t){var e=Se.f(ct(t)),n=Pe.f;return n?e.concat(n(t)):e},Ee=/#|\.prototype\./,Ce=oe.normalize=function(t){return(t+"").replace(Ee,".").toLowerCase()},Te=oe.data={},Oe=oe.NATIVE="N",Ve=oe.POLYFILL="P",Le=oe,Re=Et.f,Ne=Array.isArray||function(t){return"Array"==rt(t)},Ie=!!Object.getOwnPropertySymbols&&!et(function(){return!(Symbol()+"")}),je=Ie&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,De=Wt("wks"),Me=gt.Symbol,ze=je?Me:Me&&Me.withoutSetter||Nt,Be=he("species"),Fe=[].push,_e={forEach:ge(0),map:ge(1),filter:ge(2),some:ge(3),every:ge(4),find:ge(5),findIndex:ge(6)},$e=Jt("navigator","userAgent")||"",Ge=gt.process,Ue=Ge&&Ge.versions,qe=Ue&&Ue.v8;qe?pe=(de=qe.split("."))[0]+de[1]:$e&&((de=$e.match(/Edge\/(\d+)/))&&!(74<=de[1])||(de=$e.match(/Chrome\/(\d+)/))&&(pe=de[1]));function We(e){return 51<=Ye||!et(function(){var t=[];return(t.constructor={})[Qe]=function(){return{foo:1}},1!==t[e](Boolean).foo})}function Xe(t){throw t}function He(t,e){if(ut(Ke,t))return Ke[t];var n=[][t],r=!!ut(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=ut(e,0)?e[0]:Xe,a=ut(e,1)?e[1]:void 0;return Ke[t]=!!n&&!et(function(){if(r&&!dt)return 1;var t={length:-1};r?Ze(t,1,{enumerable:!0,get:Xe}):t[1]=1,n.call(t,i,a)})}var Ye=pe&&+pe,Qe=he("species"),Ze=Object.defineProperty,Ke={},Je=_e.map,tn=We("map"),en=He("map");se({target:"Array",proto:!0,forced:!tn||!en},{map:function(t){return Je(this,t,1<arguments.length?arguments[1]:void 0)}});function nn(n){return function(t){var e=it(t)+"";return 1&n&&(e=e.replace(an,"")),2&n&&(e=e.replace(on,"")),e}}var rn="[\t\n\v\f\r                　\u2028\u2029\ufeff]",an=RegExp("^"+rn+rn+"*"),on=RegExp(rn+rn+"*$"),sn={start:nn(1),end:nn(2),trim:nn(3)},un=sn.trim,ln=gt.parseFloat,cn=1/ln("\t\n\v\f\r                　\u2028\u2029\ufeff-0")!=-1/0?function(t){var e=un(t+""),n=ln(e);return 0===n&&"-"==e.charAt(0)?-0:n}:ln;se({global:!0,forced:parseFloat!=cn},{parseFloat:cn});function hn(){var t=ct(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}var fn,gn,dn={UNSUPPORTED_Y:et(function(){var t=a("a","y");return t.lastIndex=2,null!=t.exec("abcd")}),BROKEN_CARET:et(function(){var t=a("^r","gy");return t.lastIndex=2,null!=t.exec("str")})},pn=RegExp.prototype.exec,yn=e.replace,vn=pn,mn=(fn=/a/,gn=/b*/g,pn.call(fn,"a"),pn.call(gn,"a"),0!==fn.lastIndex||0!==gn.lastIndex),xn=dn.UNSUPPORTED_Y||dn.BROKEN_CARET,bn=void 0!==/()??/.exec("")[1];(mn||bn||xn)&&(vn=function(t){var e,n,r,i,a=this,o=xn&&a.sticky,s=hn.call(a),u=a.source,l=0,c=t;return o&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),c=(t+"").slice(a.lastIndex),0<a.lastIndex&&(!a.multiline||a.multiline&&"\n"!==t[a.lastIndex-1])&&(u="(?: "+u+")",c=" "+c,l++),n=new RegExp("^(?:"+u+")",s)),bn&&(n=new RegExp("^"+u+"$(?!\\s)",s)),mn&&(e=a.lastIndex),r=pn.call(o?n:a,c),o?r?(r.input=r.input.slice(l),r[0]=r[0].slice(l),r.index=a.lastIndex,a.lastIndex+=r[0].length):a.lastIndex=0:mn&&r&&(a.lastIndex=a.global?r.index+r[0].length:e),bn&&r&&1<r.length&&yn.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var wn=vn;se({target:"RegExp",proto:!0,forced:/./.exec!==wn},{exec:wn});function kn(n,t,e,r){var a,i,o,s,u=he(n),l=!et(function(){var t={};return t[u]=function(){return 7},7!=""[n](t)}),c=l&&!et(function(){var t=!1,e=/a/;return"split"===n&&((e={}).constructor={},e.constructor[En]=function(){return e},e.flags="",e[u]=/./[u]),e.exec=function(){return t=!0,null},e[u](""),!t});l&&c&&("replace"!==n||Cn&&Tn&&!Vn)&&("split"!==n||Ln)||(a=/./[u],o=(i=e(u,""[n],function(t,e,n,r,i){return e.exec===wn?l&&!i?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}},{REPLACE_KEEPS_$0:Tn,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Vn}))[0],s=i[1],ve(String.prototype,n,o),ve(RegExp.prototype,u,2==t?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)})),r&&Ot(RegExp.prototype[u],"sham",!0)}function Sn(s){return function(t,e){var n,r,i=it(t)+"",a=te(e),o=i.length;return a<0||o<=a?s?"":void 0:(n=i.charCodeAt(a))<55296||56319<n||a+1===o||(r=i.charCodeAt(a+1))<56320||57343<r?s?i.charAt(a):n:s?i.slice(a,a+2):r-56320+(n-55296<<10)+65536}}function Pn(t,e,n){return e+(n?Nn(t,e).length:1)}function An(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==rt(t))throw TypeError("RegExp#exec called on incompatible receiver");return wn.call(t,e)}var En=he("species"),Cn=!et(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),Tn="$0"==="a".replace(/./,"$0"),On=he("replace"),Vn=!!/./[On]&&""===/./[On]("a","$0"),Ln=!et(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),Rn={codeAt:Sn(!1),charAt:Sn(!0)},Nn=Rn.charAt;kn("match",1,function(r,l,c){return[function(t){var e=it(this),n=null==t?void 0:t[r];return void 0===n?new RegExp(t)[r](e+""):n.call(t,e)},function(t){var e=c(l,t,this);if(e.done)return e.value;var n=ct(t),r=this+"";if(!n.global)return An(n,r);for(var i,a,o=n.unicode,s=[],u=n.lastIndex=0;null!==(i=An(n,r));)a=i[0]+"",(s[u]=a)||(n.lastIndex=Pn(r,ee(n.lastIndex),o)),u++;return 0===u?null:s}]});var In=/\$([$&'`]|\d\d?|<[^>]*>)/g,jn=/\$([$&'`]|\d\d?)/g;kn("replace",2,function(i,w,k,t){function S(a,o,s,u,l,t){var c=s+a.length,h=u.length,e=jn;return void 0!==l&&(l=ce(l),e=In),w.call(t,e,function(t,e){var n;switch(e.charAt(0)){case"$":return"$";case"&":return a;case"`":return o.slice(0,s);case"'":return o.slice(c);case"<":n=l[e.slice(1,-1)];break;default:var r=+e;if(0==r)return t;if(h<r){var i=g(r/10);return 0!==i&&i<=h?void 0===u[i-1]?e.charAt(1):u[i-1]+e.charAt(1):t}n=u[r-1]}return void 0===n?"":n})}var P=t.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,A=t.REPLACE_KEEPS_$0,E=P?"$":"$0";return[function(t,e){var n=it(this),r=null==t?void 0:t[i];return void 0===r?w.call(n+"",t,e):r.call(t,n,e)},function(t,e){if(!P&&A||"string"==typeof e&&-1===e.indexOf(E)){var n=k(w,t,this,e);if(n.done)return n.value}var r=ct(t),i=this+"",a="function"==typeof e;a||(e+="");var o,s=r.global;s&&(o=r.unicode,r.lastIndex=0);for(var u,l=[];null!==(u=An(r,i))&&(l.push(u),s);)u[0]+""||(r.lastIndex=Pn(i,ee(r.lastIndex),o));for(var c,h="",f=0,g=0;g<l.length;g++){for(var d=(u=l[g])[0]+"",p=z(B(te(u.index),i.length),0),y=[],v=1;v<u.length;v++)y.push(void 0===(c=u[v])?c:c+"");var m,x=u.groups,b=a?(m=[d].concat(y,p,i),void 0!==x&&m.push(x),e.apply(void 0,m)+""):S(d,i,p,y,x,e);f<=p&&(h+=i.slice(f,p)+b,f=p+d.length)}return h+i.slice(f)}]});function Dn(t,e){var n=[][t];return!!n&&et(function(){n.call(null,e||function(){throw 1},1)})}var Mn=/^[A-Z-]+$/,zn=[].join,Bn=bt!=Object,Fn=Dn("join",",");se({target:"Array",proto:!0,forced:Bn||!Fn},{join:function(t){return zn.call(at(this),void 0===t?",":t)}});function _n(){}function $n(t){return"<script>"+t+"</"+ir+">"}var Gn,Un=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},qn=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||Un(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()},Wn=/(\[[^\]]+\])/g,Xn=/(#[^\s\+>~\.\[:]+)/g,Hn=/(\.[^\s\+>~\.\[:]+)/g,Yn=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,Qn=/(:[\w-]+\([^\)]*\))/gi,Zn=/(:[^\s\+>~\.\[:]+)/g,Kn=/([^\s\+>~\.\[:]+)/g,Jn=1e-8,tr=Object.keys||function(t){return ie(t,we)},er=dt?Object.defineProperties:function(t,e){ct(t);for(var n,r=tr(e),i=r.length,a=0;a<i;)Tt.f(t,n=r[a++],e[n]);return t},nr=Jt("document","documentElement"),rr="prototype",ir="script",ar=It("IE_PROTO"),or=function(){try{Gn=document.domain&&new ActiveXObject("htmlfile")}catch(n){}var t,e;or=Gn?function(t){t.write($n("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Gn):((e=lt("iframe")).style.display="none",nr.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write($n("document.F=Object")),t.close(),t.F);for(var n=we.length;n--;)delete or[rr][we[n]];return or()};Qt[ar]=!0;function sr(t){var e=me.Symbol||(me.Symbol={});ut(e,t)||br(e,t,{value:xr.f(t)})}function ur(t,e,n){t&&!ut(t=n?t:t.prototype,kr)&&wr(t,kr,{configurable:!0,value:e})}function lr(t,e){var n=Mr[t]=dr(Lr[Er]);return Tr(n,{type:Ar,tag:t,description:e}),dt||(n.description=e),n}function cr(e,t){ct(e);var n=at(t),r=tr(n).concat(Hr(n));return Sr(r,function(t){dt&&!Xr.call(n,t)||Wr(e,t,n[t])}),e}function hr(t,e){var n=at(t),r=st(e,!0);if(n!==Vr||!ut(Mr,r)||ut(zr,r)){var i=Nr(n,r);return!i||!ut(Mr,r)||ut(n,Pr)&&n[Pr][r]||(i.enumerable=!0),i}}function fr(t){var e=jr(at(t)),n=[];return Sr(e,function(t){ut(Mr,t)||ut(Qt,t)||n.push(t)}),n}var gr,dr=Object.create||function(t,e){var n;return null===t?n=or():(_n[rr]=ct(t),n=new _n,_n[rr]=null,n[ar]=t),void 0===e?n:er(n,e)},pr=Se.f,yr={}.toString,vr="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],mr={f:function(t){return vr&&"[object Window]"==yr.call(t)?function(t){try{return pr(t)}catch(t){return vr.slice()}}(t):pr(at(t))}},xr={f:he},br=Tt.f,wr=Tt.f,kr=he("toStringTag"),Sr=_e.forEach,Pr=It("hidden"),Ar="Symbol",Er="prototype",Cr=he("toPrimitive"),Tr=ye.set,Or=ye.getterFor(Ar),Vr=Object[Er],Lr=gt.Symbol,Rr=Jt("JSON","stringify"),Nr=Et.f,Ir=Tt.f,jr=mr.f,Dr=vt.f,Mr=Wt("symbols"),zr=Wt("op-symbols"),Br=Wt("string-to-symbol-registry"),Fr=Wt("symbol-to-string-registry"),_r=Wt("wks"),$r=gt.QObject,Gr=!$r||!$r[Er]||!$r[Er].findChild,Ur=dt&&et(function(){return 7!=dr(Ir({},"a",{get:function(){return Ir(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Nr(Vr,e);r&&delete Vr[e],Ir(t,e,n),r&&t!==Vr&&Ir(Vr,e,r)}:Ir,qr=je?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Lr},Wr=function(t,e,n){t===Vr&&Wr(zr,e,n),ct(t);var r=st(e,!0);return ct(n),ut(Mr,r)?(n.enumerable?(ut(t,Pr)&&t[Pr][r]&&(t[Pr][r]=!1),n=dr(n,{enumerable:nt(0,!1)})):(ut(t,Pr)||Ir(t,Pr,nt(1,{})),t[Pr][r]=!0),Ur(t,r,n)):Ir(t,r,n)},Xr=function(t){var e=st(t,!0),n=Dr.call(this,e);return(this!==Vr||!ut(Mr,e)||ut(zr,e))&&(!(n||!ut(this,e)||!ut(Mr,e)||ut(this,Pr)&&this[Pr][e])||n)},Hr=function(t){var e=t===Vr,n=jr(e?zr:at(t)),r=[];return Sr(n,function(t){!ut(Mr,t)||e&&!ut(Vr,t)||r.push(Mr[t])}),r};Ie||(ve((Lr=function(){if(this instanceof Lr)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?arguments[0]+"":void 0,e=Nt(t),n=function(t){this===Vr&&n.call(zr,t),ut(this,Pr)&&ut(this[Pr],e)&&(this[Pr][e]=!1),Ur(this,e,nt(1,t))};return dt&&Gr&&Ur(Vr,e,{configurable:!0,set:n}),lr(e,t)})[Er],"toString",function(){return Or(this).tag}),ve(Lr,"withoutSetter",function(t){return lr(Nt(t),t)}),vt.f=Xr,Tt.f=Wr,Et.f=hr,Se.f=mr.f=fr,Pe.f=Hr,xr.f=function(t){return lr(he(t),t)},dt&&(Ir(Lr[Er],"description",{configurable:!0,get:function(){return Or(this).description}}),ve(Vr,"propertyIsEnumerable",Xr,{unsafe:!0}))),se({global:!0,wrap:!0,forced:!Ie,sham:!Ie},{Symbol:Lr}),Sr(tr(_r),function(t){sr(t)}),se({target:Ar,stat:!0,forced:!Ie},{for:function(t){var e=t+"";if(ut(Br,e))return Br[e];var n=Lr(e);return Br[e]=n,Fr[n]=e,n},keyFor:function(t){if(!qr(t))throw TypeError(t+" is not a symbol");return ut(Fr,t)?Fr[t]:void 0},useSetter:function(){Gr=!0},useSimple:function(){Gr=!1}}),se({target:"Object",stat:!0,forced:!Ie,sham:!dt},{create:function(t,e){return void 0===e?dr(t):cr(dr(t),e)},defineProperty:Wr,defineProperties:cr,getOwnPropertyDescriptor:hr}),se({target:"Object",stat:!0,forced:!Ie},{getOwnPropertyNames:fr,getOwnPropertySymbols:Hr}),se({target:"Object",stat:!0,forced:et(function(){Pe.f(1)})},{getOwnPropertySymbols:function(t){return Pe.f(ce(t))}}),Rr&&(gr=!Ie||et(function(){var t=Lr();return"[null]"!=Rr([t])||"{}"!=Rr({a:t})||"{}"!=Rr(Object(t))}),se({target:"JSON",stat:!0,forced:gr},{stringify:function(t,e){for(var n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if((ot(n=e)||void 0!==t)&&!qr(t))return Ne(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!qr(e))return e}),r[1]=e,Rr.apply(null,r)}})),Lr[Er][Cr]||Ot(Lr[Er],Cr,Lr[Er].valueOf),ur(Lr,Ar),Qt[Pr]=!0;var Yr=_e.filter,Qr=We("filter"),Zr=He("filter");se({target:"Array",proto:!0,forced:!Qr||!Zr},{filter:function(t){return Yr(this,t,1<arguments.length?arguments[1]:void 0)}});var Kr=_e.forEach,Jr=Dn("forEach"),ti=He("forEach"),ei=Jr&&ti?[].forEach:function(t){return Kr(this,t,1<arguments.length?arguments[1]:void 0)};se({target:"Array",proto:!0,forced:[].forEach!=ei},{forEach:ei}),se({target:"Object",stat:!0,forced:!dt,sham:!dt},{defineProperties:er}),se({target:"Object",stat:!0,forced:!dt,sham:!dt},{defineProperty:Tt.f});var ni=Et.f,ri=et(function(){ni(1)});se({target:"Object",stat:!0,forced:!dt||ri,sham:!dt},{getOwnPropertyDescriptor:function(t,e){return ni(at(t),e)}});function ii(t,e,n){var r=st(e);r in t?Tt.f(t,r,nt(0,n)):t[r]=n}se({target:"Object",stat:!0,sham:!dt},{getOwnPropertyDescriptors:function(t){for(var e,n,r=at(t),i=Et.f,a=Ae(r),o={},s=0;a.length>s;)void 0!==(n=i(r,e=a[s++]))&&ii(o,e,n);return o}});var ai=et(function(){tr(1)});se({target:"Object",stat:!0,forced:ai},{keys:function(t){return tr(ce(t))}});var oi={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var si in oi){var ui=gt[si],li=ui&&ui.prototype;if(li&&li.forEach!==ei)try{Ot(li,"forEach",ei)}catch(t){li.forEach=ei}}function ci(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hi(t,e,n){return e&&P(t.prototype,e),n&&P(t,n),t}function fi(t){if(ot(t)){var e=t[yi];return void 0===e?Ne(t):!!e}}var gi=n(function(t){var e=function(a){function o(t,e,n,r){var a,o,s,u,i=e&&e.prototype instanceof f?e:f,l=Object.create(i.prototype),c=new d(r||[]);return l._invoke=(a=t,o=n,s=c,u="suspendedStart",function(t,e){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===t)throw e;return p()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=g(n,s);if(r){if(r===w)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===u)throw u="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u="executing";var i=h(a,o,s);if("normal"===i.type){if(u=s.done?"completed":"suspendedYield",i.arg===w)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(u="completed",s.method="throw",s.arg=i.arg)}}),l}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function f(){}function n(){}function e(){}function t(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(u){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){var a=h(u[t],u,n);if("throw"!==a.type){var o=a.arg,s=o.value;return s&&"object"==typeof s&&y.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(s).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)})}i(a.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function g(t,e){var n=t.iterator[e.method];if(n===l){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=l,g(t,e),"throw"===e.method))return w;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,w;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=l),e.delegate=null,w):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,w)}function r(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function u(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(r,this),this.reset(!0)}function i(e){if(e){var t=e[m];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=l,t.done=!0,t};return r.next=r}}return{next:p}}function p(){return{value:l,done:!0}}var l,c=Object.prototype,y=c.hasOwnProperty,v="function"==typeof Symbol?Symbol:{},m=v.iterator||"@@iterator",x=v.asyncIterator||"@@asyncIterator",b=v.toStringTag||"@@toStringTag";a.wrap=o;var w={},k={};k[m]=function(){return this};var S=Object.getPrototypeOf,P=S&&S(S(i([])));P&&P!==c&&y.call(P,m)&&(k=P);var A=e.prototype=f.prototype=Object.create(k);return n.prototype=A.constructor=e,e.constructor=n,e[b]=n.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,e):(t.__proto__=e,b in t||(t[b]="GeneratorFunction")),t.prototype=Object.create(A),t},a.awrap=function(t){return{__await:t}},t(s.prototype),s.prototype[x]=function(){return this},a.AsyncIterator=s,a.async=function(t,e,n,r){var i=new s(o(t,e,n,r));return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},t(A),A[b]="Generator",A[m]=function(){return this},A.toString=function(){return"[object Generator]"},a.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=i,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(u),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){function t(t,e){return a.type="throw",a.arg=n,r.next=t,e&&(r.method="next",r.arg=l),!!e}if(this.done)throw n;for(var r=this,e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n,r=this.tryEntries.length-1;0<=r;--r)if((n=this.tryEntries[r]).tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e,n=this.tryEntries.length-1;0<=n;--n)if((e=this.tryEntries[n]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),u(e),w},catch:function(t){for(var e,n=this.tryEntries.length-1;0<=n;--n)if((e=this.tryEntries[n]).tryLoc===t){var r,i=e.completion;return"throw"===i.type&&(r=i.arg,u(e)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:i(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=l),w}},a}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}),di=function(s){return function(){var t=this,o=arguments;return new Promise(function(e,n){function r(t){S(a,e,n,r,i,"next",t)}function i(t){S(a,e,n,r,i,"throw",t)}var a=s.apply(t,o);r(void 0)})}},pi=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},yi=he("isConcatSpreadable"),vi=9007199254740991,mi="Maximum allowed index exceeded",xi=51<=Ye||!et(function(){var t=[];return t[yi]=!1,t.concat()[0]!==t}),bi=We("concat");se({target:"Array",proto:!0,forced:!xi||!bi},{concat:function(){for(var t,e,n,r=ce(this),i=fe(r,0),a=0,o=-1,s=arguments.length;o<s;o++)if(fi(n=-1===o?r:arguments[o])){if(e=ee(n.length),vi<a+e)throw TypeError(mi);for(t=0;t<e;t++,a++)t in n&&ii(i,a,n[t])}else{if(vi<=a)throw TypeError(mi);ii(i,a++,n)}return i.length=a,i}});var wi=_e.every,ki=Dn("every"),Si=He("every");se({target:"Array",proto:!0,forced:!ki||!Si},{every:function(t){return wi(this,t,1<arguments.length?arguments[1]:void 0)}});function Pi(l){return function(t,e,n,r){ue(e);var i=ce(t),a=bt(i),o=ee(i.length),s=l?o-1:0,u=l?-1:1;if(n<2)for(;;){if(s in a){r=a[s],s+=u;break}if(s+=u,l?s<0:o<=s)throw TypeError("Reduce of empty array with no initial value")}for(;l?0<=s:s<o;s+=u)s in a&&(r=e(r,a[s],s,i));return r}}var Ai={left:Pi(!1),right:Pi(!0)}.left,Ei=Dn("reduce"),Ci=He("reduce",{1:0});se({target:"Array",proto:!0,forced:!Ei||!Ci},{reduce:function(t){return Ai(this,t,arguments.length,1<arguments.length?arguments[1]:void 0)}});var Ti=Date.prototype,Oi="Invalid Date",Vi="toString",Li=Ti[Vi],Ri=Ti.getTime;new Date(NaN)+""!=Oi&&ve(Ti,Vi,function(){var t=Ri.call(this);return t==t?Li.call(this):Oi});var Ni={};Ni[he("toStringTag")]="z";function Ii(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Di))?n:Mi?rt(e):"Object"==(r=rt(e))&&"function"==typeof e.callee?"Arguments":r}var ji="[object z]"==Ni+"",Di=he("toStringTag"),Mi="Arguments"==rt(function(){return arguments}());ji||ve(Object.prototype,"toString",function(){return"[object "+Ii(this)+"]"},{unsafe:!0});function zi(t,e,n){for(var r in e)ve(t,r,e[r],n);return t}function Bi(t){var e=Jt(t),n=Tt.f;dt&&e&&!e[qi]&&n(e,qi,{configurable:!0,get:function(){return this}})}function Fi(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function _i(t){return void 0!==t&&(Wi.Array===t||Hi[Xi]===t)}function $i(t){if(null!=t)return t[Yi]||t["@@iterator"]||Wi[Ii(t)]}function Gi(t,e,n,r){try{return r?e(ct(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&ct(i.call(t)),e}}var Ui=gt.Promise,qi=he("species"),Wi={},Xi=he("iterator"),Hi=Array.prototype,Yi=he("iterator"),Qi=n(function(t){function g(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var a,o,s,u,l,c,h,f=le(e,n,r?2:1);if(i)a=t;else{if("function"!=typeof(o=$i(t)))throw TypeError("Target is not iterable");if(_i(o)){for(s=0,u=ee(t.length);s<u;s++)if((l=r?f(ct(h=t[s])[0],h[1]):f(t[s]))&&l instanceof g)return l;return new g(!1)}a=o.call(t)}for(c=a.next;!(h=c.call(a)).done;)if("object"==typeof(l=Gi(a,f,h.value,r))&&l&&l instanceof g)return l;return new g(!1)}).stop=function(t){return new g(!0,t)}}),Zi=he("iterator"),Ki=!1;try{var Ji=0,ta={next:function(){return{done:!!Ji++}},return:function(){Ki=!0}};ta[Zi]=function(){return this},Array.from(ta,function(){throw 2})}catch(t){}function ea(t,e){if(!e&&!Ki)return!1;var n=!1;try{var r={};r[Zi]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function na(t,e){var n,r=ct(t).constructor;return void 0===r||null==(n=ct(r)[ca])?e:ue(n)}function ra(t){var e;xa.hasOwnProperty(t)&&(e=xa[t],delete xa[t],e())}function ia(t){return function(){ra(t)}}function aa(t){ra(t.data)}function oa(t){gt.postMessage(t+"",fa.protocol+"//"+fa.host)}var sa,ua,la,ca=he("species"),ha=/(iphone|ipod|ipad).*applewebkit/i.test($e),fa=gt.location,ga=gt.setImmediate,da=gt.clearImmediate,pa=gt.process,ya=gt.MessageChannel,va=gt.Dispatch,ma=0,xa={},ba="onreadystatechange";ga&&da||(ga=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return xa[++ma]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},sa(ma),ma},da=function(t){delete xa[t]},"process"==rt(pa)?sa=function(t){pa.nextTick(ia(t))}:va&&va.now?sa=function(t){va.now(ia(t))}:ya&&!ha?(la=(ua=new ya).port2,ua.port1.onmessage=aa,sa=le(la.postMessage,la,1)):!gt.addEventListener||"function"!=typeof postMessage||gt.importScripts||et(oa)?sa=ba in lt("script")?function(t){nr.appendChild(lt("script"))[ba]=function(){nr.removeChild(this),ra(t)}}:function(t){setTimeout(ia(t),0)}:(sa=oa,gt.addEventListener("message",aa,!1)));var wa,ka,Sa,Pa,Aa,Ea,Ca,Ta,Oa={set:ga,clear:da},Va=Et.f,La=Oa.set,Ra=gt.MutationObserver||gt.WebKitMutationObserver,Na=gt.process,Ia=gt.Promise,ja="process"==rt(Na),Da=Va(gt,"queueMicrotask"),Ma=Da&&Da.value;Ma||(wa=function(){var t,e;for(ja&&(t=Na.domain)&&t.exit();ka;){e=ka.fn,ka=ka.next;try{e()}catch(t){throw ka?Pa():Sa=void 0,t}}Sa=void 0,t&&t.enter()},Pa=ja?function(){Na.nextTick(wa)}:Ra&&!ha?(Aa=!0,Ea=document.createTextNode(""),new Ra(wa).observe(Ea,{characterData:!0}),function(){Ea.data=Aa=!Aa}):Ia&&Ia.resolve?(Ca=Ia.resolve(void 0),Ta=Ca.then,function(){Ta.call(Ca,wa)}):function(){La.call(gt,wa)});function za(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=ue(n),this.reject=ue(r)}function Ba(t,e){if(ct(t),ot(e)&&e.constructor===t)return e;var n=Za.f(t);return(0,n.resolve)(e),n.promise}function Fa(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}function _a(t){var e;return!(!ot(t)||"function"!=typeof(e=t.then))&&e}function $a(h,f,g){var d;f.notified||(f.notified=!0,d=f.reactions,Qa(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,a,o=d[n++],s=e?o.ok:o.fail,u=o.resolve,l=o.reject,c=o.domain;try{s?(e||(2===f.rejection&&xo(h,f),f.rejection=1),!0===s?r=t:(c&&c.enter(),r=s(t),c&&(c.exit(),a=!0)),r===o.promise?l(ao("Promise-chain cycle")):(i=_a(r))?i.call(r,u,l):u(r)):l(t)}catch(t){c&&!a&&c.exit(),l(t)}}f.reactions=[],f.notified=!1,g&&!f.rejection&&vo(h,f)}))}function Ga(t,e,n){var r,i;fo?((r=oo.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),gt.dispatchEvent(r)):r={promise:e,reason:n},(i=gt["on"+t])?i(r):t===go&&function(t,e){var n=gt.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Ua(e,n,r,i){return function(t){e(n,r,t,i)}}function qa(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,$a(t,e,!0))}var Wa,Xa,Ha,Ya,Qa=Ma||function(t){var e={fn:t,next:void 0};Sa&&(Sa.next=e),ka||(ka=e,Pa()),Sa=e},Za={f:function(t){return new za(t)}},Ka=Oa.set,Ja=he("species"),to="Promise",eo=ye.get,no=ye.set,ro=ye.getterFor(to),io=Ui,ao=gt.TypeError,oo=gt.document,so=gt.process,uo=Jt("fetch"),lo=Za.f,co=lo,ho="process"==rt(so),fo=!!(oo&&oo.createEvent&&gt.dispatchEvent),go="unhandledrejection",po=Le(to,function(){if(!(Gt(io)!==io+"")){if(66===Ye)return!0;if(!ho&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=Ye&&/native code/.test(io))return!1;function t(t){t(function(){},function(){})}var e=io.resolve(1);return(e.constructor={})[Ja]=t,!(e.then(function(){})instanceof t)}),yo=po||!ea(function(t){io.all(t).catch(function(){})}),vo=function(n,r){Ka.call(gt,function(){var t,e=r.value;if(mo(r)&&(t=Fa(function(){ho?so.emit("unhandledRejection",e,n):Ga(go,n,e)}),r.rejection=ho||mo(r)?2:1,t.error))throw t.value})},mo=function(t){return 1!==t.rejection&&!t.parent},xo=function(t,e){Ka.call(gt,function(){ho?so.emit("rejectionHandled",t):Ga("rejectionhandled",t,e.value)})},bo=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw ao("Promise can't be resolved itself");var i=_a(t);i?Qa(function(){var e={done:!1};try{i.call(t,Ua(bo,n,e,r),Ua(qa,n,e,r))}catch(t){qa(n,e,t,r)}}):(r.value=t,r.state=1,$a(n,r,!1))}catch(t){qa(n,{done:!1},t,r)}}};po&&(io=function(t){Fi(this,io,to),ue(t),Wa.call(this);var e=eo(this);try{t(Ua(bo,this,e),Ua(qa,this,e))}catch(t){qa(this,e,t)}},(Wa=function(){no(this,{type:to,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=zi(io.prototype,{then:function(t,e){var n=ro(this),r=lo(na(this,io));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=ho?so.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&$a(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Xa=function(){var t=new Wa,e=eo(t);this.promise=t,this.resolve=Ua(bo,t,e),this.reject=Ua(qa,t,e)},Za.f=lo=function(t){return t===io||t===Ha?new Xa:co(t)},"function"==typeof Ui&&(Ya=Ui.prototype.then,ve(Ui.prototype,"then",function(t,e){var n=this;return new io(function(t,e){Ya.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof uo&&se({global:!0,enumerable:!0,forced:!0},{fetch:function(){return Ba(io,uo.apply(gt,arguments))}}))),se({global:!0,wrap:!0,forced:po},{Promise:io}),ur(io,to,!1),Bi(to),Ha=Jt(to),se({target:to,stat:!0,forced:po},{reject:function(t){var e=lo(this);return e.reject.call(void 0,t),e.promise}}),se({target:to,stat:!0,forced:po},{resolve:function(t){return Ba(this,t)}}),se({target:to,stat:!0,forced:yo},{all:function(t){var s=this,e=lo(s),u=e.resolve,l=e.reject,n=Fa(function(){var r=ue(s.resolve),i=[],a=0,o=1;Qi(t,function(t){var e=a++,n=!1;i.push(void 0),o++,r.call(s,t).then(function(t){n||(n=!0,i[e]=t,--o||u(i))},l)}),--o||u(i)});return n.error&&l(n.value),e.promise},race:function(t){var n=this,r=lo(n),i=r.reject,e=Fa(function(){var e=ue(n.resolve);Qi(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}});function wo(t){var e;return ot(t)&&(void 0===(e=t[ko])?"RegExp"==rt(t):!!e)}var ko=he("match"),So=[].push,Po=4294967295,Ao=!et(function(){return!RegExp(Po,"y")});kn("split",2,function(i,y,v){var m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var n=it(this)+"",r=void 0===e?Po:e>>>0;if(0==r)return[];if(void 0===t)return[n];if(!wo(t))return y.call(n,t,r);for(var i,a,o,s=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,c=new RegExp(t.source,u+"g");(i=wn.call(c,n))&&!(l<(a=c.lastIndex)&&(s.push(n.slice(l,i.index)),1<i.length&&i.index<n.length&&So.apply(s,i.slice(1)),o=i[0].length,l=a,s.length>=r));)c.lastIndex===i.index&&c.lastIndex++;return l===n.length?!o&&c.test("")||s.push(""):s.push(n.slice(l)),s.length>r?s.slice(0,r):s}:function(t,e){return void 0===t&&0===e?[]:y.call(this,t,e)};return[function(t,e){var n=it(this),r=null==t?void 0:t[i];return void 0===r?m.call(n+"",t,e):r.call(t,n,e)},function(t,e){var n=v(m,t,this,e,m!==y);if(n.done)return n.value;var r=ct(t),i=this+"",a=na(r,RegExp),o=r.unicode,s=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(Ao?"y":"g"),u=new a(Ao?r:"^(?:"+r.source+")",s),l=void 0===e?Po:e>>>0;if(0==l)return[];if(0===i.length)return null===An(u,i)?[i]:[];for(var c=0,h=0,f=[];h<i.length;){u.lastIndex=Ao?h:0;var g,d=An(u,Ao?i:i.slice(h));if(null===d||(g=B(ee(u.lastIndex+(Ao?0:h)),i.length))===c)h=Pn(i,h,o);else{if(f.push(i.slice(c,h)),f.length===l)return f;for(var p=1;p<=d.length-1;p++)if(f.push(d[p]),f.length===l)return f;h=c=g}}return f.push(i.slice(c)),f}]},!Ao);var Eo="undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,Co=N,To=I;"function"==typeof Eo.setTimeout&&(Co=setTimeout),"function"==typeof Eo.clearTimeout&&(To=clearTimeout);var Oo,Vo=[],Lo=!1,Ro=-1;_.prototype.run=function(){this.fun.apply(null,this.array)};for(var No,Io,jo,Do=Eo.performance||{},Mo=Do.now||Do.mozNow||Do.msNow||Do.oNow||Do.webkitNow||function(){return(new Date).getTime()},zo=new Date,Bo={nextTick:function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Vo.push(new _(t,e)),1!==Vo.length||Lo||j(M)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:$,addListener:$,once:$,off:$,removeListener:$,removeAllListeners:$,emit:$,binding:function(){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*Mo.call(Do),n=g(e),r=g(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-zo)/1e3}},Fo=n(function(o){(function(){var t,e,n,r,i,a;"undefined"!=typeof performance&&null!==performance&&performance.now?o.exports=function(){return performance.now()}:null!=Bo&&Bo.hrtime?(o.exports=function(){return(t()-i)/1e6},e=Bo.hrtime,r=(t=function(){var t=e();return 1e9*t[0]+t[1]})(),a=1e9*Bo.uptime(),i=r-a):n=Date.now?(o.exports=function(){return Date.now()-n},Date.now()):(o.exports=function(){return(new Date).getTime()-n},(new Date).getTime())}).call(ft)}),_o="undefined"==typeof window?ft:window,$o=["moz","webkit"],Go="AnimationFrame",Uo=_o["request"+Go],qo=_o["cancel"+Go]||_o["cancelRequest"+Go],Wo=0;!Uo&&Wo<$o.length;Wo++)Uo=_o[$o[Wo]+"Request"+Go],qo=_o[$o[Wo]+"Cancel"+Go]||_o[$o[Wo]+"CancelRequest"+Go];Uo&&qo||(Io=No=0,jo=[],Uo=function(t){var e,n;return 0===jo.length&&(e=Fo(),n=z(0,1e3/60-(e-No)),No=n+e,setTimeout(function(){for(var t=jo.slice(0),e=jo.length=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(No)}catch(e){setTimeout(function(){throw e},0)}},i(n))),jo.push({handle:++Io,callback:t,cancelled:!1}),Io},qo=function(t){for(var e=0;e<jo.length;e++)jo[e].handle===t&&(jo[e].cancelled=!0)});function Xo(t){return Uo.call(_o,t)}Xo.cancel=function(){qo.apply(_o,arguments)},Xo.polyfill=function(t){(t=t||_o).requestAnimationFrame=Uo,t.cancelAnimationFrame=qo};var Ho=Tt.f,Yo=Function.prototype,Qo=Yo.toString,Zo=/^\s*function ([^ (]*)/;!dt||"name"in Yo||Ho(Yo,"name",{configurable:!0,get:function(){try{return Qo.call(this).match(Zo)[1]}catch(t){return""}}});function Ko(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=c[t]||t;for(var h=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],e=0;e<h.length;e++){var n,r=h[e].re,i=h[e].process,a=r.exec(t);a&&(n=i(a),this.r=n[0],this.g=n[1],this.b=n[2],3<n.length&&(this.alpha=n[3]),this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b,this.alpha=this.alpha<0?0:1<this.alpha||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t,e=[],n=0;n<h.length;n++){t=h[n].example;for(var r=0;r<t.length;r++)e[e.length]=t[r]}for(var i in c)e[e.length]=i;var a=document.createElement("ul");a.setAttribute("id","rgbcolor-examples");for(n=0;n<e.length;n++)try{var o=document.createElement("li"),s=new RGBColor(e[n]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+s.toHex()+"; color:"+s.toHex(),u.appendChild(document.createTextNode("test"));var l=document.createTextNode(" "+e[n]+" -> "+s.toRGB()+" -> "+s.toHex());o.appendChild(u),o.appendChild(l),a.appendChild(o)}catch(t){}return a}}var Jo=(hi(ts,[{key:"hasValue",value:function(){var t=this.value;return null!==t&&""!==t&&0!==t&&void 0!==t}},{key:"isString",value:function(t){var e=this.value,n="string"==typeof e;return n&&t?t.test(e):n}},{key:"isUrlDefinition",value:function(){return this.isString(/^url\(/)}},{key:"isPixels",value:function(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case/px$/.test(t):case/^[0-9]+$/.test(t):return!0;default:return!1}}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"getValue",value:function(t){return void 0===t||this.hasValue()?this.value:t}},{key:"getNumber",value:function(t){if(!this.hasValue())return void 0===t?0:parseFloat(t);var e=this.value,n=parseFloat(e);return this.isString(/%$/)&&(n/=100),n}},{key:"getString",value:function(t){return void 0===t||this.hasValue()?void 0===this.value?"":this.value+"":t+""}},{key:"getDpi",value:function(){return 96}},{key:"getRem",value:function(){return this.document.rootEmSize}},{key:"getEm",value:function(){return this.document.emSize}},{key:"getUnits",value:function(){return this.getString().replace(/[0-9\.\-]/g,"")}},{key:"getPixels",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!this.hasValue())return 0;var n=qn("boolean"==typeof t?[void 0,t]:[t],2),r=n[0],i=n[1],a=this.document.screen.viewPort;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*B(a.computeSize("x"),a.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*z(a.computeSize("x"),a.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*a.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*a.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&i:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*a.computeSize(r);default:var o=this.getNumber();return e&&o<1?o*a.computeSize(r):o}}},{key:"getMilliseconds",value:function(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}},{key:"getRadians",value:function(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(A/180);case this.isString(/grad$/):return this.getNumber()*(A/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(A/180)}}},{key:"getDefinition",value:function(){var t=this.getString(),e=t.match(/#([^\)'"]+)/);return e=(e=e&&e[1])||t,this.document.definitions[e]}},{key:"getFillStyleDefinition",value:function(t,e){var n,r=this.getDefinition();return r?"function"==typeof r.createGradient?r.createGradient(this.document.ctx,t,e):"function"!=typeof r.createPattern?null:(r.getHrefAttribute().hasValue()&&(n=r.getAttribute("patternTransform"),r=r.getHrefAttribute().getDefinition(),n.hasValue()&&r.getAttribute("patternTransform",!0).setValue(n.value)),r.createPattern(this.document.ctx,t,e)):null}},{key:"getTextBaseline",value:function(){return this.hasValue()?ts.textBaselineMapping[this.getString()]:null}},{key:"addOpacity",value:function(t){for(var e,n=this.value,r=n.length,i=0,a=0;a<r&&(","===n[a]&&i++,3!==i);a++);return t.hasValue()&&this.isString()&&3!==i&&(e=new Ko(n)).ok&&(n="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(t.getNumber(),")")),new ts(this.document,this.name,n)}}],[{key:"empty",value:function(t){return new ts(t,"EMPTY","")}}]),ts);function ts(t,e,n){ci(this,ts),this.document=t,this.name=e,this.value=n}Jo.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var es=(hi(cs,[{key:"clear",value:function(){this.viewPorts=[]}},{key:"setCurrent",value:function(t,e){this.viewPorts.push({width:t,height:e})}},{key:"removeCurrent",value:function(){this.viewPorts.pop()}},{key:"getCurrent",value:function(){var t=this.viewPorts;return t[t.length-1]}},{key:"computeSize",value:function(t){return"number"==typeof t?t:"x"===t?this.width:"y"===t?this.height:T(O(this.width,2)+O(this.height,2))/T(2)}},{key:"width",get:function(){return this.getCurrent().width}},{key:"height",get:function(){return this.getCurrent().height}}]),cs),ns=(hi(ls,[{key:"angleTo",value:function(t){return m(t.y-this.y,t.x-this.x)}},{key:"applyTransform",value:function(t){var e=this.x,n=this.y,r=e*t[0]+n*t[2]+t[4],i=e*t[1]+n*t[3]+t[5];this.x=r,this.y=i}}],[{key:"parse",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=L(t),r=qn(n,2),i=r[0],a=void 0===i?e:i,o=r[1];return new ls(a,void 0===o?e:o)}},{key:"parseScale",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=L(t),r=qn(n,2),i=r[0],a=void 0===i?e:i,o=r[1];return new ls(a,void 0===o?a:o)}},{key:"parsePath",value:function(t){for(var e=L(t),n=e.length,r=[],i=0;i<n;i+=2)r.push(new ls(e[i],e[i+1]));return r}}]),ls),rs=(hi(us,[{key:"isWorking",value:function(){return this.working}},{key:"start",value:function(){var t,e,n,r;this.working||(t=this.screen,e=this.onClick,n=this.onMouseMove,(r=t.ctx.canvas).onclick=e,r.onmousemove=n,this.working=!0)}},{key:"stop",value:function(){var t;this.working&&(t=this.screen.ctx.canvas,this.working=!1,t.onclick=null,t.onmousemove=null)}},{key:"hasEvents",value:function(){return this.working&&0<this.events.length}},{key:"runEvents",value:function(){var t,e,i,n;this.working&&(t=this.screen,e=this.events,i=this.eventElements,(n=t.ctx.canvas.style)&&(n.cursor=""),e.forEach(function(t,e){for(var n=t.run,r=i[e];r;)n(r),r=r.parent}),this.events=[],this.eventElements=[])}},{key:"checkPath",value:function(i,a){var t,o;this.working&&a&&(t=this.events,o=this.eventElements,t.forEach(function(t,e){var n=t.x,r=t.y;!o[e]&&a.isPointInPath&&a.isPointInPath(n,r)&&(o[e]=i)}))}},{key:"checkBoundingBox",value:function(i,a){var t,o;this.working&&a&&(t=this.events,o=this.eventElements,t.forEach(function(t,e){var n=t.x,r=t.y;!o[e]&&a.isPointInBox(n,r)&&(o[e]=i)}))}},{key:"mapXY",value:function(t,e){for(var n=this.screen,r=n.window,i=n.ctx,a=new ns(t,e),o=i.canvas;o;)a.x-=o.offsetLeft,a.y-=o.offsetTop,o=o.offsetParent;return r.scrollX&&(a.x+=r.scrollX),r.scrollY&&(a.y+=r.scrollY),a}},{key:"onClick",value:function(t){var e=this.mapXY((t||event).clientX,(t||event).clientY),n=e.x,r=e.y;this.events.push({type:"onclick",x:n,y:r,run:function(t){t.onClick&&t.onClick()}})}},{key:"onMouseMove",value:function(t){var e=this.mapXY((t||event).clientX,(t||event).clientY),n=e.x,r=e.y;this.events.push({type:"onmousemove",x:n,y:r,run:function(t){t.onMouseMove&&t.onMouseMove()}})}}]),us),is="undefined"==typeof window?null:window,as="undefined"==typeof fetch?null:fetch.bind(void 0),os=(hi(ss,[{key:"wait",value:function(t){this.waits.push(t)}},{key:"ready",value:function(){return this.readyPromise?this.readyPromise:Promise.resolve()}},{key:"isReady",value:function(){if(this.isReadyLock)return!0;var t=this.waits.every(function(t){return t()});return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t}},{key:"setDefaults",value:function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}},{key:"setViewBox",value:function(t){var e=t.document,n=t.ctx,r=t.aspectRatio,i=t.width,a=t.desiredWidth,o=t.height,s=t.desiredHeight,u=t.minX,l=void 0===u?0:u,c=t.minY,h=void 0===c?0:c,f=t.refX,g=t.refY,d=t.clip,p=t.clipX,y=void 0===p?0:p,v=t.clipY,m=void 0===v?0:v,x=F(r).replace(/^defer\s/,"").split(" "),b=qn(x,2),w=b[0]||"xMidYMid",k=b[1]||"meet",S=i/a,P=o/s,A=B(S,P),E=z(S,P),C=a,T=s;"meet"===k&&(C*=A,T*=A),"slice"===k&&(C*=E,T*=E);var O,V,L,R,N,I,j=new Jo(e,"refX",f),D=new Jo(e,"refY",g),M=j.hasValue()&&D.hasValue();switch(M&&n.translate(-A*j.getPixels("x"),-A*D.getPixels("y")),void 0!==d&&d&&(O=A*y,V=A*m,n.beginPath(),n.moveTo(O,V),n.lineTo(i,V),n.lineTo(i,o),n.lineTo(O,o),n.closePath(),n.clip()),M||(L="meet"===k&&A===P,R="slice"===k&&E===P,N="meet"===k&&A===S,I="slice"===k&&E===S,/^xMid/.test(w)&&(L||R)&&n.translate(i/2-C/2,0),/YMid$/.test(w)&&(N||I)&&n.translate(0,o/2-T/2),/^xMax/.test(w)&&(L||R)&&n.translate(i-C,0),/YMax$/.test(w)&&(N||I)&&n.translate(0,o-T)),!0){case"none"===w:n.scale(S,P);break;case"meet"===k:n.scale(A,A);break;case"slice"===k:n.scale(E,E)}n.translate(-l,-h)}},{key:"start",value:function(e){var n,r,i,a=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.enableRedraw,s=t.ignoreMouse,u=t.ignoreAnimation,l=t.ignoreDimensions,c=void 0!==l&&l,h=t.ignoreClear,f=void 0!==h&&h,g=t.forceRedraw,d=t.scaleWidth,p=t.scaleHeight,y=t.offsetX,v=t.offsetY,m=this.FRAMERATE,x=this.mouse,b=1e3/m;this.frameDuration=b,this.readyPromise=new Promise(function(t){a.resolveReady=t}),this.isReady()&&this.render(e,c,f,d,p,y,v),void 0!==o&&o&&(n=Date.now(),r=n,void(i=0)!==s&&s||x.start(),this.intervalId=Xo(function t(){n=Date.now(),b<=(i=n-r)&&(r=n-i%b,a.shouldUpdate(void 0!==u&&u,g)&&(a.render(e,c,f,d,p,y,v),x.runEvents())),a.intervalId=Xo(t)}))}},{key:"stop",value:function(){this.intervalId&&(Xo.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}},{key:"shouldUpdate",value:function(t,e){if(!t){var n=this.frameDuration,r=this.animations.reduce(function(t,e){return e.update(n)||t},!1);if(r)return!0}return!("function"!=typeof e||!e())||!this.isReadyLock&&this.isReady()||!!this.mouse.hasEvents()}},{key:"render",value:function(t,e,n,r,i,a,o){var s=this.CLIENT_WIDTH,u=this.CLIENT_HEIGHT,l=this.viewPort,c=this.ctx,h=this.isFirstRender,f=c.canvas;l.clear(),f.width&&f.height?l.setCurrent(f.width,f.height):l.setCurrent(s,u);var g=t.getStyle("width"),d=t.getStyle("height");!e&&(h||"number"!=typeof r&&"number"!=typeof i)&&(g.hasValue()&&(f.width=g.getPixels("x"),f.style&&(f.style.width="".concat(f.width,"px"))),d.hasValue()&&(f.height=d.getPixels("y"),f.style&&(f.style.height="".concat(f.height,"px"))));var p,y,v,m,x,b,w=f.clientWidth||f.width,k=f.clientHeight||f.height;e&&g.hasValue()&&d.hasValue()&&(w=g.getPixels("x"),k=d.getPixels("y")),l.setCurrent(w,k),"number"==typeof a&&t.getAttribute("x",!0).setValue(a),"number"==typeof o&&t.getAttribute("y",!0).setValue(o),"number"!=typeof r&&"number"!=typeof i||(p=L(t.getAttribute("viewBox").getString()),v=y=0,"number"==typeof r&&((m=t.getStyle("width")).hasValue()?y=m.getPixels("x")/r:isNaN(p[2])||(y=p[2]/r)),"number"==typeof i&&((x=t.getStyle("height")).hasValue()?v=x.getPixels("y")/i:isNaN(p[3])||(v=p[3]/i)),y=y||v,v=v||y,t.getAttribute("width",!0).setValue(r),t.getAttribute("height",!0).setValue(i),(b=t.getStyle("transform",!0,!0)).setValue("".concat(b.getString()," scale(").concat(1/y,", ").concat(1/v,")"))),n||c.clearRect(0,0,w,k),t.render(c),h&&(this.isFirstRender=!1)}}]),ss);function ss(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.fetch,r=void 0===n?as:n,i=e.window,a=void 0===i?is:i;ci(this,ss),this.ctx=t,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new es,this.mouse=new rs(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=a,this.fetch=r}function us(t){ci(this,us),this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}function ls(t,e){ci(this,ls),this.x=t,this.y=e}function cs(){ci(this,cs),this.viewPorts=[]}os.defaultWindow=is,os.defaultFetch=as;function hs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fs(t,e){return!e||"object"!==xs(e)&&"function"!=typeof e?hs(t):e}function gs(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ws(t,e)}var ds,ps,ys=os.defaultFetch,vs="undefined"==typeof DOMParser?null:DOMParser,ms=(hi(Ss,[{key:"parse",value:(ps=di(gi.mark(function t(e){return gi.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(/^</.test(e))return t.abrupt("return",this.parseFromString(e));t.next=2;break;case 2:return t.abrupt("return",this.load(e));case 3:case"end":return t.stop()}},t,this)})),function(){return ps.apply(this,arguments)})},{key:"parseFromString",value:function(e){try{return(new this.DOMParser).parseFromString(e,"image/svg+xml")}catch(t){return(new this.DOMParser).parseFromString(e,"text/xml")}}},{key:"load",value:(ds=di(gi.mark(function t(e){var n,r;return gi.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch(e);case 2:return n=t.sent,t.next=5,n.text();case 5:return r=t.sent,t.abrupt("return",this.parseFromString(r));case 7:case"end":return t.stop()}},t,this)})),function(){return ds.apply(this,arguments)})}]),Ss),xs=n(function(e){function n(t){return e.exports=n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n}),bs=n(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),ws=n(function(n){function r(t,e){return n.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.exports=r}),ks=!ea(function(t){Array.from(t)});function Ss(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.fetch,n=void 0===e?ys:e,r=t.DOMParser,i=void 0===r?vs:r;ci(this,Ss),this.fetch=n,this.DOMParser=i}se({target:"Array",stat:!0,forced:ks},{from:function(t){var e,n,r,i,a,o,s=ce(t),u="function"==typeof this?this:Array,l=arguments.length,c=1<l?arguments[1]:void 0,h=void 0!==c,f=$i(s),g=0;if(h&&(c=le(c,2<l?arguments[2]:void 0,2)),null==f||u==Array&&_i(f))for(n=new u(e=ee(s.length));g<e;g++)o=h?c(s[g],g):s[g],ii(n,g,o);else for(a=(i=f.call(s)).next,n=new u;!(r=a.call(i)).done;g++)o=h?Gi(i,c,[r.value,g],!0):r.value,ii(n,g,o);return n.length=g,n}});var Ps=he("unscopables"),As=Array.prototype;null==As[Ps]&&Tt.f(As,Ps,{configurable:!0,value:dr(null)});function Es(t){As[Ps][t]=!0}var Cs=xe.includes,Ts=He("indexOf",{ACCESSORS:!0,1:0});se({target:"Array",proto:!0,forced:!Ts},{includes:function(t){return Cs(this,t,1<arguments.length?arguments[1]:void 0)}}),Es("includes");var Os=_e.some,Vs=Dn("some"),Ls=He("some");se({target:"Array",proto:!0,forced:!Vs||!Ls},{some:function(t){return Os(this,t,1<arguments.length?arguments[1]:void 0)}});var Rs=he("match");se({target:"String",proto:!0,forced:!function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Rs]=!1,"/./"[e](n)}catch(e){}}}("includes")},{includes:function(t){return!!~(it(this)+"").indexOf(function(t){if(wo(t))throw TypeError("The method doesn't accept regular expressions");return t}(t),1<arguments.length?arguments[1]:void 0)}});var Ns,Is,js,Ds=!et(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Ms=It("IE_PROTO"),zs=Object.prototype,Bs=Ds?Object.getPrototypeOf:function(t){return t=ce(t),ut(t,Ms)?t[Ms]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?zs:null},Fs=he("iterator"),_s=!1;[].keys&&("next"in(js=[].keys())?(Is=Bs(Bs(js)))!==Object.prototype&&(Ns=Is):_s=!0),null==Ns&&(Ns={}),ut(Ns,Fs)||Ot(Ns,Fs,function(){return this});function $s(){return this}function Gs(){return this}function Us(t,e,n,r,i,a,o){var s,u,l;function c(t){return t===i&&v?v:!Ys&&t in p?p[t]:"keys"===t||t===Zs||t===Ks?function(){return new n(this,t)}:function(){return new n(this)}}u=r,l=e+" Iterator",(s=n).prototype=dr(Ws,{next:nt(1,u)}),ur(s,l,!1),Wi[l]=$s;var h,f,g,d=!1,p=t.prototype,y=p[Qs]||p["@@iterator"]||i&&p[i],v=!Ys&&y||c(i),m="Array"==e&&p.entries||y;if(m&&(h=Bs(m.call(new t)),Hs!==Object.prototype&&h.next&&(Bs(h)!==Hs&&(Xs?Xs(h,Hs):"function"!=typeof h[Qs]&&Ot(h,Qs,Gs)),ur(h,e+" Iterator",!0))),i==Zs&&y&&y.name!==Zs&&(d=!0,v=function(){return y.call(this)}),p[Qs]!==v&&Ot(p,Qs,v),Wi[e]=v,i)if(f={values:c(Zs),keys:a?v:c("keys"),entries:c(Ks)},o)for(g in f)!Ys&&!d&&g in p||ve(p,g,f[g]);else se({target:e,proto:!0,forced:Ys||d},f);return f}var qs={IteratorPrototype:Ns,BUGGY_SAFARI_ITERATORS:_s},Ws=qs.IteratorPrototype,Xs=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(r){}return function(t,e){return ct(t),function(t){if(!ot(t)&&null!==t)throw TypeError("Can't set "+t+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),Hs=qs.IteratorPrototype,Ys=qs.BUGGY_SAFARI_ITERATORS,Qs=he("iterator"),Zs="values",Ks="entries",Js=Rn.charAt,tu="String Iterator",eu=ye.set,nu=ye.getterFor(tu);Us(String,"String",function(t){eu(this,{type:tu,string:t+"",index:0})},function(){var t,e=nu(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Js(n,r),e.index+=t.length,{value:t,done:!1})});var ru,iu=sn.trim;se({target:"String",proto:!0,forced:(ru="trim",et(function(){return"\t\n\v\f\r                　\u2028\u2029\ufeff"[ru]()||"​᠎"!="​᠎"[ru]()||"\t\n\v\f\r                　\u2028\u2029\ufeff"[ru].name!==ru}))},{trim:function(){return iu(this)}});var au=(hi(ou,[{key:"getAttribute",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=this.attributes[t];if(n||!e)return n||Jo.empty(this.document);var r=new Jo(this.document,t,"");return this.attributes[t]=r}},{key:"getHrefAttribute",value:function(){for(var t in this.attributes)if("href"==t||/:href$/.test(t))return this.attributes[t];return Jo.empty(this.document)}},{key:"getStyle",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=this.styles[t];if(r)return r;var i=this.getAttribute(t);if(i&&i.hasValue())return this.styles[t]=i;if(!n){var a=this.parent;if(a){var o=a.getStyle(t);if(o&&o.hasValue())return o}}if(e){var s=new Jo(this.document,t,"");return this.styles[t]=s}return r||Jo.empty(this.document)}},{key:"render",value:function(t){var e,n;"none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()&&(t.save(),this.getStyle("mask").hasValue()?(e=this.getStyle("mask").getDefinition())&&e.apply(t,this):"none"!==this.getStyle("filter").getValue("none")?(n=this.getStyle("filter").getDefinition())&&n.apply(t,this):(this.setContext(t),this.renderChildren(t),this.clearContext(t)),t.restore())}},{key:"setContext",value:function(){}},{key:"clearContext",value:function(){}},{key:"renderChildren",value:function(e){this.children.forEach(function(t){t.render(e)})}},{key:"addChild",value:function(t){var e=t instanceof ou?t:this.document.createElement(t);e.parent=this,ou.ignoreChildTypes.includes(e.type)||this.children.push(e)}},{key:"matchesSelector",value:function(e){var t=this.node;if("function"==typeof t.matches)return t.matches(e);var n=t.getAttribute("class");return!(!n||""===n)&&n.split(" ").some(function(t){if(".".concat(t)===e)return!0})}},{key:"addStylesFromStyleDefinition",value:function(){var t=this.document,e=t.styles,n=t.stylesSpecificity;for(var r in e)if("@"!==r[0]&&this.matchesSelector(r)){var i=e[r],a=n[r];if(i)for(var o in i){var s=this.stylesSpecificity[o];void 0===s&&(s="000"),s<=a&&(this.styles[o]=i[o],this.stylesSpecificity[o]=a)}}}}]),ou);function ou(a,t){var e,n,o=this,r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];ci(this,ou),this.document=a,this.node=t,this.captureTextNodes=r,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],t&&1===t.nodeType&&(Array.from(t.attributes).forEach(function(t){var e=l(t.nodeName);o.attributes[e]=new Jo(a,e,t.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(function(t){return t.trim()}).forEach(function(t){var e,n,r,i;t&&(e=t.split(":"),r=(n=qn(e,2))[0],i=n[1],o.styles[r]=new Jo(a,r.trim(),i.trim()))}),e=a.definitions,(n=this.getAttribute("id")).hasValue()&&!e[n.getValue()]&&(e[n.getValue()]=this),Array.from(t.childNodes).forEach(function(t){var e;1===t.nodeType?o.addChild(t):!r||3!==t.nodeType&&4!==t.nodeType||0<(e=a.createTextNode(t)).getText().length&&o.addChild(e)}))}au.ignoreChildTypes=["title"];var su=(gs(gu,au),gu),uu=xe.indexOf,lu=[].indexOf,cu=!!lu&&1/[1].indexOf(1,-0)<0,hu=Dn("indexOf"),fu=He("indexOf",{ACCESSORS:!0,1:0});function gu(t,e,n){var r;return ci(this,gu),r=fs(this,bs(gu).call(this,t,e,n)),console.warn("Element ".concat(e.nodeName," not yet implemented.")),r}se({target:"Array",proto:!0,forced:cu||!hu||!fu},{indexOf:function(t){return cu?lu.apply(this,arguments)||0:uu(this,t,1<arguments.length?arguments[1]:void 0)}});var du=[].reverse,pu=[1,2];se({target:"Array",proto:!0,forced:pu+""==pu.reverse()+""},{reverse:function(){return Ne(this)&&(this.length=this.length),du.call(this)}});var yu=n(function(r){function i(t,e,n){return r.exports=i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bs(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},i(t,e,n||t)}r.exports=i}),vu=(hi(mu,[{key:"toString",value:function(){return[function(t){if(!t)return"";var e=t.trim().toLowerCase();return"normal"===e||"italic"===e||"oblique"===e||"inherit"===e||"initial"===e||"unset"===e||/^oblique\s+(-|)\d+deg$/.test(e)?e:""}(this.fontStyle),this.fontVariant,function(t){if(!t)return"";var e=t.trim().toLowerCase();return"normal"===e||"bold"===e||"lighter"===e||"bolder"===e||"inherit"===e||"initial"===e||"unset"===e||/^[\d.]+$/.test(e)?e:""}(this.fontWeight),this.fontSize,(t=this.fontFamily,"undefined"==typeof process?t:t.trim().split(",").map(G).join(","))].join(" ").trim();var t}}],[{key:"parse",value:function(){var t=1<arguments.length?arguments[1]:void 0,r="",i="",a="",o="",s="",e=F(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").trim().split(" "),u={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return e.forEach(function(t){switch(!0){case!u.fontStyle&&mu.styles.includes(t):"inherit"!==t&&(r=t),u.fontStyle=!0;break;case!u.fontVariant&&mu.variants.includes(t):"inherit"!==t&&(i=t),u.fontStyle=!0,u.fontVariant=!0;break;case!u.fontWeight&&mu.weights.includes(t):"inherit"!==t&&(a=t),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0;break;case!u.fontSize:var e,n;"inherit"!==t&&(e=t.split("/"),n=qn(e,1),o=n[0]),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0,u.fontSize=!0;break;default:"inherit"!==t&&(s+=t)}}),new mu(r,i,a,o,s,t)}}]),mu);function mu(t,e,n,r,i,a){ci(this,mu);var o=a?"string"==typeof a?mu.parse(a):a:{};this.fontFamily=i||o.fontFamily,this.fontSize=r||o.fontSize,this.fontStyle=t||o.fontStyle,this.fontWeight=n||o.fontWeight,this.fontVariant=e||o.fontVariant}vu.styles="normal|italic|oblique|inherit",vu.variants="normal|small-caps|inherit",vu.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";function xu(t,e,n){var r,i;return Xs&&"function"==typeof(r=e.constructor)&&r!==n&&ot(i=r.prototype)&&i!==n.prototype&&Xs(t,i),t}function bu(t){var e,n,r,i,a,o,s,u,l=st(t,!1);if("string"==typeof l&&2<l.length)if(43===(e=(l=Pu(l)).charCodeAt(0))||45===e){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(o=(a=l.slice(2)).length,s=0;s<o;s++)if((u=a.charCodeAt(s))<48||i<u)return NaN;return parseInt(a,r)}return+l}var wu=Se.f,ku=Et.f,Su=Tt.f,Pu=sn.trim,Au="Number",Eu=gt[Au],Cu=Eu.prototype,Tu=rt(dr(Cu))==Au;if(Le(Au,!Eu(" 0o1")||!Eu("0b1")||Eu("+0x1"))){for(var Ou,Vu=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Vu&&(Tu?et(function(){Cu.valueOf.call(n)}):rt(n)!=Au)?xu(new Eu(bu(e)),n,Vu):bu(e)},Lu=dt?wu(Eu):["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY","EPSILON","isFinite","isInteger","isNaN","isSafeInteger","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","parseFloat","parseInt","isInteger"],Ru=0;Lu.length>Ru;Ru++)ut(Eu,Ou=Lu[Ru])&&!ut(Vu,Ou)&&Su(Vu,Ou,ku(Eu,Ou));(Vu.prototype=Cu).constructor=Vu,ve(gt,Au,Vu)}var Nu=(hi(Bu,[{key:"addPoint",value:function(t,e){void 0!==t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),void 0!==e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}},{key:"addX",value:function(t){this.addPoint(t,null)}},{key:"addY",value:function(t){this.addPoint(null,t)}},{key:"addBoundingBox",value:function(t){var e,n,r,i;t&&(e=t.x1,n=t.y1,r=t.x2,i=t.y2,this.addPoint(e,n),this.addPoint(r,i))}},{key:"sumCubic",value:function(t,e,n,r,i){return O(1-t,3)*e+3*O(1-t,2)*t*n+3*(1-t)*O(t,2)*r+O(t,3)*i}},{key:"bezierCurveAdd",value:function(t,e,n,r,i){var a=6*e-12*n+6*r,o=-3*e+9*n-9*r+3*i,s=3*n-3*e;if(0!=o){var u,l,c=O(a,2)-4*s*o;c<0||(0<(u=(-a+T(c))/(2*o))&&u<1&&(t?this.addX(this.sumCubic(u,e,n,r,i)):this.addY(this.sumCubic(u,e,n,r,i))),0<(l=(-a-T(c))/(2*o))&&l<1&&(t?this.addX(this.sumCubic(l,e,n,r,i)):this.addY(this.sumCubic(l,e,n,r,i))))}else{if(0==a)return;var h=-s/a;0<h&&h<1&&(t?this.addX(this.sumCubic(h,e,n,r,i)):this.addY(this.sumCubic(h,e,n,r,i)))}}},{key:"addBezierCurve",value:function(t,e,n,r,i,a,o,s){this.addPoint(t,e),this.addPoint(o,s),this.bezierCurveAdd(!0,t,n,i,o),this.bezierCurveAdd(!1,e,r,a,s)}},{key:"addQuadraticCurve",value:function(t,e,n,r,i,a){var o=t+2/3*(n-t),s=e+2/3*(r-e);this.addBezierCurve(t,e,o,o+1/3*(i-t),s,s+1/3*(a-e),i,a)}},{key:"isPointInBox",value:function(t,e){var n=this.x1,r=this.y1,i=this.x2,a=this.y2;return n<=t&&t<=i&&r<=e&&e<=a}},{key:"x",get:function(){return this.x1}},{key:"y",get:function(){return this.y1}},{key:"width",get:function(){return this.x2-this.x1}},{key:"height",get:function(){return this.y2-this.y1}}]),Bu),Iu="toString",ju=RegExp.prototype,Du=ju[Iu],Mu=et(function(){return"/a/b"!=Du.call({source:"a",flags:"b"})}),zu=Du.name!=Iu;function Bu(){var t=Number.NaN,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t;ci(this,Bu),this.x1=e,this.y1=n,this.x2=r,this.y2=i,this.addPoint(e,n),this.addPoint(r,i)}(Mu||zu)&&ve(RegExp.prototype,Iu,function(){var t=ct(this),e=t.source+"",n=t.flags;return"/"+e+"/"+((void 0===n&&t instanceof RegExp&&!("flags"in ju)?hn.call(t):n)+"")},{unsafe:!0});var Fu=(hi(el,[{key:"apply",value:function(t){var e=this.point,n=e.x,r=e.y;t.translate(n||0,r||0)}},{key:"unapply",value:function(t){var e=this.point,n=e.x,r=e.y;t.translate(-1*n||0,-1*r||0)}},{key:"applyToPoint",value:function(t){var e=this.point,n=e.x,r=e.y;t.applyTransform([1,0,0,1,n||0,r||0])}}]),el),_u=(hi(tl,[{key:"apply",value:function(t){var e=this.cx,n=this.cy,r=this.angle;t.translate(e,n),t.rotate(r.getRadians()),t.translate(-e,-n)}},{key:"unapply",value:function(t){var e=this.cx,n=this.cy,r=this.angle;t.translate(e,n),t.rotate(-1*r.getRadians()),t.translate(-e,-n)}},{key:"applyToPoint",value:function(t){var e=this.cx,n=this.cy,r=this.angle.getRadians();t.applyTransform([1,0,0,1,e||0,n||0]),t.applyTransform([C(r),E(r),-E(r),C(r),0,0]),t.applyTransform([1,0,0,1,-e||0,-n||0])}}]),tl),$u=(hi(Ju,[{key:"apply",value:function(t){var e=this.scale,n=e.x,r=e.y;t.scale(n,r||n)}},{key:"unapply",value:function(t){var e=this.scale,n=e.x,r=e.y;t.scale(1/n,1/r||n)}},{key:"applyToPoint",value:function(t){var e=this.scale,n=e.x,r=e.y;t.applyTransform([n||0,0,0,r||0,0,0])}}]),Ju),Gu=(hi(Ku,[{key:"apply",value:function(t){var e=this.matrix;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},{key:"unapply",value:function(t){var e=this.matrix,n=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],u=1/(n*(o-0*s)-r*(a-0*s)+i*(0*a-0*o));t.transform(u*(o-0*s),u*(0*s-a),u*(0*i-r),u*(n-0*i),u*(r*s-i*o),u*(i*a-n*s))}},{key:"applyToPoint",value:function(t){t.applyTransform(this.matrix)}}]),Ku),Uu=(gs(Zu,Gu),Zu),qu=(gs(Qu,Uu),Qu),Wu=(gs(Yu,Uu),Yu),Xu=(hi(Hu,[{key:"apply",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].apply(t)}},{key:"unapply",value:function(t){for(var e=this.transforms,n=e.length-1;0<=n;n--)e[n].unapply(t)}},{key:"applyToPoint",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].applyToPoint(t)}}],[{key:"fromElement",value:function(t,e){var n=e.getStyle("transform",!1,!0),r=e.getStyle("transform-origin",!1,!0);return n.hasValue()?new Hu(t,n.getString(),r.getString()):null}}]),Hu);function Hu(t,e,n){var c=this;ci(this,Hu),this.document=t,this.transforms=[];var r=F(e).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),h=n?L(n):[];r.forEach(function(t){var e,n,r,i,a,o,s,u,l;"none"!==t&&(o=t.split("("),s=qn(o,2),u=s[0],l=s[1],e=[u.trim(),l.trim().replace(")","")],r=(n=qn(e,2))[0],i=n[1],void 0!==(a=Hu.transformTypes[r])&&c.transforms.push(new a(c.document,i,h)))})}function Yu(t,e){var n;return ci(this,Yu),(n=fs(this,bs(Yu).call(this,t,e))).type="skewY",n.matrix=[1,r(n.angle.getRadians()),0,1,0,0],n}function Qu(t,e){var n;return ci(this,Qu),(n=fs(this,bs(Qu).call(this,t,e))).type="skewX",n.matrix=[1,0,r(n.angle.getRadians()),1,0,0],n}function Zu(t,e){var n;return ci(this,Zu),(n=fs(this,bs(Zu).call(this,t,e))).type="skew",n.angle=null,n.angle=new Jo(t,"angle",e),n}function Ku(t,e){ci(this,Ku),this.type="matrix",this.matrix=[],this.matrix=L(e)}function Ju(t,e){ci(this,Ju),this.type="scale",this.scale=null;var n=ns.parseScale(e);0!==n.x&&0!==n.y||(n.x=Jn,n.y=Jn),this.scale=n}function tl(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];ci(this,tl),this.type="rotate",this.angle=null,this.cx=0,this.cy=0;var r=L(e);this.angle=new Jo(t,"angle",r[0]),this.cx=(r[1]||0)+(n[0]||0),this.cy=(r[2]||0)+(n[1]||0)}function el(t,e){ci(this,el),this.type="translate",this.point=null,this.point=ns.parse(e)}Xu.transformTypes={translate:Fu,rotate:_u,scale:$u,matrix:Gu,skewX:qu,skewY:Wu};var nl=(gs(ll,au),hi(ll,[{key:"calculateOpacity",value:function(){for(var t,e=1,n=this;n;)(t=n.getStyle("opacity",!1,!0)).hasValue()&&(e*=t.getNumber()),n=n.parent;return e}},{key:"setContext",value:function(t){var e,n,r,i,a,o,s,u,l,c,h,f,g,d,p,y,v,m,x,b,w,k,S,P,A,E,C;1<arguments.length&&void 0!==arguments[1]&&arguments[1]||(e=this.getStyle("fill"),n=this.getStyle("fill-opacity"),r=this.getStyle("stroke"),i=this.getStyle("stroke-opacity"),e.isUrlDefinition()?(a=e.getFillStyleDefinition(this,n))&&(t.fillStyle=a):e.hasValue()&&("currentColor"===e.getString()&&e.setValue(this.getStyle("color").getValue()),"inherit"!==(o=e.getString())&&(t.fillStyle="none"===o?"rgba(0,0,0,0)":o)),n.hasValue()&&(s=new Jo(this.document,"fill",t.fillStyle).addOpacity(n).getString(),t.fillStyle=s),r.isUrlDefinition()?(u=r.getFillStyleDefinition(this,i))&&(t.strokeStyle=u):r.hasValue()&&("currentColor"===r.getString()&&r.setValue(this.getStyle("color").getValue()),"inherit"!==(l=r.getString())&&(t.strokeStyle="none"===l?"rgba(0,0,0,0)":l)),i.hasValue()&&(c=new Jo(this.document,"stroke",t.strokeStyle).addOpacity(i).getString(),t.strokeStyle=c),(h=this.getStyle("stroke-width")).hasValue()&&(f=h.getPixels(),t.lineWidth=f||Jn),g=this.getStyle("stroke-linecap"),d=this.getStyle("stroke-linejoin"),p=this.getStyle("stroke-miterlimit"),y=this.getStyle("paint-order"),v=this.getStyle("stroke-dasharray"),m=this.getStyle("stroke-dashoffset"),g.hasValue()&&(t.lineCap=g.getString()),d.hasValue()&&(t.lineJoin=d.getString()),p.hasValue()&&(t.miterLimit=p.getNumber()),y.hasValue()&&(t.paintOrder=y.getValue()),v.hasValue()&&"none"!==v.getString()&&(x=L(v.getString()),void 0===t.setLineDash?void 0===t.webkitLineDash?void 0===t.mozDash||1===x.length&&0===x[0]||(t.mozDash=x):t.webkitLineDash=x:t.setLineDash(x),b=m.getPixels(),void 0===t.lineDashOffset?void 0===t.webkitLineDashOffset?void 0!==t.mozDashOffset&&(t.mozDashOffset=b):t.webkitLineDashOffset=b:t.lineDashOffset=b)),this.modifiedEmSizeStack=!1,void 0!==t.font&&(w=this.getStyle("font"),k=this.getStyle("font-style"),S=this.getStyle("font-variant"),P=this.getStyle("font-weight"),A=this.getStyle("font-size"),E=this.getStyle("font-family"),C=new vu(k.getString(),S.getString(),P.getString(),A.hasValue()?"".concat(A.getPixels(!0),"px"):"",E.getString(),vu.parse(w.getString(),t.font)),k.setValue(C.fontStyle),S.setValue(C.fontVariant),P.setValue(C.fontWeight),A.setValue(C.fontSize),E.setValue(C.fontFamily),t.font=C.toString(),A.isPixels()&&(this.document.emSize=A.getPixels(),this.modifiedEmSizeStack=!0));var T=Xu.fromElement(this.document,this);T&&T.apply(t);var O,V=this.getStyle("clip-path",!1,!0);!V.hasValue()||(O=V.getDefinition())&&O.apply(t),t.globalAlpha=this.calculateOpacity()}},{key:"clearContext",value:function(t){yu(bs(ll.prototype),"clearContext",this).call(this,t),this.modifiedEmSizeStack&&this.document.popEmSize()}}]),ll),rl=(gs(ul,nl),hi(ul,[{key:"setContext",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];yu(bs(ul.prototype),"setContext",this).call(this,t,e);var n=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();n&&(t.textBaseline=n)}},{key:"initializeCoordinates",value:function(t){this.x=this.getAttribute("x").getPixels("x"),this.y=this.getAttribute("y").getPixels("y");var e=this.getAttribute("dx"),n=this.getAttribute("dy");e.hasValue()&&(this.x+=e.getPixels("x")),n.hasValue()&&(this.y+=n.getPixels("y")),this.x+=this.getAnchorDelta(t,this,0)}},{key:"getBoundingBox",value:function(r){var i=this;if("text"!==this.type)return this.getTElementBoundingBox(r);this.initializeCoordinates(r);var a=null;return this.children.forEach(function(t,e){var n=i.getChildBoundingBox(r,i,i,e);a?a.addBoundingBox(n):a=n}),a}},{key:"getFontSize",value:function(){var t=this.document,e=this.parent,n=vu.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(n)}},{key:"getTElementBoundingBox",value:function(t){var e=this.getFontSize();return new Nu(this.x,this.y-e,this.x+this.measureText(t),this.y)}},{key:"getGlyph",value:function(t,e,n){var r,i,a,o,s=e[n],u=null;return t.isArabic?(r=e.length,i=e[n-1],a=e[n+1],o=0<n&&" "!==i&&(n===r-1||" "===a)?"initial":0<n&&" "!==i&&n<r-2&&" "!==a?"medial":(0===n||" "===i)&&n<r-2&&" "!==a?"terminal":"isolated",void 0!==t.glyphs[s]&&((u=t.glyphs[s][o])||"glyph"!==t.glyphs[s].type||(u=t.glyphs[s]))):u=t.glyphs[s],u=u||t.missingGlyph}},{key:"getText",value:function(){return""}},{key:"getTextFromNode",value:function(t){var e=t||this.node,n=Array.from(e.parentNode.childNodes),r=n.indexOf(e),i=n.length-1,a=F(e.value||e.text||e.textContent||"");return 0===r&&(a=s(a)),r===i&&(a=u(a)),a}},{key:"renderChildren",value:function(n){var t,r=this;"text"===this.type?(this.initializeCoordinates(n),this.children.forEach(function(t,e){r.renderChild(n,r,r,e)}),(t=this.document.screen.mouse).isWorking()&&t.checkBoundingBox(this,this.getBoundingBox(n))):this.renderTElementChildren(n)}},{key:"renderTElementChildren",value:function(t){var e=this.document,n=this.parent,r=this.getText(),i=n.getStyle("font-family").getDefinition();if(i)for(var a,o=i.fontFace.unitsPerEm,s=vu.parse(e.ctx.font),u=n.getStyle("font-size").getNumber(s.fontSize),l=n.getStyle("font-style").getString(s.fontStyle),c=u/o,h=i.isRTL?r.split("").reverse().join(""):r,f=L(n.getAttribute("dx").getString()),g=h.length,d=0;d<g;d++){a=this.getGlyph(i,h,d),t.translate(this.x,this.y),t.scale(c,-c);var p=t.lineWidth;t.lineWidth=t.lineWidth*o/u,"italic"===l&&t.transform(1,0,.4,1,0,0),a.render(t),"italic"===l&&t.transform(1,0,-.4,1,0,0),t.lineWidth=p,t.scale(1/c,-1/c),t.translate(-this.x,-this.y),this.x+=u*(a.horizAdvX||i.horizAdvX)/o,void 0===f[d]||isNaN(f[d])||(this.x+=f[d])}else{var y=this.x,v=this.y;"stroke"===t.paintOrder?(t.strokeStyle&&t.strokeText(r,y,v),t.fillStyle&&t.fillText(r,y,v)):(t.fillStyle&&t.fillText(r,y,v),t.strokeStyle&&t.strokeText(r,y,v))}}},{key:"getAnchorDelta",value:function(t,e,n){var r=this.getStyle("text-anchor").getString("start");if("start"===r)return 0;for(var i=e.children,a=i.length,o=null,s=0,u=n;u<a&&(o=i[u],!(n<u&&o.getAttribute("x").hasValue()||o.getAttribute("text-anchor").hasValue()));u++)s+=o.measureTextRecursive(t);return-1*("end"===r?s:s/2)}},{key:"adjustChildCoordinates",value:function(t,e,n,r){var i=n.children[r];if("function"!=typeof i.measureText)return i;var a,o,s=i.getAttribute("x"),u=i.getAttribute("y"),l=i.getAttribute("dx"),c=i.getAttribute("dy"),h=i.getAttribute("text-anchor").getString("start");return 0===r&&"textNode"!==i.type&&(s.hasValue()||s.setValue(e.getAttribute("x").getValue("0")),u.hasValue()||u.setValue(e.getAttribute("y").getValue("0")),l.hasValue()||l.setValue(e.getAttribute("dx").getValue("0")),c.hasValue()||c.setValue(e.getAttribute("dy").getValue("0"))),s.hasValue()?(i.x=s.getPixels("x")+e.getAnchorDelta(t,n,r),"start"!==h&&(a=i.measureTextRecursive(t),i.x+=-1*("end"===h?a:a/2)),l.hasValue()&&(i.x+=l.getPixels("x"))):("start"!==h&&(o=i.measureTextRecursive(t),e.x+=-1*("end"===h?o:o/2)),l.hasValue()&&(e.x+=l.getPixels("x")),i.x=e.x),e.x=i.x+i.measureText(t),u.hasValue()?(i.y=u.getPixels("y"),c.hasValue()&&(i.y+=c.getPixels("y"))):(c.hasValue()&&(e.y+=c.getPixels("y")),i.y=e.y),e.y=i.y,i}},{key:"getChildBoundingBox",value:function(r,i,t,e){var a=this.adjustChildCoordinates(r,i,t,e),o=a.getBoundingBox(r);return o?(a.children.forEach(function(t,e){var n=i.getChildBoundingBox(r,i,a,e);o.addBoundingBox(n)}),o):null}},{key:"renderChild",value:function(n,r,t,e){var i=this.adjustChildCoordinates(n,r,t,e);i.render(n),i.children.forEach(function(t,e){r.renderChild(n,r,i,e)})}},{key:"measureTextRecursive",value:function(n){return this.children.reduce(function(t,e){return t+e.measureTextRecursive(n)},this.measureText(n))}},{key:"measureText",value:function(t){var e=this.measureCache;if(~e)return e;var n=this.getText(),r=this.measureTargetText(t,n);return this.measureCache=r}},{key:"measureTargetText",value:function(t,e){if(!e.length)return 0;var n=this.parent,r=n.getStyle("font-family").getDefinition();if(r){for(var i=this.getFontSize(),a=r.isRTL?e.split("").reverse().join(""):e,o=L(n.getAttribute("dx").getString()),s=a.length,u=0,l=0;l<s;l++)u+=(this.getGlyph(r,a,l).horizAdvX||r.horizAdvX)*i/r.fontFace.unitsPerEm,void 0===o[l]||isNaN(o[l])||(u+=o[l]);return u}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);var c=t.measureText(e).width;return t.restore(),c}}]),ul),il=(gs(sl,rl),hi(sl,[{key:"getText",value:function(){return this.text}}]),sl),al=(gs(ol,il),ol);function ol(){var t;return ci(this,ol),(t=fs(this,bs(ol).apply(this,arguments))).type="textNode",t}function sl(t,e,n){var r;return ci(this,sl),(r=fs(this,bs(sl).call(this,t,e,(this instanceof sl?this.constructor:void 0)===sl||n))).type="tspan",r.text=0<r.children.length?"":r.getTextFromNode(),r}function ul(t,e,n){var r;return ci(this,ul),(r=fs(this,bs(ul).call(this,t,e,(this instanceof ul?this.constructor:void 0)===ul||n))).type="text",r.x=0,r.y=0,r.measureCache=-1,r}function ll(){var t;return ci(this,ll),(t=fs(this,bs(ll).apply(this,arguments))).modifiedEmSizeStack=!1,t}se({target:"Array",proto:!0},{fill:function(t){for(var e=ce(this),n=ee(e.length),r=arguments.length,i=ne(1<r?arguments[1]:void 0,n),a=2<r?arguments[2]:void 0,o=void 0===a?n:ne(a,n);i<o;)e[i++]=t;return e}}),Es("fill");var cl=(hi(Tl,[{key:"reset",value:function(){this.i=-1,this.command="",this.previousCommand="",this.start=new ns(0,0),this.control=new ns(0,0),this.current=new ns(0,0),this.points=[],this.angles=[]}},{key:"isEnd",value:function(){return this.i>=this.tokens.length-1}},{key:"isCommandOrEnd",value:function(){if(this.isEnd())return!0;var t=this.i,e=this.tokens;return/^[A-Za-z]$/.test(e[t+1])}},{key:"isRelativeCommand",value:function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0;default:return!1}}},{key:"getToken",value:function(){return this.i++,this.tokens[this.i]}},{key:"getScalar",value:function(){return parseFloat(this.getToken())}},{key:"nextCommand",value:function(){this.previousCommand=this.command,this.command=this.getToken()}},{key:"getPoint",value:function(){var t=new ns(this.getScalar(),this.getScalar());return this.makeAbsolute(t)}},{key:"getAsControlPoint",value:function(){var t=this.getPoint();return this.control=t}},{key:"getAsCurrentPoint",value:function(){var t=this.getPoint();return this.current=t}},{key:"getReflectedControlPoint",value:function(){var t=this.previousCommand.toLowerCase();if("c"!==t&&"s"!==t&&"q"!==t&&"t"!==t)return this.current;var e=this.current,n=e.x,r=e.y,i=this.control,a=i.x,o=i.y;return new ns(2*n-a,2*r-o)}},{key:"makeAbsolute",value:function(t){var e,n,r;return this.isRelativeCommand()&&(n=(e=this.current).x,r=e.y,t.x+=n,t.y+=r),t}},{key:"addMarker",value:function(t,e,n){var r=this.points,i=this.angles;n&&0<i.length&&!i[i.length-1]&&(i[i.length-1]=r[r.length-1].angleTo(n)),this.addMarkerAngle(t,e?e.angleTo(t):null)}},{key:"addMarkerAngle",value:function(t,e){this.points.push(t),this.angles.push(e)}},{key:"getMarkerPoints",value:function(){return this.points}},{key:"getMarkerAngles",value:function(){for(var t=this.angles,e=t.length,n=0;n<e;n++)if(!t[n])for(var r=n+1;r<e;r++)if(t[r]){t[n]=t[r];break}return t}}]),Tl),hl=(gs(Cl,nl),hi(Cl,[{key:"path",value:function(t){var e=this.pathParser,n=new Nu;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.nextCommand(),e.command){case"M":case"m":this.pathM(t,n);break;case"L":case"l":this.pathL(t,n);break;case"H":case"h":this.pathH(t,n);break;case"V":case"v":this.pathV(t,n);break;case"C":case"c":this.pathC(t,n);break;case"S":case"s":this.pathS(t,n);break;case"Q":case"q":this.pathQ(t,n);break;case"T":case"t":this.pathT(t,n);break;case"A":case"a":this.pathA(t,n);break;case"Z":case"z":this.pathZ(t,n)}return n}},{key:"getBoundingBox",value:function(){return this.path()}},{key:"getMarkers",value:function(){var t=this.pathParser,e=t.getMarkerPoints(),n=t.getMarkerAngles();return e.map(function(t,e){return[t,n[e]]})}},{key:"renderChildren",value:function(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var e=this.getStyle("fill-rule");""!==t.fillStyle&&("inherit"===e.getString("inherit")?t.fill():t.fill(e.getString())),""!==t.strokeStyle&&t.stroke();var n=this.getMarkers();if(n){var r,i,a,o,s,u,l,c,h=n.length-1,f=this.getStyle("marker-start"),g=this.getStyle("marker-mid"),d=this.getStyle("marker-end");if(f.isUrlDefinition()&&(r=f.getDefinition(),a=(i=qn(n[0],2))[0],o=i[1],r.render(t,a,o)),g.isUrlDefinition())for(var p=g.getDefinition(),y=1;y<h;y++){var v=qn(n[y],2),m=v[0],x=v[1];p.render(t,m,x)}d.isUrlDefinition()&&(s=d.getDefinition(),l=(u=qn(n[h],2))[0],c=u[1],s.render(t,l,c))}}},{key:"pathM",value:function(t,e){var n=this.pathParser,r=n.getAsCurrentPoint(),i=r.x,a=r.y;for(n.addMarker(r),e.addPoint(i,a),t&&t.moveTo(i,a),n.start=n.current;!n.isCommandOrEnd();){var o=n.getAsCurrentPoint(),s=o.x,u=o.y;n.addMarker(o,n.start),e.addPoint(s,u),t&&t.lineTo(s,u)}}},{key:"pathL",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getAsCurrentPoint(),a=i.x,o=i.y;n.addMarker(i,r),e.addPoint(a,o),t&&t.lineTo(a,o)}}},{key:"pathH",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=new ns((n.isRelativeCommand()?r.x:0)+n.getScalar(),r.y);n.addMarker(i,r),n.current=i,e.addPoint(i.x,i.y),t&&t.lineTo(i.x,i.y)}}},{key:"pathV",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=new ns(r.x,(n.isRelativeCommand()?r.y:0)+n.getScalar());n.addMarker(i,r),n.current=i,e.addPoint(i.x,i.y),t&&t.lineTo(i.x,i.y)}}},{key:"pathC",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getPoint(),a=n.getAsControlPoint(),o=n.getAsCurrentPoint();n.addMarker(o,a,i),e.addBezierCurve(r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}}},{key:"pathS",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getReflectedControlPoint(),a=n.getAsControlPoint(),o=n.getAsCurrentPoint();n.addMarker(o,a,i),e.addBezierCurve(r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}}},{key:"pathQ",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getAsControlPoint(),a=n.getAsCurrentPoint();n.addMarker(a,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,a.x,a.y),t&&t.quadraticCurveTo(i.x,i.y,a.x,a.y)}}},{key:"pathT",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getReflectedControlPoint();n.control=i;var a=n.getAsCurrentPoint();n.addMarker(a,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,a.x,a.y),t&&t.quadraticCurveTo(i.x,i.y,a.x,a.y)}}},{key:"pathA",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getScalar(),a=n.getScalar(),o=n.getScalar()*(A/180),s=n.getScalar(),u=n.getScalar(),l=n.getAsCurrentPoint(),c=new ns(C(o)*(r.x-l.x)/2+E(o)*(r.y-l.y)/2,-E(o)*(r.x-l.x)/2+C(o)*(r.y-l.y)/2),h=O(c.x,2)/O(i,2)+O(c.y,2)/O(a,2);1<h&&(i*=T(h),a*=T(h));var f=(s===u?-1:1)*T((O(i,2)*O(a,2)-O(i,2)*O(c.y,2)-O(a,2)*O(c.x,2))/(O(i,2)*O(c.y,2)+O(a,2)*O(c.x,2)));isNaN(f)&&(f=0);var g=new ns(f*i*c.y/a,f*-a*c.x/i),d=new ns((r.x+l.x)/2+C(o)*g.x-E(o)*g.y,(r.y+l.y)/2+E(o)*g.x+C(o)*g.y),p=R([1,0],[(c.x-g.x)/i,(c.y-g.y)/a]),y=[(c.x-g.x)/i,(c.y-g.y)/a],v=[(-c.x-g.x)/i,(-c.y-g.y)/a],m=R(y,v);V(y,v)<=-1&&(m=A),1<=V(y,v)&&(m=0);var x,b,w,k=1-u?1:-1,S=p+m/2*k,P=new ns(d.x+i*C(S),d.y+a*E(S));n.addMarkerAngle(P,S-k*A/2),n.addMarkerAngle(l,S-k*A),e.addPoint(l.x,l.y),!t||isNaN(p)||isNaN(m)||(x=a<i?i:a,b=a<i?1:i/a,w=a<i?a/i:1,t.translate(d.x,d.y),t.rotate(o),t.scale(b,w),t.arc(0,0,x,p,p+m,!!(1-u)),t.scale(1/b,1/w),t.rotate(-o),t.translate(-d.x,-d.y))}}},{key:"pathZ",value:function(t,e){var n=this.pathParser;t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath(),n.current=n.start}}]),Cl),fl=(gs(El,nl),hi(El,[{key:"clearContext",value:function(t){yu(bs(El.prototype),"clearContext",this).call(this,t),this.document.screen.viewPort.removeCurrent()}},{key:"setContext",value:function(t){var e,n=this.document,r=n.screen,i=n.window,a=t.canvas;r.setDefaults(t),a.style&&void 0!==t.font&&i&&void 0!==i.getComputedStyle&&(t.font=i.getComputedStyle(a).getPropertyValue("font"),(e=new Jo(n,"fontSize",vu.parse(t.font).fontSize)).hasValue()&&(n.rootEmSize=e.getPixels("y"),n.emSize=n.rootEmSize)),yu(bs(El.prototype),"setContext",this).call(this,t),this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y"));var o=r.viewPort,s=o.width,u=o.height;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%");var l=this.getAttribute("refX"),c=this.getAttribute("refY"),h=this.getAttribute("viewBox"),f=h.hasValue()?L(h.getString()):null,g=!this.root&&"visible"!==this.getAttribute("overflow").getValue("hidden"),d=0,p=0,y=0,v=0;f&&(d=f[0],p=f[1]),this.root||(s=this.getStyle("width").getPixels("x"),u=this.getStyle("height").getPixels("y"),"marker"===this.type&&(y=d,v=p,p=d=0)),r.viewPort.setCurrent(s,u),f&&(s=f[2],u=f[3]),n.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:r.viewPort.width,desiredWidth:s,height:r.viewPort.height,desiredHeight:u,minX:d,minY:p,refX:l.getValue(),refY:c.getValue(),clip:g,clipX:y,clipY:v}),f&&(r.viewPort.removeCurrent(),r.viewPort.setCurrent(s,u))}},{key:"resize",value:function(t){var e,n,r,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],o=this.getAttribute("width",!0),s=this.getAttribute("height",!0),u=this.getAttribute("viewBox"),l=this.getAttribute("style"),c=o.getNumber(0),h=s.getNumber(0);a&&("string"==typeof a?this.getAttribute("preserveAspectRatio",!0).setValue(a):(e=this.getAttribute("preserveAspectRatio")).hasValue()&&e.setValue(e.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))),o.setValue(t),s.setValue(i),u.hasValue()||u.setValue("0 0 ".concat(c||t," ").concat(h||i)),l.hasValue()&&(n=this.getStyle("width"),r=this.getStyle("height"),n.hasValue()&&n.setValue("".concat(t,"px")),r.hasValue()&&r.setValue("".concat(i,"px")))}}]),El),gl=(gs(Al,hl),hi(Al,[{key:"path",value:function(t){var e,n=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),i=this.getStyle("width").getPixels("x"),a=this.getStyle("height").getPixels("y"),o=this.getAttribute("rx"),s=this.getAttribute("ry"),u=o.getPixels("x"),l=s.getPixels("y");return o.hasValue()&&!s.hasValue()&&(l=u),s.hasValue()&&!o.hasValue()&&(u=l),u=B(u,i/2),l=B(l,a/2),t&&(e=(T(2)-1)/3*4,t.beginPath(),0<a&&0<i&&(t.moveTo(n+u,r),t.lineTo(n+i-u,r),t.bezierCurveTo(n+i-u+e*u,r,n+i,r+l-e*l,n+i,r+l),t.lineTo(n+i,r+a-l),t.bezierCurveTo(n+i,r+a-l+e*l,n+i-u+e*u,r+a,n+i-u,r+a),t.lineTo(n+u,r+a),t.bezierCurveTo(n+u-e*u,r+a,n,r+a-l+e*l,n,r+a-l),t.lineTo(n,r+l),t.bezierCurveTo(n,r+l-e*l,n+u-e*u,r,n+u,r),t.closePath())),new Nu(n,r,n+i,r+a)}},{key:"getMarkers",value:function(){return null}}]),Al),dl=(gs(Pl,hl),hi(Pl,[{key:"path",value:function(t){var e=this.getAttribute("cx").getPixels("x"),n=this.getAttribute("cy").getPixels("y"),r=this.getAttribute("r").getPixels();return t&&0<r&&(t.beginPath(),t.arc(e,n,r,0,2*A,!1),t.closePath()),new Nu(e-r,n-r,e+r,n+r)}},{key:"getMarkers",value:function(){return null}}]),Pl),pl=(gs(Sl,hl),hi(Sl,[{key:"path",value:function(t){var e=(T(2)-1)/3*4,n=this.getAttribute("rx").getPixels("x"),r=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return t&&(t.beginPath(),t.moveTo(i+n,a),t.bezierCurveTo(i+n,a+e*r,i+e*n,a+r,i,a+r),t.bezierCurveTo(i-e*n,a+r,i-n,a+e*r,i-n,a),t.bezierCurveTo(i-n,a-e*r,i-e*n,a-r,i,a-r),t.bezierCurveTo(i+e*n,a-r,i+n,a-e*r,i+n,a),t.closePath()),new Nu(i-n,a-r,i+n,a+r)}},{key:"getMarkers",value:function(){return null}}]),Sl),yl=(gs(kl,hl),hi(kl,[{key:"getPoints",value:function(){return[new ns(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new ns(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}},{key:"path",value:function(t){var e=this.getPoints(),n=qn(e,2),r=n[0],i=r.x,a=r.y,o=n[1],s=o.x,u=o.y;return t&&(t.beginPath(),t.moveTo(i,a),t.lineTo(s,u)),new Nu(i,a,s,u)}},{key:"getMarkers",value:function(){var t=this.getPoints(),e=qn(t,2),n=e[0],r=e[1],i=n.angleTo(r);return[[n,i],[r,i]]}}]),kl),vl=(gs(wl,hl),hi(wl,[{key:"path",value:function(r){var t=this.points,e=qn(t,1)[0],n=e.x,i=e.y,a=new Nu(n,i);return r&&(r.beginPath(),r.moveTo(n,i)),t.forEach(function(t){var e=t.x,n=t.y;a.addPoint(e,n),r&&r.lineTo(e,n)}),a}},{key:"getMarkers",value:function(){var n=this.points,r=n.length-1,i=[];return n.forEach(function(t,e){e===r||i.push([t,t.angleTo(n[e+1])])}),0<i.length&&i.push([n[n.length-1],i[i.length-1][1]]),i}}]),wl),ml=(gs(bl,vl),hi(bl,[{key:"path",value:function(t){var e=yu(bs(bl.prototype),"path",this).call(this,t),n=qn(this.points,1)[0],r=n.x,i=n.y;return t&&(t.lineTo(r,i),t.closePath()),e}}]),bl),xl=Et.f;function bl(){var t;return ci(this,bl),(t=fs(this,bs(bl).apply(this,arguments))).type="polygon",t}function wl(t,e,n){var r;return ci(this,wl),(r=fs(this,bs(wl).call(this,t,e,n))).type="polyline",r.points=[],r.points=ns.parsePath(r.getAttribute("points").getString()),r}function kl(){var t;return ci(this,kl),(t=fs(this,bs(kl).apply(this,arguments))).type="line",t}function Sl(){var t;return ci(this,Sl),(t=fs(this,bs(Sl).apply(this,arguments))).type="ellipse",t}function Pl(){var t;return ci(this,Pl),(t=fs(this,bs(Pl).apply(this,arguments))).type="circle",t}function Al(){var t;return ci(this,Al),(t=fs(this,bs(Al).apply(this,arguments))).type="rect",t}function El(){var t;return ci(this,El),(t=fs(this,bs(El).apply(this,arguments))).type="svg",t.root=!1,t}function Cl(t,e,n){var r;return ci(this,Cl),(r=fs(this,bs(Cl).call(this,t,e,n))).type="path",r.pathParser=null,r.pathParser=new cl(r.getAttribute("d").getString()),r}function Tl(t){ci(this,Tl),this.control=null,this.start=null,this.current=null,this.command="",this.tokens=[],this.i=-1,this.previousCommand="",this.points=[],this.angles=[],this.tokens=F(t.replace(/,/gm," ").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2").replace(/([0-9])([+\-])/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ")).trim().split(" ")}se({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=xl(ct(t),e);return(!n||n.configurable)&&delete t[e]}});var Ol=(gs(Hl,au),hi(Hl,[{key:"createPattern",value:function(t,e,n){var r=this.getStyle("width").getPixels("x",!0),i=this.getStyle("height").getPixels("y",!0),a=new fl(this.document,null);a.attributes.viewBox=new Jo(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new Jo(this.document,"width","".concat(r,"px")),a.attributes.height=new Jo(this.document,"height","".concat(i,"px")),a.attributes.transform=new Jo(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children;var o=this.document.createCanvas(r,i),s=o.getContext("2d"),u=this.getAttribute("x"),l=this.getAttribute("y");u.hasValue()&&l.hasValue()&&s.translate(u.getPixels("x",!0),l.getPixels("y",!0)),n.hasValue()?this.styles["fill-opacity"]=n:Reflect.deleteProperty(this.styles,"fill-opacity");for(var c=-1;c<=1;c++)for(var h=-1;h<=1;h++)s.save(),a.attributes.x=new Jo(this.document,"x",c*o.width),a.attributes.y=new Jo(this.document,"y",h*o.height),a.render(s),s.restore();return t.createPattern(o,"repeat")}}]),Hl),Vl=(gs(Xl,au),hi(Xl,[{key:"render",value:function(t,e,n){var r,i,a,o,s;e&&(r=e.x,i=e.y,a=this.getAttribute("orient").getValue("auto"),o=this.getAttribute("markerUnits").getValue("strokeWidth"),t.translate(r,i),"auto"===a&&t.rotate(n),"strokeWidth"===o&&t.scale(t.lineWidth,t.lineWidth),t.save(),(s=new fl(this.document,null)).type=this.type,s.attributes.viewBox=new Jo(this.document,"viewBox",this.getAttribute("viewBox").getValue()),s.attributes.refX=new Jo(this.document,"refX",this.getAttribute("refX").getValue()),s.attributes.refY=new Jo(this.document,"refY",this.getAttribute("refY").getValue()),s.attributes.width=new Jo(this.document,"width",this.getAttribute("markerWidth").getValue()),s.attributes.height=new Jo(this.document,"height",this.getAttribute("markerHeight").getValue()),s.attributes.overflow=new Jo(this.document,"overflow",this.getAttribute("overflow").getValue()),s.attributes.fill=new Jo(this.document,"fill",this.getAttribute("fill").getValue("black")),s.attributes.stroke=new Jo(this.document,"stroke",this.getAttribute("stroke").getValue("none")),s.children=this.children,s.render(t),t.restore(),"strokeWidth"===o&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===a&&t.rotate(-n),t.translate(-r,-i))}}]),Xl),Ll=(gs(Wl,au),hi(Wl,[{key:"render",value:function(){}}]),Wl),Rl=(gs(ql,nl),hi(ql,[{key:"getBoundingBox",value:function(e){var n=new Nu;return this.children.forEach(function(t){n.addBoundingBox(t.getBoundingBox(e))}),n}}]),ql),Nl=(gs(Ul,au),hi(Ul,[{key:"getGradientUnits",value:function(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}},{key:"createGradient",value:function(t,e,n){var r=this,i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var a=i.stops,o=this.getGradient(t,e);if(!o)return this.addParentOpacity(n,a[a.length-1].color);if(a.forEach(function(t){o.addColorStop(t.offset,r.addParentOpacity(n,t.color))}),this.getAttribute("gradientTransform").hasValue()){var s=this.document,u=s.screen,l=u.MAX_VIRTUAL_PIXELS,c=u.viewPort,h=qn(c.viewPorts,1)[0],f=new gl(s,null);f.attributes.x=new Jo(s,"x",-l/3),f.attributes.y=new Jo(s,"y",-l/3),f.attributes.width=new Jo(s,"width",l),f.attributes.height=new Jo(s,"height",l);var g=new Rl(s,null);g.attributes.transform=new Jo(s,"transform",this.getAttribute("gradientTransform").getValue()),g.children=[f];var d=new fl(s,null);d.attributes.x=new Jo(s,"x",0),d.attributes.y=new Jo(s,"y",0),d.attributes.width=new Jo(s,"width",h.width),d.attributes.height=new Jo(s,"height",h.height),d.children=[g];var p=s.createCanvas(h.width,h.height),y=p.getContext("2d");return y.fillStyle=o,d.render(y),y.createPattern(p,"no-repeat")}return o}},{key:"inheritStopContainer",value:function(e){var n=this;this.attributesToInherit.forEach(function(t){!n.getAttribute(t).hasValue()&&e.getAttribute(t).hasValue()&&n.getAttribute(t,!0).setValue(e.getAttribute(t).getValue())})}},{key:"addParentOpacity",value:function(t,e){return t.hasValue()?new Jo(this.document,"color",e).addOpacity(t).getString():e}}]),Ul),Il=(gs(Gl,Nl),hi(Gl,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits(),r=n?e.getBoundingBox(t):null;if(n&&!r)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var i=n?r.x+r.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),a=n?r.y+r.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),o=n?r.x+r.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),s=n?r.y+r.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===o&&a===s?null:t.createLinearGradient(i,a,o,s)}}]),Gl),jl=(gs($l,Nl),hi($l,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits(),r=e.getBoundingBox(t);if(n&&!r)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var i=n?r.x+r.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),a=n?r.y+r.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=i,s=a;this.getAttribute("fx").hasValue()&&(o=n?r.x+r.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(s=n?r.y+r.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var u=n?(r.width+r.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),l=this.getAttribute("fr").getPixels();return t.createRadialGradient(o,s,l,i,a,u)}}]),$l),Dl=(gs(_l,au),_l),Ml="Array Iterator",zl=ye.set,Bl=ye.getterFor(Ml),Fl=Us(Array,"Array",function(t,e){zl(this,{type:Ml,target:at(t),index:0,kind:e})},function(){var t=Bl(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");function _l(t,e,n){var r;ci(this,_l),(r=fs(this,bs(_l).call(this,t,e,n))).type="stop";var i=z(0,B(1,r.getAttribute("offset").getNumber())),a=r.getStyle("stop-opacity"),o=r.getStyle("stop-color",!0);return""===o.getString()&&o.setValue("#000"),a.hasValue()&&(o=o.addOpacity(a)),r.offset=i,r.color=o.getString(),r}function $l(t,e,n){var r;return ci(this,$l),(r=fs(this,bs($l).call(this,t,e,n))).type="radialGradient",r.attributesToInherit.push("cx","cy","r","fx","fy","fr"),r}function Gl(t,e,n){var r;return ci(this,Gl),(r=fs(this,bs(Gl).call(this,t,e,n))).type="linearGradient",r.attributesToInherit.push("x1","y1","x2","y2"),r}function Ul(t,e,n){var r;ci(this,Ul),(r=fs(this,bs(Ul).call(this,t,e,n))).attributesToInherit=["gradientUnits"],r.stops=[];var i=hs(r),a=i.stops;return i.children.forEach(function(t){"stop"===t.type&&a.push(t)}),r}function ql(){var t;return ci(this,ql),(t=fs(this,bs(ql).apply(this,arguments))).type="g",t}function Wl(){var t;return ci(this,Wl),(t=fs(this,bs(Wl).apply(this,arguments))).type="defs",t}function Xl(){var t;return ci(this,Xl),(t=fs(this,bs(Xl).apply(this,arguments))).type="marker",t}function Hl(){var t;return ci(this,Hl),(t=fs(this,bs(Hl).apply(this,arguments))).type="pattern",t}Wi.Arguments=Wi.Array,Es("keys"),Es("values"),Es("entries");var Yl=he("iterator"),Ql=he("toStringTag"),Zl=Fl.values;for(var Kl in oi){var Jl=gt[Kl],tc=Jl&&Jl.prototype;if(tc){if(tc[Yl]!==Zl)try{Ot(tc,Yl,Zl)}catch(t){tc[Yl]=Zl}if(tc[Ql]||Ot(tc,Ql,Kl),oi[Kl])for(var ec in Fl)if(tc[ec]!==Fl[ec])try{Ot(tc,ec,Fl[ec])}catch(t){tc[ec]=Fl[ec]}}}var nc=(gs(sc,au),hi(sc,[{key:"getProperty",value:function(){var t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}},{key:"calcValue",value:function(){var t=this.initialUnits,e=this.getProgress(),n=e.progress,r=e.from,i=e.to,a=r.getNumber()+(i.getNumber()-r.getNumber())*n;return"%"===t&&(a*=100),"".concat(a).concat(t)}},{key:"update",value:function(t){var e=this.parent,n=this.getProperty();if(this.initialValue||(this.initialValue=n.getString(),this.initialUnits=n.getUnits()),this.duration>this.maxDuration){var r=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==r||this.frozen){if("remove"===r&&!this.removed)return this.removed=!0,n.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e.animationFrozen=!0,e.animationFrozenValue=n.getString();return!1}this.duration+=t;var i,a,o,s=!1;return this.begin<this.duration&&(o=this.calcValue(),(i=this.getAttribute("type")).hasValue()&&(a=i.getString(),o="".concat(a,"(").concat(o,")")),n.setValue(o),s=!0),s}},{key:"getProgress",value:function(){var t,e,n,r=this.document,i=this.values,a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};return i.hasValue()?(t=a.progress*(i.getValue().length-1),e=g(t),n=o(t),a.from=new Jo(r,"from",parseFloat(i.getValue()[e])),a.to=new Jo(r,"to",parseFloat(i.getValue()[n])),a.progress=(t-e)/(n-e)):(a.from=this.from,a.to=this.to),a}}]),sc),rc=sn.trim,ic=gt.parseInt,ac=/^[+-]?0[Xx]/,oc=8!==ic("\t\n\v\f\r                　\u2028\u2029\ufeff08")||22!==ic("\t\n\v\f\r                　\u2028\u2029\ufeff0x16")?function(t,e){var n=rc(t+"");return ic(n,e>>>0||(ac.test(n)?16:10))}:ic;function sc(t,e,n){var r;return ci(this,sc),(r=fs(this,bs(sc).call(this,t,e,n))).type="animate",r.duration=0,r.initialValue=null,r.initialUnits="",r.removed=!1,r.frozen=!1,t.screen.animations.push(hs(r)),r.begin=r.getAttribute("begin").getMilliseconds(),r.maxDuration=r.begin+r.getAttribute("dur").getMilliseconds(),r.from=r.getAttribute("from"),r.to=r.getAttribute("to"),r.values=r.getAttribute("values"),r.values.hasValue()&&r.values.setValue(r.values.getString().split(";")),r}se({global:!0,forced:parseInt!=oc},{parseInt:oc});var uc,lc,cc,hc,fc,gc,dc=(gs(xc,nc),hi(xc,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,n=t.from,r=t.to,i=new Ko(n.getString()),a=new Ko(r.getString());if(i.ok&&a.ok){var o=i.r+(a.r-i.r)*e,s=i.g+(a.g-i.g)*e,u=i.b+(a.b-i.b)*e;return"rgb(".concat(parseInt(o,10),", ").concat(parseInt(s,10),", ").concat(parseInt(u,10),")")}return this.getAttribute("from").getString()}}]),xc),pc=(gs(mc,nc),hi(mc,[{key:"calcValue",value:function(){var t=this.getProgress(),n=t.progress,e=t.from,r=t.to,i=L(e.getString()),a=L(r.getString());return i.map(function(t,e){return t+(a[e]-t)*n}).join(" ")}}]),mc),yc=Tt.f,vc=gt.Symbol;function mc(){var t;return ci(this,mc),(t=fs(this,bs(mc).apply(this,arguments))).type="animateTransform",t}function xc(){var t;return ci(this,xc),(t=fs(this,bs(xc).apply(this,arguments))).type="animateColor",t}!dt||"function"!=typeof vc||"description"in vc.prototype&&void 0===vc().description||(uc={},ae(lc=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:arguments[0]+"",e=this instanceof lc?new vc(t):void 0===t?vc():vc(t);return""===t&&(uc[e]=!0),e},vc),(cc=lc.prototype=vc.prototype).constructor=lc,hc=cc.toString,fc="Symbol(test)"==vc("test")+"",gc=/^Symbol\((.*)\)[^)]+$/,yc(cc,"description",{configurable:!0,get:function(){var t=ot(this)?this.valueOf():this,e=hc.call(t);if(ut(uc,t))return"";var n=fc?e.slice(7,-1):e.replace(gc,"$1");return""===n?void 0:n}}),se({global:!0,forced:!0},{Symbol:lc})),sr("iterator");var bc,wc,kc,Sc,Pc,Ac,Ec,Cc,Tc,Oc,Vc,Lc,Rc,Nc,Ic,jc,Dc,Mc,zc=(gs(fh,au),hi(fh,[{key:"render",value:function(){}}]),fh),Bc=(gs(hh,au),hh),Fc=(gs(ch,hl),ch),_c=(gs(lh,hl),lh),$c=(gs(uh,rl),hi(uh,[{key:"getText",value:function(){var t=this.getHrefAttribute().getDefinition();if(t){var e=t.children[0];if(e)return e.getText()}return""}}]),uh),Gc=(gs(sh,rl),hi(sh,[{key:"getText",value:function(){return this.text}},{key:"renderChildren",value:function(t){var e,n,r,i,a,o;this.hasText?(yu(bs(sh.prototype),"renderChildren",this).call(this,t),e=this.document,n=this.x,r=this.y,i=e.screen.mouse,a=new Jo(e,"fontSize",vu.parse(e.ctx.font).fontSize),i.isWorking()&&i.checkBoundingBox(this,new Nu(n,r-a.getPixels("y"),n+this.measureText(t),r))):0<this.children.length&&((o=new Rl(this.document,null)).children=this.children,o.parent=this,o.render(t))}},{key:"onClick",value:function(){var t=this.document.window;t&&t.open(this.getHrefAttribute().getString())}},{key:"onMouseMove",value:function(){this.document.ctx.canvas.style.cursor="pointer"}}]),sh),Uc=!et(function(){return Object.isExtensible(Object.preventExtensions({}))}),qc=n(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=Tt.f,r=Nt("meta"),i=0,a=Object.isExtensible||function(){return!0},o=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!ot(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!ut(t,r)){if(!a(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!ut(t,r)){if(!a(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return Uc&&o.REQUIRED&&a(t)&&!ut(t,r)&&n(t),t}};Qt[r]=!0}),Wc=(qc.REQUIRED,qc.fastKey,qc.getWeakData,qc.onFreeze,Tt.f),Xc=qc.fastKey,Hc=ye.set,Yc=ye.getterFor,Qc=(Pc=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Ac={getConstructor:function(t,n,r,i){function a(t,e,n){var r,i,a=s(t),o=u(t,e);return o?o.value=n:(a.last=o={index:i=Xc(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=o),r&&(r.next=o),dt?a.size++:t.size++,"F"!==i&&(a.index[i]=o)),t}var o=t(function(t,e){Fi(t,o,n),Hc(t,{type:n,index:dr(null),first:void 0,last:void 0,size:0}),dt||(t.size=0),null!=e&&Qi(e,t[i],t,r)}),s=Yc(n),u=function(t,e){var n,r=s(t),i=Xc(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return zi(o.prototype,{clear:function(){for(var t=s(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,dt?t.size=0:this.size=0},delete:function(t){var e,n,r=s(this),i=u(this,t);return i&&(e=i.next,n=i.previous,delete r.index[i.index],i.removed=!0,n&&(n.next=e),e&&(e.previous=n),r.first==i&&(r.first=e),r.last==i&&(r.last=n),dt?r.size--:this.size--),!!i},forEach:function(t){for(var e,n=s(this),r=le(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),zi(o.prototype,r?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),dt&&Wc(o.prototype,"size",{get:function(){return s(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",i=Yc(e),a=Yc(r);Us(t,e,function(t,e){Hc(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=a(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),Bi(e)}},Lc=-1!==(Sc="Map").indexOf("Map"),Rc=-1!==Sc.indexOf("Weak"),Nc=Lc?"set":"add",Ic=gt.Map,jc=Ic&&Ic.prototype,Mc={},Le(Sc,"function"!=typeof(Dc=Ic)||!(Rc||jc.forEach&&!et(function(){(new Ic).entries().next()})))?(Dc=Ac.getConstructor(Pc,Sc,Lc,Nc),qc.REQUIRED=!0):Le(Sc,!0)&&(Cc=(Ec=new Dc)[Nc](Rc?{}:-0,1)!=Ec,Tc=et(function(){Ec.has(1)}),Oc=ea(function(t){new Ic(t)}),Vc=!Rc&&et(function(){for(var t=new Ic,e=5;e--;)t[Nc](e,e);return!t.has(-0)}),Oc||(((Dc=Pc(function(t,e){Fi(t,Dc,Sc);var n=xu(new Ic,t,Dc);return null!=e&&Qi(e,n[Nc],n,Lc),n})).prototype=jc).constructor=Dc),(Tc||Vc)&&(oh("delete"),oh("has"),Lc&&oh("get")),(Vc||Cc)&&oh(Nc),Rc&&jc.clear&&delete jc.clear),Mc.Map=Dc,se({global:!0,forced:Dc!=Ic},Mc),ur(Dc,Sc),Rc||Ac.setStrong(Dc,Sc,Lc),gs(ah,rl),hi(ah,[{key:"getText",value:function(){return this.text}},{key:"path",value:function(d){var t=this.dataArray;d&&d.beginPath(),t.forEach(function(t){var e=t.command,n=t.points;switch(e){case"L":d&&d.lineTo(n[0],n[1]);break;case"M":d&&d.moveTo(n[0],n[1]);break;case"C":d&&d.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case"Q":d&&d.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case"A":var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=o<a?a:o,f=o<a?1:a/o,g=o<a?o/a:1;d&&(d.translate(r,i),d.rotate(l),d.scale(f,g),d.arc(0,0,h,s,s+u,!!(1-c)),d.scale(1/f,1/g),d.rotate(-l),d.translate(-r,-i));break;case"z":d&&d.closePath()}})}},{key:"renderChildren",value:function(a){this.setTextData(a),a.save();var o=this.parent.getStyle("text-decoration").getString(),s=this.getFontSize(),u=this.glyphInfo,t=a.fillStyle;"underline"===o&&a.beginPath(),u.forEach(function(t,e){var n=t.p0,r=t.p1,i=t.text;a.save(),a.translate(n.x,n.y),a.rotate(u[e].rotation),a.fillStyle&&a.fillText(i,0,0),a.strokeStyle&&a.strokeText(i,0,0),a.restore(),"underline"===o&&(0===e&&a.moveTo(n.x,n.y+s/8),a.lineTo(r.x,r.y+s/5))}),"underline"===o&&(a.lineWidth=s/20,a.strokeStyle=t,a.stroke(),a.closePath()),a.restore()}},{key:"getLetterSpacingAt",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[t]||0}},{key:"findSegmentToFitChar",value:function(t,e,n,r,i,a,o,s){var u=a,l=this.measureText(t,o);" "===o&&"justify"===e&&n<r&&(l+=(r-n)/i),-1<s&&(u+=this.getLetterSpacingAt(s));var c=this.textHeight/20,h={p0:this.getEquidistantPointOnPath(u,c),p1:this.getEquidistantPointOnPath(u+l,c)};return{offset:u+=l,segment:h}}},{key:"measureText",value:function(t,e){var n=this.measuresCache,r=e||this.getText();if(n.has(r))return n.get(r);var i=this.measureTargetText(t,r);return n.set(r,i),i}},{key:"setTextData",value:function(u){var l=this;if(!this.glyphInfo){var t=this.getText(),c=t.split(""),h=t.split(" ").length-1,e=L(this.parent.getAttribute("dx").getString("0")),f=this.parent.getStyle("text-anchor").getString("start"),n=this.getStyle("letter-spacing"),r=this.parent.getStyle("letter-spacing"),i=0;n.hasValue()&&"inherit"!==n.getValue()?n.hasValue()&&"initial"!==n.getValue()&&"unset"!==n.getValue()&&(i=n.getPixels()):i=r.getPixels();var a=[],o=t.length;this.letterSpacingCache=a;for(var s=0;s<o;s++)a.push(void 0===e[s]?i:e[s]);var g=a.reduce(function(t,e){return t+e||0},0);this.textWidth=this.measureText(u),this.textHeight=this.getFontSize();var d=z(this.textWidth+g,0);this.glyphInfo=[];var p=this.getPathLength(),y=this.getStyle("startOffset").getNumber(0)*p,v="end"!==f&&"right"!==f?"middle"!==f&&"center"!==f?0:-d/2:-d;v+=y,c.forEach(function(t,e){var n,r,i,a=l.findSegmentToFitChar(u,f,d,p,h,v,t,e),o=a.offset,s=a.segment;v=o,s.p0&&s.p1&&(n=l.getLineLength(s.p0.x,s.p0.y,s.p1.x,s.p1.y),r=l.getPointOnLine(0+n/2,s.p0.x,s.p0.y,s.p1.x,s.p1.y),i=m(s.p1.y-s.p0.y,s.p1.x-s.p0.x),l.glyphInfo.push({transposeX:r.x,transposeY:r.y,text:c[e],p0:s.p0,p1:s.p1,rotation:i}))})}}},{key:"parsePathData",value:function(t){if(this.pathLength=-1,!t)return[];var e=[],n=t.pathParser;for(n.reset();!n.isEnd();){var r=n.current,i=r?r.x:0,a=r?r.y:0,o="",s=[];n.nextCommand();var u=n.command.toUpperCase();switch(n.command){case"M":case"m":o=this.pathM(n,s);break;case"L":case"l":o=this.pathL(n,s);break;case"H":case"h":o=this.pathH(n,s);break;case"V":case"v":o=this.pathV(n,s);break;case"C":case"c":this.pathC(n,s);break;case"S":case"s":o=this.pathS(n,s);break;case"Q":case"q":this.pathQ(n,s);break;case"T":case"t":o=this.pathT(n,s);break;case"A":case"a":s=this.pathA(n);break;case"Z":case"z":n.current=n.start}"Z"===u?e.push({command:"z",points:[],pathLength:0}):e.push({command:o||u,points:s,start:{x:i,y:a},pathLength:this.calcLength(i,a,o||u,s)})}return e}},{key:"pathM",value:function(t,e){var n=t.getAsCurrentPoint();for(e.push(n.x,n.y),t.start=t.current;!t.isCommandOrEnd();){var r=t.getAsCurrentPoint();return e.push(r.x,r.y),"L"}}},{key:"pathL",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getAsCurrentPoint();e.push(n.x,n.y)}return"L"}},{key:"pathH",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.current,r=new ns((t.isRelativeCommand()?n.x:0)+t.getScalar(),n.y);e.push(r.x,r.y),t.current=r}return"L"}},{key:"pathV",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.current,r=new ns(n.x,(t.isRelativeCommand()?n.y:0)+t.getScalar());e.push(r.x,r.y),t.current=r}return"L"}},{key:"pathC",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getPoint(),r=t.getAsControlPoint(),i=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y,i.x,i.y)}}},{key:"pathS",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getReflectedControlPoint(),r=t.getAsControlPoint(),i=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y,i.x,i.y)}return"C"}},{key:"pathQ",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getAsControlPoint(),r=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y)}}},{key:"pathT",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getReflectedControlPoint();t.control=n;var r=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y)}return"Q"}},{key:"pathA",value:function(t){for(;!t.isCommandOrEnd();){var e=t.current,n=t.getScalar(),r=t.getScalar(),i=t.getScalar()*(A/180),a=t.getScalar(),o=t.getScalar(),s=t.getAsCurrentPoint(),u=new ns(C(i)*(e.x-s.x)/2+E(i)*(e.y-s.y)/2,-E(i)*(e.x-s.x)/2+C(i)*(e.y-s.y)/2),l=O(u.x,2)/O(n,2)+O(u.y,2)/O(r,2);1<l&&(n*=T(l),r*=T(l));var c=(a===o?-1:1)*T((O(n,2)*O(r,2)-O(n,2)*O(u.y,2)-O(r,2)*O(u.x,2))/(O(n,2)*O(u.y,2)+O(r,2)*O(u.x,2)));isNaN(c)&&(c=0);var h=new ns(c*n*u.y/r,c*-r*u.x/n),f=new ns((e.x+s.x)/2+C(i)*h.x-E(i)*h.y,(e.y+s.y)/2+E(i)*h.x+C(i)*h.y),g=R([1,0],[(u.x-h.x)/n,(u.y-h.y)/r]),d=[(u.x-h.x)/n,(u.y-h.y)/r],p=[(-u.x-h.x)/n,(-u.y-h.y)/r],y=R(d,p);return V(d,p)<=-1&&(y=A),1<=V(d,p)&&(y=0),0===o&&0<y&&(y-=2*A),1===o&&y<0&&(y+=2*A),[f.x,f.y,n,r,g,y,i,o]}}},{key:"calcLength",value:function(t,e,n,r){var i=Math.abs,a=0,o=null,s=null,u=0;switch(n){case"L":return this.getLineLength(t,e,r[0],r[1]);case"C":for(a=0,o=this.getPointOnCubicBezier(0,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),u=.01;u<=1;u+=.01)s=this.getPointOnCubicBezier(u,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"Q":for(a=0,o=this.getPointOnQuadraticBezier(0,t,e,r[0],r[1],r[2],r[3]),u=.01;u<=1;u+=.01)s=this.getPointOnQuadraticBezier(u,t,e,r[0],r[1],r[2],r[3]),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"A":a=0;var l=r[4],c=r[5],h=r[4]+c,f=A/180;if(i(l-h)<f&&(f=i(l-h)),o=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),c<0)for(u=l-f;h<u;u-=f)s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(u=l+f;u<h;u+=f)s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],h,0),a+=this.getLineLength(o.x,o.y,s.x,s.y)}return 0}},{key:"getPointOnLine",value:function(t,e,n,r,i){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:e,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:n,s=(i-n)/(r-e+Jn),u=T(t*t/(1+s*s));r<e&&(u*=-1);var l=s*u,c=null;if(r===e)c={x:a,y:o+l};else if((o-n)/(a-e+Jn)==s)c={x:a+u,y:o+l};else{var h=this.getLineLength(e,n,r,i);if(h<Jn)return null;var f=(a-e)*(r-e)+(o-n)*(i-n),g=e+(f/=h*h)*(r-e),d=n+f*(i-n),p=this.getLineLength(a,o,g,d),y=T(t*t-p*p),u=T(y*y/(1+s*s));r<e&&(u*=-1),c={x:g+u,y:d+(l=s*u)}}return c}},{key:"getPointOnPath",value:function(t){var e=this.getPathLength(),n=0,r=null;if(t<-5e-5||e<t-5e-5)return null;var i=this.dataArray,a=!0,o=!1,s=void 0;try{for(var u,l,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){if(!(l=u.value)||!(l.pathLength<5e-5||n+l.pathLength+5e-5<t)){var h=t-n,f=0;switch(l.command){case"L":r=this.getPointOnLine(h,l.start.x,l.start.y,l.points[0],l.points[1],l.start.x,l.start.y);break;case"A":var g=l.points[4],d=l.points[5],p=l.points[4]+d,f=g+h/l.pathLength*d;if(d<0&&f<p||0<=d&&p<f)break;r=this.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,l.points[6]);break;case"C":1<(f=h/l.pathLength)&&(f=1),r=this.getPointOnCubicBezier(f,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);break;case"Q":1<(f=h/l.pathLength)&&(f=1),r=this.getPointOnQuadraticBezier(f,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3])}if(r)return r;break}n+=l.pathLength}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return null}},{key:"getLineLength",value:function(t,e,n,r){return T((n-t)*(n-t)+(r-e)*(r-e))}},{key:"getPathLength",value:function(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(function(t,e){return 0<e.pathLength?t+e.pathLength:t},0)),this.pathLength}},{key:"getPointOnCubicBezier",value:function(t,e,n,r,i,a,o,s,u){return{x:s*d(t)+a*p(t)+r*y(t)+e*v(t),y:u*d(t)+o*p(t)+i*y(t)+n*v(t)}}},{key:"getPointOnQuadraticBezier",value:function(t,e,n,r,i,a,o){return{x:a*b(t)+r*w(t)+e*k(t),y:o*b(t)+i*w(t)+n*k(t)}}},{key:"getPointOnEllipticalArc",value:function(t,e,n,r,i,a){var o=C(a),s=E(a),u=n*C(i),l=r*E(i);return{x:t+(u*o-l*s),y:e+(u*s+l*o)}}},{key:"buildEquidistantCache",value:function(t,e){var n=this.getPathLength(),r=e||.25,i=t||n/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==r){this.equidistantCache={step:i,precision:r,points:[]};for(var a=0,o=0;o<=n;o+=r){var s=this.getPointOnPath(o),u=this.getPointOnPath(o+r);s&&u&&i<=(a+=this.getLineLength(s.x,s.y,u.x,u.y))&&(this.equidistantCache.points.push({x:s.x,y:s.y,distance:o}),a-=i)}}}},{key:"getEquidistantPointOnPath",value:function(t,e,n){if(this.buildEquidistantCache(e,n),t<0||5e-5<t-this.getPathLength())return null;var r=i(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[r]||null}}]),ah),Zc=(gs(ih,nl),hi(ih,[{key:"loadImage",value:(kc=di(gi.mark(function t(e){var n;return gi.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.createImage(e);case 3:n=t.sent,this.image=n,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error('ERROR: image "'.concat(e,'" not found'),t.t0);case 10:this.loaded=!0;case 11:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return kc.apply(this,arguments)})},{key:"loadSvg",value:(wc=di(gi.mark(function t(e){var n,r;return gi.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.fetch(e);case 3:return n=t.sent,t.next=6,n.text();case 6:r=t.sent,this.image=r,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error('ERROR: image "'.concat(e,'" not found'),t.t0);case 13:this.loaded=!0;case 14:case"end":return t.stop()}},t,this,[[0,10]])})),function(){return wc.apply(this,arguments)})},{key:"renderChildren",value:function(t){var e,n=this.document,r=this.image,i=this.loaded,a=this.getAttribute("x").getPixels("x"),o=this.getAttribute("y").getPixels("y"),s=this.getStyle("width").getPixels("x"),u=this.getStyle("height").getPixels("y");i&&r&&s&&u&&(t.save(),this.isSvg?n.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:a,offsetY:o,scaleWidth:s,scaleHeight:u}).render():(e=this.image,t.translate(a,o),n.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:s,desiredWidth:e.width,height:u,desiredHeight:e.height}),this.loaded&&(void 0===e.complete||e.complete)&&t.drawImage(e,0,0)),t.restore())}},{key:"getBoundingBox",value:function(){var t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),n=this.getStyle("width").getPixels("x"),r=this.getStyle("height").getPixels("y");return new Nu(t,e,t+n,e+r)}}]),ih),Kc=(gs(rh,nl),hi(rh,[{key:"render",value:function(){}}]),rh),Jc=(hi(nh,[{key:"load",value:(bc=di(gi.mark(function t(n,e){var r,i,a;return gi.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=this.document,t.next=4,r.canvg.parser.load(e);case 4:i=t.sent,a=i.getElementsByTagName("font"),Array.from(a).forEach(function(t){var e=r.createElement(t);r.definitions[n]=e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error('ERROR: font "'.concat(e,'" not found'),t.t0);case 12:this.loaded=!0;case 13:case"end":return t.stop()}},t,this,[[0,9]])})),function(){return bc.apply(this,arguments)})}]),nh),th=(gs(eh,au),eh);function eh(a,t,e){var n;return ci(this,eh),(n=fs(this,bs(eh).call(this,a,t,e))).type="style",F(Array.from(t.childNodes).map(function(t){return t.data}).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"")).split("}").forEach(function(t){var e,n,r,i=t.trim();i&&(n=(e=i.split("{"))[0].split(","),r=e[1].split(";"),n.forEach(function(t){var i,n,e=t.trim();e&&(i=a.styles[e]||{},r.forEach(function(t){var e=t.indexOf(":"),n=t.substr(0,e).trim(),r=t.substr(e+1,t.length-e).trim();n&&r&&(i[n]=new Jo(a,n,r))}),a.styles[e]=i,a.stylesSpecificity[e]=h(e),"@font-face"===e&&(n=i["font-family"].getString().replace(/"|'/g,""),i.src.getString().split(",").forEach(function(t){var e;0<t.indexOf('format("svg")')&&((e=c(t))&&new Jc(a).load(n,e))})))}))}),n}function nh(t){ci(this,nh),this.document=t,this.loaded=!1,t.fonts.push(this)}function rh(){var t;return ci(this,rh),(t=fs(this,bs(rh).apply(this,arguments))).type="symbol",t}function ih(t,e,n){var r;ci(this,ih),(r=fs(this,bs(ih).call(this,t,e,n))).type="image",r.loaded=!1;var i=r.getHrefAttribute().getString();if(!i)return fs(r);var a=/\.svg$/.test(i);return t.images.push(hs(r)),a?r.loadSvg(i):r.loadImage(i),r.isSvg=a,r}function ah(t,e,n){var r;ci(this,ah),(r=fs(this,bs(ah).call(this,t,e,n))).type="textPath",r.textWidth=0,r.textHeight=0,r.pathLength=-1,r.glyphInfo=null,r.letterSpacingCache=[],r.measuresCache=new Map([["",0]]);var i=r.getHrefAttribute().getDefinition();return r.text=r.getTextFromNode(),r.dataArray=r.parsePathData(i),r}function oh(t){var n=jc[t];ve(jc,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return(!Rc||ot(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return Rc&&!ot(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return(!Rc||ot(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}function sh(t,e,n){var r;ci(this,sh),(r=fs(this,bs(sh).call(this,t,e,n))).type="a";var i=e.childNodes,a=i[0],o=0<i.length&&Array.from(i).every(function(t){return 3===t.nodeType});return r.hasText=o,r.text=o?r.getTextFromNode(a):"",r}function uh(){var t;return ci(this,uh),(t=fs(this,bs(uh).apply(this,arguments))).type="tref",t}function lh(t,e,n){var r;return ci(this,lh),(r=fs(this,bs(lh).call(this,t,e,n))).type="glyph",r.horizAdvX=r.getAttribute("horiz-adv-x").getNumber(),r.unicode=r.getAttribute("unicode").getString(),r.arabicForm=r.getAttribute("arabic-form").getString(),r}function ch(){var t;return ci(this,ch),(t=fs(this,bs(ch).apply(this,arguments))).type="missing-glyph",t.horizAdvX=0,t}function hh(t,e,n){var r;return ci(this,hh),(r=fs(this,bs(hh).call(this,t,e,n))).type="font-face",r.ascent=r.getAttribute("ascent").getNumber(),r.descent=r.getAttribute("descent").getNumber(),r.unitsPerEm=r.getAttribute("units-per-em").getNumber(),r}function fh(t,e,n){var r;ci(this,fh),(r=fs(this,bs(fh).call(this,t,e,n))).type="font",r.glyphs={},r.horizAdvX=r.getAttribute("horiz-adv-x").getNumber();var i=t.definitions,a=hs(r).children,o=!0,s=!1,u=void 0;try{for(var l,c,h=a[Symbol.iterator]();!(o=(l=h.next()).done);o=!0)switch(c=l.value,c.type){case"font-face":var f=(r.fontFace=c).getStyle("font-family");f.hasValue()&&(i[f.getString()]=hs(r));break;case"missing-glyph":r.missingGlyph=c;break;case"glyph":var g=c;g.arabicForm?(r.isRTL=!0,r.isArabic=!0,void 0===r.glyphs[g.unicode]&&(r.glyphs[g.unicode]={}),r.glyphs[g.unicode][g.arabicForm]=g):r.glyphs[g.unicode]=g}}catch(t){s=!0,u=t}finally{try{o||null==h.return||h.return()}finally{if(s)throw u}}return r}th.parseExternalUrl=c;var gh=(gs(wh,nl),hi(wh,[{key:"setContext",value:function(t){yu(bs(wh.prototype),"setContext",this).call(this,t);var e=this.getAttribute("x"),n=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),n.hasValue()&&t.translate(0,n.getPixels("y"))}},{key:"path",value:function(t){var e=this.element;e&&e.path(t)}},{key:"renderChildren",value:function(t){var e,n,r,i,a=this.document,o=this.element;o&&("symbol"===(e=o).type&&((e=new fl(a,null)).attributes.viewBox=new Jo(a,"viewBox",o.getAttribute("viewBox").getString()),e.attributes.preserveAspectRatio=new Jo(a,"preserveAspectRatio",o.getAttribute("preserveAspectRatio").getString()),e.attributes.overflow=new Jo(a,"overflow",o.getAttribute("overflow").getString()),e.children=o.children),"svg"===e.type&&(n=this.getStyle("width",!1,!0),r=this.getStyle("height",!1,!0),n.hasValue()&&(e.attributes.width=new Jo(a,"width",n.getString())),r.hasValue()&&(e.attributes.height=new Jo(a,"height",r.getString()))),i=e.parent,e.parent=null,e.render(t),e.parent=i)}},{key:"getBoundingBox",value:function(t){var e=this.element;return e?e.getBoundingBox(t):null}},{key:"elementTransform",value:function(){var t=this.document,e=this.element;return Xu.fromElement(t,e)}},{key:"element",get:function(){return this._element||(this._element=this.getHrefAttribute().getDefinition()),this._element}}]),wh),dh=(gs(bh,au),hi(bh,[{key:"apply",value:function(t,e,n,r,i){for(var a=this.includeOpacity,o=this.matrix,s=t.getImageData(0,0,r,i),u=0;u<i;u++)for(var l=0;l<r;l++){var c=U(s.data,l,u,r,0,0),h=U(s.data,l,u,r,0,1),f=U(s.data,l,u,r,0,2),g=U(s.data,l,u,r,0,3),d=W(o,0,c)+W(o,1,h)+W(o,2,f)+W(o,3,g)+W(o,4,1),p=W(o,5,c)+W(o,6,h)+W(o,7,f)+W(o,8,g)+W(o,9,1),y=W(o,10,c)+W(o,11,h)+W(o,12,f)+W(o,13,g)+W(o,14,1),v=W(o,15,c)+W(o,16,h)+W(o,17,f)+W(o,18,g)+W(o,19,1);a&&(d=p=y=0,v*=g/255),q(s.data,l,u,r,0,0,d),q(s.data,l,u,r,0,1,p),q(s.data,l,u,r,0,2,y),q(s.data,l,u,r,0,3,v)}t.clearRect(0,0,r,i),t.putImageData(s,0,0)}}]),bh),ph=(gs(xh,au),hi(xh,[{key:"apply",value:function(e,t){var n,r=this.document,i=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),s=this.getStyle("height").getPixels("y");o||s||(n=new Nu,this.children.forEach(function(t){n.addBoundingBox(t.getBoundingBox(e))}),i=g(n.x1),a=g(n.y1),o=g(n.width),s=g(n.height));var u=t.getStyle("mask").getString();t.getStyle("mask").setValue("");var l=r.createCanvas(i+o,a+s),c=l.getContext("2d");r.screen.setDefaults(c),this.renderChildren(c),new dh(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(c,0,0,i+o,a+s);var h=r.createCanvas(i+o,a+s),f=h.getContext("2d");r.screen.setDefaults(f),t.render(f),f.globalCompositeOperation="destination-in",f.fillStyle=c.createPattern(l,"no-repeat"),f.fillRect(0,0,i+o,a+s),e.fillStyle=f.createPattern(h,"no-repeat"),e.fillRect(0,0,i+o,a+s),t.getStyle("mask").setValue(u)}},{key:"render",value:function(){}}]),xh),yh=Jt("Reflect","apply"),vh=Function.apply,mh=!et(function(){yh(function(){})});function xh(){var t;return ci(this,xh),(t=fs(this,bs(xh).apply(this,arguments))).type="mask",t}function bh(t,e,n){var r;ci(this,bh),(r=fs(this,bs(bh).call(this,t,e,n))).type="feColorMatrix";var i=L(r.getAttribute("values").getString());switch(r.getAttribute("type").getString("matrix")){case"saturate":var a=i[0],i=[.213+.787*a,.715-.715*a,.072-.072*a,0,0,.213-.213*a,.715+.285*a,.072-.072*a,0,0,.213-.213*a,.715-.715*a,.072+.928*a,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var o=i[0]*A/180;i=[X(o,.213,.787,-.213),X(o,.715,-.715,-.715),X(o,.072,-.072,.928),0,0,X(o,.213,-.213,.143),X(o,.715,.285,.14),X(o,.072,-.072,-.283),0,0,X(o,.213,-.213,-.787),X(o,.715,-.715,.715),X(o,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}return r.matrix=i,r.includeOpacity=r.getAttribute("includeOpacity").hasValue(),r}function wh(){var t;return ci(this,wh),(t=fs(this,bs(wh).apply(this,arguments))).type="use",t}se({target:"Reflect",stat:!0,forced:mh},{apply:function(t,e,n){return ue(t),ct(n),yh?yh(t,e,n):vh.call(t,e,n)}}),se({target:"Reflect",stat:!0,sham:!Ds},{getPrototypeOf:function(t){return Bs(ct(t))}});function kh(){}var Sh=(gs(Gh,au),hi(Gh,[{key:"apply",value:function(n){var r=this.document,i=Reflect.getPrototypeOf(n),t=n.beginPath,a=n.closePath;i&&(i.beginPath=kh,i.closePath=kh),Reflect.apply(t,n,[]),this.children.forEach(function(t){var e;void 0!==t.path&&((e=(e=void 0===t.elementTransform?null:t.elementTransform())||Xu.fromElement(r,t))&&e.apply(n),t.path(n),i&&(i.closePath=a),e&&e.unapply(n))}),Reflect.apply(a,n,[]),n.clip(),i&&(i.beginPath=t,i.closePath=a)}},{key:"render",value:function(){}}]),Gh),Ph=(gs($h,au),hi($h,[{key:"apply",value:function(t,e){var n,r,i,a,o,s,u,l,c,h=this.document,f=e.getBoundingBox(t);f&&(n=g(f.x1),r=g(f.y1),i=g(f.width),a=g(f.height),o=e.getStyle("filter").getString(),e.getStyle("filter").setValue(""),u=s=0,this.children.forEach(function(t){var e=t.extraFilterDistance||0;s=z(s,e),u=z(u,e)}),l=h.createCanvas(i+2*s,a+2*u),c=l.getContext("2d"),h.screen.setDefaults(c),c.translate(-n+s,-r+u),e.render(c),this.children.forEach(function(t){"function"==typeof t.apply&&t.apply(c,0,0,i+2*s,a+2*u)}),t.drawImage(l,0,0,i+2*s,a+2*u,n-s,r-u,i+2*s,a+2*u),e.getStyle("filter",!0).setValue(o))}},{key:"render",value:function(){}}]),$h),Ah=(gs(_h,au),hi(_h,[{key:"apply",value:function(){}}]),_h),Eh=(gs(Fh,au),hi(Fh,[{key:"apply",value:function(){}}]),Fh),Ch=(gs(Bh,au),hi(Bh,[{key:"apply",value:function(){}}]),Bh),Th=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Oh=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],Vh=function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},Lh=(gs(zh,au),hi(zh,[{key:"apply",value:function(t,e,n,r,i){var a=this.document,o=this.blurRadius,s=a.window?a.window.document.body:null,u=t.canvas;u.id=a.getUniqueId(),s&&(u.style.display="none",s.appendChild(u)),Y(u,e,n,r,i,o),s&&s.removeChild(u)}}]),zh),Rh=(gs(Mh,au),Mh),Nh=(gs(Dh,au),Dh),Ih=(hi(jh,[{key:"bindCreateImage",value:function(n,r){return"boolean"==typeof r?function(t,e){return n(t,"boolean"==typeof e?e:r)}:n}},{key:"popEmSize",value:function(){this.emSizeStack.pop()}},{key:"getUniqueId",value:function(){return"canvg".concat(++this.uniqueId)}},{key:"isImagesLoaded",value:function(){return this.images.every(function(t){return t.loaded})}},{key:"isFontsLoaded",value:function(){return this.fonts.every(function(t){return t.loaded})}},{key:"createDocumentElement",value:function(t){var e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e}},{key:"createElement",value:function(t){var e=t.nodeName.replace(/^[^:]+:/,""),n=jh.elementTypes[e];return new(void 0===n?su:n)(this,t)}},{key:"createTextNode",value:function(t){return new al(this,t)}},{key:"setViewBox",value:function(t){this.screen.setViewBox(function(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?Q(Object(n),!0).forEach(function(t){pi(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}({document:this},t))}},{key:"window",get:function(){return this.screen.window}},{key:"fetch",get:function(){return this.screen.fetch}},{key:"ctx",get:function(){return this.screen.ctx}},{key:"emSize",get:function(){var t=this.emSizeStack;return t[t.length-1]},set:function(t){this.emSizeStack.push(t)}}]),jh);function jh(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.rootEmSize,r=void 0===n?12:n,i=e.emSize,a=void 0===i?12:i,o=e.createCanvas,s=void 0===o?jh.createCanvas:o,u=e.createImage,l=void 0===u?jh.createImage:u,c=e.anonymousCrossOrigin;ci(this,jh),this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=r,this.emSize=a,this.createCanvas=s,this.createImage=this.bindCreateImage(l,c),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}function Dh(){var t;return ci(this,Dh),(t=fs(this,bs(Dh).apply(this,arguments))).type="desc",t}function Mh(){var t;return ci(this,Mh),(t=fs(this,bs(Mh).apply(this,arguments))).type="title",t}function zh(t,e,n){var r;return ci(this,zh),(r=fs(this,bs(zh).call(this,t,e,n))).type="feGaussianBlur",r.blurRadius=g(r.getAttribute("stdDeviation").getNumber()),r.extraFilterDistance=r.blurRadius,r}function Bh(){var t;return ci(this,Bh),(t=fs(this,bs(Bh).apply(this,arguments))).type="feComposite",t}function Fh(){var t;return ci(this,Fh),(t=fs(this,bs(Fh).apply(this,arguments))).type="feMorphology",t}function _h(t,e,n){var r;return ci(this,_h),(r=fs(this,bs(_h).call(this,t,e,n))).type="feDropShadow",r.addStylesFromStyleDefinition(),r}function $h(){var t;return ci(this,$h),(t=fs(this,bs($h).apply(this,arguments))).type="filter",t}function Gh(){var t;return ci(this,Gh),(t=fs(this,bs(Gh).apply(this,arguments))).type="clipPath",t}Ih.createCanvas=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},Ih.createImage=function(){return Z.apply(this,arguments)},Ih.elementTypes={svg:fl,rect:gl,circle:dl,ellipse:pl,line:yl,polyline:vl,polygon:ml,path:hl,pattern:Ol,marker:Vl,defs:Ll,linearGradient:Il,radialGradient:jl,stop:Dl,animate:nc,animateColor:dc,animateTransform:pc,font:zc,"font-face":Bc,"missing-glyph":Fc,glyph:_c,text:rl,tspan:il,tref:$c,a:Gc,textPath:Qc,image:Zc,g:Rl,symbol:Kc,style:th,use:gh,mask:ph,clipPath:Sh,filter:Ph,feDropShadow:Ah,feMorphology:Eh,feComposite:Ch,feColorMatrix:dh,feGaussianBlur:Lh,title:Rh,desc:Nh};var Uh,qh,Wh=(hi(Hh,[{key:"fork",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Hh.from(t,e,J({},this.options,{},n))}},{key:"forkString",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Hh.fromString(t,e,J({},this.options,{},n))}},{key:"ready",value:function(){return this.screen.ready()}},{key:"isReady",value:function(){return this.screen.isReady()}},{key:"render",value:(qh=di(gi.mark(function t(){var e,n=arguments;return gi.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]?n[0]:{},this.start(J({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},e)),t.next=4,this.ready();case 4:this.stop();case 5:case"end":return t.stop()}},t,this)})),function(){return qh.apply(this,arguments)})},{key:"start",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this.documentElement,n=this.screen,r=this.options;n.start(e,J({enableRedraw:!0},r,{},t))}},{key:"stop",value:function(){this.screen.stop()}},{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];this.documentElement.resize(t,e,n)}}],[{key:"from",value:(Uh=di(gi.mark(function t(e,n){var r,i,a,o=arguments;return gi.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=new ms(r=2<o.length&&void 0!==o[2]?o[2]:{}),t.next=4,i.parse(n);case 4:return a=t.sent,t.abrupt("return",new Hh(e,a,r));case 6:case"end":return t.stop()}},t)})),function(){return Uh.apply(this,arguments)})},{key:"fromString",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new Hh(t,new ms(n).parseFromString(e),n)}}]),Hh),Xh=Object.freeze({__proto__:null,offscreen:function(){var t,e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).DOMParser,n={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,createCanvas:function(t,e){return new OffscreenCanvas(t,e)},createImage:(t=di(gi.mark(function t(e){var n,r,i;return gi.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.blob();case 5:return r=t.sent,t.next=8,createImageBitmap(r);case 8:return i=t.sent,t.abrupt("return",i);case 10:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})};return"undefined"==typeof DOMParser&&void 0!==e||Reflect.deleteProperty(n,"DOMParser"),n},node:function(t){var e=t.DOMParser,n=t.canvas;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:t.fetch,createCanvas:n.createCanvas,createImage:n.loadImage}}});function Hh(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};ci(this,Hh),this.parser=new ms(n),this.screen=new os(t,n),this.options=n;var r=new Ih(this,n),i=r.createDocumentElement(e);this.document=r,this.documentElement=i}t.AElement=Gc,t.AnimateColorElement=dc,t.AnimateElement=nc,t.AnimateTransformElement=pc,t.BoundingBox=Nu,t.CB1=d,t.CB2=p,t.CB3=y,t.CB4=v,t.Canvg=Wh,t.CircleElement=dl,t.ClipPathElement=Sh,t.DefsElement=Ll,t.DescElement=Nh,t.Document=Ih,t.Element=au,t.EllipseElement=pl,t.FeColorMatrixElement=dh,t.FeCompositeElement=Ch,t.FeDropShadowElement=Ah,t.FeGaussianBlurElement=Lh,t.FeMorphologyElement=Eh,t.FilterElement=Ph,t.Font=vu,t.FontElement=zc,t.FontFaceElement=Bc,t.GElement=Rl,t.GlyphElement=_c,t.GradientElement=Nl,t.ImageElement=Zc,t.LineElement=yl,t.LinearGradientElement=Il,t.MarkerElement=Vl,t.MaskElement=ph,t.Matrix=Gu,t.MissingGlyphElement=Fc,t.Mouse=rs,t.PSEUDO_ZERO=Jn,t.Parser=ms,t.PathElement=hl,t.PathParser=cl,t.PatternElement=Ol,t.Point=ns,t.PolygonElement=ml,t.PolylineElement=vl,t.Property=Jo,t.QB1=b,t.QB2=w,t.QB3=k,t.RadialGradientElement=jl,t.RectElement=gl,t.RenderedElement=nl,t.Rotate=_u,t.SVGElement=fl,t.SVGFontLoader=Jc,t.Scale=$u,t.Screen=os,t.Skew=Uu,t.SkewX=qu,t.SkewY=Wu,t.StopElement=Dl,t.StyleElement=th,t.SymbolElement=Kc,t.TRefElement=$c,t.TSpanElement=il,t.TextElement=rl,t.TextPathElement=Qc,t.TitleElement=Rh,t.Transform=Xu,t.Translate=Fu,t.UnknownElement=su,t.UseElement=gh,t.ViewPort=es,t.compressSpaces=F,t.default=Wh,t.getSelectorSpecificity=h,t.normalizeAttributeName=l,t.parseExternalUrl=c,t.presets=Xh,t.toNumbers=L,t.trimLeft=s,t.trimRight=u,t.vectorMagnitude=f,t.vectorsAngle=R,t.vectorsRatio=V,Object.defineProperty(t,"__esModule",{value:!0})});