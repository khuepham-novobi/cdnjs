!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).canvg={})}(this,function(t){"use strict";var r=Math.tan,m=Math.atan2,A=Math.PI,i=Math.round,e=String.prototype,M=Math.max,B=Math.min,o=Math.ceil,E=Math.sin,C=Math.cos,g=Math.floor,T=Math.sqrt,O=Math.pow;function n(t,e){return t(e={exports:{}},e.exports),e.exports}function F(t){return t.replace(/(?!\u3000)\s+/gm," ")}function s(t){return t.replace(/^[\n \t]+/,"")}function u(t){return t.replace(/[\n \t]+$/,"")}function L(t){return((t||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[]).map(parseFloat)}function l(t){return Cn.test(t)?t.toLowerCase():t}function c(t){var e=t.match(/url\(('([^']+)'|"([^"]+)"|([^'"\)]+))\)/)||[];return e[2]||e[3]||e[4]}function b(t,e){var n=t.match(e);return n?[t.replace(e," "),n.length]:[t,0]}function h(t){var e=[0,0,0],n=0,r=b(a=t.replace(/:not\(([^\)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),jn),i=Rn(r,2),a=i[0],n=i[1];e[1]+=n;var o=b(a,In),s=Rn(o,2);a=s[0],n=s[1],e[0]+=n;var u=b(a,zn),l=Rn(u,2);a=l[0],n=l[1],e[1]+=n;var c=b(a,Dn),h=Rn(c,2);a=h[0],n=h[1],e[2]+=n;var f=b(a,Mn),g=Rn(f,2);a=g[0],n=g[1],e[1]+=n;var d=b(a,Bn),p=Rn(d,2);a=p[0],n=p[1],e[1]+=n;var y=b(a=a.replace(/[\*\s\+>~]/g," ").replace(/[#\.]/g," "),Fn),v=Rn(y,2);return a=v[0],n=v[1],e[2]+=n,e.join("")}function a(t){return T(O(t[0],2)+O(t[1],2))}function V(t,e){return(t[0]*e[0]+t[1]*e[1])/(a(t)*a(e))}function N(t,e){var n=Math.acos;return(t[0]*e[1]<t[1]*e[0]?-1:1)*n(V(t,e))}function f(t){return t*t*t}function d(t){return 3*t*t*(1-t)}function p(t){return 3*t*(1-t)*(1-t)}function y(t){return(1-t)*(1-t)*(1-t)}function v(t){return t*t}function x(t){return 2*t*(1-t)}function w(t){return(1-t)*(1-t)}function k(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function S(t,e){for(var n,r=0;r<e.length;r++)(n=e[r]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function P(){throw new Error("setTimeout has not been defined")}function R(){throw new Error("clearTimeout has not been defined")}function j(e){if(so===setTimeout)return setTimeout(e,0);if((so===P||!so)&&setTimeout)return so=setTimeout,setTimeout(e,0);try{return so(e,0)}catch(t){try{return so.call(null,e,0)}catch(t){return so.call(this,e,0)}}}function I(){ho&&lo&&(ho=!1,lo.length?co=lo.concat(co):fo=-1,co.length&&z())}function z(){if(!ho){var t=j(I);ho=!0;for(var e=co.length;e;){for(lo=co,co=[];++fo<e;)lo&&lo[fo].run();fo=-1,e=co.length}lo=null,ho=!1,function(e){if(uo===clearTimeout)return clearTimeout(e);if((uo===R||!uo)&&clearTimeout)return uo=clearTimeout,clearTimeout(e);try{uo(e)}catch(t){try{return uo.call(null,e)}catch(t){return uo.call(this,e)}}}(t)}}function D(t,e){this.fun=t,this.array=e}function _(){}function $(t){var e=t.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function G(t,e,n,r,i,a){return t[n*r*4+4*e+a]}function q(t,e,n,r,i,a,o){t[n*r*4+4*e+a]=o}function H(t,e,n){var r=t[e];return r*(r<0?n-255:n)}function W(t,e,n,r){return e+C(t)*n+E(t)*r}function X(t){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U(t,e,n,r,i,a){var o;isNaN(a)||a<1||(a|=0,o=function(t,e,n,r){var i,a,o,s,u,l,c,h,f,g,d,p,y,v,m,b,x,w,k,S,P,A,E,C,T,O=t.data,V=e-1,L=n-1,N=r+1,R=N*(N+1)/2,j=new sh,I=j;for(o=1;o<2*r+1;o++)I=I.next=new sh,o===N&&(T=I);I.next=j;var z=null,D=null;c=l=0;var M=ah[r],B=oh[r];for(a=0;a<n;a++){for(b=x=w=k=h=f=g=d=0,p=N*(S=O[l]),y=N*(P=O[l+1]),v=N*(A=O[l+2]),m=N*(E=O[l+3]),h+=R*S,f+=R*P,g+=R*A,d+=R*E,I=j,o=0;o<N;o++)I.r=S,I.g=P,I.b=A,I.a=E,I=I.next;for(o=1;o<N;o++)s=l+((V<o?V:o)<<2),h+=(I.r=S=O[s])*(C=N-o),f+=(I.g=P=O[s+1])*C,g+=(I.b=A=O[s+2])*C,d+=(I.a=E=O[s+3])*C,b+=S,x+=P,w+=A,k+=E,I=I.next;for(z=j,D=T,i=0;i<e;i++)O[l+3]=E=d*M>>B,0===E?O[l]=O[l+1]=O[l+2]=0:(E=255/E,O[l]=(h*M>>B)*E,O[l+1]=(f*M>>B)*E,O[l+2]=(g*M>>B)*E),h-=p,f-=y,g-=v,d-=m,p-=z.r,y-=z.g,v-=z.b,m-=z.a,s=c+((s=i+r+1)<V?s:V)<<2,b+=z.r=O[s],x+=z.g=O[s+1],w+=z.b=O[s+2],k+=z.a=O[s+3],h+=b,f+=x,g+=w,d+=k,z=z.next,p+=S=D.r,y+=P=D.g,v+=A=D.b,m+=E=D.a,b-=S,x-=P,w-=A,k-=E,D=D.next,l+=4;c+=e}for(i=0;i<e;i++){for(x=w=k=b=f=g=d=h=0,p=N*(S=O[l=i<<2]),y=N*(P=O[l+1]),v=N*(A=O[l+2]),m=N*(E=O[l+3]),h+=R*S,f+=R*P,g+=R*A,d+=R*E,I=j,o=0;o<N;o++)I.r=S,I.g=P,I.b=A,I.a=E,I=I.next;for(u=e,o=1;o<=r;o++)l=u+i<<2,h+=(I.r=S=O[l])*(C=N-o),f+=(I.g=P=O[l+1])*C,g+=(I.b=A=O[l+2])*C,d+=(I.a=E=O[l+3])*C,b+=S,x+=P,w+=A,k+=E,I=I.next,o<L&&(u+=e);for(l=i,z=j,D=T,a=0;a<n;a++)O[(s=l<<2)+3]=E=d*M>>B,0<E?(E=255/E,O[s]=(h*M>>B)*E,O[s+1]=(f*M>>B)*E,O[s+2]=(g*M>>B)*E):O[s]=O[s+1]=O[s+2]=0,h-=p,f-=y,g-=v,d-=m,p-=z.r,y-=z.g,v-=z.b,m-=z.a,s=i+((s=a+N)<L?s:L)*e<<2,h+=b+=z.r=O[s],f+=x+=z.g=O[s+1],g+=w+=z.b=O[s+2],d+=k+=z.a=O[s+3],z=z.next,p+=S=D.r,y+=P=D.g,v+=A=D.b,m+=E=D.a,b-=S,x-=P,w-=A,k-=E,D=D.next,l+=e}return t}(o=function(t,e,n,r,i){if("string"==typeof t&&(t=document.getElementById(t)),!(t&&"object"===X(t)&&"getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var a=t.getContext("2d");try{return a.getImageData(e,n,r,i)}catch(e){throw new Error("unable to access image data: "+e)}}(t,e,n,r,i),r,i,a),t.getContext("2d").putImageData(o,e,n))}function Y(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function Q(){return(Q=Jr(Kr.mark(function t(n){var r;return Kr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.createElement("img"),t.abrupt("return",new Promise(function(t,e){r.onload=function(){t(r)},r.onerror=function(){e()},r.src=n}));case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Z(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)),r}function K(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?Z(Object(n),!0).forEach(function(t){ti(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}function J(t){return t&&t.Math==Math&&t}function tt(t){try{return!!t()}catch(t){return!0}}function et(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function nt(t){return Ct.call(t).slice(8,-1)}function rt(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function it(t){return Ot(rt(t))}function at(t){return"object"==typeof t?null!==t:"function"==typeof t}function ot(t,e){if(!at(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!at(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!at(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!at(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function st(t,e){return Vt.call(t,e)}function ut(t){return Nt?Lt.createElement(t):{}}function lt(t){if(!at(t))throw TypeError(t+" is not an object");return t}function ct(e,n){try{Mt(kt,e,n)}catch(t){kt[e]=n}return n}function ht(t){return"Symbol("+(void 0===t?"":t)+")_"+(++Wt+Xt).toString(36)}function ft(t){return Ut[t]||(Ut[t]=ht(t))}var gt,dt,pt,yt,vt,mt,bt,xt,wt="undefined"==typeof globalThis?"undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window:globalThis,kt=J("object"==typeof globalThis&&globalThis)||J("object"==typeof window&&window)||J("object"==typeof self&&self)||J("object"==typeof wt&&wt)||Function("return this")(),St=!tt(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),Pt={}.propertyIsEnumerable,At=Object.getOwnPropertyDescriptor,Et={f:At&&!Pt.call({1:2},1)?function(t){var e=At(this,t);return!!e&&e.enumerable}:Pt},Ct={}.toString,Tt="".split,Ot=tt(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==nt(t)?Tt.call(t,""):Object(t)}:Object,Vt={}.hasOwnProperty,Lt=kt.document,Nt=at(Lt)&&at(Lt.createElement),Rt=!St&&!tt(function(){return 7!=Object.defineProperty(ut("div"),"a",{get:function(){return 7}}).a}),jt=Object.getOwnPropertyDescriptor,It={f:St?jt:function(t,e){if(t=it(t),e=ot(e,!0),Rt)try{return jt(t,e)}catch(t){}return st(t,e)?et(!Et.f.call(t,e),t[e]):void 0}},zt=Object.defineProperty,Dt={f:St?zt:function(t,e,n){if(lt(t),e=ot(e,!0),lt(n),Rt)try{return zt(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},Mt=St?function(t,e,n){return Dt.f(t,e,et(1,n))}:function(t,e,n){return t[e]=n,t},Bt="__core-js_shared__",Ft=kt[Bt]||ct(Bt,{}),_t=n(function(t){(t.exports=function(t,e){return Ft[t]||(Ft[t]=void 0===e?{}:e)})("versions",[]).push({version:"3.4.7",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})}),$t=Function.toString,Gt=_t("inspectSource",function(t){return $t.call(t)}),qt=kt.WeakMap,Ht="function"==typeof qt&&/native code/.test(Gt(qt)),Wt=0,Xt=Math.random(),Ut=_t("keys"),Yt={},Qt=kt.WeakMap;bt=Ht?(gt=new Qt,dt=gt.get,pt=gt.has,yt=gt.set,vt=function(t,e){return yt.call(gt,t,e),e},mt=function(t){return dt.call(gt,t)||{}},function(t){return pt.call(gt,t)}):(xt=ft("state"),Yt[xt]=!0,vt=function(t,e){return Mt(t,xt,e),e},mt=function(t){return st(t,xt)?t[xt]:{}},function(t){return st(t,xt)});function Zt(t){return"function"==typeof t?t:void 0}function Kt(t,e){return arguments.length<2?Zt(ve[t])||Zt(kt[t]):ve[t]&&ve[t][e]||kt[t]&&kt[t][e]}function Jt(t){return isNaN(t=+t)?0:(0<t?g:o)(t)}function te(t){return 0<t?B(Jt(t),9007199254740991):0}function ee(t,e){var n=Jt(t);return n<0?M(n+e,0):B(n,e)}function ne(s){return function(t,e,n){var r,i=it(t),a=te(i.length),o=ee(n,a);if(s&&e!=e){for(;o<a;)if((r=i[o++])!=r)return!0}else for(;o<a;o++)if((s||o in i)&&i[o]===e)return s||o||0;return!s&&-1}}function re(t,e){var n,r=it(t),i=0,a=[];for(n in r)!st(Yt,n)&&st(r,n)&&a.push(n);for(;e.length>i;)st(r,n=e[i++])&&(~be(a,n)||a.push(n));return a}function ie(t,e){for(var n,r=Pe(e),i=Dt.f,a=It.f,o=0;o<r.length;o++)n=r[o],st(t,n)||i(t,n,a(e,n))}function ae(t,e){var n=Ce[Ee(t)];return n==Oe||n!=Te&&("function"==typeof e?tt(e):!!e)}function oe(t,e){var n,r,i,a,o=t.target,s=t.global,u=t.stat,l=s?kt:u?kt[o]||ct(o,{}):(kt[o]||{}).prototype;if(l)for(n in e){if(i=e[n],r=t.noTargetGet?(a=Le(l,n))&&a.value:l[n],!Ve(s?n:o+(u?".":"#")+n,t.forced)&&void 0!==r){if(typeof i==typeof r)continue;ie(i,r)}(t.sham||r&&r.sham)&&Mt(i,"sham",!0),ye(l,n,i,t)}}function se(t){if("function"!=typeof t)throw TypeError(t+" is not a function");return t}function ue(r,i,t){return se(r),void 0===i?r:0===t?function(){return r.call(i)}:1===t?function(t){return r.call(i,t)}:2===t?function(t,e){return r.call(i,t,e)}:3===t?function(t,e,n){return r.call(i,t,e,n)}:function(){return r.apply(i,arguments)}}function le(t){return Object(rt(t))}function ce(t){return st(Ie,t)||(Re&&st(ze,t)?Ie[t]=ze[t]:Ie[t]=De("Symbol."+t)),Ie[t]}function he(t,e){var n;return Ne(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Ne(n.prototype)?at(n)&&(null===(n=n[Me])&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function fe(g){var d=1==g,p=4==g,y=6==g;return function(t,e,n,r){for(var i,a,o=le(t),s=Ot(o),u=ue(e,n,3),l=te(s.length),c=0,h=r||he,f=d?h(t,l):2==g?h(t,0):void 0;c<l;c++)if((5==g||y||c in s)&&(a=u(i=s[c],c,o),g))if(d)f[c]=a;else if(a)switch(g){case 3:return!0;case 5:return i;case 6:return c;case 2:Be.call(f,i)}else if(p)return!1;return y?-1:3==g||p?p:f}}var ge,de,pe={set:vt,get:mt,has:bt,enforce:function(t){return bt(t)?mt(t):vt(t,{})},getterFor:function(n){return function(t){var e;if(!at(t)||(e=mt(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},ye=n(function(t){var e=pe.get,s=pe.enforce,u=(String+"").split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,a=!!r&&!!r.enumerable,o=!!r&&!!r.noTargetGet;return"function"==typeof n&&("string"!=typeof e||st(n,"name")||Mt(n,"name",e),s(n).source=u.join("string"==typeof e?e:"")),t===kt?void(a?t[e]=n:ct(e,n)):(i?!o&&t[e]&&(a=!0):delete t[e],void(a?t[e]=n:Mt(t,e,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||Gt(this)})}),ve=kt,me={includes:ne(!0),indexOf:ne(!1)},be=me.indexOf,xe=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],we=xe.concat("length","prototype"),ke={f:Object.getOwnPropertyNames||function(t){return re(t,we)}},Se={f:Object.getOwnPropertySymbols},Pe=Kt("Reflect","ownKeys")||function(t){var e=ke.f(lt(t)),n=Se.f;return n?e.concat(n(t)):e},Ae=/#|\.prototype\./,Ee=ae.normalize=function(t){return(t+"").replace(Ae,".").toLowerCase()},Ce=ae.data={},Te=ae.NATIVE="N",Oe=ae.POLYFILL="P",Ve=ae,Le=It.f,Ne=Array.isArray||function(t){return"Array"==nt(t)},Re=!!Object.getOwnPropertySymbols&&!tt(function(){return!(Symbol()+"")}),je=Re&&!Symbol.sham&&"symbol"==typeof Symbol(),Ie=_t("wks"),ze=kt.Symbol,De=je?ze:ht,Me=ce("species"),Be=[].push,Fe={forEach:fe(0),map:fe(1),filter:fe(2),some:fe(3),every:fe(4),find:fe(5),findIndex:fe(6)},_e=Kt("navigator","userAgent")||"",$e=kt.process,Ge=$e&&$e.versions,qe=Ge&&Ge.v8;qe?de=(ge=qe.split("."))[0]+ge[1]:_e&&((ge=_e.match(/Edge\/(\d+)/))&&!(74<=ge[1])||(ge=_e.match(/Chrome\/(\d+)/))&&(de=ge[1]));function He(e){return 51<=We||!tt(function(){var t=[];return(t.constructor={})[Xe]=function(){return{foo:1}},1!==t[e](Boolean).foo})}var We=de&&+de,Xe=ce("species"),Ue=Fe.map,Ye=He("map"),Qe=Ye&&!tt(function(){[].map.call({length:-1,0:1},function(t){throw t})});oe({target:"Array",proto:!0,forced:!Ye||!Qe},{map:function(t){return Ue(this,t,1<arguments.length?arguments[1]:void 0)}});function Ze(n){return function(t){var e=rt(t)+"";return 1&n&&(e=e.replace(Je,"")),2&n&&(e=e.replace(tn,"")),e}}var Ke="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Je=RegExp("^"+Ke+Ke+"*"),tn=RegExp(Ke+Ke+"*$"),en={start:Ze(1),end:Ze(2),trim:Ze(3)},nn=en.trim,rn=kt.parseFloat,an=1/rn("\t\n\v\f\r                　\u2028\u2029\ufeff-0")!=-1/0?function(t){var e=nn(t+""),n=rn(e);return 0===n&&"-"==e.charAt(0)?-0:n}:rn;oe({global:!0,forced:parseFloat!=an},{parseFloat:an});function on(){var t=lt(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}var sn,un,ln=RegExp.prototype.exec,cn=e.replace,hn=ln,fn=(sn=/a/,un=/b*/g,ln.call(sn,"a"),ln.call(un,"a"),0!==sn.lastIndex||0!==un.lastIndex),gn=void 0!==/()??/.exec("")[1];(fn||gn)&&(hn=function(t){var e,n,r,i,a=this;return gn&&(n=new RegExp("^"+a.source+"$(?!\\s)",on.call(a))),fn&&(e=a.lastIndex),r=ln.call(a,t),fn&&r&&(a.lastIndex=a.global?r.index+r[0].length:e),gn&&r&&1<r.length&&cn.call(r[0],n,function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)}),r});var dn=hn;oe({target:"RegExp",proto:!0,forced:/./.exec!==dn},{exec:dn});function pn(n,t,e,r){var a,i,o,s,u=ce(n),l=!tt(function(){var t={};return t[u]=function(){return 7},7!=""[n](t)}),c=l&&!tt(function(){var t=!1,e=/a/;return"split"===n&&((e={}).constructor={},e.constructor[bn]=function(){return e},e.flags="",e[u]=/./[u]),e.exec=function(){return t=!0,null},e[u](""),!t});l&&c&&("replace"!==n||xn)&&("split"!==n||wn)||(a=/./[u],o=(i=e(u,""[n],function(t,e,n,r,i){return e.exec===dn?l&&!i?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}))[0],s=i[1],ye(String.prototype,n,o),ye(RegExp.prototype,u,2==t?function(t,e){return s.call(t,this,e)}:function(t){return s.call(t,this)}),r&&Mt(RegExp.prototype[u],"sham",!0))}function yn(s){return function(t,e){var n,r,i=rt(t)+"",a=Jt(e),o=i.length;return a<0||o<=a?s?"":void 0:(n=i.charCodeAt(a))<55296||56319<n||a+1===o||(r=i.charCodeAt(a+1))<56320||57343<r?s?i.charAt(a):n:s?i.slice(a,a+2):r-56320+(n-55296<<10)+65536}}function vn(t,e,n){return e+(n?Sn(t,e).length:1)}function mn(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==nt(t))throw TypeError("RegExp#exec called on incompatible receiver");return dn.call(t,e)}var bn=ce("species"),xn=!tt(function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}),wn=!tt(function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}),kn={codeAt:yn(!1),charAt:yn(!0)},Sn=kn.charAt;pn("match",1,function(r,l,c){return[function(t){var e=rt(this),n=null==t?void 0:t[r];return void 0===n?new RegExp(t)[r](e+""):n.call(t,e)},function(t){var e=c(l,t,this);if(e.done)return e.value;var n=lt(t),r=this+"";if(!n.global)return mn(n,r);for(var i,a,o=n.unicode,s=[],u=n.lastIndex=0;null!==(i=mn(n,r));)a=i[0]+"",(s[u]=a)||(n.lastIndex=vn(r,te(n.lastIndex),o)),u++;return 0===u?null:s}]});var Pn=/\$([$&'`]|\d\d?|<[^>]*>)/g,An=/\$([$&'`]|\d\d?)/g;pn("replace",2,function(i,w,k){function S(a,o,s,u,l,t){var c=s+a.length,h=u.length,e=An;return void 0!==l&&(l=le(l),e=Pn),w.call(t,e,function(t,e){var n;switch(e.charAt(0)){case"$":return"$";case"&":return a;case"`":return o.slice(0,s);case"'":return o.slice(c);case"<":n=l[e.slice(1,-1)];break;default:var r=+e;if(0==r)return t;if(h<r){var i=g(r/10);return 0!==i&&i<=h?void 0===u[i-1]?e.charAt(1):u[i-1]+e.charAt(1):t}n=u[r-1]}return void 0===n?"":n})}return[function(t,e){var n=rt(this),r=null==t?void 0:t[i];return void 0===r?w.call(n+"",t,e):r.call(t,n,e)},function(t,e){var n=k(w,t,this,e);if(n.done)return n.value;var r=lt(t),i=this+"",a="function"==typeof e;a||(e+="");var o,s=r.global;s&&(o=r.unicode,r.lastIndex=0);for(var u,l=[];null!==(u=mn(r,i))&&(l.push(u),s);)u[0]+""||(r.lastIndex=vn(i,te(r.lastIndex),o));for(var c,h="",f=0,g=0;g<l.length;g++){for(var d=(u=l[g])[0]+"",p=M(B(Jt(u.index),i.length),0),y=[],v=1;v<u.length;v++)y.push(void 0===(c=u[v])?c:c+"");var m,b=u.groups,x=a?(m=[d].concat(y,p,i),void 0!==b&&m.push(b),e.apply(void 0,m)+""):S(d,i,p,y,b,e);f<=p&&(h+=i.slice(f,p)+x,f=p+d.length)}return h+i.slice(f)}]});function En(t,e){var n=[][t];return!n||!tt(function(){n.call(null,e||function(){throw 1},1)})}var Cn=/^[A-Z-]+$/,Tn=[].join,On=Ot!=Object,Vn=En("join",",");oe({target:"Array",proto:!0,forced:On||Vn},{join:function(t){return Tn.call(it(this),void 0===t?",":t)}});function Ln(){}var Nn=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return n}},Rn=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||Nn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()},jn=/(\[[^\]]+\])/g,In=/(#[^\s\+>~\.\[:]+)/g,zn=/(\.[^\s\+>~\.\[:]+)/g,Dn=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,Mn=/(:[\w-]+\([^\)]*\))/gi,Bn=/(:[^\s\+>~\.\[:]+)/g,Fn=/([^\s\+>~\.\[:]+)/g,_n=1e-8,$n=Object.keys||function(t){return re(t,xe)},Gn=St?Object.defineProperties:function(t,e){lt(t);for(var n,r=$n(e),i=r.length,a=0;a<i;)Dt.f(t,n=r[a++],e[n]);return t},qn=Kt("document","documentElement"),Hn=ft("IE_PROTO"),Wn="prototype",Xn=function(){var t,e=ut("iframe"),n=xe.length,r="script";for(e.style.display="none",qn.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object</"+r+">"),t.close(),Xn=t.F;n--;)delete Xn[Wn][xe[n]];return Xn()},Un=Object.create||function(t,e){var n;return null===t?n=Xn():(Ln[Wn]=lt(t),n=new Ln,Ln[Wn]=null,n[Hn]=t),void 0===e?n:Gn(n,e)};Yt[Hn]=!0;function Yn(t){var e=ve.Symbol||(ve.Symbol={});st(e,t)||sr(e,t,{value:or.f(t)})}function Qn(t,e,n){t&&!st(t=n?t:t.prototype,lr)&&ur(t,lr,{configurable:!0,value:e})}function Zn(t,e){var n=Pr[t]=Un(mr[gr]);return pr(n,{type:fr,tag:t,description:e}),St||(n.description=e),n}function Kn(e,t){lt(e);var n=it(t),r=$n(n).concat(Ir(n));return cr(r,function(t){St&&!jr.call(n,t)||Rr(e,t,n[t])}),e}function Jn(t,e){var n=it(t),r=ot(e,!0);if(n!==vr||!st(Pr,r)||st(Ar,r)){var i=xr(n,r);return!i||!st(Pr,r)||st(n,hr)&&n[hr][r]||(i.enumerable=!0),i}}function tr(t){var e=kr(it(t)),n=[];return cr(e,function(t){st(Pr,t)||st(Yt,t)||n.push(t)}),n}var er,nr=ke.f,rr={}.toString,ir="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ar={f:function(t){return ir&&"[object Window]"==rr.call(t)?function(t){try{return nr(t)}catch(t){return ir.slice()}}(t):nr(it(t))}},or={f:ce},sr=Dt.f,ur=Dt.f,lr=ce("toStringTag"),cr=Fe.forEach,hr=ft("hidden"),fr="Symbol",gr="prototype",dr=ce("toPrimitive"),pr=pe.set,yr=pe.getterFor(fr),vr=Object[gr],mr=kt.Symbol,br=Kt("JSON","stringify"),xr=It.f,wr=Dt.f,kr=ar.f,Sr=Et.f,Pr=_t("symbols"),Ar=_t("op-symbols"),Er=_t("string-to-symbol-registry"),Cr=_t("symbol-to-string-registry"),Tr=_t("wks"),Or=kt.QObject,Vr=!Or||!Or[gr]||!Or[gr].findChild,Lr=St&&tt(function(){return 7!=Un(wr({},"a",{get:function(){return wr(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=xr(vr,e);r&&delete vr[e],wr(t,e,n),r&&t!==vr&&wr(vr,e,r)}:wr,Nr=Re&&"symbol"==typeof mr.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof mr},Rr=function(t,e,n){t===vr&&Rr(Ar,e,n),lt(t);var r=ot(e,!0);return lt(n),st(Pr,r)?(n.enumerable?(st(t,hr)&&t[hr][r]&&(t[hr][r]=!1),n=Un(n,{enumerable:et(0,!1)})):(st(t,hr)||wr(t,hr,et(1,{})),t[hr][r]=!0),Lr(t,r,n)):wr(t,r,n)},jr=function(t){var e=ot(t,!0),n=Sr.call(this,e);return(this!==vr||!st(Pr,e)||st(Ar,e))&&(!(n||!st(this,e)||!st(Pr,e)||st(this,hr)&&this[hr][e])||n)},Ir=function(t){var e=t===vr,n=kr(e?Ar:it(t)),r=[];return cr(n,function(t){!st(Pr,t)||e&&!st(vr,t)||r.push(Pr[t])}),r};Re||(ye((mr=function(){if(this instanceof mr)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?arguments[0]+"":void 0,e=ht(t),n=function(t){this===vr&&n.call(Ar,t),st(this,hr)&&st(this[hr],e)&&(this[hr][e]=!1),Lr(this,e,et(1,t))};return St&&Vr&&Lr(vr,e,{configurable:!0,set:n}),Zn(e,t)})[gr],"toString",function(){return yr(this).tag}),Et.f=jr,Dt.f=Rr,It.f=Jn,ke.f=ar.f=tr,Se.f=Ir,St&&(wr(mr[gr],"description",{configurable:!0,get:function(){return yr(this).description}}),ye(vr,"propertyIsEnumerable",jr,{unsafe:!0}))),je||(or.f=function(t){return Zn(ce(t),t)}),oe({global:!0,wrap:!0,forced:!Re,sham:!Re},{Symbol:mr}),cr($n(Tr),function(t){Yn(t)}),oe({target:fr,stat:!0,forced:!Re},{for:function(t){var e=t+"";if(st(Er,e))return Er[e];var n=mr(e);return Er[e]=n,Cr[n]=e,n},keyFor:function(t){if(!Nr(t))throw TypeError(t+" is not a symbol");return st(Cr,t)?Cr[t]:void 0},useSetter:function(){Vr=!0},useSimple:function(){Vr=!1}}),oe({target:"Object",stat:!0,forced:!Re,sham:!St},{create:function(t,e){return void 0===e?Un(t):Kn(Un(t),e)},defineProperty:Rr,defineProperties:Kn,getOwnPropertyDescriptor:Jn}),oe({target:"Object",stat:!0,forced:!Re},{getOwnPropertyNames:tr,getOwnPropertySymbols:Ir}),oe({target:"Object",stat:!0,forced:tt(function(){Se.f(1)})},{getOwnPropertySymbols:function(t){return Se.f(le(t))}}),br&&(er=!Re||tt(function(){var t=mr();return"[null]"!=br([t])||"{}"!=br({a:t})||"{}"!=br(Object(t))}),oe({target:"JSON",stat:!0,forced:er},{stringify:function(t,e){for(var n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if((at(n=e)||void 0!==t)&&!Nr(t))return Ne(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Nr(e))return e}),r[1]=e,br.apply(null,r)}})),mr[gr][dr]||Mt(mr[gr],dr,mr[gr].valueOf),Qn(mr,fr),Yt[hr]=!0;var zr=Fe.filter,Dr=He("filter"),Mr=Dr&&!tt(function(){[].filter.call({length:-1,0:1},function(t){throw t})});oe({target:"Array",proto:!0,forced:!Dr||!Mr},{filter:function(t){return zr(this,t,1<arguments.length?arguments[1]:void 0)}});var Br=Fe.forEach,Fr=En("forEach")?function(t){return Br(this,t,1<arguments.length?arguments[1]:void 0)}:[].forEach;oe({target:"Array",proto:!0,forced:[].forEach!=Fr},{forEach:Fr}),oe({target:"Object",stat:!0,forced:!St,sham:!St},{defineProperties:Gn}),oe({target:"Object",stat:!0,forced:!St,sham:!St},{defineProperty:Dt.f});var _r=It.f,$r=tt(function(){_r(1)});oe({target:"Object",stat:!0,forced:!St||$r,sham:!St},{getOwnPropertyDescriptor:function(t,e){return _r(it(t),e)}});function Gr(t,e,n){var r=ot(e);r in t?Dt.f(t,r,et(0,n)):t[r]=n}oe({target:"Object",stat:!0,sham:!St},{getOwnPropertyDescriptors:function(t){for(var e,n,r=it(t),i=It.f,a=Pe(r),o={},s=0;a.length>s;)void 0!==(n=i(r,e=a[s++]))&&Gr(o,e,n);return o}});var qr=tt(function(){$n(1)});oe({target:"Object",stat:!0,forced:qr},{keys:function(t){return $n(le(t))}});var Hr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Wr in Hr){var Xr=kt[Wr],Ur=Xr&&Xr.prototype;if(Ur&&Ur.forEach!==Fr)try{Mt(Ur,"forEach",Fr)}catch(t){Ur.forEach=Fr}}function Yr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qr(t,e,n){return e&&S(t.prototype,e),n&&S(t,n),t}function Zr(t){if(at(t)){var e=t[ei];return void 0===e?Ne(t):!!e}}var Kr=n(function(t){var e=function(a){function o(t,e,n,r){var a,o,s,u,i=e&&e.prototype instanceof f?e:f,l=Object.create(i.prototype),c=new d(r||[]);return l._invoke=(a=t,o=n,s=c,u="suspendedStart",function(t,e){if("executing"===u)throw new Error("Generator is already running");if("completed"===u){if("throw"===t)throw e;return p()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=g(n,s);if(r){if(r===w)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===u)throw u="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);u="executing";var i=h(a,o,s);if("normal"===i.type){if(u=s.done?"completed":"suspendedYield",i.arg===w)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(u="completed",s.method="throw",s.arg=i.arg)}}),l}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function f(){}function n(){}function e(){}function t(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(u){var e;this._invoke=function(n,r){function t(){return new Promise(function(t,e){!function e(t,n,r,i){var a=h(u[t],u,n);if("throw"!==a.type){var o=a.arg,s=o.value;return s&&"object"==typeof s&&y.call(s,"__await")?Promise.resolve(s.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):Promise.resolve(s).then(function(t){o.value=t,r(o)},function(t){return e("throw",t,r,i)})}i(a.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function g(t,e){var n=t.iterator[e.method];if(n===l){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=l,g(t,e),"throw"===e.method))return w;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return w}var r=h(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,w;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=l),e.delegate=null,w):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,w)}function r(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function u(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(r,this),this.reset(!0)}function i(e){if(e){var t=e[m];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(y.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=l,t.done=!0,t};return r.next=r}}return{next:p}}function p(){return{value:l,done:!0}}var l,c=Object.prototype,y=c.hasOwnProperty,v="function"==typeof Symbol?Symbol:{},m=v.iterator||"@@iterator",b=v.asyncIterator||"@@asyncIterator",x=v.toStringTag||"@@toStringTag";a.wrap=o;var w={},k={};k[m]=function(){return this};var S=Object.getPrototypeOf,P=S&&S(S(i([])));P&&P!==c&&y.call(P,m)&&(k=P);var A=e.prototype=f.prototype=Object.create(k);return n.prototype=A.constructor=e,e.constructor=n,e[x]=n.displayName="GeneratorFunction",a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===n||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,e):(t.__proto__=e,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(A),t},a.awrap=function(t){return{__await:t}},t(s.prototype),s.prototype[b]=function(){return this},a.AsyncIterator=s,a.async=function(t,e,n,r){var i=new s(o(t,e,n,r));return a.isGeneratorFunction(e)?i:i.next().then(function(t){return t.done?t.value:i.next()})},t(A),A[x]="Generator",A[m]=function(){return this},A.toString=function(){return"[object Generator]"},a.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=i,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=l,this.done=!1,this.delegate=null,this.method="next",this.arg=l,this.tryEntries.forEach(u),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=l)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){function t(t,e){return a.type="throw",a.arg=n,r.next=t,e&&(r.method="next",r.arg=l),!!e}if(this.done)throw n;for(var r=this,e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],a=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n,r=this.tryEntries.length-1;0<=r;--r)if((n=this.tryEntries[r]).tryLoc<=this.prev&&y.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e,n=this.tryEntries.length-1;0<=n;--n)if((e=this.tryEntries[n]).finallyLoc===t)return this.complete(e.completion,e.afterLoc),u(e),w},catch:function(t){for(var e,n=this.tryEntries.length-1;0<=n;--n)if((e=this.tryEntries[n]).tryLoc===t){var r,i=e.completion;return"throw"===i.type&&(r=i.arg,u(e)),r}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:i(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=l),w}},a}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}),Jr=function(s){return function(){var t=this,o=arguments;return new Promise(function(e,n){function r(t){k(a,e,n,r,i,"next",t)}function i(t){k(a,e,n,r,i,"throw",t)}var a=s.apply(t,o);r(void 0)})}},ti=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},ei=ce("isConcatSpreadable"),ni=9007199254740991,ri="Maximum allowed index exceeded",ii=51<=We||!tt(function(){var t=[];return t[ei]=!1,t.concat()[0]!==t}),ai=He("concat");oe({target:"Array",proto:!0,forced:!ii||!ai},{concat:function(){for(var t,e,n,r=le(this),i=he(r,0),a=0,o=-1,s=arguments.length;o<s;o++)if(Zr(n=-1===o?r:arguments[o])){if(e=te(n.length),ni<a+e)throw TypeError(ri);for(t=0;t<e;t++,a++)t in n&&Gr(i,a,n[t])}else{if(ni<=a)throw TypeError(ri);Gr(i,a++,n)}return i.length=a,i}});var oi=Fe.every;oe({target:"Array",proto:!0,forced:En("every")},{every:function(t){return oi(this,t,1<arguments.length?arguments[1]:void 0)}});function si(l){return function(t,e,n,r){se(e);var i=le(t),a=Ot(i),o=te(i.length),s=l?o-1:0,u=l?-1:1;if(n<2)for(;;){if(s in a){r=a[s],s+=u;break}if(s+=u,l?s<0:o<=s)throw TypeError("Reduce of empty array with no initial value")}for(;l?0<=s:s<o;s+=u)s in a&&(r=e(r,a[s],s,i));return r}}var ui={left:si(!1),right:si(!0)}.left;oe({target:"Array",proto:!0,forced:En("reduce")},{reduce:function(t){return ui(this,t,arguments.length,1<arguments.length?arguments[1]:void 0)}});var li=Date.prototype,ci="Invalid Date",hi="toString",fi=li[hi],gi=li.getTime;new Date(NaN)+""!=ci&&ye(li,hi,function(){var t=gi.call(this);return t==t?fi.call(this):ci});var di={};di[ce("toStringTag")]="z";function pi(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),vi))?n:mi?nt(e):"Object"==(r=nt(e))&&"function"==typeof e.callee?"Arguments":r}var yi="[object z]"==di+"",vi=ce("toStringTag"),mi="Arguments"==nt(function(){return arguments}());yi||ye(Object.prototype,"toString",function(){return"[object "+pi(this)+"]"},{unsafe:!0});function bi(t,e,n){for(var r in e)ye(t,r,e[r],n);return t}function xi(t){var e=Kt(t),n=Dt.f;St&&e&&!e[Ei]&&n(e,Ei,{configurable:!0,get:function(){return this}})}function wi(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function ki(t){return void 0!==t&&(Ci.Array===t||Oi[Ti]===t)}function Si(t){if(null!=t)return t[Vi]||t["@@iterator"]||Ci[pi(t)]}function Pi(t,e,n,r){try{return r?e(lt(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&lt(i.call(t)),e}}var Ai=kt.Promise,Ei=ce("species"),Ci={},Ti=ce("iterator"),Oi=Array.prototype,Vi=ce("iterator"),Li=n(function(t){function g(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var a,o,s,u,l,c,h,f=ue(e,n,r?2:1);if(i)a=t;else{if("function"!=typeof(o=Si(t)))throw TypeError("Target is not iterable");if(ki(o)){for(s=0,u=te(t.length);s<u;s++)if((l=r?f(lt(h=t[s])[0],h[1]):f(t[s]))&&l instanceof g)return l;return new g(!1)}a=o.call(t)}for(c=a.next;!(h=c.call(a)).done;)if("object"==typeof(l=Pi(a,f,h.value,r))&&l&&l instanceof g)return l;return new g(!1)}).stop=function(t){return new g(!0,t)}}),Ni=ce("iterator"),Ri=!1;try{var ji=0,Ii={next:function(){return{done:!!ji++}},return:function(){Ri=!0}};Ii[Ni]=function(){return this},Array.from(Ii,function(){throw 2})}catch(t){}function zi(t,e){if(!e&&!Ri)return!1;var n=!1;try{var r={};r[Ni]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Di(t,e){var n,r=lt(t).constructor;return void 0===r||null==(n=lt(r)[Hi])?e:se(n)}function Mi(t){var e;ta.hasOwnProperty(t)&&(e=ta[t],delete ta[t],e())}function Bi(t){return function(){Mi(t)}}function Fi(t){Mi(t.data)}function _i(t){kt.postMessage(t+"",Xi.protocol+"//"+Xi.host)}var $i,Gi,qi,Hi=ce("species"),Wi=/(iphone|ipod|ipad).*applewebkit/i.test(_e),Xi=kt.location,Ui=kt.setImmediate,Yi=kt.clearImmediate,Qi=kt.process,Zi=kt.MessageChannel,Ki=kt.Dispatch,Ji=0,ta={},ea="onreadystatechange";Ui&&Yi||(Ui=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return ta[++Ji]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},$i(Ji),Ji},Yi=function(t){delete ta[t]},"process"==nt(Qi)?$i=function(t){Qi.nextTick(Bi(t))}:Ki&&Ki.now?$i=function(t){Ki.now(Bi(t))}:Zi&&!Wi?(qi=(Gi=new Zi).port2,Gi.port1.onmessage=Fi,$i=ue(qi.postMessage,qi,1)):!kt.addEventListener||"function"!=typeof postMessage||kt.importScripts||tt(_i)?$i=ea in ut("script")?function(t){qn.appendChild(ut("script"))[ea]=function(){qn.removeChild(this),Mi(t)}}:function(t){setTimeout(Bi(t),0)}:($i=_i,kt.addEventListener("message",Fi,!1)));var na,ra,ia,aa,oa,sa,ua,la,ca={set:Ui,clear:Yi},ha=It.f,fa=ca.set,ga=kt.MutationObserver||kt.WebKitMutationObserver,da=kt.process,pa=kt.Promise,ya="process"==nt(da),va=ha(kt,"queueMicrotask"),ma=va&&va.value;ma||(na=function(){var t,e;for(ya&&(t=da.domain)&&t.exit();ra;){e=ra.fn,ra=ra.next;try{e()}catch(t){throw ra?aa():ia=void 0,t}}ia=void 0,t&&t.enter()},aa=ya?function(){da.nextTick(na)}:ga&&!Wi?(oa=!0,sa=document.createTextNode(""),new ga(na).observe(sa,{characterData:!0}),function(){sa.data=oa=!oa}):pa&&pa.resolve?(ua=pa.resolve(void 0),la=ua.then,function(){la.call(ua,na)}):function(){fa.call(kt,na)});function ba(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=se(n),this.reject=se(r)}function xa(t,e){if(lt(t),at(e)&&e.constructor===t)return e;var n=Na.f(t);return(0,n.resolve)(e),n.promise}function wa(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}function ka(t){var e;return!(!at(t)||"function"!=typeof(e=t.then))&&e}function Sa(h,f,g){var d;f.notified||(f.notified=!0,d=f.reactions,La(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,a,o=d[n++],s=e?o.ok:o.fail,u=o.resolve,l=o.reject,c=o.domain;try{s?(e||(2===f.rejection&&Ja(h,f),f.rejection=1),!0===s?r=t:(c&&c.enter(),r=s(t),c&&(c.exit(),a=!0)),r===o.promise?l(Fa("Promise-chain cycle")):(i=ka(r))?i.call(r,u,l):u(r)):l(t)}catch(t){c&&!a&&c.exit(),l(t)}}f.reactions=[],f.notified=!1,g&&!f.rejection&&Za(h,f)}))}function Pa(t,e,n){var r,i;Xa?((r=_a.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),kt.dispatchEvent(r)):r={promise:e,reason:n},(i=kt["on"+t])?i(r):t===Ua&&function(t,e){var n=kt.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Aa(e,n,r,i){return function(t){e(n,r,t,i)}}function Ea(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Sa(t,e,!0))}var Ca,Ta,Oa,Va,La=ma||function(t){var e={fn:t,next:void 0};ia&&(ia.next=e),ra||(ra=e,aa()),ia=e},Na={f:function(t){return new ba(t)}},Ra=ca.set,ja=ce("species"),Ia="Promise",za=pe.get,Da=pe.set,Ma=pe.getterFor(Ia),Ba=Ai,Fa=kt.TypeError,_a=kt.document,$a=kt.process,Ga=Kt("fetch"),qa=Na.f,Ha=qa,Wa="process"==nt($a),Xa=!!(_a&&_a.createEvent&&kt.dispatchEvent),Ua="unhandledrejection",Ya=Ve(Ia,function(){if(!(Gt(Ba)!==Ba+"")){if(66===We)return!0;if(!Wa&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=We&&/native code/.test(Ba))return!1;function t(t){t(function(){},function(){})}var e=Ba.resolve(1);return(e.constructor={})[ja]=t,!(e.then(function(){})instanceof t)}),Qa=Ya||!zi(function(t){Ba.all(t).catch(function(){})}),Za=function(n,r){Ra.call(kt,function(){var t,e=r.value;if(Ka(r)&&(t=wa(function(){Wa?$a.emit("unhandledRejection",e,n):Pa(Ua,n,e)}),r.rejection=Wa||Ka(r)?2:1,t.error))throw t.value})},Ka=function(t){return 1!==t.rejection&&!t.parent},Ja=function(t,e){Ra.call(kt,function(){Wa?$a.emit("rejectionHandled",t):Pa("rejectionhandled",t,e.value)})},to=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw Fa("Promise can't be resolved itself");var i=ka(t);i?La(function(){var e={done:!1};try{i.call(t,Aa(to,n,e,r),Aa(Ea,n,e,r))}catch(t){Ea(n,e,t,r)}}):(r.value=t,r.state=1,Sa(n,r,!1))}catch(t){Ea(n,{done:!1},t,r)}}};Ya&&(Ba=function(t){wi(this,Ba,Ia),se(t),Ca.call(this);var e=za(this);try{t(Aa(to,this,e),Aa(Ea,this,e))}catch(t){Ea(this,e,t)}},(Ca=function(){Da(this,{type:Ia,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=bi(Ba.prototype,{then:function(t,e){var n=Ma(this),r=qa(Di(this,Ba));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Wa?$a.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Sa(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Ta=function(){var t=new Ca,e=za(t);this.promise=t,this.resolve=Aa(to,t,e),this.reject=Aa(Ea,t,e)},Na.f=qa=function(t){return t===Ba||t===Oa?new Ta:Ha(t)},"function"==typeof Ai&&(Va=Ai.prototype.then,ye(Ai.prototype,"then",function(t,e){var n=this;return new Ba(function(t,e){Va.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof Ga&&oe({global:!0,enumerable:!0,forced:!0},{fetch:function(){return xa(Ba,Ga.apply(kt,arguments))}}))),oe({global:!0,wrap:!0,forced:Ya},{Promise:Ba}),Qn(Ba,Ia,!1),xi(Ia),Oa=Kt(Ia),oe({target:Ia,stat:!0,forced:Ya},{reject:function(t){var e=qa(this);return e.reject.call(void 0,t),e.promise}}),oe({target:Ia,stat:!0,forced:Ya},{resolve:function(t){return xa(this,t)}}),oe({target:Ia,stat:!0,forced:Qa},{all:function(t){var s=this,e=qa(s),u=e.resolve,l=e.reject,n=wa(function(){var r=se(s.resolve),i=[],a=0,o=1;Li(t,function(t){var e=a++,n=!1;i.push(void 0),o++,r.call(s,t).then(function(t){n||(n=!0,i[e]=t,--o||u(i))},l)}),--o||u(i)});return n.error&&l(n.value),e.promise},race:function(t){var n=this,r=qa(n),i=r.reject,e=wa(function(){var e=se(n.resolve);Li(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}});function eo(t){var e;return at(t)&&(void 0===(e=t[no])?"RegExp"==nt(t):!!e)}var no=ce("match"),ro=[].push,io=4294967295,ao=!tt(function(){return!RegExp(io,"y")});pn("split",2,function(i,y,v){var m="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(t,e){var n=rt(this)+"",r=void 0===e?io:e>>>0;if(0==r)return[];if(void 0===t)return[n];if(!eo(t))return y.call(n,t,r);for(var i,a,o,s=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,c=new RegExp(t.source,u+"g");(i=dn.call(c,n))&&!(l<(a=c.lastIndex)&&(s.push(n.slice(l,i.index)),1<i.length&&i.index<n.length&&ro.apply(s,i.slice(1)),o=i[0].length,l=a,s.length>=r));)c.lastIndex===i.index&&c.lastIndex++;return l===n.length?!o&&c.test("")||s.push(""):s.push(n.slice(l)),s.length>r?s.slice(0,r):s}:function(t,e){return void 0===t&&0===e?[]:y.call(this,t,e)};return[function(t,e){var n=rt(this),r=null==t?void 0:t[i];return void 0===r?m.call(n+"",t,e):r.call(t,n,e)},function(t,e){var n=v(m,t,this,e,m!==y);if(n.done)return n.value;var r=lt(t),i=this+"",a=Di(r,RegExp),o=r.unicode,s=(r.ignoreCase?"i":"")+(r.multiline?"m":"")+(r.unicode?"u":"")+(ao?"y":"g"),u=new a(ao?r:"^(?:"+r.source+")",s),l=void 0===e?io:e>>>0;if(0==l)return[];if(0===i.length)return null===mn(u,i)?[i]:[];for(var c=0,h=0,f=[];h<i.length;){u.lastIndex=ao?h:0;var g,d=mn(u,ao?i:i.slice(h));if(null===d||(g=B(te(u.lastIndex+(ao?0:h)),i.length))===c)h=vn(i,h,o);else{if(f.push(i.slice(c,h)),f.length===l)return f;for(var p=1;p<=d.length-1;p++)if(f.push(d[p]),f.length===l)return f;h=c=g}}return f.push(i.slice(c)),f}]},!ao);var oo="undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,so=P,uo=R;"function"==typeof oo.setTimeout&&(so=setTimeout),"function"==typeof oo.clearTimeout&&(uo=clearTimeout);var lo,co=[],ho=!1,fo=-1;D.prototype.run=function(){this.fun.apply(null,this.array)};for(var go,po,yo,vo=oo.performance||{},mo=vo.now||vo.mozNow||vo.msNow||vo.oNow||vo.webkitNow||function(){return(new Date).getTime()},bo=new Date,xo={nextTick:function(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];co.push(new D(t,e)),1!==co.length||ho||j(z)},title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:_,addListener:_,once:_,off:_,removeListener:_,removeAllListeners:_,emit:_,binding:function(){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=.001*mo.call(vo),n=g(e),r=g(e%1*1e9);return t&&(n-=t[0],(r-=t[1])<0&&(n--,r+=1e9)),[n,r]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-bo)/1e3}},wo=n(function(o){(function(){var t,e,n,r,i,a;"undefined"!=typeof performance&&null!==performance&&performance.now?o.exports=function(){return performance.now()}:null!=xo&&xo.hrtime?(o.exports=function(){return(t()-i)/1e6},e=xo.hrtime,r=(t=function(){var t=e();return 1e9*t[0]+t[1]})(),a=1e9*xo.uptime(),i=r-a):n=Date.now?(o.exports=function(){return Date.now()-n},Date.now()):(o.exports=function(){return(new Date).getTime()-n},(new Date).getTime())}).call(wt)}),ko="undefined"==typeof window?wt:window,So=["moz","webkit"],Po="AnimationFrame",Ao=ko["request"+Po],Eo=ko["cancel"+Po]||ko["cancelRequest"+Po],Co=0;!Ao&&Co<So.length;Co++)Ao=ko[So[Co]+"Request"+Po],Eo=ko[So[Co]+"Cancel"+Po]||ko[So[Co]+"CancelRequest"+Po];Ao&&Eo||(po=go=0,yo=[],Ao=function(t){var e,n;return 0===yo.length&&(e=wo(),n=M(0,1e3/60-(e-go)),go=n+e,setTimeout(function(){for(var t=yo.slice(0),e=yo.length=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(go)}catch(e){setTimeout(function(){throw e},0)}},i(n))),yo.push({handle:++po,callback:t,cancelled:!1}),po},Eo=function(t){for(var e=0;e<yo.length;e++)yo[e].handle===t&&(yo[e].cancelled=!0)});function To(t){return Ao.call(ko,t)}To.cancel=function(){Eo.apply(ko,arguments)},To.polyfill=function(t){(t=t||ko).requestAnimationFrame=Ao,t.cancelAnimationFrame=Eo};var Oo=Dt.f,Vo=Function.prototype,Lo=Vo.toString,No=/^\s*function ([^ (]*)/;!St||"name"in Vo||Oo(Vo,"name",{configurable:!0,get:function(){try{return Lo.call(this).match(No)[1]}catch(t){return""}}});function Ro(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=(t=t.replace(/ /g,"")).toLowerCase();var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=c[t]||t;for(var h=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],e=0;e<h.length;e++){var n,r=h[e].re,i=h[e].process,a=r.exec(t);a&&(n=i(a),this.r=n[0],this.g=n[1],this.b=n[2],3<n.length&&(this.alpha=n[3]),this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:255<this.r?255:this.r,this.g=this.g<0||isNaN(this.g)?0:255<this.g?255:this.g,this.b=this.b<0||isNaN(this.b)?0:255<this.b?255:this.b,this.alpha=this.alpha<0?0:1<this.alpha||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t,e=[],n=0;n<h.length;n++){t=h[n].example;for(var r=0;r<t.length;r++)e[e.length]=t[r]}for(var i in c)e[e.length]=i;var a=document.createElement("ul");a.setAttribute("id","rgbcolor-examples");for(n=0;n<e.length;n++)try{var o=document.createElement("li"),s=new RGBColor(e[n]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+s.toHex()+"; color:"+s.toHex(),u.appendChild(document.createTextNode("test"));var l=document.createTextNode(" "+e[n]+" -> "+s.toRGB()+" -> "+s.toHex());o.appendChild(u),o.appendChild(l),a.appendChild(o)}catch(t){}return a}}var jo=(Qr(Io,[{key:"hasValue",value:function(){var t=this.value;return null!==t&&""!==t&&0!==t&&void 0!==t}},{key:"isString",value:function(t){var e=this.value,n="string"==typeof e;return n&&t?t.test(e):n}},{key:"isUrlDefinition",value:function(){return this.isString(/^url\(/)}},{key:"isPixels",value:function(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case/px$/.test(t):case/^[0-9]+$/.test(t):return!0;default:return!1}}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"getValue",value:function(t){return void 0===t||this.hasValue()?this.value:t}},{key:"getNumber",value:function(t){if(!this.hasValue())return void 0===t?0:parseFloat(t);var e=this.value,n=parseFloat(e);return this.isString(/%$/)&&(n/=100),n}},{key:"getString",value:function(t){return void 0===t||this.hasValue()?void 0===this.value?"":this.value+"":t+""}},{key:"getDpi",value:function(){return 96}},{key:"getRem",value:function(){return this.document.rootEmSize}},{key:"getEm",value:function(){return this.document.emSize}},{key:"getUnits",value:function(){return this.getString().replace(/[0-9\.\-]/g,"")}},{key:"getPixels",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(!this.hasValue())return 0;var n=Rn("boolean"==typeof t?[void 0,t]:[t],2),r=n[0],i=n[1],a=this.document.screen.viewPort;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*B(a.computeSize("x"),a.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*M(a.computeSize("x"),a.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*a.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*a.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&i:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*a.computeSize(r);default:var o=this.getNumber();return e&&o<1?o*a.computeSize(r):o}}},{key:"getMilliseconds",value:function(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}},{key:"getRadians",value:function(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(A/180);case this.isString(/grad$/):return this.getNumber()*(A/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(A/180)}}},{key:"getDefinition",value:function(){var t=this.getString(),e=t.match(/#([^\)'"]+)/);return e=(e=e&&e[1])||t,this.document.definitions[e]}},{key:"getFillStyleDefinition",value:function(t,e){var n,r=this.getDefinition();return r?"function"==typeof r.createGradient?r.createGradient(this.document.ctx,t,e):"function"!=typeof r.createPattern?null:(r.getHrefAttribute().hasValue()&&(n=r.getAttribute("patternTransform"),r=r.getHrefAttribute().getDefinition(),n.hasValue()&&r.getAttribute("patternTransform",!0).setValue(n.value)),r.createPattern(this.document.ctx,t,e)):null}},{key:"getTextBaseline",value:function(){return this.hasValue()?Io.textBaselineMapping[this.getString()]:null}},{key:"addOpacity",value:function(t){for(var e,n=this.value,r=n.length,i=0,a=0;a<r&&(","===n[a]&&i++,3!==i);a++);return t.hasValue()&&this.isString()&&3!==i&&(e=new Ro(n)).ok&&(n="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(t.getNumber(),")")),new Io(this.document,this.name,n)}}],[{key:"empty",value:function(t){return new Io(t,"EMPTY","")}}]),Io);function Io(t,e,n){Yr(this,Io),this.document=t,this.name=e,this.value=n}jo.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};var zo=(Qr(Ho,[{key:"clear",value:function(){this.viewPorts=[]}},{key:"setCurrent",value:function(t,e){this.viewPorts.push({width:t,height:e})}},{key:"removeCurrent",value:function(){this.viewPorts.pop()}},{key:"getCurrent",value:function(){var t=this.viewPorts;return t[t.length-1]}},{key:"computeSize",value:function(t){return"number"==typeof t?t:"x"===t?this.width:"y"===t?this.height:T(O(this.width,2)+O(this.height,2))/T(2)}},{key:"width",get:function(){return this.getCurrent().width}},{key:"height",get:function(){return this.getCurrent().height}}]),Ho),Do=(Qr(qo,[{key:"angleTo",value:function(t){return m(t.y-this.y,t.x-this.x)}},{key:"applyTransform",value:function(t){var e=this.x,n=this.y,r=e*t[0]+n*t[2]+t[4],i=e*t[1]+n*t[3]+t[5];this.x=r,this.y=i}}],[{key:"parse",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=L(t),r=Rn(n,2),i=r[0],a=void 0===i?e:i,o=r[1];return new qo(a,void 0===o?a:o)}},{key:"parsePath",value:function(t){for(var e=L(t),n=e.length,r=[],i=0;i<n;i+=2)r.push(new qo(e[i],e[i+1]));return r}}]),qo),Mo=(Qr(Go,[{key:"isWorking",value:function(){return this.working}},{key:"start",value:function(){var t,e,n,r;this.working||(t=this.screen,e=this.onClick,n=this.onMouseMove,(r=t.ctx.canvas).onclick=e,r.onmousemove=n,this.working=!0)}},{key:"stop",value:function(){var t;this.working&&(t=this.screen.ctx.canvas,this.working=!1,t.onclick=null,t.onmousemove=null)}},{key:"hasEvents",value:function(){return this.working&&0<this.events.length}},{key:"runEvents",value:function(){var t,e,i,n;this.working&&(t=this.screen,e=this.events,i=this.eventElements,(n=t.ctx.canvas.style)&&(n.cursor=""),e.forEach(function(t,e){for(var n=t.run,r=i[e];r;)n(r),r=r.parent}),this.events=[],this.eventElements=[])}},{key:"checkPath",value:function(i,a){var t,o;this.working&&a&&(t=this.events,o=this.eventElements,t.forEach(function(t,e){var n=t.x,r=t.y;!o[e]&&a.isPointInPath&&a.isPointInPath(n,r)&&(o[e]=i)}))}},{key:"checkBoundingBox",value:function(i,a){var t,o;this.working&&a&&(t=this.events,o=this.eventElements,t.forEach(function(t,e){var n=t.x,r=t.y;!o[e]&&a.isPointInBox(n,r)&&(o[e]=i)}))}},{key:"mapXY",value:function(t,e){for(var n=this.screen,r=n.window,i=n.ctx,a=new Do(t,e),o=i.canvas;o;)a.x-=o.offsetLeft,a.y-=o.offsetTop,o=o.offsetParent;return r.scrollX&&(a.x+=r.scrollX),r.scrollY&&(a.y+=r.scrollY),a}},{key:"onClick",value:function(t){var e=this.mapXY((t||event).clientX,(t||event).clientY),n=e.x,r=e.y;this.events.push({type:"onclick",x:n,y:r,run:function(t){t.onClick&&t.onClick()}})}},{key:"onMouseMove",value:function(t){var e=this.mapXY((t||event).clientX,(t||event).clientY),n=e.x,r=e.y;this.events.push({type:"onmousemove",x:n,y:r,run:function(t){t.onMouseMove&&t.onMouseMove()}})}}]),Go),Bo="undefined"==typeof window?null:window,Fo="undefined"==typeof fetch?null:fetch.bind(window),_o=(Qr($o,[{key:"wait",value:function(t){this.waits.push(t)}},{key:"ready",value:function(){return this.readyPromise?this.readyPromise:Promise.resolve()}},{key:"isReady",value:function(){if(this.isReadyLock)return!0;var t=this.waits.every(function(t){return t()});return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t}},{key:"setDefaults",value:function(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}},{key:"setViewBox",value:function(t){var e=t.document,n=t.ctx,r=t.aspectRatio,i=t.width,a=t.desiredWidth,o=t.height,s=t.desiredHeight,u=t.minX,l=void 0===u?0:u,c=t.minY,h=void 0===c?0:c,f=t.refX,g=t.refY,d=t.clip,p=t.clipX,y=void 0===p?0:p,v=t.clipY,m=void 0===v?0:v,b=F(r).replace(/^defer\s/,"").split(" "),x=Rn(b,2),w=x[0]||"xMidYMid",k=x[1]||"meet",S=i/a,P=o/s,A=B(S,P),E=M(S,P),C=a,T=s;"meet"===k&&(C*=A,T*=A),"slice"===k&&(C*=E,T*=E);var O,V,L,N,R,j,I=new jo(e,"refX",f),z=new jo(e,"refY",g),D=I.hasValue()&&z.hasValue();switch(D&&n.translate(-A*I.getPixels("x"),-A*z.getPixels("y")),void 0!==d&&d&&(O=A*y,V=A*m,n.beginPath(),n.moveTo(O,V),n.lineTo(i,V),n.lineTo(i,o),n.lineTo(O,o),n.closePath(),n.clip()),D||(L="meet"===k&&A===P,N="slice"===k&&E===P,R="meet"===k&&A===S,j="slice"===k&&E===S,/^xMid/.test(w)&&(L||N)&&n.translate(i/2-C/2,0),/YMid$/.test(w)&&(R||j)&&n.translate(0,o/2-T/2),/^xMax/.test(w)&&(L||N)&&n.translate(i-C,0),/YMax$/.test(w)&&(R||j)&&n.translate(0,o-T)),!0){case"none"===w:n.scale(S,P);break;case"meet"===k:n.scale(A,A);break;case"slice"===k:n.scale(E,E)}n.translate(-l,-h)}},{key:"start",value:function(e){var n,r,i,a=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=t.enableRedraw,s=t.ignoreMouse,u=t.ignoreAnimation,l=t.ignoreDimensions,c=void 0!==l&&l,h=t.ignoreClear,f=void 0!==h&&h,g=t.forceRedraw,d=t.scaleWidth,p=t.scaleHeight,y=t.offsetX,v=t.offsetY,m=this.FRAMERATE,b=this.mouse,x=1e3/m;this.frameDuration=x,this.readyPromise=new Promise(function(t){a.resolveReady=t}),this.isReady()&&this.render(e,c,f,d,p,y,v),void 0!==o&&o&&(n=Date.now(),r=n,void(i=0)!==s&&s||b.start(),this.intervalId=To(function t(){n=Date.now(),x<=(i=n-r)&&(r=n-i%x,a.shouldUpdate(void 0!==u&&u,g)&&(a.render(e,c,f,d,p,y,v),b.runEvents())),a.intervalId=To(t)}))}},{key:"stop",value:function(){this.intervalId&&(To.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}},{key:"shouldUpdate",value:function(t,e){if(!t){var n=this.frameDuration,r=this.animations.reduce(function(t,e){return e.update(n)||t},!1);if(r)return!0}return!("function"!=typeof e||!e())||!this.isReadyLock&&this.isReady()||!!this.mouse.hasEvents()}},{key:"render",value:function(t,e,n,r,i,a,o){var s=this.CLIENT_WIDTH,u=this.CLIENT_HEIGHT,l=this.viewPort,c=this.ctx,h=this.isFirstRender,f=c.canvas;l.clear(),f.width&&f.height?l.setCurrent(f.width,f.height):l.setCurrent(s,u);var g=t.getStyle("width"),d=t.getStyle("height");!e&&(h||"number"!=typeof r&&"number"!=typeof i)&&(g.hasValue()&&(f.width=g.getPixels("x"),f.style&&(f.style.width="".concat(f.width,"px"))),d.hasValue()&&(f.height=d.getPixels("y"),f.style&&(f.style.height="".concat(f.height,"px"))));var p,y,v,m,b,x,w=f.clientWidth||f.width,k=f.clientHeight||f.height;e&&g.hasValue()&&d.hasValue()&&(w=g.getPixels("x"),k=d.getPixels("y")),l.setCurrent(w,k),"number"==typeof a&&t.getAttribute("x",!0).setValue(a),"number"==typeof o&&t.getAttribute("y",!0).setValue(o),"number"!=typeof r&&"number"!=typeof i||(p=L(t.getAttribute("viewBox").getString()),v=y=0,"number"==typeof r&&((m=t.getAttribute("width")).hasValue()?y=m.getPixels("x")/r:isNaN(p[2])||(y=p[2]/r)),"number"==typeof i&&((b=t.getAttribute("height")).hasValue()?v=b.getPixels("y")/i:isNaN(p[3])||(v=p[3]/i)),y=y||v,v=v||y,t.getAttribute("width",!0).setValue(r),t.getAttribute("height",!0).setValue(i),(x=t.getStyle("transform",!0,!0)).setValue("".concat(x.getString()," scale(").concat(1/y,", ").concat(1/v,")"))),n||c.clearRect(0,0,w,k),t.render(c),h&&(this.isFirstRender=!1)}}]),$o);function $o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.fetch,r=void 0===n?Fo:n,i=e.window,a=void 0===i?Bo:i;Yr(this,$o),this.ctx=t,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new zo,this.mouse=new Mo(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=a,this.fetch=r}function Go(t){Yr(this,Go),this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}function qo(t,e){Yr(this,qo),this.x=t,this.y=e}function Ho(){Yr(this,Ho),this.viewPorts=[]}_o.defaultWindow=Bo,_o.defaultFetch=Fo;function Wo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xo(t,e){return!e||"object"!==ts(e)&&"function"!=typeof e?Wo(t):e}function Uo(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ns(t,e)}var Yo,Qo,Zo=_o.defaultFetch,Ko="undefined"==typeof DOMParser?null:DOMParser,Jo=(Qr(is,[{key:"parse",value:(Qo=Jr(Kr.mark(function t(e){return Kr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(/^</.test(e))return t.abrupt("return",this.parseFromString(e));t.next=2;break;case 2:return t.abrupt("return",this.load(e));case 3:case"end":return t.stop()}},t,this)})),function(){return Qo.apply(this,arguments)})},{key:"parseFromString",value:function(e){try{return(new this.DOMParser).parseFromString(e,"image/svg+xml")}catch(t){return(new this.DOMParser).parseFromString(e,"text/xml")}}},{key:"load",value:(Yo=Jr(Kr.mark(function t(e){var n,r;return Kr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.fetch(e);case 2:return n=t.sent,t.next=5,n.text();case 5:return r=t.sent,t.abrupt("return",this.parseFromString(r));case 7:case"end":return t.stop()}},t,this)})),function(){return Yo.apply(this,arguments)})}]),is),ts=n(function(e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t){return e.exports=r="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(t)}e.exports=r}),es=n(function(e){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}e.exports=n}),ns=n(function(n){function r(t,e){return n.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.exports=r}),rs=!zi(function(t){Array.from(t)});function is(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.fetch,n=void 0===e?Zo:e,r=t.DOMParser,i=void 0===r?Ko:r;Yr(this,is),this.fetch=n,this.DOMParser=i}oe({target:"Array",stat:!0,forced:rs},{from:function(t){var e,n,r,i,a,o=le(t),s="function"==typeof this?this:Array,u=arguments.length,l=1<u?arguments[1]:void 0,c=void 0!==l,h=0,f=Si(o);if(c&&(l=ue(l,2<u?arguments[2]:void 0,2)),null==f||s==Array&&ki(f))for(n=new s(e=te(o.length));h<e;h++)Gr(n,h,c?l(o[h],h):o[h]);else for(a=(i=f.call(o)).next,n=new s;!(r=a.call(i)).done;h++)Gr(n,h,c?Pi(i,l,[r.value,h],!0):r.value);return n.length=h,n}});var as=ce("unscopables"),os=Array.prototype;null==os[as]&&Mt(os,as,Un(null));function ss(t){os[as][t]=!0}var us=me.includes;oe({target:"Array",proto:!0},{includes:function(t){return us(this,t,1<arguments.length?arguments[1]:void 0)}}),ss("includes");var ls=Fe.some;oe({target:"Array",proto:!0,forced:En("some")},{some:function(t){return ls(this,t,1<arguments.length?arguments[1]:void 0)}});var cs=ce("match");oe({target:"String",proto:!0,forced:!function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[cs]=!1,"/./"[e](n)}catch(e){}}}("includes")},{includes:function(t){return!!~(rt(this)+"").indexOf(function(t){if(eo(t))throw TypeError("The method doesn't accept regular expressions");return t}(t),1<arguments.length?arguments[1]:void 0)}});var hs,fs,gs,ds=!tt(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),ps=ft("IE_PROTO"),ys=Object.prototype,vs=ds?Object.getPrototypeOf:function(t){return t=le(t),st(t,ps)?t[ps]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ys:null},ms=ce("iterator"),bs=!1;[].keys&&("next"in(gs=[].keys())?(fs=vs(vs(gs)))!==Object.prototype&&(hs=fs):bs=!0),null==hs&&(hs={}),st(hs,ms)||Mt(hs,ms,function(){return this});function xs(){return this}function ws(){return this}function ks(t,e,n,r,i,a,o){var s,u,l;function c(t){return t===i&&v?v:!Cs&&t in p?p[t]:"keys"===t||t===Os||t===Vs?function(){return new n(this,t)}:function(){return new n(this)}}u=r,l=e+" Iterator",(s=n).prototype=Un(Ps,{next:et(1,u)}),Qn(s,l,!1),Ci[l]=xs;var h,f,g,d=!1,p=t.prototype,y=p[Ts]||p["@@iterator"]||i&&p[i],v=!Cs&&y||c(i),m="Array"==e&&p.entries||y;if(m&&(h=vs(m.call(new t)),Es!==Object.prototype&&h.next&&(vs(h)!==Es&&(As?As(h,Es):"function"!=typeof h[Ts]&&Mt(h,Ts,ws)),Qn(h,e+" Iterator",!0))),i==Os&&y&&y.name!==Os&&(d=!0,v=function(){return y.call(this)}),p[Ts]!==v&&Mt(p,Ts,v),Ci[e]=v,i)if(f={values:c(Os),keys:a?v:c("keys"),entries:c(Vs)},o)for(g in f)!Cs&&!d&&g in p||ye(p,g,f[g]);else oe({target:e,proto:!0,forced:Cs||d},f);return f}var Ss={IteratorPrototype:hs,BUGGY_SAFARI_ITERATORS:bs},Ps=Ss.IteratorPrototype,As=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(r){}return function(t,e){return lt(t),function(t){if(!at(t)&&null!==t)throw TypeError("Can't set "+t+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),Es=Ss.IteratorPrototype,Cs=Ss.BUGGY_SAFARI_ITERATORS,Ts=ce("iterator"),Os="values",Vs="entries",Ls=kn.charAt,Ns="String Iterator",Rs=pe.set,js=pe.getterFor(Ns);ks(String,"String",function(t){Rs(this,{type:Ns,string:t+"",index:0})},function(){var t,e=js(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Ls(n,r),e.index+=t.length,{value:t,done:!1})});var Is,zs=en.trim;oe({target:"String",proto:!0,forced:(Is="trim",tt(function(){return"\t\n\v\f\r                　\u2028\u2029\ufeff"[Is]()||"​᠎"!="​᠎"[Is]()||"\t\n\v\f\r                　\u2028\u2029\ufeff"[Is].name!==Is}))},{trim:function(){return zs(this)}});var Ds=(Qr(Ms,[{key:"getAttribute",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=this.attributes[t];if(n||!e)return n||jo.empty(this.document);var r=new jo(this.document,t,"");return this.attributes[t]=r}},{key:"getHrefAttribute",value:function(){for(var t in this.attributes)if("href"==t||/:href$/.test(t))return this.attributes[t];return jo.empty(this.document)}},{key:"getStyle",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=this.styles[t];if(r)return r;var i=this.getAttribute(t);if(i&&i.hasValue())return this.styles[t]=i;if(!n){var a=this.parent;if(a){var o=a.getStyle(t);if(o&&o.hasValue())return o}}if(e){var s=new jo(this.document,t,"");return this.styles[t]=s}return r||jo.empty(this.document)}},{key:"render",value:function(t){var e,n;"none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()&&(t.save(),this.getStyle("mask").hasValue()?(e=this.getStyle("mask").getDefinition())&&e.apply(t,this):"none"!==this.getStyle("filter").getValue("none")?(n=this.getStyle("filter").getDefinition())&&n.apply(t,this):(this.setContext(t),this.renderChildren(t),this.clearContext(t)),t.restore())}},{key:"setContext",value:function(){}},{key:"clearContext",value:function(){}},{key:"renderChildren",value:function(e){this.children.forEach(function(t){t.render(e)})}},{key:"addChild",value:function(t){var e=t instanceof Ms?t:this.document.createElement(t);e.parent=this,Ms.ignoreChildTypes.includes(e.type)||this.children.push(e)}},{key:"matchesSelector",value:function(e){var t=this.node;if("function"==typeof t.matches)return t.matches(e);var n=t.getAttribute("class");return!(!n||""===n)&&n.split(" ").some(function(t){if(".".concat(t)===e)return!0})}},{key:"addStylesFromStyleDefinition",value:function(){var t=this.document,e=t.styles,n=t.stylesSpecificity;for(var r in e)if("@"!==r[0]&&this.matchesSelector(r)){var i=e[r],a=n[r];if(i)for(var o in i){var s=this.stylesSpecificity[o];void 0===s&&(s="000"),s<=a&&(this.styles[o]=i[o],this.stylesSpecificity[o]=a)}}}}]),Ms);function Ms(a,t){var e,n,o=this,r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];Yr(this,Ms),this.document=a,this.node=t,this.captureTextNodes=r,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],t&&1===t.nodeType&&(Array.from(t.attributes).forEach(function(t){var e=l(t.nodeName);o.attributes[e]=new jo(a,e,t.value)}),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()&&this.getAttribute("style").getString().split(";").map(function(t){return t.trim()}).forEach(function(t){var e,n,r,i;t&&(e=t.split(":"),r=(n=Rn(e,2))[0],i=n[1],o.styles[r]=new jo(a,r.trim(),i.trim()))}),e=a.definitions,(n=this.getAttribute("id")).hasValue()&&!e[n.getValue()]&&(e[n.getValue()]=this),Array.from(t.childNodes).forEach(function(t){var e;1===t.nodeType?o.addChild(t):!r||3!==t.nodeType&&4!==t.nodeType||0<(e=a.createTextNode(t)).getText().length&&o.addChild(e)}))}Ds.ignoreChildTypes=["title"];var Bs=(Uo(qs,Ds),qs),Fs=me.indexOf,_s=[].indexOf,$s=!!_s&&1/[1].indexOf(1,-0)<0,Gs=En("indexOf");function qs(t,e,n){var r;return Yr(this,qs),r=Xo(this,es(qs).call(this,t,e,n)),console.warn("Element ".concat(e.nodeName," not yet implemented.")),r}oe({target:"Array",proto:!0,forced:$s||Gs},{indexOf:function(t){return $s?_s.apply(this,arguments)||0:Fs(this,t,1<arguments.length?arguments[1]:void 0)}});var Hs=[].reverse,Ws=[1,2];oe({target:"Array",proto:!0,forced:Ws+""==Ws.reverse()+""},{reverse:function(){return Ne(this)&&(this.length=this.length),Hs.call(this)}});var Xs=n(function(r){function i(t,e,n){return r.exports=i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=es(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}},i(t,e,n||t)}r.exports=i}),Us=(Qr(Ys,[{key:"toString",value:function(){return[function(t){if(!t)return"";var e=t.trim().toLowerCase();return"normal"===e||"italic"===e||"oblique"===e||"inherit"===e||"initial"===e||"unset"===e||/^oblique\s+(-|)\d+deg$/.test(e)?e:""}(this.fontStyle),this.fontVariant,function(t){if(!t)return"";var e=t.trim().toLowerCase();return"normal"===e||"bold"===e||"lighter"===e||"bolder"===e||"inherit"===e||"initial"===e||"unset"===e||/^[\d.]+$/.test(e)?e:""}(this.fontWeight),this.fontSize,(t=this.fontFamily,"undefined"==typeof process?t:t.trim().split(",").map($).join(","))].join(" ").trim();var t}}],[{key:"parse",value:function(){var t=1<arguments.length?arguments[1]:void 0,r="",i="",a="",o="",s="",e=F(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").trim().split(" "),u={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return e.forEach(function(t){switch(!0){case!u.fontStyle&&Ys.styles.includes(t):"inherit"!==t&&(r=t),u.fontStyle=!0;break;case!u.fontVariant&&Ys.variants.includes(t):"inherit"!==t&&(i=t),u.fontStyle=!0,u.fontVariant=!0;break;case!u.fontWeight&&Ys.weights.includes(t):"inherit"!==t&&(a=t),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0;break;case!u.fontSize:var e,n;"inherit"!==t&&(e=t.split("/"),n=Rn(e,1),o=n[0]),u.fontStyle=!0,u.fontVariant=!0,u.fontWeight=!0,u.fontSize=!0;break;default:"inherit"!==t&&(s+=t)}}),new Ys(r,i,a,o,s,t)}}]),Ys);function Ys(t,e,n,r,i,a){Yr(this,Ys);var o=a?"string"==typeof a?Ys.parse(a):a:{};this.fontFamily=i||o.fontFamily,this.fontSize=r||o.fontSize,this.fontStyle=t||o.fontStyle,this.fontWeight=n||o.fontWeight,this.fontVariant=e||o.fontVariant}Us.styles="normal|italic|oblique|inherit",Us.variants="normal|small-caps|inherit",Us.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";function Qs(t,e,n){var r,i;return As&&"function"==typeof(r=e.constructor)&&r!==n&&at(i=r.prototype)&&i!==n.prototype&&As(t,i),t}function Zs(t){var e,n,r,i,a,o,s,u,l=ot(t,!1);if("string"==typeof l&&2<l.length)if(43===(e=(l=eu(l)).charCodeAt(0))||45===e){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(o=(a=l.slice(2)).length,s=0;s<o;s++)if((u=a.charCodeAt(s))<48||i<u)return NaN;return parseInt(a,r)}return+l}var Ks=ke.f,Js=It.f,tu=Dt.f,eu=en.trim,nu="Number",ru=kt[nu],iu=ru.prototype,au=nt(Un(iu))==nu;if(Ve(nu,!ru(" 0o1")||!ru("0b1")||ru("+0x1"))){for(var ou,su=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof su&&(au?tt(function(){iu.valueOf.call(n)}):nt(n)!=nu)?Qs(new ru(Zs(e)),n,su):Zs(e)},uu=St?Ks(ru):["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY","EPSILON","isFinite","isInteger","isNaN","isSafeInteger","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","parseFloat","parseInt","isInteger"],lu=0;uu.length>lu;lu++)st(ru,ou=uu[lu])&&!st(su,ou)&&tu(su,ou,Js(ru,ou));(su.prototype=iu).constructor=su,ye(kt,nu,su)}var cu=(Qr(yu,[{key:"addPoint",value:function(t,e){void 0!==t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),void 0!==e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}},{key:"addX",value:function(t){this.addPoint(t,null)}},{key:"addY",value:function(t){this.addPoint(null,t)}},{key:"addBoundingBox",value:function(t){var e,n,r,i;t&&(e=t.x1,n=t.y1,r=t.x2,i=t.y2,this.addPoint(e,n),this.addPoint(r,i))}},{key:"sumCubic",value:function(t,e,n,r,i){return O(1-t,3)*e+3*O(1-t,2)*t*n+3*(1-t)*O(t,2)*r+O(t,3)*i}},{key:"bezierCurveAdd",value:function(t,e,n,r,i){var a=6*e-12*n+6*r,o=-3*e+9*n-9*r+3*i,s=3*n-3*e;if(0!=o){var u,l,c=O(a,2)-4*s*o;c<0||(0<(u=(-a+T(c))/(2*o))&&u<1&&(t?this.addX(this.sumCubic(u,e,n,r,i)):this.addY(this.sumCubic(u,e,n,r,i))),0<(l=(-a-T(c))/(2*o))&&l<1&&(t?this.addX(this.sumCubic(l,e,n,r,i)):this.addY(this.sumCubic(l,e,n,r,i))))}else{if(0==a)return;var h=-s/a;0<h&&h<1&&(t?this.addX(this.sumCubic(h,e,n,r,i)):this.addY(this.sumCubic(h,e,n,r,i)))}}},{key:"addBezierCurve",value:function(t,e,n,r,i,a,o,s){this.addPoint(t,e),this.addPoint(o,s),this.bezierCurveAdd(!0,t,n,i,o),this.bezierCurveAdd(!1,e,r,a,s)}},{key:"addQuadraticCurve",value:function(t,e,n,r,i,a){var o=t+2/3*(n-t),s=e+2/3*(r-e);this.addBezierCurve(t,e,o,o+1/3*(i-t),s,s+1/3*(a-e),i,a)}},{key:"isPointInBox",value:function(t,e){var n=this.x1,r=this.y1,i=this.x2,a=this.y2;return n<=t&&t<=i&&r<=e&&e<=a}},{key:"x",get:function(){return this.x1}},{key:"y",get:function(){return this.y1}},{key:"width",get:function(){return this.x2-this.x1}},{key:"height",get:function(){return this.y2-this.y1}}]),yu),hu="toString",fu=RegExp.prototype,gu=fu[hu],du=tt(function(){return"/a/b"!=gu.call({source:"a",flags:"b"})}),pu=gu.name!=hu;function yu(){var t=Number.NaN,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:t;Yr(this,yu),this.x1=e,this.y1=n,this.x2=r,this.y2=i,this.addPoint(e,n),this.addPoint(r,i)}(du||pu)&&ye(RegExp.prototype,hu,function(){var t=lt(this),e=t.source+"",n=t.flags;return"/"+e+"/"+((void 0===n&&t instanceof RegExp&&!("flags"in fu)?on.call(t):n)+"")},{unsafe:!0});var vu=(Qr(Nu,[{key:"apply",value:function(t){var e=this.point,n=e.x,r=e.y;t.translate(n||0,r||0)}},{key:"unapply",value:function(t){var e=this.point,n=e.x,r=e.y;t.translate(-1*n||0,-1*r||0)}},{key:"applyToPoint",value:function(t){var e=this.point,n=e.x,r=e.y;t.applyTransform([1,0,0,1,n||0,r||0])}}]),Nu),mu=(Qr(Lu,[{key:"apply",value:function(t){var e=this.cx,n=this.cy,r=this.angle;t.translate(e,n),t.rotate(r.getRadians()),t.translate(-e,-n)}},{key:"unapply",value:function(t){var e=this.cx,n=this.cy,r=this.angle;t.translate(e,n),t.rotate(-1*r.getRadians()),t.translate(-e,-n)}},{key:"applyToPoint",value:function(t){var e=this.cx,n=this.cy,r=this.angle.getRadians();t.applyTransform([1,0,0,1,e||0,n||0]),t.applyTransform([C(r),E(r),-E(r),C(r),0,0]),t.applyTransform([1,0,0,1,-e||0,-n||0])}}]),Lu),bu=(Qr(Vu,[{key:"apply",value:function(t){var e=this.scale,n=e.x,r=e.y;t.scale(n,r||n)}},{key:"unapply",value:function(t){var e=this.scale,n=e.x,r=e.y;t.scale(1/n,1/r||n)}},{key:"applyToPoint",value:function(t){var e=this.scale,n=e.x,r=e.y;t.applyTransform([n||0,0,0,r||0,0,0])}}]),Vu),xu=(Qr(Ou,[{key:"apply",value:function(t){var e=this.matrix;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}},{key:"unapply",value:function(t){var e=this.matrix,n=e[0],r=e[2],i=e[4],a=e[1],o=e[3],s=e[5],u=1/(n*(o-0*s)-r*(a-0*s)+i*(0*a-0*o));t.transform(u*(o-0*s),u*(0*s-a),u*(0*i-r),u*(n-0*i),u*(r*s-i*o),u*(i*a-n*s))}},{key:"applyToPoint",value:function(t){t.applyTransform(this.matrix)}}]),Ou),wu=(Uo(Tu,xu),Tu),ku=(Uo(Cu,wu),Cu),Su=(Uo(Eu,wu),Eu),Pu=(Qr(Au,[{key:"apply",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].apply(t)}},{key:"unapply",value:function(t){for(var e=this.transforms,n=e.length-1;0<=n;n--)e[n].unapply(t)}},{key:"applyToPoint",value:function(t){for(var e=this.transforms,n=e.length,r=0;r<n;r++)e[r].applyToPoint(t)}}],[{key:"fromElement",value:function(t,e){var n=e.getStyle("transform",!1,!0),r=e.getStyle("transform-origin",!1,!0);return n.hasValue()?new Au(t,n.getString(),r.getString()):null}}]),Au);function Au(t,e,n){var c=this;Yr(this,Au),this.document=t,this.transforms=[];var r=F(e).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),h=n?L(n):[];r.forEach(function(t){var e,n,r,i,a,o,s,u,l;"none"!==t&&(o=t.split("("),s=Rn(o,2),u=s[0],l=s[1],e=[u.trim(),l.trim().replace(")","")],r=(n=Rn(e,2))[0],i=n[1],void 0!==(a=Au.transformTypes[r])&&c.transforms.push(new a(c.document,i,h)))})}function Eu(t,e){var n;return Yr(this,Eu),(n=Xo(this,es(Eu).call(this,t,e))).type="skewY",n.matrix=[1,r(n.angle.getRadians()),0,1,0,0],n}function Cu(t,e){var n;return Yr(this,Cu),(n=Xo(this,es(Cu).call(this,t,e))).type="skewX",n.matrix=[1,0,r(n.angle.getRadians()),1,0,0],n}function Tu(t,e){var n;return Yr(this,Tu),(n=Xo(this,es(Tu).call(this,t,e))).type="skew",n.angle=null,n.angle=new jo(t,"angle",e),n}function Ou(t,e){Yr(this,Ou),this.type="matrix",this.matrix=[],this.matrix=L(e)}function Vu(t,e){Yr(this,Vu),this.type="scale",this.scale=null;var n=Do.parse(e,1);0!==n.x&&0!==n.y||(n.x=_n,n.y=_n),this.scale=n}function Lu(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];Yr(this,Lu),this.type="rotate",this.angle=null,this.cx=0,this.cy=0;var r=L(e);this.angle=new jo(t,"angle",r[0]),this.cx=(r[1]||0)+(n[0]||0),this.cy=(r[2]||0)+(n[1]||0)}function Nu(t,e){Yr(this,Nu),this.type="translate",this.point=null,this.point=Do.parse(e)}Pu.transformTypes={translate:vu,rotate:mu,scale:bu,matrix:xu,skewX:ku,skewY:Su};var Ru=(Uo(Fu,Ds),Qr(Fu,[{key:"calculateOpacity",value:function(){for(var t,e=1,n=this;n;)(t=n.getStyle("opacity",!1,!0)).hasValue()&&(e*=t.getNumber()),n=n.parent;return e}},{key:"setContext",value:function(t){var e,n,r,i,a,o,s,u,l,c,h,f,g,d,p,y,v,m,b,x,w,k,S,P,A,E,C;1<arguments.length&&void 0!==arguments[1]&&arguments[1]||(e=this.getStyle("fill"),n=this.getStyle("fill-opacity"),r=this.getStyle("stroke"),i=this.getStyle("stroke-opacity"),e.isUrlDefinition()?(a=e.getFillStyleDefinition(this,n))&&(t.fillStyle=a):e.hasValue()&&("currentColor"===e.getString()&&e.setValue(this.getStyle("color").getValue()),"inherit"!==(o=e.getString())&&(t.fillStyle="none"===o?"rgba(0,0,0,0)":o)),n.hasValue()&&(s=new jo(this.document,"fill",t.fillStyle).addOpacity(n).getString(),t.fillStyle=s),r.isUrlDefinition()?(u=r.getFillStyleDefinition(this,i))&&(t.strokeStyle=u):r.hasValue()&&("currentColor"===r.getString()&&r.setValue(this.getStyle("color").getValue()),"inherit"!==(l=r.getString())&&(t.strokeStyle="none"===l?"rgba(0,0,0,0)":l)),i.hasValue()&&(c=new jo(this.document,"stroke",t.strokeStyle).addOpacity(i).getString(),t.strokeStyle=c),(h=this.getStyle("stroke-width")).hasValue()&&(f=h.getPixels(),t.lineWidth=f||_n),g=this.getStyle("stroke-linecap"),d=this.getStyle("stroke-linejoin"),p=this.getStyle("stroke-miterlimit"),y=this.getStyle("paint-order"),v=this.getStyle("stroke-dasharray"),m=this.getStyle("stroke-dashoffset"),g.hasValue()&&(t.lineCap=g.getString()),d.hasValue()&&(t.lineJoin=d.getString()),p.hasValue()&&(t.miterLimit=p.getNumber()),y.hasValue()&&(t.paintOrder=y.getValue()),v.hasValue()&&"none"!==v.getString()&&(b=L(v.getString()),void 0===t.setLineDash?void 0===t.webkitLineDash?void 0===t.mozDash||1===b.length&&0===b[0]||(t.mozDash=b):t.webkitLineDash=b:t.setLineDash(b),x=m.getPixels(),void 0===t.lineDashOffset?void 0===t.webkitLineDashOffset?void 0!==t.mozDashOffset&&(t.mozDashOffset=x):t.webkitLineDashOffset=x:t.lineDashOffset=x)),this.modifiedEmSizeStack=!1,void 0!==t.font&&(w=this.getStyle("font"),k=this.getStyle("font-style"),S=this.getStyle("font-variant"),P=this.getStyle("font-weight"),A=this.getStyle("font-size"),E=this.getStyle("font-family"),C=new Us(k.getString(),S.getString(),P.getString(),A.hasValue()?"".concat(A.getPixels(!0),"px"):"",E.getString(),Us.parse(w.getString(),t.font)),k.setValue(C.fontStyle),S.setValue(C.fontVariant),P.setValue(C.fontWeight),A.setValue(C.fontSize),E.setValue(C.fontFamily),t.font=C.toString(),A.isPixels()&&(this.document.emSize=A.getPixels(),this.modifiedEmSizeStack=!0));var T=Pu.fromElement(this.document,this);T&&T.apply(t);var O,V=this.getStyle("clip-path",!1,!0);!V.hasValue()||(O=V.getDefinition())&&O.apply(t),t.globalAlpha=this.calculateOpacity()}},{key:"clearContext",value:function(t){Xs(es(Fu.prototype),"clearContext",this).call(this,t),this.modifiedEmSizeStack&&this.document.popEmSize()}}]),Fu),ju=(Uo(Bu,Ru),Qr(Bu,[{key:"setContext",value:function(t){var e=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];Xs(es(Bu.prototype),"setContext",this).call(this,t,e);var n=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();n&&(t.textBaseline=n)}},{key:"initializeCoordinates",value:function(t){this.x=this.getAttribute("x").getPixels("x"),this.y=this.getAttribute("y").getPixels("y");var e=this.getAttribute("dx"),n=this.getAttribute("dy");e.hasValue()&&(this.x+=e.getPixels("x")),n.hasValue()&&(this.y+=n.getPixels("y")),this.x+=this.getAnchorDelta(t,this,0)}},{key:"getBoundingBox",value:function(r){var i=this;if("text"!==this.type)return this.getTElementBoundingBox(r);this.initializeCoordinates(r);var a=null;return this.children.forEach(function(t,e){var n=i.getChildBoundingBox(r,i,i,e);a?a.addBoundingBox(n):a=n}),a}},{key:"getFontSize",value:function(){var t=this.document,e=this.parent,n=Us.parse(t.ctx.font).fontSize;return e.getStyle("font-size").getNumber(n)}},{key:"getTElementBoundingBox",value:function(t){var e=this.getFontSize();return new cu(this.x,this.y-e,this.x+this.measureText(t),this.y)}},{key:"getGlyph",value:function(t,e,n){var r,i,a,o,s=e[n],u=null;return t.isArabic?(r=e.length,i=e[n-1],a=e[n+1],o=0<n&&" "!==i&&(n===r-1||" "===a)?"initial":0<n&&" "!==i&&n<r-2&&" "!==a?"medial":(0===n||" "===i)&&n<r-2&&" "!==a?"terminal":"isolated",void 0!==t.glyphs[s]&&((u=t.glyphs[s][o])||"glyph"!==t.glyphs[s].type||(u=t.glyphs[s]))):u=t.glyphs[s],u=u||t.missingGlyph}},{key:"getText",value:function(){return""}},{key:"getTextFromNode",value:function(t){var e=t||this.node,n=Array.from(e.parentNode.childNodes),r=n.indexOf(e),i=n.length-1,a=F(e.value||e.text||e.textContent||"");return 0===r&&(a=s(a)),r===i&&(a=u(a)),a}},{key:"renderChildren",value:function(n){var t,r=this;"text"===this.type?(this.initializeCoordinates(n),this.children.forEach(function(t,e){r.renderChild(n,r,r,e)}),(t=this.document.screen.mouse).isWorking()&&t.checkBoundingBox(this,this.getBoundingBox(n))):this.renderTElementChildren(n)}},{key:"renderTElementChildren",value:function(t){var e=this.document,n=this.parent,r=this.getText(),i=n.getStyle("font-family").getDefinition();if(i)for(var a,o=i.fontFace.unitsPerEm,s=Us.parse(e.ctx.font),u=n.getStyle("font-size").getNumber(s.fontSize),l=n.getStyle("font-style").getString(s.fontStyle),c=u/o,h=i.isRTL?r.split("").reverse().join(""):r,f=L(n.getAttribute("dx").getString()),g=h.length,d=0;d<g;d++){a=this.getGlyph(i,h,d),t.translate(this.x,this.y),t.scale(c,-c);var p=t.lineWidth;t.lineWidth=t.lineWidth*o/u,"italic"===l&&t.transform(1,0,.4,1,0,0),a.render(t),"italic"===l&&t.transform(1,0,-.4,1,0,0),t.lineWidth=p,t.scale(1/c,-1/c),t.translate(-this.x,-this.y),this.x+=u*(a.horizAdvX||i.horizAdvX)/o,void 0===f[d]||isNaN(f[d])||(this.x+=f[d])}else{var y=this.x,v=this.y;"stroke"===t.paintOrder?(t.strokeStyle&&t.strokeText(r,y,v),t.fillStyle&&t.fillText(r,y,v)):(t.fillStyle&&t.fillText(r,y,v),t.strokeStyle&&t.strokeText(r,y,v))}}},{key:"getAnchorDelta",value:function(t,e,n){var r=this.getStyle("text-anchor").getString("start");if("start"===r)return 0;for(var i=e.children,a=i.length,o=null,s=0,u=n;u<a&&(o=i[u],!(n<u&&o.getAttribute("x").hasValue()||o.getAttribute("text-anchor").hasValue()));u++)s+=o.measureTextRecursive(t);return-1*("end"===r?s:s/2)}},{key:"adjustChildCoordinates",value:function(t,e,n,r){var i=n.children[r];if("function"!=typeof i.measureText)return i;var a,o,s=i.getAttribute("x"),u=i.getAttribute("y"),l=i.getAttribute("dx"),c=i.getAttribute("dy"),h=i.getAttribute("text-anchor").getString("start");return 0===r&&"textNode"!==i.type&&(s.hasValue()||s.setValue(e.getAttribute("x").getValue("0")),u.hasValue()||u.setValue(e.getAttribute("y").getValue("0")),l.hasValue()||l.setValue(e.getAttribute("dx").getValue("0")),c.hasValue()||c.setValue(e.getAttribute("dy").getValue("0"))),s.hasValue()?(i.x=s.getPixels("x")+e.getAnchorDelta(t,n,r),"start"!==h&&(a=i.measureTextRecursive(t),i.x+=-1*("end"===h?a:a/2)),l.hasValue()&&(i.x+=l.getPixels("x"))):("start"!==h&&(o=i.measureTextRecursive(t),e.x+=-1*("end"===h?o:o/2)),l.hasValue()&&(e.x+=l.getPixels("x")),i.x=e.x),e.x=i.x+i.measureText(t),u.hasValue()?(i.y=u.getPixels("y"),c.hasValue()&&(i.y+=c.getPixels("y"))):(c.hasValue()&&(e.y+=c.getPixels("y")),i.y=e.y),e.y=i.y,i}},{key:"getChildBoundingBox",value:function(r,i,t,e){var a=this.adjustChildCoordinates(r,i,t,e),o=a.getBoundingBox(r);return o?(a.children.forEach(function(t,e){var n=i.getChildBoundingBox(r,i,a,e);o.addBoundingBox(n)}),o):null}},{key:"renderChild",value:function(n,r,t,e){var i=this.adjustChildCoordinates(n,r,t,e);i.render(n),i.children.forEach(function(t,e){r.renderChild(n,r,i,e)})}},{key:"measureTextRecursive",value:function(n){return this.children.reduce(function(t,e){return t+e.measureTextRecursive(n)},this.measureText(n))}},{key:"measureText",value:function(t){var e=this.measureCache;if(~e)return e;var n=this.getText(),r=this.measureTargetText(t,n);return this.measureCache=r}},{key:"measureTargetText",value:function(t,e){if(!e.length)return 0;var n=this.parent,r=n.getStyle("font-family").getDefinition();if(r){for(var i=this.getFontSize(),a=r.isRTL?e.split("").reverse().join(""):e,o=L(n.getAttribute("dx").getString()),s=a.length,u=0,l=0;l<s;l++)u+=(this.getGlyph(r,a,l).horizAdvX||r.horizAdvX)*i/r.fontFace.unitsPerEm,void 0===o[l]||isNaN(o[l])||(u+=o[l]);return u}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);var c=t.measureText(e).width;return t.restore(),c}}]),Bu),Iu=(Uo(Mu,ju),Qr(Mu,[{key:"getText",value:function(){return this.text}}]),Mu),zu=(Uo(Du,Iu),Du);function Du(){var t;return Yr(this,Du),(t=Xo(this,es(Du).apply(this,arguments))).type="textNode",t}function Mu(t,e,n){var r;return Yr(this,Mu),(r=Xo(this,es(Mu).call(this,t,e,(this instanceof Mu?this.constructor:void 0)===Mu||n))).type="tspan",r.text=0<r.children.length?"":r.getTextFromNode(),r}function Bu(t,e,n){var r;return Yr(this,Bu),(r=Xo(this,es(Bu).call(this,t,e,(this instanceof Bu?this.constructor:void 0)===Bu||n))).type="text",r.x=0,r.y=0,r.measureCache=-1,r}function Fu(){var t;return Yr(this,Fu),(t=Xo(this,es(Fu).apply(this,arguments))).modifiedEmSizeStack=!1,t}oe({target:"Array",proto:!0},{fill:function(t){for(var e=le(this),n=te(e.length),r=arguments.length,i=ee(1<r?arguments[1]:void 0,n),a=2<r?arguments[2]:void 0,o=void 0===a?n:ee(a,n);i<o;)e[i++]=t;return e}}),ss("fill");var _u=(Qr(al,[{key:"reset",value:function(){this.i=-1,this.command="",this.previousCommand="",this.start=new Do(0,0),this.control=new Do(0,0),this.current=new Do(0,0),this.points=[],this.angles=[]}},{key:"isEnd",value:function(){return this.i>=this.tokens.length-1}},{key:"isCommandOrEnd",value:function(){if(this.isEnd())return!0;var t=this.i,e=this.tokens;return/^[A-Za-z]$/.test(e[t+1])}},{key:"isRelativeCommand",value:function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0;default:return!1}}},{key:"getToken",value:function(){return this.i++,this.tokens[this.i]}},{key:"getScalar",value:function(){return parseFloat(this.getToken())}},{key:"nextCommand",value:function(){this.previousCommand=this.command,this.command=this.getToken()}},{key:"getPoint",value:function(){var t=new Do(this.getScalar(),this.getScalar());return this.makeAbsolute(t)}},{key:"getAsControlPoint",value:function(){var t=this.getPoint();return this.control=t}},{key:"getAsCurrentPoint",value:function(){var t=this.getPoint();return this.current=t}},{key:"getReflectedControlPoint",value:function(){var t=this.previousCommand.toLowerCase();if("c"!==t&&"s"!==t&&"q"!==t&&"t"!==t)return this.current;var e=this.current,n=e.x,r=e.y,i=this.control,a=i.x,o=i.y;return new Do(2*n-a,2*r-o)}},{key:"makeAbsolute",value:function(t){var e,n,r;return this.isRelativeCommand()&&(n=(e=this.current).x,r=e.y,t.x+=n,t.y+=r),t}},{key:"addMarker",value:function(t,e,n){var r=this.points,i=this.angles;n&&0<i.length&&!i[i.length-1]&&(i[i.length-1]=r[r.length-1].angleTo(n)),this.addMarkerAngle(t,e?e.angleTo(t):null)}},{key:"addMarkerAngle",value:function(t,e){this.points.push(t),this.angles.push(e)}},{key:"getMarkerPoints",value:function(){return this.points}},{key:"getMarkerAngles",value:function(){for(var t=this.angles,e=t.length,n=0;n<e;n++)if(!t[n])for(var r=n+1;r<e;r++)if(t[r]){t[n]=t[r];break}return t}}]),al),$u=(Uo(il,Ru),Qr(il,[{key:"path",value:function(t){var e=this.pathParser,n=new cu;for(e.reset(),t&&t.beginPath();!e.isEnd();)switch(e.nextCommand(),e.command){case"M":case"m":this.pathM(t,n);break;case"L":case"l":this.pathL(t,n);break;case"H":case"h":this.pathH(t,n);break;case"V":case"v":this.pathV(t,n);break;case"C":case"c":this.pathC(t,n);break;case"S":case"s":this.pathS(t,n);break;case"Q":case"q":this.pathQ(t,n);break;case"T":case"t":this.pathT(t,n);break;case"A":case"a":this.pathA(t,n);break;case"Z":case"z":this.pathZ(t,n)}return n}},{key:"getBoundingBox",value:function(){return this.path()}},{key:"getMarkers",value:function(){var t=this.pathParser,e=t.getMarkerPoints(),n=t.getMarkerAngles();return e.map(function(t,e){return[t,n[e]]})}},{key:"renderChildren",value:function(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var e=this.getStyle("fill-rule");""!==t.fillStyle&&("inherit"===e.getString("inherit")?t.fill():t.fill(e.getString())),""!==t.strokeStyle&&t.stroke();var n=this.getMarkers();if(n){var r,i,a,o,s,u,l,c,h=n.length-1,f=this.getStyle("marker-start"),g=this.getStyle("marker-mid"),d=this.getStyle("marker-end");if(f.isUrlDefinition()&&(r=f.getDefinition(),a=(i=Rn(n[0],2))[0],o=i[1],r.render(t,a,o)),g.isUrlDefinition())for(var p=g.getDefinition(),y=1;y<h;y++){var v=Rn(n[y],2),m=v[0],b=v[1];p.render(t,m,b)}d.isUrlDefinition()&&(s=d.getDefinition(),l=(u=Rn(n[h],2))[0],c=u[1],s.render(t,l,c))}}},{key:"pathM",value:function(t,e){var n=this.pathParser,r=n.getAsCurrentPoint(),i=r.x,a=r.y;for(n.addMarker(r),e.addPoint(i,a),t&&t.moveTo(i,a),n.start=n.current;!n.isCommandOrEnd();){var o=n.getAsCurrentPoint(),s=o.x,u=o.y;n.addMarker(o,n.start),e.addPoint(s,u),t&&t.lineTo(s,u)}}},{key:"pathL",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getAsCurrentPoint(),a=i.x,o=i.y;n.addMarker(i,r),e.addPoint(a,o),t&&t.lineTo(a,o)}}},{key:"pathH",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=new Do((n.isRelativeCommand()?r.x:0)+n.getScalar(),r.y);n.addMarker(i,r),n.current=i,e.addPoint(i.x,i.y),t&&t.lineTo(i.x,i.y)}}},{key:"pathV",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=new Do(r.x,(n.isRelativeCommand()?r.y:0)+n.getScalar());n.addMarker(i,r),n.current=i,e.addPoint(i.x,i.y),t&&t.lineTo(i.x,i.y)}}},{key:"pathC",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getPoint(),a=n.getAsControlPoint(),o=n.getAsCurrentPoint();n.addMarker(o,a,i),e.addBezierCurve(r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}}},{key:"pathS",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getReflectedControlPoint(),a=n.getAsControlPoint(),o=n.getAsCurrentPoint();n.addMarker(o,a,i),e.addBezierCurve(r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y),t&&t.bezierCurveTo(i.x,i.y,a.x,a.y,o.x,o.y)}}},{key:"pathQ",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getAsControlPoint(),a=n.getAsCurrentPoint();n.addMarker(a,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,a.x,a.y),t&&t.quadraticCurveTo(i.x,i.y,a.x,a.y)}}},{key:"pathT",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getReflectedControlPoint();n.control=i;var a=n.getAsCurrentPoint();n.addMarker(a,i,i),e.addQuadraticCurve(r.x,r.y,i.x,i.y,a.x,a.y),t&&t.quadraticCurveTo(i.x,i.y,a.x,a.y)}}},{key:"pathA",value:function(t,e){for(var n=this.pathParser;!n.isCommandOrEnd();){var r=n.current,i=n.getScalar(),a=n.getScalar(),o=n.getScalar()*(A/180),s=n.getScalar(),u=n.getScalar(),l=n.getAsCurrentPoint(),c=new Do(C(o)*(r.x-l.x)/2+E(o)*(r.y-l.y)/2,-E(o)*(r.x-l.x)/2+C(o)*(r.y-l.y)/2),h=O(c.x,2)/O(i,2)+O(c.y,2)/O(a,2);1<h&&(i*=T(h),a*=T(h));var f=(s===u?-1:1)*T((O(i,2)*O(a,2)-O(i,2)*O(c.y,2)-O(a,2)*O(c.x,2))/(O(i,2)*O(c.y,2)+O(a,2)*O(c.x,2)));isNaN(f)&&(f=0);var g=new Do(f*i*c.y/a,f*-a*c.x/i),d=new Do((r.x+l.x)/2+C(o)*g.x-E(o)*g.y,(r.y+l.y)/2+E(o)*g.x+C(o)*g.y),p=N([1,0],[(c.x-g.x)/i,(c.y-g.y)/a]),y=[(c.x-g.x)/i,(c.y-g.y)/a],v=[(-c.x-g.x)/i,(-c.y-g.y)/a],m=N(y,v);V(y,v)<=-1&&(m=A),1<=V(y,v)&&(m=0);var b,x,w,k=1-u?1:-1,S=p+m/2*k,P=new Do(d.x+i*C(S),d.y+a*E(S));n.addMarkerAngle(P,S-k*A/2),n.addMarkerAngle(l,S-k*A),e.addPoint(l.x,l.y),!t||isNaN(p)||isNaN(m)||(b=a<i?i:a,x=a<i?1:i/a,w=a<i?a/i:1,t.translate(d.x,d.y),t.rotate(o),t.scale(x,w),t.arc(0,0,b,p,p+m,!!(1-u)),t.scale(1/x,1/w),t.rotate(-o),t.translate(-d.x,-d.y))}}},{key:"pathZ",value:function(t,e){var n=this.pathParser;t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath(),n.current=n.start}}]),il),Gu=(Uo(rl,Ru),Qr(rl,[{key:"clearContext",value:function(t){Xs(es(rl.prototype),"clearContext",this).call(this,t),this.document.screen.viewPort.removeCurrent()}},{key:"setContext",value:function(t){var e,n=this.document,r=n.screen,i=n.window,a=t.canvas;r.setDefaults(t),a.style&&void 0!==t.font&&i&&void 0!==i.getComputedStyle&&(t.font=i.getComputedStyle(a).getPropertyValue("font"),(e=new jo(n,"fontSize",Us.parse(t.font).fontSize)).hasValue()&&(n.rootEmSize=e.getPixels("y"),n.emSize=n.rootEmSize)),Xs(es(rl.prototype),"setContext",this).call(this,t),this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y"));var o=r.viewPort,s=o.width,u=o.height;this.getAttribute("width").hasValue()||this.getAttribute("width",!0).setValue("100%"),this.getAttribute("height").hasValue()||this.getAttribute("height",!0).setValue("100%");var l=this.getAttribute("refX"),c=this.getAttribute("refY"),h=this.getAttribute("viewBox"),f=h.hasValue()?L(h.getString()):null,g=!this.root&&"visible"!==this.getAttribute("overflow").getValue("hidden"),d=0,p=0,y=0,v=0;f&&(d=f[0],p=f[1]),this.root||(s=this.getAttribute("width").getPixels("x"),u=this.getAttribute("height").getPixels("y"),"marker"===this.type&&(y=d,v=p,p=d=0)),r.viewPort.setCurrent(s,u),f&&(s=f[2],u=f[3]),n.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:r.viewPort.width,desiredWidth:s,height:r.viewPort.height,desiredHeight:u,minX:d,minY:p,refX:l.getValue(),refY:c.getValue(),clip:g,clipX:y,clipY:v}),f&&(r.viewPort.removeCurrent(),r.viewPort.setCurrent(s,u))}},{key:"resize",value:function(t){var e,n,r,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],o=this.getAttribute("width",!0),s=this.getAttribute("height",!0),u=this.getAttribute("viewBox"),l=this.getAttribute("style"),c=o.getNumber(0),h=s.getNumber(0);a&&("string"==typeof a?this.getAttribute("preserveAspectRatio",!0).setValue(a):(e=this.getAttribute("preserveAspectRatio")).hasValue()&&e.setValue(e.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))),o.setValue(t),s.setValue(i),u.hasValue()||u.setValue("0 0 ".concat(c||t," ").concat(h||i)),l.hasValue()&&(n=this.getStyle("width"),r=this.getStyle("height"),n.hasValue()&&n.setValue("".concat(t,"px")),r.hasValue()&&r.setValue("".concat(i,"px")))}}]),rl),qu=(Uo(nl,$u),Qr(nl,[{key:"path",value:function(t){var e,n=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),i=this.getAttribute("width").getPixels("x"),a=this.getAttribute("height").getPixels("y"),o=this.getAttribute("rx"),s=this.getAttribute("ry"),u=o.getPixels("x"),l=s.getPixels("y");return o.hasValue()&&!s.hasValue()&&(l=u),s.hasValue()&&!o.hasValue()&&(u=l),u=B(u,i/2),l=B(l,a/2),t&&(e=(T(2)-1)/3*4,t.beginPath(),0<a&&0<i&&(t.moveTo(n+u,r),t.lineTo(n+i-u,r),t.bezierCurveTo(n+i-u+e*u,r,n+i,r+l-e*l,n+i,r+l),t.lineTo(n+i,r+a-l),t.bezierCurveTo(n+i,r+a-l+e*l,n+i-u+e*u,r+a,n+i-u,r+a),t.lineTo(n+u,r+a),t.bezierCurveTo(n+u-e*u,r+a,n,r+a-l+e*l,n,r+a-l),t.lineTo(n,r+l),t.bezierCurveTo(n,r+l-e*l,n+u-e*u,r,n+u,r),t.closePath())),new cu(n,r,n+i,r+a)}},{key:"getMarkers",value:function(){return null}}]),nl),Hu=(Uo(el,$u),Qr(el,[{key:"path",value:function(t){var e=this.getAttribute("cx").getPixels("x"),n=this.getAttribute("cy").getPixels("y"),r=this.getAttribute("r").getPixels();return t&&0<r&&(t.beginPath(),t.arc(e,n,r,0,2*A,!1),t.closePath()),new cu(e-r,n-r,e+r,n+r)}},{key:"getMarkers",value:function(){return null}}]),el),Wu=(Uo(tl,$u),Qr(tl,[{key:"path",value:function(t){var e=(T(2)-1)/3*4,n=this.getAttribute("rx").getPixels("x"),r=this.getAttribute("ry").getPixels("y"),i=this.getAttribute("cx").getPixels("x"),a=this.getAttribute("cy").getPixels("y");return t&&(t.beginPath(),t.moveTo(i+n,a),t.bezierCurveTo(i+n,a+e*r,i+e*n,a+r,i,a+r),t.bezierCurveTo(i-e*n,a+r,i-n,a+e*r,i-n,a),t.bezierCurveTo(i-n,a-e*r,i-e*n,a-r,i,a-r),t.bezierCurveTo(i+e*n,a-r,i+n,a-e*r,i+n,a),t.closePath()),new cu(i-n,a-r,i+n,a+r)}},{key:"getMarkers",value:function(){return null}}]),tl),Xu=(Uo(Ju,$u),Qr(Ju,[{key:"getPoints",value:function(){return[new Do(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new Do(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}},{key:"path",value:function(t){var e=this.getPoints(),n=Rn(e,2),r=n[0],i=r.x,a=r.y,o=n[1],s=o.x,u=o.y;return t&&(t.beginPath(),t.moveTo(i,a),t.lineTo(s,u)),new cu(i,a,s,u)}},{key:"getMarkers",value:function(){var t=this.getPoints(),e=Rn(t,2),n=e[0],r=e[1],i=n.angleTo(r);return[[n,i],[r,i]]}}]),Ju),Uu=(Uo(Ku,$u),Qr(Ku,[{key:"path",value:function(r){var t=this.points,e=Rn(t,1)[0],n=e.x,i=e.y,a=new cu(n,i);return r&&(r.beginPath(),r.moveTo(n,i)),t.forEach(function(t){var e=t.x,n=t.y;a.addPoint(e,n),r&&r.lineTo(e,n)}),a}},{key:"getMarkers",value:function(){var n=this.points,r=n.length-1,i=[];return n.forEach(function(t,e){e===r||i.push([t,t.angleTo(n[e+1])])}),0<i.length&&i.push([n[n.length-1],i[i.length-1][1]]),i}}]),Ku),Yu=(Uo(Zu,Uu),Qr(Zu,[{key:"path",value:function(t){var e=Xs(es(Zu.prototype),"path",this).call(this,t),n=Rn(this.points,1)[0],r=n.x,i=n.y;return t&&(t.lineTo(r,i),t.closePath()),e}}]),Zu),Qu=It.f;function Zu(){var t;return Yr(this,Zu),(t=Xo(this,es(Zu).apply(this,arguments))).type="polygon",t}function Ku(t,e,n){var r;return Yr(this,Ku),(r=Xo(this,es(Ku).call(this,t,e,n))).type="polyline",r.points=[],r.points=Do.parsePath(r.getAttribute("points").getString()),r}function Ju(){var t;return Yr(this,Ju),(t=Xo(this,es(Ju).apply(this,arguments))).type="line",t}function tl(){var t;return Yr(this,tl),(t=Xo(this,es(tl).apply(this,arguments))).type="ellipse",t}function el(){var t;return Yr(this,el),(t=Xo(this,es(el).apply(this,arguments))).type="circle",t}function nl(){var t;return Yr(this,nl),(t=Xo(this,es(nl).apply(this,arguments))).type="rect",t}function rl(){var t;return Yr(this,rl),(t=Xo(this,es(rl).apply(this,arguments))).type="svg",t.root=!1,t}function il(t,e,n){var r;return Yr(this,il),(r=Xo(this,es(il).call(this,t,e,n))).type="path",r.pathParser=null,r.pathParser=new _u(r.getAttribute("d").getString()),r}function al(t){Yr(this,al),this.control=null,this.start=null,this.current=null,this.command="",this.tokens=[],this.i=-1,this.previousCommand="",this.points=[],this.angles=[],this.tokens=F(t.replace(/,/gm," ").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2").replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2").replace(/([0-9])([+\-])/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/(\.[0-9]*)(\.)/gm,"$1 $2").replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ")).trim().split(" ")}oe({target:"Reflect",stat:!0},{deleteProperty:function(t,e){var n=Qu(lt(t),e);return(!n||n.configurable)&&delete t[e]}});var ol=(Uo(Al,Ds),Qr(Al,[{key:"createPattern",value:function(t,e,n){var r=this.getAttribute("width").getPixels("x",!0),i=this.getAttribute("height").getPixels("y",!0),a=new Gu(this.document,null);a.attributes.viewBox=new jo(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.width=new jo(this.document,"width","".concat(r,"px")),a.attributes.height=new jo(this.document,"height","".concat(i,"px")),a.attributes.transform=new jo(this.document,"transform",this.getAttribute("patternTransform").getValue()),a.children=this.children;var o=this.document.createCanvas(r,i),s=o.getContext("2d"),u=this.getAttribute("x"),l=this.getAttribute("y");u.hasValue()&&l.hasValue()&&s.translate(u.getPixels("x",!0),l.getPixels("y",!0)),n.hasValue()?this.styles["fill-opacity"]=n:Reflect.deleteProperty(this.styles,"fill-opacity");for(var c=-1;c<=1;c++)for(var h=-1;h<=1;h++)s.save(),a.attributes.x=new jo(this.document,"x",c*o.width),a.attributes.y=new jo(this.document,"y",h*o.height),a.render(s),s.restore();return t.createPattern(o,"repeat")}}]),Al),sl=(Uo(Pl,Ds),Qr(Pl,[{key:"render",value:function(t,e,n){var r,i,a,o,s;e&&(r=e.x,i=e.y,a=this.getAttribute("orient").getValue("auto"),o=this.getAttribute("markerUnits").getValue("strokeWidth"),t.translate(r,i),"auto"===a&&t.rotate(n),"strokeWidth"===o&&t.scale(t.lineWidth,t.lineWidth),t.save(),(s=new Gu(this.document,null)).type=this.type,s.attributes.viewBox=new jo(this.document,"viewBox",this.getAttribute("viewBox").getValue()),s.attributes.refX=new jo(this.document,"refX",this.getAttribute("refX").getValue()),s.attributes.refY=new jo(this.document,"refY",this.getAttribute("refY").getValue()),s.attributes.width=new jo(this.document,"width",this.getAttribute("markerWidth").getValue()),s.attributes.height=new jo(this.document,"height",this.getAttribute("markerHeight").getValue()),s.attributes.overflow=new jo(this.document,"overflow",this.getAttribute("overflow").getValue()),s.attributes.fill=new jo(this.document,"fill",this.getAttribute("fill").getValue("black")),s.attributes.stroke=new jo(this.document,"stroke",this.getAttribute("stroke").getValue("none")),s.children=this.children,s.render(t),t.restore(),"strokeWidth"===o&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===a&&t.rotate(-n),t.translate(-r,-i))}}]),Pl),ul=(Uo(Sl,Ds),Qr(Sl,[{key:"render",value:function(){}}]),Sl),ll=(Uo(kl,Ru),Qr(kl,[{key:"getBoundingBox",value:function(e){var n=new cu;return this.children.forEach(function(t){n.addBoundingBox(t.getBoundingBox(e))}),n}}]),kl),cl=(Uo(wl,Ds),Qr(wl,[{key:"getGradientUnits",value:function(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}},{key:"createGradient",value:function(t,e,n){var r=this,i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var a=i.stops,o=this.getGradient(t,e);if(!o)return this.addParentOpacity(n,a[a.length-1].color);if(a.forEach(function(t){o.addColorStop(t.offset,r.addParentOpacity(n,t.color))}),this.getAttribute("gradientTransform").hasValue()){var s=this.document,u=s.screen,l=u.MAX_VIRTUAL_PIXELS,c=u.viewPort,h=Rn(c.viewPorts,1)[0],f=new qu(s,null);f.attributes.x=new jo(s,"x",-l/3),f.attributes.y=new jo(s,"y",-l/3),f.attributes.width=new jo(s,"width",l),f.attributes.height=new jo(s,"height",l);var g=new ll(s,null);g.attributes.transform=new jo(s,"transform",this.getAttribute("gradientTransform").getValue()),g.children=[f];var d=new Gu(s,null);d.attributes.x=new jo(s,"x",0),d.attributes.y=new jo(s,"y",0),d.attributes.width=new jo(s,"width",h.width),d.attributes.height=new jo(s,"height",h.height),d.children=[g];var p=s.createCanvas(h.width,h.height),y=p.getContext("2d");return y.fillStyle=o,d.render(y),y.createPattern(p,"no-repeat")}return o}},{key:"inheritStopContainer",value:function(e){var n=this;this.attributesToInherit.forEach(function(t){!n.getAttribute(t).hasValue()&&e.getAttribute(t).hasValue()&&n.getAttribute(t,!0).setValue(e.getAttribute(t).getValue())})}},{key:"addParentOpacity",value:function(t,e){return t.hasValue()?new jo(this.document,"color",e).addOpacity(t).getString():e}}]),wl),hl=(Uo(xl,cl),Qr(xl,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits(),r=n?e.getBoundingBox(t):null;if(n&&!r)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var i=n?r.x+r.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),a=n?r.y+r.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),o=n?r.x+r.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),s=n?r.y+r.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return i===o&&a===s?null:t.createLinearGradient(i,a,o,s)}}]),xl),fl=(Uo(bl,cl),Qr(bl,[{key:"getGradient",value:function(t,e){var n="objectBoundingBox"===this.getGradientUnits(),r=e.getBoundingBox(t);if(n&&!r)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var i=n?r.x+r.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),a=n?r.y+r.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=i,s=a;this.getAttribute("fx").hasValue()&&(o=n?r.x+r.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(s=n?r.y+r.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var u=n?(r.width+r.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),l=this.getAttribute("fr").getPixels();return t.createRadialGradient(o,s,l,i,a,u)}}]),bl),gl=(Uo(ml,Ds),ml),dl="Array Iterator",pl=pe.set,yl=pe.getterFor(dl),vl=ks(Array,"Array",function(t,e){pl(this,{type:dl,target:it(t),index:0,kind:e})},function(){var t=yl(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");function ml(t,e,n){var r;Yr(this,ml),(r=Xo(this,es(ml).call(this,t,e,n))).type="stop";var i=M(0,B(1,r.getAttribute("offset").getNumber())),a=r.getStyle("stop-opacity"),o=r.getStyle("stop-color",!0);return""===o.getString()&&o.setValue("#000"),a.hasValue()&&(o=o.addOpacity(a)),r.offset=i,r.color=o.getString(),r}function bl(t,e,n){var r;return Yr(this,bl),(r=Xo(this,es(bl).call(this,t,e,n))).type="radialGradient",r.attributesToInherit.push("cx","cy","r","fx","fy","fr"),r}function xl(t,e,n){var r;return Yr(this,xl),(r=Xo(this,es(xl).call(this,t,e,n))).type="linearGradient",r.attributesToInherit.push("x1","y1","x2","y2"),r}function wl(t,e,n){var r;Yr(this,wl),(r=Xo(this,es(wl).call(this,t,e,n))).attributesToInherit=["gradientUnits"],r.stops=[];var i=Wo(r),a=i.stops;return i.children.forEach(function(t){"stop"===t.type&&a.push(t)}),r}function kl(){var t;return Yr(this,kl),(t=Xo(this,es(kl).apply(this,arguments))).type="g",t}function Sl(){var t;return Yr(this,Sl),(t=Xo(this,es(Sl).apply(this,arguments))).type="defs",t}function Pl(){var t;return Yr(this,Pl),(t=Xo(this,es(Pl).apply(this,arguments))).type="marker",t}function Al(){var t;return Yr(this,Al),(t=Xo(this,es(Al).apply(this,arguments))).type="pattern",t}Ci.Arguments=Ci.Array,ss("keys"),ss("values"),ss("entries");var El=ce("iterator"),Cl=ce("toStringTag"),Tl=vl.values;for(var Ol in Hr){var Vl=kt[Ol],Ll=Vl&&Vl.prototype;if(Ll){if(Ll[El]!==Tl)try{Mt(Ll,El,Tl)}catch(t){Ll[El]=Tl}if(Ll[Cl]||Mt(Ll,Cl,Ol),Hr[Ol])for(var Nl in vl)if(Ll[Nl]!==vl[Nl])try{Mt(Ll,Nl,vl[Nl])}catch(t){Ll[Nl]=vl[Nl]}}}var Rl=(Uo(Ml,Ds),Qr(Ml,[{key:"getProperty",value:function(){var t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}},{key:"calcValue",value:function(){var t=this.initialUnits,e=this.getProgress(),n=e.progress,r=e.from,i=e.to,a=r.getNumber()+(i.getNumber()-r.getNumber())*n;return"%"===t&&(a*=100),"".concat(a).concat(t)}},{key:"update",value:function(t){var e=this.parent,n=this.getProperty();if(this.initialValue||(this.initialValue=n.getString(),this.initialUnits=n.getUnits()),this.duration>this.maxDuration){var r=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==r||this.frozen){if("remove"===r&&!this.removed)return this.removed=!0,n.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e.animationFrozen=!0,e.animationFrozenValue=n.getString();return!1}this.duration+=t;var i,a,o,s=!1;return this.begin<this.duration&&(o=this.calcValue(),(i=this.getAttribute("type")).hasValue()&&(a=i.getString(),o="".concat(a,"(").concat(o,")")),n.setValue(o),s=!0),s}},{key:"getProgress",value:function(){var t,e,n,r=this.document,i=this.values,a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};return i.hasValue()?(t=a.progress*(i.getValue().length-1),e=g(t),n=o(t),a.from=new jo(r,"from",parseFloat(i.getValue()[e])),a.to=new jo(r,"to",parseFloat(i.getValue()[n])),a.progress=(t-e)/(n-e)):(a.from=this.from,a.to=this.to),a}}]),Ml),jl=en.trim,Il=kt.parseInt,zl=/^[+-]?0[Xx]/,Dl=8!==Il("\t\n\v\f\r                　\u2028\u2029\ufeff08")||22!==Il("\t\n\v\f\r                　\u2028\u2029\ufeff0x16")?function(t,e){var n=jl(t+"");return Il(n,e>>>0||(zl.test(n)?16:10))}:Il;function Ml(t,e,n){var r;return Yr(this,Ml),(r=Xo(this,es(Ml).call(this,t,e,n))).type="animate",r.duration=0,r.initialValue=null,r.initialUnits="",r.removed=!1,r.frozen=!1,t.screen.animations.push(Wo(r)),r.begin=r.getAttribute("begin").getMilliseconds(),r.maxDuration=r.begin+r.getAttribute("dur").getMilliseconds(),r.from=r.getAttribute("from"),r.to=r.getAttribute("to"),r.values=r.getAttribute("values"),r.values.hasValue()&&r.values.setValue(r.values.getString().split(";")),r}oe({global:!0,forced:parseInt!=Dl},{parseInt:Dl});var Bl,Fl,_l,$l,Gl,ql,Hl=(Uo(Ql,Rl),Qr(Ql,[{key:"calcValue",value:function(){var t=this.getProgress(),e=t.progress,n=t.from,r=t.to,i=new Ro(n.getString()),a=new Ro(r.getString());if(i.ok&&a.ok){var o=i.r+(a.r-i.r)*e,s=i.g+(a.g-i.g)*e,u=i.b+(a.b-i.b)*e;return"rgb(".concat(parseInt(o,10),", ").concat(parseInt(s,10),", ").concat(parseInt(u,10),")")}return this.getAttribute("from").getString()}}]),Ql),Wl=(Uo(Yl,Rl),Qr(Yl,[{key:"calcValue",value:function(){var t=this.getProgress(),n=t.progress,e=t.from,r=t.to,i=L(e.getString()),a=L(r.getString());return i.map(function(t,e){return t+(a[e]-t)*n}).join(" ")}}]),Yl),Xl=Dt.f,Ul=kt.Symbol;function Yl(){var t;return Yr(this,Yl),(t=Xo(this,es(Yl).apply(this,arguments))).type="animateTransform",t}function Ql(){var t;return Yr(this,Ql),(t=Xo(this,es(Ql).apply(this,arguments))).type="animateColor",t}!St||"function"!=typeof Ul||"description"in Ul.prototype&&void 0===Ul().description||(Bl={},ie(Fl=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:arguments[0]+"",e=this instanceof Fl?new Ul(t):void 0===t?Ul():Ul(t);return""===t&&(Bl[e]=!0),e},Ul),(_l=Fl.prototype=Ul.prototype).constructor=Fl,$l=_l.toString,Gl="Symbol(test)"==Ul("test")+"",ql=/^Symbol\((.*)\)[^)]+$/,Xl(_l,"description",{configurable:!0,get:function(){var t=at(this)?this.valueOf():this,e=$l.call(t);if(st(Bl,t))return"";var n=Gl?e.slice(7,-1):e.replace(ql,"$1");return""===n?void 0:n}}),oe({global:!0,forced:!0},{Symbol:Fl})),Yn("iterator");var Zl,Kl,Jl,tc,ec,nc,rc,ic,ac,oc,sc,uc,lc,cc,hc,fc,gc,dc,pc=(Uo(Gc,Ds),Qr(Gc,[{key:"render",value:function(){}}]),Gc),yc=(Uo($c,Ds),$c),vc=(Uo(_c,$u),_c),mc=(Uo(Fc,$u),Fc),bc=(Uo(Bc,ju),Qr(Bc,[{key:"getText",value:function(){var t=this.getHrefAttribute().getDefinition();if(t){var e=t.children[0];if(e)return e.getText()}return""}}]),Bc),xc=(Uo(Mc,ju),Qr(Mc,[{key:"getText",value:function(){return this.text}},{key:"renderChildren",value:function(t){var e,n,r,i,a,o;this.hasText?(Xs(es(Mc.prototype),"renderChildren",this).call(this,t),e=this.document,n=this.x,r=this.y,i=e.screen.mouse,a=new jo(e,"fontSize",Us.parse(e.ctx.font).fontSize),i.isWorking()&&i.checkBoundingBox(this,new cu(n,r-a.getPixels("y"),n+this.measureText(t),r))):0<this.children.length&&((o=new ll(this.document,null)).children=this.children,o.parent=this,o.render(t))}},{key:"onClick",value:function(){var t=this.document.window;t&&t.open(this.getHrefAttribute().getString())}},{key:"onMouseMove",value:function(){this.document.ctx.canvas.style.cursor="pointer"}}]),Mc),wc=!tt(function(){return Object.isExtensible(Object.preventExtensions({}))}),kc=n(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=Dt.f,r=ht("meta"),i=0,a=Object.isExtensible||function(){return!0},o=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!at(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!st(t,r)){if(!a(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!st(t,r)){if(!a(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return wc&&o.REQUIRED&&a(t)&&!st(t,r)&&n(t),t}};Yt[r]=!0}),Sc=(kc.REQUIRED,kc.fastKey,kc.getWeakData,kc.onFreeze,Dt.f),Pc=kc.fastKey,Ac=pe.set,Ec=pe.getterFor,Cc=(ec=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},nc={getConstructor:function(t,n,r,i){function a(t,e,n){var r,i,a=s(t),o=u(t,e);return o?o.value=n:(a.last=o={index:i=Pc(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=o),r&&(r.next=o),St?a.size++:t.size++,"F"!==i&&(a.index[i]=o)),t}var o=t(function(t,e){wi(t,o,n),Ac(t,{type:n,index:Un(null),first:void 0,last:void 0,size:0}),St||(t.size=0),null!=e&&Li(e,t[i],t,r)}),s=Ec(n),u=function(t,e){var n,r=s(t),i=Pc(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return bi(o.prototype,{clear:function(){for(var t=s(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,St?t.size=0:this.size=0},delete:function(t){var e,n,r=s(this),i=u(this,t);return i&&(e=i.next,n=i.previous,delete r.index[i.index],i.removed=!0,n&&(n.next=e),e&&(e.previous=n),r.first==i&&(r.first=e),r.last==i&&(r.last=n),St?r.size--:this.size--),!!i},forEach:function(t){for(var e,n=s(this),r=ue(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),bi(o.prototype,r?{get:function(t){var e=u(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),St&&Sc(o.prototype,"size",{get:function(){return s(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",i=Ec(e),a=Ec(r);ks(t,e,function(t,e){Ac(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=a(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),xi(e)}},uc=-1!==(tc="Map").indexOf("Map"),lc=-1!==tc.indexOf("Weak"),cc=uc?"set":"add",hc=kt.Map,fc=hc&&hc.prototype,dc={},Ve(tc,"function"!=typeof(gc=hc)||!(lc||fc.forEach&&!tt(function(){(new hc).entries().next()})))?(gc=nc.getConstructor(ec,tc,uc,cc),kc.REQUIRED=!0):Ve(tc,!0)&&(ic=(rc=new gc)[cc](lc?{}:-0,1)!=rc,ac=tt(function(){rc.has(1)}),oc=zi(function(t){new hc(t)}),sc=!lc&&tt(function(){for(var t=new hc,e=5;e--;)t[cc](e,e);return!t.has(-0)}),oc||(((gc=ec(function(t,e){wi(t,gc,tc);var n=Qs(new hc,t,gc);return null!=e&&Li(e,n[cc],n,uc),n})).prototype=fc).constructor=gc),(ac||sc)&&(Dc("delete"),Dc("has"),uc&&Dc("get")),(sc||ic)&&Dc(cc),lc&&fc.clear&&delete fc.clear),dc.Map=gc,oe({global:!0,forced:gc!=hc},dc),Qn(gc,tc),lc||nc.setStrong(gc,tc,uc),Uo(zc,ju),Qr(zc,[{key:"getText",value:function(){return this.text}},{key:"path",value:function(d){var t=this.dataArray;d&&d.beginPath(),t.forEach(function(t){var e=t.command,n=t.points;switch(e){case"L":d&&d.lineTo(n[0],n[1]);break;case"M":d&&d.moveTo(n[0],n[1]);break;case"C":d&&d.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5]);break;case"Q":d&&d.quadraticCurveTo(n[0],n[1],n[2],n[3]);break;case"A":var r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=o<a?a:o,f=o<a?1:a/o,g=o<a?o/a:1;d&&(d.translate(r,i),d.rotate(l),d.scale(f,g),d.arc(0,0,h,s,s+u,!!(1-c)),d.scale(1/f,1/g),d.rotate(-l),d.translate(-r,-i));break;case"z":d&&d.closePath()}})}},{key:"renderChildren",value:function(a){this.setTextData(a),a.save();var o=this.parent.getStyle("text-decoration").getString(),s=this.getFontSize(),u=this.glyphInfo,t=a.fillStyle;"underline"===o&&a.beginPath(),u.forEach(function(t,e){var n=t.p0,r=t.p1,i=t.text;a.save(),a.translate(n.x,n.y),a.rotate(u[e].rotation),a.fillStyle&&a.fillText(i,0,0),a.strokeStyle&&a.strokeText(i,0,0),a.restore(),"underline"===o&&(0===e&&a.moveTo(n.x,n.y+s/8),a.lineTo(r.x,r.y+s/5))}),"underline"===o&&(a.lineWidth=s/20,a.strokeStyle=t,a.stroke(),a.closePath()),a.restore()}},{key:"getLetterSpacingAt",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[t]||0}},{key:"findSegmentToFitChar",value:function(t,e,n,r,i,a,o,s){var u=a,l=this.measureText(t,o);" "===o&&"justify"===e&&n<r&&(l+=(r-n)/i),-1<s&&(u+=this.getLetterSpacingAt(s));var c=this.textHeight/20,h={p0:this.getEquidistantPointOnPath(u,c),p1:this.getEquidistantPointOnPath(u+l,c)};return{offset:u+=l,segment:h}}},{key:"measureText",value:function(t,e){var n=this.measuresCache,r=e||this.getText();if(n.has(r))return n.get(r);var i=this.measureTargetText(t,r);return n.set(r,i),i}},{key:"setTextData",value:function(u){var l=this;if(!this.glyphInfo){var t=this.getText(),c=t.split(""),h=t.split(" ").length-1,e=L(this.parent.getAttribute("dx").getString("0")),f=this.parent.getStyle("text-anchor").getString("start"),n=this.getStyle("letter-spacing"),r=this.parent.getStyle("letter-spacing"),i=0;n.hasValue()&&"inherit"!==n.getValue()?n.hasValue()&&"initial"!==n.getValue()&&"unset"!==n.getValue()&&(i=n.getPixels()):i=r.getPixels();var a=[],o=t.length;this.letterSpacingCache=a;for(var s=0;s<o;s++)a.push(void 0===e[s]?i:e[s]);var g=a.reduce(function(t,e){return t+e||0},0);this.textWidth=this.measureText(u),this.textHeight=this.getFontSize();var d=M(this.textWidth+g,0);this.glyphInfo=[];var p=this.getPathLength(),y=this.getStyle("startOffset").getNumber(0)*p,v="end"!==f&&"right"!==f?"middle"!==f&&"center"!==f?0:-d/2:-d;v+=y,c.forEach(function(t,e){var n,r,i,a=l.findSegmentToFitChar(u,f,d,p,h,v,t,e),o=a.offset,s=a.segment;v=o,s.p0&&s.p1&&(n=l.getLineLength(s.p0.x,s.p0.y,s.p1.x,s.p1.y),r=l.getPointOnLine(0+n/2,s.p0.x,s.p0.y,s.p1.x,s.p1.y),i=m(s.p1.y-s.p0.y,s.p1.x-s.p0.x),l.glyphInfo.push({transposeX:r.x,transposeY:r.y,text:c[e],p0:s.p0,p1:s.p1,rotation:i}))})}}},{key:"parsePathData",value:function(t){if(this.pathLength=-1,!t)return[];var e=[],n=t.pathParser;for(n.reset();!n.isEnd();){var r=n.current,i=r?r.x:0,a=r?r.y:0,o="",s=[];n.nextCommand();var u=n.command.toUpperCase();switch(n.command){case"M":case"m":o=this.pathM(n,s);break;case"L":case"l":o=this.pathL(n,s);break;case"H":case"h":o=this.pathH(n,s);break;case"V":case"v":o=this.pathV(n,s);break;case"C":case"c":this.pathC(n,s);break;case"S":case"s":o=this.pathS(n,s);break;case"Q":case"q":this.pathQ(n,s);break;case"T":case"t":o=this.pathT(n,s);break;case"A":case"a":s=this.pathA(n);break;case"Z":case"z":n.current=n.start}"Z"===u?e.push({command:"z",points:[],pathLength:0}):e.push({command:o||u,points:s,start:{x:i,y:a},pathLength:this.calcLength(i,a,o||u,s)})}return e}},{key:"pathM",value:function(t,e){var n=t.getAsCurrentPoint();for(e.push(n.x,n.y),t.start=t.current;!t.isCommandOrEnd();){var r=t.getAsCurrentPoint();return e.push(r.x,r.y),"L"}}},{key:"pathL",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getAsCurrentPoint();e.push(n.x,n.y)}return"L"}},{key:"pathH",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.current,r=new Do((t.isRelativeCommand()?n.x:0)+t.getScalar(),n.y);e.push(r.x,r.y),t.current=r}return"L"}},{key:"pathV",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.current,r=new Do(n.x,(t.isRelativeCommand()?n.y:0)+t.getScalar());e.push(r.x,r.y),t.current=r}return"L"}},{key:"pathC",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getPoint(),r=t.getAsControlPoint(),i=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y,i.x,i.y)}}},{key:"pathS",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getReflectedControlPoint(),r=t.getAsControlPoint(),i=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y,i.x,i.y)}return"C"}},{key:"pathQ",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getAsControlPoint(),r=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y)}}},{key:"pathT",value:function(t,e){for(;!t.isCommandOrEnd();){var n=t.getReflectedControlPoint();t.control=n;var r=t.getAsCurrentPoint();e.push(n.x,n.y,r.x,r.y)}return"Q"}},{key:"pathA",value:function(t){for(;!t.isCommandOrEnd();){var e=t.current,n=t.getScalar(),r=t.getScalar(),i=t.getScalar()*(A/180),a=t.getScalar(),o=t.getScalar(),s=t.getAsCurrentPoint(),u=new Do(C(i)*(e.x-s.x)/2+E(i)*(e.y-s.y)/2,-E(i)*(e.x-s.x)/2+C(i)*(e.y-s.y)/2),l=O(u.x,2)/O(n,2)+O(u.y,2)/O(r,2);1<l&&(n*=T(l),r*=T(l));var c=(a===o?-1:1)*T((O(n,2)*O(r,2)-O(n,2)*O(u.y,2)-O(r,2)*O(u.x,2))/(O(n,2)*O(u.y,2)+O(r,2)*O(u.x,2)));isNaN(c)&&(c=0);var h=new Do(c*n*u.y/r,c*-r*u.x/n),f=new Do((e.x+s.x)/2+C(i)*h.x-E(i)*h.y,(e.y+s.y)/2+E(i)*h.x+C(i)*h.y),g=N([1,0],[(u.x-h.x)/n,(u.y-h.y)/r]),d=[(u.x-h.x)/n,(u.y-h.y)/r],p=[(-u.x-h.x)/n,(-u.y-h.y)/r],y=N(d,p);return V(d,p)<=-1&&(y=A),1<=V(d,p)&&(y=0),0===o&&0<y&&(y-=2*A),1===o&&y<0&&(y+=2*A),[f.x,f.y,n,r,g,y,i,o]}}},{key:"calcLength",value:function(t,e,n,r){var i=Math.abs,a=0,o=null,s=null,u=0;switch(n){case"L":return this.getLineLength(t,e,r[0],r[1]);case"C":for(a=0,o=this.getPointOnCubicBezier(0,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),u=.01;u<=1;u+=.01)s=this.getPointOnCubicBezier(u,t,e,r[0],r[1],r[2],r[3],r[4],r[5]),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"Q":for(a=0,o=this.getPointOnQuadraticBezier(0,t,e,r[0],r[1],r[2],r[3]),u=.01;u<=1;u+=.01)s=this.getPointOnQuadraticBezier(u,t,e,r[0],r[1],r[2],r[3]),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return a;case"A":a=0;var l=r[4],c=r[5],h=r[4]+c,f=A/180;if(i(l-h)<f&&(f=i(l-h)),o=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],l,0),c<0)for(u=l-f;h<u;u-=f)s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;else for(u=l+f;u<h;u+=f)s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],u,0),a+=this.getLineLength(o.x,o.y,s.x,s.y),o=s;return s=this.getPointOnEllipticalArc(r[0],r[1],r[2],r[3],h,0),a+=this.getLineLength(o.x,o.y,s.x,s.y)}return 0}},{key:"getPointOnLine",value:function(t,e,n,r,i){var a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:e,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:n,s=(i-n)/(r-e+_n),u=T(t*t/(1+s*s));r<e&&(u*=-1);var l=s*u,c=null;if(r===e)c={x:a,y:o+l};else if((o-n)/(a-e+_n)==s)c={x:a+u,y:o+l};else{var h=this.getLineLength(e,n,r,i);if(h<_n)return null;var f=(a-e)*(r-e)+(o-n)*(i-n),g=e+(f/=h*h)*(r-e),d=n+f*(i-n),p=this.getLineLength(a,o,g,d),y=T(t*t-p*p),u=T(y*y/(1+s*s));r<e&&(u*=-1),c={x:g+u,y:d+(l=s*u)}}return c}},{key:"getPointOnPath",value:function(t){var e=this.getPathLength(),n=0,r=null;if(t<-5e-5||e<t-5e-5)return null;var i=this.dataArray,a=!0,o=!1,s=void 0;try{for(var u,l,c=i[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){if(!(l=u.value)||!(l.pathLength<5e-5||n+l.pathLength+5e-5<t)){var h=t-n,f=0;switch(l.command){case"L":r=this.getPointOnLine(h,l.start.x,l.start.y,l.points[0],l.points[1],l.start.x,l.start.y);break;case"A":var g=l.points[4],d=l.points[5],p=l.points[4]+d,f=g+h/l.pathLength*d;if(d<0&&f<p||0<=d&&p<f)break;r=this.getPointOnEllipticalArc(l.points[0],l.points[1],l.points[2],l.points[3],f,l.points[6]);break;case"C":1<(f=h/l.pathLength)&&(f=1),r=this.getPointOnCubicBezier(f,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3],l.points[4],l.points[5]);break;case"Q":1<(f=h/l.pathLength)&&(f=1),r=this.getPointOnQuadraticBezier(f,l.start.x,l.start.y,l.points[0],l.points[1],l.points[2],l.points[3])}if(r)return r;break}n+=l.pathLength}}catch(t){o=!0,s=t}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return null}},{key:"getLineLength",value:function(t,e,n,r){return T((n-t)*(n-t)+(r-e)*(r-e))}},{key:"getPathLength",value:function(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(function(t,e){return 0<e.pathLength?t+e.pathLength:t},0)),this.pathLength}},{key:"getPointOnCubicBezier",value:function(t,e,n,r,i,a,o,s,u){return{x:s*f(t)+a*d(t)+r*p(t)+e*y(t),y:u*f(t)+o*d(t)+i*p(t)+n*y(t)}}},{key:"getPointOnQuadraticBezier",value:function(t,e,n,r,i,a,o){return{x:a*v(t)+r*x(t)+e*w(t),y:o*v(t)+i*x(t)+n*w(t)}}},{key:"getPointOnEllipticalArc",value:function(t,e,n,r,i,a){var o=C(a),s=E(a),u=n*C(i),l=r*E(i);return{x:t+(u*o-l*s),y:e+(u*s+l*o)}}},{key:"buildEquidistantCache",value:function(t,e){var n=this.getPathLength(),r=e||.25,i=t||n/100;if(!this.equidistantCache||this.equidistantCache.step!==i||this.equidistantCache.precision!==r){this.equidistantCache={step:i,precision:r,points:[]};for(var a=0,o=0;o<=n;o+=r){var s=this.getPointOnPath(o),u=this.getPointOnPath(o+r);s&&u&&i<=(a+=this.getLineLength(s.x,s.y,u.x,u.y))&&(this.equidistantCache.points.push({x:s.x,y:s.y,distance:o}),a-=i)}}}},{key:"getEquidistantPointOnPath",value:function(t,e,n){if(this.buildEquidistantCache(e,n),t<0||5e-5<t-this.getPathLength())return null;var r=i(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[r]||null}}]),zc),Tc=(Uo(Ic,Ru),Qr(Ic,[{key:"loadImage",value:(Jl=Jr(Kr.mark(function t(e){var n;return Kr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.createImage(e);case 3:n=t.sent,this.image=n,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error('ERROR: image "'.concat(e,'" not found'),t.t0);case 10:this.loaded=!0;case 11:case"end":return t.stop()}},t,this,[[0,7]])})),function(){return Jl.apply(this,arguments)})},{key:"loadSvg",value:(Kl=Jr(Kr.mark(function t(e){var n,r;return Kr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.document.fetch(e);case 3:return n=t.sent,t.next=6,n.text();case 6:r=t.sent,this.image=r,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error('ERROR: image "'.concat(e,'" not found'),t.t0);case 13:this.loaded=!0;case 14:case"end":return t.stop()}},t,this,[[0,10]])})),function(){return Kl.apply(this,arguments)})},{key:"renderChildren",value:function(t){var e,n=this.document,r=this.getAttribute("x").getPixels("x"),i=this.getAttribute("y").getPixels("y"),a=this.getAttribute("width").getPixels("x"),o=this.getAttribute("height").getPixels("y");a&&o&&(t.save(),this.isSvg?n.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:r,offsetY:i,scaleWidth:a,scaleHeight:o}).render():(e=this.image,t.translate(r,i),n.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:a,desiredWidth:e.width,height:o,desiredHeight:e.height}),this.loaded&&(void 0===e.complete||e.complete)&&t.drawImage(e,0,0)),t.restore())}},{key:"getBoundingBox",value:function(){var t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),n=this.getAttribute("width").getPixels("x"),r=this.getAttribute("height").getPixels("y");return new cu(t,e,t+n,e+r)}}]),Ic),Oc=(Uo(jc,Ru),Qr(jc,[{key:"render",value:function(){}}]),jc),Vc=(Qr(Rc,[{key:"load",value:(Zl=Jr(Kr.mark(function t(n,e){var r,i,a;return Kr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=this.document,t.next=4,r.canvg.parser.load(e);case 4:i=t.sent,a=i.getElementsByTagName("font"),Array.from(a).forEach(function(t){var e=r.createElement(t);r.definitions[n]=e}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error('ERROR: font "'.concat(e,'" not found'),t.t0);case 12:this.loaded=!0;case 13:case"end":return t.stop()}},t,this,[[0,9]])})),function(){return Zl.apply(this,arguments)})}]),Rc),Lc=(Uo(Nc,Ds),Nc);function Nc(a,t,e){var n;return Yr(this,Nc),(n=Xo(this,es(Nc).call(this,a,t,e))).type="style",F(Array.from(t.childNodes).map(function(t){return t.data}).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"")).split("}").forEach(function(t){var e,n,r,i=t.trim();i&&(n=(e=i.split("{"))[0].split(","),r=e[1].split(";"),n.forEach(function(t){var i,n,e=t.trim();e&&(i=a.styles[e]||{},r.forEach(function(t){var e=t.indexOf(":"),n=t.substr(0,e).trim(),r=t.substr(e+1,t.length-e).trim();n&&r&&(i[n]=new jo(a,n,r))}),a.styles[e]=i,a.stylesSpecificity[e]=h(e),"@font-face"===e&&(n=i["font-family"].getString().replace(/"|'/g,""),i.src.getString().split(",").forEach(function(t){var e;0<t.indexOf('format("svg")')&&((e=c(t))&&new Vc(a).load(n,e))})))}))}),n}function Rc(t){Yr(this,Rc),this.document=t,this.loaded=!1,t.fonts.push(this)}function jc(){var t;return Yr(this,jc),(t=Xo(this,es(jc).apply(this,arguments))).type="symbol",t}function Ic(t,e,n){var r;Yr(this,Ic),(r=Xo(this,es(Ic).call(this,t,e,n))).type="image",r.loaded=!1;var i=r.getHrefAttribute().getString();if(!i)return Xo(r);var a=/\.svg$/.test(i);return t.images.push(Wo(r)),a?r.loadSvg(i):r.loadImage(i),r.isSvg=a,r}function zc(t,e,n){var r;Yr(this,zc),(r=Xo(this,es(zc).call(this,t,e,n))).type="textPath",r.textWidth=0,r.textHeight=0,r.pathLength=-1,r.glyphInfo=null,r.letterSpacingCache=[],r.measuresCache=new Map([["",0]]);var i=r.getHrefAttribute().getDefinition();return r.text=r.getTextFromNode(),r.dataArray=r.parsePathData(i),r}function Dc(t){var n=fc[t];ye(fc,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return(!lc||at(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return lc&&!at(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return(!lc||at(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}function Mc(t,e,n){var r;Yr(this,Mc),(r=Xo(this,es(Mc).call(this,t,e,n))).type="a";var i=e.childNodes,a=i[0],o=0<i.length&&Array.from(i).every(function(t){return 3===t.nodeType});return r.hasText=o,r.text=o?r.getTextFromNode(a):"",r}function Bc(){var t;return Yr(this,Bc),(t=Xo(this,es(Bc).apply(this,arguments))).type="tref",t}function Fc(t,e,n){var r;return Yr(this,Fc),(r=Xo(this,es(Fc).call(this,t,e,n))).type="glyph",r.horizAdvX=r.getAttribute("horiz-adv-x").getNumber(),r.unicode=r.getAttribute("unicode").getString(),r.arabicForm=r.getAttribute("arabic-form").getString(),r}function _c(){var t;return Yr(this,_c),(t=Xo(this,es(_c).apply(this,arguments))).type="missing-glyph",t.horizAdvX=0,t}function $c(t,e,n){var r;return Yr(this,$c),(r=Xo(this,es($c).call(this,t,e,n))).type="font-face",r.ascent=r.getAttribute("ascent").getNumber(),r.descent=r.getAttribute("descent").getNumber(),r.unitsPerEm=r.getAttribute("units-per-em").getNumber(),r}function Gc(t,e,n){var r;Yr(this,Gc),(r=Xo(this,es(Gc).call(this,t,e,n))).type="font",r.glyphs={},r.horizAdvX=r.getAttribute("horiz-adv-x").getNumber();var i=t.definitions,a=Wo(r).children,o=!0,s=!1,u=void 0;try{for(var l,c,h=a[Symbol.iterator]();!(o=(l=h.next()).done);o=!0)switch(c=l.value,c.type){case"font-face":var f=(r.fontFace=c).getStyle("font-family");f.hasValue()&&(i[f.getString()]=Wo(r));break;case"missing-glyph":r.missingGlyph=c;break;case"glyph":var g=c;g.arabicForm?(r.isRTL=!0,r.isArabic=!0,void 0===r.glyphs[g.unicode]&&(r.glyphs[g.unicode]={}),r.glyphs[g.unicode][g.arabicForm]=g):r.glyphs[g.unicode]=g}}catch(t){s=!0,u=t}finally{try{o||null==h.return||h.return()}finally{if(s)throw u}}return r}Lc.parseExternalUrl=c;var qc=(Uo(Kc,Ru),Qr(Kc,[{key:"setContext",value:function(t){Xs(es(Kc.prototype),"setContext",this).call(this,t);var e=this.getAttribute("x"),n=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),n.hasValue()&&t.translate(0,n.getPixels("y"))}},{key:"path",value:function(t){var e=this.element;e&&e.path(t)}},{key:"renderChildren",value:function(t){var e,n,r,i,a=this.document,o=this.element;o&&("symbol"===(e=o).type&&((e=new Gu(a,null)).attributes.viewBox=new jo(a,"viewBox",o.getAttribute("viewBox").getString()),e.attributes.preserveAspectRatio=new jo(a,"preserveAspectRatio",o.getAttribute("preserveAspectRatio").getString()),e.attributes.overflow=new jo(a,"overflow",o.getAttribute("overflow").getString()),e.children=o.children),"svg"===e.type&&(n=this.getAttribute("width"),r=this.getAttribute("height"),n.hasValue()&&(e.attributes.width=new jo(a,"width",this.getAttribute("width").getString())),r.hasValue()&&(e.attributes.height=new jo(a,"height",r.getString()))),i=e.parent,e.parent=null,e.render(t),e.parent=i)}},{key:"getBoundingBox",value:function(t){var e=this.element;return e?e.getBoundingBox(t):null}},{key:"elementTransform",value:function(){var t=this.document,e=this.element;return Pu.fromElement(t,e)}},{key:"element",get:function(){return this._element||(this._element=this.getHrefAttribute().getDefinition()),this._element}}]),Kc),Hc=(Uo(Zc,Ds),Qr(Zc,[{key:"apply",value:function(t,e,n,r,i){for(var a=this.includeOpacity,o=this.matrix,s=t.getImageData(0,0,r,i),u=0;u<i;u++)for(var l=0;l<r;l++){var c=G(s.data,l,u,r,0,0),h=G(s.data,l,u,r,0,1),f=G(s.data,l,u,r,0,2),g=G(s.data,l,u,r,0,3),d=H(o,0,c)+H(o,1,h)+H(o,2,f)+H(o,3,g)+H(o,4,1),p=H(o,5,c)+H(o,6,h)+H(o,7,f)+H(o,8,g)+H(o,9,1),y=H(o,10,c)+H(o,11,h)+H(o,12,f)+H(o,13,g)+H(o,14,1),v=H(o,15,c)+H(o,16,h)+H(o,17,f)+H(o,18,g)+H(o,19,1);a&&(d=p=y=0,v*=g/255),q(s.data,l,u,r,0,0,d),q(s.data,l,u,r,0,1,p),q(s.data,l,u,r,0,2,y),q(s.data,l,u,r,0,3,v)}t.clearRect(0,0,r,i),t.putImageData(s,0,0)}}]),Zc),Wc=(Uo(Qc,Ds),Qr(Qc,[{key:"apply",value:function(e,t){var n,r=this.document,i=this.getAttribute("x").getPixels("x"),a=this.getAttribute("y").getPixels("y"),o=this.getAttribute("width").getPixels("x"),s=this.getAttribute("height").getPixels("y");o||s||(n=new cu,this.children.forEach(function(t){n.addBoundingBox(t.getBoundingBox(e))}),i=g(n.x1),a=g(n.y1),o=g(n.width),s=g(n.height));var u=t.getStyle("mask").getString();t.getStyle("mask").setValue("");var l=r.createCanvas(i+o,a+s),c=l.getContext("2d");r.screen.setDefaults(c),this.renderChildren(c),new Hc(r,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(c,0,0,i+o,a+s);var h=r.createCanvas(i+o,a+s),f=h.getContext("2d");r.screen.setDefaults(f),t.render(f),f.globalCompositeOperation="destination-in",f.fillStyle=c.createPattern(l,"no-repeat"),f.fillRect(0,0,i+o,a+s),e.fillStyle=f.createPattern(h,"no-repeat"),e.fillRect(0,0,i+o,a+s),t.getStyle("mask").setValue(u)}},{key:"render",value:function(){}}]),Qc),Xc=Kt("Reflect","apply"),Uc=Function.apply,Yc=!tt(function(){Xc(function(){})});function Qc(){var t;return Yr(this,Qc),(t=Xo(this,es(Qc).apply(this,arguments))).type="mask",t}function Zc(t,e,n){var r;Yr(this,Zc),(r=Xo(this,es(Zc).call(this,t,e,n))).type="feColorMatrix";var i=L(r.getAttribute("values").getString());switch(r.getAttribute("type").getString("matrix")){case"saturate":var a=i[0],i=[.213+.787*a,.715-.715*a,.072-.072*a,0,0,.213-.213*a,.715+.285*a,.072-.072*a,0,0,.213-.213*a,.715-.715*a,.072+.928*a,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var o=i[0]*A/180;i=[W(o,.213,.787,-.213),W(o,.715,-.715,-.715),W(o,.072,-.072,.928),0,0,W(o,.213,-.213,.143),W(o,.715,.285,.14),W(o,.072,-.072,-.283),0,0,W(o,.213,-.213,-.787),W(o,.715,-.715,.715),W(o,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}return r.matrix=i,r.includeOpacity=r.getAttribute("includeOpacity").hasValue(),r}function Kc(){var t;return Yr(this,Kc),(t=Xo(this,es(Kc).apply(this,arguments))).type="use",t}oe({target:"Reflect",stat:!0,forced:Yc},{apply:function(t,e,n){return se(t),lt(n),Xc?Xc(t,e,n):Uc.call(t,e,n)}}),oe({target:"Reflect",stat:!0,sham:!ds},{getPrototypeOf:function(t){return vs(lt(t))}});function Jc(){}var th=(Uo(xh,Ds),Qr(xh,[{key:"apply",value:function(n){var r=this.document,i=Reflect.getPrototypeOf(n),t=n.beginPath,a=n.closePath;i&&(i.beginPath=Jc,i.closePath=Jc),Reflect.apply(t,n,[]),this.children.forEach(function(t){var e;void 0!==t.path&&((e=(e=void 0===t.elementTransform?null:t.elementTransform())||Pu.fromElement(r,t))&&e.apply(n),t.path(n),i&&(i.closePath=a),e&&e.unapply(n))}),Reflect.apply(a,n,[]),n.clip(),i&&(i.beginPath=t,i.closePath=a)}},{key:"render",value:function(){}}]),xh),eh=(Uo(bh,Ds),Qr(bh,[{key:"apply",value:function(t,e){var n,r,i,a,o,s,u,l,c,h=this.document,f=e.getBoundingBox(t);f&&(n=g(f.x1),r=g(f.y1),i=g(f.width),a=g(f.height),o=e.getStyle("filter").getString(),e.getStyle("filter").setValue(""),u=s=0,this.children.forEach(function(t){var e=t.extraFilterDistance||0;s=M(s,e),u=M(u,e)}),l=h.createCanvas(i+2*s,a+2*u),c=l.getContext("2d"),h.screen.setDefaults(c),c.translate(-n+s,-r+u),e.render(c),this.children.forEach(function(t){"function"==typeof t.apply&&t.apply(c,0,0,i+2*s,a+2*u)}),t.drawImage(l,0,0,i+2*s,a+2*u,n-s,r-u,i+2*s,a+2*u),e.getStyle("filter",!0).setValue(o))}},{key:"render",value:function(){}}]),bh),nh=(Uo(mh,Ds),Qr(mh,[{key:"apply",value:function(){}}]),mh),rh=(Uo(vh,Ds),Qr(vh,[{key:"apply",value:function(){}}]),vh),ih=(Uo(yh,Ds),Qr(yh,[{key:"apply",value:function(){}}]),yh),ah=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],oh=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],sh=function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},uh=(Uo(ph,Ds),Qr(ph,[{key:"apply",value:function(t,e,n,r,i){var a=this.document,o=this.blurRadius,s=a.window?a.window.document.body:null,u=t.canvas;u.id=a.getUniqueId(),s&&(u.style.display="none",s.appendChild(u)),U(u,e,n,r,i,o),s&&s.removeChild(u)}}]),ph),lh=(Uo(dh,Ds),dh),ch=(Uo(gh,Ds),gh),hh=(Qr(fh,[{key:"popEmSize",value:function(){this.emSizeStack.pop()}},{key:"getUniqueId",value:function(){return"canvg".concat(++this.uniqueId)}},{key:"isImagesLoaded",value:function(){return this.images.every(function(t){return t.loaded})}},{key:"isFontsLoaded",value:function(){return this.fonts.every(function(t){return t.loaded})}},{key:"createDocumentElement",value:function(t){var e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e}},{key:"createElement",value:function(t){var e=t.nodeName.replace(/^[^:]+:/,""),n=fh.elementTypes[e];return new(void 0===n?Bs:n)(this,t)}},{key:"createTextNode",value:function(t){return new zu(this,t)}},{key:"setViewBox",value:function(t){this.screen.setViewBox(function(e){for(var n,t=1;t<arguments.length;t++)n=null==arguments[t]?{}:arguments[t],t%2?Y(Object(n),!0).forEach(function(t){ti(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))});return e}({document:this},t))}},{key:"window",get:function(){return this.screen.window}},{key:"fetch",get:function(){return this.screen.fetch}},{key:"ctx",get:function(){return this.screen.ctx}},{key:"emSize",get:function(){var t=this.emSizeStack;return t[t.length-1]},set:function(t){this.emSizeStack.push(t)}}]),fh);function fh(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.rootEmSize,r=void 0===n?12:n,i=e.emSize,a=void 0===i?12:i,o=e.createCanvas,s=void 0===o?fh.createCanvas:o,u=e.createImage,l=void 0===u?fh.createImage:u;Yr(this,fh),this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=r,this.emSize=a,this.createCanvas=s,this.createImage=l,this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}function gh(){var t;return Yr(this,gh),(t=Xo(this,es(gh).apply(this,arguments))).type="desc",t}function dh(){var t;return Yr(this,dh),(t=Xo(this,es(dh).apply(this,arguments))).type="title",t}function ph(t,e,n){var r;return Yr(this,ph),(r=Xo(this,es(ph).call(this,t,e,n))).type="feGaussianBlur",r.blurRadius=g(r.getAttribute("stdDeviation").getNumber()),r.extraFilterDistance=r.blurRadius,r}function yh(){var t;return Yr(this,yh),(t=Xo(this,es(yh).apply(this,arguments))).type="feComposite",t}function vh(){var t;return Yr(this,vh),(t=Xo(this,es(vh).apply(this,arguments))).type="feMorphology",t}function mh(t,e,n){var r;return Yr(this,mh),(r=Xo(this,es(mh).call(this,t,e,n))).type="feDropShadow",r.addStylesFromStyleDefinition(),r}function bh(){var t;return Yr(this,bh),(t=Xo(this,es(bh).apply(this,arguments))).type="filter",t}function xh(){var t;return Yr(this,xh),(t=Xo(this,es(xh).apply(this,arguments))).type="clipPath",t}hh.createCanvas=function(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n},hh.createImage=function(){return Q.apply(this,arguments)},hh.elementTypes={svg:Gu,rect:qu,circle:Hu,ellipse:Wu,line:Xu,polyline:Uu,polygon:Yu,path:$u,pattern:ol,marker:sl,defs:ul,linearGradient:hl,radialGradient:fl,stop:gl,animate:Rl,animateColor:Hl,animateTransform:Wl,font:pc,"font-face":yc,"missing-glyph":vc,glyph:mc,text:ju,tspan:Iu,tref:bc,a:xc,textPath:Cc,image:Tc,g:ll,symbol:Oc,style:Lc,use:qc,mask:Wc,clipPath:th,filter:eh,feDropShadow:nh,feMorphology:rh,feComposite:ih,feColorMatrix:Hc,feGaussianBlur:uh,title:lh,desc:ch};var wh,kh,Sh=(Qr(Ah,[{key:"fork",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Ah.from(t,e,K({},this.options,{},n))}},{key:"forkString",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Ah.fromString(t,e,K({},this.options,{},n))}},{key:"ready",value:function(){return this.screen.ready()}},{key:"isReady",value:function(){return this.screen.isReady()}},{key:"render",value:(kh=Jr(Kr.mark(function t(){var e,n=arguments;return Kr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]?n[0]:{},this.start(K({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},e)),t.next=4,this.ready();case 4:this.stop();case 5:case"end":return t.stop()}},t,this)})),function(){return kh.apply(this,arguments)})},{key:"start",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=this.documentElement,n=this.screen,r=this.options;n.start(e,K({enableRedraw:!0},r,{},t))}},{key:"stop",value:function(){this.screen.stop()}},{key:"resize",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t,n=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];this.documentElement.resize(t,e,n)}}],[{key:"from",value:(wh=Jr(Kr.mark(function t(e,n){var r,i,a,o=arguments;return Kr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=new Jo(r=2<o.length&&void 0!==o[2]?o[2]:{}),t.next=4,i.parse(n);case 4:return a=t.sent,t.abrupt("return",new Ah(e,a,r));case 6:case"end":return t.stop()}},t)})),function(){return wh.apply(this,arguments)})},{key:"fromString",value:function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return new Ah(t,new Jo(n).parseFromString(e),n)}}]),Ah),Ph=Object.freeze({__proto__:null,offscreen:function(){return{window:null,ignoreAnimation:!0,ignoreMouse:!0,createCanvas:function(t,e){return new OffscreenCanvas(t,e)},createImage:(t=Jr(Kr.mark(function t(e){var n,r,i;return Kr.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return n=t.sent,t.next=5,n.blob();case 5:return r=t.sent,t.next=8,createImageBitmap(r);case 8:return i=t.sent,t.abrupt("return",i);case 10:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})};var t},node:function(t){var e=t.DOMParser,n=t.canvas;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:t.fetch,createCanvas:n.createCanvas,createImage:n.loadImage}}});function Ah(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Yr(this,Ah),this.parser=new Jo(n),this.screen=new _o(t,n),this.options=n;var r=new hh(this,n),i=r.createDocumentElement(e);this.document=r,this.documentElement=i}t.AElement=xc,t.AnimateColorElement=Hl,t.AnimateElement=Rl,t.AnimateTransformElement=Wl,t.BoundingBox=cu,t.CB1=f,t.CB2=d,t.CB3=p,t.CB4=y,t.Canvg=Sh,t.CircleElement=Hu,t.ClipPathElement=th,t.DefsElement=ul,t.DescElement=ch,t.Document=hh,t.Element=Ds,t.EllipseElement=Wu,t.FeColorMatrixElement=Hc,t.FeCompositeElement=ih,t.FeDropShadowElement=nh,t.FeGaussianBlurElement=uh,t.FeMorphologyElement=rh,t.FilterElement=eh,t.Font=Us,t.FontElement=pc,t.FontFaceElement=yc,t.GElement=ll,t.GlyphElement=mc,t.GradientElement=cl,t.ImageElement=Tc,t.LineElement=Xu,t.LinearGradientElement=hl,t.MarkerElement=sl,t.MaskElement=Wc,t.Matrix=xu,t.MissingGlyphElement=vc,t.Mouse=Mo,t.PSEUDO_ZERO=_n,t.Parser=Jo,t.PathElement=$u,t.PathParser=_u,t.PatternElement=ol,t.Point=Do,t.PolygonElement=Yu,t.PolylineElement=Uu,t.Property=jo,t.QB1=v,t.QB2=x,t.QB3=w,t.RadialGradientElement=fl,t.RectElement=qu,t.RenderedElement=Ru,t.Rotate=mu,t.SVGElement=Gu,t.SVGFontLoader=Vc,t.Scale=bu,t.Screen=_o,t.Skew=wu,t.SkewX=ku,t.SkewY=Su,t.StopElement=gl,t.StyleElement=Lc,t.SymbolElement=Oc,t.TRefElement=bc,t.TSpanElement=Iu,t.TextElement=ju,t.TextPathElement=Cc,t.TitleElement=lh,t.Transform=Pu,t.Translate=vu,t.UnknownElement=Bs,t.UseElement=qc,t.ViewPort=zo,t.compressSpaces=F,t.default=Sh,t.getSelectorSpecificity=h,t.normalizeAttributeName=l,t.parseExternalUrl=c,t.presets=Ph,t.toNumbers=L,t.trimLeft=s,t.trimRight=u,t.vectorMagnitude=a,t.vectorsAngle=N,t.vectorsRatio=V,Object.defineProperty(t,"__esModule",{value:!0})});