import{NgModule,Component,ChangeDetectionStrategy,ViewEncapsulation,Input,ElementRef,ChangeDetectorRef}from"@angular/core";import{CommonModule}from"@angular/common";import{animate,state,style,transition,trigger}from"@angular/animations";import{DomHandler}from"primeng/dom";export class ScrollTop{constructor(t,e){this.el=t,this.cd=e,this.target="window",this.threshold=400,this.icon="pi pi-chevron-up",this.behavior="smooth",this.showTransitionOptions=".15s",this.hideTransitionOptions=".15s",this.visible=!1}ngOnInit(){"window"===this.target?this.bindDocumentScrollListener():"parent"===this.target&&this.bindParentScrollListener()}onClick(){("window"===this.target?window:this.el.nativeElement.parentElement).scroll({top:0,behavior:this.behavior})}onEnter(){this.el.nativeElement.children[0].style.zIndex=DomHandler.generateZIndex()}checkVisibility(t){t>this.threshold?this.visible=!0:this.visible=!1,this.cd.markForCheck()}bindParentScrollListener(){this.scrollListener=(()=>{this.checkVisibility(this.el.nativeElement.parentElement.scrollTop)}),this.el.nativeElement.parentElement.addEventListener("scroll",this.scrollListener)}bindDocumentScrollListener(){this.scrollListener=(()=>{this.checkVisibility(DomHandler.getWindowScrollTop())}),window.addEventListener("scroll",this.scrollListener)}unbindParentScrollListener(){this.scrollListener&&(this.el.nativeElement.parentElement.removeEventListener("scroll",this.scrollListener),this.scrollListener=null)}unbindDocumentScrollListener(){this.scrollListener&&(window.removeEventListener("scroll",this.scrollListener),this.scrollListener=null)}containerClass(){return{"p-scrolltop p-link p-component":!0,"p-scrolltop-sticky":"window"!==this.target}}ngOnDestroy(){"window"===this.target?this.unbindDocumentScrollListener():"parent"===this.target&&this.unbindParentScrollListener()}};ScrollTop.decorators=[{type:Component,args:[{selector:"p-scrollTop",template:'\n        <button  *ngIf="visible" [@animation]="{value: \'open\', params: {showTransitionParams: showTransitionOptions, hideTransitionParams: hideTransitionOptions}}" (@animation.start)="onEnter()"\n            [ngClass]="containerClass()" (click)="onClick()" [class]="styleClass" [ngStyle]="style" type="button">\n            <span [class]="icon" [ngClass]="\'p-scrolltop-icon\'"></span>\n        </button>\n    ',changeDetection:ChangeDetectionStrategy.OnPush,encapsulation:ViewEncapsulation.None,animations:[trigger("animation",[state("void",style({opacity:0})),state("open",style({opacity:1})),transition("void => open",animate("{{showTransitionParams}}")),transition("open => void",animate("{{hideTransitionParams}}"))])],styles:[".p-scrolltop{align-items:center;bottom:20px;display:flex;justify-content:center;position:fixed;right:20px}.p-scrolltop-sticky{position:sticky}.p-scrolltop-sticky.p-link{margin-left:auto}"]}]}],ScrollTop.ctorParameters=(()=>[{type:ElementRef},{type:ChangeDetectorRef}]),ScrollTop.propDecorators={styleClass:[{type:Input}],style:[{type:Input}],target:[{type:Input}],threshold:[{type:Input}],icon:[{type:Input}],behavior:[{type:Input}],showTransitionOptions:[{type:Input}],hideTransitionOptions:[{type:Input}]};export class ScrollTopModule{};ScrollTopModule.decorators=[{type:NgModule,args:[{imports:[CommonModule],exports:[ScrollTop],declarations:[ScrollTop]}]}];