/*! Monio: io-helpers.js
    v0.16.0 (c) 2021 Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function UMD(e,t,i,n){"function"==typeof define&&define.amd?(i=Object.values(i),define(e,i,n)):"undefined"!=typeof module&&module.exports?(i=Object.keys(i).map((e=>require(e))),module.exports=n(...i)):(i=Object.values(i).map((e=>t[e])),t[e]=n(...i))}("IOHelpers","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil","./io.js":"IO","./maybe.js":"Maybe","./either.js":"Either"},(function DEF(e,t,i,n){"use strict";var{isFunction:r,isPromise:o,isMonad:l}=e,u=new WeakSet;let f={};function log(...e){return t((()=>console.log(...e)))}function getReader(){return t((e=>e))}function applyIO(e,i){return t((()=>e.run(i)))}function doIO(e,...i){return i.length>0?t((n=>t.do(e(n,...i)).run(n))):t.do(e)}function doIOBind(e,i){var n=t((()=>t.do(e).run(i)));return(...r)=>r.length>0?t((()=>t.do(e(i,...r)).run(i))):n}function listFilterInIO(e,t){return listConcatIO(t.map((t=>e(t).map((e=>e?[t]:[])))))}function listFilterOutIO(e,t){return listFilterInIO(iNot(predictateIO),t)}function listConcatIO(e){return e.reduce(((e,t)=>e.concat(t)),t.of([]))}function iif(e,i,...n){return t((r=>liftIO(r,e).chain((function doThens(e){return e?(Array.isArray(i)?i:[i]).reduce(((e,i)=>e.chain((e=>liftIO(r,e).chain((e=>u.has(e)?t.of(e):liftIO(r,i)))))),t.of()).chain((i=>liftIO(r,i).chain((i=>t.of(u.has(i)?i:e))))):t.of(e)})).chain(function doNextElse(e){return i=>!i&&e.length>0?liftIO(r,e[0]).chain(doNextElse(e.slice(1))):t.of(i)}(n)).run(r)))}function elif(e,t){return iif(e,t)}function els(e){return iif(!0,e)}function iReturn(e){return t((t=>liftIO(t,e).map((e=>{var t={returned:e};return u.add(t),t})).run(t)))}function iNot(e){return t((t=>liftIO(t,e).map((e=>!e)).run(t)))}function wasReturned(e){return u.has(e)}function liftIO(e,o){if(l(o)){if(t.is(o))return o;if(n.Left.is(o)||i.Nothing.is(o)){let e={returned:o};return u.add(e),t.of(e)}{let e=o.chain(t.of);return t.is(e)?e:t.of(o)}}return r(o)?liftIO(e,o(e)):o&&"object"==typeof o&&r(o.next)?t.do(o):t.of(o)}return f={log:log,getReader:getReader,applyIO:applyIO,doIO:doIO,doIOBind:doIOBind,listFilterInIO:listFilterInIO,listFilterOutIO:listFilterOutIO,listConcatIO:listConcatIO,iif:iif,elif:elif,els:els,iNot:iNot,iReturn:iReturn,wasReturned:wasReturned},f.log=log,f.getReader=getReader,f.applyIO=applyIO,f.doIO=doIO,f.doIOBind=doIOBind,f.listFilterInIO=listFilterInIO,f.listFilterOutIO=listFilterOutIO,f.listConcatIO=listConcatIO,f.iif=iif,f.elif=elif,f.els=els,f.iNot=iNot,f.iReturn=iReturn,f.wasReturned=wasReturned,f}));