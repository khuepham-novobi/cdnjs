/*! Monio: io-helpers.js
    v0.14.4 (c) 2021 Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function UMD(e,n,i,t){"function"==typeof define&&define.amd?(i=Object.keys(i).map((e=>e.replace(/^\.\//,""))),define(e,i,t)):"undefined"!=typeof module&&module.exports?(i=Object.keys(i).map((e=>require(e))),module.exports=t(...i)):(i=Object.values(i).map((e=>n[e])),n[e]=t(...i))}("IOHelpers","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil","./io.js":"IO","./maybe.js":"Maybe","./either.js":"Either"},(function DEF(e,n,i,t){"use strict";var{isFunction:r,isPromise:o,isMonad:f}=e,u=new WeakSet;let d={};function iif(e,i,...t){return n((r=>liftIO(r,e).chain((function doThens(e){return e?(Array.isArray(i)?i:[i]).reduce(((e,i)=>e.chain((e=>liftIO(r,e).chain((e=>u.has(e)?n.of(e):liftIO(r,i)))))),n.of()).chain((i=>liftIO(r,i).chain((i=>n.of(u.has(i)?i:e))))):n.of(e)})).chain(function doNextElse(e){return i=>!i&&e.length>0?liftIO(r,e[0]).chain(doNextElse(e.slice(1))):n.of(i)}(t)).run(r)))}function liftIO(e,o){if(f(o)){if(n.is(o))return o;if(t.Left.is(o)||i.Nothing.is(o)){let e={returned:o};return u.add(e),n.of(e)}{let e=o.chain(n.of);return n.is(e)?e:n.of(o)}}return r(o)?liftIO(e,o(e)):o&&"object"==typeof o&&r(o.next)?n.do(o):n.of(o)}return d.applyIO=function applyIO(e,i){return n((()=>e.run(i)))},d.doIO=function doIO(e,...i){return i.length>0?n((t=>n.do(e(t,...i)).run(t))):n.do(e)},d.doIOBind=function doIOBind(e,i){var t=n((()=>n.do(e).run(i)));return(...r)=>r.length>0?n((()=>n.do(e(i,...r)).run(i))):t},d.filterIOList=function filterIOList(e,i){return i.reduce(((n,i)=>n.chain((n=>e(i).map((e=>e?[...n,i]:n))))),n.of([]))},d.concatIOList=function concatIOList(e){return e.reduce(((e,n)=>e.map((e=>[...e,n]))),n.of([]))},d.iif=iif,d.elif=function elif(e,n){return iif(e,n)},d.els=function els(e){return iif(!0,e)},d.iNot=function iNot(e){return n((n=>liftIO(n,e).map((e=>!e)).run(n)))},d.iReturn=function iReturn(e){return n((n=>liftIO(n,e).map((e=>{var n={returned:e};return u.add(n),n})).run(n)))},d.wasReturned=function wasReturned(e){return u.has(e)},d}));