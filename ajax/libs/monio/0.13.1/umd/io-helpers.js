/*! Monio: io-helpers.js
    v0.13.1 (c) 2021 Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function UMD(e,n,t,i){"function"==typeof define&&define.amd?(t=Object.keys(t).map((e=>e.replace(/^\.\//,""))),define(e,t,i)):"undefined"!=typeof module&&module.exports?(t=Object.keys(t).map((e=>require(e))),module.exports=i(...t)):(t=Object.values(t).map((e=>n[e])),n[e]=i(...t))}("IOHelpers","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil","./io.js":"IO","./maybe.js":"Maybe","./either.js":"Either"},(function DEF(e,n,t,i){"use strict";var{isPromise:o}=e,r=new WeakSet;let f={};function iif(e,t,...i){return n((o=>liftIO(o,e).chain((function doThens(e){return e?(Array.isArray(t)?t:[t]).reduce(((e,t)=>e.chain((e=>liftIO(o,e).chain((e=>r.has(e)?n.of(e):liftIO(o,t)))))),n.of()).chain((t=>liftIO(o,t).chain((t=>n.of(r.has(t)?t:e))))):n.of(e)})).chain(function doNextElse(e){return t=>!t&&e.length>0?liftIO(o,e[0]).chain(doNextElse(e.slice(1))):n.of(t)}(i)).run(o)))}function liftIO(e,o){if(o&&"object"==typeof o&&"function"==typeof o.chain){if(n.is(o))return o;if(i.Left.is(o)||t.Nothing.is(o)){let e={returned:o};return r.add(e),n.of(e)}{let e=o.chain(n.of);return n.is(e)?e:n.of(o)}}return"function"==typeof o?liftIO(e,o(e)):o&&"object"==typeof o&&"function"==typeof o.next?n.do(o):n.of(o)}return f.applyIO=function applyIO(e,t){return n((()=>e.run(t)))},f.doIO=function doIO(e,...t){return t.length>0?n((i=>n.do(e(i,...t)).run(i))):n.do(e)},f.doIOBind=function doIOBind(e,t){var i=n((()=>n.do(e).run(t)));return(...o)=>o.length>0?n((()=>n.do(e(t,...o)).run(t))):i},f.filterIOList=function filterIOList(e,t){return t.reduce(((n,t)=>n.chain((n=>e(t).map((e=>e?[...n,t]:n))))),n.of([]))},f.concatIOList=function concatIOList(e){return e.reduce(((e,n)=>e.map((e=>[...e,n]))),n.of([]))},f.iif=iif,f.elif=function elif(e,n){return iif(e,n)},f.els=function els(e){return iif(!0,e)},f.iNot=function iNot(e){return n((t=>liftIO(t,e).chain((e=>n.of(!e))).run(t)))},f.iReturn=function iReturn(e){return n((t=>liftIO(t,e).chain((e=>{var t={returned:e};return r.add(t),n.of(t)})).run(t)))},f.wasReturned=function wasReturned(e){return r.has(e)},f}));