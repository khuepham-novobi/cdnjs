/*! Monio: io.js
    v0.5.1 (c) 2020 Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function UMD(n,t,e,i){"function"==typeof define&&define.amd?(e=Object.keys(e).map((n=>n.replace(/^\.\//,""))),define(n,e,i)):"undefined"!=typeof module&&module.exports?(e=Object.keys(e).map((n=>require(n))),module.exports=i(...e)):(e=Object.values(e).map((n=>t[n])),t[n]=i(...e))}("IO","undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:new Function("return this")(),{"./lib/util.js":"MonioUtil","./either.js":"Either"},(function DEF(n,t){"use strict";var{isPromise:e}=n,i={};let r={};function IO(n){var t={map:function map(t){return IO((i=>{var r=n(i);return e(r)?r.then(t):t(r)}))},chain:chain,flatMap:chain,bind:chain,ap:function ap(t){return t.map(n)},concat:function concat(t){return IO((i=>{var r=n(i),o=t.run(i);return e(r)||e(o)?Promise.all([r,o]).then((([n,t])=>n.concat(t))):r.concat(o)}))},run:function run(t){return n(t)},_inspect:function _inspect(){return`${t[Symbol.toStringTag]}(${"function"==typeof n?n.name||"anonymous function":n&&"function"==typeof n._inspect?n._inspect():val})`},_is:function _is(n){return n===i},[Symbol.toStringTag]:"IO"};return t;function chain(t){return IO((i=>{var r=n(i);return e(r)?r.then(t).then((n=>n.run(i))):t(r).run(i)}))}}function processNext(n,t,i){return new Promise((async(r,o)=>{try{await function monadFlatMap(n,t){return n["flatMap"in n?"flatMap":"chain"in n?"chain":"bind"](t)}(e(t)?await t:t,(t=>IO((()=>n(t).then(r,o))))).run(i)}catch(n){o(n)}}))}function getIterator(n,t){return"function"==typeof n?n(t):n&&"object"==typeof n&&"function"==typeof n.next?n:void 0}return r=Object.assign(IO,{of:function of(n){return IO((()=>n))},is:function is(n){return n&&"function"==typeof n._is&&n._is(i)},do:function $do(n){return IO((t=>{var i=getIterator(n,t);return async function next(n){var r=i.next(e(n)?await n:n);return(r=e(r)?await r:r).done?r.value:processNext(next,r.value,t)}()}))},doEither:function doEither(n){return IO((i=>{var r=getIterator(n,i);return async function next(n){try{n=e(n)?await n:n;let o=t.Left.is(n)?r.throw(n):r.next(n);o=e(o)?await o:o;let a=o.done&&e(o.value)?await o.value:o.value;return o.done?t.Right.is(a)?a:t.Right(a):processNext(next,a,i).catch(next)}catch(n){throw t.Left.is(n)?n:t.Left(n)}}()}))}}),r.RIO=IO,r.Reader=IO,r}));