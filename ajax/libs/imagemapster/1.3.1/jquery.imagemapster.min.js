/*!
* imagemapster - v1.3.1 - 2021-01-10
* https://github.com/jamietre/ImageMapster/
* Copyright (c) 2011 - 2021 James Treworgy
* License: MIT
*/

!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),a(t),t}:a(jQuery)}(function(jQuery){function id(e,t,a){var i=e,n=i.map_data,s=a.isMask;cd.each(t.areas(),function(e,t){a.isMask=s||t.nohref&&n.options.noHrefIsMask,i.addShape(t,a)}),a.isMask=s}function jd(e){return Math.max(0,Math.min(parseInt(e,16),255))}function kd(e,t){return"rgba("+jd(e.substr(0,2))+","+jd(e.substr(2,2))+","+jd(e.substr(4,2))+","+t+")"}function ld(){}var cd,dd,gd,hd,ed,fd,Se,Te,Ue,Ve,Bf,Cf,Df,ui,vi,wi,lj,mj,Rj,Sj,Tj,Uj,Lk,Mk,Nk;function Gf(e){var t=e.options,a=e.images;Cf.hasCanvas()&&(Bf.each(t.altImages||{},function(e,t){a.add(t,e)}),Bf.each([t].concat(t.areas),function(e,t){Bf.each([t=t,t.render_highlight,t.render_select],function(e,t){t&&t.altImage&&(t.altImageId=a.add(t.altImage))})})),e.area_options=Df.updateProps({},Cf.area_defaults,t)}function Kf(e,t){var a=e.getDataForArea(this),i=e.options;e.currentAreaId<0||!a||e.getDataForArea(t.relatedTarget)!==a&&(e.currentAreaId=-1,a.area=null,function e(t,a,i,n){return n=n||Df.when.defer(),t.activeAreaEvent&&(window.clearTimeout(t.activeAreaEvent),t.activeAreaEvent=0),a<0?n.reject():i.owner.currentAction||a?t.activeAreaEvent=window.setTimeout(function(){e(t,0,i,n)},a||100):(a=i.areaId,t.currentAreaId!==a&&0<=t.highlightId&&n.resolve()),n}(e,i.mouseoutDelay,a).then(e.clearEffects),Df.isFunction(i.onMouseout)&&i.onMouseout.call(this,{e:t,options:i,key:a.key,selected:a.isSelected()}))}function Mf(i,n){var s,o,r,c,l,u=this,e=i.getDataForArea(this),h=i.options;(function(e){Cf.hasCanvas()||this.blur(),e.preventDefault()}).call(this,n),h.clickNavigate&&e.href?window.location.href=e.href:e&&!e.owner.currentAction&&(h=i.options,function a(e){var t;if(c=e.isSelectable()&&(e.isDeselectable()||!e.isSelected()),r=c?!e.isSelected():e.isSelected(),o=Cf.getBoundList(h,e.key),Df.isFunction(h.onClick)&&(l=h.onClick.call(u,{e:n,listTarget:o,key:e.key,selected:r}),Df.isBool(l))){if(!l)return;if("#"!==(t=Bf(e.area).attr("href")))return void(window.location.href=t)}c&&e.toggle(),h.boundList&&0<h.boundList.length&&Cf.setBoundListProperties(h,o,e.isSelected()),(e=e.effectiveOptions()).includeKeys&&(s=Df.split(e.includeKeys),Bf.each(s,function(e,t){(t=i.getDataForKey(t.toString())).options.isMask||a(t)}))}(e))}function Ok(e,t,a){var i;return t?(i="string"==typeof t?Lk(t):Lk(t).clone()).append(e):i=Lk(e),i.css(Lk.extend(a||{},{display:"block",position:"absolute"})).hide(),Lk("body").append(i),i.attr("data-opacity",i.css("opacity")).css("opacity",0),i.show()}function Qk(e,t,a,i,n,s){a+=".mapster-tooltip";return 0<=Lk.inArray(t,e)&&(i.off(a).on(a,function(e){n&&!n.call(this,e)||(i.off(".mapster-tooltip"),s&&s.call(this))}),1)}function Rk(e,t,a,i,n){var s,o={};return n=n||{},t?(s=Nk.areaCorners(t,a,i,e.outerWidth(!0),e.outerHeight(!0)),o.left=s[0],o.top=s[1]):(o.left=n.left,o.top=n.top),o.left+=n.offsetx||0,o.top+=n.offsety||0,o.css=n.css,o.fadeDuration=n.fadeDuration,a=e,s={left:(i=o).left+"px",top:i.top+"px"},n=a.attr("data-opacity")||0,o=a.css("z-index"),0!==parseInt(o,10)&&"auto"!==o||(s["z-index"]=9999),a.css(s).addClass("mapster_tooltip"),i.fadeDuration&&0<i.fadeDuration?Nk.fader(a[0],0,n,i.fadeDuration):Nk.setOpacity(a[0],n),e}function Sk(e){return e?"string"==typeof e||e.jquery?e:e.content:null}!function(e){var i,t=!1;try{var a=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassive.mapster",function(){},a),window.removeEventListener("testPassive.mapster",function(){},a)}catch(e){}t&&(i=function(e,t,a){if(!e.includes("noPreventDefault"))return console.warn("non-passive events - listener not added"),!1;this.addEventListener(t,a,{passive:!0})},e.event.special.touchstart={setup:function(e,t,a){return i(t,"touchstart",a)}},e.event.special.touchend={setup:function(e,t,a){return i(t,"touchend",a)}})}(jQuery),function($){var mapster_version="1.3.1",ya,za,Aa;$.fn.mapster=function(e){var t=$.mapster.impl;return $.mapster.utils.isFunction(t[e])?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void $.error("Method "+e+" does not exist on jQuery.mapster"):t.bind.apply(this,arguments)},$.mapster={version:mapster_version,render_defaults:{isSelectable:!0,isDeselectable:!0,fade:!1,fadeDuration:150,fill:!0,fillColor:"000000",fillColorMask:"FFFFFF",fillOpacity:.7,highlight:!0,stroke:!1,strokeColor:"ff0000",strokeOpacity:1,strokeWidth:1,includeKeys:"",altImage:null,altImageId:null,altImages:{}},defaults:{clickNavigate:!1,wrapClass:null,wrapCss:null,onGetList:null,sortList:!1,listenToList:!1,mapKey:"",mapValue:"",singleSelect:!1,listKey:"value",listSelectedAttribute:"selected",listSelectedClass:null,onClick:null,onMouseover:null,onMouseout:null,mouseoutDelay:0,onStateChange:null,boundList:null,onConfigured:null,configTimeout:3e4,noHrefIsMask:!0,scaleMap:!0,safeLoad:!1,areas:[]},shared_defaults:{render_highlight:{fade:!0},render_select:{fade:!1},staticState:null,selected:null},area_defaults:{includeKeys:"",isMask:!1},canvas_style:{position:"absolute",left:0,top:0,padding:0,border:0},hasCanvas:null,map_cache:[],hooks:{},addHook:function(e,t){this.hooks[e]=(this.hooks[e]||[]).push(t)},callHooks:function(e,a){$.each(this.hooks[e]||[],function(e,t){t.apply(a)})},utils:{when:{all:function(e){return Promise.all(e)},defer:function(){return new function(){this.promise=new Promise(function(e,t){this.resolve=e,this.reject=t}.bind(this)),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}}},defer:function(){return this.when.defer()},subclass:function(a,i){function e(){var e=this,t=Array.prototype.slice.call(arguments,0);e.base=a.prototype,e.base.init=function(){a.prototype.constructor.apply(e,t)},i.apply(e,t)}return(e.prototype=new a).constructor=e},asArray:function(e){return e.constructor===Array?e:this.split(e)},split:function(e,t){for(var a,i=e.split(","),n=0;n<i.length;n++)""===(a=i[n]?i[n].trim():"")?i.splice(n,1):i[n]=t?t(a):a;return i},updateProps:function(e,t){var i=e||{},a=$.isEmptyObject(i)?t:e,n=[];return $.each(a,function(e){n.push(e)}),$.each(Array.prototype.slice.call(arguments,1),function(e,a){$.each(a||{},function(e){var t;(!n||0<=$.inArray(e,n))&&(t=a[e],$.isPlainObject(t)?i[e]=$.extend(i[e]||{},t):t&&t.constructor===Array?i[e]=t.slice(0):void 0!==t&&(i[e]=a[e]))})}),i},isElement:function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},indexOf:function(e,t){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var a=0;a<e.length;a++)if(e[a]===t)return a;return-1},indexOfProp:function(e,a,i){var n=e.constructor===Array?-1:null;return $.each(e,function(e,t){if(t&&(a?t[a]:t)===i)return n=e,!1}),n},boolOrDefault:function(e,t){return this.isBool(e)?e:t||!1},isBool:function(e){return"boolean"==typeof e},isUndef:function(e){return void 0===e},isFunction:function(e){return"function"==typeof e},ifFunction:function(e,t,a){this.isFunction(e)&&e.call(t,a)},size:function(e,t){var a=$.mapster.utils;return{width:t?e.width||e.naturalWidth:a.imgWidth(e,!0),height:t?e.height||e.naturalHeight:a.imgHeight(e,!0),complete:function(){return!!this.height&&!!this.width}}},setOpacity:function(e,a){$.mapster.hasCanvas()?e.style.opacity=a:$(e).each(function(e,t){void 0!==t.opacity?t.opacity=a:$(t).css("opacity",a)})},fader:(ya={},za=0,Aa=function(e,t,a,i){var n,s,o=i/15,r=$.mapster.utils;if("number"==typeof e){if(!(s=ya[e]))return}else(n=r.indexOfProp(ya,null,e))&&delete ya[n],ya[++za]=s=e,e=za;t=(a=a||1)-.01<t+a/o?a:t+a/o,r.setOpacity(s,t),t<a&&setTimeout(function(){Aa(e,t,a,i)},15)},Aa)},getBoundList:function(a,e){if(!a.boundList)return null;var i,n,s=$(),o=$.mapster.utils.split(e);return a.boundList.each(function(e,t){for(i=0;i<o.length;i++)n=o[i],$(t).is("["+a.listKey+'="'+n+'"]')&&(s=s.add(t))}),s},setBoundListProperties:function(a,e,i){e.each(function(e,t){a.listSelectedClass&&(i?$(t).addClass(a.listSelectedClass):$(t).removeClass(a.listSelectedClass)),a.listSelectedAttribute&&$(t).prop(a.listSelectedAttribute,i)})},getMapDataIndex:function(e){var t,a;switch(e.tagName&&e.tagName.toLowerCase()){case"area":a=$(e).parent().attr("name"),t=$("img[usemap='#"+a+"']")[0];break;case"img":t=e}return t?this.utils.indexOfProp(this.map_cache,"image",t):-1},getMapData:function(e){e=this.getMapDataIndex(e.length?e[0]:e);if(0<=e)return 0<=e?this.map_cache[e]:null},queueCommand:function(e,t,a,i){return!!e&&(!(e.complete&&!e.currentAction)&&(e.commands.push({that:t,command:a,args:i}),!0))},unload:function(){this.impl.unload(),this.utils=null,this.impl=null,$.fn.mapster=null,$.mapster=null,$("*").off()}};var m=$.mapster,u=m.utils,ap=Array.prototype;$.each(["width","height"],function(e,a){var i=a.substr(0,1).toUpperCase()+a.substr(1);u["img"+i]=function(e,t){return(t?$(e)[a]():0)||e[a]||e["natural"+i]||e["client"+i]||e["offset"+i]}}),m.Method=function(e,t,a,i){var n=this;n.name=i.name,n.output=e,n.input=e,n.first=i.first||!1,n.args=i.args?ap.slice.call(i.args,0):[],n.key=i.key,n.func_map=t,n.func_area=a,n.name=i.name,n.allowAsync=i.allowAsync||!1},m.Method.prototype={constructor:m.Method,go:function(){for(var e,t,a,i=this.input,n=[],s=this,o=i.length,r=0;r<o;r++)if(e=$.mapster.getMapData(i[r]))if(s.allowAsync||!m.queueCommand(e,s.input,s.name,s.args)){if((t=e.getData("AREA"===i[r].nodeName?i[r]:this.key))?$.inArray(t,n)<0&&n.push(t):a=this.func_map.apply(e,s.args),this.first||void 0!==a)break}else this.first&&(a="");return $(n).each(function(e,t){a=s.func_area.apply(t,s.args)}),void 0!==a?a:this.output}},$.mapster.impl=function(){var me={},addMap=function(e){return m.map_cache.push(e)-1},removeMap=function(e){m.map_cache.splice(e.index,1);for(var t=m.map_cache.length-1;t>=this.index;t--)m.map_cache[t].index--};function hasVml(){var e=$("<div />").appendTo("body");e.html('<v:shape id="vml_flag1" adj="1" />');var t=e[0].firstChild;t.style.behavior="url(#default#VML)";t=!t||"object"==typeof t.adj;return e.remove(),t}function namespaces(){return"object"==typeof document.namespaces?document.namespaces:null}function hasCanvas(){var e=namespaces();return(!e||!e.g_vml_)&&!!$("<canvas />")[0].getContext}function merge_areas(a,e){var i,n=a.options.areas;e&&$.each(e,function(e,t){t&&t.key&&(0<=(i=u.indexOfProp(n,"key",t.key))?$.extend(n[i],t):n.push(t),(i=a.getDataForKey(t.key))&&$.extend(i.options,t))})}function merge_options(e,t){var a=u.updateProps({},t);delete a.areas,u.updateProps(e.options,a),merge_areas(e,t.areas),u.updateProps(e.area_options,e.options)}return me.get=function(e){var t=m.getMapData(this);if(!t||!t.complete)throw"Can't access data until binding complete.";return new m.Method(this,function(){return this.getSelected()},function(){return this.isSelected()},{name:"get",args:arguments,key:e,first:!0,allowAsync:!0,defaultReturn:""}).go()},me.data=function(e){return new m.Method(this,null,function(){return this},{name:"data",args:arguments,key:e}).go()},me.highlight=function(t){return new m.Method(this,function(){if(!1!==t){var e=this.highlightId;return 0<=e?this.data[e].key:null}this.ensureNoHighlight()},function(){this.highlight()},{name:"highlight",args:arguments,key:t,first:!0}).go()},me.keys=function(e,i){var n=[],a=m.getMapData(this);if(!a||!a.complete)throw"Can't access data until binding complete.";function s(e){var t,a=[];i?(t=e.areas(),$.each(t,function(e,t){a=a.concat(t.keys)})):a.push(e.key),$.each(a,function(e,t){$.inArray(t,n)<0&&n.push(t)})}return a&&a.complete?("string"==typeof e?i?s(a.getDataForKey(e)):n=[a.getKeysForGroup(e)]:(i=e,this.each(function(e,t){"AREA"===t.nodeName&&s(a.getDataForArea(t))})),n.join(",")):""},me.select=function(){me.set.call(this,!0)},me.deselect=function(){me.set.call(this,!1)},me.set=function(i,n,e){var s,o,r,c,l=e;function h(e){e&&$.inArray(e,c)<0&&(c.push(e),r+=(""===r?"":",")+e.key)}function d(a){$.each(c,function(e,t){t=function(e){var t=i;if(e){switch(i){case!0:e.select(l);break;case!1:e.deselect(!0);break;default:t=e.toggle(l)}return t}}(t);a.options.boundList&&m.setBoundListProperties(a.options,m.getBoundList(a.options,r),t)}),i||a.removeSelectionFinish()}return this.filter("img,area").each(function(e,t){var a;(o=m.getMapData(t))!==s&&(s&&d(s),c=[],r=""),o&&(a="","IMG"===t.nodeName.toUpperCase()?m.queueCommand(o,$(t),"set",[i,n,l])||(n instanceof Array?n.length&&(a=n.join(",")):a=n,a&&$.each(u.split(a),function(e,t){h(o.getDataForKey(t.toString())),s=o})):(l=n,m.queueCommand(o,$(t),"set",[i,l])||(h(o.getDataForArea(t)),s=o)))}),o&&d(o),this},me.unbind=function(e){return new m.Method(this,function(){this.clearEvents(),this.clearMapData(e),removeMap(this)},null,{name:"unbind",args:arguments}).go()},me.rebind=function(t){return new m.Method(this,function(){var e=this;e.complete=!1,e.configureOptions(t),e.bindImages().then(function(){e.buildDataset(!0),e.complete=!0})},null,{name:"rebind",args:arguments}).go()},me.get_options=function(e,t){var a=u.isBool(e)?e:t;return new m.Method(this,function(){var e=$.extend({},this.options);return a&&(e.render_select=u.updateProps({},m.render_defaults,e,e.render_select),e.render_highlight=u.updateProps({},m.render_defaults,e,e.render_highlight)),e},function(){return a?this.effectiveOptions():this.options},{name:"get_options",args:arguments,first:!0,allowAsync:!0,key:e}).go()},me.set_options=function(e){return new m.Method(this,function(){merge_options(this,e)},null,{name:"set_options",args:arguments}).go()},me.unload=function(){for(var e=m.map_cache.length-1;0<=e;e--)m.map_cache[e]&&me.unbind.call($(m.map_cache[e].image));me.graphics=null},me.snapshot=function(){return new m.Method(this,function(){$.each(this.data,function(e,t){t.selected=!1}),this.base_canvas=this.graphics.createVisibleCanvas(this),$(this.image).before(this.base_canvas)},null,{name:"snapshot"}).go()},me.state=function(){var a,i=null;return $(this).each(function(e,t){if("IMG"===t.nodeName)return(a=m.getMapData(t))&&(i=a.state()),!1}),i},me.bind=function(s){return this.each(function(e,t){var a,i=$(t),n=m.getMapData(t);if(n){if(me.unbind.apply(i),!n.complete)return i.on(),!0;n=null}if(t=(a=this.getAttribute("usemap"))&&$('map[name="'+a.substr(1)+'"]'),!(i.is("img")&&a&&0<t.length))return!0;i.css("border",0),n||((n=new m.MapData(this,s)).index=addMap(n),n.map=t,n.bindImages().then(function(){n.initialize()}))})},me.init=function(e){var a,t;m.hasCanvas=function(){return u.isBool(m.hasCanvas.value)||(m.hasCanvas.value=u.isBool(e)?e:hasCanvas()),m.hasCanvas.value},m.hasVml=function(){var e;return u.isBool(m.hasVml.value)||((e=namespaces())&&!e.v&&(e.add("v","urn:schemas-microsoft-com:vml"),a=document.createStyleSheet(),t=["shape","rect","oval","circ","fill","stroke","imagedata","group","textbox"],$.each(t,function(e,t){a.addRule("v\\:"+t,"behavior: url(#default#VML); antialias:true")})),m.hasVml.value=hasVml()),m.hasVml.value},$.extend(m.defaults,m.render_defaults,m.shared_defaults),$.extend(m.area_defaults,m.render_defaults,m.shared_defaults)},me.test=function(obj){return eval(obj)},me}(),$.mapster.impl.init()}(jQuery),cd=jQuery,ed=cd.mapster,fd=ed.utils,ed.Graphics=function(e){var t=this;t.active=!1,t.canvas=null,t.width=0,t.height=0,t.shapes=[],t.masks=[],t.map_data=e},dd=ed.Graphics.prototype={constructor:ed.Graphics,begin:function(e,t){var a=cd(e);this.elementName=t,this.canvas=e,this.width=a.width(),this.height=a.height(),this.shapes=[],this.masks=[],this.active=!0},addShape:function(e,t){(t.isMask?this.masks:this.shapes).push({mapArea:e,options:t})},createVisibleCanvas:function(e){return cd(this.createCanvasFor(e)).addClass("mapster_el").css(ed.canvas_style)[0]},addShapeGroup:function(e,a,t){var i,n=this,s=this.map_data,o=e.effectiveRenderOptions(a);t&&cd.extend(o,t),t="select"===a?(i="static_"+e.areaId.toString(),s.base_canvas):s.overlay_canvas,n.begin(t,i),o.includeKeys&&(i=fd.split(o.includeKeys),cd.each(i,function(e,t){t=s.getDataForKey(t.toString());id(n,t,t.effectiveRenderOptions(a))})),id(n,e,o),n.render(),o.fade&&fd.fader(ed.hasCanvas()?t:cd(t).find("._fill").not(".mapster_mask"),0,ed.hasCanvas()?1:o.fillOpacity,o.fadeDuration)}},gd={renderShape:function(e,t,a){var i,n=t.coords(null,a);switch(t.shape){case"rect":e.rect(n[0],n[1],n[2]-n[0],n[3]-n[1]);break;case"poly":for(e.moveTo(n[0],n[1]),i=2;i<t.length;i+=2)e.lineTo(n[i],n[i+1]);e.lineTo(n[0],n[1]);break;case"circ":case"circle":e.arc(n[0],n[1],n[2],0,2*Math.PI,!1)}},addAltImage:function(e,t,a,i){e.beginPath(),this.renderShape(e,a),e.closePath(),e.clip(),e.globalAlpha=i.altImageOpacity||i.fillOpacity,e.drawImage(t,0,0,a.owner.scaleInfo.width,a.owner.scaleInfo.height)},render:function(){var e,a,i=this,n=i.map_data,t=i.masks.length,s=i.createCanvasFor(n),o=s.getContext("2d"),r=i.canvas.getContext("2d");return t&&(e=i.createCanvasFor(n),(a=e.getContext("2d")).clearRect(0,0,e.width,e.height),cd.each(i.masks,function(e,t){a.save(),a.beginPath(),i.renderShape(a,t.mapArea),a.closePath(),a.clip(),a.lineWidth=0,a.fillStyle="#000",a.fill(),a.restore()})),cd.each(i.shapes,function(e,t){o.save(),t.options.fill&&(t.options.altImageId?i.addAltImage(o,n.images[t.options.altImageId],t.mapArea,t.options):(o.beginPath(),i.renderShape(o,t.mapArea),o.closePath(),o.fillStyle=kd(t.options.fillColor,t.options.fillOpacity),o.fill())),o.restore()}),cd.each(i.shapes.concat(i.masks),function(e,t){var a=1===t.options.strokeWidth?.5:0;t.options.stroke&&(o.save(),o.strokeStyle=kd(t.options.strokeColor,t.options.strokeOpacity),o.lineWidth=t.options.strokeWidth,o.beginPath(),i.renderShape(o,t.mapArea,a),o.closePath(),o.stroke(),o.restore())}),t?(a.globalCompositeOperation="source-out",a.drawImage(s,0,0),r.drawImage(e,0,0)):r.drawImage(s,0,0),i.active=!1,i.canvas},createCanvasFor:function(e){return cd('<canvas width="'+e.scaleInfo.width+'" height="'+e.scaleInfo.height+'"></canvas>')[0]},clearHighlight:function(){var e=this.map_data.overlay_canvas;e.getContext("2d").clearRect(0,0,e.width,e.height)},refreshSelections:function(){var e=this.map_data,t=e.base_canvas;e.base_canvas=this.createVisibleCanvas(e),cd(e.base_canvas).hide(),cd(t).before(e.base_canvas),e.redrawSelections(),cd(e.base_canvas).show(),cd(t).remove()}},hd={renderShape:function(e,t,a){var i,n=this,s=e.coords(),o=n.elementName?'name="'+n.elementName+'" ':"",r=a?'class="'+a+'" ':"",c='<v:fill color="#'+t.fillColor+'" class="_fill" opacity="'+(t.fill?t.fillOpacity:0)+'" /><v:stroke class="_fill" opacity="'+t.strokeOpacity+'"/>',l=t.stroke?" strokeweight="+t.strokeWidth+' stroked="t" strokecolor="#'+t.strokeColor+'"':' stroked="f"',u=t.fill?' filled="t"':' filled="f"';switch(e.shape){case"rect":i="<v:rect "+r+o+u+l+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+s[0]+"px;top:"+s[1]+"px;width:"+(s[2]-s[0])+"px;height:"+(s[3]-s[1])+'px;">'+c+"</v:rect>";break;case"poly":i="<v:shape "+r+o+u+l+' coordorigin="0,0" coordsize="'+n.width+","+n.height+'" path="m '+s[0]+","+s[1]+" l "+s.slice(2).join(",")+' x e" style="zoom:1;margin:0;padding:0;display:block;position:absolute;top:0px;left:0px;width:'+n.width+"px;height:"+n.height+'px;">'+c+"</v:shape>";break;case"circ":case"circle":i="<v:oval "+r+o+u+l+' style="zoom:1;margin:0;padding:0;display:block;position:absolute;left:'+(s[0]-s[2])+"px;top:"+(s[1]-s[2])+"px;width:"+2*s[2]+"px;height:"+2*s[2]+'px;">'+c+"</v:oval>"}return e=cd(i),cd(n.canvas).append(e),e},render:function(){var a,i=this;return cd.each(this.shapes,function(e,t){i.renderShape(t.mapArea,t.options)}),this.masks.length&&cd.each(this.masks,function(e,t){a=fd.updateProps({},t.options,{fillOpacity:1,fillColor:t.options.fillColorMask}),i.renderShape(t.mapArea,a,"mapster_mask")}),this.active=!1,this.canvas},createCanvasFor:function(e){var t=e.scaleInfo.width,e=e.scaleInfo.height;return cd('<var width="'+t+'" height="'+e+'" style="zoom:1;overflow:hidden;display:block;width:'+t+"px;height:"+e+'px;"></var>')[0]},clearHighlight:function(){cd(this.map_data.overlay_canvas).children().remove()},removeSelections:function(e){(0<=e?cd(this.map_data.base_canvas).find('[name="static_'+e.toString()+'"]'):cd(this.map_data.base_canvas).children()).remove()}},cd.each(["renderShape","addAltImage","render","createCanvasFor","clearHighlight","removeSelections","refreshSelections"],function(e,t){var a;dd[t]=(a=t,function(){return dd[a]=(ed.hasCanvas()?gd:hd)[a]||ld,dd[a].apply(this,arguments)})}),Se=jQuery,Te=Se.mapster,Ue=Te.utils,Ve=[],Te.MapImages=function(e){this.owner=e,this.clear()},Te.MapImages.prototype={constructor:Te.MapImages,slice:function(){return Ve.slice.apply(this,arguments)},splice:function(){return Ve.slice.apply(this.status,arguments),Ve.slice.apply(this,arguments)},complete:function(){return Se.inArray(!1,this.status)<0},_add:function(e){e=Ve.push.call(this,e)-1;return this.status[e]=!1,e},indexOf:function(e){return Ue.indexOf(this,e)},clear:function(){var a=this;a.ids&&0<a.ids.length&&Se.each(a.ids,function(e,t){delete a[t]}),a.ids=[],a.length=0,a.status=[],a.splice(0)},add:function(e,t){var a,i,n=this;if(e){if("string"==typeof e){if("object"==typeof(e=n[i=e]))return n.indexOf(e);e=Se("<img />").addClass("mapster_el").hide(),a=n._add(e[0]),e.on("load",function(e){n.imageLoaded.call(n,e)}).on("error",function(e){n.imageLoadError.call(n,e)}),e.attr("src",i)}else a=n._add(Se(e)[0]);if(t){if(this[t])throw t+" is already used or is not available as an altImage alias.";n.ids.push(t),n[t]=n[a]}return a}},bind:function(e){var t=this,a=t.owner.options.configTimeout/200,i=function(){for(var e=t.length;0<e--&&t.isLoaded(e););t.complete()?t.resolve():0<a--?t.imgTimeout=window.setTimeout(function(){i.call(t,!0)},50):t.imageLoadError.call(t)},n=t.deferred=Ue.defer();return i(),n},resolve:function(){var e=this.deferred;e&&(this.deferred=null,e.resolve())},imageLoaded:function(e){e=this.indexOf(e.target);0<=e&&(this.status[e]=!0,Se.inArray(!1,this.status)<0&&this.resolve())},imageLoadError:function(e){throw clearTimeout(this.imgTimeout),this.triesLeft=0,e?"The image "+e.target.src+" failed to load.":"The images never seemed to finish loading. You may just need to increase the configTimeout if images could take a long time to load."},isLoaded:function(e){var t,a=this.status;return!!a[e]||(void 0!==(t=this[e]).complete?a[e]=t.complete:a[e]=!!Ue.imgWidth(t),a[e])}},Bf=jQuery,Cf=Bf.mapster,Df=Cf.utils,Cf.MapData=function(e,t){var a=this;a.image=e,a.images=new Cf.MapImages(a),a.graphics=new Cf.Graphics(a),a.imgCssText=e.style.cssText||null,e=a,Bf.extend(e,{complete:!1,map:null,base_canvas:null,overlay_canvas:null,commands:[],data:[],mapAreas:[],_xref:{},highlightId:-1,currentAreaId:-1,_tooltip_events:[],scaleInfo:null,index:-1,activeAreaEvent:null}),a.configureOptions(t),a.mouseover=function(e){(function(e,t){var a=e.getAllDataForArea(this),i=a.length?a[0]:null;!i||i.isNotRendered()||i.owner.currentAction||e.currentAreaId!==i.areaId&&(e.highlightId!==i.areaId&&(e.clearEffects(),i.highlight(),e.options.showToolTip&&Bf.each(a,function(e,t){t.effectiveOptions().toolTip&&t.showToolTip()})),e.currentAreaId=i.areaId,Df.isFunction(e.options.onMouseover)&&e.options.onMouseover.call(this,{e:t,options:i.effectiveOptions(),key:i.key,selected:i.isSelected()}))}).call(this,a,e)},a.mouseout=function(e){Kf.call(this,a,e)},a.click=function(e){Mf.call(this,a,e)},a.clearEffects=function(e){(function(e){var t=e.options;e.ensureNoHighlight(),t.toolTipClose&&0<=Bf.inArray("area-mouseout",t.toolTipClose)&&e.activeToolTip&&e.clearToolTip()}).call(this,a,e)}},Cf.MapData.prototype={constructor:Cf.MapData,configureOptions:function(e){this.options=Df.updateProps({},Cf.defaults,e)},bindImages:function(){var e=this,t=e.images;return 2<t.length?t.splice(2):0===t.length&&(t.add(e.image),t.add(e.image.src)),Gf(e),e.images.bind()},isActive:function(){return!this.complete||this.currentAction},state:function(){return{complete:this.complete,resizing:"resizing"===this.currentAction,zoomed:this.zoomed,zoomedArea:this.zoomedArea,scaleInfo:this.scaleInfo}},wrapId:function(){return"mapster_wrap_"+this.index},_idFromKey:function(e){return"string"==typeof e&&this._xref.hasOwnProperty(e)?this._xref[e]:-1},getSelected:function(){var a="";return Bf.each(this.data,function(e,t){t.isSelected()&&(a+=(a?",":"")+this.key)}),a},getAllDataForArea:function(e,t){var a,i,n,s=Bf(e).filter("area").attr(this.options.mapKey);if(s)for(n=[],s=Df.split(s),a=0;a<(t||s.length);a++)(i=this.data[this._idFromKey(s[a])])&&(i.area=e.length?e[0]:e,n.push(i));return n},getDataForArea:function(e){e=this.getAllDataForArea(e,1);return e&&e[0]||null},getDataForKey:function(e){return this.data[this._idFromKey(e)]},getKeysForGroup:function(e){e=this.getDataForKey(e);return e?e.isPrimary?e.key:this.getPrimaryKeysForMapAreas(e.areas()).join(","):""},getPrimaryKeysForMapAreas:function(e){var a=[];return Bf.each(e,function(e,t){Bf.inArray(t.keys[0],a)<0&&a.push(t.keys[0])}),a},getData:function(e){return"string"==typeof e?this.getDataForKey(e):e&&e.mapster||Df.isElement(e)?this.getDataForArea(e):null},ensureNoHighlight:function(){0<=this.highlightId&&(this.graphics.clearHighlight(),this.data[this.highlightId].changeState("highlight",!1),this.setHighlightId(-1))},setHighlightId:function(e){this.highlightId=e},clearSelections:function(){Bf.each(this.data,function(e,t){t.selected&&t.deselect(!0)}),this.removeSelectionFinish()},setAreaOptions:function(e){for(var t,a,i=(e=e||[]).length-1;0<=i;i--)(t=e[i])&&(a=this.getDataForKey(t.key))&&(Df.updateProps(a.options,t),Df.isBool(t.selected)&&(a.selected=t.selected))},drawSelections:function(e){for(var t=Df.asArray(e),a=t.length-1;0<=a;a--)this.data[t[a]].drawSelection()},redrawSelections:function(){Bf.each(this.data,function(e,t){t.isSelectedOrStatic()&&t.drawSelection()})},initialize:function(){var e,t,a,i,n,s,o,r,c,l=this,u=l.options;if(!l.complete){for((n=(s=Bf(l.image)).parent().attr("id"))&&12<=n.length&&"mapster_wrap"===n.substring(0,12)?(a=s.parent()).attr("id",l.wrapId()):(a=Bf('<div id="'+l.wrapId()+'"></div>'),u.wrapClass&&(!0===u.wrapClass?a.addClass(s[0].className):a.addClass(u.wrapClass))),l.wrapper=a,l.scaleInfo=c=Df.scaleMap(l.images[0],l.images[1],u.scaleMap),l.base_canvas=t=l.graphics.createVisibleCanvas(l),l.overlay_canvas=r=l.graphics.createVisibleCanvas(l),e=Bf(l.images[1]).addClass("mapster_el "+l.images[0].className).attr({id:null,usemap:null}),(n=Df.size(l.images[0])).complete&&e.css({width:n.width,height:n.height}),l.buildDataset(),c={display:"block",position:"relative",padding:0,width:c.width,height:c.height},u.wrapCss&&Bf.extend(c,u.wrapCss),s.parent()[0]!==l.wrapper[0]&&s.before(l.wrapper),a.css(c),Bf(l.images.slice(2)).hide(),i=1;i<l.images.length;i++)a.append(l.images[i]);a.append(t).append(r).append(s.css(Cf.canvas_style)),Df.setOpacity(l.images[0],0),Bf(l.images[1]).show(),Df.setOpacity(l.images[1],1),u.isSelectable&&u.onGetList&&(r=l.data.slice(0),u.sortList&&(o="desc"===u.sortList?function(e,t){return e===t?0:t<e?-1:1}:function(e,t){return e===t?0:e<t?-1:1},r.sort(function(e,t){return e=e.value,t=t.value,o(e,t)})),l.options.boundList=u.onGetList.call(l.image,r)),l.complete=!0,l.processCommandQueue(),u.onConfigured&&"function"==typeof u.onConfigured&&u.onConfigured.call(s,!0)}},buildDataset:function(e){var t,a,i,n,s,o,r,c,l,u,h,d,p,f,m=this,g=m.options;function v(e,t){t=new Cf.AreaData(m,e,t);return t.areaId=m._xref[e]=m.data.push(t)-1,t.areaId}for(m._xref={},m.data=[],e||(m.mapAreas=[]),(f=!g.mapKey)&&(g.mapKey="data-mapster-key"),t=Cf.hasVml()?"area":f?"area[coords]":"area["+g.mapKey+"]",a=Bf(m.map).find(t).off(".mapster"),u=0;u<a.length;u++)if(n=0,p=a[u],s=Bf(p),p.coords){for(f?(o=String(u),s.attr("data-mapster-key",o)):o=p.getAttribute(g.mapKey),e?(r=m.mapAreas[s.data("mapster")-1]).configure(o):(r=new Cf.MapArea(m,p,o),m.mapAreas.push(r)),i=(l=r.keys).length-1;0<=i;i--)c=l[i],g.mapValue&&(h=s.attr(g.mapValue)),f?(n=v(m.data.length,h),(d=m.data[n]).key=c=n.toString()):0<=(n=m._xref[c])?(d=m.data[n],h&&!m.data[n].value&&(d.value=h)):(n=v(c,h),(d=m.data[n]).isPrimary=0===i),r.areaDataXref.push(n),d.areasXref.push(u);(p=s.attr("href"))&&"#"!==p&&!d.href&&(d.href=p),r.nohref||s.on("click.mapster",m.click).on("mouseover.mapster touchstart.mapster.noPreventDefault",m.mouseover).on("mouseout.mapster touchend.mapster.noPreventDefault",m.mouseout).on("mousedown.mapster",m.mousedown),s.data("mapster",u+1)}m.setAreaOptions(g.areas),m.redrawSelections()},processCommandQueue:function(){for(var e;!this.currentAction&&this.commands.length;)e=this.commands[0],this.commands.splice(0,1),Cf.impl[e.command].apply(e.that,e.args)},clearEvents:function(){Bf(this.map).find("area").off(".mapster"),Bf(this.images).off(".mapster")},_clearCanvases:function(e){e||Bf(this.base_canvas).remove(),Bf(this.overlay_canvas).remove()},clearMapData:function(e){this._clearCanvases(e),Bf.each(this.data,function(e,t){t.reset()}),this.data=null,e||(this.image.style.cssText=this.imgCssText,Bf(this.wrapper).before(this.image).remove()),this.images.clear(),this.image=null,Df.ifFunction(this.clearTooltip,this)},removeSelectionFinish:function(){var e=this.graphics;e.refreshSelections(),e.clearHighlight()}},ui=jQuery,vi=ui.mapster,wi=vi.utils,vi.AreaData=function(e,t,a){ui.extend(this,{owner:e,key:t||"",isPrimary:!0,areaId:-1,href:"",value:a||"",options:{},selected:null,areasXref:[],area:null,optsCache:null})},vi.AreaData.prototype={constuctor:vi.AreaData,select:function(e){var t=this,a=t.owner;a.options.singleSelect&&a.clearSelections(),t.isSelected()||(e&&(t.optsCache=ui.extend(t.effectiveRenderOptions("select"),e,{altImageId:a.images.add(e.altImage)})),t.drawSelection(),t.selected=!0,t.changeState("select",!0)),a.options.singleSelect&&a.graphics.refreshSelections()},deselect:function(e){var t=this;t.selected=!1,t.changeState("select",!1),t.optsCache=null,t.owner.graphics.removeSelections(t.areaId),e||t.owner.removeSelectionFinish()},toggle:function(e){return this.isSelected()?this.deselect():this.select(e),this.isSelected()},areas:function(){for(var e=[],t=0;t<this.areasXref.length;t++)e.push(this.owner.mapAreas[this.areasXref[t]]);return e},coords:function(a){var i=[];return ui.each(this.areas(),function(e,t){i=i.concat(t.coords(a))}),i},reset:function(){ui.each(this.areas(),function(e,t){t.reset()}),this.areasXref=[],this.options=null},isSelectedOrStatic:function(){var e=this.effectiveOptions();return wi.isBool(e.staticState)?e.staticState:this.isSelected()},isSelected:function(){return wi.isBool(this.selected)?this.selected:!!wi.isBool(this.owner.area_options.selected)&&this.owner.area_options.selected},isSelectable:function(){return!wi.isBool(this.effectiveOptions().staticState)&&(!wi.isBool(this.owner.options.staticState)&&wi.boolOrDefault(this.effectiveOptions().isSelectable,!0))},isDeselectable:function(){return!wi.isBool(this.effectiveOptions().staticState)&&(!wi.isBool(this.owner.options.staticState)&&wi.boolOrDefault(this.effectiveOptions().isDeselectable,!0))},isNotRendered:function(){var e=ui(this.area);return e.attr("nohref")||!e.attr("href")||this.effectiveOptions().isMask},effectiveOptions:function(e){e=wi.updateProps({},this.owner.area_options,this.options,e||{},{id:this.areaId});return e.selected=this.isSelected(),e},effectiveRenderOptions:function(e,t){var a=this.optsCache;return a&&"highlight"!==e||(t=this.effectiveOptions(t),a=wi.updateProps({},t,t["render_"+e]),"highlight"!==e&&(this.optsCache=a)),ui.extend({},a)},changeState:function(e,t){wi.isFunction(this.owner.options.onStateChange)&&this.owner.options.onStateChange.call(this.owner.image,{key:this.key,state:e,selected:t})},highlight:function(e){var t=this.owner;this.effectiveOptions().highlight&&t.graphics.addShapeGroup(this,"highlight",e),t.setHighlightId(this.areaId),this.changeState("highlight",!0)},drawSelection:function(){this.owner.graphics.addShapeGroup(this,"select")}},vi.MapArea=function(e,t,a){var i;e&&((i=this).owner=e,i.area=t,i.areaDataXref=[],i.originalCoords=[],ui.each(wi.split(t.coords),function(e,t){i.originalCoords.push(parseFloat(t))}),i.length=i.originalCoords.length,i.shape=t.shape.toLowerCase(),i.nohref=t.nohref||!t.href,i.configure(a))},vi.MapArea.prototype={constructor:vi.MapArea,configure:function(e){this.keys=wi.split(e)},reset:function(){this.area=null},coords:function(t){return ui.map(this.originalCoords,function(e){return t?e:e+t})}},lj=jQuery,mj=lj.mapster.utils,mj.areaCorners=function(e,t,a,i,n){var s,o,r,c,l,u,h,d,p,f,m,g,v,y,w,k,b,S,C,_,T=0,A=0,I=[];for(e=e.length?e:[e],s=(a=lj(a||document.body)).offset(),w=s.left,k=s.top,t&&(T=(s=lj(t).offset()).left,A=s.top),y=0;y<e.length;y++)if("AREA"===(_=e[y]).nodeName){switch(b=mj.split(_.coords,parseInt),_.shape){case"circle":for(m=b[0],g=b[1],S=b[2],I=[],y=0;y<360;y+=20)C=y*Math.PI/180,I.push(m+S*Math.cos(C),g+S*Math.sin(C));break;case"rect":I.push(b[0],b[1],b[2],b[1],b[2],b[3],b[0],b[3]);break;default:I=I.concat(b)}for(y=0;y<I.length;y+=2)I[y]=parseInt(I[y],10)+T,I[y+1]=parseInt(I[y+1],10)+A}else s=(_=lj(_)).position(),I.push(s.left,s.top,s.left+_.width(),s.top,s.left+_.width(),s.top+_.height(),s.left,s.top+_.height());for(r=c=h=p=999999,l=u=d=f=-1,y=I.length-2;0<=y;y-=2)m=I[y],g=I[y+1],m<r&&(r=m,f=g),l<m&&(l=m,p=g),g<c&&(c=g,d=m),u<g&&(u=g,h=m);return i&&n&&(o=!1,lj.each([[d-i,c-n],[h,c-n],[r-i,f-n],[r-i,p],[l,f-n],[l,p],[d-i,u],[h,u]],function(e,t){if(!o&&t[0]>w&&t[1]>k)return v=t,!(o=!0)}),o||(v=[l,u])),v},Rj=jQuery,Sj=Rj.mapster,Tj=Sj.utils,Uj=Sj.MapArea.prototype,Sj.utils.getScaleInfo=function(e,t){var a;return t?.98<(a=e.width/t.width||e.height/t.height)&&a<1.02&&(a=1):(a=1,t=e),{scale:1!==a,scalePct:a,realWidth:t.width,realHeight:t.height,width:e.width,height:e.height,ratio:e.width/e.height}},Sj.utils.scaleMap=function(e,t,a){e=Tj.size(e),t=Tj.size(t,!0);if(!t.complete())throw"Another script, such as an extension, appears to be interfering with image loading. Please let us know about this.";return e.complete()||(e=t),this.getScaleInfo(e,a?t:null)},Sj.MapData.prototype.resize=function(t,a,i,n){var s,o,r,c,e,l=this;function u(e,t,a){Sj.hasCanvas()?(e.width=t,e.height=a):(Rj(e).width(t),Rj(e).height(a))}function h(){var e;u(l.overlay_canvas,t,a),0<=c&&((e=l.data[c]).tempOptions={fade:!1},l.getDataForKey(e.key).highlight(),e.tempOptions=null),u(l.base_canvas,t,a),l.redrawSelections(),l.currentAction="",Tj.isFunction(n)&&n(),l.processCommandQueue()}function d(){Rj(l.image).css(r),l.scaleInfo=Tj.getScaleInfo({width:t,height:a},{width:l.scaleInfo.realWidth,height:l.scaleInfo.realHeight}),Rj.each(l.data,function(e,t){Rj.each(t.areas(),function(e,t){t.resize()})})}n=n||i,l.scaleInfo.width===t&&l.scaleInfo.height===a||(c=l.highlightId,t||(e=a/l.scaleInfo.realHeight,t=Math.round(l.scaleInfo.realWidth*e)),a||(e=t/l.scaleInfo.realWidth,a=Math.round(l.scaleInfo.realHeight*e)),r={width:String(t)+"px",height:String(a)+"px"},Sj.hasCanvas()||Rj(l.base_canvas).children().remove(),e=Rj(l.wrapper).find(".mapster_el").add(l.wrapper),i?(o=[],l.currentAction="resizing",e.each(function(e,t){s=Tj.defer(),o.push(s),Rj(t).animate(r,{duration:i,complete:s.resolve,easing:"linear"})}),s=Tj.defer(),o.push(s),Tj.when.all(o).then(h),d(),s.resolve()):(e.css(r),d(),h()))},Sj.MapArea=Tj.subclass(Sj.MapArea,function(){this.base.init(),this.owner.scaleInfo.scale&&this.resize()}),Uj.coords=function(e,t){var a,i=[],n=e||this.owner.scaleInfo.scalePct,s=t||0;if(1===n&&0===t)return this.originalCoords;for(a=0;a<this.length;a++)i.push(Math.round(this.originalCoords[a]*n)+s);return i},Uj.resize=function(){this.area.coords=this.coords().join(",")},Uj.reset=function(){this.area.coords=this.coords(1).join(",")},Sj.impl.resize=function(e,t,a,i){return!(!e&&!t)&&new Sj.Method(this,function(){this.resize(e,t,a,i)},null,{name:"resize",args:arguments}).go()},Lk=jQuery,Mk=Lk.mapster,Nk=Mk.utils,Lk.extend(Mk.defaults,{toolTipContainer:'<div style="border: 2px solid black; background: #EEEEEE; width:160px; padding:4px; margin: 4px; -moz-box-shadow: 3px 3px 5px #535353; -webkit-box-shadow: 3px 3px 5px #535353; box-shadow: 3px 3px 5px #535353; -moz-border-radius: 6px 6px 6px 6px; -webkit-border-radius: 6px; border-radius: 6px 6px 6px 6px; opacity: 0.9;"></div>',showToolTip:!1,toolTipFade:!0,toolTipClose:["area-mouseout","image-mouseout"],onShowToolTip:null,onHideToolTip:null}),Lk.extend(Mk.area_defaults,{toolTip:null,toolTipClose:null}),Mk.MapData.prototype.clearToolTip=function(){this.activeToolTip&&(this.activeToolTip.stop().remove(),this.activeToolTip=null,this.activeToolTipID=null,Nk.ifFunction(this.options.onHideToolTip,this))},Mk.AreaData.prototype.showToolTip=function(e,t){var a,i,n,s,o=this,r=o.owner,c=o.effectiveOptions();if(t=t?Lk.extend({},t):{},e=e||c.toolTip,i=t.closeEvents||c.toolTipClose||r.options.toolTipClose||"tooltip-click",s=void 0!==t.template?t.template:r.options.toolTipContainer,t.closeEvents="string"==typeof i?i=Nk.split(i):i,t.fadeDuration=t.fadeDuration||(r.options.toolTipFade?r.options.fadeDuration||c.fadeDuration:0),n=o.area||Lk.map(o.areas(),function(e){return e.area}),r.activeToolTipID!==o.areaId)return r.clearToolTip(),r.activeToolTip=a=Ok(e,s,t.css),r.activeToolTipID=o.areaId,e=function(){r.clearToolTip()},Qk(i,"area-click","click",Lk(r.map),null,e),Qk(i,"tooltip-click","click",a,null,e),Qk(i,"image-mouseout","mouseout",Lk(r.image),function(e){return e.relatedTarget&&"AREA"!==e.relatedTarget.nodeName&&e.relatedTarget!==o.area},e),Rk(a,n,r.image,t.container,s),Nk.ifFunction(r.options.onShowToolTip,o.area,{toolTip:a,options:{},areaOptions:c,key:o.key,selected:o.isSelected()}),a},Mk.impl.tooltip=function(i,n){return new Mk.Method(this,function(){var e,t,a=this;i?(t=Lk(i),a.activeToolTipID!==t[0]&&(a.clearToolTip(),a.activeToolTip=e=Ok(Sk(n),n.template||a.options.toolTipContainer,n.css),a.activeToolTipID=t[0],Qk(["tooltip-click"],"tooltip-click","click",e,null,function(){a.clearToolTip()}),a.activeToolTip=Rk(e,t,a.image,n.container,n))):a.clearToolTip()},function(){Lk.isPlainObject(i)&&!n&&(n=i),this.showToolTip(Sk(n),n)},{name:"tooltip",args:arguments,key:i}).go()}});
//# sourceMappingURL=jquery.imagemapster.min.js.map