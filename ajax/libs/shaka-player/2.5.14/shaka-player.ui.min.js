!function(){var e="undefined"!=typeof window?window:global,t={};if(function(h,e,t){var n,o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},c=(void 0===h||h!==this)&&void 0!==e&&null!=e?e:this;function u(){u=function(){},c.Symbol||(c.Symbol=r)}var i,r=(i=0,function(e){return"jscomp_symbol_"+(e||"")+i++});function l(){u();var e=(e=c.Symbol.iterator)||(c.Symbol.iterator=c.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&o(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return a(this)}}),l=function(){}}function a(e){var t=0;return d(function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}})}function d(e){return l(),(e={next:e})[c.Symbol.iterator]=function(){return this},e}function Y(e){l();var t=e[Symbol.iterator];return t?t.call(e):a(e)}function s(e,t){if(t){for(var n=c,i=e.split("."),r=0;r<i.length-1;r++){var a=i[r];a in n||(n[a]={}),n=n[a]}(a=t(r=n[i=i[i.length-1]]))!=r&&null!=a&&o(n,i,{configurable:!0,writable:!0,value:a})}}function f(t){function r(e){return t.next(e)}function a(e){return t.throw(e)}return new Promise(function(n,i){!function e(t){t.done?n(t.value):Promise.resolve(t.value).then(r,a).then(e,i)}(t.next())})}function $(e){return f(e())}s("Promise",function(e){function s(e){this.b=0,this.g=void 0,this.a=[];var t=this.c();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function t(){this.a=null}function u(t){return t instanceof s?t:new s(function(e){e(t)})}if(e)return e;t.prototype.b=function(e){null==this.a&&(this.a=[],this.f()),this.a.push(e)},t.prototype.f=function(){var e=this;this.c(function(){e.j()})};var n=c.setTimeout;t.prototype.c=function(e){n(e,0)},t.prototype.j=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.g(e)}}}this.a=null},t.prototype.g=function(e){this.c(function(){throw e})},s.prototype.c=function(){function e(t){return function(e){i||(i=!0,t.call(n,e))}}var n=this,i=!1;return{resolve:e(this.w),reject:e(this.f)}},s.prototype.w=function(e){if(e===this)this.f(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof s)this.B(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.v(e):this.j(e)}},s.prototype.v=function(e){var t=void 0;try{t=e.then}catch(e){return void this.f(e)}"function"==typeof t?this.G(t,e):this.j(e)},s.prototype.f=function(e){this.l(2,e)},s.prototype.j=function(e){this.l(1,e)},s.prototype.l=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.g=t,this.s()},s.prototype.s=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)r.b(this.a[e]);this.a=null}};var r=new t;return s.prototype.B=function(e){var t=this.c();e.Ic(t.resolve,t.reject)},s.prototype.G=function(e,t){var n=this.c();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},s.prototype.then=function(e,t){function n(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(e){r(e)}}:e}var i,r,a=new s(function(e,t){i=e,r=t});return this.Ic(n(e,i),n(t,r)),a},s.prototype.catch=function(e){return this.then(void 0,e)},s.prototype.Ic=function(e,t){function n(){switch(i.b){case 1:e(i.g);break;case 2:t(i.g);break;default:throw Error("Unexpected state: "+i.b)}}var i=this;null==this.a?r.b(n):this.a.push(n)},s.resolve=u,s.reject=function(n){return new s(function(e,t){t(n)})},s.race=function(r){return new s(function(e,t){for(var n=Y(r),i=n.next();!i.done;i=n.next())u(i.value).Ic(e,t)})},s.all=function(e){var a=Y(e),o=a.next();return o.done?u([]):new s(function(n,e){function t(t){return function(e){i[t]=e,0==--r&&n(i)}}for(var i=[],r=0;i.push(void 0),r++,u(o.value).Ic(t(i.length-1),e),!(o=a.next()).done;);})},s}),s("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(e){return Promise.resolve(t()).then(function(){return e})},function(e){return Promise.resolve(t()).then(function(){throw e})})}});var p,m,g="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)p=Object.setPrototypeOf;else{e:{var v={};try{v.__proto__={Gf:!0},m=v.Gf;break e}catch(e){}m=!1}p=m?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var b=p;function y(e,t){if(e.prototype=g(t.prototype),e.prototype.constructor=e,b)b(e,t);else for(var n in t){var i;"prototype"!=n&&(Object.defineProperties?(i=Object.getOwnPropertyDescriptor(t,n))&&Object.defineProperty(e,n,i):e[n]=t[n])}e.Dh=t.prototype}function E(){this.g=!1,this.c=null,this.A=void 0,this.o=1,this.b=this.f=0,this.l=this.a=null}function w(e){if(e.g)throw new TypeError("Generator is already running");e.g=!0}function T(e,t){e.a={Fe:t,Re:!0},e.o=e.f||e.b}function J(e,t,n){return e.o=n,{value:t}}function j(e){e.o=0}function Z(e,t,n){e.f=t,null!=n&&(e.b=n)}function L(e,t){e.f=0,e.b=t||0}function Q(e,t){e.o=t,e.f=0}function ee(e){e.f=0;var t=e.a.Fe;return e.a=null,t}function U(e){e.l=[e.a],e.f=0,e.b=0}function _(e,t){var n=e.l.splice(0)[0];(n=e.a=e.a||n)?n.Re?e.o=e.f||e.b:null!=n.C&&e.b<n.C?(e.o=n.C,e.a=null):e.o=e.b:e.o=t}function S(e){this.a=new E,this.b=e}function A(t,e,n,i){try{var r=e.call(t.a.c,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return t.a.g=!1,r;var a=r.value}catch(e){return t.a.c=null,T(t.a,e),I(t)}return t.a.c=null,i.call(t.a,a),I(t)}function I(t){for(;t.a.o;)try{var e=t.b(t.a);if(e)return t.a.g=!1,{value:e.value,done:!1}}catch(e){t.a.A=void 0,T(t.a,e)}if(t.a.g=!1,t.a.a){if(e=t.a.a,t.a.a=null,e.Re)throw e.Fe;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function k(t){this.next=function(e){return w(t.a),e=t.a.c?A(t,t.a.c.next,e,t.a.j):(t.a.j(e),I(t))},this.throw=function(e){return w(t.a),e=t.a.c?A(t,t.a.c.throw,e,t.a.j):(T(t.a,e),I(t))},this.return=function(e){return function(e,t){w(e.a);var n=e.a.c;return n?A(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.a.return):(e.a.return(t),I(e))}(t,e)},l(),this[Symbol.iterator]=function(){return this}}function te(e,t){return k.prototype=e.prototype,new k(new S(t))}function x(e){if(!(e instanceof Array)){e=Y(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function N(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Oe:r,Af:a}}return{Oe:-1,Af:void 0}}function P(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}E.prototype.j=function(e){this.A=e},E.prototype.return=function(e){this.a={return:e},this.o=this.b},E.prototype.C=function(e){this.o=e},s("WeakMap",function(i){function e(e){if(this.a=(a+=Math.random()+1).toString(),e){u(),l(),e=Y(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(e){C(e,r)||o(e,r,{value:{}})}function t(e){var t=Object[e];t&&(Object[e]=function(e){return n(e),t(e)})}if(function(){if(i&&Object.seal)try{var e=Object.seal({}),t=Object.seal({}),n=new i([[e,2],[t,3]]);return 2!=n.get(e)||3!=n.get(t)?void 0:(n.delete(e),n.set(t,4),!n.has(e)&&4==n.get(t))}catch(e){return}}())return i;var r="$jscomp_hidden_"+Math.random();t("freeze"),t("preventExtensions"),t("seal");var a=0;return e.prototype.set=function(e,t){if(n(e),!C(e,r))throw Error("WeakMap key fail: "+e);return e[r][this.a]=t,this},e.prototype.get=function(e){return C(e,r)?e[r][this.a]:void 0},e.prototype.has=function(e){return C(e,r)&&C(e[r],this.a)},e.prototype.delete=function(e){return!(!C(e,r)||!C(e[r],this.a))&&delete e[r][this.a]},e}),s("Map",function(r){function n(){var e={};return e.fb=e.next=e.head=e}function e(e,t){var n=e.a;return d(function(){if(n){for(;n.head!=e.a;)n=n.fb;if(n.next!=n.head)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++s,o.set(t,n)):n="p_"+t;var i=e.b[n];if(i&&C(e.b,n))for(var r=0;r<i.length;r++){var a=i[r];if(t!=t&&a.key!=a.key||t===a.key)return{id:n,list:i,index:r,qa:a}}return{id:n,list:i,index:-1,qa:void 0}}function t(e){if(this.b={},this.a=n(),this.size=0,e){e=Y(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}if(function(){if(r&&"function"==typeof r&&r.prototype.entries&&"function"==typeof Object.seal)try{var e=Object.seal({x:4}),t=new r(Y([[e,"s"]]));if("s"!=t.get(e)||1!=t.size||t.get({x:4})||t.set({x:4},"t")!=t||2!=t.size)return;var n=t.entries(),i=n.next();return i.done||i.value[0]!=e||"s"!=i.value[1]?void 0:!((i=n.next()).done||4!=i.value[0].x||"t"!=i.value[1]||!n.next().done)}catch(e){return}}())return r;u(),l();var o=new WeakMap;t.prototype.set=function(e,t){var n=i(this,e);return n.list||(n.list=this.b[n.id]=[]),n.qa?n.qa.value=t:(n.qa={next:this.a,fb:this.a.fb,head:this.a,key:e,value:t},n.list.push(n.qa),this.a.fb.next=n.qa,this.a.fb=n.qa,this.size++),this},t.prototype.delete=function(e){return!(!(e=i(this,e)).qa||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.b[e.id],e.qa.fb.next=e.qa.next,e.qa.next.fb=e.qa.fb,e.qa.head=null,this.size--,!0)},t.prototype.clear=function(){this.b={},this.a=this.a.fb=n(),this.size=0},t.prototype.has=function(e){return!!i(this,e).qa},t.prototype.get=function(e){return(e=i(this,e).qa)&&e.value},t.prototype.entries=function(){return e(this,function(e){return[e.key,e.value]})},t.prototype.keys=function(){return e(this,function(e){return e.key})},t.prototype.values=function(){return e(this,function(e){return e.value})},t.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},t.prototype[Symbol.iterator]=t.prototype.entries;var s=0;return t}),s("Set",function(r){function e(e){if(this.a=new Map,e){e=Y(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.a.size}return function(){if(r&&"function"==typeof r&&r.prototype.entries&&"function"==typeof Object.seal)try{var e=Object.seal({x:4}),t=new r(Y([e]));if(!t.has(e)||1!=t.size||t.add(e)!=t||1!=t.size||t.add({x:4})!=t||2!=t.size)return;var n=t.entries(),i=n.next();return i.done||i.value[0]!=e||i.value[1]!=e?void 0:!(i=n.next()).done&&i.value[0]!=e&&4==i.value[0].x&&i.value[1]==i.value[0]&&n.next().done}catch(e){return}}()?r:(u(),l(),e.prototype.add=function(e){return this.a.set(e,e),this.size=this.a.size,this},e.prototype.delete=function(e){return e=this.a.delete(e),this.size=this.a.size,e},e.prototype.clear=function(){this.a.clear(),this.size=0},e.prototype.has=function(e){return this.a.has(e)},e.prototype.entries=function(){return this.a.entries()},e.prototype.keys=e.prototype.values=function(){return this.a.values()},e.prototype[Symbol.iterator]=e.prototype.values,e.prototype.forEach=function(t,n){var i=this;this.a.forEach(function(e){return t.call(n,e,e,i)})},e)}),s("Array.prototype.keys",function(e){return e||function(){return function(t,n){l(),t instanceof String&&(t+="");var i=0,r={next:function(){if(i<t.length){var e=i++;return{value:n(e,t[e]),done:!1}}return r.next=function(){return{done:!0,value:void 0}},r.next()}};return r[Symbol.iterator]=function(){return r},r}(this,function(e){return e})}}),s("Array.from",function(e){return e||function(e,t,n){l(),t=null!=t?t:function(e){return e};var i=[],r=e[Symbol.iterator];if("function"==typeof r)for(e=r.call(e);!(r=e.next()).done;)i.push(t.call(n,r.value));else{r=e.length;for(var a=0;a<r;a++)i.push(t.call(n,e[a]))}return i}}),s("Array.prototype.findIndex",function(e){return e||function(e,t){return N(this,e,t).Oe}}),s("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),s("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length,r=t||0;for(r<0&&(r=Math.max(r+i,0));r<i;r++){var a=n[r];if(a===e||Object.is(a,e))return!0}return!1}}),s("String.prototype.includes",function(e){return e||function(e,t){return-1!==P(this,e,"includes").indexOf(e,t||0)}}),s("String.prototype.startsWith",function(e){return e||function(e,t){for(var n=P(this,e,"startsWith"),i=n.length,r=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<r&&a<i;)if(n[a++]!=e[o++])return!1;return r<=o}}),s("Array.prototype.find",function(e){return e||function(e,t){return N(this,e,t).Af}});var M="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)C(i,r)&&(e[r]=i[r])}return e};s("Object.assign",function(e){return e||M});var R=this;function O(e,t){var n,i=e.split("."),r=R;i[0]in r||!r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]?r[n]:r[n]={}:r[n]=t}function D(e,i){function t(){}t.prototype=i.prototype,e.Dh=i.prototype,e.prototype=new t,(e.prototype.constructor=e).base=function(e,t,n){return i.prototype[t].apply(e,Array.prototype.slice.call(arguments,2))}}function F(e,t){for(var n in t=void 0===t?{}:t)this[n]=t[n];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=h.performance&&h.performance.now?h.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}R.a=!0,F.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},F.prototype.stopImmediatePropagation=function(){this.a=!0},F.prototype.stopPropagation=function(){};var ne={Lb:0,Gc:function(){},ba:function(){},error:function(){},u:function(){},info:function(){},debug:function(){},I:function(){},N:function(){}};function K(){this.a={}}function B(){this.Bd=new K,this.Dc=this}function G(e,t){for(var n=[],i=Y(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}function V(e,t){for(var n=Y(e),i=n.next();!i.done;i=n.next())if(!t(i.value))return!1;return!0}function z(e,t){for(var n=[],i=Y(e),r=i.next();!r.done;r=i.next())t(r=r.value)&&n.push(r);return n}function H(e,t){return e=q(e),t=q(t),e.split("-")[0]==t.split("-")[0]}function W(e,t){e=q(e),t=q(t);var n=e.split("-"),i=t.split("-");return n[0]==i[0]&&1==n.length&&2==i.length}function q(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=ae.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function X(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),ae.get(e)||e}function ie(e){return e.language?q(e.language):e.audio&&e.audio.language?q(e.audio.language):e.video&&e.video.language?q(e.video.language):"und"}function re(e,t){for(var n=q(e),i=new Set,r=Y(t),a=r.next();!a.done;a=r.next())i.add(q(a.value));for(a=(r=Y(i)).next();!a.done;a=r.next())if((a=a.value)==n)return a;for(a=(r=Y(i)).next();!a.done;a=r.next())if(W(a=a.value,n))return a;for(a=(r=Y(i)).next();!a.done;a=r.next()){var o=n,s=q(s=a=a.value),o=q(o);if(s=s.split("-"),o=o.split("-"),2==s.length&&2==o.length&&s[0]==o[0])return a}for(a=(i=Y(i)).next();!a.done;a=i.next())if(W(n,r=a.value))return r;return null}h.console&&h.console.log.bind&&(ne.ba=console.warn.bind(console),ne.Gc=console.error.bind(console),1<=ne.Lb&&(ne.error=console.error.bind(console)),2<=ne.Lb&&(ne.u=console.warn.bind(console)),3<=ne.Lb&&(ne.info=console.info.bind(console)),4<=ne.Lb&&(ne.debug=console.log.bind(console)),5<=ne.Lb&&(ne.I=console.debug.bind(console)),6<=ne.Lb&&(ne.N=console.debug.bind(console))),(n=K.prototype).push=function(e,t){this.a.hasOwnProperty(e)?this.a[e].push(t):this.a[e]=[t]},n.get=function(e){return(e=this.a[e])?e.slice():null},n.getAll=function(){var e,t=[];for(e in this.a)t.push.apply(t,this.a[e]);return t},n.remove=function(e,t){var n=this.a[e];if(n)for(var i=0;i<n.length;++i)n[i]==t&&(n.splice(i,1),--i)},n.forEach=function(e){for(var t in this.a)e(t,this.a[t])},B.prototype.addEventListener=function(e,t){this.Bd.push(e,t)},B.prototype.removeEventListener=function(e,t){this.Bd.remove(e,t)},B.prototype.dispatchEvent=function(e){for(var t=this.Bd.get(e.type)||[],n=0;n<t.length;++n){e.target=this.Dc,e.currentTarget=this.Dc;var i=t[n];try{i.handleEvent?i.handleEvent(e):i.call(this,e)}catch(e){ne.error("Uncaught exception in event handler",e,e?e.message:null,e?e.stack:null)}if(e.a)break}return e.defaultPrevented};var ae=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function oe(e){this.g=q(e),this.f=new Map,this.b=new Set,this.c=new Map,this.a=new B}function se(n){for(var e=n.c,t=n.g,i=n.b,r=new Set,a={},o=Y(i),s=o.next();!s.done;a={locale:a.locale},s=o.next()){a.locale=s.value,r.add(a.locale),r.add(X(a.locale)),(s=z(e.keys(),function(r){return function(e){var t=r.locale,n=X(e),i=X(t);return e!=n&&t!=i&&n==i}}(a))).sort();for(var u=Y(s),s=u.next();!s.done;s=u.next())r.add(s.value);for((s=z(e.keys(),function(t){return function(e){return X(e)==t.locale}}(a))).sort(),s=(u=Y(s)).next();!s.done;s=u.next())r.add(s.value)}for(r.add(t),t=[],s=(r=Y(r)).next();!s.done;s=r.next())(s=e.get(s.value))&&t.push(s);for(t.reverse(),n.f.clear(),s=(e=Y(t)).next();!s.done;s=e.next())s.value.forEach(function(e,t){n.f.set(t,e)});for(e=n.f.keys(),r=new Set,s=(t=Y(n.b)).next();!s.done;s=t.next())ue(s=n.c.get(s.value)||new Map,e,r);0<r.size&&(i={locales:Array.from(i),missing:Array.from(r)},n.a.dispatchEvent(new F("missing-localizations",i)))}function ue(e,t,n){for(var i=(t=Y(t)).next();!i.done;i=t.next())i=i.value,e.get(i)||n.add(i)}O("shaka.ui.Localization",oe),oe.prototype.addEventListener=oe.prototype.addEventListener=function(e,t,n){this.a.addEventListener(e,t,n)},oe.prototype.removeEventListener=oe.prototype.removeEventListener=function(e,t,n){this.a.removeEventListener(e,t,n||void 0)},oe.prototype.dispatchEvent=oe.prototype.dispatchEvent=function(e){return this.a.dispatchEvent(e)},oe.prototype.changeLocale=oe.prototype.Ae=function(e){var t=this;this.b.clear();for(var n=(e=Y(e)).next();!n.done;n=e.next())this.b.add(q(n.value));se(this),this.a.dispatchEvent(new F("locale-changed")),(e=z(this.b,function(e){return!t.c.has(e)})).length&&this.a.dispatchEvent(new F("unknown-locales",{locales:e}))},oe.prototype.insert=oe.prototype.aa=function(e,t,n){var i=ce;e=q(e),void 0===n&&(n=i.Ff);var r=this.c.get(e)||new Map;return t.forEach(function(e,t){r.has(t)&&n!=i.Ff||r.set(t,e)}),this.c.set(e,r),se(this),this.a.dispatchEvent(new F("locale-updated")),this},oe.prototype.resolveDictionary=oe.prototype.mh=function(e){for(var t=Y(e.keys()),n=t.next();!n.done;n=t.next())n=n.value,e.set(n,this.resolve(n))},oe.prototype.resolve=oe.prototype.resolve=function(e){var t=this.f.get(e);return t||(e={locales:Array.from(this.b),missing:e},this.a.dispatchEvent(new F("unknown-localization",e)),"")};var ce={USE_OLD:0,USE_NEW:1};function le(e){this.c=Math.exp(Math.log(.5)/e),this.b=this.a=0}function de(e,t,n){var i=Math.pow(e.c,t);n=n*(1-i)+i*e.a,isNaN(n)||(e.a=n,e.b+=t)}function he(e){return e.a/(1-Math.pow(e.c,e.b))}function fe(){this.b=new le(2),this.c=new le(5),this.a=0}oe.ConflictResolution=ce,oe.UNKNOWN_LOCALES="unknown-locales",oe.UNKNOWN_LOCALIZATION="unknown-localization",oe.MISSING_LOCALIZATIONS="missing-localizations",oe.LOCALE_CHANGED="locale-changed",oe.LOCALE_UPDATED="locale-updated",fe.prototype.getBandwidthEstimate=function(e){return this.a<128e3?e:Math.min(he(this.b),he(this.c))};var pe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function me(e){var t;e instanceof me?(ge(this,e.Pa),this.Ib=e.Ib,this.Oa=e.Oa,ve(this,e.cc),this.Ca=e.Ca,be(this,e.a.clone()),this.wb=e.wb):e&&(t=String(e).match(pe))?(ge(this,t[1]||"",!0),this.Ib=ye(t[2]||""),this.Oa=ye(t[3]||"",!0),ve(this,t[4]),this.Ca=ye(t[5]||"",!0),be(this,t[6]||"",!0),this.wb=ye(t[7]||"")):this.a=new xe(null)}function ge(e,t,n){e.Pa=n?ye(t,!0):t,e.Pa&&(e.Pa=e.Pa.replace(/:$/,""))}function ve(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.cc=t}else e.cc=null}function be(e,t,n){t instanceof xe?e.a=t:(n||(t=Ee(t,Ie)),e.a=new xe(t))}function ye(e,t){return e?(t?decodeURI:decodeURIComponent)(e):""}function Ee(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,we),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function we(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(n=me.prototype).Pa="",n.Ib="",n.Oa="",n.cc=null,n.Ca="",n.wb="",n.toString=function(){var e,t=[],n=this.Pa;return n&&t.push(Ee(n,Te,!0),":"),(n=this.Oa)&&(t.push("//"),(e=this.Ib)&&t.push(Ee(e,Te,!0),"@"),t.push(encodeURIComponent(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.cc)&&t.push(":",String(n))),(n=this.Ca)&&(this.Oa&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ee(n,"/"==n.charAt(0)?Ae:Se,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.wb)&&t.push("#",Ee(n,ke)),t.join("")},n.resolve=function(e){var t=this.clone();"data"===t.Pa&&(t=new me);var n=!!e.Pa;n?ge(t,e.Pa):n=!!e.Ib,n?t.Ib=e.Ib:n=!!e.Oa,n?t.Oa=e.Oa:n=null!=e.cc;var i,r=e.Ca;if(n)ve(t,e.cc);else if(n=!!e.Ca){if("/"!=r.charAt(0)&&(this.Oa&&!this.Ca?r="/"+r:-1!=(i=t.Ca.lastIndexOf("/"))&&(r=t.Ca.substr(0,i+1)+r)),".."==r||"."==r)r="";else if(-1!=r.indexOf("./")||-1!=r.indexOf("/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var a=[],o=0;o<r.length;){var s=r[o++];"."==s?i&&o==r.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),i&&o==r.length&&a.push("")):(a.push(s),i=!0)}r=a.join("/")}}return n?t.Ca=r:n=""!==e.a.toString(),n?be(t,e.a.clone()):n=!!e.wb,n&&(t.wb=e.wb),t},n.clone=function(){return new me(this)};var Te=/[#\/\?@]/g,Se=/[#\?:]/g,Ae=/[#\?]/g,Ie=/[#\?@]/g,ke=/#/g;function xe(e){this.a=e||null}function Ce(e){this.b=e,this.a=null}function Ne(e){this.b=e,this.a=null}function Pe(e,t){var n=Re();this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.f=null==e.baseDelay?n.baseDelay:e.baseDelay,this.j=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.g=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.a=0,this.b=this.f,(this.c=void 0!==t&&t)&&(this.a=1)}function Me(i){return $(function e(){var t,n;return te(e,function(e){switch(e.o){case 1:if(i.a>=i.l){if(!i.c)return e.return(Promise.reject());i.a=1,i.b=i.f}return(t=i.a,i.a++,0==t)?e.return():(n=i.b*(1+(2*Math.random()-1)*i.j),J(e,new Promise(function(e){new Ne(e).R(n/1e3)}),2));case 2:i.b*=i.g,j(e)}})})}function Re(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:0}}function Le(e,t,n,i){for(var r=[],a=3;a<arguments.length;++a)r[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}function Ue(){var n,i,e=new Promise(function(e,t){n=e,i=t});return e.resolve=n,e.reject=i,e}function _e(e,t){this.promise=e,this.Ve=t,this.a=!1}function Oe(e){return new _e(Promise.reject(e),function(){return Promise.resolve()})}function De(){var e=Promise.reject(new Le(2,7,7001));return e.catch(function(){}),new _e(e,function(){return Promise.resolve()})}function Fe(e){return new _e(Promise.resolve(e),function(){return Promise.resolve()})}function je(e){return new _e(e,function(){return e.catch(function(){})})}function Ke(e){return new _e(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function Be(e){var a=new Set;return function e(t){switch(typeof t){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return t;default:if(!t||t.buffer&&t.buffer.constructor==ArrayBuffer)return t;if(a.has(t))return null;var n=t.constructor==Array;if(t.constructor!=Object&&!n)return null;a.add(t);var i,r=n?[]:{};for(i in t)r[i]=e(t[i]);return n&&(r.length=t.length),r}}(e)}function Ge(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Ve(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function ze(e,t,n){if(n=n||Ge,e.length!=t.length)return!1;t=t.slice();for(var i={},r=(e=Y(e)).next();!r.done;i={item:i.item},r=e.next()){if(i.item=r.value,-1==(r=t.findIndex(function(t){return function(e){return n(t.item,e)}}(i))))return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function He(){this.a=[]}function We(e,t){e.a.push(t.finally(function(){Ve(e.a,t)}))}function qe(e){B.call(this),this.f=!1,this.g=new He,this.a=new Set,this.b=new Set,this.c=e||null}(n=xe.prototype).Aa=null,n.Lc=null,n.add=function(e,t){if(!this.Aa&&(this.Aa={},this.Lc=0,this.a))for(var n=this.a.split("&"),i=0;i<n.length;i++){var r,a=n[i].indexOf("="),o=null;0<=a?(r=n[i].substring(0,a),o=n[i].substring(a+1)):r=n[i],r=decodeURIComponent(r.replace(/\+/g," ")),o=o||"",this.add(r,decodeURIComponent(o.replace(/\+/g," ")))}return this.a=null,(n=this.Aa.hasOwnProperty(e)&&this.Aa[e])||(this.Aa[e]=n=[]),n.push(t),this.Lc++,this},n.toString=function(){if(this.a)return this.a;if(!this.Aa)return"";var e,t=[];for(e in this.Aa)for(var n=encodeURIComponent(e),i=this.Aa[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.a=t.join("&")},n.clone=function(){var e=new xe;if(e.a=this.a,this.Aa){var t,n={};for(t in this.Aa)n[t]=this.Aa[t].concat();e.Aa=n,e.Lc=this.Lc}return e},Ce.prototype.R=function(e){var t=this;this.stop();var n=!0,i=null;return this.a=function(){h.clearTimeout(i),n=!1},i=h.setTimeout(function(){n&&t.b()},1e3*e),this},Ce.prototype.stop=function(){this.a&&(this.a(),this.a=null)},O("shaka.util.Timer",Ne),Ne.prototype.tickNow=Ne.prototype.gb=function(){return this.stop(),this.b(),this},Ne.prototype.tickAfter=Ne.prototype.R=function(e){var t=this;return this.stop(),this.a=new Ce(function(){t.b()}).R(e),this},Ne.prototype.tickEvery=Ne.prototype.Ua=function(e){var t=this;return this.stop(),this.a=new Ce(function(){t.a.R(e),t.b()}).R(e),this},Ne.prototype.stop=Ne.prototype.stop=function(){this.a&&(this.a.stop(),this.a=null)},O("shaka.util.Error",Le),Le.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},Le.Severity={RECOVERABLE:1,CRITICAL:2},Le.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},Le.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013},Ue.prototype.resolve=function(){},Ue.prototype.reject=function(){},O("shaka.util.AbortableOperation",_e),_e.failed=Oe,_e.aborted=De,_e.completed=Fe,_e.notAbortable=je,_e.prototype.abort=_e.prototype.abort=function(){return this.a=!0,this.Ve()},_e.all=Ke,_e.prototype.finally=_e.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},_e.prototype.chain=_e.prototype.ma=function(i,r){function e(n){return function(e){var t;o.a&&n?s.reject(u):(t=n?i:r)?a=function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(t,e,s):(n?s.resolve:s.reject)(e)}}function a(){return s.reject(u),o.abort()}var o=this,s=new Ue,u=new Le(2,7,7001);return this.promise.then(e(!0),e(!1)),new _e(s,function(){return a()})},He.prototype.destroy=function(){var t=[];return this.a.forEach(function(e){e.promise.catch(function(){}),t.push(e.abort())}),this.a=[],Promise.all(t)},D(qe,B),O("shaka.net.NetworkingEngine",qe),qe.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4},qe.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3};var Xe={};function Ye(e,t,n){n=n||3;var i=Xe[e];(!i||n>=i.priority)&&(Xe[e]={priority:n,bh:t})}function $e(e,t){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null}}function Je(){this.a=0}function Ze(e,t,n){_e.call(this,e,t),this.b=n}function Qe(){}function et(){this.a=new K}function tt(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.a=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),function(e){var t=nt;if(null==t){t=!1;try{var n={},i={get:function(){return!(t=!0)}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}nt=t}return t}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.a)}qe.registerScheme=Ye,qe.unregisterScheme=function(e){delete Xe[e]},qe.prototype.registerRequestFilter=qe.prototype.eh=function(e){this.a.add(e)},qe.prototype.unregisterRequestFilter=qe.prototype.Eh=function(e){this.a.delete(e)},qe.prototype.clearAllRequestFilters=qe.prototype.Mf=function(){this.a.clear()},qe.prototype.registerResponseFilter=qe.prototype.fh=function(e){this.b.add(e)},qe.prototype.unregisterResponseFilter=qe.prototype.Fh=function(e){this.b.delete(e)},qe.prototype.clearAllResponseFilters=qe.prototype.Nf=function(){this.b.clear()},qe.defaultRetryParameters=Re,qe.makeRequest=$e,qe.prototype.destroy=qe.prototype.destroy=function(){return this.f=!0,this.a.clear(),this.b.clear(),this.g.destroy()},qe.prototype.request=qe.prototype.request=function(i,e){var r=this,t=new Je;if(this.f){var n=Promise.reject(new Le(2,7,7001));return n.catch(function(){}),new Ze(n,function(){return Promise.resolve()},t)}e.method=e.method||"GET",e.headers=e.headers||{},e.retryParameters=e.retryParameters?Be(e.retryParameters):Re(),e.uris=Be(e.uris);var a=(n=function(e,t,n){for(var i=Fe(void 0),r={},a=(e=Y(e.a)).next();!a.done;r={Xd:r.Xd},a=e.next())r.Xd=a.value,i=i.ma(function(e){return function(){return e.Xd(t,n)}}(r));return i.ma(void 0,function(e){if(e&&7001==e.code)throw e;throw new Le(2,1,1006,e)})}(this,i,e)).ma(function(){return function t(i,r,n,a,o,s,u){var e=new me(n.uris[o]),c=e.Pa,l=!1;c||(c=location.protocol,c=c.slice(0,-1),ge(e,c),n.uris[o]=e.toString());c=c.toLowerCase();var d=(c=Xe[c])?c.bh:null;if(!d)return Oe(new Le(2,1,1e3,e));var h;return je(Me(a)).ma(function(){return i.f?De():(h=Date.now(),d(n.uris[o],n,r,function(e,t,n){i.c&&1==r&&(i.c(e,t),l=!0,u.a=n)}))}).ma(function(e){return null==e.timeMs&&(e.timeMs=Date.now()-h),{response:e,zg:l}},function(e){if(e&&7001==e.code)throw e;if(i.f)return De();if(e&&1==e.severity)return i.dispatchEvent(new F("retry",{error:e instanceof Le?e:null})),o=(o+1)%n.uris.length,t(i,r,n,a,o,e,u);throw e||s})}(r,i,e,new Pe(e.retryParameters,!1),0,null,t)}),o=a.ma(function(e){return function(e,t,n){for(var i=Fe(void 0),r=(e=Y(e.b)).next();!r.done;r=e.next())i=i.ma(r.value.bind(null,t,n.response));return i.ma(function(){return n},function(e){if(e&&7001==e.code)throw e;var t=2;throw e instanceof Le&&(t=e.severity),new Le(t,1,1007,e)})}(r,i,e)}),s=Date.now(),u=0;n.promise.then(function(){u=Date.now()-s},function(){});var c=0;return a.promise.then(function(){c=Date.now()},function(){}),n=new Ze((n=o.ma(function(e){var t=Date.now()-c,n=e.response;return n.timeMs+=u,n.timeMs+=t,e.zg||!r.c||n.fromCache||1!=i||r.c(n.timeMs,n.data.byteLength),n},function(e){throw e&&(e.severity=2),e})).promise,n.Ve,t),We(this.g,n),n},qe.NumBytesRemainingClass=Je,y(Ze,_e),(qe.PendingRequest=Ze).all=Ke,Ze.notAbortable=je,Ze.completed=Fe,Ze.aborted=De,Ze.failed=Oe,O("shaka.util.IReleasable",Qe),Qe.prototype.release=function(){},O("shaka.util.EventManager",et),et.prototype.release=et.prototype.release=function(){this.Gb(),this.a=null},et.prototype.listen=et.prototype.m=function(e,t,n,i){this.a&&(e=new tt(e,t,n,i),this.a.push(t,e))},et.prototype.listenOnce=et.prototype.Ha=function(n,i,r,e){var a=this;this.m(n,i,function e(t){a.xa(n,i,e),r(t)},e)},et.prototype.unlisten=et.prototype.xa=function(e,t,n){if(this.a)for(var i=this.a.get(t)||[],r=(i=Y(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.xa(),this.a.remove(t,r))},et.prototype.removeAll=et.prototype.Gb=function(){if(this.a){for(var e=this.a.getAll(),t=(e=Y(e)).next();!t.done;t=e.next())t.value.xa();this.a.a={}}},tt.prototype.unlisten=tt.prototype.xa=function(){this.target.removeEventListener(this.type,this.listener,this.a),this.listener=this.target=null,this.a=!1};var nt=void 0;function it(e){return new me(e=wt(e)).Oa}function rt(e,t,n){function i(e){new DataView(r.buffer).setUint32(a,e.byteLength,!0),a+=4,r.set(e,a),a+=e.byteLength}if(!n||!n.byteLength)throw new Le(2,6,6015);t="string"==typeof t?new Uint8Array(St(t,!0)):new Uint8Array(t),e=St(e=wt(e),!0);var r=new Uint8Array(12+e.byteLength+t.byteLength+n.byteLength),a=0;return i(new Uint8Array(e)),i(t),i(new Uint8Array(n)),r}function at(t){var n=new Map;return Object.keys(t).forEach(function(e){n.set(e,t[e])}),n}function ot(e){var n={};return e.forEach(function(e,t){n[t]=e}),n}function st(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function ut(e){var t=(e=e.split("."))[0];return e.pop(),[t,e.join(".")]}O("shaka.util.FairPlayUtils.defaultGetContentId",it),O("shaka.util.FairPlayUtils.initDataTransform",rt);var ct=(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function lt(){return!(!h.MediaSource||!MediaSource.isTypeSupported)}function dt(e){return""!=gt().canPlayType(e)}function ht(){return mt("Tizen")}function ft(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!ht()}function pt(){if(!ft())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return(e=e||navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function mt(e){return(navigator.userAgent||"").includes(e)}function gt(){return bt||(vt=vt||new Ne(function(){bt=null}),(bt=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(bt=document.createElement("video")),vt.R(1),bt)}var vt=null,bt=null;function yt(e){if(!e)return"";239==(e=new Uint8Array(e))[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=At(e),e=escape(e);try{return decodeURIComponent(e)}catch(e){throw new Le(2,2,2004)}}function Et(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw ne.error("Data has an incorrect length, must be even."),new Le(2,2,2004);var i=e instanceof ArrayBuffer?e:((n=new Uint8Array(e.byteLength)).set(new Uint8Array(e)),n.buffer);e=Math.floor(e.byteLength/2),n=new Uint16Array(e),i=new DataView(i);for(var r=0;r<e;r++)n[r]=i.getUint16(2*r,t);return At(n)}function wt(e){var t=new Uint8Array(e);if(239==t[0]&&187==t[1]&&191==t[2])return yt(t);if(254==t[0]&&255==t[1])return Et(t.subarray(2),!1);if(255==t[0]&&254==t[1])return Et(t.subarray(2),!0);var n=function(e,t){return e.byteLength<=t||32<=e[t]&&e[t]<=126}.bind(null,t);if(ne.debug("Unable to find byte-order-mark, making an educated guess."),0==t[0]&&0==t[2])return Et(e,!1);if(0==t[1]&&0==t[3])return Et(e,!0);if(n(0)&&n(1)&&n(2)&&n(3))return yt(e);throw new Le(2,2,2003)}function Tt(e){e=encodeURIComponent(e),e=unescape(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t.buffer}function St(e,t){for(var n=new Uint8Array(2*e.length),i=new DataView(n.buffer),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n.buffer}function At(e){if(!It){function t(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var n={size:65536};0<n.size;(n={size:n.size}).size/=2)if(t(n.size)){It=function(i){return function(e){for(var t="",n=0;n<e.length;n+=i.size)t+=String.fromCharCode.apply(null,e.subarray(n,n+i.size));return t}}(n);break}}return It(e)}O("shaka.util.StringUtils.fromUTF8",yt),O("shaka.util.StringUtils.fromUTF16",Et),O("shaka.util.StringUtils.fromBytesAutoDetect",wt),O("shaka.util.StringUtils.toUTF8",Tt),O("shaka.util.StringUtils.toUTF16",St);var It=null;O("shaka.util.StringUtils.resetFromCharCode",function(){It=null});var kt={fd:function(e,t){var n=At(e);return t=null==t||t,n=h.btoa(n).replace(/\+/g,"-").replace(/\//g,"_"),t?n:n.replace(/=*$/,"")}};function xt(t,e){var i=this;e=void 0===e?1:e,this.G=t,this.B=new Set,this.j=this.s=null,this.O=!1,this.K=0,this.a=null,this.l=new et,this.b=new Map,this.w=[],this.v=new Ue,this.f=null,this.g=function(e){i.v.reject(e),t.onError(e)},this.na=new Map,this.Y=new Map,this.L=new Ne(function(){return t=(e=i).na,(n=e.Y).clear(),t.forEach(function(e,t){return n.set(t,e)}),(t=Array.from(n.values())).length&&t.every(function(e){return"expired"==e})&&e.g(new Le(2,6,6014)),void e.G.Vc(ot(n));var e,t,n}),this.c=!1,this.ia=new Ue,this.H=!1,this.J=[],this.ka=!1,this.Z=new Ne(function(){var r;(r=i).b.forEach(function(e,t){var n=e.Pd,i=t.expiration;isNaN(i)&&(i=1/0),i!=n&&(r.G.onExpirationUpdated(t.sessionId,i),e.Pd=i)})}).Ua(e),this.v.catch(function(){})}function Ct(e,t,n){return e.w=n,e.H=0<n.length,Nt(e,t)}function Nt(e,t){var n=function(e){if(0==(e=at(e.f.clearKeys)).size)return null;var r=[],a=[];e.forEach(function(e,t){var n=kt.ud(t),i=kt.ud(e),n={kty:"oct",kid:kt.fd(n,!1),k:kt.fd(i,!1)};r.push(n),a.push(n.kid)}),e=JSON.stringify({keys:r});var t=JSON.stringify({kids:a});return t=[{initData:new Uint8Array(Tt(t)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+h.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t,keyIds:[]}}(e);if(n)for(var i=Y(t),r=i.next();!r.done;r=i.next())r.value.drmInfos=[n];for((n=t.some(function(e){return 0<e.drmInfos.length}))||function(e,t){var n=[];t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:[],keyIds:[]})});for(var i=Y(e),r=i.next();!r.done;r=i.next())r.value.drmInfos=n}(t,r=at(e.f.servers)),r=(i=Y(t)).next();!r.done;r=i.next())for(var a=(r=Y(r.value.drmInfos)).next();!a.done;a=r.next())Wt(a.value,at(e.f.servers),at(e.f.advanced||{}));return(r=function(e,t){for(var n=new Set,i=Y(t),r=i.next();!r.done;r=i.next()){var a=Y(r.value.drmInfos);for(r=a.next();!r.done;r=a.next())n.add(r.value)}for(i=Y(n),r=i.next();!r.done;r=i.next())Wt(r.value,at(e.f.servers),at(e.f.advanced||{}));a=e.H?"required":"optional";var o=e.H?["persistent-license"]:["temporary"];for(i=new Map,n=Y(n),r=n.next();!r.done;r=n.next())r=r.value,i.set(r.keySystem,{audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:a,sessionTypes:o,label:r.keySystem,drmInfos:[]});for(n=Y(t),r=n.next();!r.done;r=n.next()){r=r.value,a=r.audio,o=r.video;var s=a?st(a.mimeType,a.codecs):"",u=o?st(o.mimeType,o.codecs):"",c=Y(r.drmInfos);for(r=c.next();!r.done;r=c.next()){r=r.value;var l=i.get(r.keySystem);l.drmInfos.push(r),r.distinctiveIdentifierRequired&&(l.distinctiveIdentifier="required"),r.persistentStateRequired&&(l.persistentState="required"),a&&l.audioCapabilities.push({robustness:r.audioRobustness||"",contentType:s}),o&&l.videoCapabilities.push({robustness:r.videoRobustness||"",contentType:u})}}return i}(e,t)).size?(r=Ot(e,r),n?r:r.catch(function(){})):(e.O=!0,Promise.resolve())}function Pt(n){return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:if(n.s&&n.a&&n.a.serverCertificate&&n.a.serverCertificate.length)return Z(e,3),J(e,n.s.setServerCertificate(n.a.serverCertificate),5);e.C(0);break;case 5:e.A||ne.u("Server certificates are not supported by the key system.  The server certificate has been ignored."),Q(e,0);break;case 3:return t=ee(e),e.return(Promise.reject(new Le(2,6,6004,t.message)))}})})}function Mt(t){var e=t.a?t.a.initData:[];return e.forEach(function(e){return Ft(t,e.initDataType,e.initData)}),t.w.forEach(function(e){return Dt(t,e)}),e.length||t.w.length||t.v.resolve(),t.v}function Rt(e,t,n){for(var i=e.b.values(),r=(i=Y(i)).next();!r.done;r=i.next())if(kt.Xa(n,r.value.initData)&&!mt("Tizen 2"))return void ne.debug("Ignoring duplicate init data.");Ft(e,t,n)}function Lt(e){return e?e.keySystem:""}function Ut(e,t){return mt("Edge/")||e.B.has(t)}function _t(e){return e=G(e=e.b.keys(),function(e){return e.sessionId}),Array.from(e)}function Ot(e,h){if(1==h.size&&h.has(""))return Promise.reject(new Le(2,6,6e3));for(var t=Y(h.values()),n=t.next();!n.done;n=t.next())0==(n=n.value).audioCapabilities.length&&delete n.audioCapabilities,0==n.videoCapabilities.length&&delete n.videoCapabilities;var r=t=new Ue;return[!0,!1].forEach(function(n){var i=this;h.forEach(function(e,t){e.drmInfos.some(function(e){return!!e.licenseServerUri})==n&&(r=r.catch(function(){if(!this.c)return navigator.requestMediaKeySystemAccess(t,[e])}.bind(i)))})}.bind(e)),r=(r=r.catch(function(){return Promise.reject(new Le(2,6,6001))})).then(function(e){if(this.c)return Promise.reject();this.B.clear();for(var t=(i=e.getConfiguration()).videoCapabilities||[],n=Y(i.audioCapabilities||[]),i=n.next();!i.done;i=n.next())this.B.add(i.value.contentType);for(i=(t=Y(t)).next();!i.done;i=t.next())this.B.add(i.value.contentType);t=e.keySystem,i=h.get(e.keySystem),n=[];var r,a,o,s,u,c=[],l=[],d=[];return r=i.drmInfos,a=n,o=c,s=l,u=d,r.forEach(function(t){if(a.includes(t.licenseServerUri)||a.push(t.licenseServerUri),t.serverCertificate&&(o.some(function(e){return kt.Xa(e,t.serverCertificate)})||o.push(t.serverCertificate)),t.initData&&t.initData.forEach(function(t){s.some(function(e){return!(!e.keyId||e.keyId!=t.keyId)||e.initDataType==t.initDataType&&kt.Xa(e.initData,t.initData)})||s.push(t)}),t.keyIds)for(var e=0;e<t.keyIds.length;++e)u.includes(t.keyIds[e])||u.push(t.keyIds[e])}),1<c.length&&ne.u("Multiple unique server certificates found! Only the first will be used."),1<n.length&&ne.u("Multiple unique license server URIs found! Only the first will be used."),this.a={keySystem:t,licenseServerUri:n[0],distinctiveIdentifierRequired:"required"==i.distinctiveIdentifier,persistentStateRequired:"required"==i.persistentState,audioRobustness:(i.audioCapabilities?i.audioCapabilities[0].robustness:"")||"",videoRobustness:(i.videoCapabilities?i.videoCapabilities[0].robustness:"")||"",serverCertificate:c[0],initData:l,keyIds:d},this.a.licenseServerUri?e.createMediaKeys():Promise.reject(new Le(2,6,6012,this.a.keySystem))}.bind(e)).then(function(e){if(this.c)return Promise.reject();ne.info("Created MediaKeys object for key system",this.a.keySystem),this.s=e,this.O=!0}.bind(e)).catch(function(e){if(!this.c)return this.a=null,this.B.clear(),e instanceof Le?Promise.reject(e):Promise.reject(new Le(2,6,6002,e.message))}.bind(e)),t.reject(),r}function Dt(t,n){try{ne.I("Attempting to load an offline session",n);var i=t.s.createSession("persistent-license")}catch(e){var r=new Le(2,6,6005,e.message);return t.g(r),Promise.reject(r)}t.l.m(i,"message",t.bf.bind(t)),t.l.m(i,"keystatuseschange",t.Ze.bind(t));var a={initData:null,loaded:!1,Pd:1/0,Va:null};return t.b.set(i,a),i.load(n).then(function(e){return this.c?Promise.reject():(ne.N("Loaded offline session",n,e),e?(a.loaded=!0,Ht(this)&&this.v.resolve(),i):(this.b.delete(i),void this.g(new Le(2,6,6013))))}.bind(t),function(e){this.c||(this.b.delete(i),this.g(new Le(2,6,6005,e.message)))}.bind(t))}function Ft(n,t,e){try{var i=n.H?(ne.I("Creating new persistent session"),n.s.createSession("persistent-license")):(ne.I("Creating new temporary session"),n.s.createSession())}catch(e){return void n.g(new Le(2,6,6005,e.message))}n.l.m(i,"message",n.bf.bind(n)),n.l.m(i,"keystatuseschange",n.Ze.bind(n)),n.b.set(i,{initData:e,loaded:!1,Pd:1/0,Va:null});try{e=n.f.initDataTransform(e,n.a)}catch(e){return(t=e)instanceof Le||(t=new Le(2,6,6016,e)),void n.g(t)}i.generateRequest(t,e.buffer).catch(function(e){var t;n.c||(n.b.delete(i),e.errorCode&&e.errorCode.systemCode&&((t=e.errorCode.systemCode)<0&&(t+=Math.pow(2,32)),t="0x"+t.toString(16)),n.g(new Le(2,6,6006,e.message,e,t)))})}function jt(e,t){var n;return Lt(t).startsWith("com.apple.fps")&&(n=t.serverCertificate,e=rt(e,it(e),n)),e}function Kt(e,t){var n=t.target;ne.I("Sending license request for session",n.sessionId,"of type",t.messageType);var i,r,a=e.b.get(n),o=e.a.licenseServerUri,s=e.f.advanced[e.a.keySystem];"individualization-request"==t.messageType&&s&&s.individualizationServer&&(o=s.individualizationServer),(o=$e([o],e.f.retryParameters)).body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,"com.microsoft.playready"!=e.a.keySystem&&"com.chromecast.playready"!=e.a.keySystem||function(e){var t=Et(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){ne.debug("Unwrapping PlayReady request.");for(var n=(t=(new DOMParser).parseFromString(t,"application/xml")).getElementsByTagName("HttpHeader"),i=0;i<n.length;++i)e.headers[n[i].getElementsByTagName("name")[0].textContent]=n[i].getElementsByTagName("value")[0].textContent;e.body=kt.Za(t.getElementsByTagName("Challenge")[0].textContent).buffer}else ne.debug("PlayReady request is already unwrapped."),e.headers["Content-Type"]="text/xml; charset=utf-8"}(o),e.a.keySystem.startsWith("com.apple.fps")&&e.f.fairPlayTransform&&(i=o,r=new Uint8Array(i.body),r="spc="+kt.fd(r),i.headers["Content-Type"]="application/x-www-form-urlencoded",i.body=Tt(r));var u=Date.now();e.G.Xb.request(2,o).promise.then(function(e){return this.c?Promise.reject():(this.a.keySystem.startsWith("com.apple.fps")&&this.f.fairPlayTransform&&function(e){try{var t=yt(e.data)}catch(e){return}"<ckc>"===(t=t.trim()).substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6));try{t=JSON.parse(t).ckc}catch(e){}e.data=kt.Za(t).buffer}(e),this.K+=(Date.now()-u)/1e3,ne.I("Updating session",n.sessionId),n.update(e.data).then(function(){var e=this;this.G.onEvent(new F("drmsessionupdate")),a&&(a.Va&&a.Va.resolve(),new Ne(function(){a.loaded=!0,Ht(e)&&e.v.resolve()}).R(Xt))}.bind(this)))}.bind(e),function(e){this.c||(e=new Le(2,6,6007,e),this.g(e),a&&a.Va&&a.Va.reject(e))}.bind(e)).catch(function(e){this.c||(e=new Le(2,6,6008,e.message),this.g(e),a&&a.Va&&a.Va.reject(e))}.bind(e))}function Bt(){var a=[{videoCapabilities:e=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:e}],o=new Map,e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").map(function(e){return r=e,$(function e(){var t,n,i;return te(e,function(e){switch(e.o){case 1:return Z(e,2),J(e,navigator.requestMediaKeySystemAccess(r,a),4);case 4:return t=e.A,i=!!(n=t.getConfiguration().sessionTypes)&&n.includes("persistent-license"),mt("Tizen 3")&&(i=!1),o.set(r,{persistentState:i}),J(e,t.createMediaKeys(),5);case 5:Q(e,0);break;case 2:ee(e),o.set(r,null),j(e)}})});var r});return Promise.all(e).then(function(){return ot(o)})}function Gt(e,t){var n=t.audio,i=t.video;if(n&&n.encrypted&&!Ut(e,st(n.mimeType,n.codecs))||i&&i.encrypted&&!Ut(e,st(i.mimeType,i.codecs)))return!1;var r=Lt(e.a);return 0==t.drmInfos.length||t.drmInfos.some(function(e){return e.keySystem==r})}function Vt(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=0;i<e.length;i++)for(var r=0;r<t.length;r++)if(e[i].keySystem==t[r].keySystem){var a=e[i],r=t[r],o=[];o=(o=o.concat(a.initData||[])).concat(r.initData||[]);var s=[];s=(s=s.concat(a.keyIds)).concat(r.keyIds),n.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||r.persistentStateRequired,videoRobustness:a.videoRobustness||r.videoRobustness,audioRobustness:a.audioRobustness||r.audioRobustness,serverCertificate:a.serverCertificate||r.serverCertificate,initData:o,keyIds:s});break}return n}function zt(n){return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return t=Array.from(n.b.keys()),n.b.clear(),J(e,Promise.all(t.map(function(t){return $(function e(){return te(e,function(e){switch(e.o){case 1:return ne.I("Closing session",t.sessionId),Z(e,2),J(e,(n=t,$(function e(){var t;return te(e,function(e){switch(e.o){case 1:return t=new Promise(function(e,t){new Ne(t).R(qt)}),Z(e,2),J(e,Promise.race([Promise.all([n.close(),n.closed]),t]),4);case 4:Q(e,0);break;case 2:ee(e),ne.u("Timeout waiting for session close"),j(e)}})})),4);case 4:Q(e,0);break;case 2:ee(e),j(e)}var n})})})),0)}})})}function Ht(e){return V(e=e.b.values(),function(e){return e.loaded})}function Wt(e,t,n){!e.keySystem||"org.w3.clearkey"==e.keySystem&&e.licenseServerUri||(t.size&&(t=t.get(e.keySystem)||"",e.licenseServerUri=t),e.keyIds||(e.keyIds=[]),(n=n.get(e.keySystem))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.videoRobustness||(e.videoRobustness=n.videoRobustness),e.audioRobustness||(e.audioRobustness=n.audioRobustness),e.serverCertificate||(e.serverCertificate=n.serverCertificate)),h.cast&&h.cast.__platform__&&"com.microsoft.playready"==e.keySystem&&(e.keySystem="com.chromecast.playready"))}O("shaka.util.Uint8ArrayUtils.toBase64",kt.fd),kt.Za=function(e){e=h.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t},O("shaka.util.Uint8ArrayUtils.fromBase64",kt.Za),kt.ud=function(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=h.parseInt(e.substr(n,2),16);return t},O("shaka.util.Uint8ArrayUtils.fromHex",kt.ud),kt.gd=function(e){for(var t="",n=0;n<e.length;++n){var i=e[n].toString(16);1==i.length&&(i="0"+i),t+=i}return t},O("shaka.util.Uint8ArrayUtils.toHex",kt.gd),kt.Xa=function(e,t){if(!e&&!t)return!0;if(!e||!t||e.length!=t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!=t[n])return!1;return!0},O("shaka.util.Uint8ArrayUtils.equal",kt.Xa),kt.concat=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];for(var i=n=0;i<t.length;++i)n+=t[i].length;n=new Uint8Array(n);for(var r=i=0;r<t.length;++r)n.set(t[r],i),i+=t[r].length;return n},O("shaka.util.Uint8ArrayUtils.concat",kt.concat),(n=xt.prototype).destroy=function(){var n=this;return $(function e(){return te(e,function(e){switch(e.o){case 1:return n.c?J(e,n.ia,0):(n.c=!0,J(e,(t=n,$(function e(){return te(e,function(e){switch(e.o){case 1:return t.l.release(),t.l=null,t.v.reject(),t.Z.stop(),t.Z=null,t.L.stop(),t.L=null,J(e,zt(t),2);case 2:if(t.j)return Z(e,4),J(e,t.j.setMediaKeys(null),6);e.C(3);break;case 6:Q(e,5);break;case 4:ee(e);case 5:t.j=null;case 3:t.a=null,t.B.clear(),t.s=null,t.w=[],t.f=null,t.g=null,t.G=null,j(e)}})})),4));case 4:n.ia.resolve(),e.C(0)}var t})})},n.configure=function(e){this.f=e},n.jc=function(e){var t=this;if(!this.s)return this.l.Ha(e,"encrypted",function(){t.g(new Le(2,6,6010))}),Promise.resolve();this.j=e,this.l.Ha(this.j,"play",function(){for(var e=0;e<t.J.length;e++)Kt(t,t.J[e]);t.ka=!0,t.J=[]}),"webkitCurrentPlaybackTargetIsWireless"in this.j&&this.l.m(this.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return zt(t)}),e=(e=this.j.setMediaKeys(this.s)).catch(function(e){return Promise.reject(new Le(2,6,6003,e.message))});var n=Pt(this);return Promise.all([e,n]).then(function(){if(t.c)return Promise.reject();Mt(t),t.a.initData.length||t.w.length||t.l.m(t.j,"encrypted",function(e){return Rt(t,e.initDataType,new Uint8Array(e.initData))})}).catch(function(e){if(!t.c)return Promise.reject(e)})},n.mc=function(){for(var e=1/0,t=this.b.keys(),n=(t=Y(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},n.bf=function(e){this.j&&this.f.delayLicenseRequestUntilPlayed&&this.j.paused&&!this.ka?this.J.push(e):Kt(this,e)},n.Ze=function(e){e=e.target,ne.N("Key status changed for session",e.sessionId);var o=this.b.get(e),s=!1;e.keyStatuses.forEach(function(e,t){var n,i,r,a;"string"==typeof t&&(n=t,t=e,e=n),"com.microsoft.playready"!=this.a.keySystem||16!=t.byteLength||ht()||mt("VITIS")||mt("Web0S")||mt("TiVo")||(i=(n=new DataView(t)).getUint32(0,!0),r=n.getUint16(4,!0),a=n.getUint16(6,!0),n.setUint32(0,i,!1),n.setUint16(4,r,!1),n.setUint16(6,a,!1)),"com.microsoft.playready"==this.a.keySystem&&"status-pending"==e&&(e="usable"),"status-pending"!=e&&(o.loaded=!0),"expired"==e&&(s=!0),n=kt.gd(new Uint8Array(t)),this.na.set(n,e)}.bind(this));var t=e.expiration-Date.now();(t<0||s&&t<1e3)&&o&&!o.Va&&(ne.debug("Session has expired",e.sessionId),this.b.delete(e),e.close().catch(function(){})),Ht(this)&&(this.v.resolve(),this.L.R(Yt))};var qt=1,Xt=5,Yt=.5;function $t(){this.a=new muxjs.mp4.CaptionParser,this.g=[],this.f={}}function Jt(){}function Zt(e){return e&&!(1==e.length&&e.end(0)-e.start(0)<1e-6)&&e.length?e.end(e.length-1):null}function Qt(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6||t>e.end(e.length-1))&&t+n>=e.start(0)}function en(e,t){if(!e||!e.length||1==e.length&&e.end(0)-e.start(0)<1e-6)return 0;for(var n=0,i=e.length-1;0<=i&&e.end(i)>t;--i)n+=e.end(i)-Math.max(e.start(i),t);return n}function tn(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}$t.prototype.init=function(e){var t=muxjs.mp4.probe;e=new Uint8Array(e),this.g=t.videoTrackIds(e),this.f=t.timescale(e),this.a.init()},$t.prototype.b=function(e,t){var n=new Uint8Array(e);(n=this.a.parse(n,this.g,this.f))&&n.captions&&t(n.captions),this.a.clearParsedCaptions()},$t.prototype.c=function(){this.a.resetCaptionStream()},Jt.prototype.init=function(){},Jt.prototype.b=function(){},Jt.prototype.c=function(){};var nn={Of:function(e,t){return e.reduce(function(e,t,n){return t.catch(e.bind(null,n))}.bind(null,t),Promise.reject())},md:function(e,t){return e.concat(t)},Tc:function(){},jb:function(e){return null!=e}};function rn(e,t){if(0==t.length)return e;var n=t.map(function(e){return new me(e)});return e.map(function(e){return new me(e)}).map(function(e){return n.map(e.resolve.bind(e))}).reduce(nn.md,[]).map(function(e){return e.toString()})}function an(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:t||[],keyIds:[]}}var on={tb:"video",ic:"audio",Na:"text",Lh:"image",Jh:"application"},sn=1/15;function un(){this.a=new muxjs.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.b=null,this.g=[],this.c=[],this.f=!1,this.a.on("data",this.l.bind(this)),this.a.on("done",this.j.bind(this))}function cn(e,t){return!(!h.muxjs||"mp2t"!=e.toLowerCase().split(";")[0].split("/")[1])&&(t?MediaSource.isTypeSupported(ln(t,e)):MediaSource.isTypeSupported(ln("audio",e))||MediaSource.isTypeSupported(ln("video",e)))}function ln(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var i,r,a,o=/avc1\.(66|77|100)\.(\d+)/.exec(n);return o&&(a="avc1.",a=("66"==(i=o[1])?a+"4200":"77"==i?a+"4d00":a+"6400")+((r=Number(o[2]))>>4).toString(16),a+=(15&r).toString(16),n=n.replace(o[0],a)),n}function dn(e,t,n){this.startTime=e,this.direction=vn,this.endTime=t,this.payload=n,this.region=new In,this.position=null,this.positionAlign=hn,this.size=0,this.textAlign=fn,this.writingMode=bn,this.lineInterpretation=yn,this.line=null,this.lineHeight="",this.lineAlign=En,this.displayAlign=mn,this.fontSize=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Tn,this.fontStyle=Sn,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=!1}un.prototype.destroy=function(){return this.a.dispose(),this.a=null,Promise.resolve()},un.prototype.l=function(e){this.c=e.captions;var t=new Uint8Array(e.data.byteLength+e.initSegment.byteLength);t.set(e.initSegment,0),t.set(e.data,e.initSegment.byteLength),this.g.push(t)},un.prototype.j=function(){var e={data:kt.concat.apply(null,this.g),captions:this.c};this.b.resolve(e),this.f=!1},O("shaka.text.Cue",dn);var hn="auto";dn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:hn};var fn="center",pn={LEFT:"left",RIGHT:"right",CENTER:fn,START:"start",END:"end"};dn.textAlign=pn;var mn="after",gn={BEFORE:"before",CENTER:"center",AFTER:mn};dn.displayAlign=gn;var vn="ltr";dn.direction={HORIZONTAL_LEFT_TO_RIGHT:vn,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var bn="horizontal-tb";dn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:bn,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var yn=0;dn.lineInterpretation={LINE_NUMBER:yn,PERCENTAGE:1};var En="start",wn={CENTER:"center",START:En,END:"end"};dn.lineAlign=wn;var Tn=400;dn.fontWeight={NORMAL:Tn,BOLD:700};var Sn="normal",An={NORMAL:Sn,ITALIC:"italic",OBLIQUE:"oblique"};function In(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=kn,this.scroll=xn}dn.fontStyle=An,dn.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},O("shaka.text.CueRegion",In);var kn=1;In.units={PX:0,PERCENTAGE:kn,LINES:2};var xn="";function Cn(e){this.g=null,this.c=e,this.f=this.v=0,this.j=1/0,this.b=this.a=null,this.s="",this.l=new Map}In.scrollMode={NONE:xn,UP:"up"};var Nn={};function Pn(e){return!!(Nn[e]||h.muxjs&&"application/cea-608"==e)}function Mn(e,t){"application/cea-608"!=t&&(e.g=new Nn[t])}function Rn(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=Y(t)).next();!s.done;s=t.next()){var u=s.value,s=u.stream;o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),u.startTime+=r,u.endTime+=r,u.startTime>=e.f&&u.startTime<e.j&&(u=new dn(u.startTime,u.endTime,u.text),o.get(s).get(a).push(u),s==e.s&&e.c.append([u]))}for(a=(r=Y(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.l.has(a)||e.l.set(a,new Map),s=(t=Y(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.l.get(a).set(s,u);e.a=null==e.a?Math.max(n,e.f):Math.min(e.a,Math.max(n,e.f)),e.b=Math.max(e.b,Math.min(i,e.j))}function Ln(e,t,n){this.f=e,this.g=n,this.b={},this.a=null,this.c={},this.l=new et,this.B=!1,this.s={},this.v=t,e=this.w=new Ue,t=new MediaSource,this.l.Ha(t,"sourceopen",e.resolve),this.f.src=Un(t),this.j=t}O("shaka.text.TextEngine.registerParser",function(e,t){Nn[e]=t}),O("shaka.text.TextEngine.unregisterParser",function(e){delete Nn[e]}),Cn.prototype.destroy=function(){return this.c=this.g=null,this.l.clear(),Promise.resolve()},Cn.prototype.Qc=function(e){try{return this.g.parseMedia(new Uint8Array(e),{periodStart:0,segmentStart:null,segmentEnd:0})[0].startTime}catch(e){throw new Le(2,2,2009,e)}},Cn.prototype.remove=function(e,t){return Promise.resolve().then(function(){!this.c||!this.c.remove(e,t)||null==this.a||t<=this.a||e>=this.b||(e<=this.a&&t>=this.b?this.a=this.b=null:e<=this.a&&t<this.b?this.a=t:e>this.a&&t>=this.b&&(this.b=e))}.bind(this))};var Un=h.URL.createObjectURL;function _n(e){var i,r,t=st(e.mimeType,e.codecs),n=(r=[(i=e).mimeType],ct.forEach(function(e,t){var n=i[t];n&&r.push(e+'="'+n+'"')}),r.join(";"));return Pn(t)||MediaSource.isTypeSupported(n)||cn(t,e.type)}function On(e,t){e.a||(e.a=new Cn(e.g)),Mn(e.a,t)}function Dn(e){return!e.j||"ended"==e.j.readyState}function Fn(e,t){var n="text"==t?e.a.a:!(n=Kn(e,t))||1==n.length&&n.end(0)-n.start(0)<1e-6?null:1==n.length&&n.start(0)<0?0:n.length?n.start(0):null;return n}function jn(e,t){return"text"==t?e.a.b:Zt(Kn(e,t))}function Kn(t,n){try{return t.b[n].buffered}catch(e){return n in t.b&&ne.error("failed to get buffered range for "+n,e),null}}function Bn(t,n,e,i,r,a){return"text"==n?(o=t.a,s=e,u=i,c=r,Promise.resolve().then(function(){var e;this.g&&this.c&&(null==u||null==c?this.g.parseInit(new Uint8Array(s)):(e={periodStart:this.v,segmentStart:u,segmentEnd:c},e=this.g.parseMedia(new Uint8Array(s),e).filter(function(e){return e.startTime>=this.f&&e.startTime<this.j}.bind(this)),this.c.append(e),null==this.a&&(this.a=Math.max(u,this.f)),this.b=Math.min(c,this.j)))}.bind(o))):t.s[n]?function(e,t){e.f=!0,e.b=new Ue,e.g=[],e.c=[];var n=new Uint8Array(t);return e.a.push(n),e.a.flush(),e.f&&e.b.reject(new Le(2,3,3018)),e.b}(t.s[n],e).then(function(e){return this.a||On(this,"text/vtt"),e.captions&&e.captions.length&&Rn(this.a,e.captions,i,r,this.b.video.timestampOffset),zn(this,n,this.vf.bind(this,n,e.data.buffer))}.bind(t)):(a&&h.muxjs&&(t.a||On(t,"text/vtt"),null==i&&null==r?t.v.init(e):t.v.b(e,function(e){e.length&&Rn(t.a,e,i,r,t.b.video.timestampOffset)})),zn(t,n,t.vf.bind(t,n,e)));var o,s,u,c}function Gn(e,t){var n=jn(e,"video")||0;!function(e,t,n){if(e.s=t,t=e.l.get(t))for(var i=Y(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter(function(e){return e.endTime<=n}))&&e.c.append(r)}(e.a,t,n)}function Vn(e,t){return"text"==t?e.a?(e.v.c(),e.a.remove(0,1/0)):Promise.resolve():zn(e,t,e.wf.bind(e,t,0,e.j.duration))}function zn(t,n,i){if(t.B)return Promise.reject();if(i={start:i,p:new Ue},t.c[n].push(i),1==t.c[n].length)try{i.start()}catch(e){"QuotaExceededError"==e.name?i.p.reject(new Le(2,3,3017,n)):i.p.reject(new Le(2,3,3015,e)),Wn(t,n)}return i.p}function Hn(e,n){if(e.B)return Promise.reject();var t,i=[];for(t in e.b){var r=new Ue,a={start:function(e){e.resolve()}.bind(null,r),p:r};e.c[t].push(a),i.push(r),1==e.c[t].length&&a.start()}return Promise.all(i).then(function(){try{n()}catch(e){var t=Promise.reject(new Le(2,3,3015,e))}for(var e in this.b)Wn(this,e);return t}.bind(e),function(e){throw e}.bind(e))}function Wn(t,n){t.c[n].shift();var i=t.c[n][0];if(i)try{i.start()}catch(e){i.p.reject(new Le(2,3,3015,e)),Wn(t,n)}}(n=Ln.prototype).destroy=function(){var e=this;this.B=!0;var t,n=[];for(t in this.c){var i=this.c[t],r=i[0];for(this.c[t]=i.slice(0,1),r&&n.push(r.p.catch(nn.Tc)),r=1;r<i.length;++r)i[r].p.reject()}for(var a in this.a&&n.push(this.a.destroy()),this.g&&n.push(this.g.destroy()),this.s)n.push(this.s[a].destroy());return Promise.all(n).then(function(){e.l&&(e.l.release(),e.l=null),e.f&&(e.f.removeAttribute("src"),e.f.load(),e.f=null),e.j=null,e.a=null,e.g=null,e.b={},e.s={},e.v=null,e.c={}})},n.init=function(t,r){var a=this;return $(function e(){var i;return te(e,function(e){switch(e.o){case 1:return i=on,J(e,a.w,2);case 2:t.forEach(function(e,t){var n=st(e.mimeType,e.codecs);t==i.Na?On(a,n):(!r&&MediaSource.isTypeSupported(n)||!cn(n,t)||(a.s[t]=new un,n=ln(t,n)),n=a.j.addSourceBuffer(n),a.l.m(n,"error",a.vh.bind(a,t)),a.l.m(n,"updateend",a.$b.bind(a,t)),a.b[t]=n,a.c[t]=[])}),j(e)}})})},n.vd=function(e){var t,n;e.total=tn(this.f.buffered),e.audio=tn(Kn(this,"audio")),e.video=tn(Kn(this,"video")),e.text=[],this.a&&(t=this.a.a,n=this.a.b,null!=t&&null!=n&&e.text.push({start:t,end:n}))},n.remove=function(e,t,n){return"text"==e?this.a.remove(t,n):zn(this,e,this.wf.bind(this,e,t,n))},n.flush=function(e){return"text"==e?Promise.resolve():zn(this,e,this.Tf.bind(this,e))},n.endOfStream=function(e){return Hn(this,function(){Dn(this)||(e?this.j.endOfStream(e):this.j.endOfStream())}.bind(this))},n.Ta=function(e){return Hn(this,function(){this.j.duration=e}.bind(this))},n.ra=function(){return this.j.duration},n.vf=function(e,t){this.b[e].appendBuffer(t)},n.wf=function(e,t,n){n<=t?this.$b(e):this.b[e].remove(t,n)},n.Hf=function(e){var t=this.b[e].appendWindowStart,n=this.b[e].appendWindowEnd;this.b[e].abort(),this.b[e].appendWindowStart=t,this.b[e].appendWindowEnd=n,this.$b(e)},n.Tf=function(e){this.f.currentTime-=.001,this.$b(e)},n.uh=function(e,t){t<0&&(t+=.001),this.b[e].timestampOffset=t,this.$b(e)},n.qh=function(e,t,n){this.b[e].appendWindowStart=0,this.b[e].appendWindowEnd=n,this.b[e].appendWindowStart=t,this.$b(e)},n.vh=function(e){this.c[e][0].p.reject(new Le(2,3,3014,this.f.error?this.f.error.code:0))},n.$b=function(e){var t=this.c[e][0];t&&(t.p.resolve(),Wn(this,e))};var qn={Ce:function(e,t){function n(e){var t="";e.video&&(t=ut(e.video.codecs)[0]);var n="";return e.audio&&(n=ut(e.audio.codecs)[0]),t+"-"+n}for(var i=e.periods.reduce(function(e,t){return e.concat(t.variants)},[]),i=qn.He(i,t),r=new K,a=(i=Y(i)).next();!a.done;a=i.next()){var o=n(a=a.value);r.push(o,a)}var s=null,u=1/0;for(r.forEach(function(e,t){for(var n=0,i=0,r=Y(t),a=r.next();!a.done;a=r.next())n+=a.value.bandwidth||0,++i;n/=i,ne.debug("codecs",e,"avg bandwidth",n),n<u&&(s=e,u=n)}),i=(r=Y(e.periods)).next();!i.done;i=r.next())(i=i.value).variants=i.variants.filter(function(e){return n(e)==s||(ne.debug("Dropping Variant (better codec available)",e),!1)})},Id:function(e,t,n){function i(e,t,n){return t<=e&&e<=n}var r=e.video;return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))},ve:function(e,n,i){var r=!1;return e.forEach(function(e){var t=e.allowedByApplication;e.allowedByApplication=qn.Id(e,n,i),t!=e.allowedByApplication&&(r=!0)}),r},filterNewPeriod:function(n,i,r,e){e.variants=e.variants.filter(function(e){if(n&&n.O&&!Gt(n,e))return ne.debug("Dropping variant - not compatible with key system",e),!1;var t=e.audio;return e=e.video,t&&!_n(t)?(ne.debug("Dropping variant - audio not compatible with platform",qn.Rb(t)),!1):e&&!_n(e)?(ne.debug("Dropping variant - video not compatible with platform",qn.Rb(e)),!1):t&&i&&!qn.we(t,i)?(ne.debug("Droping variant - not compatible with active audio","active audio",qn.Rb(i),"variant.audio",qn.Rb(t)),!1):!(e&&r&&!qn.we(e,r))||(ne.debug("Droping variant - not compatible with active video","active video",qn.Rb(r),"variant.video",qn.Rb(e)),!1)}),e.textStreams=e.textStreams.filter(function(e){var t=Pn(st(e.mimeType,e.codecs));return t||ne.debug("Dropping text stream. Is not supported by the platform.",e),t})},we:function(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]},se:function(e){var t=e.audio,n=e.video,i=t?t.codecs:null,r=n?n.codecs:null,a=[];r&&a.push(r),i&&a.push(i);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var u=new Set;return t&&t.roles.forEach(function(e){return u.add(e)}),n&&n.roles.forEach(function(e){return u.add(e)}),e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:o,codecs:a.join(", "),audioCodec:i,videoCodec:r,primary:e.primary,roles:Array.from(u),audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e},ed:function(e){return{id:e.id,active:!1,type:"text",bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId}},Ad:function(e){return e.__shaka_id||(e.__shaka_id=qn.Jg++),e.__shaka_id},Jg:0,Ag:function(e){var t=qn.Ne(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),t},Me:function(e){var t=qn.Ne(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind]),t},Ne:function(e){return{id:qn.Ad(e),active:!1,type:"",bandwidth:0,language:q(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null}},Vb:function(e){return e.allowedByApplication&&e.allowedByKeySystem},pg:function(e){return e.filter(function(e){return qn.Vb(e)})},He:function(e,t){for(var n=e.filter(function(e){return e.audio&&e.audio.channelsCount}),i=new Map,r=(n=Y(n)).next();!r.done;r=n.next()){var a=(r=r.value).audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return 0==(n=Array.from(i.keys())).length?e:(r=n.filter(function(e){return e<=t})).length?i.get(Math.max.apply(null,r)):i.get(Math.min.apply(null,n))},lc:function(e,t,n){var i=e,r=e.filter(function(e){return e.primary});r.length&&(i=r);var a,o=i.length?i[0].language:"",i=i.filter(function(e){return e.language==o});if(!t||(a=re(q(t),e.map(function(e){return e.language})))&&(i=e.filter(function(e){return q(e.language)==a})),n){if((e=qn.Ge(i,n)).length)return e;ne.u("No exact match for the text role could be found.")}else if((e=i.filter(function(e){return 0==e.roles.length})).length)return e;return(e=i.map(function(e){return e.roles}).reduce(nn.md,[])).length?qn.Ge(i,e[0]):i},Ge:function(e,t){return e.filter(function(e){return e.roles.includes(t)})},Le:function(e,t,n){for(var i=0;i<n.length;i++)if(n[i].audio==e&&n[i].video==t)return n[i];return null},Bg:function(e){return"audio"==e.type},Fg:function(e){return"video"==e.type},xg:function(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t},Rb:function(e){return qn.Bg(e)?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:qn.Fg(e)?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}};function Xn(){this.j=null,this.f=!1,this.b=new fe,this.g=[],this.l=!1,this.a=this.c=null}function Yn(t,e){return t&&(e=e.filter(function(e){return qn.Id(e,t,{width:1/0,height:1/0})})),e.sort(function(e,t){return e.bandwidth-t.bandwidth})}function $n(e,t){this.a=e,this.b=t}function Jn(e,t){var n=new $n(2,6),i=ei.a,r=n.b-i.b;(0<(n.a-i.a||r)?ei.c:ei.b)(ei.a,n,e,t)}function Zn(e,t,n,i){ne.ba([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Qn(e,t,n,i){ne.Gc([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}O("shaka.abr.SimpleAbrManager",Xn),Xn.prototype.stop=Xn.prototype.stop=function(){this.j=null,this.f=!1,this.g=[],this.c=null},Xn.prototype.init=Xn.prototype.init=function(e){this.j=e},Xn.prototype.chooseVariant=Xn.prototype.chooseVariant=function(){var e=Yn(this.a.restrictions,this.g),t=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);this.g.length&&!e.length&&(ne.u("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),e=[(e=Yn(null,this.g))[0]]);for(var n=e[0]||null,i=0;i<e.length;++i){var r=e[i],a=r.bandwidth/this.a.bandwidthDowngradeTarget,o=(e[i+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;ne.N("Bandwidth ranges:",(r.bandwidth/1e6).toFixed(3),(a/1e6).toFixed(3),(o/1e6).toFixed(3)),a<=t&&t<=o&&(n=r)}return this.c=Date.now(),n},Xn.prototype.enable=Xn.prototype.enable=function(){this.f=!0},Xn.prototype.disable=Xn.prototype.disable=function(){this.f=!1},Xn.prototype.segmentDownloaded=Xn.prototype.segmentDownloaded=function(e,t){ne.N("Segment downloaded:","deltaTimeMs="+e,"numBytes="+t,"lastTimeChosenMs="+this.c,"enabled="+this.f);var n,i,r=this.b;if(t<16e3||(n=8e3*t/e,i=e/1e3,r.a+=t,de(r.b,i,n),de(r.c,i,n)),null!=this.c&&this.f)e:{if(ne.N("Suggesting Streams..."),this.l){if(Date.now()-this.c<1e3*this.a.switchInterval){ne.N("Still within switch interval...");break e}}else{if(!(128e3<=this.b.a)){ne.N("Still waiting for a good estimate...");break e}this.l=!0}r=this.chooseVariant(),n=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),ne.debug("Calling switch_(), bandwidth="+Math.round(n/1e3)+" kbps"),this.j(r)}},Xn.prototype.getBandwidthEstimate=Xn.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},Xn.prototype.setVariants=Xn.prototype.setVariants=function(e){this.g=e},Xn.prototype.configure=Xn.prototype.configure=function(e){this.a=e},$n.prototype.toString=function(){return"v"+this.a+"."+this.b};var ei=null,ti="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),ni="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),ii=["loop","playbackRate"],ri=["pause","play"],ai="abrstatuschanged adaptation buffering drmsessionupdate emsg error expirationupdated largegap loading manifestparsed onstatechange onstateidle streaming textchanged texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading variantchanged".split(" "),oi={getAssetUri:2,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,usingEmbeddedTextTrack:2,getLoadMode:10},si={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},ui=[["getConfiguration","configure"]],ci=[["isTextTrackVisible","setTextTrackVisibility"]],li="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectEmbeddedTextTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay".split(" "),di=["attach","detach","load","unload"];function hi(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof F){var n={};for(r in t){var i=t[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(n=(i=Y(Object.getOwnPropertyNames(t))).next();!n.done;n=i.next())r.add(n.value);for(i={},n=(r=Y(r)).next();!n.done;n=r.next())i[n=n.value]=t[n];r={__type__:"Error",contents:i}}else if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=0;n<t.length;++n)r.start.push(t.start(n)),r.end.push(t.end(n));else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:t<0?"-Infinity":"Infinity":t;return r}})}function fi(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n={length:(a=t).length,start:function(e){return a.start[e]},end:function(e){return a.end[e]}};else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var i,r=Error(n.message);for(i in n)r[i]=n[i];n=r}else n=t;var a;return n})}function pi(e,t,n,i,r,a){this.L=e,this.f=new Ne(t),this.O=n,this.s=!1,this.B=i,this.K=r,this.H=a,this.b=this.j=!1,this.J="",this.l=null,this.v=this.Qd.bind(this),this.w=this.Qg.bind(this),this.a={video:{},player:{}},this.G=0,this.c={},this.g=null,wi.add(this)}var mi=!1,gi=null;function vi(e,t){ne.debug("CastSender: onExistingSessionJoined");var n=e.H();e.g=new Ue,e.s=!0,e.Sd(n,t)}function bi(e){var t=gi;t.removeUpdateListener(e.v),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.w)}function yi(e){for(var t in e.c){var n=e.c[t];delete e.c[t],n.reject(new Le(1,7,7e3))}}function Ei(t,e){var n=hi(e),i=gi;try{i.sendMessage("urn:x-cast:com.google.shaka.v2",n,function(){},ne.error)}catch(e){throw ne.error("Cast session sendMessage threw",e),n=new Le(2,8,8005,e),t.B("player",new F("error",{detail:n})),t.Ob(),n}}(n=pi.prototype).destroy=function(){return wi.delete(this),yi(this),gi&&bi(this),this.f&&(this.f.stop(),this.f=null),this.K=this.B=null,this.b=this.j=!1,this.w=this.v=this.g=this.c=this.a=this.l=null,Promise.resolve()},n.ha=function(){return this.b},n.ad=function(){return this.J},n.init=function(){var e;h.chrome&&chrome.cast&&chrome.cast.isAvailable&&this.L.length&&(this.j=!0,this.f.gb(),e=new chrome.cast.SessionRequest(this.L),e=new chrome.cast.ApiConfig(e,function(e){for(var t=Y(wi),n=t.next();!n.done;n=t.next())vi(n.value,e)}.bind(this),function(e){for(var t=Y(wi),n=t.next();!n.done;n=t.next()){n=n.value;var i=e;ne.debug("CastSender: receiver status",i),mi="available"==i,n.f.gb()}}.bind(this),"origin_scoped"),chrome.cast.initialize(e,function(){ne.debug("CastSender: init")},function(e){ne.error("CastSender: init error",e)}),mi&&this.f.R(.02),(e=gi)&&e.status!=chrome.cast.SessionStatus.STOPPED?(ne.debug("CastSender: re-using existing connection"),vi(this,e)):gi=null)},n.ae=function(e){this.l=e,this.b&&Ei(this,{type:"appData",appData:this.l})},n.cast=function(e){return this.j?mi?this.b?Promise.reject(new Le(1,8,8002)):(this.g=new Ue,chrome.cast.requestSession(this.Sd.bind(this,e),this.Ye.bind(this)),this.g):Promise.reject(new Le(1,8,8001)):Promise.reject(new Le(1,8,8e3))},n.Ob=function(){if(this.b){if(yi(this),gi){bi(this);try{gi.stop(function(){},function(){})}catch(e){}gi=null}this.Qd()}},n.get=function(e,t){if("video"==e){if(ri.includes(t))return this.lf.bind(this,e,t)}else if("player"==e){if(si[t]&&!this.get("player","isLive")())return function(){};if(li.includes(t))return this.lf.bind(this,e,t);if(di.includes(t))return this.hh.bind(this,e,t);if(oi[t])return this.ef.bind(this,e,t)}return this.ef(e,t)},n.set=function(e,t,n){this.a[e][t]=n,Ei(this,{type:"set",targetName:e,property:t,value:n})},n.Sd=function(e,t){ne.debug("CastSender: onSessionInitiated"),(gi=t).addUpdateListener(this.v),t.addMessageListener("urn:x-cast:com.google.shaka.v2",this.w),this.Qd(),Ei(this,{type:"init",initState:e,appData:this.l}),this.g.resolve()},n.Ye=function(e){var t=8003;switch(e.code){case"cancel":t=8004;break;case"timeout":t=8005;break;case"receiver_unavailable":t=8006}this.g.reject(new Le(2,8,t,e))},n.ef=function(e,t){return this.a[e][t]},n.lf=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];Ei(this,{type:"call",targetName:e,methodName:t,args:i})},n.hh=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];r=new Ue;var a=this.G.toString();this.G++,this.c[a]=r;try{Ei(this,{type:"asyncCall",targetName:e,methodName:t,args:i,id:a})}catch(e){r.reject(e)}return r},n.Qd=function(){var e=!!gi&&"connected"==gi.status;if(ne.debug("CastSender: connection status",e),this.b&&!e){for(var t in this.K(),this.a)this.a[t]={};yi(this)}this.J=(this.b=e)?gi.receiver.friendlyName:"",this.f.gb()},n.Qg=function(e,t){var n=fi(t);switch(ne.N("CastSender: message",n),n.type){case"event":var i=n.event;this.B(n.targetName,new F(i.type,i));break;case"update":for(var r in i=n.update)for(var a in n=this.a[r]||{},i[r])n[a]=i[r][a];this.s&&(this.O(),this.s=!1);break;case"asyncComplete":if(r=n.id,n=n.error,a=this.c[r],delete this.c[r],a)if(n){for(i in r=new Le(n.severity,n.category,n.code),n)r[i]=n[i];a.reject(r)}else a.resolve()}};var wi=new Set;function Ti(e,t,n){var i=this;B.call(this),this.c=e,this.b=t,this.l=this.g=this.f=this.s=this.j=null,this.w=n,this.v=new Map,this.a=new pi(n,function(){return Ii(i)},function(){return ki(i)},function(e,t){return Ci(i,e,t)},function(){return xi(i)},function(){return Ai(i)}),function(t){for(var e in t.a.init(),t.l=new et,ti.forEach(function(e){this.l.m(this.c,e,this.H.bind(this))}.bind(t)),ai.forEach(function(e){this.l.m(this.b,e,this.B.bind(this))}.bind(t)),t.j={},t.c)Object.defineProperty(t.j,e,{configurable:!1,enumerable:!0,get:t.G.bind(t,e),set:t.J.bind(t,e)});t.s={},Si(t,function(e){Object.defineProperty(t.s,e,{configurable:!1,enumerable:!0,get:function(){return function e(t,n){t.v.has(n)&&(n=t.v.get(n));if("addEventListener"==n)return t.g.addEventListener.bind(t.g);if("removeEventListener"==n)return t.g.removeEventListener.bind(t.g);if("getMediaElement"==n)return function(){return this.j}.bind(t);if("getSharedConfiguration"==n)return ne.u("Can't share configuration across a network. Returning copy."),t.a.get("player","getConfiguration");if("getNetworkingEngine"==n)return t.a.ha()&&ne.u("NOTE: getNetworkingEngine() is always local!"),t.b.nc.bind(t.b);if(t.a.ha()){if("getManifest"==n||"drmInfo"==n)return function(){return ne.ba(n+"() does not work while casting!"),null};if("getManifestUri"==n)return Jn("getManifestUri",'Please use "getAssetUri" instead.'),e(t,"getAssetUri");if("attach"==n||"detach"==n)return function(){return ne.ba(n+"() does not work while casting!"),Promise.resolve()}}return t.a.ha()&&0==Object.keys(t.a.a.video).length&&oi[n]||!t.a.ha()?t.b[n].bind(t.b):t.a.get("player",n)}(t,e)}})}),function(i){var r=new Map;Si(i,function(e,t){var n;r.has(t)?(n=r.get(t),e.length<n.length?i.v.set(e,n):i.v.set(n,e)):r.set(t,e)})}(t),t.f=new B,t.f.Dc=t.j,t.g=new B,t.g.Dc=t.s}(this)}function Si(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var i=e.b,r=new Set;for(a in i)n(a)&&(r.add(a),t(a,i[a]));for(var a=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});a&&a!=o;){for(var s=Y(Object.getOwnPropertyNames(a)),u=s.next();!u.done;u=s.next())n(u=u.value)&&(r.add(u),t(u,i[u]));a=Object.getPrototypeOf(a)}}function Ai(e){var n={video:{},player:{},playerAfterLoad:{},manifest:e.b.Nc(),startTime:null};return e.c.pause(),ii.forEach(function(e){n.video[e]=this.c[e]}.bind(e)),e.c.ended||(n.startTime=e.c.currentTime),ui.forEach(function(e){var t=e[1];e=this.b[e[0]](),n.player[t]=e}.bind(e)),ci.forEach(function(e){var t=e[1];e=this.b[e[0]](),n.playerAfterLoad[t]=e}.bind(e)),n}function Ii(e){e.dispatchEvent(new F("caststatuschanged"))}function ki(e){e.f.dispatchEvent(new F(e.j.paused?"pause":"play"))}function xi(t){ui.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(t));var e=t.a.get("player","getAssetUri")(),n=t.a.get("video","ended"),i=Promise.resolve(),r=t.c.autoplay,a=null;n||(a=t.a.get("video","currentTime")),e&&(t.c.autoplay=!1,i=t.b.load(e,a));var o={};ii.forEach(function(e){o[e]=this.a.get("video",e)}.bind(t)),i.then(function(){t.c&&(ii.forEach(function(e){this.c[e]=o[e]}.bind(t)),ci.forEach(function(e){var t=e[1];e=this.a.get("player",e[0])(),this.b[t](e)}.bind(t)),t.c.autoplay=r,e&&t.c.play())},function(e){t.b.dispatchEvent(new F("error",{detail:e}))})}function Ci(e,t,n){e.a.ha()&&("video"==t?e.f.dispatchEvent(n):"player"==t&&e.g.dispatchEvent(n))}function Ni(e,t,n,i){var r,a,o=this;B.call(this),this.a=e,this.b=t,this.c=new et,this.H={video:e,player:t},this.w=n||function(){},this.J=i||function(e){return e},this.B=!1,this.j=!0,this.g=0,this.v=!1,this.s=!0,this.l=this.f=null,this.G=new Ne(function(){Mi(o)}),r=this,(a=cast.receiver.CastReceiverManager.getInstance()).onSenderConnected=r.$e.bind(r),a.onSenderDisconnected=r.$e.bind(r),a.onSystemVolumeChanged=r.Sf.bind(r),r.l=a.getCastMessageBus("urn:x-cast:com.google.cast.media"),r.l.onMessage=r.Lg.bind(r),r.f=a.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),r.f.onMessage=r.Vg.bind(r),a.start(),ti.forEach(function(e){this.c.m(this.a,e,this.gf.bind(this,"video"))}.bind(r)),ai.forEach(function(e){this.c.m(this.b,e,this.gf.bind(this,"player"))}.bind(r)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?r.b.ce(3840,2160):r.b.ce(1920,1080),r.c.m(r.a,"loadeddata",function(){this.v=!0}.bind(r)),r.c.m(r.b,"loading",function(){this.j=!1,Pi(this)}.bind(r)),r.c.m(r.a,"playing",function(){this.j=!1,Pi(this)}.bind(r)),r.c.m(r.a,"pause",function(){Pi(this)}.bind(r)),r.c.m(r.b,"unloading",function(){this.j=!0,Pi(this)}.bind(r)),r.c.m(r.a,"ended",function(){var e=this;new Ne(function(){e.a&&e.a.ended&&(e.j=!0,Pi(e))}).R(5)}.bind(r))}function Pi(e){Promise.resolve().then(function(){this.b&&(this.dispatchEvent(new F("caststatuschanged")),Ri(this)||_i(this))}.bind(e))}function Mi(e){e.G.R(.5);var t={video:{},player:{}};if(ni.forEach(function(e){t.video[e]=this.a[e]}.bind(e)),e.b.W())for(var n in si)0==e.g%si[n]&&(t.player[n]=e.b[n]());for(var i in oi)0==e.g%oi[i]&&(t.player[i]=e.b[i]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.v&&(e.g+=1),Ui(e,{type:"update",update:t},e.f),Ri(e)}function Ri(e){return e.s&&(e.a.duration||e.b.W())&&(Li(e),e.s=!1,1)}function Li(e,t){t=void 0===t?0:t;var n={contentId:e.b.Nc(),streamType:e.b.W()?"LIVE":"BUFFERED",contentType:""};e.b.W()||(n.duration=e.a.duration),_i(e,t,n)}function Ui(e,t,n,i){e.B&&(e=hi(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function _i(e,t,n){t=void 0===t?0:t,n=void 0===n?null:n;var i=e.a.playbackRate,r=Oi,i={mediaSessionId:0,playbackRate:i,playerState:r=e.j?r.IDLE:e.b.Ub()?r.Bf:e.a.paused?r.Df:r.Ef,currentTime:e.a.currentTime,supportedMediaCommands:63,volume:{level:e.a.volume,muted:e.a.muted}};n&&(i.media=n),Ui(e,{requestId:t,type:"MEDIA_STATUS",status:[i]},e.l)}h.__onGCastApiAvailable=function(e){if(e)for(var t=(e=Y(wi)).next();!t.done;t=e.next())t.value.init()},D(Ti,B),O("shaka.cast.CastProxy",Ti),Ti.prototype.destroy=Ti.prototype.destroy=function(e){return e&&this.a.Ob(),this.l&&(this.l.release(),this.l=null),e=[],this.b&&(e.push(this.b.destroy()),this.b=null),this.a&&(e.push(this.a.destroy()),this.a=null),this.s=this.j=this.c=null,Promise.all(e)},Ti.prototype.getVideo=Ti.prototype.rc=function(){return this.j},Ti.prototype.getPlayer=Ti.prototype.$a=function(){return this.s},Ti.prototype.canCast=Ti.prototype.xe=function(){return this.a.j&&mi},Ti.prototype.isCasting=Ti.prototype.ha=function(){return this.a.ha()},Ti.prototype.receiverName=Ti.prototype.ad=function(){return this.a.ad()},Ti.prototype.cast=Ti.prototype.cast=function(){var e=Ai(this);return this.a.cast(e).then(function(){if(this.b)return this.b.qe()}.bind(this))},Ti.prototype.setAppData=Ti.prototype.ae=function(e){this.a.ae(e)},Ti.prototype.suggestDisconnect=Ti.prototype.xf=function(){var e,t=this.a;t.b&&(e=t.H(),chrome.cast.requestSession(t.Sd.bind(t,e),t.Ye.bind(t)))},Ti.prototype.changeReceiverId=Ti.prototype.Be=function(t){var n=this;return $(function e(){return te(e,function(e){switch(e.o){case 1:return t==n.w?e.return():(n.w=t,n.a.Ob(),J(e,n.a.destroy(),2));case 2:n.a=null,n.a=new pi(t,function(){return Ii(n)},function(){return ki(n)},function(e,t){return Ci(n,e,t)},function(){return xi(n)},function(){return Ai(n)}),n.a.init(),j(e)}})})},Ti.prototype.forceDisconnect=Ti.prototype.Ob=function(){this.a.Ob()},Ti.prototype.G=function(e){if("addEventListener"==e)return this.f.addEventListener.bind(this.f);if("removeEventListener"==e)return this.f.removeEventListener.bind(this.f);if(this.a.ha()&&0==Object.keys(this.a.a.video).length){var t=this.c[e];if("function"!=typeof t)return t}return this.a.ha()?this.a.get("video",e):("function"==typeof(e=this.c[e])&&(e=e.bind(this.c)),e)},Ti.prototype.J=function(e,t){this.a.ha()?this.a.set("video",e,t):this.c[e]=t},Ti.prototype.H=function(e){this.a.ha()||this.f.dispatchEvent(new F(e.type,e))},Ti.prototype.B=function(e){this.a.ha()||this.g.dispatchEvent(e)},D(Ni,B),O("shaka.cast.CastReceiver",Ni),Ni.prototype.isConnected=Ni.prototype.isConnected=function(){return this.B},Ni.prototype.isIdle=Ni.prototype.Dg=function(){return this.j},Ni.prototype.destroy=Ni.prototype.destroy=function(){var n=this;return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return n.c&&(n.c.release(),n.c=null),t=[],n.b&&(t.push(n.b.destroy()),n.b=null),n.G&&(n.G.stop(),n.G=null),n.a=null,n.H=null,n.w=null,n.B=!1,n.j=!0,n.f=null,n.l=null,J(e,Promise.all(t),2);case 2:cast.receiver.CastReceiverManager.getInstance().stop(),j(e)}})})},(n=Ni.prototype).$e=function(){this.g=0,this.s=!0,this.B=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Pi(this)},n.gf=function(e,t){this.b&&(Mi(this),Ui(this,{type:"event",targetName:e,event:t},this.f))},n.Sf=function(){var e=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();e&&Ui(this,{type:"update",update:{video:{volume:e.level,muted:e.muted}}},this.f),Ui(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.f)},n.Vg=function(e){var t=fi(e.data);switch(ne.debug("CastReceiver: message",t),t.type){case"init":this.g=0,this.v=!1,this.s=!0,function(n,i,e){for(var t in i.player)n.b[t](i.player[t]);n.w(e),e=Promise.resolve();var r=n.a.autoplay;i.manifest&&(n.a.autoplay=!1,e=n.b.load(i.manifest,i.startTime)),e.then(function(){if(n.b){for(var e in i.video)n.a[e]=i.video[e];for(var t in i.playerAfterLoad)n.b[t](i.playerAfterLoad[t]);n.a.autoplay=r,i.manifest&&(n.a.play(),_i(n))}},function(e){n.b.dispatchEvent(new F("error",{detail:e}))})}(this,t.initState,t.appData),Mi(this);break;case"appData":this.w(t.appData);break;case"set":var n=t.targetName,i=t.property,t=t.value;if("video"==n){var r=cast.receiver.CastReceiverManager.getInstance();if("volume"==i){r.setSystemVolumeLevel(t);break}if("muted"==i){r.setSystemVolumeMuted(t);break}}this.H[n][i]=t;break;case"call":(n=this.H[t.targetName])[t.methodName].apply(n,t.args);break;case"asyncCall":n=t.targetName,i=t.methodName,"player"==n&&"load"==i&&(this.g=0,this.v=!1),r=t.id,e=e.senderId;var a=this.H[n];t=a[i].apply(a,t.args),"player"==n&&"load"==i&&(t=t.then(function(){this.s=!0}.bind(this))),t.then(this.qf.bind(this,e,r,null),this.qf.bind(this,e,r))}},n.Lg=function(e){var n=fi(e.data);switch(ne.debug("CastReceiver: message",n),n.type){case"PLAY":this.a.play(),_i(this);break;case"PAUSE":this.a.pause(),_i(this);break;case"SEEK":e=n.currentTime;var t=n.resumeState;null!=e&&(this.a.currentTime=Number(e)),t&&"PLAYBACK_START"==t?(this.a.play(),_i(this)):t&&"PLAYBACK_PAUSE"==t&&(this.a.pause(),_i(this));break;case"STOP":this.b.qe().then(function(){this.b&&_i(this)}.bind(this));break;case"GET_STATUS":Li(this,Number(n.requestId));break;case"VOLUME":e=(t=n.volume).level,t=t.muted;var i=this.a.volume,r=this.a.muted;null!=e&&(this.a.volume=Number(e)),null!=t&&(this.a.muted=t),i==this.a.volume&&r==this.a.muted||_i(this);break;case"LOAD":this.g=0,this.s=this.v=!1,e=n.media,t=n.currentTime,i=this.J(e.contentId),r=n.autoplay||!0,this.w(e.customData),r&&(this.a.autoplay=!0),this.b.load(i,t).then(function(){this.b&&Li(this)}.bind(this)).catch(function(e){var t="LOAD_FAILED";7==e.category&&7e3==e.code&&(t="LOAD_CANCELLED"),Ui(this,{requestId:Number(n.requestId),type:t},this.l)}.bind(this));break;default:ne.u("Unrecognized message type from the generic Chromecast controller!",n.type),Ui(this,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.l)}},n.qf=function(e,t,n){this.b&&Ui(this,{type:"asyncComplete",id:t,error:n},this.f,e)};var Oi={IDLE:"IDLE",Ef:"PLAYING",Bf:"BUFFERING",Df:"PAUSED"};function Di(e,t){this.T=e,this.b=t==Fi,this.a=0}O("shaka.util.DataViewReader",Di);var Fi=1;function ji(){throw new Le(2,3,3e3)}function Ki(){this.c=[],this.b=[],this.a=!1}function Bi(e){for(var t=null!=e.flags?12:8;e.reader.Qa()&&!e.parser.a;)e.parser.Xc(e.start+t,e.reader,e.partialOkay)}function Gi(e){for(var t=null!=e.flags?12:8,n=e.reader.M();0<n&&!e.parser.a;--n)e.parser.Xc(e.start+t,e.reader,e.partialOkay)}function Vi(t){return function(e){t(e.reader.Fb(e.reader.T.byteLength-e.reader.va()))}}function zi(e){for(var t=0,n=0;n<e.length;n++)t=t<<8|e.charCodeAt(n);return t}function Hi(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function Wi(e){var r=this;this.a=[],this.b=[],this.data=[],(new Ki).P("moov",Bi).za("pssh",function(e){if(1<e.version)ne.u("Unrecognized PSSH version found!");else{var t=e.reader.T,t=new Uint8Array(t.buffer,t.byteOffset-12,e.size);if(r.data.push(t),r.a.push(kt.gd(e.reader.Fb(16))),0<e.version){t=e.reader.M();for(var n=0;n<t;++n){var i=kt.gd(e.reader.Fb(16));r.b.push(i)}}}}).parse(e),0==this.data.length&&ne.u("No pssh box found!")}Di.Endianness={Kh:0,Mh:Fi},Di.prototype.hasMoreData=Di.prototype.Qa=function(){return this.a<this.T.byteLength},Di.prototype.getPosition=Di.prototype.va=function(){return this.a},Di.prototype.getLength=Di.prototype.dg=function(){return this.T.byteLength},Di.prototype.readUint8=Di.prototype.Ea=function(){try{var e=this.T.getUint8(this.a);return this.a+=1,e}catch(e){ji()}},Di.prototype.readUint16=Di.prototype.wc=function(){try{var e=this.T.getUint16(this.a,this.b);return this.a+=2,e}catch(e){ji()}},Di.prototype.readUint32=Di.prototype.M=function(){try{var e=this.T.getUint32(this.a,this.b);return this.a+=4,e}catch(e){ji()}},Di.prototype.readInt32=Di.prototype.kf=function(){try{var e=this.T.getInt32(this.a,this.b);return this.a+=4,e}catch(e){ji()}},Di.prototype.readUint64=Di.prototype.dc=function(){try{var e,t;this.b?(e=this.T.getUint32(this.a,!0),t=this.T.getUint32(this.a+4,!0)):(t=this.T.getUint32(this.a,!1),e=this.T.getUint32(this.a+4,!1))}catch(e){ji()}if(2097151<t)throw new Le(2,3,3001);return this.a+=8,t*Math.pow(2,32)+e},Di.prototype.readBytes=Di.prototype.Fb=function(e){this.a+e>this.T.byteLength&&ji();var t=new Uint8Array(this.T.buffer,this.T.byteOffset+this.a,e);return this.a+=e,t},Di.prototype.skip=Di.prototype.V=function(e){this.a+e>this.T.byteLength&&ji(),this.a+=e},Di.prototype.rewind=Di.prototype.mf=function(e){this.a<e&&ji(),this.a-=e},Di.prototype.seek=Di.prototype.seek=function(e){(e<0||e>this.T.byteLength)&&ji(),this.a=e},Di.prototype.readTerminatedString=Di.prototype.Ud=function(){for(var e=this.a;this.Qa()&&0!=this.T.getUint8(this.a);)this.a+=1;return e=new Uint8Array(this.T.buffer,this.T.byteOffset+e,this.a-e),this.a+=1,yt(e)},O("shaka.util.Mp4Parser",Ki),Ki.prototype.box=Ki.prototype.P=function(e,t){var n=zi(e);return this.c[n]=0,this.b[n]=t,this},Ki.prototype.fullBox=Ki.prototype.za=function(e,t){var n=zi(e);return this.c[n]=1,this.b[n]=t,this},Ki.prototype.stop=Ki.prototype.stop=function(){this.a=!0},Ki.prototype.parse=Ki.prototype.parse=function(e,t){var n=new Uint8Array(e),n=new Di(new DataView(n.buffer,n.byteOffset,n.byteLength),0);for(this.a=!1;n.Qa()&&!this.a;)this.Xc(0,n,t)},Ki.prototype.parseNext=Ki.prototype.Xc=function(e,t,n){var i=t.va(),r=t.M(),a=t.M();switch(ne.N("Parsing MP4 box",Hi(a)),r){case 0:r=t.T.byteLength-i;break;case 1:r=t.dc()}var o,s,u=this.b[a];u?(s=o=null,1==this.c[a]&&(o=(s=t.M())>>>24,s&=16777215),a=i+r,n&&a>t.T.byteLength&&(a=t.T.byteLength),t=0<(a-=t.va())?t.Fb(a):new Uint8Array(0),u({parser:this,partialOkay:n||!1,version:o,flags:s,reader:t=new Di(new DataView(t.buffer,t.byteOffset,t.byteLength),0),size:r,start:i+e})):t.V(Math.min(i+r-t.va(),t.T.byteLength-t.va()))},Ki.children=Bi,Ki.sampleDescription=Gi,Ki.allData=Vi,Ki.typeToString=Hi;var qi={Mc:function(e,t){var n=qi.$(e,t);return 1!=n.length?null:n[0]},sd:function(e,t,n){return 1!=(e=qi.Ie(e,t,n)).length?null:e[0]},$:function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return e instanceof Element&&e.tagName==t})},Ie:function(e,t,n){return Array.prototype.filter.call(e.childNodes,function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t})},getAttributeNS:function(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null},Oc:function(e){return Array.prototype.every.call(e.childNodes,function(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE})?e.textContent.trim():null},S:function(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.getAttribute(t))&&(r=n(e)),null==r?i:r},Zg:function(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null},eb:function(e){if(!e)return null;var t=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e);return t?(e=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Number(t[5]||null)+Number(t[6]||null),isFinite(e)?e:null):(ne.u("Invalid duration string:",e),null)},Zc:function(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null},parseInt:function(e){return 0==(e=Number(e))%1?e:null},Yc:function(e){return 0==(e=Number(e))%1&&0<e?e:null},ac:function(e){return 0==(e=Number(e))%1&&0<=e?e:null},parseFloat:function(e){return e=Number(e),isNaN(e)?null:e},Qf:function(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e},df:function(e,t){var n,i=new DOMParser;try{var r=i.parseFromString(e,"text/xml")}catch(e){}return r&&r.documentElement.tagName==t&&(n=r.documentElement),n&&0<n.getElementsByTagName("parsererror").length?null:n},cf:function(e,t){try{var n=yt(e);return qi.df(n,t)}catch(e){}}},Xi=(new Map).set("urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b","org.w3.clearkey").set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine.alpha").set("urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95","com.microsoft.playready").set("urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb","com.adobe.primetime");function Yi(e,t,n){var i=function(e){for(var t=[],n=(e=Y(e)).next();!n.done;n=e.next())(n=Zi(n.value))&&t.push(n);return t}(e),r=null;e=[];var a=[],o=new Set(i.map(function(e){return e.keyId}));if(o.delete(null),1<o.size)throw new Le(2,4,4010);if(n||(a=i.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.nf||(r=e.init||r,!1)})).length&&(0==(e=function(e,t,n){for(var i,r=[],a=(n=Y(n)).next();!a.done;a=n.next()){a=a.value;var o,s,u,c,l,d,h=Xi.get(a.nf);if(h)i=(i=qi.sd(a.node,"urn:microsoft:playready","pro"))?(i=kt.Za(i.textContent),o=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),s=i.length,u=o.length+16+s,c=new ArrayBuffer(u),l=new Uint8Array(c),c=new DataView(c),d=0,c.setUint32(d,u),d+=4,c.setUint32(d,1886614376),d+=4,c.setUint32(d,0),d+=4,l.set(o,d),d+=o.length,c.setUint32(d,s),d+=4,l.set(i,d),[{initData:l,initDataType:"cenc",keyId:a.keyId}]):null,i=an(h,a.init||e||i),(h=Ji.get(h))&&(i.licenseServerUri=h(a)),r.push(i);else for(a=Y(a=t(a.node)||[]),h=a.next();!h.done;h=a.next())r.push(h.value)}return r}(r,t,a)).length&&(e=[an("",r)])),i.length&&(n||!a.length))for(e=[],n=(t=Y(Xi.values())).next();!n.done;n=t.next())"org.w3.clearkey"!=(n=n.value)&&e.push(an(n,r));if(o=Array.from(o)[0]||null)for(n=(t=Y(e)).next();!n.done;n=t.next())for(i=(n=Y(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=o;return{Ee:o,Nh:r,drmInfos:e,Je:!0}}var $i,Ji=(new Map).set("com.widevine.alpha",function(e){return(e=qi.sd(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",function(e){return(e=qi.sd(e.node,"urn:microsoft:playready","pro"))&&(e=function(e){var t=0,n=new DataView(e).getUint32(t,!0);if(t+=4,n!==e.byteLength)return ne.u("PlayReady Object with invalid length encountered."),[];t+=2,n=[];for(var i=new DataView(e);t<e.byteLength-1;){var r=i.getUint16(t,!0);t+=2;var a=i.getUint16(t,!0);t+=2;var o=new Uint8Array(e,t,a);n.push({type:r,value:o}),t+=a}return n}((e=kt.Za(e.textContent)).buffer).filter(function(e){return 1===e.type})[0])?(e=Et(e.value,!0),(e=qi.df(e,"WRMHEADER"))?function(e){for(var t=(e=Y(e.getElementsByTagName("DATA"))).next();!t.done;t=e.next())for(var n=(t=Y(t.value.childNodes)).next();!n.done;n=t.next())if((n=n.value)instanceof Element&&"LA_URL"==n.tagName)return n.textContent;return""}(e):""):""});function Zi(e){var t=e.getAttribute("schemeIdUri"),n=qi.getAttributeNS(e,"urn:mpeg:cenc:2013","default_KID"),i=qi.Ie(e,"urn:mpeg:cenc:2013","pssh").map(qi.Oc);if(!t)return ne.error("Missing required schemeIdUri attribute on","ContentProtection element",e),null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new Le(2,4,4009);var r=[];try{r=i.map(function(e){return{initDataType:"cenc",initData:kt.Za(e),keyId:null}})}catch(e){throw new Le(2,4,4007)}return{node:e,nf:t,keyId:n,init:0<r.length?r:null}}function Qi(a,e,t,n,i){var o={RepresentationID:e,Number:t,Bandwidth:n,Time:i};return a.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(e,t,n,i){if("$$"==e)return"$";var r=o[t];if(null==r)return ne.u("URL template does not have an available substitution for identifier",'"'+t+'":',a),e;switch("RepresentationID"==t&&n&&(ne.u("URL template should not contain a width specifier for identifier",'"RepresentationID":',a),n=void 0),"Time"==t&&(r=Math.round(r)),i){case void 0:case"d":case"i":case"u":e=r.toString();break;case"o":e=r.toString(8);break;case"x":e=r.toString(16);break;case"X":e=r.toString(16).toUpperCase();break;default:e=r.toString()}return n=h.parseInt(n,10)||1,Array(Math.max(0,n-e.length)+1).join("0")+e})}function er(e,t){var n=tr(e,t,"timescale"),i=1;n&&(i=qi.Yc(n)||1),n=tr(e,t,"duration"),(n=qi.Yc(n||""))&&(n/=i);var r=tr(e,t,"startNumber"),a=Number(tr(e,t,"presentationTimeOffset"))||0,o=qi.ac(r||"");null!=r&&null!=o||(o=1);r=null;if(u=nr(e,t,"SegmentTimeline")){r=i;for(var s=e.ea.duration||1/0,u=qi.$(u,"S"),c=[],l=-a,d=0;d<u.length;++d){var h=u[d],f=qi.S(h,"t",qi.ac),p=qi.S(h,"d",qi.ac),m=qi.S(h,"r",qi.parseInt);if(null!=f&&(f-=a),!p){ne.u('"S" element must have a duration:','ignoring the remaining "S" elements.',h);break}if(f=null!=f?f:l,(m=m||0)<0)if(d+1<u.length){if(null==(m=qi.S(u[d+1],"t",qi.ac))){ne.u('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',h);break}if(m<=f){ne.u('An "S" element cannot have a negative repeat','if its start time exceeds the next "S" element\'s start time:','ignoring the remaining "S" elements.',h);break}m=Math.ceil((m-f)/p)-1}else{if(1/0==s){ne.u('The last "S" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "S" element.',h);break}if(s<=f/r){ne.u('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',h);break}m=Math.ceil((s*r-f)/p)-1}for(0<c.length&&f!=l&&(Math.abs((f-l)/r)>=sn&&ne.u("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",h),c[c.length-1].end=f/r),h=0;h<=m;++h)l=f+p,c.push({start:f/r,end:l/r,Gh:f}),f=l}r=c}return{timescale:i,sa:n,Hb:o,Fa:a/i||0,re:a,X:r}}function tr(e,t,n){return[t(e.F),t(e.oa),t(e.Da)].filter(nn.jb).map(function(e){return e.getAttribute(n)}).reduce(function(e,t){return e||t})}function nr(e,t,n){return[t(e.F),t(e.oa),t(e.Da)].filter(nn.jb).map(function(e){return qi.Mc(e,n)}).reduce(function(e,t){return e||t})}function ir(e,t,n,i,r,a){if(a=void 0===a?0:a,qi.getAttributeNS(e,"http://www.w3.org/1999/xlink","href")){var o=function(r,a,o,e,s,u){for(var c=qi.getAttributeNS(r,"http://www.w3.org/1999/xlink","href"),t=qi.getAttributeNS(r,"http://www.w3.org/1999/xlink","actuate")||"onRequest",n=0;n<r.attributes.length;n++){var i=r.attributes[n];"http://www.w3.org/1999/xlink"==i.namespaceURI&&(r.removeAttributeNS(i.namespaceURI,i.localName),--n)}if(5<=u)return Oe(new Le(2,4,4028));if("onLoad"!=t)return Oe(new Le(2,4,4027));var l=rn([e],[c]);return s.request(0,$e(l,a)).ma(function(e){if(!(e=qi.cf(e.data,r.tagName)))return Oe(new Le(2,4,4001,c));for(;r.childNodes.length;)r.removeChild(r.childNodes[0]);for(;e.childNodes.length;){var t=e.childNodes[0];e.removeChild(t),r.appendChild(t)}for(t=0;t<e.attributes.length;t++){var n=e.attributes[t].nodeName,i=e.getAttribute(n);r.setAttribute(n,i)}return ir(r,a,o,l[0],s,u+1)})}(e,t,n,i,r,a);return n&&(o=o.ma(void 0,function(){return ir(e,t,n,i,r,a)})),o}o=[];for(var s=0;s<e.childNodes.length;s++){var u=e.childNodes[s];u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==qi.getAttributeNS(u,"http://www.w3.org/1999/xlink","href")?(e.removeChild(u),--s):"SegmentTimeline"!=u.tagName&&o.push(ir(u,t,n,i,r,a)))}return Ke(o).ma(function(){return e})}function rr(e,t,n){this.c=e,this.b=t,this.a=n}function ar(e,t,n,i,r,a){this.position=e,this.startTime=t,this.endTime=n,this.c=i,this.b=r,this.a=a}function or(e,t,n,i){var r,a=(new Ki).za("sidx",function(e){r=function(e,t,n,i){var r=[];i.reader.V(4);var a=i.reader.M();if(0==a)throw ne.error("Invalid timescale."),new Le(2,3,3005);{var o,s;s=0==i.version?(o=i.reader.M(),i.reader.M()):(o=i.reader.dc(),i.reader.dc())}i.reader.V(2);var u=i.reader.wc();for(e=e+i.size+s,s=0;s<u;s++){var c=i.reader.M(),l=(2147483648&c)>>>31;c&=2147483647;var d=i.reader.M();if(i.reader.V(4),1==l)throw ne.error("Heirarchical SIDXs are not supported."),new Le(2,3,3006);r.push(new ar(r.length,o/a-t,(o+d)/a-t,function(){return n},e,e+c-1)),o+=d,e+=c}return i.parser.stop(),r}(t,i,n,e)});if(e&&a.parse(e),r)return r;throw ne.error('Invalid box type, expected "sidx".'),new Le(2,3,3004)}function sr(e){this.a=e}function ur(e,t){for(;e.a.length&&e.a[e.a.length-1].startTime>=t;)e.a.pop();for(;e.a.length&&e.a[0].endTime<=0;)e.a.shift();var n;0!=e.a.length&&(n=e.a[e.a.length-1],e.a[e.a.length-1]=new ar(n.position,n.startTime,t,n.c,n.b,n.a))}function cr(e){this.b=e,this.a=new Di(e,0),$i=$i||[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]}function lr(e){var t=dr(e);if(7<t.length)throw new Le(2,3,3002);for(var n=0,i=0;i<t.length;i++)n=256*n+t[i];t=n,n=dr(e);e:{i=kt.Xa;for(var r=0;r<$i.length;r++)if(i(n,$i[r])){i=!0;break e}i=!1}if(i)n=e.b.byteLength-e.a.va();else{if(8==n.length&&224&n[1])throw new Le(2,3,3001);for(i=n[0]&(1<<8-n.length)-1,r=1;r<n.length;r++)i=256*i+n[r];n=i}return n=e.a.va()+n<=e.b.byteLength?n:e.b.byteLength-e.a.va(),i=new DataView(e.b.buffer,e.b.byteOffset+e.a.va(),n),e.a.V(n),new hr(t,i)}function dr(e){for(var t=e.a.Ea(),n=1;n<=8&&!(t&1<<8-n);n++);if(8<n)throw new Le(2,3,3002);var i=new Uint8Array(n);for(i[0]=t,t=1;t<n;t++)i[t]=e.a.Ea();return i}function hr(e,t){this.id=e,this.a=t}function fr(e){if(8<e.a.byteLength)throw new Le(2,3,3002);if(8==e.a.byteLength&&224&e.a.getUint8(0))throw new Le(2,3,3001);for(var t=0,n=0;n<e.a.byteLength;n++)t=256*t+e.a.getUint8(n);return t}function pr(){}function mr(e){var t=new cr(e.a);if(179!=(e=lr(t)).id)throw ne.u("Not a CueTime element."),new Le(2,3,3013);if(e=fr(e),183!=(t=lr(t)).id)throw ne.u("Not a CueTrackPositions element."),new Le(2,3,3012);t=new cr(t.a);for(var n=0;t.Qa();){var i=lr(t);if(241==i.id){n=fr(i);break}}return{Hh:e,gh:n}}function gr(e,t){var n=nr(e,t,"Initialization");if(!n)return null;var i=e.F.Ga,r=n.getAttribute("sourceURL");r&&(i=rn(e.F.Ga,[r])),r=0;var a=null;return(n=qi.S(n,"range",qi.Zc))&&(r=n.start,a=n.end),new rr(function(){return i},r,a)}function vr(e,t,n,i,r,a,o,s){var u=e.presentationTimeline,c=!e.Mb||!e.ea.Dd,l=e.ea.start,d=e.ea.duration,h=t,f=null;return{createSegmentIndex:function(){var e=[h(i,r,a),"webm"==o?h(n.c(),n.b,n.a):null];return h=null,Promise.all(e).then(function(e){var t=e[0];e=e[1]||null,t="mp4"==o?or(t,r,i,s):(new pr).parse(t,e,i,s),u.Yb(t,l),f=new sr(t),c&&ur(f,d)})},findSegmentPosition:function(e){return f.find(e)},getSegmentReference:function(e){return f.get(e)}}}function br(e){return e.xc}function yr(e,t){var n,i=gr(e,Er),r=[(n=e).F.ob,n.oa.ob,n.Da.ob].filter(nn.jb).map(function(e){return qi.$(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(e){return e.getAttribute("indexRange")&&!n.Pe&&(n.Pe=!0,ne.u("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate.")),{Hg:e.getAttribute("media"),start:(e=qi.S(e,"mediaRange",qi.Zc,{start:0,end:null})).start,end:e.end}}),a=er(e,Er),o=a.Hb;0==o&&(ne.u("SegmentList@startNumber must be > 0"),o=1);var s=0;if(a.sa?s=a.sa*(o-1):a.X&&0<a.X.length&&(s=a.X[0].start),!(r={sa:a.sa,startTime:s,Hb:o,Fa:a.Fa,X:a.X,Cb:r}).sa&&!r.X&&1<r.Cb.length)throw ne.u("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",e.F),new Le(2,4,4002);if(!r.sa&&!e.ea.duration&&!r.X&&1==r.Cb.length)throw ne.u("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",e.F),new Le(2,4,4002);if(r.X&&0==r.X.length)throw ne.u("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",e.F),new Le(2,4,4002);return o=a=null,e.Da.id&&e.F.id&&(a=t[o=e.Da.id+","+e.F.id]),s=function(e,t,n,i){var r=i.Cb.length;i.X&&i.X.length!=i.Cb.length&&(r=Math.min(i.X.length,i.Cb.length),ne.u("The number of items in the segment timeline and the number of segment","URLs do not match, truncating",i.Cb.length,"to",r));for(var a=[],o=i.startTime,s=0;s<r;s++){var u,c=i.Cb[s],l=rn(n,[c.Hg]);u=null!=i.sa?o+i.sa:i.X?i.X[s].end:o+e,a.push(new ar(s+t,o,u,function(e){return e}.bind(null,l),c.start,c.end)),o=u}return a}(e.ea.duration,r.Hb,e.F.Ga,r),a?(a.Jd(s),o=e.presentationTimeline.qc(),a.qd(o-e.ea.start)):(e.presentationTimeline.Yb(s,e.ea.start),a=new sr(s),o&&e.Mb&&(t[o]=a)),e.Mb&&e.ea.Dd||ur(a,e.ea.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:a.find.bind(a),getSegmentReference:a.get.bind(a),initSegmentReference:i,Fa:r.Fa}}function Er(e){return e.ob}function wr(e,t,n,i){var r,a,o,s,u,c,l,d,h,f,p=function(e){var t=tr(e,Tr,"initialization");if(!t)return null;var n=e.F.id,i=e.bandwidth||null,r=e.F.Ga;return new rr(function(){var e=Qi(t,n,null,i,null);return rn(r,[e])},0,null)}(e),m=er(e,Tr),g=tr(e,Tr,"media"),v=tr(e,Tr,"index"),g=(m={sa:m.sa,timescale:m.timescale,Hb:m.Hb,Fa:m.Fa,re:m.re,X:m.X,Hd:g,uc:v}).uc?1:0;if(g+=m.X?1:0,0==(g+=m.sa?1:0))throw ne.error("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",e.F),new Le(2,4,4002);if(1!=g&&(ne.u("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",e.F),m.uc?(ne.info("Using the index URL template by default."),m.X=null):ne.info("Using the SegmentTimeline by default."),m.sa=null),!m.uc&&!m.Hd)throw ne.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",e.F),new Le(2,4,4002);if(m.uc){if("mp4"!=(n=e.F.mimeType.split("/")[1])&&"webm"!=n)throw ne.error("SegmentTemplate specifies an unsupported container type.",e.F),new Le(2,4,4006);if("webm"==n&&!p)throw ne.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate uses a WebM container,","but does not contain an initialization URL template.",e.F),new Le(2,4,4005);i=Qi(m.uc,e.F.id,null,e.bandwidth||null,null),e=vr(e,t,p,i=rn(e.F.Ga,[i]),0,null,n,m.Fa)}else e=m.sa?(i||(e.presentationTimeline.Md(m.sa),e.presentationTimeline.Nd(e.ea.start)),a=m,o=(r=e).ea.duration,s=a.sa,u=a.Hb,c=a.timescale,l=a.Hd,d=r.bandwidth||null,h=r.F.id,f=r.F.Ga,{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return e<0||o&&o<=e?null:Math.floor(e/s)},getSegmentReference:function(t){var n=t*s,e=n+s;return o&&(e=Math.min(e,o)),e<0||o&&o<=n?null:new ar(t,n,e,function(){var e=Qi(l,h,t+u,d,n*c);return rn(f,[e])},0,null)}}):(g=t=null,e.Da.id&&e.F.id&&(t=n[g=e.Da.id+","+e.F.id]),v=function(e,t){for(var n=[],i=0;i<t.X.length;i++){var r=i+t.Hb;n.push(new ar(r,t.X[i].start,t.X[i].end,function(e,t,n,i,r,a){return rn(i,[e=Qi(e,t,r,n,a)]).map(function(e){return e.toString()})}.bind(null,t.Hd,e.F.id,e.bandwidth||null,e.F.Ga,r,t.X[i].Gh+t.re),0,null))}return n}(e,m),i=!e.Mb||!e.ea.Dd,t?(i&&ur(new sr(v),e.ea.duration),t.Jd(v),n=e.presentationTimeline.qc(),t.qd(n-e.ea.start)):(e.presentationTimeline.Yb(v,e.ea.start),t=new sr(v),g&&e.Mb&&(n[g]=t)),i&&ur(t,e.ea.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:t.find.bind(t),getSegmentReference:t.get.bind(t)});return{createSegmentIndex:e.createSegmentIndex,findSegmentPosition:e.findSegmentPosition,getSegmentReference:e.getSegmentReference,initSegmentReference:p,Fa:m.Fa}}function Tr(e){return e.zc}O("shaka.media.InitSegmentReference",rr),rr.prototype.createUris=rr.prototype.od=function(){return this.c()},rr.prototype.getStartByte=rr.prototype.yd=function(){return this.b},rr.prototype.getEndByte=rr.prototype.wd=function(){return this.a},O("shaka.media.SegmentReference",ar),ar.prototype.getPosition=ar.prototype.va=function(){return this.position},ar.prototype.getStartTime=ar.prototype.Qc=function(){return this.startTime},ar.prototype.getEndTime=ar.prototype.ag=function(){return this.endTime},ar.prototype.createUris=ar.prototype.od=function(){return this.c()},ar.prototype.getStartByte=ar.prototype.yd=function(){return this.b},ar.prototype.getEndByte=ar.prototype.wd=function(){return this.a},O("shaka.media.SegmentIndex",sr),sr.prototype.destroy=sr.prototype.destroy=function(){return this.a=null,Promise.resolve()},sr.prototype.find=sr.prototype.find=function(e){for(var t=this.a.length-1;0<=t;--t){var n=this.a[t];if(e>=n.startTime&&e<n.endTime)return n.position}return this.a.length&&e<this.a[0].startTime?this.a[0].position:null},sr.prototype.get=sr.prototype.get=function(e){return 0==this.a.length||(e-=this.a[0].position)<0||e>=this.a.length?null:this.a[e]},sr.prototype.offset=sr.prototype.offset=function(e){for(var t=0;t<this.a.length;++t)this.a[t].startTime+=e,this.a[t].endTime+=e},sr.prototype.merge=sr.prototype.Jd=function(e){for(var t=[],n=0,i=0;n<this.a.length&&i<e.length;){var r=this.a[n],a=e[i];r.startTime<a.startTime?(t.push(r),n++):(r.startTime>a.startTime?0==n?t.push(a):ne.u("Refusing to rewrite original references on update!"):(.1<Math.abs(r.endTime-a.endTime)?t.push(new ar(r.position,a.startTime,a.endTime,a.c,a.b,a.a)):t.push(r),n++),i++)}for(;n<this.a.length;)t.push(this.a[n++]);if(t.length)for(n=t[t.length-1].position+1;i<e.length;)r=new ar(n++,(r=e[i++]).startTime,r.endTime,r.c,r.b,r.a),t.push(r);else t=e;this.a=t},sr.prototype.evict=sr.prototype.qd=function(e){for(var t=0;t<this.a.length;++t)if(this.a[t].endTime>e)return void this.a.splice(0,t);this.a=[]},cr.prototype.Qa=function(){return this.a.Qa()},pr.prototype.parse=function(e,t,n,i){var r;if(440786851!=lr(t=new cr(new DataView(t))).id)throw ne.error("Not an EBML element."),new Le(2,3,3008);var a=lr(t);if(408125543!=a.id)throw ne.error("Not a Segment element."),new Le(2,3,3009);for(t=a.a.byteOffset,a=new cr(a.a),r=null;a.Qa();){var o=lr(a);if(357149030==o.id){r=o;break}}if(!r)throw ne.error("Not an Info element."),new Le(2,3,3010);for(a=new cr(r.a),r=1e6,o=null;a.Qa();){var s=lr(a);if(2807729==s.id)r=fr(s);else if(17545==s.id)if(4==(o=s).a.byteLength)o=o.a.getFloat32(0);else{if(8!=o.a.byteLength)throw new Le(2,3,3003);o=o.a.getFloat64(0)}}if(null==o)throw new Le(2,3,3011);if(r=o*(a=r/1e9),475249515!=(e=lr(new cr(new DataView(e)))).id)throw ne.error("Not a Cues element."),new Le(2,3,3007);return function(e,t,n,i,r,a){function o(){return r}var s=[];e=new cr(e.a);for(var u=null,c=null;e.Qa();){var l,d=lr(e);187!=d.id||(l=mr(d))&&(d=n*l.Hh,l=t+l.gh,null!=u&&s.push(new ar(s.length,u-a,d-a,o,c,l-1)),u=d,c=l)}return null!=u&&s.push(new ar(s.length,u-a,i-a,o,c,null)),s}(e,t,a,r,n,i)};var Sr={bc:{},vc:{},Wd:function(e,t){Sr.vc[e]=t}};function Ar(e,t,n){this.f=e,this.$c=t,this.j=this.g=1/0,this.a=1,this.b=this.c=null,this.s=0,this.v=!0,this.l=0,this.w=void 0===n||n}function Ir(e,t,n,i){return e=$e(e,i),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function kr(){var e=this;this.b=this.a=null,this.f=[],this.c=null,this.s=[],this.j=1,this.v={},this.w=0,this.B=new le(5),this.l=new Ne(function(){var i;i=e,$(function e(){var t,n;return te(e,function(e){switch(e.o){case 1:return ne.info("Updating manifest..."),t=0,Z(e,2),J(e,xr(i),4);case 4:t=e.A,Q(e,3);break;case 2:n=ee(e),i.b&&(n.severity=1,i.b.onError(n));case 3:if(!i.b)return e.return();Mr(i,t),j(e)}})})}),this.g=new He}function xr(t){var n=Date.now(),e=t.b.networkingEngine.request(0,$e(t.f,t.a.retryParameters));return We(t.g,e),e.promise.then(function(e){if(t.b)return e.uri&&!t.f.includes(e.uri)&&t.f.unshift(e.uri),function(t,e,n){if(!(e=qi.cf(e,"MPD")))throw new Le(2,4,4001,n);return e=ir(e,t.a.retryParameters,t.a.dash.xlinkFailGracefully,n,t.b.networkingEngine),We(t.g,e),e.promise.then(function(e){return O=t,D=e,F=n,$(function e(){var h,f,p,m,g,v,b,y,E,w,T,S,A,I,k,x,C,N,P,M,R,L,U,_;return te(e,function(e){switch(e.o){case 1:m=nn,v=[F],0<(b=(g=qi).$(D,"Location").map(g.Oc).filter(m.jb)).length&&(y=rn(v,b),v=O.f=y),E=g.$(D,"BaseURL").map(g.Oc),w=rn(v,E),T=O.a.dash.ignoreMinBufferTime,S=0,T||(S=g.S(D,"minBufferTime",g.eb)),O.w=g.S(D,"minimumUpdatePeriod",g.eb,-1),A=g.S(D,"availabilityStartTime",g.Zg),I=g.S(D,"timeShiftBufferDepth",g.eb),k=g.S(D,"maxSegmentDuration",g.eb),x=D.getAttribute("type")||"static",C=O.a.dash.ignoreSuggestedPresentationDelay,N=null,C||(N=g.S(D,"suggestedPresentationDelay",g.eb)),P=O.c?O.c.presentationTimeline:(M=Math.max(O.a.dash.defaultPresentationDelay,1.5*S),new Ar(A,null!=N?N:M,O.a.dash.autoCorrectDrift));for(var t={Mb:"static"!=x,presentationTimeline:P,Da:null,ea:null,oa:null,F:null,bandwidth:0,Pe:!1},n=w,i=qi.S(D,"mediaPresentationDuration",qi.eb),r=[],a=0,o=qi.$(D,"Period"),s=0;s<o.length;s++){var u,c=o[s],a=qi.S(c,"start",qi.eb,a),l=qi.S(c,"duration",qi.eb),d=null;if(s!=o.length-1?null!=(u=qi.S(o[s+1],"start",qi.eb))&&(d=u-a):null!=i&&(d=i-a),u=sn,d&&l&&Math.abs(d-l)>u&&ne.u("There is a gap/overlap between Periods",c),null==d&&(d=l),c=Cr(O,t,n,{start:a,duration:d,node:c,Dd:null==d||s==o.length-1}),r.push(c),l=t.Da.id,O.s.includes(l)||(O.s.push(l),O.c&&(O.b.filterNewPeriod(c),O.c.periods.push(c))),null==d){s!=o.length-1&&ne.u("Skipping Period",s+1,"and any subsequent Periods:","Period",s+1,"does not have a valid start time.",r[s+1]),a=null;break}a+=d}if(null==O.c&&O.b.filterAllPeriods(r),p=null!=i?(a!=i&&ne.u("@mediaPresentationDuration does not match the total duration of all","Periods."),h=r,f=i,!1):(h=r,f=a,!0),R=f,L=h,P.Ac("static"==x),"static"!=x&&p||P.Ta(R||1/0),P.W()&&!isNaN(O.a.availabilityWindowOverride)&&(I=O.a.availabilityWindowOverride),null==I&&(I=1/0),P.ge(I),P.Md(k||1),O.c){e.C(0);break}if(O.c={presentationTimeline:P,periods:L,offlineSessionIds:[],minBufferTime:S||0},P.zf())return U=g.$(D,"UTCTiming"),J(e,function(e,n,t){t=t.map(function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}});var i=e.a.dash.clockSyncUri;return!t.length&&i&&t.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:i}),nn.Of(t,function(e){var t=e.scheme;switch(e=e.value,t){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Lr(this,n,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Lr(this,n,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return t=Date.parse(e),isNaN(t)?0:t-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":return ne.ba("NTP UTCTiming scheme is not supported"),Promise.reject();default:return ne.ba("Unrecognized scheme in UTCTiming element",t),Promise.reject()}}.bind(e)).catch(function(){return ne.ba("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),0})}(O,w,U),4);e.C(0);break;case 4:if(_=e.A,!O.b)return e.return();P.rf(_),j(e)}})});var O,D,F})}(t,e.data,e.uri)}).then(function(){var e=(Date.now()-n)/1e3;return de(t.B,1,e),e})}function Cr(e,t,n,i){if(t.Da=Rr(i.node,null,n),t.ea=i,t.Da.id||(ne.info("No Period ID given for Period with start time "+i.start+",  Assigning a default"),t.Da.id="__shaka_period_"+i.start),qi.$(i.node,"EventStream").forEach(e.$g.bind(e,i.start,i.duration)),n=qi.$(i.node,"AdaptationSet").map(e.Yg.bind(e,t)).filter(nn.jb),t.Mb){t=[];for(var r=Y(n),a=r.next();!a.done;a=r.next())for(var o=(a=Y(a.value.jh)).next();!o.done;o=a.next())t.push(o.value);if(t.length!=new Set(t).size)throw new Le(2,4,4018)}var s=n.filter(function(e){return!e.oe});if(n.filter(function(e){return e.oe}).forEach(function(e){var t=e.streams[0],n=e.oe;s.forEach(function(e){e.id==n&&e.streams.forEach(function(e){e.trickModeVideo=t})})}),t=Nr(s,"video"),r=Nr(s,"audio"),!t.length&&!r.length)throw new Le(2,4,4004);for(n=e.a.disableAudio,r.length&&!n||(r=[null]),n=e.a.disableVideo,t.length&&!n||(t=[null]),n=[],a=0;a<r.length;a++)for(o=0;o<t.length;o++)Pr(e,r[a],t[o],n);if(t=[],!e.a.disableText)for(e=Nr(s,"text"),r=0;r<e.length;r++)t.push.apply(t,e[r].streams);return{startTime:i.start,textStreams:t,variants:n}}function Nr(e,t){return e.filter(function(e){return e.contentType==t})}function Pr(e,t,n,i){if(t||n)if(t&&n){var r=t.drmInfos,a=n.drmInfos;if(!r.length||!a.length||0<Vt(r,a).length){a=Vt(t.drmInfos,n.drmInfos);for(var o=0;o<t.streams.length;o++)for(var s=0;s<n.streams.length;s++)r=(n.streams[s].bandwidth||0)+(t.streams[o].bandwidth||0),r={id:e.j++,language:t.language,primary:t.Gd||n.Gd,audio:t.streams[o],video:n.streams[s],bandwidth:r,drmInfos:a,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}}else for(a=t||n,o=0;o<a.streams.length;o++)r=a.streams[o].bandwidth||0,r={id:e.j++,language:a.language||"und",primary:a.Gd,audio:t?a.streams[o]:null,video:n?a.streams[o]:null,bandwidth:r,drmInfos:a.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},i.push(r)}function Mr(e,t){e.w<0||e.l.R(Math.max(3,e.w-t,he(e.B)))}function Rr(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,Od:null,audioSamplingRate:null},n=n||t.Ga;for(var i=qi.ac,r=qi.Qf,a=qi.$(e,"BaseURL").map(qi.Oc),o=e.getAttribute("contentType")||t.contentType,s=e.getAttribute("mimeType")||t.mimeType,u=e.getAttribute("codecs")||t.codecs,r=qi.S(e,"frameRate",r)||t.frameRate,c=e.getAttribute("sar")||t.pixelAspectRatio,l=qi.$(e,"InbandEventStream"),d=t.emsgSchemeIdUris.slice(),h=(l=Y(l)).next();!h.done;h=l.next())h=h.value.getAttribute("schemeIdUri"),d.includes(h)||d.push(h);return l=function(e){for(var t=0;t<e.length;++t){var n=e[t],i=n.getAttribute("schemeIdUri");if(i&&(n=n.getAttribute("value")))switch(i){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var r=parseInt(n,10);if(r)return r;ne.u("Channel parsing failure! Ignoring scheme and value",i,n);continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(!(r=parseInt(n,16))){ne.u("Channel parsing failure! Ignoring scheme and value",i,n);continue}for(e=0;r;)1&r&&++e,r>>=1;return e;default:ne.u("Unrecognized audio channel scheme:",i,n)}}return null}(l=qi.$(e,"AudioChannelConfiguration"))||t.Od,h=qi.S(e,"audioSamplingRate",i)||t.audioSamplingRate,o=o||Ur(s,u),{Ga:rn(n,a),xc:qi.Mc(e,"SegmentBase")||t.xc,ob:qi.Mc(e,"SegmentList")||t.ob,zc:qi.Mc(e,"SegmentTemplate")||t.zc,width:qi.S(e,"width",i)||t.width,height:qi.S(e,"height",i)||t.height,contentType:o,mimeType:s,codecs:u,frameRate:r,pixelAspectRatio:c,emsgSchemeIdUris:d,id:e.getAttribute("id"),Od:l,audioSamplingRate:h}}function Lr(e,t,n,i){return(t=$e(t=rn(t,[n]),e.a.retryParameters)).method=i,t=e.b.networkingEngine.request(4,t),We(e.g,t),t.promise.then(function(e){if("HEAD"==i){if(!e.headers||!e.headers.date)return ne.u("UTC timing response is missing","expected date header"),0;e=e.headers.date}else e=yt(e.data);return e=Date.parse(e),isNaN(e)?(ne.u("Unable to parse date from UTC timing response"),0):e-Date.now()})}function Ur(e,t){return Pn(st(e,t))?"text":e.split("/")[0]}function _r(e,t,n,i){this.b=e,this.type=t,this.a=n,this.segments=i||null}function Or(e,t,n,i){this.id=e,this.name=t,this.a=n,this.value=void 0===i?null:i}function Dr(e,t){this.name=e,this.value=t}function Fr(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function jr(e,t){this.b=t,this.a=e}O("shaka.media.ManifestParser.registerParserByExtension",Sr.Wd),Sr.ec=function(e,t){Sr.bc[e]=t},O("shaka.media.ManifestParser.registerParserByMime",Sr.ec),Sr.dh=function(){var e={};if(lt()){for(var t in Sr.bc)e[t]=!0;for(var n in Sr.vc)e[n]=!0}t={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"};for(var i=(n=Y(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!i.done;i=n.next())e[i=i.value]=lt()?!!Sr.bc[i]:dt(i);for(var r in t)e[r]=lt()?!!Sr.vc[r]:dt(t[r]);return e},Sr.create=function(i,r,a,o){return $(function e(){var t,n;return te(e,function(e){switch(e.o){case 1:return Z(e,2),J(e,Sr.cg(i,r,a,o),4);case 4:return t=e.A,e.return(new t);case 2:throw(n=ee(e)).severity=2,n}})})},Sr.cg=function(o,s,u,c){return $(function e(){var t,n,i,r,a;return te(e,function(e){switch(e.o){case 1:if(t=Sr,c){if(n=t.bc[c.toLowerCase()])return e.return(n);ne.u("Could not determine manifest type using MIME type ",c)}if(i=t.getExtension(o)){if(r=t.vc[i])return e.return(r);ne.u("Could not determine manifest type for extension ",i)}else ne.u("Could not find extension for ",o);if(c){e.C(2);break}return J(e,t.ng(o,s,u),3);case 3:if(c=e.A){if(a=Sr.bc[c])return e.return(a);ne.u("Could not determine manifest type using MIME type",c)}case 2:throw new Le(2,4,4e3,o)}})})},Sr.ng=function(r,a,o){return $(function e(){var t,n,i;return te(e,function(e){switch(e.o){case 1:return(t=$e([r],o)).method="HEAD",J(e,a.request(0,t).promise,2);case 2:return n=e.A,i=n.headers["content-type"],e.return(i?i.toLowerCase().split(";").shift():"")}})})},Sr.getExtension=function(e){return 1==(e=new me(e).Ca.split("/").pop().split(".")).length?"":e.pop().toLowerCase()},Sr.isSupported=function(e,t){return!!lt()&&(t in Sr.bc||Sr.getExtension(e)in Sr.vc)},O("shaka.media.PresentationTimeline",Ar),Ar.prototype.getDuration=Ar.prototype.ra=function(){return this.g},Ar.prototype.getMaxSegmentDuration=Ar.prototype.lg=function(){return this.a},Ar.prototype.setDuration=Ar.prototype.Ta=function(e){this.g=e},Ar.prototype.getPresentationStartTime=Ar.prototype.rg=function(){return this.f},Ar.prototype.setClockOffset=Ar.prototype.rf=function(e){this.s=e},Ar.prototype.setStatic=Ar.prototype.Ac=function(e){this.v=e},Ar.prototype.setSegmentAvailabilityDuration=Ar.prototype.ge=function(e){this.j=e},Ar.prototype.setDelay=Ar.prototype.rh=function(e){this.$c=e},Ar.prototype.getDelay=Ar.prototype.$f=function(){return this.$c},Ar.prototype.notifySegments=Ar.prototype.Yb=function(e,t){var n;0!=e.length&&(n=e[e.length-1].endTime+t,this.Nd(e[0].startTime+t),this.a=e.reduce(function(e,t){return Math.max(e,t.endTime-t.startTime)},this.a),this.b=Math.max(this.b,n),null!=this.f&&this.w&&(this.f=(Date.now()+this.s)/1e3-this.b-this.a),ne.I("notifySegments:","maxSegmentDuration="+this.a))},Ar.prototype.notifyMinSegmentStartTime=Ar.prototype.Nd=function(e){this.c=null==this.c?e:Math.min(this.c,e)},Ar.prototype.notifyMaxSegmentDuration=Ar.prototype.Md=function(e){this.a=Math.max(this.a,e),ne.I("notifyNewSegmentDuration:","maxSegmentDuration="+this.a)},Ar.prototype.offset=Ar.prototype.offset=function(e){null!=this.c&&(this.c+=e),null!=this.b&&(this.b+=e)},Ar.prototype.isLive=Ar.prototype.W=function(){return 1/0==this.g&&!this.v},Ar.prototype.isInProgress=Ar.prototype.Bb=function(){return 1/0!=this.g&&!this.v},Ar.prototype.getSegmentAvailabilityStart=Ar.prototype.qc=function(){if(1/0==this.j)return this.l;var e=this.Qb()-this.j;return Math.max(this.l,e)},Ar.prototype.setUserSeekStart=Ar.prototype.uf=function(e){this.l=e},Ar.prototype.getSegmentAvailabilityEnd=Ar.prototype.Qb=function(){return this.W()||this.Bb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.a-this.f),this.g):this.g},Ar.prototype.getSafeSeekRangeStart=Ar.prototype.pc=function(e){var t=Math.max(this.c,this.l);if(1/0==this.j)return t;var n=this.Qb()-this.j;return e=Math.min(n+e,this.ab()),Math.max(t,e)},Ar.prototype.getSeekRangeStart=Ar.prototype.Pb=function(){return this.pc(0)},Ar.prototype.getSeekRangeEnd=Ar.prototype.ab=function(){var e=this.W()||this.Bb()?this.$c:0;return Math.max(0,this.Qb()-e)},Ar.prototype.usingPresentationStartTime=Ar.prototype.zf=function(){return!(null==this.f||null!=this.b&&this.w)},O("shaka.dash.DashParser",kr),(n=kr.prototype).configure=function(e){this.a=e},n.start=function(n,i){var r=this;return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return r.f=[n],r.b=i,J(e,xr(r),2);case 2:if(t=e.A,r.b&&Mr(r,t),!r.b)throw new Le(2,7,7001);return e.return(r.c)}})})},n.stop=function(){return this.a=this.b=null,this.f=[],this.c=null,this.s=[],this.v={},null!=this.l&&(this.l.stop(),this.l=null),this.g.destroy()},n.update=function(){xr(this).catch(function(e){this.b&&this.b.onError(e)}.bind(this))},n.onExpirationUpdated=function(){},n.Yg=function(t,e){if(t.oa=Rr(e,t.Da,null),"image"==t.oa.contentType)return ne.u("Skipping Image AdaptationSet",t.oa),null;var n=!1,i=(d=qi.$(e,"Role")).map(function(e){return e.getAttribute("value")}).filter(nn.jb),r=void 0,a="text"==t.oa.contentType;a&&(r="subtitle");for(var o=0;o<d.length;o++){var s=d[o].getAttribute("schemeIdUri");if(null==s||"urn:mpeg:dash:role:2011"==s)switch(s=d[o].getAttribute("value"),s){case"main":n=!0;break;case"caption":case"subtitle":r=s}}var u=null,c=!1;qi.$(e,"EssentialProperty").forEach(function(e){"http://dashif.org/guidelines/trickmode"==e.getAttribute("schemeIdUri")?u=e.getAttribute("value"):c=!0}),o=qi.$(e,"Accessibility");var l=new Map,d={};for(s=(o=Y(o)).next();!s.done;d={kc:d.kc},s=o.next()){var s=(h=s.value).getAttribute("schemeIdUri"),h=h.getAttribute("value");"urn:scte:dash:cc:cea-608:2015"==s||"urn:scte:dash:cc:cea-708:2015"==s?(d.kc=1,null!=h?h.split(";").forEach(function(n){return function(e){var t;e.includes("=")?(t=(e=e.split("="))[0].startsWith("CC")?e[0]:"CC"+e[0],e=e[1].split(",")[0].split(":").pop()):(t="CC"+n.kc,n.kc+=2),l.set(t,q(e))}}(d)):l.set("CC1","und")):"urn:mpeg:dash:role:2011"==s&&null!=h&&(i.push(h),"captions"==h&&(r="caption"))}if(c)return null;var f=Yi(d=qi.$(e,"ContentProtection"),this.a.dash.customScheme,this.a.dash.ignoreDrmInfo);if(d=q(e.getAttribute("lang")||"und"),o=e.getAttribute("label"),(s=qi.$(e,"Label"))&&s.length&&((s=s[0]).textContent&&(o=s.textContent)),0!=(i=(s=qi.$(e,"Representation")).map(this.ah.bind(this,t,f,r,d,o,n,i,l)).filter(function(e){return!!e})).length)return t.oa.contentType&&"application"!=t.oa.contentType||(t.oa.contentType=Ur(i[0].mimeType,i[0].codecs),i.forEach(function(e){e.type=t.oa.contentType})),i.forEach(function(t){f.drmInfos.forEach(function(e){t.keyId&&e.keyIds.push(t.keyId)})}),a=s.map(function(e){return e.getAttribute("id")}).filter(nn.jb),{id:t.oa.id||"__fake__"+this.j++,contentType:t.oa.contentType,language:d,Gd:n,streams:i,drmInfos:f.drmInfos,oe:u,jh:a};if(this.a.dash.ignoreEmptyAdaptationSet||a)return null;throw new Le(2,4,4003)},n.ah=function(e,t,n,i,r,a,o,s,u){if(e.F=Rr(u,e.oa,null),c=e.F,l=c.xc?1:0,l+=c.ob?1:0,!(0!=(l+=c.zc?1:0)?(1!=l&&(ne.u("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",c),c.xc?(ne.info("Using SegmentBase by default."),c.ob=null):ne.info("Using SegmentList by default."),c.zc=null),1):"text"==c.contentType||"application"==c.contentType||(ne.u("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',c),0)))return ne.u("Skipping Representation",e.F),null;var c,l;e.bandwidth=qi.S(u,"bandwidth",qi.Yc)||0;var d="text"==(d=e.F.contentType)||"application"==d;try{var h,f,p,m=this.kh.bind(this);p=e.F.xc?function(e,t){var n=Number(tr(e,br,"presentationTimeOffset"))||0,i=tr(e,br,"timescale"),r=1;i&&(r=qi.Yc(i)||1),n=n/r||0,i=gr(e,br);var a=e.F.contentType,r=e.F.mimeType.split("/")[1];if("text"!=a&&"mp4"!=r&&"webm"!=r)throw ne.error("SegmentBase specifies an unsupported container type.",e.F),new Le(2,4,4006);if("webm"==r&&!i)throw ne.error("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",e.F),new Le(2,4,4005);a=nr(e,br,"RepresentationIndex");var o,s=tr(e,br,"indexRange"),u=e.F.Ga,s=qi.Zc(s||"");if(a&&((o=a.getAttribute("sourceURL"))&&(u=rn(e.F.Ga,[o])),s=qi.S(a,"range",qi.Zc,s)),!s)throw ne.error("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",e.F),new Le(2,4,4002);return{createSegmentIndex:(r=vr(e,t,i,u,s.start,s.end,r,n)).createSegmentIndex,findSegmentPosition:r.findSegmentPosition,getSegmentReference:r.getSegmentReference,initSegmentReference:i,Fa:n}}(e,m):e.F.ob?yr(e,this.v):e.F.zc?wr(e,m,this.v,!!this.c):(h=e.F.Ga,f=e.ea.duration||0,{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(e){return 0<=e&&e<f?1:null},getSegmentReference:function(e){return 1!=e?null:new ar(1,0,f,function(){return h},0,null)},initSegmentReference:null,Fa:0})}catch(e){if(d&&4002==e.code)return null;throw e}return u=function(e,t,n,i){var r=Yi(e,t,i);if(n.Je)e=1==n.drmInfos.length&&!n.drmInfos[0].keySystem,t=0==r.drmInfos.length,(0==n.drmInfos.length||e&&!t)&&(n.drmInfos=r.drmInfos),n.Je=!1;else if(0<r.drmInfos.length&&(n.drmInfos=n.drmInfos.filter(function(t){return r.drmInfos.some(function(e){return e.keySystem==t.keySystem})}),0==n.drmInfos.length))throw new Le(2,4,4008);return r.Ee||n.Ee}(u=qi.$(u,"ContentProtection"),this.a.dash.customScheme,t,this.a.dash.ignoreDrmInfo),{id:this.j++,originalId:e.F.id,createSegmentIndex:p.createSegmentIndex,findSegmentPosition:p.findSegmentPosition,getSegmentReference:p.getSegmentReference,initSegmentReference:p.initSegmentReference,presentationTimeOffset:p.Fa,mimeType:e.F.mimeType,codecs:e.F.codecs,frameRate:e.F.frameRate,pixelAspectRatio:e.F.pixelAspectRatio,bandwidth:e.bandwidth,width:e.F.width,height:e.F.height,kind:n,encrypted:0<t.drmInfos.length,keyId:u,language:i,label:r,type:e.oa.contentType,primary:a,trickModeVideo:null,emsgSchemeIdUris:e.F.emsgSchemeIdUris,roles:o,channelsCount:e.F.Od,audioSamplingRate:e.F.audioSamplingRate,closedCaptions:s}},n.$g=function(i,r,e){var a=qi.ac,o=e.getAttribute("schemeIdUri")||"",s=e.getAttribute("value")||"",u=qi.S(e,"timescale",a)||1;qi.$(e,"Event").forEach(function(e){var t=qi.S(e,"presentationTime",a)||0,n=qi.S(e,"duration",a)||0,n=(t=t/u+i)+n/u;null!=r&&(t=Math.min(t,i+r),n=Math.min(n,i+r)),e={schemeIdUri:o,value:s,startTime:t,endTime:n,id:e.getAttribute("id")||"",eventElement:e},this.b.onTimelineRegionAdded(e)}.bind(this))},n.kh=function(e,t,n){return e=Ir(e,t,n,this.a.retryParameters),e=this.b.networkingEngine.request(1,e),We(this.g,e),e.promise.then(function(e){return e.data})},Sr.Wd("mpd",kr),Sr.ec("application/dash+xml",kr),Sr.ec("video/vnd.mpeg.dash.mpd",kr),Or.prototype.toString=function(){var e="#"+this.name,t=this.a?this.a.map(function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}):[];return this.value&&t.unshift(this.value),0<t.length&&(e+=":"+t.join(",")),e},Or.prototype.getAttribute=function(t){var e=this.a.filter(function(e){return e.name==t});return e.length?e[0]:null};var Kr={Nb:function(e,t){return e.filter(function(e){return e.name==t})},xb:function(e,t){var n=Kr.Nb(e,t);return n.length?n[0]:null},td:function(e,n,i){return e.filter(function(e){var t=e.getAttribute("TYPE");return e=e.getAttribute("GROUP-ID"),t.value==n&&e.value==i})},nd:function(e,t){return rn([e],[t])[0]},Cd:function(e){return/^#(?!EXT)/m.test(e)}};function Br(e){this.b=e,this.a=0}function Gr(e){Vr(e,/[ \t]+/gm)}function Vr(e,t){t.lastIndex=e.a;var n=null==(n=t.exec(e.b))?null:{position:n.index,length:n[0].length,nh:n};return e.a==e.b.length||null==n||n.position!=e.a?null:(e.a+=n.length,n.nh)}function zr(e){return e.a!=e.b.length&&(e=Vr(e,/[^ \t\n]*/gm))?e[0]:null}function Hr(){this.a=0}function Wr(e,t,n){var i=(t=(t=yt(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new Le(2,4,4015);t=0;for(var r=1;r<i.length;r++)if(!Kr.Cd(i[r])){var a=Xr(e,i[r]);if(--e.a,Yr.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(r+=1)}for(r=[],a=1;a<i.length;)if(Kr.Cd(i[a]))a+=1;else{var o=Xr(e,i[a]);if($r.includes(o.name)){if(1!=t)throw new Le(2,4,4017);return new _r(n,t,r,e=qr(e,n,i=i.splice(a,i.length-a),r))}r.push(o),a+=1,"EXT-X-STREAM-INF"==o.name&&(o.a.push(new Dr("URI",i[a])),a+=1)}return new _r(n,t,r)}function qr(t,n,e,i){var r=[],a=[];return e.forEach(function(e){if(/^(#EXT)/.test(e))e=Xr(t,e),Yr.includes(e.name)?i.push(e):a.push(e);else{if(Kr.Cd(e))return[];e=Kr.nd(n,e.trim()),r.push(new jr(e,a)),a=[]}}),r}function Xr(e,t){var n=e.a++;if(!(s=t.match(/^#(EXT[^:]*)(?::(.*))?$/)))throw new Le(2,4,4016,t);var i,r,a=s[1],o=s[2],s=[];if(o){(r=Vr(o=new Br(o),/^([^,=]+)(?:,|$)/g))&&(i=r[1]);for(var u=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;r=Vr(o,u);)s.push(new Dr(r[1],r[2]||r[3]))}return new Or(n,a,s,i)}var Yr="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),$r="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function Jr(e){try{var t=Jr.parse(e);return Fe({uri:e,Td:e,data:t.data,headers:{"content-type":t.contentType}})}catch(e){return Oe(e)}}function Zr(){var e=this;this.a=this.f=null,this.Z=1,this.H=new Map,this.O=new Set,this.b=new Map,this.c=null,this.B="",this.w=new Hr,this.L=0,this.j=new Ne(function(){var i;i=e,$(function e(){var t,n;return te(e,function(e){switch(e.o){case 1:return(ne.info("Updating manifest..."),i.f)?(Z(e,2),J(e,i.update(),4)):e.return();case 4:t=i.L,i.j.R(t),Q(e,0);break;case 2:if(n=ee(e),!i.f)return e.return();n.severity=1,i.f.onError(n),i.j.R(.1),j(e)}})})}),this.g=va,this.v=null,this.G=0,this.J=1/0,this.l=new He,this.K=[],this.s=new Map,this.Y=!1}function Qr(d,h){return $(function e(){var t,n,i,r,a,o,s,u,c,l;return te(e,function(e){switch(e.o){case 1:return t=Kr,n=ba,i=h.If,J(e,ma(d,$e([i],d.a.retryParameters),0),2);case 2:if(r=e.A,1!=(a=Wr(d.w,r.data,r.uri)).type)throw new Le(2,4,4017);return s=(o=t.xb(a.a,"EXT-X-MEDIA-SEQUENCE"))?Number(o.value):0,u=h.stream,J(e,oa(d,h.hd,a,s,u.mimeType,u.codecs),3);case 3:c=e.A,h.yc.a=c,l=c[c.length-1],t.xb(a.a,"EXT-X-ENDLIST")&&(pa(d,n.ub),d.c.Ta(l.endTime)),j(e)}})})}function ea(e){e.forEach(function(e){var t;e&&(t=(t=e.stream.codecs.split(",")).filter(function(e){return"mp4a.40.34"!=e}),e.stream.codecs=t.join(","))})}function ta(p,m,g){return $(function e(){var n,i,r,a,o,s,u,c,l,d,h,f;return te(e,function(e){switch(e.o){case 1:return(n=ca(m,"URI"),p.b.has(n))?e.return(p.b.get(n)):(i=ca(m,"TYPE").toLowerCase(),r=on,"subtitles"==i&&(i=r.Na),a=q(Fr(m,"LANGUAGE","und")),o=Fr(m,"NAME"),s=m.getAttribute("DEFAULT"),u=m.getAttribute("AUTOSELECT"),c=Fr(m,"CHANNELS"),t="audio"==i&&c?(t=c.split("/")[0],parseInt(t,10)):null,l=t,d=!!s||!!u,h=Fr(m,"CHARACTERISTICS"),J(e,na(p,n,g,i,a,d,o,l,null,h),2));var t;case 2:return(f=e.A,p.b.has(n))?e.return(p.b.get(n)):null==f?e.return(null):(p.H.set(m.id,f),p.b.set(n,f),e.return(f))}})})}function na(j,K,B,G,V,z,H,W,q,X){return $(function e(){var u,c,p,m,g,v,b,y,E,w,T,S,A,I,k,x,C,N,P,M,R,L,U,_,O,D,F;return te(e,function(e){switch(e.o){case 1:return c=(u=Kr).nd(j.B,K),J(e,ma(j,$e([c],j.a.retryParameters),0),2);case 2:if(p=e.A,c=p.uri,1!=(m=Wr(j.w,p.data,c)).type)throw new Le(2,4,4017);g=[],m.segments.forEach(function(e){e=u.Nb(e.b,"EXT-X-KEY"),g.push.apply(g,e)}),v=!1,b=[],y=null;for(var t=Y(g),n=t.next();!n.done;n=t.next())if(E=n.value,"NONE"!=(w=ca(E,"METHOD"))){if(v=!0,"AES-128"==w)return ne.u("Unsupported HLS Encryption",w),j.Y=!0,e.return(null);T=ca(E,"KEYFORMAT"),(A=(S=ga[T])?S(E):null)?(A.keyIds.length&&(y=A.keyIds[0]),b.push(A)):ne.u("Unsupported HLS KEYFORMAT",T)}if(v&&!b.length)throw new Le(2,4,4026);return i=j,r=m,a=ba,o=Kr.xb(r.a,"EXT-X-PLAYLIST-TYPE"),s=Kr.xb(r.a,"EXT-X-ENDLIST"),s=o&&"VOD"==o.value||s,o=o&&"EVENT"==o.value&&!s,o=!s&&!o,s?pa(i,a.ub):(pa(i,o?a.ue:a.Cf),a=la(r.a,"EXT-X-TARGETDURATION"),a=Number(a.value),i.G=Math.max(a,i.G),i.J=Math.min(a,i.J)),I=function(e,t){if(1==t.length)return t[0];var n=ua(e,t);if(null!=n)return n;throw new Le(2,4,4025,t)}(G,B),J(e,(l=j,d=G,h=I,f=m,$(function e(){var t,n,i,r,a,o,s,u,c;return te(e,function(e){switch(e.o){case 1:return t=on,n=f.segments[0].a,i=new me(n),r=i.Ca.split(".").pop(),a=fa[d],(o=a[r])?e.return(o):d==t.Na?h&&"vtt"!=h?e.return("application/mp4"):e.return("text/vtt"):((s=$e([n],l.a.retryParameters)).method="HEAD",J(e,ma(l,s,1),2));case 2:if(u=e.A,!(c=u.headers["content-type"]))throw new Le(2,4,4021,r);return e.return(c.split(";")[0])}})})),3);case 3:return k=e.A,ha.includes(k)&&(I=""),C=(x=u.xb(m.a,"EXT-X-MEDIA-SEQUENCE"))?Number(x.value):0,Z(e,4),J(e,oa(j,K,m,C,k,I),6);case 6:N=e.A,Q(e,5);break;case 4:if(4035==(P=ee(e)).code)return ne.ba("Skipping unsupported HLS stream",k,K),e.return(null);throw P;case 5:return M=N[0].startTime,R=N[N.length-1].endTime,L=R-M,U=new sr(N),_=ia(m),O="text"==G?"subtitle":void 0,D=[],X&&D.push(X),F={id:j.Z++,originalId:H,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:U.find.bind(U),getSegmentReference:U.get.bind(U),initSegmentReference:_,presentationTimeOffset:0,mimeType:k,codecs:I,kind:O,encrypted:v,keyId:y,language:V,label:H,type:G,primary:z,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:D,channelsCount:W,audioSamplingRate:null,closedCaptions:q},e.return({stream:F,yc:U,drmInfos:b,hd:K,If:c,Kd:M,Oh:R,duration:L})}var l,d,h,f,i,r,a,o,s})})}function ia(e){var t=Kr.Nb(e.a,"EXT-X-MAP");if(!t.length)return null;if(1<t.length)throw new Le(2,4,4020);var n=ca(t=t[0],"URI"),i=Kr.nd(e.b,n);return e=0,n=null,(t=Fr(t,"BYTERANGE"))&&(e=t.split("@"),t=Number(e[0]),n=(e=Number(e[1]))+t-1),new rr(function(){return[i]},e,n)}function ra(e,t,n,i){var r=t.b,a=t.a;t=la(r,"EXTINF").value.split(","),t=i+Number(t[0]);var o=0,s=null;return(r=Kr.xb(r,"EXT-X-BYTERANGE"))&&(o=r.value.split("@"),r=Number(o[0]),s=(o=o[1]?Number(o[1]):e.a+1)+r-1),new ar(n,i,t,function(){return[a]},o,s)}function aa(t){t.c&&(t.K.forEach(function(e){t.c.Yb(e,0)}),t.K=[])}function oa(h,y,E,w,T,S){return $(function e(){var n,i,r,a,o,s,u,c,l,d;return te(e,function(e){switch(e.o){case 1:return n=E.segments,i=[],r=n[0].a,a=ra(null,n[0],w,0),o=ia(E),J(e,(f=h,p=y,m=o,g=a,v=T,b=S,$(function e(){var r,a,o,s,u,c,l,d,h;return te(e,function(e){switch(e.o){case 1:if(f.v){if(r=f.b.get(p),a=r.yc,o=a.get(g.position))return ne.I("Found segment start time in previous manifest"),e.return(o.startTime);ne.debug("Unable to find segment start time in previous manifest!")}if(ne.I("Fetching segment to find start time"),v=v.toLowerCase(),ha.includes(v))throw ne.ba("Raw formats are not yet supported.  Skipping "+v),new Le(1,4,4035);if("video/webm"==v)throw ne.ba("WebM in HLS is not yet supported.  Skipping."),new Le(1,4,4035);if("video/mp4"==v||"audio/mp4"==v)return s=[sa(f,g)],m&&s.push(sa(f,m)),J(e,Promise.all(s),3);e.C(2);break;case 3:return u=e.A,c=u[0],l=u[1]||u[0],e.return(function(e,t,n,i){var r=0;if((new Ki).P("moov",Bi).P("trak",Bi).P("mdia",Bi).za("mdhd",function(e){e.reader.V(0==e.version?8:16),r=e.reader.M(),e.parser.stop()}).parse(i,!0),!r)throw ne.error("Unable to find timescale in init segment!"),new Le(2,4,4030,e,t);var a=0,o=!1;if((new Ki).P("moof",Bi).P("traf",Bi).za("tfdt",function(e){a=(0==e.version?e.reader.M():e.reader.dc())/r,o=!0,e.parser.stop()}).parse(n,!0),!o)throw new Le(2,4,4030,e,t);return a}(p,c.uri,c.data,l.data));case 2:if("video/mp2t"==v)return J(e,sa(f,g),5);e.C(4);break;case 5:return d=e.A,e.return(function(e,t,n){function i(){a.seek(o+188),71!=(s=a.Ea())&&(a.seek(o+192),s=a.Ea()),71!=s&&(a.seek(o+204),s=a.Ea()),71!=s&&r(),a.mf(1)}function r(){throw new Le(2,4,4030,e,t)}for(var a=new Di(new DataView(n),0),o=0,s=0;;)if(o=a.va(),71!=(s=a.Ea())&&r(),8191==(8191&(n=a.wc())))i();else if(16384&n){if(0!=(n=(48&a.Ea())>>4)&&2!=n||r(),3==n&&(n=a.Ea(),a.V(n)),1==a.M()>>8){a.V(3),0!=(n=a.Ea()>>6)&&1!=n||r(),0==a.Ea()&&r(),n=a.Ea();var u=a.wc(),c=a.wc();return(1073741824*((14&n)>>1)+((65534&u)<<14|(65534&c)>>1))/9e4}i()}else i()}(p,d.uri,d.data));case 4:if("application/mp4"==v||v.startsWith("text/"))return J(e,sa(f,g),7);e.C(6);break;case 7:return h=e.A,e.return((t=v,n=b,i=h.data,Pn(t=st(t,n))?(Mn(n=new Cn(null),t),n.Qc(i)):0));case 6:throw new Le(2,4,4030,p)}var t,n,i})})),2);case 2:s=e.A,ne.debug("First segment",r.split("/").pop(),"starts at",s);for(var t=0;t<n.length;++t)u=n[t],c=i[i.length-1],l=0==t?s:c.endTime,d=ra(c,u,w+t,l),i.push(d);return h.K.push(i),aa(h),e.return(i)}var f,p,m,g,v,b})})}function sa(s,u){return $(function e(){var t,n,i,r,a,o;return te(e,function(e){switch(e.o){case 1:return(t=1,n=Ir(u.c(),u.b,u.b+2048-1,s.a.retryParameters),i=Ir(u.c(),u.b,u.a,s.a.retryParameters),s.a.hls.useFullSegmentsForStartTime)?e.return(ma(s,i,t)):(Z(e,2),J(e,ma(s,n,t),4));case 4:return r=e.A,e.return(r);case 2:if(7001==(a=ee(e)).code)throw a;return ne.ba("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",n.uris[0]),J(e,ma(s,i,t),5);case 5:return o=e.A,e.return(o)}})})}function ua(e,t){for(var n=da[e],i=0;i<n.length;i++)for(var r=0;r<t.length;r++)if(n[i].test(t[r].trim()))return t[r].trim();return"text"==e?"":null}function ca(e,t){var n=e.getAttribute(t);if(!n)throw new Le(2,4,4023,t);return n.value}function la(e,t){var n=Kr.xb(e,t);if(!n)throw new Le(2,4,4024,t);return n}O("shaka.net.DataUriPlugin",Jr),Jr.parse=function(e){if((n=e.split(":")).length<2||"data"!=n[0])throw ne.error("Bad data URI, failed to parse scheme"),new Le(2,1,1004,e);if((n=n.slice(1).join(":").split(",")).length<2)throw ne.error("Bad data URI, failed to extract encoding and MIME type"),new Le(2,1,1004,e);var t=n[0],n=h.decodeURIComponent(n.slice(1).join(",")),i=null;if(1<(t=t.split(";")).length&&(i=t[1]),"base64"==i)e=kt.Za(n).buffer;else{if(i)throw ne.error("Bad data URI, unknown encoding"),new Le(2,1,1005,e);e=Tt(n)}return{data:e,contentType:t[0]}},Ye("data",Jr),O("shaka.hls.HlsParser",Zr),(n=Zr.prototype).configure=function(e){this.a=e},n.start=function(i,r){var a=this;return $(function e(){var t,n;return te(e,function(e){switch(e.o){case 1:return a.f=r,J(e,ma(a,$e([i],a.a.retryParameters),0),2);case 2:return t=e.A,a.B=t.uri,J(e,(m=a,g=t.data,$(function e(){var i,r,a,o,s,u,c,l,d,h;return te(e,function(e){switch(e.o){case 1:if(0!=(i=Wr(m.w,g,m.B)).type)throw new Le(2,4,4022);return J(e,(f=m,p=i,$(function e(){var t,n,i,r,a,o,s,u,c,l,d,h;return te(e,function(e){switch(e.o){case 1:return t=Kr,n=nn,i=p.a,r=t.Nb(p.a,"EXT-X-MEDIA"),a=r.filter(function(e){return"SUBTITLES"==ca(e,"TYPE")}.bind(f)),o=a.map(function(r){var a=this;return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return a.a.disableText?e.return(null):(Z(e,2),J(e,(n=a,i=r,$(function e(){var t;return te(e,function(e){switch(e.o){case 1:return ca(i,"TYPE"),J(e,ta(n,i,[]),2);case 2:return t=e.A,e.return(t.stream)}})})),4));case 4:return e.return(e.A);case 2:if(t=ee(e),a.a.hls.ignoreTextStreamFailures)return e.return(null);throw t}var n,i})})}.bind(f)),s=r.filter(function(e){return"CLOSED-CAPTIONS"==ca(e,"TYPE")}),function(e,t){for(var n=Y(t),i=n.next();!i.done;i=n.next()){ca(i=i.value,"TYPE");var r=Fr(i,"LANGUAGE")||"und";r=q(r);var a=ca(i,"GROUP-ID");i=ca(i,"INSTREAM-ID"),e.s.get(a)||e.s.set(a,new Map),e.s.get(a).set(i,r)}}(f,s),J(e,Promise.all(o),2);case 2:return u=e.A,c=t.Nb(i,"EXT-X-STREAM-INF"),l=c.map(function(e){return R=this,L=e,U=p,$(function e(){var t,n,i,r,a,l,d,h,f,p,m,g,v,b,y,E,w,T,S,A,I,k,x,C,N,P,M;return te(e,function(e){switch(e.o){case 1:return t=on,n=Kr,i=Fr(L,"CODECS","avc1.42E01E,mp4a.40.2"),r=function(e){for(var t=new Set,n=[],i=(e=Y(e)).next();!i.done;i=e.next()){var r=ut(i=i.value)[0];t.has(r)?ne.debug("Ignoring duplicate codec"):(n.push(i),t.add(r))}return n}(i.split(/\s*,\s*/)),a=L.getAttribute("RESOLUTION"),d=l=null,h=Fr(L,"FRAME-RATE"),f=Number(ca(L,"BANDWIDTH")),a&&(p=a.value.split("x"),l=p[0],d=p[1]),m=(m=(m=n.Nb(U.a,"EXT-X-MEDIA")).filter(function(e){return"CLOSED-CAPTIONS"!=ca(e,"TYPE")})).filter(function(e){var t=Fr(e,"URI")||"";return"SUBTITLES"==(Fr(e,"TYPE")||"")||""!=t}),g=Fr(L,"AUDIO"),v=Fr(L,"VIDEO"),g?m=n.td(m,"AUDIO",g):v&&(m=n.td(m,"VIDEO",v)),(b=ua(t.Na,r))&&((y=Fr(L,"SUBTITLES"))&&(E=n.td(m,"SUBTITLES",y)).length&&(w=R.H.get(E[0].id))&&(w.stream.codecs=b),Ve(r,b)),T=m.map(function(e){return ta(this,e,r)}.bind(R)),S=[],A=[],J(e,Promise.all(T),2);case 2:if(k=(k=e.A).filter(function(e){return null!=e}),g?S=k:v&&(A=k),ne.debug("Guessing stream type for",L.toString()),C=!1,S.length||A.length?S.length?(P=ca(L,"URI"),M=S[0].hd,P==M?(ne.debug("Guessing audio-only."),x=t.ic,C=!0):(ne.debug("Guessing video."),x=t.tb)):(ne.debug("Guessing audio."),x=t.ic):1==r.length?(N=ua(t.tb,r),x=a||h||N?(ne.debug("Guessing video-only."),t.tb):(ne.debug("Guessing audio-only."),t.ic)):(ne.debug("Guessing multiplexed audio+video."),x=t.tb,r=[r.join(",")]),C){e.C(3);break}return J(e,(o=R,s=L,u=r,c=x,$(function e(){var t,n,i,r,a;return te(e,function(e){switch(e.o){case 1:return t=on,n=ca(s,"URI"),o.b.has(n)?e.return(o.b.get(n)):(i=Fr(s,"CLOSED-CAPTIONS"),r=null,c==t.tb&&i&&"NONE"!=i&&(r=o.s.get(i)),J(e,na(o,n,u,c,"und",!1,null,null,r,null),2));case 2:return null==(a=e.A)?e.return(null):o.b.has(n)?e.return(o.b.get(n)):(o.b.set(n,a),e.return(a))}})})),4);case 4:I=e.A;case 3:if(I)I.stream.type==t.ic?S=[I]:A=[I];else if(null===I)return ne.debug("streamInfo is null"),e.return([]);return A&&ea(A),S&&ea(S),e.return(function(e,t,n,i,r,a,o){n.forEach(function(e){(e=e.stream)&&(e.width=Number(r)||void 0,e.height=Number(a)||void 0,e.frameRate=Number(o)||void 0)}.bind(e));var s=!!e.a&&e.a.disableAudio;t.length&&!s||(t=[null]),s=!!e.a&&e.a.disableVideo,n.length&&!s||(n=[null]),s=[];for(var u,c,l,d,h=(t=Y(t)).next();!h.done;h=t.next()){h=h.value;for(var f=Y(n),p=f.next();!p.done;p=f.next()){var m=p.value;p=h?h.stream:null;var g=m?m.stream:null,v=h?h.drmInfos:null,b=m?m.drmInfos:null;m=(m?m.hd:"")+" - "+(h?h.hd:"");var y=void 0;if(p&&g){if(v.length&&b.length&&!(0<Vt(v,b).length)){ne.u("Incompatible DRM info in HLS variant.  Skipping.");continue}y=Vt(v,b)}else p?y=v:g&&(y=b);e.O.has(m)?ne.debug("Skipping variant which only differs in text streams."):(u=p,c=g,l=i,d=y,p={id:e.Z++,language:u?u.language:"und",primary:!!u&&u.primary||!!c&&c.primary,audio:u,video:c,bandwidth:l,drmInfos:d,allowedByApplication:!0,allowedByKeySystem:!0},s.push(p),e.O.add(m))}}return s}(R,S,A,f,l,d,h))}var o,s,u,c})});var R,L,U}.bind(f)),J(e,Promise.all(l),3);case 3:return d=e.A,h=(h=d.reduce(n.md,[])).filter(function(e){return null!=e}),e.return({startTime:0,variants:h,textStreams:u.filter(function(e){return null!=e})})}})})),2);case 2:if(r=e.A,!m.f)throw new Le(2,7,7001);if(m.Y&&0==r.variants.length)throw ne.info("No stream is created, because we don't support AES-128","encryption yet"),new Le(2,4,4034);m.f.filterAllPeriods([r]),a=1/0,s=1/(o=0);for(var t=Y(m.b.values()),n=t.next();!n.done;n=t.next())u=n.value,a=Math.min(a,u.Kd),o=Math.max(o,u.Kd),"text"!=u.stream.type&&(s=Math.min(s,u.duration));if(m.g!=ba.ub?(m.c=new Ar(0,3*m.G),m.c.Ac(!1)):(m.c=new Ar(null,0),m.c.Ac(!0)),aa(m),m.g!=ba.ub){for(m.L=m.J,m.g==ba.ue&&(c=m.c.$c,isNaN(m.a.availabilityWindowOverride)||(c=m.a.availabilityWindowOverride),m.c.ge(c)),l=0;95443.7176888889<=o;)l+=95443.7176888889,o-=95443.7176888889;if(l)for(ne.debug("Offsetting live streams by",l,"to compensate for rollover"),n=(t=Y(m.b.values())).next();!n.done;n=t.next())(d=n.value).Kd<95443.7176888889?(ne.I("Offset applied to",d.stream.type),d.stream.presentationTimeOffset=-l,d.yc.offset(l)):ne.I("Offset NOT applied to",d.stream.type)}else for(m.c.Ta(s),m.c.offset(-a),n=(t=Y(m.b.values())).next();!n.done;n=t.next())(h=n.value).stream.presentationTimeOffset=a,h.yc.offset(-a),ur(h.yc,s);m.v={presentationTimeline:m.c,periods:[r],offlineSessionIds:[],minBufferTime:0},j(e)}var f,p})})),3);case 3:return 0<(n=a.L)&&a.j.R(n),e.return(a.v)}var m,g})})},n.stop=function(){this.j&&(this.j.stop(),this.j=null);var e=[];return this.l&&(e.push(this.l.destroy()),this.l=null),this.a=this.f=null,this.H.clear(),this.O.clear(),this.b.clear(),this.v=null,Promise.all(e)},n.update=function(){if(this.g!=ba.ub){for(var e=[],t=Y(this.b.values()),n=t.next();!n.done;n=t.next())e.push(Qr(this,n.value));return Promise.all(e)}},n.onExpirationUpdated=function(){};var da={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},ha=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],fa={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function pa(e,t){e.g=t,e.c&&e.c.Ac(e.g==ba.ub),e.g!=ba.ub||e.j.stop()}function ma(e,t,n){if(!e.l)throw new Le(2,7,7001);return t=e.f.networkingEngine.request(n,t),We(e.l,t),t.promise}var ga={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=ca(e,"METHOD");Jn("HLS SAMPLE-AES-CENC","SAMPLE-AES-CENC will no longer be supported, see Issue #1227");var n=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];return n.includes(t)?(t=ca(e,"URI"),t=Jr.parse(t),t=an("com.widevine.alpha",[{initDataType:"cenc",initData:t=new Uint8Array(t.data)}]),(e=Fr(e,"KEYID"))&&(t.keyIds=[e.substr(2).toLowerCase()]),t):(ne.error("Widevine in HLS is only supported with [",n.join(", "),"], not",t),null)}},va="VOD",ba={ub:va,Cf:"EVENT",ue:"LIVE"};function ya(){this.a=new Map}function Ea(e,t,n){wa(e,t).text=n}function wa(e,t){return e.a.has(t)||e.a.set(t,new Ta),e.a.get(t)}function Ta(){this.text=this.variant=null}function Sa(e,t){this.a=e,this.b=new Set([e]);for(var n=Y(t=t||[]),i=n.next();!i.done;i=n.next())this.add(i.value)}function Aa(e,t){var n,i;return!(i=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(i=e.audio&&t.audio)&&(i=e.audio,n=t.audio,i=!(i.channelsCount==n.channelsCount&&Ia(i,n)&&ka(i.roles,n.roles))),!i&&(i=e.video&&t.video)&&(i=!(Ia(i=e.video,n=t.video)&&ka(i.roles,n.roles))),!i}function Ia(e,t){if(e.mimeType==t.mimeType){var n=e.codecs.split(",").map(function(e){return ut(e)[0]}),i=t.codecs.split(",").map(function(e){return ut(e)[0]});if(n.length==i.length){n.sort(),i.sort();for(var r=0;r<n.length;r++)if(n[r]!=i[r])return;return 1}}}function ka(e,t){var n=new Set(e),i=new Set(t);if(n.delete("main"),i.delete("main"),n.size==i.size){for(var r=(n=Y(n)).next();!r.done;r=n.next())if(!i.has(r.value))return;return 1}}function xa(e){this.a=e,this.b=new Ca(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function Ca(e,t,n,i,r){this.f=e,this.c=t,this.a=n,this.b=void 0===i?"":i,this.g=void 0===r?"":r}function Na(){this.a=Ra,this.b=(new Map).set(Ra,2).set(Ma,1)}function Pa(e,t,n){e.b.set(Ra,n).set(Ma,t)}Sr.Wd("m3u8",Zr),Sr.ec("application/x-mpegurl",Zr),Sr.ec("application/vnd.apple.mpegurl",Zr),Sa.prototype.add=function(e){return Aa(this.a,e)?(this.b.add(e),!0):(ne.u("Rejecting variant - not compatible with root."),!1)},Sa.prototype.values=function(){return this.b.values()},xa.prototype.create=function(e){var t=this,n=e.filter(function(e){return Aa(t.a,e)});return n.length?new Sa(n[0],n):this.b.create(e)},Ca.prototype.create=function(e){var t,n,i,r=[];t=e,n=this.f,r=(i=re(q(n),t.map(ie)))?t.filter(function(e){return i==ie(e)}):[];var a,o,s,u,c,l=e.filter(function(e){return e.primary}),r=r.length?r:l.length?l:e;for(this.c&&(a=r,o=this.c,s=this.g,(e=a.filter(function(e){if(s){var t=e[s];return t&&t.roles.includes(o)}return t=e.audio,e=e.video,t&&0<=t.roles.indexOf(o)||e&&0<=e.roles.indexOf(o)})).length?r=e:ne.u("No exact match for variant role could be found.")),this.a&&((e=qn.He(r,this.a)).length?r=e:ne.u("No exact match for the channel count could be found.")),this.b&&(u=r,c=this.b,(e=u.filter(function(e){return!!e.audio&&e.audio.label.toLowerCase()==c.toLowerCase()})).length?r=e:ne.u("No exact match for variant label could be found.")),e=new Sa(r[0]),l=(r=Y(r)).next();!l.done;l=r.next())l=l.value,Aa(e.a,l)&&e.add(l);return e};var Ma=0,Ra=1;function La(e,t){this.g=e,this.j=_a(e),this.a=e.a.currentTime,this.f=Date.now()/1e3,this.b=!1,this.l=t,this.c=function(){}}function Ua(e){this.a=e}function _a(e){if(e.a.paused||0==e.a.playbackRate||0==e.a.buffered.length)var t=!1;else e:{t=e.a.buffered,e=e.a.currentTime;for(var n=0;n<t.length;n++){var i=t.start(n),r=t.end(n);if(!(e<i-.1||r-.5<e)){t=!0;break e}}t=!1}return t}function Oa(e,t,n,i,r){var a=this;this.a=e,this.B=t,this.w=n,this.s=r,this.f=new et,this.l=!1,this.v=e.readyState,this.c=!1,this.b=i,this.j=!1,this.f.m(e,"waiting",function(){return Da(a)}),this.g=new Ne(function(){Da(a)}).Ua(.25)}function Da(e){if(0!=e.a.readyState){if(e.a.seeking){if(!e.l)return}else e.l=!1;var t,n,i,r,a,o,s,u;if(!e.a.paused)if(e.a.readyState!=e.v&&(e.c=!1,e.v=e.a.readyState),(t=!e.b)||(i=_a(n=(t=e.b).g),r=n.a.currentTime,a=Date.now()/1e3,t.a==r&&t.j==i||(t.f=a,t.a=r,t.j=i,t.b=!1),(i=(r=a-t.f)>=t.l&&i&&!t.b)&&(t.c(t.a,r),t.b=!0,t.a=n.a.currentTime),t=!i),t){a=e.w.smallGapLimit,t=e.a.currentTime;e:{if((n=e.a.buffered)&&n.length&&!(1==n.length&&n.end(0)-n.start(0)<1e-6))for(i=mt("Edge/")||mt("Trident/")||ht()||mt("CrKey")?.5:.1,r=0;r<n.length;r++)if(n.start(r)>t&&(0==r||n.end(r-1)-t<=i)){i=r;break e}i=null}null==i||0==i&&!e.j||(r=n.start(i),(o=e.B.ab())<=r||(a=(o=r-t)<=a,s=!1,o<.001||(a||e.c||(e.c=!0,(u=new F("largegap",{currentTime:t,gapSize:o})).cancelable=!0,e.s(u),e.w.jumpLargeGaps&&!u.defaultPrevented?s=!0:ne.info("Ignoring large gap at",t,"size",o)),(a||s)&&(0==i?ne.info("Jumping forward",o,"seconds because of gap before start time of",r):ne.info("Jumping forward",o,"seconds because of gap starting at",n.end(i-1),"and ending at",r),e.a.currentTime=r))))}}}function Fa(e){var t=this;this.c=e,this.a=new Set,this.b=new Ne(function(){ja(t,!1)}).Ua(.25)}function ja(e,t){for(var n=Y(e.a),i=n.next();!i.done;i=n.next())i.value.g(e.c.currentTime,t)}function Ka(e){for(var t=[],n=(e=Y(e)).next();!n.done;n=e.next())for(var i=(n=Y(n.value.variants)).next();!i.done;i=n.next())t.push(i.value);return t}function Ba(e,t){for(var n=null,i=Y(e),r=i.next();!r.done;r=i.next())t>=(r=r.value).startTime&&(n=r);return n}function Ga(e){this.c=e,this.a=null,this.b=function(){}}function Va(e){var t=this;this.a=e,this.f=!1,this.c=this.a.Pc(),this.b=new Ne(function(){t.a.Te(.25*t.c)})}function za(e){e.b.stop();var t=e.f?0:e.c;if(0<=t)try{return void(e.a.Pc()!=t&&e.a.ee(t))}catch(e){}e.b.Ua(.25),0!=e.a.Pc()&&e.a.ee(0)}function Ha(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=Wa.get(t),n.Ha(e,t,i))}La.prototype.release=function(){this.g=null,this.c=function(){}},Oa.prototype.release=function(){this.f&&(this.f.release(),this.f=null),null!=this.g&&(this.g.stop(),this.g=null),this.b&&(this.b.release(),this.b=null),this.a=this.B=this.s=null},Oa.prototype.Rd=function(){this.j=!0,Da(this)},Fa.prototype.release=function(){this.b.stop();for(var e=Y(this.a),t=e.next();!t.done;t=e.next())t.value.release();this.a.clear()},Ga.prototype.release=function(){this.a=this.c=null,this.b=function(){}},Ga.prototype.g=function(e){var t=this.a,n=this.c.periods;t!=(e=Ba(n,e)||n[0])&&this.b(e),this.a=e},Va.prototype.release=function(){this.b&&(this.b.stop(),this.b=null),this.a=null},Va.prototype.set=function(e){this.c=e,za(this)};var Wa=new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]]);function qa(e,t,n){var i=this;this.a=e,this.g=t,this.f=n,this.j=!1,this.b=new et,this.c=new Za(e),Ha(this.a,HTMLMediaElement.HAVE_METADATA,this.b,function(){$a(i,i.f)})}function Xa(e){return e.j?e.a.currentTime:e.f}function Ya(e,t){0<e.a.readyState?Qa(e.c,t):Ha(e.a,HTMLMediaElement.HAVE_METADATA,e.b,function(){$a(e,e.f)})}function $a(e,t){Math.abs(e.a.currentTime-t)<.001?Ja(e):(e.b.Ha(e.a,"seeking",function(){Ja(e)}),Qa(e.c,0==e.a.currentTime?t:e.a.currentTime))}function Ja(e){e.j=!0,e.b.m(e.a,"seeking",function(){return e.g()})}function Za(e){var t=this;this.b=e,this.j=10,this.g=this.c=this.f=0,this.a=new Ne(function(){t.f<=0?(ne.u(["Failed to move playhead from",t.c,"to",t.g].join(" ")),t.a.stop()):t.b.currentTime!=t.c?t.a.stop():(t.b.currentTime=t.g,t.f--)})}function Qa(e,t){e.c=e.b.currentTime,e.g=t,e.f=e.j,e.b.currentTime=t,e.a.Ua(.1)}function eo(e){var t=this;this.a=e,this.f=!1,this.c=null,this.b=new et,Ha(this.a,HTMLMediaElement.HAVE_CURRENT_DATA,this.b,function(){null==t.c?t.f=!0:(t.b.Ha(t.a,"seeking",function(){t.f=!0}),t.a.currentTime=Math.max(0,t.a.currentTime+t.c))})}function to(e,t,n,i,r,a){var o,s,u=this;this.b=e,this.a=t.presentationTimeline,this.G=t.minBufferTime||0,this.j=n,this.B=r,this.s=null,this.f=new Oa(e,t.presentationTimeline,n,function(n,e){if(!e.stallEnabled)return null;var i=e.stallSkip,t=new La(new Ua(n),e.stallThreshold);return function(e,t){e.c=t}(t,function(e,t){ne.debug("Stall detected at "+e+" for "+t+" seconds."),i?(ne.debug("Seeking forward "+i+" seconds to break stall."),n.currentTime+=i):(ne.debug("Pausing and unpausing to break stall."),n.pause(),n.play())}),t}(e,n),a),this.c=new qa(e,function(){e:{var e=u.f;e.l=!0,e.j=!1,e.c=!1,e=Xa(u.c);var t=io(u,e);if(.001<Math.abs(t-e)){var n=(new Date).getTime()/1e3;if(!u.s||u.s<n-1){u.s=n,Ya(u.c,t),e=void 0;break e}}ne.I("Seek to "+e),u.B(),e=void 0}return e},(o=this,null==(s=i)?s=1/0>o.a.ra()?o.a.Pb():o.a.ab():s<0&&(s=o.a.ab()+s),no(o,ro(o,s)))),this.l=new Ne(function(){var e,t,n;0==u.b.readyState||u.b.paused||(e=u.b.currentTime,t=u.a.Pb(),(n=u.a.ab())-t<3&&(t=n-3),e<t&&(t=io(u,e),ne.info("Jumping forward "+(t-e)+" seconds to catch up with the seek range."),u.b.currentTime=t))}).Ua(.25)}function no(e,t){var n=e.a.ra();return n<=t?n-e.j.durationBackoff:t}function io(e,t){var n=Qt.bind(null,e.b.buffered),i=Math.max(e.G,e.j.rebufferingGoal),r=e.j.safeSeekOffset,a=e.a.Pb(),o=e.a.ab(),s=e.a.ra();o-a<3&&(a=o-3);var u=e.a.pc(i),c=e.a.pc(r),i=e.a.pc(i+r);return s<=t?(ne.I("Playhead past duration."),no(e,t)):o<t?(ne.I("Playhead past end."),o):t<a?n(c)?(ne.I("Playhead before start & start is buffered"),c):(ne.I("Playhead before start & start is unbuffered"),i):u<=t||n(t)?(ne.I("Playhead in safe region or in buffered region."),t):(ne.I("Playhead outside safe region & in unbuffered region."),i)}function ro(e,t){var n=e.a.Pb();return t<n||(n=e.a.ab())<t?n:t}function ao(){this.b=function(){},this.a=new Set}function oo(e){var n=this;this.j=e,this.f=new Map,this.a=function(){},this.b=function(){},this.c=function(){},this.l=[{Kb:null,Jb:uo,Ab:function(e,t){return n.a(e,t)}},{Kb:so,Jb:uo,Ab:function(e,t){return n.a(e,t)}},{Kb:co,Jb:uo,Ab:function(e,t){return n.a(e,t)}},{Kb:uo,Jb:so,Ab:function(e,t){return n.b(e,t)}},{Kb:uo,Jb:co,Ab:function(e,t){return n.b(e,t)}},{Kb:so,Jb:co,Ab:function(e,t){return n.c(e,t)}},{Kb:co,Jb:so,Ab:function(e,t){return n.c(e,t)}}]}qa.prototype.release=function(){this.b&&(this.b.release(),this.b=null),null!=this.c&&(this.c.release(),this.c=null),this.g=function(){},this.a=null},Za.prototype.release=function(){this.a&&(this.a.stop(),this.a=null),this.b=null},eo.prototype.release=function(){this.b&&(this.b.release(),this.b=null),this.a=null},eo.prototype.v=function(e){this.c=this.f?this.c:e},eo.prototype.g=function(){return(this.f?this.a.currentTime:this.c)||0},eo.prototype.w=function(){},to.prototype.release=function(){this.c&&(this.c.release(),this.c=null),this.f&&(this.f.release(),this.f=null),this.l&&(this.l.stop(),this.l=null),this.b=this.c=this.a=this.j=null,this.B=function(){}},to.prototype.v=function(e){Ya(this.c,e)},to.prototype.g=function(){var e=Xa(this.c);return 0<this.b.readyState&&!this.b.paused?ro(this,e):e},to.prototype.w=function(){this.f.Rd()},ao.prototype.release=function(){this.b=function(){},this.a.clear()},oo.prototype.release=function(){this.j=null,this.f.clear(),this.a=function(){},this.b=function(){},this.c=function(){}},oo.prototype.g=function(e,t){for(var n=Y(this.j.a),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.f.get(i),a=e<i.startTime?so:e>i.endTime?co:uo;this.f.set(i,a);for(var o=Y(this.l),s=o.next();!s.done;s=o.next())(s=s.value).Kb==r&&s.Jb==a&&s.Ab(i,t)}};var so=1,uo=2,co=3;function lo(e,t){this.a=t,this.c=e,this.g=null,this.s=1,this.B=Promise.resolve(),this.j=[],this.l=new Map,this.b=new Map,this.w=!1,this.J=null,this.H=this.f=this.v=!1,this.G=0}function ho(e){return po(e,"audio")}function fo(e){return po(e,"video")}function po(e,t){var n=e.b.get(t);return n?n.mb||n.stream:null}function mo(l,d){return $(function e(){var t,n,i,r,a,o,s,u,c;return te(e,function(e){switch(e.o){case 1:return t=on,J(e,Vn(l.a.U,t.Na),2);case 2:return l.G++,l.H=!1,n=l.G,i=l.a.U,r=new Map,a=new Set,r.set(t.Na,d),a.add(d),J(e,i.init(r,!1),3);case 3:return l.f?e.return():J(e,So(l,a),4);case 4:if(l.f)return e.return();o=l.a.U.g.isTextVisible()||l.g.alwaysStreamText,l.G!=n||l.b.has(t.Na)||l.H||!o||(s=l.a.yb(),u=Mo(l,s),c=wo(d,u,0),l.b.set(t.Na,c),_o(l,c,0)),j(e)}})})}function go(e,t){var n,i,r=e.b.get("video");!r||(n=r.stream)&&(ne.debug("setTrickPlay",t),t?(i=n.trickModeVideo)&&!r.mb&&(ne.debug("Engaging trick mode stream",i),bo(e,i,!1,0,!1),r.mb=n):(n=r.mb)&&(ne.debug("Restoring non-trick-mode stream",n),bo(e,n,!(r.mb=null),0,!1)))}function vo(e,t,n,i){var r,a=!1;return t.video&&(r=bo(e,t.video,n,i,!1),a=a||r),t.audio&&(e=bo(e,t.audio,n,i,!1),a=a||e),a}function bo(t,e,n,i,r){var a=t.b.get(e.type);if(!a&&"text"==e.type&&t.g.ignoreTextStreamFailures)return mo(t,e),!0;if(!a)return!1;var o=Ro(t,e),s=Array.from(t.b.values()).every(function(e){return e.Ba==a.Ba});return n&&o!=a.Ba&&s?(ne.debug("switch: switching to stream in another Period; clearing buffer and changing Periods"),t.b.forEach(function(e){yo(t,e)}),!0):(a.mb&&(ne.debug("switch during trick play mode",e),e.trickModeVideo?(e=(a.mb=e).trickModeVideo,ne.debug("switch found trick play stream",e)):(a.mb=null,ne.debug("switch found no special trick play stream"))),!(!(s=t.j[o])||!s.fc)&&(!(!(s=t.l.get(e.id))||!s.fc)&&(a.stream!=e||r?("text"==e.type&&On(t.a.U,st(e.mimeType,e.codecs)),a.stream=e,a.Sc=!0,ne.debug("switch: switching to Stream "+jo(a)),function(e,t,n){if(!t.Eb)return;var i=e.a.yb(),r=jn(e.a.U,t.type),a=ko(e,t,i,r,n);return n=a&&a.a?a.a-a.b:null,a&&!n&&(n=(a.endTime-a.Qc())*t.stream.bandwidth/8),!isNaN(n)&&((a=t.stream.initSegmentReference)&&(n+=(a.a?a.a-a.b:null)||0),a=e.a.getBandwidthEstimate(),8*n/a<r-i-Math.max(e.c.minBufferTime||0,e.g.rebufferingGoal)||t.Eb.b.a>n)}(t,a,o)&&(ne.info("Aborting current segment request to switch."),a.Eb.abort()),n&&(a.vb?a.jd=!0:a.kb?(a.qb=!0,a.Jc=i,a.jd=!0):(Oo(a),Uo(t,a,!0,i).catch(function(e){t.a&&t.a.onError(e)}))),!0):(ne.debug("switch: Stream "+jo(a)+" already active"),!1))))}function yo(t,e){var n=jo(e);e.vb?ne.debug(n,"clear: already clearing the buffer"):e.qb?ne.debug(n,"clear: already waiting"):e.kb?(ne.debug(n,"clear: currently updating"),e.qb=!0,e.Jc=0):null==Fn(t.a.U,e.type)?(ne.debug(n,"clear: nothing buffered"),null==e.hb&&_o(t,e,0)):(ne.debug(n,"clear: handling right now"),Oo(e),Uo(t,e,!1,0).catch(function(e){t.a&&t.a.onError(e)}))}function Eo(l,d,h,f,p){return $(function e(){var i,r,a,o,s,u,c;return te(e,function(e){switch(e.o){case 1:return i=l.a.yb(),r=Mo(l,i),a=on,o=new Map,s=new Set,d&&(o.set(a.ic,d),s.add(d)),h&&(o.set(a.tb,h),s.add(h)),f&&(o.set(a.Na,f),s.add(f)),u=l.a.U,c=l.g.forceTransmuxTS,J(e,u.init(o,c),2);case 2:return l.f?e.return():((n=(t=l).c.presentationTimeline.ra())<1/0?t.a.U.Ta(n):t.a.U.Ta(Math.pow(2,32)),J(e,So(l,s),3));case 3:if(l.f)return e.return();o.forEach(function(e,t){var n;l.b.has(t)||(n=wo(e,r,p),l.b.set(t,n),_o(l,n,0))}),j(e)}var t,n})})}function wo(e,t,n){return{stream:e,type:e.type,Wb:null,cb:null,mb:null,Sc:!0,Ba:t,endOfStream:!1,kb:!1,hb:null,qb:!1,Jc:0,jd:!1,vb:!1,Vd:!1,sc:!1,Yd:n||0,Eb:null}}function To(e,t){var n=e.j[t];if(n)return ne.debug("(all) Period "+t+" is being or has been set up"),n.promise;ne.debug("(all) setting up Period "+t),n={promise:new Ue,fc:!1},e.j[t]=n;for(var i=new Set,r=Y(e.c.periods[t].variants),a=r.next();!a.done;a=r.next())(a=a.value).video&&i.add(a.video),a.video&&a.video.trickModeVideo&&i.add(a.video.trickModeVideo),a.audio&&i.add(a.audio);for(a=(r=Y(e.c.periods[t].textStreams)).next();!a.done;a=r.next())i.add(a.value);return e.B=e.B.then(function(){if(!this.f)return So(this,i)}.bind(e)).then(function(){this.f||(this.j[t].promise.resolve(),this.j[t].fc=!0,ne.I("(all) setup Period "+t))}.bind(e)).catch(function(e){this.f||(this.j[t].promise.catch(function(){}),this.j[t].promise.reject(),delete this.j[t],ne.u("(all) failed to setup Period "+t),this.a.onError(e))}.bind(e)),n.promise}function So(l,d){return $(function e(){var i,r,a,o,s,u,c;return te(e,function(e){switch(e.o){case 1:i=[];for(var t=Y(d),n=t.next();!n.done;n=t.next())r=n.value,(a=l.l.get(r.id))?(ne.debug("(all) Stream "+r.id+" is being or has been set up"),i.push(a.promise)):(ne.I("(all) setting up Stream "+r.id),l.l.set(r.id,{promise:new Ue,fc:!1}),i.push(r.createSegmentIndex()));return Z(e,2),J(e,Promise.all(i),4);case 4:if(l.f)return e.return();Q(e,3);break;case 2:if(o=ee(e),l.f)return e.return();for(n=(e=Y(d)).next();!n.done;n=e.next())s=n.value,l.l.get(s.id).promise.catch(function(){}),l.l.get(s.id).promise.reject(),l.l.delete(s.id);throw o;case 3:for(n=(t=Y(d)).next();!n.done;n=t.next())u=n.value,(c=l.l.get(u.id)).fc||(c.promise.resolve(),c.fc=!0,ne.I("(all) setup Stream "+u.id));j(e)}})})}function Ao(t,e){if(!t.f){var n=jo(e);if(!e.kb&&null!=e.hb&&!e.vb)if(e.hb=null,e.qb)ne.debug(n,"skipping update and clearing the buffer"),Uo(t,e,e.jd,e.Jc);else{try{var i=function(t,e){if(No(e))return Gn(t.a.U,e.stream.originalId||""),null;var n=jo(e),i=t.a.yb(),r=Io(t,e,i);ne.N(n,"timeNeeded="+r);var a=Ro(t,e.stream),o=Mo(t,r),s=function(e,t,n){return"text"==t?null==(e=e.a).b||e.b<n?0:e.b-Math.max(n,e.a):en(e=Kn(e,t),n)}(t.a.U,e.type,i);ne.N(n,"update_:","presentationTime="+i,"bufferedAhead="+s);var u=Math.max(t.c.minBufferTime||0,t.g.rebufferingGoal,t.g.bufferingGoal)*t.s;if(r>=t.c.presentationTimeline.ra())return ne.debug(n,"buffered to end of presentation"),e.endOfStream=!0,"video"==e.type&&(r=t.b.get("text"))&&"application/cea-608"==r.stream.mimeType&&(r.endOfStream=!0),null;if(e.endOfStream=!1,(e.Ba=o)!=a)return ne.debug(n,"need Period "+o,"presentationTime="+i,"timeNeeded="+r,"currentPeriodIndex="+a),null;if(u<=s)return ne.N(n,"buffering goal met"),.5;if(n=jn(t.a.U,e.type),!(n=ko(t,e,i,n,a)))return 1;var c=1/0;return Array.from(t.b.values()).forEach(function(e){No(e)||(e=Io(t,e,i),c=Math.min(c,e))}),r>=c+t.c.presentationTimeline.a?1:(e.Yd=0,function(e,l,d,t,h){var n=jo(l),f=e.c.periods[t];ne.I(n,"fetchAndAppend_:","presentationTime="+d,"currentPeriod.startTime="+f.startTime,"reference.position="+h.position,"reference.startTime="+h.startTime,"reference.endTime="+h.endTime);var p=l.stream,i=e.c.presentationTimeline.ra(),r=e.c.periods[t+1];t=function(e,t,n,i,r){if(!t.Sc)return Promise.resolve();var a=jo(t);return n=e.c.periods[n].startTime-t.stream.presentationTimeOffset,ne.I(a,"setting timestamp offset to "+n),ne.I(a,"setting append window start to "+i),ne.I(a,"setting append window end to "+r),i=function(e,t,n,i,r){return"text"==t?(e.a.v=n,(e=e.a).f=i,e.j=r,Promise.resolve()):Promise.all([zn(e,t,e.Hf.bind(e,t)),zn(e,t,e.uh.bind(e,t,n)),zn(e,t,e.qh.bind(e,t,i,r))])}(e.a.U,t.type,n,i,r),t.stream.initSegmentReference?(ne.I(a,"fetching init segment"),e=Lo(e,t,t.stream.initSegmentReference).then(function(e){if(!this.f)return ne.I(a,"appending init segment"),Bn(this.a.U,t.type,e,null,null,t.stream.closedCaptions&&0<t.stream.closedCaptions.size)}.bind(e)).catch(function(e){return t.Sc=!0,Promise.reject(e)}),Promise.all([i,e])):i}(e,l,t,Math.max(0,f.startTime-.1),r?r.startTime+.01:i),l.kb=!0,l.Sc=!1,ne.N(n,"fetching segment"),i=Lo(e,l,h),Promise.all([t,i]).then(function(e){if(!this.f&&!this.v)return t=this,n=l,i=d,r=f,a=p,o=h,s=e[1],u=jo(n),c=a.closedCaptions&&0<a.closedCaptions.size,null!=a.emsgSchemeIdUris&&0<a.emsgSchemeIdUris.length&&(new Ki).za("emsg",t.K.bind(t,r,o,a.emsgSchemeIdUris)).parse(s),function(e,t,n){var i=jo(t);ne.N(i,"checking buffer length");var r=Math.max(e.g.bufferBehind,e.c.presentationTimeline.a),a=Fn(e.a.U,t.type);if(null==a)return ne.N(i,"buffer behind okay because nothing buffered:","presentationTime="+n,"bufferBehind="+r),Promise.resolve();var o=n-a,s=o-r;return s<=0?(ne.N(i,"buffer behind okay:","presentationTime="+n,"bufferedBehind="+o,"bufferBehind="+r,"underflow="+-s),Promise.resolve()):(ne.I(i,"buffer behind too large:","presentationTime="+n,"bufferedBehind="+o,"bufferBehind="+r,"overflow="+s),e.a.U.remove(t.type,a,a+s).then(function(){this.f||ne.I(i,"evicted "+s+" seconds")}.bind(e)))}(t,n,i).then(function(){if(!this.f)return ne.I(u,"appending media segment"),Bn(this.a.U,n.type,s,o.startTime+r.startTime,o.endTime+r.startTime,c)}.bind(t)).then(function(){if(!this.f)return ne.N(u,"appended media segment"),n.Wb=a,n.cb=o,Promise.resolve()}.bind(t));var t,n,i,r,a,o,s,u,c}.bind(e)).then(function(){this.f||this.v||(l.kb=!1,l.Vd=!1,l.qb||this.a.Rd(),_o(this,l,0),function(e,t,n){if(!e.w){var i=jo(t);if(1==(t=Array.from(e.b.values())).length&&"text"==t[0].type||(e.w=t.every(function(e){return"text"==e.type||!e.qb&&!e.vb&&e.cb})),e.w){for(ne.debug(i,"startup complete"),n=Ro(e,n),e.j[n]||To(e,n).then(function(){this.f||(ne.I(i,"calling onCanSwitch()..."),this.a.We())}.bind(e)).catch(nn.Tc),n=0;n<e.c.periods.length;++n)To(e,n).catch(nn.Tc);e.a.Wg&&(ne.I(i,"calling onStartupComplete()..."),e.a.Wg())}}}(this,l,p),ne.I(n,"finished fetch and append"))}.bind(e)).catch(function(e){this.f||this.v||(l.kb=!1,"text"==l.type&&this.g.ignoreTextStreamFailures?(1001==e.code?ne.u(n,"Text stream failed to download. Proceeding without it."):ne.u(n,"Text stream failed to parse. Proceeding without it."),this.b.delete("text")):7001==e.code?(l.kb=!1,l.hb=null,_o(this,l,0)):3017==e.code?function(e,t,n){var i=jo(t);if(Array.from(e.b.values()).some(function(e){return e!=t&&e.Vd}))ne.debug(i,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var r=Math.round(100*e.s);if(20<r)e.s-=.2;else{if(!(4<r))return ne.error(i,"MediaSource threw QuotaExceededError too many times"),t.sc=!0,e.v=!0,e.a.onError(n);e.s-=.04}ne.u(i,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*e.s))+"%"),t.Vd=!0}_o(e,t,4)}(this,l,e):(ne.error(n,"failed fetch and append: code="+e.code),l.sc=!0,e.severity=2,Fo(this,e)))}.bind(e))}(t,e,i,a,n),null)}(t,e);null!=i&&(_o(t,e,i),e.sc=!1)}catch(e){return void Fo(t,e)}i=Array.from(t.b.values()),function(e,t){var s=jo(t),n=Ro(e,t.stream);{var u,c;t.Ba!=n&&(u=t.Ba,(c=Array.from(e.b.values())).every(function(e){return e.Ba==u||No(e)})?c.every(Po)?(ne.debug(s,"all need Period "+u),To(e,u).then(function(){if(!this.f)if(c.every(function(e){var t=Po(e),n=Ro(this,e.stream);return!!No(e)||t&&e.Ba==u&&n!=u}.bind(this))){var e=this.c.periods[u];ne.I(s,"calling onChooseStreams()...");var t=this.a.Xe(e),n=new Map;t.variant&&t.variant.video&&n.set("video",t.variant.video),t.variant&&t.variant.audio&&n.set("audio",t.variant.audio),t.text&&n.set("text",t.text);for(var i=(t=Y(this.b.keys())).next();!i.done;i=t.next())if(i=i.value,!n.has(i)&&"text"!=i)return ne.error(s,"invalid Streams chosen: missing "+i+" Stream"),void this.a.onError(new Le(2,5,5005));for(i=(t=Y(Array.from(n.keys()))).next();!i.done;i=t.next())if(i=i.value,!this.b.has(i)){if("text"!=i)return ne.error(s,"invalid Streams chosen: unusable "+i+" Stream"),void this.a.onError(new Le(2,5,5005));Eo(this,null,null,n.get("text"),e.startTime),n.delete(i)}for(i=(t=Y(Array.from(this.b.keys()))).next();!i.done;i=t.next()){i=i.value;var r,a=this.b.get(i),o=n.get(i);o?((r=No(a))&&(a.Ba=u,a.Yd=e.startTime),bo(this,o,!1,0,!1),r&&No(a)||_o(this,this.b.get(i),0)):this.b.delete(i)}ne.I(s,"calling onCanSwitch()..."),this.a.We()}else ne.debug(s,"ignoring transition to Period",u,"since another is happening")}.bind(e)).catch(nn.Tc)):ne.debug(s,"all MediaStates need Period "+u+", but not all MediaStates are idle"):ne.debug(s,"not all MediaStates need Period "+u))}}(t,e),t.w&&i.every(function(e){return e.endOfStream})&&(ne.I(n,"calling endOfStream()..."),t.a.U.endOfStream().then(function(){var e;this.f||0!=(e=this.a.U.ra())&&e<this.c.presentationTimeline.ra()&&this.c.presentationTimeline.Ta(e)}.bind(t)))}}}function Io(e,t,n){return t.Wb&&t.cb?(n=Ro(e,t.Wb),e.c.periods[n].startTime+t.cb.endTime):Math.max(n,t.Yd)}function ko(e,t,n,i,r){var a=jo(t);return t.cb&&t.stream==t.Wb?(i=t.cb.position+1,ne.N(a,"next position known:","position="+i),Co(e,t,r,i)):null==(a=t.cb?(ne.I(a,"next position unknown: another Stream buffered"),a=Ro(e,t.Wb),xo(e,t,e.c.periods[a].startTime+t.cb.endTime,r)):(ne.I(a,"next position unknown: nothing buffered"),xo(e,t,i||n,r)))?null:((n=null)==i&&(n=Co(e,t,r,Math.max(0,a-1))),n||Co(e,t,r,a))}function xo(e,t,n,i){var r=jo(t);return e=e.c.periods[i],ne.debug(r,"looking up segment:","presentationTime="+n,"currentPeriod.startTime="+e.startTime),n=Math.max(0,n-e.startTime),null==(t=t.stream.findSegmentPosition(n))&&ne.u(r,"cannot find segment:","currentPeriod.startTime="+e.startTime,"lookupTime="+n),t}function Co(e,t,n,i){var r=jo(t);return n=e.c.periods[n],(t=t.stream.getSegmentReference(i))?(e=(i=e.c.presentationTimeline).qc(),i=i.Qb(),n.startTime+t.endTime<e||n.startTime+t.startTime>i?(ne.N(r,"segment is not available:","currentPeriod.startTime="+n.startTime,"reference.startTime="+t.startTime,"reference.endTime="+t.endTime,"availabilityStart="+e,"availabilityEnd="+i),null):t):(ne.I(r,"segment does not exist:","currentPeriod.startTime="+n.startTime,"position="+i),null)}function No(e){return e&&"text"==e.type&&"application/cea-608"==e.stream.mimeType}function Po(e){return!e.kb&&null==e.hb&&!e.qb&&!e.vb}function Mo(e,t){var n=Ba(e.c.periods,t+sn);return n?e.c.periods.indexOf(n):0}function Ro(e,t){for(var n=e.c.periods,i=0;i<n.length;i++){for(var r=n[i],a=new Set,o=Y(r.variants),s=o.next();!s.done;s=o.next())(s=s.value).audio&&a.add(s.audio),s.video&&a.add(s.video),s.video&&s.video.trickModeVideo&&a.add(s.video.trickModeVideo);for(o=(r=Y(r.textStreams)).next();!o.done;o=r.next())a.add(o.value);if(a.has(t))return i}return-1}function Lo(e,t,n){var i=Ir(n.c(),n.b,n.a,e.g.retryParameters);return ne.N("fetching: reference=",n),e=e.a.Xb.request(1,i),(t.Eb=e).promise.then(function(e){return t.Eb=null,e.data})}function Uo(r,a,o,s){return $(function e(){var t,n,i;return te(e,function(e){switch(e.o){case 1:return t=jo(a),a.qb=!1,a.jd=!1,a.Jc=0,a.vb=!0,ne.debug(t,"clearing buffer"),J(e,s?(n=r.a.yb(),i=r.a.U.ra(),r.a.U.remove(a.type,n+s,i)):Vn(r.a.U,a.type).then(function(){if(!this.f&&o)return this.a.U.flush(a.type)}.bind(r)),2);case 2:if(r.f)return e.return();ne.debug(t,"cleared buffer"),a.Wb=null,a.cb=null,a.vb=!1,a.endOfStream=!1,_o(r,a,0),j(e)}})})}function _o(n,i,e){ne.N(jo(i),"updating in "+e+" seconds"),i.hb=new Ce(function(){return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return Z(e,2),J(e,Ao(n,i),4);case 4:Q(e,0);break;case 2:t=ee(e),n.a&&n.a.onError(t),j(e)}})})}).R(e)}function Oo(e){null!=e.hb&&(e.hb.stop(),e.hb=null)}function Do(t){return $(function e(){return te(e,function(e){switch(e.o){case 1:if(t.Eb)return J(e,t.Eb.abort(),0);e.C(0)}})})}function Fo(e,t){Me(e.J).then(function(){this.f||(this.a.onError(t),t.handled||this.g.failureCallback(t))}.bind(e))}function jo(e){return"("+e.type+":"+e.stream.id+")"}function Ko(e,t,n,i,r,a){if(200<=n&&n<=299&&202!=n)return{uri:r||i,Td:i,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=wt(t)}catch(e){}throw ne.debug("HTTP error text:",r),new Le(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function Bo(e,t,n,i){var r=new Bo.b;at(t.headers).forEach(function(e,t){r.append(t,e)});var a,o=new Bo.a,s={ze:!1,yf:!1};return e=new _e(e=Bo.s(e,n,{body:t.body||void 0,headers:r,method:t.method,signal:o.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},s,i),function(){return s.ze=!0,o.abort(),Promise.resolve()}),(t=t.retryParameters.timeout)&&((a=new Ne(function(){s.yf=!0,o.abort()})).R(t/1e3),e.finally(function(){a.stop()})),e}function Go(s,t,u,n){var i=new Go.f,r=Date.now(),c=0;return new _e(new Promise(function(a,o){for(var e in i.open(t.method,s,!0),i.responseType="arraybuffer",i.timeout=t.retryParameters.timeout,i.withCredentials=t.allowCrossSiteCredentials,i.onabort=function(){o(new Le(1,1,7001,s,u))},i.onload=function(e){for(var t=(e=e.target).getAllResponseHeaders().trim().split("\r\n"),n={},i=(t=Y(t)).next();!i.done;i=t.next())n[(i=i.value.split(": "))[0].toLowerCase()]=i.slice(1).join(": ");try{var r=Ko(n,e.response,e.status,s,e.responseURL,u);a(r)}catch(e){o(e)}},i.onerror=function(e){o(new Le(1,1,1002,s,e,u))},i.ontimeout=function(){o(new Le(1,1,1003,s,u))},i.onprogress=function(e){var t=Date.now();(100<t-r||e.lengthComputable&&e.loaded==e.total)&&(n(t-r,e.loaded-c,e.total-e.loaded),c=e.loaded,r=t)},t.headers)i.setRequestHeader(e.toLowerCase(),t.headers[e]);i.send(t.body)}),function(){return i.abort(),Promise.resolve()})}function Vo(){this.a=this.f=this.b=0,this.c=new Map,this.g=0}function zo(e,t,n){this.j=e,this.b=new Map,this.c=!1,this.g=t,this.f=n,this.a=new Vo}function Ho(l,e,d,t,h,f){var p=function(e,t){e.b+=t;var n=e.g;return e.g++,e.c.set(n,t),n}(l.a,t);t=l.b.get(e)||Promise.resolve(),l.b.set(e,t.then(function(){return $(function e(){var r,a,o,s,u,c;return te(e,function(e){switch(e.o){case 1:return J(e,(n=l,i=d,$(function e(){var t;return te(e,function(e){switch(e.o){case 1:return J(e,n.j.request(1,i).promise,2);case 2:return t=e.A,e.return(t.data)}})})),2);case 2:if(r=e.A,l.c)throw new Le(2,9,7001);if(h)for(var t in a=new Uint8Array(r),(o=new Wi(a)).data)s=Number(t),u=o.data[s],c=o.a[s],l.f(u,c);return l.a.close(p,r.byteLength),t=l.a,l.g(0==t.b?0:t.f/t.b,l.a.a),e.return(f(r))}var n,i})})}))}function Wo(e,t){var n=this;this.c=e,this.b=e.objectStore(t),this.a=new Ue,e.onabort=function(e){e.preventDefault(),n.a.reject()},e.onerror=function(e){e.preventDefault(),n.a.reject()},e.oncomplete=function(){n.a.resolve()}}function qo(i,r){return new Promise(function(t,e){var n=i.b.openCursor();n.onerror=e,n.onsuccess=function(e){if(!(e=e.target.result))return t();r(e.key,e.value,e),e.continue()}})}function Xo(e){this.b=e,this.a=[]}function Yo(e,t){return $o(e,t,"readwrite")}function $o(e,t,n){var i=new Wo(n=e.b.transaction([t],n),t);return e.a.push(i),i.promise().then(function(){Ve(e.a,i)},function(){Ve(e.a,i)}),i}function Jo(e,t,n){this.b=new Xo(e),this.c=t,this.a=n}function Zo(e){return Promise.reject(new Le(2,9,9011,"Cannot add new value to "+e))}function Qo(e,t,n,i){t=(e=Yo(e.b,t)).store();for(var r={},a=(n=Y(n)).next();!a.done;r={key:r.key},a=n.next())r.key=a.value,t.delete(r.key).onsuccess=function(e){return function(){return i(e.key)}}(r);return e.promise()}function es(u,c,l){return $(function e(){var t,n,i,r,a,o,s;return te(e,function(e){switch(e.o){case 1:for(t=$o(u.b,c,"readonly"),n=t.store(),i={},r=[],a={},o=Y(l),s=o.next();!s.done;a={request:a.request,key:a.key},s=o.next())a.key=s.value,a.request=n.get(a.key),a.request.onsuccess=function(e){return function(){null==e.request.result&&r.push(e.key),i[e.key]=e.request.result}}(a);return J(e,t.promise(),2);case 2:if(r.length)throw new Le(2,9,9012,"Could not find values for "+r);return e.return(l.map(function(e){return i[e]}))}})})}function ts(e){this.a=new Xo(e)}function ns(){this.a=new Map}function is(e,t,n){if(!(e=e.a.get(t)))throw new Le(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new Le(2,9,9013,"Could not find cell with name "+n);return t}function rs(e,t){as.set(e,t)}lo.prototype.destroy=function(){var a=this;return $(function e(){var i,r;return te(e,function(e){switch(e.o){case 1:i=[];for(var t=Y(a.b.values()),n=t.next();!n.done;n=t.next())Oo(r=n.value),i.push(Do(r));return J(e,Promise.all(i),2);case 2:a.b.clear(),a.l.clear(),a.a=null,a.c=null,a.B=null,a.j=null,a.g=null,a.f=!0,j(e)}})})},lo.prototype.configure=function(e){this.g=e,this.J=new Pe({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0},!0)},lo.prototype.start=function(){var r=this;return $(function e(){var t,n,i;return te(e,function(e){switch(e.o){case 1:return t=r.a.yb(),n=Mo(r,t),(i=r.a.Xe(r.c.periods[n])).variant||i.text?J(e,Eo(r,i.variant?i.variant.audio:null,i.variant?i.variant.video:null,i.text,t),2):(ne.error("init: no Streams chosen"),e.return(new Le(2,5,5005)));case 2:if(r.f)return e.return();ne.debug("init: completed initial Stream setup"),r.a&&r.a.Ng&&(ne.I("init: calling onInitialStreamsSetup()..."),r.a.Ng()),j(e)}})})},lo.prototype.K=function(e,t,n,i){var r=i.reader.Ud(),a=i.reader.Ud(),o=i.reader.M(),s=i.reader.M(),u=i.reader.M(),c=i.reader.M();i=i.reader.Fb(i.reader.T.byteLength-i.reader.va()),e=e.startTime+t.startTime+s/o,n.includes(r)&&("urn:mpeg:dash:event:2012"==r?this.a.Og():this.a.onEvent(new F("emsg",{detail:{startTime:e,endTime:e+u/o,schemeIdUri:r,value:a,timescale:o,presentationTimeDelta:s,eventDuration:u,id:c,messageData:i}})))},O("shaka.net.HttpFetchPlugin",Bo),Bo.s=function(f,p,m,g,v){return $(function e(){var t,n,i,r,o,s,u,c,a,l,d,h;return te(e,function(e){switch(e.o){case 1:return t=Bo.g,n=Bo.c,s=o=0,u=Date.now(),Z(e,2),J(e,t(f,m),4);case 4:return i=e.A,c=i.clone().body.getReader(),l=(a=i.headers.get("Content-Length"))?parseInt(a,10):0,new n({start:function(a){!function r(){return $(function e(){var t,n,i;return te(e,function(e){switch(e.o){case 1:return Z(e,2),J(e,c.read(),4);case 4:t=e.A,Q(e,3);break;case 2:return n=ee(e),ne.I("error reading from stream",n.message),e.return();case 3:t.done||(o+=t.value.byteLength),(100<(i=Date.now())-u||t.done)&&(v(i-u,o-s,l-o),s=o,u=i),t.done?a.close():(a.enqueue(t.value),r()),j(e)}})})}()}}),J(e,i.arrayBuffer(),5);case 5:r=e.A,Q(e,3);break;case 2:if(d=ee(e),g.ze)throw new Le(1,1,7001,f,p);if(g.yf)throw new Le(1,1,1003,f,p);throw new Le(1,1,1002,f,d,p);case 3:return h={},i.headers.forEach(function(e,t){h[t.trim()]=e}),e.return(Ko(h,r,i.status,f,i.url,p))}})})},Bo.isSupported=function(){if(!h.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!(!h.fetch||!h.AbortController)},Bo.isSupported=Bo.isSupported,Bo.g=h.fetch,Bo.a=h.AbortController,Bo.c=h.ReadableStream,Bo.b=h.Headers,Bo.isSupported()&&(Ye("http",Bo,2),Ye("https",Bo,2)),O("shaka.net.HttpXHRPlugin",Go),Go.f=h.XMLHttpRequest,Ye("http",Go,1),Ye("https",Go,1),Vo.prototype.close=function(e,t){var n;this.c.has(e)&&(n=this.c.get(e),this.c.delete(e),this.f+=n,this.a+=t)},zo.prototype.destroy=function(){return this.c=!0,Promise.all(this.b.values()).then(function(){},function(){})},Wo.prototype.abort=function(){try{this.c.abort()}catch(e){}return this.a.catch(function(){})},Wo.prototype.store=function(){return this.b},Wo.prototype.promise=function(){return this.a},Xo.prototype.destroy=function(){return Promise.all(this.a.map(function(e){return e.abort()}))},(n=Jo.prototype).destroy=function(){return this.b.destroy()},n.hasFixedKeySpace=function(){return!0},n.addSegments=function(){return Zo(this.c)},n.removeSegments=function(e,t){return Qo(this,this.c,e,t)},n.getSegments=function(n){var i=this;return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return J(e,es(i,i.c,n),2);case 2:return t=e.A,e.return(t.map(function(e){return i.De(e)}))}})})},n.addManifests=function(){return Zo(this.a)},n.updateManifestExpiration=function(t,n){var e=Yo(this.b,this.a),i=e.store();return i.get(t).onsuccess=function(e){(e=e.target.result)&&(e.expiration=n,i.put(e,t))},e.promise()},n.removeManifests=function(e,t){return Qo(this,this.a,e,t)},n.getManifests=function(n){var i=this;return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return J(e,es(i,i.a,n),2);case 2:return t=e.A,e.return(t.map(function(e){return i.Kc(e)}))}})})},n.getAllManifests=function(){var i=this;return $(function e(){var t,n;return te(e,function(e){switch(e.o){case 1:return t=$o(i.b,i.a,"readonly"),n=new Map,J(e,qo(t,function(e,t){n.set(e,i.Kc(t))}),2);case 2:return J(e,t.promise(),3);case 3:return e.return(n)}})})},n.De=function(e){return e},n.Kc=function(e){return e},n.add=function(s,u){var c=this;return $(function e(){var i,r,a,o;return te(e,function(e){switch(e.o){case 1:i=Yo(c.b,s),r=i.store(),a=[];for(var t=Y(u),n=t.next();!n.done;n=t.next())o=n.value,r.add(o).onsuccess=function(e){a.push(e.target.result)};return J(e,i.promise(),2);case 2:return e.return(a)}})})},ts.prototype.destroy=function(){return this.a.destroy()},ts.prototype.getAll=function(){var i=this;return $(function e(){var t,n;return te(e,function(e){switch(e.o){case 1:return t=$o(i.a,"session-ids","readonly"),n=[],J(e,qo(t,function(e,t){n.push(t)}),2);case 2:return J(e,t.promise(),3);case 3:return e.return(n)}})})},ts.prototype.add=function(e){for(var t=Yo(this.a,"session-ids"),n=t.store(),i=(e=Y(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},ts.prototype.remove=function(i){var n=this;return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return J(e,qo(t=Yo(n.a,"session-ids"),function(e,t,n){0<=i.indexOf(t.sessionId)&&n.delete()}),2);case 2:return J(e,t.promise(),0)}})})},ns.prototype.destroy=function(){for(var e=[],t=Y(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.a.clear(),Promise.all(e)},ns.prototype.init=function(){var i=this;as.forEach(function(e,t){var n=e();n?i.a.set(t,n):ne.info("Skipping "+t+" as it is not supported on this platform")});for(var e=[],t=Y(this.a.values()),n=t.next();!n.done;n=t.next())e.push(n.value.init());return Promise.all(e)},ns.prototype.erase=function(){var i=this;return $(function e(){var t,n;return te(e,function(e){switch(e.o){case 1:return t=Array.from(i.a.values()),(n=0<t.length)||as.forEach(function(e){(e=e())&&t.push(e)}),J(e,Promise.all(t.map(function(e){return e.erase()})),2);case 2:if(!n)return J(e,Promise.all(t.map(function(e){return e.destroy()})),0);e.C(0)}})})},O("shaka.offline.StorageMuxer.register",rs),O("shaka.offline.StorageMuxer.unregister",function(e){as.delete(e)});var as=new Map;function os(e){Jo.apply(this,arguments)}function ss(e){return function(e){var t=e.streams.filter(function(e){return"audio"==e.contentType}),i=e.streams.filter(function(e){return"video"==e.contentType});{var r,n,a;t.every(function(e){return e.variantIds})&&i.every(function(e){return e.variantIds})||(t.forEach(function(e){e.variantIds=[]}),i.forEach(function(e){e.variantIds=[]}),r=0,i.length&&!t.length&&(ne.debug("Found video-only content. Creating variants for video."),n=r++,i.forEach(function(e){e.variantIds.push(n)})),!i.length&&t.length&&(ne.debug("Found audio-only content. Creating variants for audio."),a=r++,t.forEach(function(e){e.variantIds.push(a)})),i.length&&t.length&&(ne.debug("Found audio-video content. Creating variants."),t.forEach(function(n){i.forEach(function(e){var t=r++;n.variantIds.push(t),e.variantIds.push(t)})})))}}(e),e.streams.forEach(function(){}),{startTime:e.startTime,streams:e.streams.map(us)}}function us(e){var t=e.initSegmentUri?ls(e.initSegmentUri):null;return{id:e.id,originalId:null,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:e.segments.map(cs),variantIds:e.variantIds}}function cs(e){var t=ls(e.uri);return{startTime:e.startTime,endTime:e.endTime,dataKey:t}}function ls(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Le(2,9,9004,"Could not parse uri "+e)}function ds(e,t,n,i){Jo.call(this,e,t,n),this.f=i}function hs(){this.g=this.c=this.b=this.a=this.f=null}function fs(e,t,n,i){this.a=e,this.g=t,this.f=n,this.c=i,this.b=["offline:",e,"/",t,"/",n,"/",i].join("")}function ps(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new fs(t,n,i,Number(e[4])):null}function ms(e,t){this.b=e,this.a=t}function gs(n,t,i){var e=t.streams.filter(function(e){return"audio"==e.contentType}),r=t.streams.filter(function(e){return"video"==e.contentType}),e=function(e,t,n){for(var i=new Set,r=Y(t),a=r.next();!a.done;a=r.next()){var o=Y(a.value.variantIds);for(a=o.next();!a.done;a=o.next())i.add(a.value)}for(r=Y(n),a=r.next();!a.done;a=r.next())for(o=Y(a.value.variantIds),a=o.next();!a.done;a=o.next())i.add(a.value);for(r=new Map,i=Y(i),a=i.next();!a.done;a=i.next())a=a.value,r.set(a,{id:a,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0});for(t=Y(t),i=t.next();!i.done;i=t.next())for(i=i.value,a=vs(e,i),o=Y(i.variantIds),i=o.next();!i.done;i=o.next())(i=r.get(i.value)).language=a.language,i.primary=i.primary||a.primary,i.audio=a;for(n=Y(n),t=n.next();!t.done;t=n.next())for(i=t.value,t=vs(e,i),a=Y(i.variantIds),i=a.next();!i.done;i=a.next())(i=r.get(i.value)).primary=i.primary||t.primary,i.video=t;return r}(n,e,r),r=t.streams.filter(function(e){return"text"==e.contentType}).map(function(e){return vs(n,e)});return t.streams.forEach(function(e){e=e.segments.map(function(e,t){return bs(n,t,e)}),i.Yb(e,t.startTime)}),{startTime:t.startTime,variants:Array.from(e.values()),textStreams:r}}function vs(n,e){var t,i,r,a=new sr(o=e.segments.map(function(e,t){return bs(n,t,e)})),o={id:e.id,originalId:e.originalId,createSegmentIndex:function(){return Promise.resolve()},findSegmentPosition:function(e){return a.find(e)},getSegmentReference:function(e){return a.get(e)},initSegmentReference:null,presentationTimeOffset:e.presentationTimeOffset,mimeType:e.mimeType,codecs:e.codecs,width:e.width||void 0,height:e.height||void 0,frameRate:e.frameRate||void 0,pixelAspectRatio:e.pixelAspectRatio||void 0,kind:e.kind,encrypted:e.encrypted,keyId:e.keyId,language:e.language,label:e.label||null,type:e.contentType,primary:e.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null};return null!=e.initSegmentKey&&(o.initSegmentReference=(t=n,i=e.initSegmentKey,r=new fs("segment",t.b,t.a,i),new rr(function(){return[r.toString()]},0,null))),o}function bs(e,t,n){var i=new fs("segment",e.b,e.a,n.dataKey);return new ar(t,n.startTime,n.endTime,function(){return[i.toString()]},0,null)}function ys(){this.a=null}function Es(e){var t=ps(e);return t&&"manifest"==t.a?Es.j(e):t&&"segment"==t.a?Es.l(t.key(),t):Oe(new Le(2,1,9004,e))}function ws(y,E,w){return $(function e(){var l,d,m,g,v,b;return te(e,function(e){switch(e.o){case 1:l=[];for(var t=[],n=Y(w),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=!1,a=Y(t),o=a.next();!o.done;o=a.next())if(o=o.value,s=o.info,u=i,s.keySystem==u.keySystem&&s.licenseUri==u.licenseUri&&ze(s.audioCapabilities,u.audioCapabilities,c)&&ze(s.videoCapabilities,u.videoCapabilities,c)){o.sessionIds.push(i.sessionId),r=!0;break}r||t.push({info:i,sessionIds:[i.sessionId]})}d=Y(t),m=d.next();case 2:if(m.done){e.C(4);break}return g=m.value,h=y,f=E,p=g,v=$(function e(){var u,c,l,d;return te(e,function(e){switch(e.o){case 1:return u=new xt({Xb:f,onError:function(){},Vc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),Z(e,2),u.configure(h),J(e,(t=u,n=p.info.keySystem,i=p.info.licenseUri,r=p.info.serverCertificate,a=p.info.audioCapabilities,o=p.info.videoCapabilities,(s=new Map).set(n,{audioCapabilities:a,videoCapabilities:o,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:n,drmInfos:[{keySystem:n,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:r,initData:null,keyIds:null}]}),Ot(t,s)),4);case 4:Q(e,3);break;case 2:return c=ee(e),ne.u("Error initializing EME",c),J(e,u.destroy(),5);case 5:return e.return([]);case 3:return Z(e,6),J(e,Pt(u),8);case 8:Q(e,7);break;case 6:return l=ee(e),ne.u("Error setting server certificate",l),J(e,u.destroy(),9);case 9:return e.return([]);case 7:return d=[],J(e,Promise.all(p.sessionIds.map(function(n){return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return Z(e,2),J(e,(r=u,a=n,$(function e(){var t,n,i;return te(e,function(e){switch(e.o){case 1:return J(e,Dt(r,a),2);case 2:return(t=e.A)?(n=[],(i=r.b.get(t))&&(i.Va=new Ue,n.push(i.Va)),ne.N("Attempting to remove session",a),n.push(t.remove()),J(e,Promise.all(n),0)):(ne.N("Ignoring attempt to remove missing session",a),e.return())}})})),4);case 4:d.push(n),Q(e,0);break;case 2:t=ee(e),ne.u("Error deleting offline session",t),j(e)}var r,a})})})),10);case 10:return J(e,u.destroy(),11);case 11:return e.return(d)}var t,n,i,r,a,o,s})}),J(e,v,5);case 5:b=e.A,l=l.concat(b),m=d.next(),e.C(2);break;case 4:return e.return(l)}var h,f,p,s,u;function c(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}})})}function Ts(e,t){var n=ku(),i=this;this.j=t,this.c=e,this.f=n,this.l=null,this.g=[],this.b=this.a=null,this.s=!0,this.v=Promise.resolve().then(function(){return r=i,$(function e(){return te(e,function(e){switch(e.o){case 1:if(r.s){var t,n=!(0==r.g.length||r.a&&!r.a.zb||(r.a&&(r.a.Ra.Db(),r.a=null),(t=(n=r.g.shift()).create(r.f))?(n.Ra.Zb(),r.a={node:t.node,payload:t.payload,zb:t.zb,Ra:n.Ra}):n.Ra.Wc(),0));return n=n?Promise.resolve():r.a?(i=r,$(function e(){var t,n;return te(e,function(e){switch(e.o){case 1:return i.c=i.j.og(i.c,i.f,i.a.node,i.a.payload),Z(e,2),i.b=i.j.Pf(i.c,i.f,i.a.payload),J(e,i.b.promise,4);case 4:i.b=null,i.c==i.a.node&&(i.a.Ra.Uc(),i.a=null),Q(e,0);break;case 2:return 7001==(t=ee(e)).code?i.a.Ra.Db():i.a.Ra.onError(t),i.a=null,i.b=null,J(e,(n=i).j.handleError(i.f,t),5);case 5:n.c=e.A,j(e)}})})):(r.j.Mg(r.c),r.l=new Ue,r.l),J(e,n,1)}e.C(0)}var i})});var r})}function Ss(e,t){var n={Zb:function(){},Uc:function(){},Db:function(){},onError:function(){},Wc:function(){},Ph:function(){}};return e.g.push({create:t,Ra:n}),e.b&&e.b.abort(),As(e),n}function As(e){e.l&&(e.l.resolve(),e.l=null)}function Is(e){this.a=null;for(var t=0;t<e.textTracks.length;++t){var n=e.textTracks[t];n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.a=n)}this.a||(this.a=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden"}function ks(e){if(e.startTime>=e.endTime)return ne.u("Invalid cue times: "+e.startTime+" - "+e.endTime),null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function xs(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=e.cues,r=i.length-1;0<=r;r--){var a=i[r];a&&t(a)&&e.removeCue(a)}e.mode=n}function Cs(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var u=r+"."+a,c=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===c||o?delete e[a]:e[a]=Be(c):c.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Be(c)),u=Cs(e[a],t[a],c,i,u),s=s&&u):typeof t[a]!=typeof c||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=c.constructor?(ne.Gc("Invalid config, wrong type for "+u),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&ne.ba("Unexpected number of arguments for "+u),e[a]=t[a]):(ne.Gc("Invalid config, unrecognized key "+u),s=!1)}return s}function Ns(e,t){for(var n={},i=n,r=0,a=0;!((r=e.indexOf(".",r))<0);)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function Ps(){}function Ms(){var e=5e5,t=1/0;navigator.connection&&(navigator.connection.downlink&&(e=1e6*navigator.connection.downlink),navigator.connection.saveData&&(t=360));var n={retryParameters:Re(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:jt,fairPlayTransform:!0,updateExpirationTime:1},i={retryParameters:Re(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,dash:{customScheme:function(e){if(e)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1,defaultPresentationDelay:10,ignoreMinBufferTime:!1,autoCorrectDrift:!0,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1},hls:{ignoreTextStreamFailures:!1,useFullSegmentsForStartTime:!1}},r={retryParameters:Re(),failureCallback:function(e){return ne.error("Unhandled streaming error",e),[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0};(mt("Web0S")||ht()||mt("CrKey"))&&(r.stallSkip=0);var a={trackSelectionCallback:function(t){return $(function e(){return te(e,function(e){switch(e.o){case 1:return e.return(t)}})})},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},o={drm:n,manifest:i,streaming:r,offline:a,abrFactory:Xn,abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return a.trackSelectionCallback=function(t){return $(function e(){return te(e,function(e){switch(e.o){case 1:return e.return(function(e,t){var n=e.filter(function(e){return"variant"==e.type}),i=[],r=re(t,n.map(function(e){return e.language}));r&&(i=n.filter(function(e){return q(e.language)==r})),0==i.length&&(i=n.filter(function(e){return e.primary})),0==i.length&&(1<new Set(n.map(function(e){return e.language})).size&&ne.u("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),i=n);var a=i.filter(function(e){return e.height&&e.height<=480});{var o;a.length&&(a.sort(function(e,t){return t.height-e.height}),i=a.filter(function(e){return e.height==a[0].height})),n=[],i.length&&(o=Math.floor(i.length/2),i.sort(function(e,t){return e.bandwidth-t.bandwidth}),n.push(i[o]))}for(i=Y(e),o=i.next();!o.done;o=i.next())"text"==(o=o.value).type&&n.push(o);return n}(t,o.preferredAudioLanguage))}})})},o}function Rs(e,t,n){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0),individualizationServer:""}};return Cs(e,t,n||Ms(),i,"")}function Ls(){this.a=null,this.b=[]}function Us(e,t){var n;null==e.a?e.a={timestamp:Date.now()/1e3,state:t,duration:0}:(n=Date.now()/1e3,e.a.duration=n-e.a.timestamp,e.a.state!=t&&(e.b.push(e.a),e.a={timestamp:n,state:t,duration:0}))}function _s(e,t){var n=0;e.a&&e.a.state==t&&(n+=e.a.duration);for(var i=Y(e.b),r=i.next();!r.done;r=i.next())n+=(r=r.value).state==t?r.duration:0;return n}function Os(){this.b=this.c=null,this.a=[]}function Ds(){this.f=this.w=this.j=this.b=this.l=this.s=this.v=this.g=this.B=NaN,this.a=new Ls,this.c=new Os}function Fs(e,t){var n,u=this;B.call(this),this.l=Nu,this.a=null,this.La=!1,this.g=new et,this.kd=this.s=this.rb=this.c=this.w=this.f=this.Bc=this.G=this.Cc=this.J=this.Ka=this.v=this.H=this.j=this.L=null,this.jf=1e9,this.Ec=new Set,this.Wa=!0,this.na=null,this.hf=!1,this.Ue=0,this.ka=null,this.Z=new ya,this.b=Js(this),this.Fc={width:1/0,height:1/0},this.B=null,this.sb=new Ca(this.b.preferredAudioLanguage,this.b.preferredVariantRole,this.b.preferredAudioChannelCount),this.ia=this.b.preferredTextLanguage,this.Ia=this.b.preferredTextRole,this.ld=[],t&&t(this),this.L=(n=this,new qe(function(e,t){n.s&&n.s.segmentDownloaded(e,t)})),this.g.m(h,"online",function(){u.Zd()}),this.K={name:"detach"},this.O={name:"attach"},this.wa={name:"unload"},this.Fd={name:"manifest-parser"},this.Ed={name:"manifest"},this.Ja={name:"media-source"},this.pd={name:"drm-engine"},this.Y={name:"load"},this.Ld={name:"src-equals-drm-engine"},this.Ma={name:"src-equals"};var i=new Map;i.set(this.O,function(e,t){return je((n=u,r=t,null==(i=e).D&&(i.D=r.D,n.g.m(i.D,"error",function(){var e=pu(n);e&&n.pb(e)})),n.a=i.D,Promise.resolve()));var n,i,r}),i.set(this.K,function(e){return e.D&&(u.g.xa(e.D,"error"),e.D=null),u.a=null,je(e=Promise.resolve())}),i.set(this.wa,function(e){return je(Vs(u,e))}),i.set(this.Ja,function(e){var a,o;return a=u,o=e,je(e=$(function e(){var t,n,i,r;return te(e,function(e){switch(e.o){case 1:return t=new(h.muxjs?$t:Jt),n=a.b.textDisplayFactory,i=new n,a.zd=n,J(e,(r=new Ln(o.D,t,i)).w,2);case 2:a.H=r,j(e)}})}))}),i.set(this.Fd,function(e,t){var a,o,s;return je((a=u,o=e,s=t,$(function e(){var t,n,i,r;return te(e,function(e){switch(e.o){case 1:if(o.Ya=s.Ya,o.mimeType=s.mimeType,o.uri=s.uri,t=o.uri,n=a.L,a.rb=t,o.Ya){a.w=o.Ya(),e.C(2);break}return i=a,J(e,Sr.create(t,n,a.b.manifest.retryParameters,o.mimeType),3);case 3:i.w=e.A;case 2:r=Be(a.b.manifest),s.D&&"AUDIO"===s.D.nodeName&&(r.disableVideo=!0),a.w.configure(r),j(e)}})})))}),i.set(this.Ed,function(e){return function(r,e){var a=e.uri,t=r.L;r.Bc=new ao,function(e,t){e.b=t}(r.Bc,function(e){fu(r,"timelineregionadded",e)});var o={networkingEngine:t,filterNewPeriod:function(e){return r.rd(e)},filterAllPeriods:function(e){return Zs(r,e)},onTimelineRegionAdded:function(e){var t=r.Bc;e:{for(var n=Y(t.a),i=n.next();!i.done;i=n.next())if((i=i.value).schemeIdUri==e.schemeIdUri&&i.id==e.id&&i.startTime==e.startTime&&i.endTime==e.endTime){n=i;break e}n=null}null==n&&(t.a.add(e),t.b(e))},onEvent:function(e){return r.dispatchEvent(e)},onError:function(e){return r.pb(e)}};return new _e(Promise.resolve().then(function(){return $(function e(){var i;return te(e,function(e){switch(e.o){case 1:return J(e,(i=r).w.start(a,o),2);case 2:if(i.c=e.A,r.dispatchEvent(new F("manifestparsed")),0==r.c.periods.length)throw new Le(2,4,4014);(n=r.c.periods).some(function(e){return e.variants.some(t)})&&(ne.debug("Found variant with audio and video content, so filtering out audio-only content in all periods."),n.forEach(function(e){e.variants=e.variants.filter(t)})),j(e)}function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}var n})})}),function(){return ne.info("Aborting parser step..."),r.w.stop()})}(u,e)}),i.set(this.pd,function(){var n;return je((n=u,$(function e(){return te(e,function(e){switch(e.o){case 1:return n.j=zs(n,{Xb:n.L,onError:function(e){n.pb(e)},Vc:function(e){mu(n,e)},onExpirationUpdated:function(e,t){gu(n,e,t)},onEvent:function(e){n.dispatchEvent(e)}}),n.j.configure(n.b.drm),J(e,Ct(n.j,Ka(n.c.periods),n.c.offlineSessionIds),2);case 2:Zs(n,n.c.periods),j(e)}})})))}),i.set(this.Y,function(e,t){return je((S=u,A=e,I=t,$(function e(){var f,p,m,g,v,b,y,E,w,T;return te(e,function(e){switch(e.o){case 1:return A.startTime=I.startTime,f=A.D,p=A.uri,S.rb=p,S.J=new Va({Pc:function(){return A.D.playbackRate},ee:function(e){A.D.playbackRate=e},Te:function(e){A.D.currentTime+=e}}),S.B=new Ds,m=function(){return iu(S)},g=function(){return nu(S)},S.g.m(f,"playing",m),S.g.m(f,"pause",m),S.g.m(f,"ended",m),S.g.m(f,"ratechange",g),v=S.b.abrFactory,S.s&&S.kd==v||(S.kd=v,S.s=new v,S.s.configure(S.b.abr)),function(e,t){for(var n=0;n<t.length;n++){for(var i=t[n],r=new Map,a=Y(i.variants),o=a.next();!o.done;o=a.next())if((o=o.value).video&&o.video.closedCaptions)for(var s,u=Y((o=o.video).closedCaptions.keys()),c=u.next();!c.done;c=u.next())c=c.value,r.has(c)||(s={id:e.jf++,originalId:c,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"application/cea-608",codecs:"",kind:"caption",encrypted:!1,keyId:null,language:o.closedCaptions.get(c),label:null,type:"text",primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:o.roles,channelsCount:null,audioSamplingRate:null,closedCaptions:null},r.set(c,s));for(r=Y(r.values()),a=r.next();!a.done;a=r.next())i.textStreams.push(a.value)}}(S,S.c.periods),S.sb=new Ca(S.b.preferredAudioLanguage,S.b.preferredVariantRole,S.b.preferredAudioChannelCount),S.ia=S.b.preferredTextLanguage,l=S.c.presentationTimeline,d=S.b.playRangeStart,h=S.b.playRangeEnd,0<d&&(l.W()?ne.u("|playRangeStart| has been configured for live content. Ignoring the setting."):l.uf(d)),h<l.ra()&&(l.W()?ne.u("|playRangeEnd| has been configured for live content. Ignoring the setting."):l.Ta(h)),J(e,S.j.jc(f),2);case 2:return S.s.init(function(e,t,n){t=void 0!==t&&t,n=void 0===n?0:n,ne.debug("switch_");e:{for(var i=Y(S.c.periods),r=i.next();!r.done;r=i.next())if((r=r.value).variants.includes(e)){i=r;break e}i=null}Ys(S,i,e,!0),S.f&&vo(S.f,e,t,n)&&su(S)}),S.v=(u=S,c=A.startTime,new to(u.a,u.c,u.b.streaming,c,function(){u.Ka&&ja(u.Ka,!0),u.f&&function(n){function e(e){var t=n.a.U;return e="text"==e?null!=(e=t.a).a&&null!=e.b&&i>=e.a&&i<e.b:Qt(e=Kn(t,e),i,r)}var i=n.a.yb(),r=n.g.smallGapLimit,t=!1,a=Mo(n,i);if(V(n.b.values(),function(e){return e.Ba==a}))for(var o=Y(n.b.keys()),s=o.next();!s.done;s=o.next())e(s=s.value)||(yo(n,n.b.get(s)),t=!0);else V(n.b.keys(),e)||(ne.debug("(all): seeked: unbuffered seek: clearing all buffers"),n.b.forEach(function(e){yo(n,e)}),t=!0);t||ne.debug("(all): seeked: buffered seek: presentationTime="+i)}(u.f),u.G&&Ws(u)},function(e){return u.dispatchEvent(e)})),S.Ka=function(n){var e=new Ga(n.c);!function(e,t){e.b=t}(e,function(){uu(n)});var t=new oo(n.Bc);!function(e,t,n,i){e.a=t,e.b=n,e.c=i}(t,function(e){fu(n,"timelineregionenter",e)},function(e){fu(n,"timelineregionexit",e)},function(e,t){t||(fu(n,"timelineregionenter",e),fu(n,"timelineregionexit",e))});var i=new Fa(n.a);return i.a.add(e),i.a.add(t),i}(S),b=Math.max(S.c.minBufferTime,S.b.streaming.rebufferingGoal),Hs(S,b),S.f=new lo((s=S).c,{yb:function(){return s.v.g()},getBandwidthEstimate:function(){return s.s.getBandwidthEstimate()},U:s.H,Xb:s.L,Xe:s.Kg.bind(s),We:s.Lf.bind(s),onError:s.pb.bind(s),onEvent:function(e){return s.dispatchEvent(e)},Og:s.Pg.bind(s),Rd:s.Ug.bind(s)}),S.f.configure(S.b.streaming),qn.Ce(S.c,S.b.preferredAudioChannelCount),S.l=Pu,S.dispatchEvent(new F("streaming")),J(e,S.f.start(),3);case 3:S.b.streaming.startAtSegmentBoundary&&(y=S.v.g(),i=y,r=ho((n=S).f),a=fo(n.f),o=Tu(n),r=t(r,i),E=null!=(a=t(a,i))&&null!=r?Math.max(a,r):null!=a?a:null!=r?r:i,S.v.v(E)),S.c.periods.forEach(S.rd.bind(S)),uu(S),su(S),w=Tu(S)||S.c.periods[0],T=w.variants.some(function(e){return e.primary}),S.b.preferredAudioLanguage||T||ne.u("No preferred audio language set.  We will choose an arbitrary language initially"),ru(S,w.variants),S.g.Ha(f,"loadedmetadata",function(){S.B.b=Date.now()/1e3-I.ke}),j(e)}function t(e,t){if(!e)return null;var n=e.findSegmentPosition(t-o.startTime);return null!=n&&(n=e.getSegmentReference(n))?n.startTime+o.startTime:null}var n,i,r,a,o,s,u,c,l,d,h})})));var S,A,I}),i.set(this.Ld,function(e){var i,r;return i=u,r=e,je(e=$(function e(){var t,n;return te(e,function(e){switch(e.o){case 1:return t=on,i.j=zs(i,{Xb:i.L,onError:function(e){i.pb(e)},Vc:function(e){mu(i,e)},onExpirationUpdated:function(e,t){gu(i,e,t)},onEvent:function(e){i.dispatchEvent(e)}}),i.j.configure(i.b.drm),n={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return null},getSegmentReference:function(){return null},initSegmentReference:null,presentationTimeOffset:0,mimeType:"video/mp4",codecs:"",encrypted:!0,keyId:null,language:"und",label:null,type:t.tb,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},bandwidth:100,drmInfos:[],allowedByApplication:!0,allowedByKeySystem:!0},J(e,Ct(i.j,[n],[]),2);case 2:return J(e,i.j.jc(r.D),0)}})}))}),i.set(this.Ma,function(e,t){return function(t,n,e){function i(){return iu(t)}{var r;n.uri=e.uri,n.startTime=e.startTime,t.rb=n.uri,t.B=new Ds,t.v=new eo(n.D),null!=n.startTime&&t.v.v(n.startTime),t.J=new Va({Pc:function(){return n.D.playbackRate},ee:function(e){n.D.playbackRate=e},Te:function(e){n.D.currentTime+=e}}),Hs(t,t.b.streaming.rebufferingGoal),t.g.m(n.D,"playing",i),t.g.m(n.D,"pause",i),t.g.m(n.D,"ended",i),t.g.m(n.D,"ratechange",function(){return nu(t)}),"none"!=t.a.preload&&t.g.Ha(n.D,"loadedmetadata",function(){t.B.b=Date.now()/1e3-e.ke}),t.a.audioTracks&&(t.g.m(t.a.audioTracks,"addtrack",function(){return uu(t)}),t.g.m(t.a.audioTracks,"removetrack",function(){return uu(t)}),t.g.m(t.a.audioTracks,"change",function(){return uu(t)})),t.a.textTracks&&(r=t.a.textTracks,t.g.m(r,"addtrack",function(){return uu(t)}),t.g.m(r,"removetrack",function(){return uu(t)}),t.g.m(r,"change",function(){return uu(t)}))}n.D.src=n.uri,ht()&&n.D.load(),t.l=Mu,t.dispatchEvent(new F("streaming"));var a=new Ue;Ha(t.a,HTMLMediaElement.HAVE_METADATA,t.g,function(){a.resolve()});var o=!1;return t.ld.push(function(){o=!0}),Ha(t.a,HTMLMediaElement.HAVE_CURRENT_DATA,t.g,function(){return $(function e(){return te(e,function(e){switch(e.o){case 1:if(o)return e.return();if(!function(e){var t=e.b.preferredAudioLanguage;{var n;""!=t&&(e.bd(t),""!=(n=e.b.preferredVariantRole)&&e.bd(t,n))}}(t),Xs(t).find(function(e){return"disabled"!=e.mode})){e.C(2);break}return J(e,new Promise(function(e){t.g.Ha(t.a.textTracks,"change",e),new Ne(e).R(1)}),2);case 2:if(o)return e.return();!function(e){var t=e.b.preferredTextLanguage;{var n;""!=t&&(e.cd(t),""!=(n=e.b.preferredTextRole)&&e.cd(t,n))}}(t),j(e)}})})}),t.a.error?a.reject(pu(t)):"none"==t.a.preload&&(ne.ba('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),a.resolve()),t.g.Ha(t.a,"error",function(){a.reject(pu(t))}),new _e(a,function(){return a.reject(new Le(2,7,7001)),Promise.resolve()})}(u,e,t)}),this.ya=new Ts(this.K,{og:function(e,t,n,i){var r=null;return e==u.K&&(r=n==u.K?u.K:u.O),e==u.O&&(r=n==u.K||t.D!=i.D?u.K:n==u.O?u.O:n==u.Ja||n==u.Y?u.Ja:n==u.Ma?u.Ld:null),e==u.Ja&&(r=n==u.Y&&t.D==i.D?u.Fd:u.wa),e==u.Fd&&(r=Iu(u.Y,u.Ed,u.wa,n,t,i)),e==u.Ed&&(r=Iu(u.Y,u.pd,u.wa,n,t,i)),e==u.pd&&(r=Iu(u.Y,u.Y,u.wa,n,t,i)),e==u.Ld&&(r=n==u.Ma&&t.D==i.D?u.Ma:u.wa),e!=u.Y&&e!=u.Ma||(r=u.wa),e==u.wa&&(r=i.D&&t.D==i.D?u.O:u.K),r},Pf:function(e,t,n){return u.dispatchEvent(new F("onstatechange",{state:e.name})),i.get(e)(t,n)},handleError:function(t,n){return $(function e(){return te(e,function(e){switch(e.o){case 1:return ne.u("The walker saw an error:"),n instanceof Le?ne.u("Error Code:",n.code):(ne.u("Error Message:",n.message),ne.u("Error Stack:",n.stack)),J(e,Vs(u,t),2);case 2:return e.return(t.D?u.O:u.K)}})})},Mg:function(e){u.dispatchEvent(new F("onstateidle",{state:e.name}))}}),e&&this.jc(e,!0)}y(os,Jo),os.prototype.updateManifestExpiration=function(t,n){var e=Yo(this.b,this.a),i=e.store(),r=new Ue;return i.get(t).onsuccess=function(e){(e=e.target.result)?(e.expiration=n,i.put(e),r.resolve()):r.reject(new Le(2,9,9012,"Could not find values for "+t))},e.promise().then(function(){return r})},os.prototype.Kc=function(e){return{originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,periods:e.periods.map(ss),sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata}},os.prototype.De=function(e){return{data:e.data}},y(ds,Jo),ds.prototype.hasFixedKeySpace=function(){return this.f},ds.prototype.addSegments=function(e){return this.f?Zo(this.c):this.add(this.c,e)},ds.prototype.addManifests=function(e){return this.f?Zo(this.a):this.add(this.a,e)},ds.prototype.Kc=function(e){return null==e.expiration&&(e.expiration=1/0),e},(n=hs.prototype).init=function(){var n=this,i=new Ue,t=h.indexedDB.open("shaka_offline_db",4);return t.onsuccess=function(e){e=e.target.result;var t=(t=(n.f=e).objectStoreNames).contains("manifest")&&t.contains("segment")?(ne.debug("Mounting v1 idb storage cell"),new os(e,"segment","manifest")):null;n.a=t,t=(t=e.objectStoreNames).contains("manifest-v2")&&t.contains("segment-v2")?(ne.debug("Mounting v2 idb storage cell"),new ds(e,"segment-v2","manifest-v2",!0)):null,n.b=t,t=(t=e.objectStoreNames).contains("manifest-v3")&&t.contains("segment-v3")?(ne.debug("Mounting v3 idb storage cell"),new ds(e,"segment-v3","manifest-v3",!1)):null,n.c=t,e=e.objectStoreNames.contains("session-ids")?(ne.debug("Mounting session ID idb storage cell"),new ts(e)):null,n.g=e,i.resolve()},t.onupgradeneeded=function(e){e=e.target.result;for(var t=Y(["segment-v3","manifest-v3","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},t.onerror=function(e){i.reject(new Le(2,9,9001,t.error)),e.preventDefault()},i},n.destroy=function(){var t=this;return $(function e(){return te(e,function(e){switch(e.o){case 1:if(t.a)return J(e,t.a.destroy(),2);e.C(2);break;case 2:if(t.b)return J(e,t.b.destroy(),4);e.C(4);break;case 4:if(t.c)return J(e,t.c.destroy(),6);e.C(6);break;case 6:if(t.g)return J(e,t.g.destroy(),8);e.C(8);break;case 8:t.f&&t.f.close(),j(e)}})})},n.getCells=function(){var e=new Map;return this.a&&e.set("v1",this.a),this.b&&e.set("v2",this.b),this.c&&e.set("v3",this.c),e},n.getEmeSessionCell=function(){return this.g},n.erase=function(){var i=this;return $(function e(){return te(e,function(e){switch(e.o){case 1:if(i.a)return J(e,i.a.destroy(),2);e.C(2);break;case 2:if(i.b)return J(e,i.b.destroy(),4);e.C(4);break;case 4:if(i.c)return J(e,i.c.destroy(),6);e.C(6);break;case 6:return i.f&&i.f.close(),J(e,(t=new Ue,(n=h.indexedDB.deleteDatabase("shaka_offline_db")).onblocked=function(){ne.u("Deleting","shaka_offline_db","is being blocked")},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Le(2,9,9001,n.error)),e.preventDefault()},t),8);case 8:return i.f=null,i.a=null,i.b=null,i.c=null,J(e,i.init(),0)}var t,n})})},rs("idb",function(){return h.indexedDB?new hs:null}),fs.prototype.Sa=function(){return this.g},fs.prototype.ua=function(){return this.f},fs.prototype.key=function(){return this.c},fs.prototype.toString=function(){return this.b},(n=ys.prototype).configure=function(){},n.start=function(o){var s=this;return $(function e(){var t,n,i,r,a;return te(e,function(e){switch(e.o){case 1:return(t=ps(o),null==(s.a=t)||"manifest"!=t.a)?e.return(Promise.reject(new Le(2,1,9004,t))):(n=new ns,L(e,2),J(e,n.init(),4));case 4:return J(e,is(n,t.Sa(),t.ua()),5);case 5:return J(e,e.A.getManifests([t.key()]),6);case 6:return i=e.A,r=i[0],a=new ms(t.Sa(),t.ua()),e.return(function(t,e){var n=new Ar(null,0);n.Ta(e.duration);var i=e.periods.map(function(e){return gs(t,e,n)}),r=e.drmInfo?[e.drmInfo]:[];return e.drmInfo&&i.forEach(function(e){e.variants.forEach(function(e){e.drmInfos=r})}),{presentationTimeline:n,minBufferTime:2,offlineSessionIds:e.sessionIds,periods:i}}(a,r));case 2:return U(e),J(e,n.destroy(),7);case 7:_(e,0)}})})},n.stop=function(){return Promise.resolve()},n.update=function(){},n.onExpirationUpdated=function(c,l){var d=this;return $(function e(){var t,n,i,r,a,o,s,u;return te(e,function(e){switch(e.o){case 1:return t=d.a,n=new ns,Z(e,2,3),J(e,n.init(),5);case 5:return J(e,is(n,t.Sa(),t.ua()),6);case 6:return J(e,(i=e.A).getManifests([t.key()]),7);case 7:if(r=e.A,a=r[0],o=a.sessionIds.includes(c),s=null==a.expiration||a.expiration>l,o&&s)return ne.debug("Updating expiration for stored content"),J(e,i.updateManifestExpiration(t.key(),l),3);e.C(3);break;case 3:return U(e),J(e,n.destroy(),10);case 10:_(e,0);break;case 2:u=ee(e),ne.error("There was an error updating",t,u),e.C(3)}})})},Sr.ec("application/x-offline-manifest",ys),O("shaka.offline.OfflineScheme",Es),Es.j=function(e){return Fe(e={uri:e,Td:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}})},Es.l=function(e,t){var n=new ns;return Fe(void 0).ma(function(){return n.init()}).ma(function(){return is(n,t.Sa(),t.ua())}).ma(function(e){return e.getSegments([t.key()])}).ma(function(e){return{uri:t,Td:t,data:e[0].data,headers:{}}}).finally(function(){return n.destroy()})},Ye("offline",Es),Ts.prototype.destroy=function(){var i=this;return $(function e(){return te(e,function(e){switch(e.o){case 1:return i.s=!1,i.b&&i.b.abort(),As(i),J(e,i.v,2);case 2:i.a&&i.a.Ra.Db();for(var t=Y(i.g),n=t.next();!n.done;n=t.next())n.value.Ra.Db();i.a=null,i.g=[],i.j=null,j(e)}})})},O("shaka.text.SimpleTextDisplayer",Is),Is.prototype.remove=Is.prototype.remove=function(t,n){return!!this.a&&(xs(this.a,function(e){return e.startTime<n&&e.endTime>t}),!0)},Is.prototype.append=Is.prototype.append=function(e){for(var t=ks,n=[],i=(e=Y(e)).next();!i.done;i=e.next())(i=i.value).nestedCues.length?n=n.concat(i.nestedCues):n.push(i);var r=[];e=this.a.cues?Array.from(this.a.cues):[],i={};for(var a=(n=Y(n)).next();!a.done;i={Tb:i.Tb},a=n.next())i.Tb=a.value,e.some(function(t){return function(e){return e.startTime==t.Tb.startTime&&e.endTime==t.Tb.endTime&&e.text==t.Tb.payload}}(i))||(a=t(i.Tb))&&r.push(a);r.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:r.indexOf(t)-r.indexOf(e)}).forEach(function(e){this.a.addCue(e)}.bind(this))},Is.prototype.destroy=Is.prototype.destroy=function(){return this.a&&xs(this.a,function(){return 1}),this.a=null,Promise.resolve()},Is.prototype.isTextVisible=Is.prototype.isTextVisible=function(){return"showing"==this.a.mode},Is.prototype.setTextVisibility=Is.prototype.setTextVisibility=function(e){this.a.mode=e?"showing":"hidden"},O("shaka.util.ConfigUtils.mergeConfigObjects",Cs),O("shaka.util.ConfigUtils.convertToConfigObject",Ns),O("shaka.util.PlayerConfiguration",Ps),Ps.mergeConfigObjects=Rs,D(Fs,B),O("shaka.Player",Fs),Fs.prototype.destroy=Fs.prototype.destroy=function(){var n=this;return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return n.l==Cu?e.return():(n.l=Cu,t=Ss(n.ya,function(){return{node:n.K,payload:ku(),zb:!1}}),J(e,new Promise(function(e){t.Zb=function(){ne.info("Preparing to destroy walker...")},t.Uc=function(){e(),n.dispatchEvent(new F("loaded"))},t.Db=function(){e()},t.onError=function(){e()},t.Wc=function(){e()}}),2));case 2:return J(e,n.ya.destroy(),3);case 3:if(n.g&&(n.g.release(),n.g=null),n.kd=null,n.s=null,n.b=null,n.L)return J(e,n.L.destroy(),5);e.C(0);break;case 5:n.L=null,j(e)}})})},Fs.version="v2.5.14";var js=["2","5"],ei=new function(e){this.a=e,this.c=Zn,this.b=Qn}(new $n(Number(js[0]),Number(js[1]))),Ks=["output-restricted","internal-error"],Bs={};function Gs(){if(!(h.Promise&&h.Uint8Array&&Array.prototype.forEach))return!1;var e=pt();return!(e&&e<12||!(h.MediaKeys&&h.navigator&&h.navigator.requestMediaKeySystemAccess&&h.MediaKeySystemAccess&&h.MediaKeySystemAccess.prototype.getConfiguration))&&(!!lt()||dt("application/x-mpegurl"))}function Vs(n,i){return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return n.l!=Cu&&(n.l=Nu),t=n.ld.map(function(e){return e()}),n.ld=[],J(e,Promise.all(t),2);case 2:if(n.dispatchEvent(new F("unloading")),i.Ya=null,i.mimeType=null,i.startTime=null,i.uri=null,i.D&&(n.g.xa(i.D,"loadedmetadata"),n.g.xa(i.D,"playing"),n.g.xa(i.D,"pause"),n.g.xa(i.D,"ended"),n.g.xa(i.D,"ratechange")),n.Ka&&(n.Ka.release(),n.Ka=null),n.Cc&&(n.Cc.stop(),n.Cc=null),n.w)return J(e,n.w.stop(),4);e.C(3);break;case 4:n.w=null;case 3:if(n.s)return J(e,n.s.stop(),5);e.C(5);break;case 5:if(n.f)return J(e,n.f.destroy(),8);e.C(7);break;case 8:n.f=null;case 7:if(n.J&&(n.J.release(),n.J=null),n.v&&(n.v.release(),n.v=null),n.H)return J(e,n.H.destroy(),10);e.C(9);break;case 10:n.H=null;case 9:if(i.D&&i.D.src)return J(e,new Promise(function(e){return new Ne(e).R(.1)}),12);e.C(11);break;case 12:i.D.removeAttribute("src"),i.D.load();case 11:if(n.j)return J(e,n.j.destroy(),14);e.C(13);break;case 14:n.j=null;case 13:n.Z.a.clear(),n.rb=null,n.G=null,n.Ec.clear(),n.c=null,n.B=null,n.zd=null,n.Wa=!0,tu(n),j(e)}})})}function zs(e,t){return new xt(t,e.b.drm.updateExpirationTime)}function Hs(e,t){e.G=new Na,e.G.a=Ma,Pa(e.G,t,Math.min(.5,t/2)),tu(e),e.Cc=new Ne(function(){Ws(e)}).Ua(.25)}function Ws(e){switch(e.l){case Mu:var t=!!e.a.ended||Zt(e.a.buffered)>=e.a.duration-1;break;case Pu:e:if(e.a.ended||Dn(e.H))t=!0;else{if(e.c.presentationTimeline.W()){var n=e.c.presentationTimeline.Qb();if(Zt(e.a.buffered)>=n){t=!0;break e}}t=!1}break;default:t=!1}var i=en(e.a.buffered,e.a.currentTime),r=t,a=(n=e.G).b.get(n.a),t=n.a,i=r||a<=i?Ra:Ma;t!=(n.a=i)&&tu(e)}function qs(t){var e;if(t.w&&(r=Be(t.b.manifest),t.a&&"AUDIO"===t.a.nodeName&&(r.disableVideo=!0),t.w.configure(r)),t.j&&t.j.configure(t.b.drm),t.f){t.f.configure(t.b.streaming);try{t.c.periods.forEach(t.rd.bind(t))}catch(e){t.pb(e)}var n=ho(t.f),i=fo(t.f),r=Tu(t),n=qn.Le(n,i,r.variants);t.s&&n&&n.allowedByApplication&&n.allowedByKeySystem?ru(t,r.variants):(ne.debug("Choosing new streams after changing configuration"),au(t,r))}t.H&&(r=t.b.textDisplayFactory,t.zd!=r)&&(n=new r,e=(i=t.H).g,i.g=n,e&&(n.setTextVisibility(e.isTextVisible()),e.destroy()),i.a&&(i.a.c=n),t.zd=r,!t.f||(n=(r=t.f).b.get("text"))&&bo(r,n.stream,!0,0,!0)),t.s&&(t.s.configure(t.b.abr),t.b.abr.enabled&&!t.Wa?t.s.enable():t.s.disable(),hu(t)),t.G&&(r=t.b.streaming.rebufferingGoal,t.c&&(r=Math.max(r,t.c.minBufferTime)),Pa(t.G,r,Math.min(.5,r/2)))}function Xs(e){return Array.from(e.a.textTracks).filter(function(e){return"metadata"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function Ys(e,t,n,i){wa(e.Z,t).variant=n,(e=e.B.c).c!=n&&(e.c=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"variant",fromAdaptation:i,bandwidth:n.bandwidth}))}function $s(e,t,n,i){Ea(e.Z,t,n),(e=e.B.c).b!=n&&(e.b=n,e.a.push({timestamp:Date.now()/1e3,id:n.id,type:"text",fromAdaptation:i,bandwidth:null}))}function Js(t){var e=Ms();return e.streaming.failureCallback=function(e){t.W()&&[1001,1002,1003].includes(e.code)&&(e.severity=1,ne.u("Live streaming error.  Retrying automatically..."),t.Zd())},e.textDisplayFactory=function(){return new Is(t.a)},e}function Zs(e,t){var n,i,r=e.f?ho(e.f):null,a=e.f?fo(e.f):null;if(t.forEach(qn.filterNewPeriod.bind(null,e.j,r,a)),n=function(e){return e.variants.some(qn.Vb)},i=0,t.forEach(function(e){i+=n(e)?1:0}),0==(r=i))throw new Le(2,4,4032);if(r<t.length)throw new Le(2,4,4011);t.forEach(function(e){qn.ve(e.variants,this.b.restrictions,this.Fc)&&this.f&&Tu(this)==e&&uu(this),vu(this,e.variants)}.bind(e))}function Qs(e,t,n,i){return n=void 0!==n&&n,i=void 0===i?0:i,e.Wa?(e.na=t,e.hf=n,e.Ue=i,!0):((t=vo(e.f,t,n,i))&&cu(e),t)}function eu(e,t){if(e.Wa)return e.ka=t,!0;var n=bo(e.f,t,!0,0,!1);return n&&lu(e),n}function tu(e){var t,n=e.Ub();e.B&&e.G&&e.v&&((t=e.J).f=n,za(t),iu(e)),e.dispatchEvent(new F("buffering",{buffering:n}))}function nu(e){var t=e.a.playbackRate;0!=t&&e.J.set(t)}function iu(e){var t;e.B&&e.G&&(t=e.B.a,e.G.a==Ma?Us(t,"buffering"):e.a.paused?Us(t,"paused"):e.a.ended?Us(t,"ended"):Us(t,"playing"))}function ru(t,e){try{vu(t,e)}catch(e){return t.pb(e),null}var n=e.filter(function(e){return qn.Vb(e)}),n=t.sb.create(n);return t.s.setVariants(Array.from(n.values())),t.s.chooseVariant()}function au(e,t){var n=ou(e,t,!1),i=qn.lc(t.textStreams,e.ia,e.Ia)[0]||null,r=!1;i&&(e.b.streaming.alwaysStreamText||e.bb())&&($s(e,t,i,!0),r=eu(e,i)),(n||r)&&su(e)}function ou(e,t,n){n=void 0===n||n;var i=ru(e,t.variants),r=!1;return i&&(Ys(e,t,i,!0),r=Qs(e,i,!0)),n&&r&&su(e),r}function su(e){bu(e,new F("adaptation"))}function uu(e){bu(e,new F("trackschanged"))}function cu(e){bu(e,new F("variantchanged"))}function lu(e){bu(e,new F("textchanged"))}function du(e){bu(e,new F("texttrackvisibility"))}function hu(e){bu(e,new F("abrstatuschanged",{Ig:e.b.abr.enabled}))}function fu(e,t,n){e.dispatchEvent(new F(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function pu(e){if(!e.a.error)return null;var t=e.a.error.code;if(1==t)return null;var n=e.a.error.msExtendedCode;return n&&(n<0&&(n+=Math.pow(2,32)),n=n.toString(16)),new Le(2,3,3016,t,n,e.a.error.message)}function mu(e,i){var t,r,n,a,o;e.f&&(t=Tu(e),r=!1,0==(n=Object.keys(i)).length&&ne.u("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),(a=1==n.length&&"00"==n[0])&&ne.u("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks."),n.length&&e.c.periods.forEach(function(e){e.variants.forEach(function(n){qn.xg(n).forEach(function(e){var t=n.allowedByKeySystem;e.keyId&&(e=i[a?"00":e.keyId],n.allowedByKeySystem=!!e&&!Ks.includes(e)),t!=n.allowedByKeySystem&&(r=!0)})})}),n=ho(e.f),o=fo(e.f),(n=qn.Le(n,o,t.variants))&&!n.allowedByKeySystem&&(ne.debug("Choosing new variants after key status changed"),ou(e,t)),r&&(uu(e),ru(e,t.variants)))}function gu(e,t,n){e.w&&e.w.onExpirationUpdated&&e.w.onExpirationUpdated(t,n),e.dispatchEvent(new F("expirationupdated"))}function vu(e,t){for(var n=e.j?ot(e.j.Y):{},i=(i=Object.keys(n)).length&&"00"==i[0],r=!1,a=!1,o=[],s=[],u=Y(t),c=u.next();!c.done;c=u.next()){var l=[];(c=c.value).audio&&l.push(c.audio),c.video&&l.push(c.video);for(var d,h=(l=Y(l)).next();!h.done;h=l.next()){(h=h.value).keyId&&((d=n[i?"00":h.keyId])?Ks.includes(d)&&(s.includes(d)||s.push(d)):o.includes(h.keyId)||o.push(h.keyId))}c.allowedByApplication?c.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw new Le(2,4,4012,{hasAppRestrictions:a,missingKeys:o,restrictedKeyStatuses:s})}function bu(t,n){$(function e(){return te(e,function(e){switch(e.o){case 1:return J(e,Promise.resolve(),2);case 2:t.l!=Cu&&t.dispatchEvent(n),j(e)}})})}function yu(e){for(var t=new Set,n=(e=Y(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(q(n.language)):t.add("und");return t}function Eu(e){for(var t=new Map,n=(e=Y(e)).next();!n.done;n=e.next()){var i=n.value,n="und",r=[];for(i.language&&(n=q(i.language)),(r="variant"==i.type?i.audioRoles:i.roles)&&r.length||(r=[""]),t.has(n)||t.set(n,new Set),r=(i=Y(r)).next();!r.done;r=i.next())r=r.value,t.get(n).add(r)}var a=[];return t.forEach(function(e,t){for(var n=Y(e),i=n.next();!i.done;i=n.next())a.push({language:t,role:i.value})}),a}function wu(e){return null==(e=Tu(e))?[]:e.variants.filter(function(e){return qn.Vb(e)})}function Tu(e){for(var t=e.v.g(),n=null,i=(e=Y(e.c.periods)).next();!i.done;i=e.next())(i=i.value).startTime<=t&&(n=i);return n}function Su(e){var t=Tu(e);return wa(e.Z,t).variant}function Au(){return new Le(2,7,7e3)}function Iu(e,t,n,i,r,a){return i==e&&r.D==a.D&&r.uri==a.uri&&r.mimeType==a.mimeType&&r.Ya==a.Ya?t:n}function ku(){return{Ya:null,D:null,mimeType:null,startTime:null,ke:null,uri:null}}function xu(n){return new Promise(function(e,t){n.Db=function(){return t(Au())},n.Uc=function(){return e()},n.onError=function(e){return t(e)},n.Wc=function(){return t(Au())}})}Fs.registerSupportPlugin=function(e,t){Bs[e]=t},Fs.isBrowserSupported=Gs,Fs.probeSupport=function(){return Bt().then(function(e){for(var t=Sr.dh(),n={},i=Y('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),r=i.next();!r.done;r=i.next()){n[r=r.value]=lt()?!!Pn(r)||(MediaSource.isTypeSupported(r)||cn(r)):dt(r);var a=r.split(";")[0];n[a]=n[a]||n[r]}for(var o in e={manifest:t,media:n,drm:e},Bs)e[o]=Bs[o]();return e})},Fs.prototype.attach=Fs.prototype.jc=function(e,t){if(t=void 0===t||t,this.l==Cu)return Promise.reject(Au());var n=ku();n.D=e,lt()||(t=!1);var i=t?this.Ja:this.O,r=Ss(this.ya,function(){return{node:i,payload:n,zb:!1}});return r.Zb=function(){return ne.info("Starting attach...")},xu(r)},Fs.prototype.detach=Fs.prototype.detach=function(){var e=this;if(this.l==Cu)return Promise.reject(Au());var t=Ss(this.ya,function(){return{node:e.K,payload:ku(),zb:!1}});return t.Zb=function(){return ne.info("Starting detach...")},xu(t)},Fs.prototype.unload=Fs.prototype.qe=function(n){var i=this;if(n=void 0===n||n,this.l==Cu)return Promise.reject(Au());lt()||(n=!1);var r=ku(),e=Ss(this.ya,function(e){var t=e.D&&n?i.Ja:e.D?i.O:i.K;return r.D=e.D,{node:t,payload:r,zb:!1}});return e.Zb=function(){return ne.info("Starting unload...")},xu(e)},Fs.prototype.load=Fs.prototype.load=function(e,t,n){if(this.l==Cu)return Promise.reject(Au());this.dispatchEvent(new F("loading"));var i=ku();i.uri=e,i.ke=Date.now()/1e3,n&&"string"!=typeof n&&(Jn("Loading with a manifest parser factory","Please register a manifest parser and for the mime-type."),i.Ya=function(){return new n}),n&&"string"==typeof n&&(i.mimeType=n),void 0!==t&&(i.startTime=t);var r=function(e,t){if(t.Ya)return;if(!lt())return 1;var n=t.mimeType,i=t.uri||"";return!!(n=n||{mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"}[Sr.getExtension(i)])&&(""!=(t.D||gt()).canPlayType(n)&&(!Sr.isSupported(i,n)||ft()&&e.b.streaming.useNativeHlsOnSafari))}(this,i)?this.Ma:this.Y,a=Ss(this.ya,function(e){return null==e.D?null:(i.D=e.D,{node:r,payload:i,zb:!0})});return a.Zb=function(){return ne.info("Starting load of "+e+"...")},new Promise(function(e,t){a.Wc=function(){return t(new Le(2,7,7002))},a.Uc=function(){return e()},a.Db=function(){return t(Au())},a.onError=function(e){return t(e)}})},Fs.prototype.configure=Fs.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ns(e,t));var n=Rs(this.b,e,Js(this));return qs(this),n},Fs.prototype.getConfiguration=Fs.prototype.getConfiguration=function(){var e=Js(this);return Rs(e,this.b,Js(this)),e},Fs.prototype.resetConfiguration=Fs.prototype.lh=function(){for(var e in this.b)delete this.b[e];Rs(this.b,Js(this),Js(this)),qs(this)},Fs.prototype.getLoadMode=Fs.prototype.eg=function(){return this.l},Fs.prototype.getMediaElement=Fs.prototype.mg=function(){return this.a},Fs.prototype.getNetworkingEngine=Fs.prototype.nc=function(){return this.L},Fs.prototype.getAssetUri=Fs.prototype.Nc=function(){return this.rb},Fs.prototype.getManifestUri=Fs.prototype.kg=function(){return Jn("getManifestUri",'Please use "getAssetUri" instead.'),this.Nc()},Fs.prototype.isLive=Fs.prototype.W=function(){return this.c?this.c.presentationTimeline.W():!(!this.a||!this.a.src)&&1/0==this.a.duration},Fs.prototype.isInProgress=Fs.prototype.Bb=function(){return!!this.c&&this.c.presentationTimeline.Bb()},Fs.prototype.isAudioOnly=Fs.prototype.Qe=function(){if(this.c){if(!this.c.periods.length)return!1;var e=this.c.periods[0].variants;return!!e.length&&!e[0].video}return!(!this.a||!this.a.src)&&(this.a.videoTracks?0==this.a.videoTracks.length:0==this.a.videoHeight)},Fs.prototype.seekRange=Fs.prototype.gc=function(){if(this.c){var e=this.c.presentationTimeline;return{start:e.Pb(),end:e.ab()}}return this.a&&this.a.src&&(e=this.a.seekable).length?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},Fs.prototype.keySystem=Fs.prototype.keySystem=function(){return Lt(this.drmInfo())},Fs.prototype.drmInfo=Fs.prototype.drmInfo=function(){return this.j?this.j.a:null},Fs.prototype.getExpiration=Fs.prototype.mc=function(){return this.j?this.j.mc():1/0},Fs.prototype.isBuffering=Fs.prototype.Ub=function(){return!!this.G&&this.G.a==Ma},Fs.prototype.getPlaybackRate=Fs.prototype.xd=function(){var e;return e=!this.J||(e=this.J).f?0:e.c},Fs.prototype.trickPlay=Fs.prototype.pe=function(e){0==e?ne.ba("A trick play rate of 0 is unsupported!"):(this.a.paused&&this.a.play(),this.J&&this.J.set(e),this.l==Pu&&go(this.f,1<Math.abs(e)))},Fs.prototype.cancelTrickPlay=Fs.prototype.ye=function(){this.l==Mu&&this.J.set(1),this.l==Pu&&(this.J.set(1),go(this.f,!1))},Fs.prototype.getVariantTracks=Fs.prototype.Sb=function(){if(this.c&&this.v){for(var e=Su(this),t=[],n=Y(wu(this)),i=n.next();!i.done;i=n.next()){i=i.value;var r=qn.se(i);r.active=i==e,t.push(r)}return t}return this.a&&this.a.audioTracks?Array.from(this.a.audioTracks).map(function(e){return qn.Me(e)}):[]},Fs.prototype.getTextTracks=Fs.prototype.ib=function(){if(this.c&&this.v){for(var e=function(e){var t=Tu(e);if(null==t)return null;{var n;wa(e.Z,t).text||(n=qn.lc(t.textStreams,e.ia,e.Ia)).length&&Ea(e.Z,t,n[0])}return wa(e.Z,t).text}(this),t=[],n=Y(null==(o=Tu(a=this))?[]:o.textStreams.filter(function(e){return!a.Ec.has(e)})),i=n.next();!i.done;i=n.next()){i=i.value;var r=qn.ed(i);r.active=i==e,t.push(r)}return t}var a,o;return this.a&&this.a.src&&this.a.textTracks?Xs(this).map(function(e){return qn.Ag(e)}):[]},Fs.prototype.selectTextTrack=Fs.prototype.$d=function(t){if(this.c&&this.f){var e=Tu(this),n=e.textStreams.find(function(e){return e.id==t.id});n?($s(this,e,n,!1),eu(this,n),this.ia=n.language):ne.error("No stream with id",t.id)}else if(this.a&&this.a.src&&this.a.textTracks){for(n=(e=Y(e=Xs(this))).next();!n.done;n=e.next())n=n.value,qn.Ad(n)==t.id?n.mode=this.La?"showing":"hidden":n.mode="disabled";lu(this)}},Fs.prototype.selectEmbeddedTextTrack=Fs.prototype.oh=function(){Jn("selectEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. Please use SelectTextTrack.");var e=this.ib().filter(function(e){return"application/cea-608"==e.mimeType});0<e.length?this.$d(e[0]):ne.u("Unable to find the text track embedded in the video.")},Fs.prototype.usingEmbeddedTextTrack=Fs.prototype.Ih=function(){Jn("usingEmbeddedTextTrack","If closed captions are signaled in the manifest, a text stream will be created to represent them. There should be no reason to know if the player is playing embedded text.");var e=this.ib().filter(function(e){return e.active})[0];return!!e&&"application/cea-608"==e.mimeType},Fs.prototype.selectVariantTrack=Fs.prototype.pf=function(t,e,n){if(n=void 0===n?0:n,this.c&&this.f){var i=Tu(this);this.b.abr.enabled&&ne.ba("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var r=i.variants.find(function(e){return e.id==t.id});r?qn.Vb(r)?(Ys(this,i,r,!1),Qs(this,r,e,n),this.sb=new xa(r),ru(this,i.variants)):ne.error("Unable to switch to restricted track",t.id):ne.error("No variant with id",t.id)}else if(this.a&&this.a.audioTracks){for(n=(e=Y(e=Array.from(this.a.audioTracks))).next();!n.done;n=e.next())n=n.value,qn.Ad(n)==t.id&&(n.enabled=!0);cu(this)}},Fs.prototype.getAudioLanguagesAndRoles=Fs.prototype.Vf=function(){return Eu(this.Sb())},Fs.prototype.getTextLanguagesAndRoles=Fs.prototype.wg=function(){return Eu(this.ib())},Fs.prototype.getAudioLanguages=Fs.prototype.Uf=function(){return Array.from(yu(this.Sb()))},Fs.prototype.getTextLanguages=Fs.prototype.vg=function(){return Array.from(yu(this.ib()))},Fs.prototype.selectAudioLanguage=Fs.prototype.bd=function(e,t){if(this.c&&this.v){var n=Tu(this);this.sb=new Ca(e,t||"",0,"","audio"),ou(this,n)}else if(this.a&&this.a.audioTracks){for(var i=Array.from(this.a.audioTracks),n=q(e),r=(i=Y(i)).next();!r.done;r=i.next()){r=r.value;var a=qn.Me(r);q(a.language)!=n||t&&!a.roles.includes(t)||(r.enabled=!0)}cu(this)}},Fs.prototype.selectTextLanguage=Fs.prototype.cd=function(e,t){var n,i,r;this.c&&this.v?(n=Tu(this),this.ia=e,this.Ia=t||"",(i=qn.lc(n.textStreams,this.ia,this.Ia)[0]||null)&&($s(this,n,i,!1),(this.b.streaming.alwaysStreamText||this.bb())&&eu(this,i))):(r=q(e),(n=this.ib().filter(function(e){return q(e.language)==r&&(!t||e.roles.includes(t))})[0])&&this.$d(n))},Fs.prototype.selectVariantsByLabel=Fs.prototype.ph=function(e){if(this.c&&this.v){for(var t=Tu(this),n=null,i=Y(wu(this)),r=i.next();!r.done;r=i.next())if((r=r.value).audio.label==e){n=r;break}null==n?ne.u("No variants were found with label: "+e+". Ignoring the request to switch."):(this.sb=new Ca(n.language,"",0,e),ou(this,t))}},Fs.prototype.isTextTrackVisible=Fs.prototype.bb=function(){var e=this.La;return this.H?this.H.g.isTextVisible():this.a&&this.a.src&&this.a.textTracks?Xs(this).some(function(e){return"showing"==e.mode}):e},Fs.prototype.setTextTrackVisibility=Fs.prototype.ie=function(s){var u=this;return $(function e(){var i,r,a,o;return te(e,function(e){switch(e.o){case 1:if(u.La==(i=!!s))return e.return();if(u.La=i,u.l!=Pu){if(u.a&&u.a.src&&u.a.textTracks)for(var t=Y(Xs(u)),n=t.next();!n.done;n=t.next())"disabled"!=(r=n.value).mode&&(r.mode=i?"showing":"hidden");e.C(2);break}if(u.H.g.setTextVisibility(i),u.b.streaming.alwaysStreamText){e.C(2);break}if(!i){!function(e){e.H=!0;var t=e.b.get("text");t&&(Oo(t),Do(t).catch(function(){}),e.b.delete("text"))}(u.f),e.C(2);break}if(po(u.f,"text")){e.C(2);break}if(a=Tu(u),0<(o=qn.lc(a.textStreams,u.ia,u.Ia)).length)return J(e,mo(u.f,o[0]),2);e.C(2);break;case 2:du(u),j(e)}})})},Fs.prototype.getPlayheadTimeAsDate=Fs.prototype.qg=function(){if(!this.W())return ne.u("getPlayheadTimeAsDate is for live streams!"),null;var e=this.ya.f,t=0;if(this.v)t=this.v.g();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.c?new Date(1e3*(this.c.presentationTimeline.f+this.a.currentTime)):this.a&&this.a.getStartDate?(e=this.a.getStartDate(),isNaN(e.getTime())?(ne.u("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(e.getTime()+1e3*t)):(ne.u("No way to get playhead time as Date!"),null)},Fs.prototype.getPresentationStartTimeAsDate=Fs.prototype.sg=function(){if(!this.W())return ne.u("getPresentationStartTimeAsDate is for live streams!"),null;if(this.c)return new Date(1e3*this.c.presentationTimeline.f);if(this.a&&this.a.getStartDate){var e=this.a.getStartDate();return isNaN(e.getTime())?(ne.u("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):e}return ne.u("No way to get presentation start time as Date!"),null},Fs.prototype.getBufferedInfo=Fs.prototype.vd=function(){var e={total:[],audio:[],video:[],text:[]};return this.l==Mu&&(e.total=tn(this.a.buffered)),this.l==Pu&&this.H.vd(e),e},Fs.prototype.getStats=Fs.prototype.getStats=function(){if(this.l!=Pu&&this.l!=Mu)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,switchHistory:[],stateHistory:[]};iu(this),(t=this.a).getVideoPlaybackQuality&&(t=t.getVideoPlaybackQuality(),n=this.B,i=Number(t.totalVideoFrames),n.v=Number(t.droppedVideoFrames),n.s=i,this.B.l=Number(t.corruptedVideoFrames)),t=this.j?(t=this.j).K?t.K:NaN:NaN,this.B.j=t,this.l==Pu&&((t=Su(this))&&(this.B.w=t.bandwidth),t&&t.video&&(n=this.B,i=t.video.height||NaN,n.B=t.video.width||NaN,n.g=i),t=this.s.getBandwidthEstimate(),this.B.f=t);for(var e=this.B,t=e.B,n=e.g,i=e.w,r=e.s,a=e.v,o=e.l,s=e.f,u=e.b,c=_s(e.a,"playing"),l=_s(e.a,"paused"),d=_s(e.a,"buffering"),h=e.j,f=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=Y(e.b),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.a&&n.push(t(e.a)),n}(e.a),p=[],m=(e=Y(e.c.a)).next();!m.done;m=e.next())m=m.value,p.push({timestamp:m.timestamp,id:m.id,type:m.type,fromAdaptation:m.fromAdaptation,bandwidth:m.bandwidth});return{width:t,height:n,streamBandwidth:i,decodedFrames:r,droppedFrames:a,corruptedFrames:o,estimatedBandwidth:s,loadLatency:u,playTime:c,pauseTime:l,bufferingTime:d,licenseTime:h,stateHistory:f,switchHistory:p}},Fs.prototype.addTextTrack=Fs.prototype.addTextTrack=function(l,d,h,f,p,m){var g=this;return $(function e(){var t,n,i,r,a,o,s,u,c;return te(e,function(e){switch(e.o){case 1:if(g.l==Mu)throw ne.error("Cannot add text when loaded with src="),Error("State error!");if(g.l!=Pu)throw ne.error("Must call load() and wait for it to resolve before adding text tracks."),Error("State error!");if(t=Tu(g),n=on,i=g.c.periods.indexOf(t),a=(r=i+1)>=g.c.periods.length?g.c.presentationTimeline.ra():g.c.periods[r].startTime,1/0==(o=a-t.startTime))throw new Le(1,4,4033);return s=new ar(1,0,o,function(){return[l]},0,null),u={id:g.jf++,originalId:null,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(){return 1},getSegmentReference:function(e){return 1==e?s:null},initSegmentReference:null,presentationTimeOffset:0,mimeType:f,codecs:p||"",kind:h,encrypted:!1,keyId:null,language:d,label:m||null,type:n.Na,primary:!1,frameRate:void 0,pixelAspectRatio:void 0,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],channelsCount:null,audioSamplingRate:null,closedCaptions:null},g.Ec.add(u),t.textStreams.push(u),J(e,mo(g.f,u),2);case 2:return(c=po(g.f,"text"))&&Ea(g.Z,t,c),g.Ec.delete(u),ne.debug("Choosing new streams after adding a text stream"),au(g,t),uu(g),e.return(qn.ed(u))}})})},Fs.prototype.setMaxHardwareResolution=Fs.prototype.ce=function(e,t){this.Fc.width=e,this.Fc.height=t},Fs.prototype.retryStreaming=Fs.prototype.Zd=function(){if(this.l==Pu){var e=this.f;if(e.f)ne.error("Unable to retry after StreamingEngine is destroyed!"),e=!1;else if(e.v)ne.error("Unable to retry after StreamingEngine encountered a fatal error!"),e=!1;else{for(var t=Y(e.b.values()),n=t.next();!n.done;n=t.next()){var i=jo(n=n.value);n.sc&&(ne.info(i,"Retrying after failure..."),n.sc=!1,_o(e,n,.1))}e=!0}}else e=!1;return e},Fs.prototype.getManifest=Fs.prototype.ig=function(){return this.c},Fs.prototype.getManifestParserFactory=Fs.prototype.jg=function(){return this.w?this.w.constructor:null},(n=Fs.prototype).rd=function(e){var t=this.f?ho(this.f):null,n=this.f?fo(this.f):null;if(qn.filterNewPeriod(this.j,t,n,e),!(t=e.variants).some(qn.Vb))throw new Le(2,4,4011);if(vu(this,e.variants),qn.ve(t,this.b.restrictions,this.Fc)&&this.f&&Tu(this)==e&&uu(this),e=this.j?this.j.a:null)for(n=(t=Y(t)).next();!n.done;n=t.next())for(var i=(n=Y(n.value.drmInfos)).next();!i.done;i=n.next())if((i=i.value).keySystem==e.keySystem)for(var r=(i=Y(i.initData||[])).next();!r.done;r=i.next())r=r.value,Rt(this.j,r.initDataType,r.initData)},n.Kg=function(e){ne.debug("onChooseStreams_",e);try{ne.N("onChooseStreams_, choosing variant from ",e.variants),ne.N("onChooseStreams_, choosing text from ",e.textStreams),this.Wa=!0,this.s.disable(),hu(this),ne.debug("Choosing new streams after period changed");var t=ru(this,e.variants),n=qn.lc(e.textStreams,this.ia,this.Ia)[0]||null;this.na&&(e.variants.includes(this.na)&&(t=this.na),this.na=null),this.ka&&(e.textStreams.includes(this.ka)&&(n=this.ka),this.ka=null),t&&Ys(this,e,t,!0),n&&$s(this,e,n,!0);var i,r,a=this.f,o=a.b.get("video");r=o?a.c.periods[o.Ba]:(i=a.b.get("audio"))?a.c.periods[i.Ba]:null;var s,u,c,l,d=t?t.audio:null;!r&&n&&((l=d)&&(e=n,s=q(this.b.preferredTextLanguage),u=q(d.language),l=H(c=q(e.language),s)&&!H(u,c)),l&&(this.La=!0),this.La&&this.H.g.setTextVisibility(!0),du(this));var h=this.b.streaming.alwaysStreamText||this.bb()?{variant:t,text:n}:{variant:t,text:null};return ne.N("onChooseStreams_, chose variant ",h.variant),ne.N("onChooseStreams_, chose text ",h.text),h}catch(e){return this.pb(e),{variant:null,text:null}}},n.Lf=function(){ne.debug("canSwitch_"),this.Wa=!1,this.b.abr.enabled&&(this.s.enable(),hu(this)),this.na&&(vo(this.f,this.na,this.hf,this.Ue),cu(this),this.na=null),this.ka&&(bo(this.f,this.ka,!0,0,!1),lu(this),this.ka=null)},n.Pg=function(){this.w&&this.w.update&&this.w.update()},n.Ug=function(){this.v&&this.v.w()},n.pb=function(e){var t;this.l!=Cu&&(t=new F("error",{detail:e}),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0))};var Cu=0,Nu=1,Pu=2,Mu=3;function Ru(e,t){var n=gs(new ms(e.Sa(),e.ua()),t.periods[0],new Ar(null,0)),i=t.appMetadata||{},n=Lu(n);return{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i}}function Lu(e){for(var t=[],n=qn.pg(e.variants),i=(n=Y(n)).next();!i.done;i=n.next())t.push(qn.se(i.value));for(n=(e=Y(e.textStreams)).next();!n.done;n=e.next())t.push(qn.ed(n.value));return t}function Uu(){this.a={}}function _u(e,t){var n=e.a[t];return null==n&&(n=0,ne.error("Asking for bitrate of stream not given to the estimator")),0==n&&ne.u("Using bitrate of 0, this stream won't affect progress"),n}function Ou(e){this.a=!1,this.b=new Ue,this.c=e}function Du(e){var o=new ju;e.periods.forEach(function(e,t){var n,i,r=Ku(e.variants);if(0==t)for(var a=(r=Y(r.a)).next();!a.done;a=r.next())o.add(a.value);else i=r,(n=o).a=n.a.filter(function(e){return i.contains(e)})});for(var t=(e=Y(e.periods)).next();!t.done;t=e.next())(t=t.value).variants=t.variants.filter(function(e){return o.contains(new Fu(e))})}function Fu(e){var t=e.audio;e=e.video,this.b=t?t.mimeType:null,this.a=t?t.codecs.split(".")[0]:null,this.f=e?e.mimeType:null,this.c=e?e.codecs.split(".")[0]:null}function ju(){this.a=[]}function Ku(e){for(var t=new ju,n=(e=Y(e)).next();!n.done;n=e.next())t.add(new Fu(n.value));return t}function Bu(e){var n=this;if(e&&e.constructor!=Fs)throw new Le(2,9,9008);this.b=this.a=null,e?(this.a=e.b,this.b=e.nc()):(this.a=Ms(),this.b=new qe),this.f=!1,this.c=[],this.g=[];var i=!e;this.j=new Ou(function(){return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return t=function(){},J(e,Promise.all(n.g.map(function(e){return e.then(t,t)})),2);case 2:if(i)return J(e,n.b.destroy(),3);e.C(3);break;case 3:n.a=null,n.b=null,j(e)}})})})}function Gu(){if(lt())e:{for(var e=Y(as.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Vu(e,t){for(var n=[],i=Y(e.periods),r=i.next();!r.done;r=i.next())for(var a=(r=Y(r.value.streams)).next();!a.done;a=r.next())a=a.value,t&&"video"==a.contentType?n.push({contentType:st(a.mimeType,a.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=a.contentType||n.push({contentType:st(a.mimeType,a.codecs),robustness:e.drmInfo.audioRobustness});return n}function zu(a,o,s,u,e,c){var l={id:c.id,originalId:c.originalId,primary:c.primary,presentationTimeOffset:c.presentationTimeOffset||0,contentType:c.type,mimeType:c.mimeType,codecs:c.codecs,frameRate:c.frameRate,pixelAspectRatio:c.pixelAspectRatio,kind:c.kind,language:c.language,label:c.label,width:c.width||null,height:c.height||null,initSegmentKey:null,encrypted:c.encrypted,keyId:c.keyId,segments:[],variantIds:[]};e=e.presentationTimeline.qc();var d=c.id,t=c.initSegmentReference;return t&&(t=Ir(t.c(),t.b,t.a,a.a.streaming.retryParameters),Ho(o,d,t,.5*_u(u,c.id),!0,function(n){return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return J(e,s.addSegments([{data:n}]),2);case 2:t=e.A,a.c.push(t[0]),l.initSegmentKey=t[0],j(e)}})})})),function(e,t,n){for(var i=null==(t=e.findSegmentPosition(t))?null:e.getSegmentReference(t);i;)n(i),i=e.getSegmentReference(++t)}(c,e,function(i){var e,t,n,r=Ir(i.c(),i.b,i.a,a.a.streaming.retryParameters);Ho(o,d,r,(e=u,t=c.id,n=(n=i).endTime-n.startTime,_u(e,t)*n),!1,function(n){return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return J(e,s.addSegments([{data:n}]),2);case 2:t=e.A,a.c.push(t[0]),l.segments.push({startTime:i.startTime,endTime:i.endTime,dataKey:t[0]}),j(e)}})})})}),l}function Hu(e){if(e.j.a)throw new Le(2,9,7001)}function Wu(){if(!Gu())throw new Le(2,9,9e3)}function qu(t,n){return $(function e(){return te(e,function(e){switch(e.o){case 1:return t.g.push(n),L(e,2),J(e,n,4);case 4:return e.return(e.A);case 2:U(e),Ve(t.g,n),_(e,0)}})})}function Xu(e){var t=new Set(e.variants.map(function(e){return e.video})),n=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams,1<t.size&&ne.u("Multiple video tracks selected to be stored");for(var i=(t=Y(n)).next();!i.done;i=t.next()){i=i.value;for(var r=Y(n),a=r.next();!a.done;a=r.next())i!=(a=a.value)&&i.language==a.language&&ne.u("Similar audio tracks were selected to be stored",i.id,a.id)}for(t=(n=Y(e)).next();!t.done;t=n.next())for(t=t.value,r=(i=Y(e)).next();!r.done;r=i.next())t!=(r=r.value)&&t.language==r.language&&ne.u("Similar text tracks were selected to be stored",t.id,r.id)}Fs.LoadMode={DESTROYED:Cu,NOT_LOADED:Nu,MEDIA_SOURCE:Pu,SRC_EQUALS:Mu},Ou.prototype.destroy=function(){var e=this;return this.a?this.b:(this.a=!0,this.c().then(function(){e.b.resolve()},function(){e.b.resolve()}))},ju.prototype.add=function(e){this.contains(e)||this.a.push(e)},ju.prototype.contains=function(t){return this.a.some(function(e){return t.b==e.b&&t.a==e.a&&t.f==e.f&&t.c==e.c})},O("shaka.offline.Storage",Bu),Bu.support=Gu,Bu.prototype.destroy=Bu.prototype.destroy=function(){return this.j.destroy()},Bu.prototype.configure=Bu.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ns(e,t));var n=e,i=!1;return null!=n.trackSelectionCallback&&(i=!0,n.offline=n.offline||{},n.offline.trackSelectionCallback=n.trackSelectionCallback,delete n.trackSelectionCallback),null!=n.progressCallback&&(i=!0,n.offline=n.offline||{},n.offline.progressCallback=n.progressCallback,delete n.progressCallback),null!=n.usePersistentLicense&&(i=!0,n.offline=n.offline||{},n.offline.usePersistentLicense=n.usePersistentLicense,delete n.usePersistentLicense),i&&Jn("Storage.configure with OfflineConfig","Please configure storage with a player configuration."),Rs(this.a,e)},Bu.prototype.getConfiguration=Bu.prototype.getConfiguration=function(){var e=Ms();return Rs(e,this.a,Ms()),e},Bu.prototype.getNetworkingEngine=Bu.prototype.nc=function(){return this.b},Bu.prototype.store=Bu.prototype.store=function(n,e,i){var y,E,w,T,r=this;return qu(this,(y=this,E=n,w=e||{},T=function(){return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return i&&"string"!=typeof i?(Jn("Storing with a manifest parser factory","Please register a manifest parser and for the mime-type."),e.return(new i)):J(e,Sr.create(n,r.b,r.a.manifest.retryParameters,i),2);case 2:return t=e.A,e.return(t)}})})},$(function e(){var t,n,a,o,p,m,g,v,b;return te(e,function(e){switch(e.o){case 1:return Wu(),y.f?e.return(Promise.reject(new Le(2,9,9006))):(y.f=!0,J(e,(l=y,d=E,f=T,$(function e(){var t,n,i,r,a,o;return te(e,function(e){switch(e.o){case 1:return t=null,n=l.b,i={networkingEngine:n,filterAllPeriods:function(){},filterNewPeriod:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){t=e}},J(e,f(),2);case 2:return(r=e.A).configure(l.a.manifest),Hu(l),L(e,3),J(e,r.start(d,i),5);case 5:return a=e.A,Hu(l),o=function(e){for(var t=new Set,n=(e=Y(e.periods)).next();!n.done;n=e.next()){for(var i=Y((n=n.value).textStreams),r=i.next();!r.done;r=i.next())t.add(r.value);for(n=Y(n.variants),i=n.next();!i.done;i=n.next())(i=i.value).audio&&t.add(i.audio),i.video&&t.add(i.video)}return t}(a),J(e,Promise.all(G(o,function(e){return e.createSegmentIndex()})),6);case 6:if(Hu(l),t)throw t;return e.return(a);case 3:return U(e),J(e,r.stop(),7);case 7:_(e,0)}})})),2));case 2:if(t=e.A,Hu(y),t.presentationTimeline.W()||t.presentationTimeline.Bb())throw new Le(2,9,9005,E);return n=null,a=new ns,p=o=null,Z(e,3,4),J(e,(s=y,u=t,c=function(e){p=p||e},$(function e(){var r,a,o;return te(e,function(e){switch(e.o){case 1:return r=new xt({Xb:s.b,onError:c,Vc:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),a=Ka(u.periods),o=s.a,r.configure(o.drm),J(e,(t=r,n=a,i=o.offline.usePersistentLicense,t.w=[],t.H=i,Nt(t,n)),2);case 2:return J(e,Pt(r),3);case 3:return J(e,Mt(r),4);case 4:return e.return(r)}var t,n,i})})),6);case 6:if(n=e.A,Hu(y),p)throw p;return J(e,(h=y,i=t,r=n,$(function e(){var t,n;return te(e,function(e){switch(e.o){case 1:return t={width:1/0,height:1/0},function(e,t,n){for(var i=(e=Y(e.periods)).next();!i.done;i=e.next())(i=i.value).variants=i.variants.filter(function(e){return qn.Id(e,t,n)})}(i,h.a.restrictions,t),function(e){for(var t=(e=Y(e.periods)).next();!t.done;t=e.next())(t=t.value).variants=t.variants.filter(function(e){var t=!0;return e.audio&&(t=t&&_n(e.audio)),e.video&&(t=t&&_n(e.video)),t})}(i),function(e,t){for(var n=Y(e.periods),i=n.next();!i.done;i=n.next())(i=i.value).variants=i.variants.filter(function(e){return Gt(t,e)})}(i,r),Du(i),n=h.a.preferredAudioChannelCount,qn.Ce(i,n),J(e,(a=i,o=function(d){return $(function e(){var i,r,a,o,s,u,c,l;return te(e,function(e){switch(e.o){case 1:i=qn,r=[];for(var t=Y(d.variants),n=t.next();!n.done;n=t.next())a=n.value,r.push(i.se(a));for(n=(t=Y(d.textStreams)).next();!n.done;n=t.next())o=n.value,r.push(i.ed(o));return J(e,h.a.offline.trackSelectionCallback(r),2);case 2:for(s=e.A,u=new Set,c=new Set,n=(t=Y(s)).next();!n.done;n=t.next())"variant"==(l=n.value).type&&u.add(l.id),"text"==l.type&&c.add(l.id);d.variants=d.variants.filter(function(e){return u.has(e.id)}),d.textStreams=d.textStreams.filter(function(e){return c.has(e.id)}),j(e)}})})},$(function e(){var t,n,i,r;return te(e,function(e){switch(e.o){case 1:t=null,n=Y(a.periods),i=n.next();case 2:if(i.done){e.C(0);break}return r=i.value,t&&(r.variants=r.variants.filter(function(e){return t.contains(new Fu(e))})),J(e,o(r),5);case 5:t=Ku(r.variants),i=n.next(),e.C(2)}})})),2);case 2:(function(e){if(0==e.periods.length)throw new Le(2,4,4014);for(var t=(e=Y(e.periods)).next();!t.done;t=e.next())Xu(t.value)})(i),j(e)}var a,o})})),7);case 7:return J(e,a.init(),8);case 8:return Hu(y),J(e,function(e){var i=null;if(e.a.forEach(function(e,n){e.getCells().forEach(function(e,t){e.hasFixedKeySpace()||i||(i={path:{Sa:n,ua:t},ua:e})})}),i)return i;throw new Le(2,9,9013,"Could not find a cell that supports add-operations")}(a),9);case 9:return o=e.A,Hu(y),J(e,(x=y,C=o.ua,N=n,P=t,M=E,R=w,$(function e(){var v,b,y,E,w,T,S,A,I,k;return te(e,function(e){switch(e.o){case 1:return f=M,m=R,g=null==(p=P).expiration?1/0:p.expiration,v={offlineUri:null,originalManifestUri:f,duration:p.presentationTimeline.ra(),size:0,expiration:g,tracks:p=Lu(p.periods[0]),appMetadata:m},b=P.periods.some(function(e){return e.variants.some(function(e){return e.drmInfos&&e.drmInfos.length})}),y=P.periods.some(function(e){return e.variants.some(function(e){return e.drmInfos.some(function(e){return e.initData&&e.initData.length})})}),w=null,(E=b&&!y)&&(T=N.a,w=Yu.get(T.keySystem)),S=new zo(x.b,function(e,t){v.size=t,x.a.offline.progressCallback(v,e)},function(e,t){E&&x.a.offline.usePersistentLicense&&w==t&&Rt(N,"cenc",e)}),L(e,2),n=x,i=S,r=C,a=N,o=P,s=M,u=R,c=new Uu,l=o.periods.map(function(e){return function(e,t,n,i,r,a){for(var o,s,u,c,l,d,h=Y(a.variants),f=h.next();!f.done;f=h.next())o=i,s=f.value,c=void 0,l=s.audio,d=s.video,l&&!d&&(o.a[l.id]=l.bandwidth||s.bandwidth),!l&&d&&(o.a[d.id]=d.bandwidth||s.bandwidth),l&&d&&(u=l.bandwidth||393216,(c=d.bandwidth||s.bandwidth-u)<=0&&(ne.u("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),c=s.bandwidth),o.a[l.id]=u,o.a[d.id]=c);for(h=Y(a.textStreams),f=h.next();!f.done;f=h.next())i.a[f.value.id]=52;h=function(e){for(var t=new Set,n=Y(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=Y(e.variants),n=e.next();!n.done;n=e.next())(n=n.value).audio&&t.add(n.audio),n.video&&t.add(n.video);return t}(a);var p=new Map;for(h=Y(h),f=h.next();!f.done;f=h.next()){f=f.value;var m=zu(e,t,n,i,r,f);p.set(f.id,m)}return a.variants.forEach(function(e){e.audio&&p.get(e.audio.id).variantIds.push(e.id),e.video&&p.get(e.video.id).variantIds.push(e.id)}),{startTime:a.startTime,streams:Array.from(p.values())}}(n,i,r,c,o,e)}),d=a.a,h=n.a.offline.usePersistentLicense,d&&h&&(d.initData=[]),I=A={originalManifestUri:s,duration:o.presentationTimeline.ra(),size:0,expiration:a.mc(),periods:l,sessionIds:h?_t(a):[],drmInfo:d,appMetadata:u},J(e,(t=S,$(function e(){return te(e,function(e){switch(e.o){case 1:return J(e,Promise.all(t.b.values()),2);case 2:return e.return(t.a.a)}})})),4);case 4:if(I.size=e.A,A.expiration=N.mc(),k=_t(N),A.sessionIds=x.a.offline.usePersistentLicense?k:[],b&&x.a.offline.usePersistentLicense&&!k.length)throw new Le(2,9,9007);return e.return(A);case 2:return U(e),J(e,S.destroy(),5);case 5:_(e,0)}var t,n,i,r,a,o,s,u,c,l,d,h,f,p,m,g})})),10);case 10:if(m=e.A,Hu(y),p)throw p;return J(e,o.ua.addManifests([m]),11);case 11:return g=e.A,Hu(y),v=new fs("manifest",o.path.Sa,o.path.ua,g[0]),e.return(Ru(v,m));case 4:return U(e),y.f=!1,y.c=[],J(e,a.destroy(),12);case 12:if(n)return J(e,n.destroy(),13);e.C(13);break;case 13:_(e,0);break;case 3:if(b=ee(e),o)return J(e,o.ua.removeSegments(y.c,function(){}),15);e.C(15);break;case 15:throw p||b}var x,C,N,P,M,R,h,i,r,s,u,c,l,d,f})})))},Bu.prototype.getStoreInProgress=Bu.prototype.ug=function(){return this.f},Bu.prototype.remove=Bu.prototype.remove=function(e){return qu(this,(y=this,E=e,$(function e(){var f,p,m,g,v,b;return te(e,function(e){switch(e.o){case 1:return Wu(),null==(f=ps(E))||"manifest"!=f.a?e.return(Promise.reject(new Le(2,9,9004,E))):(p=f,m=new ns,L(e,2),J(e,m.init(),4));case 4:return J(e,is(m,p.Sa(),p.ua()),5);case 5:return J(e,(g=e.A).getManifests([p.key()]),6);case 6:return v=e.A,b=v[0],J(e,Promise.all([(l=y,d=b,h=m,$(function e(){return te(e,function(e){switch(e.o){case 1:return J(e,(r=l.b,a=l.a.drm,o=h,s=d,$(function e(){var t,n,i;return te(e,function(e){switch(e.o){case 1:return s.drmInfo?(t=function(e){var t=Array.from(e.a.keys());if(!t.length)throw new Le(2,9,9e3,"No supported storage mechanisms found");return e.a.get(t[0]).getEmeSessionCell()}(o),n=s.sessionIds.map(function(e){return{sessionId:e,keySystem:s.drmInfo.keySystem,licenseUri:s.drmInfo.licenseServerUri,serverCertificate:s.drmInfo.serverCertificate,audioCapabilities:Vu(s,!1),videoCapabilities:Vu(s,!0)}}),J(e,ws(a,r,n),2)):e.return();case 2:return i=e.A,J(e,t.remove(i),3);case 3:return J(e,t.add(n.filter(function(e){return-1==i.indexOf(e.sessionId)})),0)}})})),0)}var r,a,o,s})})),(n=y,i=g,r=p,o=function(e){var t=[];return e.periods.forEach(function(e){e.streams.forEach(function(e){null!=e.initSegmentKey&&t.push(e.initSegmentKey),e.segments.forEach(function(e){t.push(e.dataKey)})})}),t}(a=b),s=o.length+1,u=0,c=Ru(r,a),Promise.all([i.removeSegments(o,t),i.removeManifests([r.key()],t)]))]),2);case 2:return U(e),J(e,m.destroy(),8);case 8:_(e,0)}function t(){u+=1,n.a.offline.progressCallback(c,u/s)}var n,i,r,a,o,s,u,c,l,d,h})})));var y,E},Bu.prototype.removeEmeSessions=Bu.prototype.ih=function(){return qu(this,(d=this,$(function e(){var r,a,n,o,i,s,u,c,l;return te(e,function(e){switch(e.o){case 1:return Wu(),r=d.b,a=d.a.drm,n=new ns,o=!1,L(e,2),J(e,n.init(),4);case 4:for(i=[],t=function(e){return i.push(e)},n.a.forEach(function(e){t(e.getEmeSessionCell())}),s=Promise.resolve(),u={},c=Y(i),l=c.next();!l.done;u={dd:u.dd},l=c.next())u.dd=l.value,s=s.then(function(i){return function(){return $(function e(){var t,n;return te(e,function(e){switch(e.o){case 1:return J(e,i.dd.getAll(),2);case 2:return t=e.A,J(e,ws(a,r,t),3);case 3:return n=e.A,J(e,i.dd.remove(n),4);case 4:n.length!=t.length&&(o=!0),j(e)}})})}}(u));return J(e,s,2);case 2:return U(e),J(e,n.destroy(),6);case 6:_(e,3);break;case 3:return e.return(!o)}var t})})));var d},Bu.prototype.list=Bu.prototype.list=function(){return qu(this,$(function e(){var r,t,n;return te(e,function(e){switch(e.o){case 1:return Wu(),r=[],t=new ns,L(e,2),J(e,t.init(),4);case 4:return n=Promise.resolve(),i=function(i,t){n=n.then(function(){return $(function e(){return te(e,function(e){switch(e.o){case 1:return J(e,t.getAllManifests(),2);case 2:e.A.forEach(function(e,t){var n=Ru(new fs("manifest",i.Sa,i.ua,t),e);r.push(n)}),j(e)}})})})},t.a.forEach(function(e,n){e.getCells().forEach(function(e,t){i({Sa:n,ua:t},e)})}),J(e,n,2);case 2:return U(e),J(e,t.destroy(),6);case 6:_(e,3);break;case 3:return e.return(r)}var i})}))},Bu.deleteAll=function(){return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return t=new ns,L(e,2),J(e,t.erase(),2);case 2:return U(e),J(e,t.destroy(),5);case 5:_(e,0)}})})};var Yu=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function $u(){for(var e=0;e<Qu.length;++e)try{Qu[e].Kf()}catch(e){ne.ba("Error installing polyfill!",e)}}Bs.offline=Gu,O("shaka.polyfill.installAll",$u);var Ju,Zu,Qu=[];function ec(e,t){for(var n={priority:t=t||0,Kf:e},i=0;i<Qu.length;i++)if(Qu[i].priority<t)return void Qu.splice(i,0,n);Qu.push(n)}function tc(e){var t,n=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();"function"==typeof Event?t=new Event(n,e):(t=document.createEvent("Event")).initEvent(n,e.bubbles,e.cancelable),e.target.dispatchEvent(t)}function nc(e,t,n){if("input"==e)switch(this.type){case"range":e="change"}HTMLInputElement.prototype.originalAddEventListener.call(this,e,t,n)}function ic(){var i=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];return(t=i.apply(this,t)).abort=function(){},t}}function rc(e,t){ne.debug("PatchedMediaKeysApple.requestMediaKeySystemAccess");try{var n=new ac(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function ac(e,t){if(ne.debug("PatchedMediaKeysApple.MediaKeySystemAccess"),(this.keySystem=e).startsWith("com.apple.fps"))for(var n=Y(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{var a,o=!(i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label}),s=!1;if(r.audioCapabilities)for(var u=Y(r.audioCapabilities),c=u.next();!c.done;c=u.next()){(c=c.value).contentType&&(o=!0,a=c.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,a)&&(i.audioCapabilities.push(c),s=!0))}if(r.videoCapabilities)for(c=(r=Y(r.videoCapabilities)).next();!c.done;c=r.next())(u=c.value).contentType&&(o=!0,c=u.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,c)&&(i.videoCapabilities.push(u),s=!0));o||(s=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=s?i:null}if(i)return void(this.a=i)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function oc(e){ne.debug("PatchedMediaKeysApple.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&uc(t,null),delete this.mediaKeys,(this.mediaKeys=e)?uc(e,this):Promise.resolve()}function sc(e){ne.debug("PatchedMediaKeysApple.MediaKeys"),this.b=new WebKitMediaKeys(e),this.a=new et}function uc(e,t){if(e.a.Gb(),!t)return Promise.resolve();e.a.m(t,"webkitneedkey",lc);try{return Ha(t,HTMLMediaElement.HAVE_METADATA,e.a,function(){t.webkitSetMediaKeys(e.b)}),Promise.resolve()}catch(e){return Promise.reject(e)}}function cc(e){ne.debug("PatchedMediaKeysApple.MediaKeySession"),B.call(this),this.b=null,this.g=e,this.c=this.a=null,this.f=new et,this.sessionId="",this.expiration=NaN,this.closed=new Ue,this.keyStatuses=new hc}function lc(e){if(ne.debug("PatchedMediaKeysApple.onWebkitNeedKey_",e),e=new Uint8Array(e.initData),new DataView(e.buffer,e.byteOffset,e.byteLength).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Tt(e=Et(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=e,this.dispatchEvent(t)}function dc(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new F("keystatuseschange"))}function hc(){this.size=0,this.a=void 0}function fc(e,t){ne.debug("PatchedMediaKeysMs.requestMediaKeySystemAccess");try{var n=new pc(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function pc(e,t){ne.debug("PatchedMediaKeysMs.MediaKeySystemAccess"),this.keySystem=e;for(var n=!1,i=0;i<t.length;++i){var r=t[i],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var s=0;s<r.audioCapabilities.length;++s){var u,c=r.audioCapabilities[s];c.contentType&&(o=!0,u=c.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,u)&&(a.audioCapabilities.push(c),n=!0))}if(r.videoCapabilities)for(s=0;s<r.videoCapabilities.length;++s)(c=r.videoCapabilities[s]).contentType&&(o=!0,u=c.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,u)&&(a.videoCapabilities.push(c),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(n=!1),n)return void(this.a=a)}throw(n=Error("Unsupported keySystem")).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function mc(e){ne.debug("PatchedMediaKeysMs.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&vc(t,null),delete this.mediaKeys,(this.mediaKeys=e)?vc(e,this):Promise.resolve()}function gc(e){ne.debug("PatchedMediaKeysMs.MediaKeys"),this.b=new MSMediaKeys(e),this.a=new et}function vc(e,t){if(e.a.Gb(),!t)return Promise.resolve();e.a.m(t,"msneedkey",yc);try{return Ha(t,HTMLMediaElement.HAVE_METADATA,e.a,function(){t.msSetMediaKeys(e.b)}),Promise.resolve()}catch(e){return Promise.reject(e)}}function bc(e){ne.debug("PatchedMediaKeysMs.MediaKeySession"),B.call(this),this.c=null,this.g=e,this.b=this.a=null,this.f=new et,this.sessionId="",this.expiration=NaN,this.closed=new Ue,this.keyStatuses=new wc}function yc(e){var t;ne.debug("PatchedMediaKeysMs.onMsNeedKey_",e),e.initData&&((t=document.createEvent("CustomEvent")).initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",t.initData=function(e){if(!e)return e;var t=new Wi(e);if(t.data.length<=1)return e;e=[];for(var n={},i=(t=Y(t.data)).next();!i.done;n={Rc:n.Rc},i=t.next())n.Rc=i.value,e.some(function(t){return function(e){return kt.Xa(e,t.Rc)}}(n))||e.push(n.Rc);return kt.concat.apply(kt,x(e))}(e.initData).buffer,this.dispatchEvent(t))}function Ec(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new F("keystatuseschange"))}function wc(){this.size=0,this.a=void 0}function Tc(){return ne.debug("PatchedMediaKeysNop.requestMediaKeySystemAccess"),Promise.reject(Error("The key system specified is not supported."))}function Sc(e){return ne.debug("PatchedMediaKeysNop.setMediaKeys"),null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function Ac(){throw new TypeError("Illegal constructor.")}function Ic(){throw new TypeError("Illegal constructor.")}O("shaka.polyfill.register",ec),ec(function(){Fl()},-1),ec(function(){var e;h.Document&&((e=Element.prototype).requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,(e=Document.prototype).exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",tc),document.addEventListener("webkitfullscreenerror",tc),document.addEventListener("mozfullscreenchange",tc),document.addEventListener("mozfullscreenerror",tc),document.addEventListener("MSFullscreenChange",tc),document.addEventListener("MSFullscreenError",tc))}),ec(function(){ne.debug("IndexedDB.install");var t=!1;if(mt("CrKey"))ne.debug("Removing IndexedDB from ChromeCast"),t=!0;else try{h.indexedDB&&(t=!1)}catch(e){ne.debug("Removing IndexedDB due to an exception when accessing it"),t=!0}t&&delete h.indexedDB}),ec(function(){ne.debug("InputEvent.install"),mt("Trident/")&&!HTMLInputElement.prototype.originalAddEventListener&&(ne.info("Patching input event support on IE."),HTMLInputElement.prototype.originalAddEventListener=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=nc)}),ec(function(){navigator.languages||Object.defineProperty(navigator,"languages",{get:function(){return navigator.language?[navigator.language]:["en"]}})}),ec(function(){ne.debug("mathRound.install")}),ec(function(){ne.debug("MediaSource.install");var t,n,i,l,d,e=pt();h.MediaSource?h.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(ne.info("Patching Chromecast MSE bugs."),l=MediaSource.isTypeSupported,d=/^dv(?:h[e1]|a[v1])\./,MediaSource.isTypeSupported=function(e){for(var t=e.split(/ *; */),n=t[0],i={},r=1;r<t.length;++r){var a=(o=t[r].split("="))[0],o=o[1].replace(/"(.*)"/,"$1");i[a]=o}if(!(t=i.codecs))return l(e);var s=!1,u=!1;for(var c in e=t.split(",").filter(function(e){return d.test(e)&&(u=!0),/^(hev|hvc)1\.2/.test(e)&&(s=!0),!0}),u&&(s=!1),i.codecs=e.join(","),s&&(i.eotf="smpte2084"),i)n+="; "+c+'="'+i[c]+'"';return cast.__platform__.canDisplayType(n)}):e?(i=MediaSource.isTypeSupported,MediaSource.isTypeSupported=function(e){return"mp2t"!=e.split(/ *; */)[0].split("/")[1].toLowerCase()&&i(e)},e<=12?(ne.info("Patching Safari 11 & 12 MSE bugs."),ic(),n=SourceBuffer.prototype.remove,SourceBuffer.prototype.remove=function(e,t){return n.call(this,e,t-.001)}):(ne.info("Patching Safari 13 MSE bugs."),ic())):mt("Tizen 2")||mt("Tizen 3")||mt("Tizen 4")?(t=MediaSource.isTypeSupported,MediaSource.isTypeSupported=function(e){return"opus"!=ut(e)[0]&&t(e)}):ne.info("Using native MSE as-is."):ne.info("No MSE implementation available.")}),ac.prototype.createMediaKeys=function(){ne.debug("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var e=new sc(this.keySystem);return Promise.resolve(e)},ac.prototype.getConfiguration=function(){return ne.debug("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration"),this.a},sc.prototype.createSession=function(e){if(ne.debug("PatchedMediaKeysApple.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new cc(this.b)},sc.prototype.setServerCertificate=function(e){return ne.debug("PatchedMediaKeysApple.MediaKeys.setServerCertificate"),e&&new Uint8Array(e),Promise.resolve(!0)},D(cc,B),(n=cc.prototype).generateRequest=function(e,t){ne.debug("PatchedMediaKeysApple.MediaKeySession.generateRequest"),this.a=new Ue;try{this.b=this.g.createSession("video/mp4",new Uint8Array(t)),this.sessionId=this.b.sessionId||"",this.f.m(this.b,"webkitkeymessage",this.yh.bind(this)),this.f.m(this.b,"webkitkeyadded",this.wh.bind(this)),this.f.m(this.b,"webkitkeyerror",this.xh.bind(this)),dc(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},n.load=function(){return ne.debug("PatchedMediaKeysApple.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){ne.debug("PatchedMediaKeysApple.MediaKeySession.update"),this.c=new Ue;try{this.b.update(new Uint8Array(e))}catch(e){this.c.reject(e)}return this.c},n.close=function(){ne.debug("PatchedMediaKeysApple.MediaKeySession.close");try{this.b.close(),this.closed.resolve(),this.f.Gb()}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return ne.debug("PatchedMediaKeysApple.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.yh=function(e){ne.debug("PatchedMediaKeysApple.onWebkitKeyMessage_",e),this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new F("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.wh=function(e){ne.debug("PatchedMediaKeysApple.onWebkitKeyAdded_",e),this.c&&(dc(this,"usable"),this.c.resolve(),this.c=null)},n.xh=function(e){if(ne.debug("PatchedMediaKeysApple.onWebkitKeyError_",e),(e=Error("EME PatchedMediaKeysApple key error")).errorCode=this.b.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.c)this.c.reject(e),this.c=null;else switch(this.b.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:dc(this,"output-not-allowed");break;default:dc(this,"internal-error")}},(n=hc.prototype).forEach=function(e){this.a&&e(this.a,Ju)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=Ju;return!(!this.a||!kt.Xa(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},ec(function(){h.HTMLVideoElement&&h.WebKitMediaKeys&&(ne.info("Using Apple-prefixed EME"),Ju=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=oc,h.MediaKeys=sc,h.MediaKeySystemAccess=ac,navigator.requestMediaKeySystemAccess=rc)}),pc.prototype.createMediaKeys=function(){ne.debug("PatchedMediaKeysMs.MediaKeySystemAccess.createMediaKeys");var e=new gc(this.keySystem);return Promise.resolve(e)},pc.prototype.getConfiguration=function(){return ne.debug("PatchedMediaKeysMs.MediaKeySystemAccess.getConfiguration"),this.a},gc.prototype.createSession=function(e){if(ne.debug("PatchedMediaKeysMs.MediaKeys.createSession"),"temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new bc(this.b)},gc.prototype.setServerCertificate=function(){return ne.debug("PatchedMediaKeysMs.MediaKeys.setServerCertificate"),Promise.resolve(!1)},D(bc,B),(n=bc.prototype).generateRequest=function(e,t){ne.debug("PatchedMediaKeysMs.MediaKeySession.generateRequest"),this.a=new Ue;try{this.c=this.g.createSession("video/mp4",new Uint8Array(t),null),this.f.m(this.c,"mskeymessage",this.Tg.bind(this)),this.f.m(this.c,"mskeyadded",this.Rg.bind(this)),this.f.m(this.c,"mskeyerror",this.Sg.bind(this)),Ec(this,"status-pending")}catch(e){this.a.reject(e)}return this.a},n.load=function(){return ne.debug("PatchedMediaKeysMs.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},n.update=function(e){ne.debug("PatchedMediaKeysMs.MediaKeySession.update"),this.b=new Ue;try{this.c.update(new Uint8Array(e))}catch(e){this.b.reject(e)}return this.b},n.close=function(){ne.debug("PatchedMediaKeysMs.MediaKeySession.close");try{this.c.close(),this.closed.resolve(),this.f.Gb()}catch(e){this.closed.reject(e)}return this.closed},n.remove=function(){return ne.debug("PatchedMediaKeysMs.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},n.Tg=function(e){ne.debug("PatchedMediaKeysMs.onMsKeyMessage_",e),this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new F("message",{messageType:null==this.keyStatuses.a?"license-request":"license-renewal",message:e.message.buffer}))},n.Rg=function(e){ne.debug("PatchedMediaKeysMs.onMsKeyAdded_",e),this.a?(ne.debug("Simulating completion for a PR persistent license."),Ec(this,"usable"),this.a.resolve(),this.a=null):this.b&&(Ec(this,"usable"),this.b.resolve(),this.b=null)},n.Sg=function(e){if(ne.debug("PatchedMediaKeysMs.onMsKeyError_",e),(e=Error("EME PatchedMediaKeysMs key error")).errorCode=this.c.error,null!=this.a)this.a.reject(e),this.a=null;else if(null!=this.b)this.b.reject(e),this.b=null;else switch(this.c.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:Ec(this,"output-not-allowed");break;default:Ec(this,"internal-error")}},(n=wc.prototype).forEach=function(e){this.a&&e(this.a,Zu)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=Zu;return!(!this.a||!kt.Xa(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},ec(function(){!h.HTMLVideoElement||!h.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(ne.info("Using ms-prefixed EME v20140218"),Zu=new Uint8Array([0]).buffer,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=mc,h.MediaKeys=gc,h.MediaKeySystemAccess=pc,navigator.requestMediaKeySystemAccess=fc)}),Ac.prototype.createSession=function(){},Ac.prototype.setServerCertificate=function(){},Ic.prototype.getConfiguration=function(){},Ic.prototype.createMediaKeys=function(){},ec(function(){!h.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(ne.info("EME not available."),navigator.requestMediaKeySystemAccess=Tc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Sc,h.MediaKeys=Ac,h.MediaKeySystemAccess=Ic)},-10);var kc,xc="";function Cc(e){return xc?xc+e.charAt(0).toUpperCase()+e.slice(1):e}function Nc(e,t){ne.debug("PatchedMediaKeysWebkit.requestMediaKeySystemAccess");try{var n=new Mc(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Pc(e){ne.debug("PatchedMediaKeysWebkit.setMediaKeys");var t=this.mediaKeys;return t&&t!=e&&Lc(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Lc(e,this),Promise.resolve()}function Mc(e,t){ne.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess"),this.a=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(n=!(this.a="webkit-org.w3.clearkey"));for(var i=!1,r=(r=document.getElementsByTagName("video")).length?r[0]:document.createElement("video"),a=0;a<t.length;++a){var o=t[a],s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var c=0;c<o.audioCapabilities.length;++c){var l,d=o.audioCapabilities[c];d.contentType&&(u=!0,l=d.contentType.split(";")[0],r.canPlayType(l,this.a)&&(s.audioCapabilities.push(d),i=!0))}if(o.videoCapabilities)for(c=0;c<o.videoCapabilities.length;++c)(d=o.videoCapabilities[c]).contentType&&(u=!0,r.canPlayType(d.contentType,this.a)&&(s.videoCapabilities.push(d),i=!0));if(u||(i=r.canPlayType("video/mp4",this.a)||r.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.b=s)}throw n="org.w3.clearkey"!=e&&"com.widevine.alpha"!=e?"Unsupported keySystem":"None of the requested configurations were supported.",(n=Error(n)).name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Rc(e){ne.debug("PatchedMediaKeysWebkit.MediaKeys"),this.g=e,this.b=null,this.a=new et,this.c=[],this.f={}}function Lc(e,t){e.b=t,e.a.Gb();var n=xc;t&&(e.a.m(t,n+"needkey",e.Xg.bind(e)),e.a.m(t,n+"keymessage",e.Ch.bind(e)),e.a.m(t,n+"keyadded",e.Ah.bind(e)),e.a.m(t,n+"keyerror",e.Bh.bind(e)))}function Uc(e,t){var n=e.f[t];return n?(ne.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):(n=e.c.shift())?(n.sessionId=t,e.f[t]=n,ne.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",n),n):null}function _c(e,t,n){ne.debug("PatchedMediaKeysWebkit.MediaKeySession"),B.call(this),this.f=e,this.j=!1,this.a=this.b=null,this.c=t,this.g=n,this.sessionId="",this.expiration=NaN,this.closed=new Ue,this.keyStatuses=new Fc}function Oc(t,e,n){if(t.j)return Promise.reject(Error("The session is already initialized."));t.j=!0;try{var i,r,a="persistent-license"==t.g?n?new Uint8Array(Tt("LOAD_SESSION|"+n)):(i=Tt("PERSISTENT|"),(r=new Uint8Array(i.byteLength+e.byteLength)).set(new Uint8Array(i),0),r.set(new Uint8Array(e),i.byteLength),r):new Uint8Array(e)}catch(e){return Promise.reject(e)}t.b=new Ue;var o=Cc("generateKeyRequest");try{t.f[o](t.c,a)}catch(e){if("InvalidStateError"!=e.name)return t.b=null,Promise.reject(e);new Ne(function(){try{t.f[o](t.c,a)}catch(e){t.b.reject(e),t.b=null}}).R(.01)}return t.b}function Dc(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.a=t,e.dispatchEvent(new F("keystatuseschange"))}function Fc(){this.size=0,this.a=void 0}function jc(e){var t="picture-in-picture"==(e=e.target).webkitPresentationMode?(document.pictureInPictureElement=e,new Event("enterpictureinpicture")):(document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),new Event("leavepictureinpicture"));e.dispatchEvent(t)}function Kc(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Bc(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Gc(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function Vc(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function zc(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Hc(e,t,n){return new h.TextTrackCue(e,t,n)}function Wc(e,t,n){return new h.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}function qc(){}Mc.prototype.createMediaKeys=function(){ne.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var e=new Rc(this.a);return Promise.resolve(e)},Mc.prototype.getConfiguration=function(){return ne.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration"),this.b},(n=Rc.prototype).createSession=function(e){if(ne.debug("PatchedMediaKeysWebkit.MediaKeys.createSession"),"temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.b||document.createElement("video");return t.src||(t.src="about:blank"),e=new _c(t,this.g,e),this.c.push(e),e},n.setServerCertificate=function(){return ne.debug("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate"),Promise.resolve(!1)},n.Xg=function(e){ne.debug("PatchedMediaKeysWebkit.onWebkitNeedKey_",e);var t=document.createEvent("CustomEvent");t.initCustomEvent("encrypted",!1,!1,null),t.initDataType="cenc",e.initData instanceof ArrayBuffer?t.initData=e.initData:t.initData=e.initData.buffer,this.b.dispatchEvent(t)},n.Ch=function(e){ne.debug("PatchedMediaKeysWebkit.onWebkitKeyMessage_",e);var t=Uc(this,e.sessionId);t?(e=new F("message",{messageType:null==t.keyStatuses.a?"licenserequest":"licenserenewal",message:e.message}),ne.debug("PatchedMediaKeysWebkit.MediaKeySession.generated"),t.b&&(t.b.resolve(),t.b=null),t.dispatchEvent(e)):ne.error("Session not found",e.sessionId)},n.Ah=function(e){ne.debug("PatchedMediaKeysWebkit.onWebkitKeyAdded_",e),(e=Uc(this,e.sessionId))&&(ne.debug("PatchedMediaKeysWebkit.MediaKeySession.ready"),Dc(e,"usable"),e.a&&e.a.resolve(),e.a=null)},n.Bh=function(e){ne.debug("PatchedMediaKeysWebkit.onWebkitKeyError_",e);var t=Uc(this,e.sessionId);t&&t.handleError(e)},D(_c,B),(n=_c.prototype).handleError=function(e){ne.debug("PatchedMediaKeysWebkit.MediaKeySession.handleError",e);var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.b?(45==e.systemCode&&(t.message="Unsupported session type."),this.b.reject(t),this.b=null):e.sessionId&&this.a?(this.a.reject(t),this.a=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Dc(this,"output-restricted"):Dc(this,1==t?"expired":"internal-error"))},n.je=function(e,t){if(this.a)this.a.then(this.je.bind(this,e,t)).catch(this.je.bind(this,e,t));else{var n,i;this.a=e,i="webkit-org.w3.clearkey"==this.c?(n=yt(t),"oct"!=(i=JSON.parse(n)).keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),n=kt.Za(i.keys[0].k),kt.Za(i.keys[0].kid)):(n=new Uint8Array(t),null);var r=Cc("addKey");try{this.f[r](this.c,n,i,this.sessionId)}catch(e){this.a.reject(e),this.a=null}}},n.generateRequest=function(e,t){return ne.debug("PatchedMediaKeysWebkit.MediaKeySession.generateRequest"),Oc(this,t,null)},n.load=function(e){return ne.debug("PatchedMediaKeysWebkit.MediaKeySession.load"),"persistent-license"==this.g?Oc(this,null,e):Promise.reject(Error("Not a persistent session."))},n.update=function(e){ne.debug("PatchedMediaKeysWebkit.MediaKeySession.update",e);var t=new Ue;return this.je(t,e),t},n.close=function(){if(ne.debug("PatchedMediaKeysWebkit.MediaKeySession.close"),"persistent-license"!=this.g){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Cc("cancelKeyRequest");try{this.f[e](this.c,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},n.remove=function(){return ne.debug("PatchedMediaKeysWebkit.MediaKeySession.remove"),"persistent-license"!=this.g?Promise.reject(Error("Not a persistent session.")):this.close()},(n=Fc.prototype).forEach=function(e){this.a&&e(this.a,kc)},n.get=function(e){if(this.has(e))return this.a},n.has=function(e){var t=kc;return!(!this.a||!kt.Xa(new Uint8Array(e),new Uint8Array(t)))},n.entries=function(){},n.keys=function(){},n.values=function(){},ec(function(){if(!(!h.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)ne.info("Using webkit-prefixed EME v0.1b"),xc="webkit";else{if(!HTMLMediaElement.prototype.generateKeyRequest)return;ne.info("Using nonprefixed EME v0.1b")}kc=new Uint8Array([0]).buffer,navigator.requestMediaKeySystemAccess=Nc,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Pc,h.MediaKeys=Rc,h.MediaKeySystemAccess=Mc}}),ec(function(){var e;h.HTMLVideoElement&&((e=HTMLVideoElement.prototype).requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(ne.debug("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=Kc,Object.defineProperty(e,"disablePictureInPicture",{get:Gc,set:Vc,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Bc,document.addEventListener("webkitpresentationmodechanged",jc,!0)))}),ec(function(){var t;ne.debug("VideoPlayPromise.install"),h.HTMLMediaElement&&(t=HTMLMediaElement.prototype.play,HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e})}),ec(function(){var e;!h.HTMLVideoElement||!(e=HTMLVideoElement.prototype).getVideoPlaybackQuality&&"webkitDroppedFrameCount"in e&&(e.getVideoPlaybackQuality=zc)}),ec(function(){if(h.VTTCue)ne.info("Using native VTTCue.");else if(h.TextTrackCue){var e=TextTrackCue.length;if(3==e)ne.info("Using VTTCue polyfill from 3 argument TextTrackCue."),h.VTTCue=Hc;else if(6==e)ne.info("Using VTTCue polyfill from 6 argument TextTrackCue."),h.VTTCue=Wc;else{try{var t=!!Hc(1,2,"")}catch(e){t=!1}t&&(ne.info("Using VTTCue polyfill from 3 argument TextTrackCue."),h.VTTCue=Hc)}}else ne.error("VTTCue not available.")}),O("shaka.text.TtmlTextParser",qc),qc.prototype.parseInit=qc.prototype.parseInit=function(){},qc.prototype.parseMedia=qc.prototype.parseMedia=function(e,t){var n=yt(e),i=[],r=new DOMParser,a=null;if(""==n)return i;try{a=r.parseFromString(n,"text/xml")}catch(e){throw new Le(2,2,2005,"Failed to parse TTML.")}if(a){if(n=a.getElementsByTagName("parsererror")[0])throw new Le(2,2,2005,n.textContent);if(!(r=a.getElementsByTagName("tt")[0]))throw new Le(2,2,2005,"TTML does not contain <tt> tag.");var o=qi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","frameRate"),s=qi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),u=qi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),c=qi.getAttributeNS(r,"http://www.w3.org/ns/ttml#parameter","tickRate"),a=r.getAttribute("xml:space")||"default",n=r.getAttribute("tts:extent");if("default"!=a&&"preserve"!=a)throw new Le(2,2,2005,"Invalid xml:space value: "+a);a="default"==a,o=new gl(o,s,u,c),s=sl(r.getElementsByTagName("metadata")[0]),u=sl(r.getElementsByTagName("styling")[0]),c=sl(r.getElementsByTagName("layout")[0]);for(var l=[],d=0;d<c.length;d++){var h,f,p=c[d],m=u,g=n,v=new In,b=p.getAttribute("xml:id");b?(v.id=b,b=null,g&&(b=$c.exec(g)||Zc.exec(g)),g=b?Number(b[1]):null,b=b?Number(b[2]):null,!(h=dl(p,m,"extent"))||null!=(h=(f=$c.exec(h))||Zc.exec(h))&&(v.width=null!=g?100*Number(h[1])/g:Number(h[1]),v.height=null!=b?100*Number(h[2])/b:Number(h[2]),v.widthUnits=f||null!=g?kn:0,v.heightUnits=f||null!=b?kn:0),!(p=dl(p,m,"origin"))||null!=(h=(f=$c.exec(p))||Zc.exec(p))&&(v.viewportAnchorX=null!=b?100*Number(h[1])/b:Number(h[1]),v.viewportAnchorY=null!=g?100*Number(h[2])/g:Number(h[2]),v.viewportAnchorUnits=f||null!=g?kn:0)):(ne.u("TtmlTextParser parser encountered a region with no id. Region will be ignored."),v=null),v&&l.push(v)}for(n=function e(t){if(!t)return[];var n=[];t=Y(t.childNodes);for(var i=t.next();!i.done;i=t.next())i=i.value,i instanceof Element&&(i.hasAttribute("begin")?n.push(i):n=n.concat(e(i)));return n}(r.getElementsByTagName("body")[0]),r=(n=Y(n)).next();!r.done;r=n.next())(r=ul(r.value,t.periodStart,o,s,u,c,l,a,!1))&&i.push(r)}return i};var Xc,Yc,$c=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,Jc=/^(\d+px|\d+em)$/,Zc=/^(\d+)px (\d+)px$/,Qc=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,el=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,tl=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,nl=/^(\d*(?:\.\d*)?)f$/,il=/^(\d*(?:\.\d*)?)t$/,rl=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,al={left:En,center:"center",right:"end",start:En,end:"end"},ol={left:"line-left",center:"center",right:"line-right"};function sl(e){var t=[];if(!e)return t;for(var n=Y(e.childNodes),i=n.next();!i.done;i=n.next())(i=i.value).nodeType==Node.ELEMENT_NODE&&"br"!==i.nodeName&&(i=sl(i),t=t.concat(i));return t.length||t.push(e),t}function ul(e,t,n,i,r,a,o,s,u){if(u&&"br"==e.nodeName)return(e=new dn(0,0,"")).spacer=!0,e;var c=/^[\s\n]*$/.test(e.textContent),l=e.nodeType==Node.ELEMENT_NODE&&!e.hasAttribute("begin")&&!e.hasAttribute("end");if(e.nodeType!=Node.ELEMENT_NODE||l&&c||l&&!u)return null;c=pl(e.getAttribute("begin"),n),l=pl(e.getAttribute("end"),n);var d,h=pl(e.getAttribute("dur"),n);if(null==l&&null!=h&&(l=c+h),!u&&(null==c||null==l))throw new Le(2,2,2001);if(c=u&&null==c?0:c+t,l=u&&null==l?0:l+t,h="",u=[],Array.from(e.childNodes).find(function(e){return e.nodeType===Node.TEXT_NODE&&/\S+/.test(e.textContent)}))h=function e(t,n){for(var i="",r=Y(t.childNodes),a=r.next();!a.done;a=r.next())"br"==(a=a.value).nodeName&&t.childNodes[0]!==a?i+="\n":a.childNodes&&0<a.childNodes.length?i+=e(a,n):i+=n?a=(a=a.textContent.trim()).replace(/\s+/g," "):a.textContent;return i}(e,s);else for(var f=Y(e.childNodes),p=f.next();!p.done;p=f.next())(p=ul(p.value,t,n,i,r,a,o,s,!0))&&(p.startTime=p.startTime||c,p.endTime=p.endTime||l,u.push(p));return(t=new dn(c,l,h)).nestedCues=u,(a=fl(e,"region",a,"")[0])&&a.getAttribute("xml:id")&&(d=a.getAttribute("xml:id"),t.region=o.filter(function(e){return e.id==d})[0]),function(e,t,n,i,r){"rtl"==ll(t,n,r,"direction")&&(e.direction="rtl");var a=ll(t,n,r,"writingMode");"tb"==a||"tblr"==a?e.writingMode="vertical-lr":"tbrl"==a?e.writingMode="vertical-rl":"rltb"==a||"rl"==a?e.direction="rtl":a&&(e.direction=vn),(a=ll(t,n,r,"textAlign"))?(e.positionAlign=ol[a],e.lineAlign=al[a],e.textAlign=pn[a.toUpperCase()]):e.textAlign="start",(a=ll(t,n,r,"displayAlign"))&&(e.displayAlign=gn[a.toUpperCase()]);(a=ll(t,n,r,"color"))&&(e.color=a);(a=ll(t,n,r,"backgroundColor"))&&(e.backgroundColor=a);(a=ll(t,n,r,"fontFamily"))&&(e.fontFamily=a);(a=ll(t,n,r,"fontWeight"))&&"bold"==a&&(e.fontWeight=700),(a=ll(t,n,r,"wrapOption"))&&"noWrap"==a&&(e.wrapLine=!1),(a=ll(t,n,r,"lineHeight"))&&a.match(Jc)&&(e.lineHeight=a),(a=ll(t,n,r,"fontSize"))&&a.match(Jc)&&(e.fontSize=a),(a=ll(t,n,r,"fontStyle"))&&(e.fontStyle=An[a.toUpperCase()]);{var o;i&&(a=i.getAttribute("imagetype"),o=i.getAttribute("encoding"),i=i.textContent.trim(),"PNG"==a&&"Base64"==o&&i&&(e.backgroundImage="data:image/png;base64,"+i))}(n=dl(n,r,"textDecoration"))&&cl(e,n),(t=hl(t,r,"textDecoration"))&&cl(e,t)}(t,e,a,i=fl(e,"smpte:backgroundImage",i,"#")[0],r),t}function cl(e,t){for(var n=t.split(" "),i=0;i<n.length;i++)switch(n[i]){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&Ve(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Ve(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Ve(e.textDecoration,"overline")}}function ll(e,t,n,i){return(e=hl(e,n,i))?e:dl(t,n,i)}function dl(e,t,n){for(var i=sl(e),r=0;r<i.length;r++){var a=qi.getAttributeNS(i[r],"http://www.w3.org/ns/ttml#styling",n);if(a)return a}return(e=fl(e,"style",t,"")[0])?qi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n):null}function hl(e,t,n){var i=qi.getAttributeNS(e,"http://www.w3.org/ns/ttml#styling",n);if(i)return i;for(e=fl(e,"style",t,""),t=null,i=0;i<e.length;i++){var r=qi.getAttributeNS(e[i],"http://www.w3.org/ns/ttml#styling",n);r&&(t=r)}return t}function fl(e,t,n,i){var r=[];if(!e||n.length<1)return r;var a=e;for(e=null;a&&!(e=a.getAttribute(t))&&(a=a.parentNode)instanceof Element;);if(t=e)for(e=(t=Y(t=t.split(" "))).next();!e.done;e=t.next()){e=e.value;for(var o=(a=Y(n)).next();!o.done;o=a.next())if(i+(o=o.value).getAttribute("xml:id")==e){r.push(o);break}}return r}function pl(e,t){var n,i,r,a,o=null;return Qc.test(e)?(o=Qc.exec(e),n=Number(o[1]),i=Number(o[2]),r=Number(o[3]),a=Number(o[4]),o=(r+=(a+=(Number(o[5])||0)/t.b)/t.frameRate)+60*i+3600*n):el.test(e)?o=ml(el,e):tl.test(e)?o=ml(tl,e):nl.test(e)?(o=nl.exec(e),o=Number(o[1])/t.frameRate):il.test(e)?(o=il.exec(e),o=Number(o[1])/t.a):rl.test(e)&&(o=ml(rl,e)),o}function ml(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function gl(e,t,n,i){this.frameRate=Number(e)||30,this.b=Number(t)||1,this.a=Number(i),0==this.a&&(this.a=e?this.frameRate*this.b:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}function vl(){this.a=new qc}function bl(){}function yl(e,t,n){var i,r,a,o;if(i=/^align:(start|middle|center|end|left|right)$/.exec(t))t=i[1],e.textAlign="middle"==t?fn:pn[t.toUpperCase()];else if(i=/^vertical:(lr|rl)$/.exec(t))e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl";else if(i=/^size:([\d.]+)%$/.exec(t))e.size=Number(i[1]);else if(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center");else{if(!(i=/^region:(.*)$/.exec(t))){e:{if(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=wn[n[2].toUpperCase()]);else{if(!(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))){e=!1;break e}e.lineInterpretation=yn,e.line=Number(n[1]),n[2]&&(e.lineAlign=wn[n[2].toUpperCase()])}e=!0}return e}r=n,a=i[1],(t=(o=r.filter(function(e){return e.id==a})).length?o[0]:(ne.u("VTT parser could not find a region with id: ",a," The region will be ignored."),null))&&(e.region=t)}return 1}function El(e){if(null==(e=Vr(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function wl(){this.a=null}function Tl(e,t,n){var i,r,a;return(new Ki).P("payl",Vi(function(e){i=yt(e)})).P("iden",Vi(function(e){r=yt(e)})).P("sttg",Vi(function(e){a=yt(e)})).parse(e),i?function(e,t,n,i,r){if(e=new dn(i,r,e),t&&(e.id=t),n)for(t=new Br(n),n=zr(t);n;)yl(e,n,[])||ne.u("VTT parser encountered an invalid VTT setting: ",n," The setting will be ignored."),Gr(t),n=zr(t);return e}(i,r,a,t,n):null}function Sl(e){return document.createElement(e)}function Al(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Il(){}function kl(){Xc?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Xc=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=xl):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function xl(n,i){var r=this;return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return console.assert(r==navigator,'bad "this" for requestMediaKeySystemAccess'),J(e,Xc.call(r,n,i),2);case 2:return Ol(t=e.A)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Xc,e.return(t)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Cl,e.return(Cl.call(r,n,i)))}})})}function Cl(d,h){var f=this;return $(function e(){var i,r,a,o,s,u,c,l;return te(e,function(e){switch(e.o){case 1:console.assert(f==navigator,'bad "this" for requestMediaKeySystemAccess'),i=_l(d),r=[];for(var t=Y(h),n=t.next();!n.done;n=t.next())a=n.value,o=Nl(a.videoCapabilities,i),s=Nl(a.audioCapabilities,i),a.videoCapabilities&&a.videoCapabilities.length&&!o.length||a.audioCapabilities&&a.audioCapabilities.length&&!s.length||((u=Object.assign({},a)).videoCapabilities=o,u.audioCapabilities=s,r.push(u));if(!r.length)throw(c=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c;return J(e,Xc.call(f,d,r),2);case 2:return l=e.A,e.return(new Ul(l,i))}})})}function Nl(e,t){return e?e.filter(function(e){return!e.encryptionScheme||e.encryptionScheme==t}):e}function Pl(){}function Ml(){navigator.mediaCapabilities?(Yc=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Rl):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Rl(n){var i=this;return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:return console.assert(i==navigator.mediaCapabilities,'bad "this" for decodingInfo'),J(e,Yc.call(i,n),2);case 2:return(t=e.A,n.keySystemConfiguration)?Ol(t.keySystemAccess)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Yc,e.return(t)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Ll,e.return(Ll.call(i,n))):e.return(t)}})})}function Ll(u){var c=this;return $(function e(){var t,n,i,r,a,o,s;return te(e,function(e){switch(e.o){case 1:return console.assert(c==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,u.keySystemConfiguration&&(n=u.keySystemConfiguration,i=n.keySystem,r=n.audio&&n.audio.encryptionScheme,a=n.video&&n.video.encryptionScheme,t=_l(i),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:u},r&&r!=t||a&&a!=t)?e.return(o):J(e,Yc.call(c,u),2);case 2:return(s=e.A).keySystemAccess&&(s.keySystemAccess=new Ul(s.keySystemAccess,t)),e.return(s)}})})}function Ul(e,t){this.b=e,this.a=t,this.keySystem=e.keySystem}function _l(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function Ol(e){var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function Dl(){}function Fl(){kl(),Ml()}Nn["application/ttml+xml"]=qc,O("shaka.text.Mp4TtmlParser",vl),vl.prototype.parseInit=vl.prototype.parseInit=function(e){var t=!1;if((new Ki).P("moov",Bi).P("trak",Bi).P("mdia",Bi).P("minf",Bi).P("stbl",Bi).za("stsd",Gi).P("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new Le(2,2,2007)},vl.prototype.parseMedia=vl.prototype.parseMedia=function(e,t){var n=!1,i=[];if((new Ki).P("mdat",Vi(function(e){n=!0,i=i.concat(this.a.parseMedia(e,t))}.bind(this))).parse(e),!n)throw new Le(2,2,2007);return i},Nn['application/mp4; codecs="stpp"']=vl,Nn['application/mp4; codecs="stpp.ttml.im1t"']=vl,Nn['application/mp4; codecs="stpp.TTML.im1t"']=vl,O("shaka.text.VttTextParser",bl),bl.prototype.parseInit=bl.prototype.parseInit=function(){},bl.prototype.parseMedia=bl.prototype.parseMedia=function(e,t){var n=yt(e);if(n=(n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Le(2,2,2e3);var i=t.segmentStart;if(null==i&&n[i=0].includes("X-TIMESTAMP-MAP")){var r=n[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=n[0].match(/MPEGTS:(\d+)/m);if(r&&a){if(null==(i=El(new Br(r[1]))))throw new Le(2,2,2e3);i=t.periodStart+(Number(a[1])/9e4-i)}}a=[];for(var o=n[0].split("\n"),r=1;r<o.length;r++)if(/^Region:/.test(o[r])){var s=new Br(o[r]),u=new In;zr(s),Gr(s);for(var c,l=zr(s);l;){e:{var d=u,h=l;if(c=/^id=(.*)$/.exec(h))d.id=c[1];else if(c=/^width=(\d{1,2}|100)%$/.exec(h))d.width=Number(c[1]);else if(c=/^lines=(\d+)$/.exec(h))d.height=Number(c[1]),d.heightUnits=2;else if(c=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))d.regionAnchorX=Number(c[1]),d.regionAnchorY=Number(c[2]);else if(c=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(h))d.viewportAnchorX=Number(c[1]),d.viewportAnchorY=Number(c[2]);else{if(!/^scroll=up$/.exec(h)){c=!1;break e}d.scroll="up"}c=!0}c||ne.u("VTT parser encountered an invalid VTTRegion setting: ",l," The setting will be ignored."),Gr(s),l=zr(s)}a.push(u)}for(r=[],s=1;s<n.length;s++){if(c=o=n[s].split("\n"),d=i,o=a,1==c.length&&!c[0]||/^NOTE($|[ \t])/.test(c[0])||"STYLE"==c[0])o=null;else{u=null,c[0].includes("--\x3e")||(u=c[0],c.splice(0,1)),h=El(l=new Br(c[0]));var f=Vr(l,/[ \t]+--\x3e[ \t]+/g),p=El(l);if(null==h||null==f||null==p)throw new Le(2,2,2001);for(c=new dn(h+d,p+d,c.slice(1).join("\n").trim()),Gr(l),d=zr(l);d;)yl(c,d,o)||ne.u("VTT parser encountered an invalid VTT setting: ",d," The setting will be ignored."),Gr(l),d=zr(l);null!=u&&(c.id=u),o=c}o&&r.push(o)}return r},Nn["text/vtt"]=bl,Nn['text/vtt; codecs="vtt"']=bl,O("shaka.text.Mp4VttParser",wl),wl.prototype.parseInit=wl.prototype.parseInit=function(e){var t=!1;if((new Ki).P("moov",Bi).P("trak",Bi).P("mdia",Bi).za("mdhd",function(e){0==e.version?(e.reader.V(4),e.reader.V(4),this.a=e.reader.M(),e.reader.V(4)):(e.reader.V(8),e.reader.V(8),this.a=e.reader.M(),e.reader.V(8)),e.reader.V(4)}.bind(this)).P("minf",Bi).P("stbl",Bi).za("stsd",Gi).P("wvtt",function(){t=!0}).parse(e),!this.a)throw new Le(2,2,2008);if(!t)throw new Le(2,2,2008)},wl.prototype.parseMedia=wl.prototype.parseMedia=function(e,s){var u=this;if(!this.a)throw ne.error("No init segment for MP4+VTT!"),new Le(2,2,2008);var t,c=0,l=[],d=[],n=!1,h=!1,i=!1,f=null;if((new Ki).P("moof",Bi).P("traf",Bi).za("tfdt",function(e){n=!0,c=0==e.version?e.reader.M():e.reader.dc()}).za("tfhd",function(e){var t=e.flags;(e=e.reader).V(4),1&t&&e.V(8),2&t&&e.V(4),f=8&t?e.M():null}).za("trun",function(e){h=!0;var t=e.version,n=e.flags,i=(e=e.reader).M();1&n&&e.V(4),4&n&&e.V(4);for(var r=[],a=0;a<i;a++){var o={duration:null,sampleSize:null,le:null};256&n&&(o.duration=e.M()),512&n&&(o.sampleSize=e.M()),1024&n&&e.V(4),2048&n&&(o.le=0==t?e.M():e.kf()),r.push(o)}l=r}).P("mdat",Vi(function(e){i=!0,t=e})).parse(e),!i&&!n&&!h)throw new Le(2,2,2008);var p=c,m=new Di(new DataView(t.buffer,t.byteOffset,t.byteLength),0);return l.forEach(function(e){var t=e.duration||f,n=e.le?c+e.le:p;p=n+(t||0);var i=0;do{var r=m.M();i+=r;var a=m.M(),o=null;"vttc"==(a=Hi(a))?8<r&&(o=m.Fb(r-8)):("vtte"!=a&&ne.error("Unknown box "+a+"! Skipping!"),m.V(r-8)),t?o&&d.push(Tl(o,s.periodStart+n/u.a,s.periodStart+p/u.a)):ne.error("WVTT sample duration unknown, and no default found!")}while(e.sampleSize&&i<e.sampleSize)}),d.filter(nn.jb)},Nn['application/mp4; codecs="wvtt"']=wl,O("shaka.util.Dom.createHTMLElement",Sl),O("shaka.util.Dom.createVideoElement",function(){var e=document.createElement("video");return e.muted=!0,e.width=600,e.height=400,e}),O("shaka.util.Dom.asHTMLElement",function(e){return e}),O("shaka.util.Dom.asHTMLMediaElement",function(e){return e}),O("shaka.util.Dom.removeAllChildren",Al),O("EmeEncryptionSchemePolyfill",Il),Il.install=kl,O("McEncryptionSchemePolyfill",Pl),Pl.install=Ml,Ul.prototype.getConfiguration=function(){var e=this.b.getConfiguration();if(e.videoCapabilities)for(var t=Y(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.a;if(e.audioCapabilities)for(n=(t=Y(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.a;return e},Ul.prototype.createMediaKeys=function(){return this.b.createMediaKeys()},O("EncryptionSchemePolyfills",Dl),Dl.install=Fl,void 0!==t&&t.Rf&&(t.Rf=Dl);for(var jl={ach:{h:"Lwo",i:"Acholi"},ady:{h:"",i:"Adyghe"},af:{h:"Afrikaans",i:"Afrikaans"},"af-NA":{h:"Afrikaans (Namibia)",i:"Afrikaans (Namibia)"},"af-ZA":{h:"Afrikaans (South Africa)",i:"Afrikaans (South Africa)"},ak:{h:"Ti",i:"Akan"},ar:{h:"",i:"Arabic"},"ar-AR":{h:"",i:"Arabic"},"ar-MA":{h:"",i:"Arabic (Morocco)"},"ar-SA":{h:" ()",i:"Arabic (Saudi Arabia)"},"ay-BO":{h:"Aymar aru",i:"Aymara"},az:{h:"Azrbaycan dili",i:"Azerbaijani"},"az-AZ":{h:"Azrbaycan dili",i:"Azerbaijani"},"be-BY":{h:"",i:"Belarusian"},bg:{h:"",i:"Bulgarian"},"bg-BG":{h:"",i:"Bulgarian"},bn:{h:"",i:"Bengali"},"bn-IN":{h:" ()",i:"Bengali (India)"},"bn-BD":{h:"()",i:"Bengali (Bangladesh)"},"bs-BA":{h:"Bosanski",i:"Bosnian"},ca:{h:"Catal",i:"Catalan"},"ca-ES":{h:"Catal",i:"Catalan"},cak:{h:"Maya Kaqchikel",i:"Kaqchikel"},"ck-US":{h:" (tsalagi)",i:"Cherokee"},cs:{h:"etina",i:"Czech"},"cs-CZ":{h:"etina",i:"Czech"},cy:{h:"Cymraeg",i:"Welsh"},"cy-GB":{h:"Cymraeg",i:"Welsh"},da:{h:"Dansk",i:"Danish"},"da-DK":{h:"Dansk",i:"Danish"},de:{h:"Deutsch",i:"German"},"de-AT":{h:"Deutsch (sterreich)",i:"German (Austria)"},"de-DE":{h:"Deutsch (Deutschland)",i:"German (Germany)"},"de-CH":{h:"Deutsch (Schweiz)",i:"German (Switzerland)"},dsb:{h:"Dolnoserbina",i:"Lower Sorbian"},el:{h:"",i:"Greek"},"el-GR":{h:"",i:"Greek (Greece)"},en:{h:"English",i:"English"},"en-GB":{h:"English (UK)",i:"English (UK)"},"en-AU":{h:"English (Australia)",i:"English (Australia)"},"en-CA":{h:"English (Canada)",i:"English (Canada)"},"en-IE":{h:"English (Ireland)",i:"English (Ireland)"},"en-IN":{h:"English (India)",i:"English (India)"},"en-PI":{h:"English (Pirate)",i:"English (Pirate)"},"en-UD":{h:"English (Upside Down)",i:"English (Upside Down)"},"en-US":{h:"English (US)",i:"English (US)"},"en-ZA":{h:"English (South Africa)",i:"English (South Africa)"},"en@pirate":{h:"English (Pirate)",i:"English (Pirate)"},eo:{h:"Esperanto",i:"Esperanto"},"eo-EO":{h:"Esperanto",i:"Esperanto"},es:{h:"Espaol",i:"Spanish"},"es-AR":{h:"Espaol (Argentine)",i:"Spanish (Argentina)"},"es-419":{h:"Espaol (Latinoamrica)",i:"Spanish (Latin America)"},"es-CL":{h:"Espaol (Chile)",i:"Spanish (Chile)"},"es-CO":{h:"Espaol (Colombia)",i:"Spanish (Colombia)"},"es-EC":{h:"Espaol (Ecuador)",i:"Spanish (Ecuador)"},"es-ES":{h:"Espaol (Espaa)",i:"Spanish (Spain)"},"es-LA":{h:"Espaol (Latinoamrica)",i:"Spanish (Latin America)"},"es-NI":{h:"Espaol (Nicaragua)",i:"Spanish (Nicaragua)"},"es-MX":{h:"Espaol (Mxico)",i:"Spanish (Mexico)"},"es-US":{h:"Espaol (Estados Unidos)",i:"Spanish (United States)"},"es-VE":{h:"Espaol (Venezuela)",i:"Spanish (Venezuela)"},et:{h:"eesti keel",i:"Estonian"},"et-EE":{h:"Eesti (Estonia)",i:"Estonian (Estonia)"},eu:{h:"Euskara",i:"Basque"},"eu-ES":{h:"Euskara",i:"Basque"},fa:{h:"",i:"Persian"},"fa-IR":{h:"",i:"Persian"},"fb-LT":{h:"Leet Speak",i:"Leet"},ff:{h:"Fulah",i:"Fulah"},fi:{h:"Suomi",i:"Finnish"},"fi-FI":{h:"Suomi",i:"Finnish"},"fo-FO":{h:"Froyskt",i:"Faroese"},fr:{h:"Franais",i:"French"},"fr-CA":{h:"Franais (Canada)",i:"French (Canada)"},"fr-FR":{h:"Franais (France)",i:"French (France)"},"fr-BE":{h:"Franais (Belgique)",i:"French (Belgium)"},"fr-CH":{h:"Franais (Suisse)",i:"French (Switzerland)"},"fy-NL":{h:"Frysk",i:"Frisian (West)"},ga:{h:"Gaeilge",i:"Irish"},"ga-IE":{h:"Gaeilge (Gaelic)",i:"Irish (Gaelic)"},gl:{h:"Galego",i:"Galician"},"gl-ES":{h:"Galego",i:"Galician"},"gn-PY":{h:"Avae'",i:"Guarani"},"gu-IN":{h:"",i:"Gujarati"},"gx-GR":{h:" ",i:"Classical Greek"},he:{h:"",i:"Hebrew"},"he-IL":{h:"",i:"Hebrew"},hi:{h:"",i:"Hindi"},"hi-IN":{h:"",i:"Hindi"},hr:{h:"Hrvatski",i:"Croatian"},"hr-HR":{h:"Hrvatski",i:"Croatian"},hsb:{h:"Hornjoserbina",i:"Upper Sorbian"},ht:{h:"Kreyl",i:"Haitian Creole"},hu:{h:"Magyar",i:"Hungarian"},"hu-HU":{h:"Magyar",i:"Hungarian"},"hy-AM":{h:"",i:"Armenian"},id:{h:"Bahasa Indonesia",i:"Indonesian"},"id-ID":{h:"Bahasa Indonesia",i:"Indonesian"},is:{h:"slenska",i:"Icelandic"},"is-IS":{h:"slenska (Iceland)",i:"Icelandic (Iceland)"},it:{h:"Italiano",i:"Italian"},"it-IT":{h:"Italiano",i:"Italian"},ja:{h:"",i:"Japanese"},"ja-JP":{h:"",i:"Japanese"},"jv-ID":{h:"Basa Jawa",i:"Javanese"},"ka-GE":{h:"",i:"Georgian"},"kk-KZ":{h:"",i:"Kazakh"},km:{h:"",i:"Khmer"},"km-KH":{h:"",i:"Khmer"},kab:{h:"Taqbaylit",i:"Kabyle"},kn:{h:"",i:"Kannada"},"kn-IN":{h:" (India)",i:"Kannada (India)"},ko:{h:"",i:"Korean"},"ko-KR":{h:" ()",i:"Korean (Korea)"},ku:{h:"Kurd",i:"Kurdish"},"ku-TR":{h:"Kurd",i:"Kurdish"},la:{h:"Latin",i:"Latin"},"la-VA":{h:"Latin",i:"Latin"},lb:{h:"Ltzebuergesch",i:"Luxembourgish"},"li-NL":{h:"Lmbrgs",i:"Limburgish"},lt:{h:"Lietuvi",i:"Lithuanian"},"lt-LT":{h:"Lietuvi",i:"Lithuanian"},lv:{h:"Latvieu",i:"Latvian"},"lv-LV":{h:"Latvieu",i:"Latvian"},mai:{h:", ",i:"Maithili"},"mg-MG":{h:"Malagasy",i:"Malagasy"},mk:{h:"",i:"Macedonian"},"mk-MK":{h:" ()",i:"Macedonian (Macedonian)"},ml:{h:"",i:"Malayalam"},"ml-IN":{h:"",i:"Malayalam"},"mn-MN":{h:"",i:"Mongolian"},mr:{h:"",i:"Marathi"},"mr-IN":{h:"",i:"Marathi"},ms:{h:"Bahasa Melayu",i:"Malay"},"ms-MY":{h:"Bahasa Melayu",i:"Malay"},mt:{h:"Malti",i:"Maltese"},"mt-MT":{h:"Malti",i:"Maltese"},my:{h:"",i:"Burmese"},nb:{h:"Norsk (bokml)",i:"Norwegian (bokmal)"},"nb-NO":{h:"Norsk (bokml)",i:"Norwegian (bokmal)"},ne:{h:"",i:"Nepali"},"ne-NP":{h:"",i:"Nepali"},nl:{h:"Nederlands",i:"Dutch"},"nl-BE":{h:"Nederlands (Belgi)",i:"Dutch (Belgium)"},"nl-NL":{h:"Nederlands (Nederland)",i:"Dutch (Netherlands)"},"nn-NO":{h:"Norsk (nynorsk)",i:"Norwegian (nynorsk)"},no:{h:"Norsk",i:"Norwegian"},oc:{h:"Occitan",i:"Occitan"},"or-IN":{h:"",i:"Oriya"},pa:{h:"",i:"Punjabi"},"pa-IN":{h:" ( )",i:"Punjabi (India)"},pl:{h:"Polski",i:"Polish"},"pl-PL":{h:"Polski",i:"Polish"},"ps-AF":{h:"",i:"Pashto"},pt:{h:"Portugus",i:"Portuguese"},"pt-BR":{h:"Portugus (Brasil)",i:"Portuguese (Brazil)"},"pt-PT":{h:"Portugus (Portugal)",i:"Portuguese (Portugal)"},"qu-PE":{h:"Qhichwa",i:"Quechua"},"rm-CH":{h:"Rumantsch",i:"Romansh"},ro:{h:"Romn",i:"Romanian"},"ro-RO":{h:"Romn",i:"Romanian"},ru:{h:"",i:"Russian"},"ru-RU":{h:"",i:"Russian"},"sa-IN":{h:"",i:"Sanskrit"},"se-NO":{h:"Davvismegiella",i:"Northern Smi"},"si-LK":{h:"",i:"Sinhala (Sri Lanka)"},sk:{h:"Slovenina",i:"Slovak"},"sk-SK":{h:"Slovenina (Slovakia)",i:"Slovak (Slovakia)"},sl:{h:"Slovenina",i:"Slovenian"},"sl-SI":{h:"Slovenina",i:"Slovenian"},"so-SO":{h:"Soomaaliga",i:"Somali"},sq:{h:"Shqip",i:"Albanian"},"sq-AL":{h:"Shqip",i:"Albanian"},sr:{h:"",i:"Serbian"},"sr-RS":{h:" (Serbia)",i:"Serbian (Serbia)"},su:{h:"Basa Sunda",i:"Sundanese"},sv:{h:"Svenska",i:"Swedish"},"sv-SE":{h:"Svenska",i:"Swedish"},sw:{h:"Kiswahili",i:"Swahili"},"sw-KE":{h:"Kiswahili",i:"Swahili (Kenya)"},ta:{h:"",i:"Tamil"},"ta-IN":{h:"",i:"Tamil"},te:{h:"",i:"Telugu"},"te-IN":{h:"",i:"Telugu"},tg:{h:" ",i:"Tajik"},"tg-TJ":{h:"",i:"Tajik"},th:{h:"",i:"Thai"},"th-TH":{h:" ()",i:"Thai (Thailand)"},tl:{h:"Filipino",i:"Filipino"},"tl-PH":{h:"Filipino",i:"Filipino"},tlh:{h:"tlhIngan-Hol",i:"Klingon"},tr:{h:"Trke",i:"Turkish"},"tr-TR":{h:"Trke",i:"Turkish"},"tt-RU":{h:"",i:"Tatar"},uk:{h:"",i:"Ukrainian"},"uk-UA":{h:"",i:"Ukrainian"},ur:{h:"",i:"Urdu"},"ur-PK":{h:"",i:"Urdu"},uz:{h:"O'zbek",i:"Uzbek"},"uz-UZ":{h:"O'zbek",i:"Uzbek"},vi:{h:"Ting Vit",i:"Vietnamese"},"vi-VN":{h:"Ting Vit",i:"Vietnamese"},"xh-ZA":{h:"isiXhosa",i:"Xhosa"},yi:{h:"",i:"Yiddish"},"yi-DE":{h:" (German)",i:"Yiddish (German)"},zh:{h:"",i:"Chinese"},"zh-HANS":{h:"",i:"Chinese Simplified"},"zh-HANT":{h:"",i:"Chinese Traditional"},"zh-CN":{h:"",i:"Chinese Simplified (China)"},"zh-HK":{h:"",i:"Chinese Traditional (Hong Kong)"},"zh-SG":{h:"",i:"Chinese Simplified (Singapore)"},"zh-TW":{h:"",i:"Chinese Traditional (Taiwan)"},"zu-ZA":{h:"isiZulu",i:"Zulu"}},Kl=Y(Object.keys(jl)),Bl=Kl.next();!Bl.done;Bl=Kl.next()){var Gl=Bl.value;jl[Gl.toLowerCase()]=jl[Gl]}function Vl(e,t,n,i,r,a,o){function s(e){return"variant"==e.type?e.audioRoles?e.audioRoles.join(", "):void 0:e.roles.join(", ")}var u=e.filter(function(e){return 1==e.active})[0],c=Yl(t,"shaka-back-to-overflow-button");Ql(t),t.appendChild(c),c=new Map;for(var l=Y(e),d=l.next();!d.done;d=l.next())d=d.value,c.has(d.language)||c.set(d.language,new Set),c.get(d.language).add(s(d));for(c=new Set,u=u?u.language+": "+s(u):"",l={},d=(e=Y(e)).next();!d.done;l={hc:l.hc},d=e.next()){l.hc=d.value,d=l.hc.language;var h=s(l.hc),f=d+": "+h;if(!c.has(f)){c.add(f);var p=Sl("button");p.addEventListener("click",function(e){return function(){n(e.hc)}}(l));var m=Sl("span");switch(p.appendChild(m),m.textContent=zl(d,a),o){case Sh:h?m.textContent=h:(ne.ba("Track #"+l.hc.id+" does not have a role, but the UI is configured to only show role."),m.textContent="?");break;case Ah:h&&(m.textContent+=": "+h)}i&&f==u&&(p.appendChild(Jl()),m.classList.add("shaka-chosen-item"),p.setAttribute("aria-selected","true"),r.textContent=m.textContent),t.appendChild(p)}}}function zl(e,t){if(!e&&!t)return"";switch(e){case"mul":return t.resolve("MULTIPLE_LANGUAGES");case"und":return t.resolve("UNDETERMINED_LANGUAGE");case"zxx":return t.resolve("NOT_APPLICABLE")}var n=X(e);return e in jl?jl[e].h:n in jl?jl[n].h+" ("+e+")":t.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function Hl(e,t){this.parent=e,this.controls=t,this.eventManager=new et,this.localization=this.controls.Ka,this.player=this.controls.$a(),this.video=this.controls.rc()}function Wl(e,t,n,i){Hl.call(this,e,t);var r=this;this.b=Sl("div"),this.b.classList.add("shaka-range-container"),this.b.classList.add.apply(this.b.classList,x(n)),this.c=!1,this.a=document.createElement("input"),this.a.classList.add("shaka-range-element"),this.a.classList.add.apply(this.a.classList,x(i)),this.a.type="range",this.a.step="any",this.a.min="0",this.a.max="1",this.a.value="0",this.b.appendChild(this.a),this.parent.appendChild(this.b),this.eventManager.m(this.a,"mousedown",function(){r.c=!0,r.l()}),this.eventManager.m(this.a,"touchstart",function(e){r.c=!0,Xl(r,e),r.l()}),this.eventManager.m(this.a,"input",function(){r.g()}),this.eventManager.m(this.a,"touchmove",function(e){Xl(r,e),r.g()}),this.eventManager.m(this.a,"touchend",function(e){r.c=!1,Xl(r,e),r.j()}),this.eventManager.m(this.a,"mouseup",function(){r.c=!1,r.j()})}function ql(e,t){e.c||(e.a.value=t)}function Xl(e,t){t.preventDefault();var n=t.changedTouches[0],i=e.a.getBoundingClientRect(),r=parseFloat(e.a.min),a=parseFloat(e.a.max);(n=r+(a-r)/i.width*(n.clientX-i.left))<r?n=r:a<n&&(n=a),e.a.value=n}function Yl(e,t){var n=e.getElementsByClassName(t);return n.length?n[0]:null}function $l(e){(e=e&&Yl(e,"shaka-chosen-item"))&&e.parentElement.focus()}function Jl(){var e=Sl("i");return e.classList.add("material-icons-round"),e.classList.add("shaka-chosen-item"),e.textContent="done",e.setAttribute("aria-hidden","true"),e}function Zl(e,t){e&&(t?(e.classList.add("shaka-displayed"),e.classList.remove("shaka-hidden")):(e.classList.add("shaka-hidden"),e.classList.remove("shaka-displayed")))}function Ql(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ed(e,t){Wl.call(this,e,t,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var n=this;this.s=this.controls.g,this.f=new Ne(function(){n.video.currentTime=parseFloat(n.a.value)}),this.eventManager.m(this.localization,"locale-updated",function(){return nd(n)}),this.eventManager.m(this.localization,"locale-changed",function(){return nd(n)}),ql(this,this.video.currentTime),td(this),nd(this)}function td(e){var t=e.s.seekBarColors,n=parseFloat(e.a.value),i=e.video.buffered.length,r=i?e.video.buffered.start(0):0,a=i?e.video.buffered.end(i-1):0,o=e.player.gc(),s=o.end-o.start,u=o.end;e.a.min=o.start,e.a.max=u,e.player.W()&&s<5?Zl(e.b,!1):(Zl(e.b,!0),0==i?e.b.style.background=t.base:(i=(Math.max(r,o.start)-o.start)/s||0,a=(Math.min(a,o.end)-o.start)/s||0,n=(Math.min(Math.max(n,o.start),o.end)-o.start)/s||0,e.b.style.background="linear-gradient("+["to right",(e.s.showUnbufferedStart?t.base:t.played)+" "+100*i+"%",t.played+" "+100*i+"%",t.played+" "+100*n+"%",t.buffered+" "+100*n+"%",t.buffered+" "+100*a+"%",t.base+" "+100*a+"%"].join()+")"))}function nd(e){e.a.setAttribute("aria-label",e.localization.resolve("SEEK"))}function id(e,t,n,i){var r,a,o=this;B.call(this),this.O=!0,this.g=i,this.l=new Ti(n,e,this.g.castReceiverAppId),this.Ia=!0,this.c=this.l.rc(),this.B=n,this.s=this.l.$a(),this.wa=e,this.f=t,this.j=null,this.Z=!1,this.H=[],this.Wa=[],this.Ma=!1,this.K=new Ne(function(){o.f.style.cursor="none",o.Ma=!1,od(o)}),this.Y=new Ne(function(){o.a.removeAttribute("shown"),o.v.R(2)}),this.v=new Ne(function(){for(var e=Y(o.H),t=e.next();!t.done;t=e.next())Zl(t.value,!1)}),this.ya=new Ne(function(){cd(o)&&dd(o)}),this.w=null,this.Ja=[],this.Ka=((r=new oe("en")).aa("ar",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS"," "],["CAST","..."],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN","   "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS","  "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE"," "],["OFF",""],["ON",""],["PAUSE"," "],["PICTURE_IN_PICTURE","  "],["PLAY",""],["RESOLUTION"," "],["REWIND",""],["SEEK"," "],["SKIP_TO_LIVE","   "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME"," "]])),r.aa("de",new Map([["AUTO_QUALITY","Automatisch"],["BACK","Zurck"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["RESOLUTION","Auflsung"],["REWIND","Zurckspulen"],["SEEK","Suche"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstrke"]])),r.aa("en",new Map([["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),r.aa("en-GB",new Map([["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),r.aa("es",new Map([["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Enviar..."],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rpidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["MORE_SETTINGS","Ms opciones"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","No"],["ON","S"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["RESOLUTION","Resolucin"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_TO_LIVE","Ir al vdeo en directo"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),r.aa("es-419",new Map([["AUTO_QUALITY","Automtico"],["BACK","Atrs"],["CAPTIONS","Subttulos"],["CAST","Transmitir..."],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["MORE_SETTINGS","Ms opciones de configuracin"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["RESOLUTION","Resolucin"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_TO_LIVE","Adelantar hasta la transmisin en vivo"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),r.aa("fr",new Map([["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein cran"],["EXIT_PICTURE_IN_PICTURE","Quitter le modePIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein cran"],["LANGUAGE","Langue"],["LIVE","En direct"],["MORE_SETTINGS","Plus de paramtres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Dsactive"],["ON","Active"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["RESOLUTION","Rsolution"],["REWIND","Retour arrire"],["SEEK","Chercher"],["SKIP_TO_LIVE","Accder  la partie la plus rcente du direct"],["UNDETERMINED_LANGUAGE","Langue indtermine"],["UNMUTE","Ractiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),r.aa("it",new Map([["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Pi lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),r.aa("ja",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE","  "],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE","  "],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),r.aa("ko",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE","PIP  "],["EXIT_FULL_SCREEN"," "],["EXIT_PICTURE_IN_PICTURE","PIP  "],["FAST_FORWARD"," "],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE",""],["NOT_APPLICABLE","  "],["OFF"," "],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","PIP "],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE","  "],["UNDETERMINED_LANGUAGE",""],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE","  "],["VOLUME",""]])),r.aa("nl",new Map([["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),r.aa("pl",new Map([["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyaj..."],["ENTER_PICTURE_IN_PICTURE","Wcz tryb obrazu wobrazie"],["EXIT_FULL_SCREEN","Zamknij peny ekran"],["EXIT_PICTURE_IN_PICTURE","Wycz tryb obrazu wobrazie"],["FAST_FORWARD","Przewi do przodu"],["FULL_SCREEN","Peny ekran"],["LANGUAGE","Jzyk"],["LIVE","Na ywo"],["MORE_SETTINGS","Wicej ustawie"],["MULTIPLE_LANGUAGES","Wiele jzykw"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyczone"],["ON","Wczone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz wobrazie"],["PLAY","Odtwrz"],["RESOLUTION","Rozdzielczo"],["REWIND","Przewi do tyu"],["SEEK","Szukaj"],["SKIP_TO_LIVE","Przejd do transmisji na ywo"],["UNDETERMINED_LANGUAGE","Nie okrelono"],["UNMUTE","Wycz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Gono"]])),r.aa("pt-BR",new Map([["CAPTIONS","Legendas"],["CAST","Transmitir..."],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["MORE_SETTINGS","Mais definies"],["MUTE","Desativar som"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["REWIND","Retroceder"],["SEEK","Procurar"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","No reconhecido"],["VOLUME","Volume"]])),r.aa("pt-PT",new Map([["AUTO_QUALITY","Automtico"],["BACK","Anterior"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_PICTURE_IN_PICTURE","Entrar no modo ecr no ecr"],["EXIT_FULL_SCREEN","Sair do modo de ecr inteiro"],["EXIT_PICTURE_IN_PICTURE","Sair do modo ecr no ecr"],["FAST_FORWARD","Avanar"],["FULL_SCREEN","Ecr inteiro"],["LANGUAGE","Idioma"],["LIVE","Em direto"],["MORE_SETTINGS","Mais definies"],["MULTIPLE_LANGUAGES","Vrios idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","No aplicvel"],["OFF","Desligado"],["ON","Ligado"],["PAUSE","Colocar em pausa"],["PICTURE_IN_PICTURE","Ecr no ecr"],["PLAY","Reproduzir"],["RESOLUTION","Resoluo"],["REWIND","Rebobinar"],["SEEK","Procurar"],["SKIP_TO_LIVE","Avanar para o direto"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Reativar o som"],["UNRECOGNIZED_LANGUAGE","No reconhecido"],["VOLUME","Volume"]])),r.aa("ru",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE",'   "  "'],["EXIT_FULL_SCREEN"," "],["EXIT_PICTURE_IN_PICTURE",'   "  "'],["FAST_FORWARD"," "],["FULL_SCREEN"," "],["LANGUAGE",""],["LIVE"," "],["MORE_SETTINGS"," "],["MULTIPLE_LANGUAGES"," "],["MUTE"," "],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE","  "],["PLAY",""],["RESOLUTION",""],["REWIND"," "],["SEEK",""],["SKIP_TO_LIVE","     "],["UNDETERMINED_LANGUAGE"," "],["UNMUTE"," "],["UNRECOGNIZED_LANGUAGE"," "],["VOLUME",""]])),r.aa("th",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),r.aa("tr",new Map([["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazlar"],["CAST","Yaynla..."],["ENTER_PICTURE_IN_PICTURE","Pencere iinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan k"],["EXIT_PICTURE_IN_PICTURE","Pencere inde Pencereden k"],["FAST_FORWARD","leri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canl"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden ok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geerli deil"],["OFF","Kapal"],["ON","Ak"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere inde Pencere"],["PLAY","Oynat"],["RESOLUTION","znrlk"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_TO_LIVE","Canl yayna atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi a"],["UNRECOGNIZED_LANGUAGE","Tannmayan"],["VOLUME","Ses"]])),r.aa("zh",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST",""],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),r.aa("zh-TW",new Map([["AUTO_QUALITY",""],["BACK",""],["CAPTIONS",""],["CAST","..."],["ENTER_PICTURE_IN_PICTURE",""],["EXIT_FULL_SCREEN",""],["EXIT_PICTURE_IN_PICTURE",""],["FAST_FORWARD",""],["FULL_SCREEN",""],["LANGUAGE",""],["LIVE",""],["MORE_SETTINGS",""],["MULTIPLE_LANGUAGES",""],["MUTE",""],["NOT_APPLICABLE",""],["OFF",""],["ON",""],["PAUSE",""],["PICTURE_IN_PICTURE",""],["PLAY",""],["RESOLUTION",""],["REWIND",""],["SEEK",""],["SKIP_TO_LIVE",""],["UNDETERMINED_LANGUAGE",""],["UNMUTE",""],["UNRECOGNIZED_LANGUAGE",""],["VOLUME",""]])),r.Ae(navigator.languages||[]),r),this.b=new et,this.configure(this.g),(a=this).b.m(a.s,"buffering",function(){a.O&&Zl(a.G,a.s.Ub())}),a.O&&Zl(a.G,a.s.Ub()),a.b.m(h,"keydown",function(e){a.ka.add(e.key);var t=a.Hc();"Tab"==e.key&&(a.a.classList.add("shaka-keyboard-navigation"),od(a),a.b.m(h,"mousedown",a.rb.bind(a))),"Escape"==e.key&&a.v.gb(),t&&a.ka.has("Tab")&&function(e,t){var n=e.H.filter(function(e){return e.classList.contains("shaka-displayed")})[0];if(n.childNodes.length){for(var i=n.firstElementChild;i&&i.classList.contains("shaka-hidden");)i=i.nextElementSibling;for(n=n.lastElementChild;n&&n.classList.contains("shaka-hidden");)n=n.previousElementSibling;var r=document.activeElement;e.ka.has("Shift")?r==i&&(t.preventDefault(),n.focus()):r==n&&(t.preventDefault(),i.focus())}}(a,e)}),a.b.m(h,"click",function(){return a.tc()}),a.b.m(a.a,"dblclick",function(){a.g.doubleClickForFullscreen&&a.me()}),a.b.m(a.c,"play",a.L.bind(a)),a.b.m(a.c,"pause",a.L.bind(a)),a.b.m(a.c,"ended",a.L.bind(a)),a.b.m(a.f,"mousemove",a.ia.bind(a)),a.b.m(a.f,"touchmove",a.ia.bind(a),{passive:!0}),a.b.m(a.f,"touchend",a.ia.bind(a),{passive:!0}),a.b.m(a.f,"mouseleave",a.sb.bind(a)),a.b.m(a.l,"caststatuschanged",function(){ud(a)}),a.b.m(a.f,"keyup",function(e){var t=document.activeElement,n=!(!t||!t.classList)&&t.classList.contains("shaka-volume-bar"),i=t&&t.classList&&t.classList.contains("shaka-seek-bar");if(a.a.contains(t)&&a.ia(e),a.ka.delete(e.key),a.g.enableKeyboardPlaybackControls)switch(e.key){case"ArrowLeft":n||ld(a,a.c.currentTime-5);break;case"ArrowRight":n||ld(a,a.c.currentTime+5);break;case"Home":ld(a,a.s.gc().start);break;case"End":ld(a,a.s.gc().end);break;case" ":i&&sd(a)}}),screen.orientation&&a.b.m(screen.orientation,"change",function(){a.c&&0!=a.c.readyState&&!a.l.ha()&&a.g.enableFullscreenOnRotation&&(screen.orientation.type.includes("landscape")&&!document.fullscreenElement?a.f.requestFullscreen({navigationUI:"hide"}):screen.orientation.type.includes("portrait")&&document.fullscreenElement&&document.exitFullscreen())}),this.ka=new Set,ud(this),this.ya.Ua(.125)}O("shaka.ui.Element",Hl),Hl.prototype.destroy=Hl.prototype.destroy=function(){return this.eventManager.release(),this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null,Promise.resolve()},y(Wl,Hl),O("shaka.ui.RangeElement",Wl),Wl.prototype.l=function(){},Wl.prototype.g=function(){},Wl.prototype.j=function(){},O("shaka.ui.Utils.getFirstDescendantWithClassName",Yl),O("shaka.ui.Utils.setDisplay",Zl),O("shaka.ui.Utils.removeAllChildren",Ql),y(ed,Wl),O("shaka.ui.SeekBar",ed),ed.prototype.destroy=function(){var t=this;return $(function e(){return te(e,function(e){switch(e.o){case 1:return t.f&&(t.f.stop(),t.f=null),J(e,Wl.prototype.destroy.call(t),0)}})})},ed.prototype.l=function(){this.controls.fe(!0),this.video.pause()},ed.prototype.g=function(){this.video.duration&&(td(this),this.f.R(.125))},ed.prototype.j=function(){this.f.gb(),this.controls.fe(!1),this.video.play()},D(id,B),O("shaka.ui.Controls",id);var rd=new Map;function ad(e,t){rd.set(e,t)}function od(e){var t=e.c.paused&&!e.Z,n=e.a.classList.contains("shaka-keyboard-navigation");t||e.Ma||n||e.Wa.some(function(e){return e.matches(":hover")})?(dd(e),e.a.setAttribute("shown","true"),e.Y.stop()):e.Y.R(e.g.fadeDelay)}function sd(e){e.O&&e.c.duration&&(e.s.ye(),e.c.paused?e.c.play():e.c.pause())}function ud(e){var t=e.l.ha();e.dispatchEvent(new F("caststatuschanged",{Ig:t})),t?e.a.setAttribute("casting","true"):e.a.removeAttribute("casting")}function cd(e){return e.O&&(null!=e.a.getAttribute("shown")||null!=e.a.getAttribute("casting"))}function ld(e,t){e.c.currentTime=t,cd(e)&&dd(e)}function dd(e){if(e.j)if(ql(e.j,e.c.currentTime),td(e.j),e.j.b.classList.contains("shaka-hidden"))for(var t=Y(e.H),n=t.next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");else for(var n=(t=Y(e.H)).next();!n.done;n=t.next())n.value.classList.remove("shaka-low-position");e.dispatchEvent(new F("timeandseekrangeupdated"))}function hd(e,t){Hl.call(this,e,t);var n=this;this.g=this.controls.g,this.f=this.controls.a,this.c=[],this.b=Sl("button"),this.b.classList.add("shaka-overflow-menu-button"),this.b.classList.add("shaka-no-propagation"),this.b.classList.add("material-icons-round"),this.b.textContent="more_vert",this.parent.appendChild(this.b),this.a=Sl("div"),this.a.classList.add("shaka-overflow-menu"),this.a.classList.add("shaka-no-propagation"),this.a.classList.add("shaka-show-controls-on-mouse-over"),this.a.classList.add("shaka-settings-menu"),this.f.appendChild(this.a),function(e){for(var t=0;t<e.g.overflowMenuButtons.length;t++){var n=e.g.overflowMenuButtons[t];gd.get(n)?(n=gd.get(n),e.c.push(n.create(e.a,e.controls))):ne.ba("Unrecognized overflow menu element requested:",n)}}(this);for(var i=this.controls.f.getElementsByClassName("shaka-back-to-overflow-button"),r=0;r<i.length;r++)this.eventManager.m(i[r],"click",function(){n.controls.tc(),Zl(n.a,!0),n.a.childNodes.length&&n.a.childNodes[0].focus(),od(n.controls)});this.eventManager.m(this.localization,"locale-updated",function(){pd(n)}),this.eventManager.m(this.localization,"locale-changed",function(){pd(n)}),this.eventManager.m(this.controls,"submenuopen",function(){Zl(n.a,!1)}),this.eventManager.m(this.a,"touchstart",function(e){n.controls.tf(Date.now()),e.stopPropagation()}),this.eventManager.m(this.b,"click",function(){!function(e){{var t;e.controls.Hc()?e.controls.tc():(Zl(e.a,!0),od(e.controls),t=function(e){return 0==e.classList.contains("shaka-hidden")},function(e,t){for(var n=Y(e),i=n.next();!i.done;i=n.next())if(t(i.value))return 1}(e.a.childNodes,t)&&z(e.a.childNodes,t)[0].focus())}}(n)}),this.eventManager.m(this.f,"touchstart",function(e){n.a.classList.contains("shaka-displayed")&&(Zl(n.a,!1),e.preventDefault())}),pd(this)}function fd(e,t){gd.set(e,t)}function pd(e){e.b.setAttribute("aria-label",e.localization.resolve("MORE_SETTINGS"))}function md(){}id.prototype.destroy=id.prototype.destroy=function(){var t=this;return $(function e(){return te(e,function(e){switch(e.o){case 1:if(t.b&&(t.b.release(),t.b=null),t.K&&(t.K.stop(),t.K=null),t.Y&&(t.Y.stop(),t.Y=null),t.v&&(t.v.stop(),t.v=null),t.ya&&(t.ya.stop(),t.ya=null),t.a&&(t.f.removeChild(t.a),t.a=null),t.l)return J(e,t.l.destroy(),3);e.C(2);break;case 3:t.l=null;case 2:if(t.wa)return J(e,t.wa.destroy(),5);e.C(4);break;case 5:t.wa=null;case 4:return t.s=null,t.B=null,t.c=null,t.Ka=null,t.ka.clear(),J(e,Promise.all(t.Ja.map(function(e){return e.destroy()})),6);case 6:if(t.Ja=[],t.j)return J(e,t.j.destroy(),0);e.C(0)}})})},id.registerElement=ad,id.prototype.allowCast=id.prototype.Jf=function(e){this.Ia=e,ud(this)},id.prototype.loadComplete=id.prototype.Gg=function(){this.L()},id.prototype.configure=id.prototype.configure=function(e){var t;this.g=e,this.l.Be(e.castReceiverAppId),this.j&&(this.j.destroy(),this.j=null),this.La&&(this.La.destroy(),this.La=null),this.a?(Al(this.a),this.f.removeChild(this.G)):((t=this).a=Sl("div"),t.a.classList.add("shaka-controls-container"),t.f.appendChild(t.a),t.b.m(t.a,"touchstart",function(e){t.c.duration&&(cd(t)?t.w=Date.now():(t.ia(e),e.preventDefault()))},{passive:!1}),t.b.m(t.a,"click",function(){t.O&&(t.Hc()?t.v.gb():sd(t))})),function(e){e.f.classList.add("shaka-video-container"),e.B.classList.add("shaka-video");var t=Sl("div");t.classList.add("shaka-skim-container"),t.classList.add("shaka-fade-out-on-mouse-out"),e.a.appendChild(t),e.g.addBigPlayButton&&((t=Sl("div")).classList.add("shaka-play-button-container"),e.a.appendChild(t),e.La=new Id(t,e)),e.G=Sl("div"),e.G.classList.add("shaka-spinner-container"),e.f.appendChild(e.G);var n=Sl("div");if(n.classList.add("shaka-spinner"),e.G.appendChild(n),(t=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("class","shaka-spinner-svg"),t.setAttribute("viewBox","0 0 30 30"),n.appendChild(t),(n=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("class","shaka-spinner-path"),n.setAttribute("cx","15"),n.setAttribute("cy","15"),n.setAttribute("r","14.5"),n.setAttribute("fill","none"),n.setAttribute("stroke-width","1"),n.setAttribute("stroke-miterlimit","10"),t.appendChild(n),function(e){e.na=Sl("div"),e.na.classList.add("shaka-bottom-controls"),e.a.appendChild(e.na),e.J=Sl("div"),e.J.classList.add("shaka-controls-button-panel"),e.J.classList.add("shaka-no-propagation"),e.J.classList.add("shaka-show-controls-on-mouse-over"),e.na.appendChild(e.J),e.b.m(e.J,"click",function(){e.tc()});for(var t=0;t<e.g.controlPanelElements.length;t++){var n=e.g.controlPanelElements[t];rd.get(n)?(n=rd.get(n),e.Ja.push(n.create(e.J,e))):ne.ba("Unrecognized control panel element requested:",n)}}(e),e.H=Array.from(e.f.getElementsByClassName("shaka-settings-menu")),e.g.addSeekBar)e.j=new ed(e.na,e);else for(t=Y(e.H),n=t.next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");e.Wa=Array.from(e.f.getElementsByClassName("shaka-show-controls-on-mouse-over"))}(this),this.L();for(var n=(e=Y(this.f.getElementsByClassName("shaka-no-propagation"))).next();!n.done;n=e.next()){n=n.value;function i(e){return e.stopPropagation()}this.b.m(n,"click",i),this.b.m(n,"dblclick",i)}},id.prototype.setEnabledShakaControls=id.prototype.be=function(e){(this.O=e)?(Zl(this.a,!0),Zl(this.G,this.s.Ub()),this.B.tabIndex=-1,this.B.controls=!1):(Zl(this.a,!1),Zl(this.G,!1)),this.L()},id.prototype.setSeeking=id.prototype.fe=function(e){this.Z=e},id.prototype.setEnabledNativeControls=id.prototype.sf=function(e){this.B.controls=e,this.B.tabIndex=e?0:-1,e&&this.be(!1)},id.prototype.getCastProxy=id.prototype.Wf=function(){return this.l},id.prototype.getLocalization=id.prototype.hg=function(){return this.Ka},id.prototype.toggleFullScreen=id.prototype.me=function(){var n=this;return $(function e(){var t;return te(e,function(e){switch(e.o){case 1:if(document.fullscreenElement){document.exitFullscreen(),e.C(0);break}if(Z(e,3),document.pictureInPictureElement)return J(e,document.exitPictureInPicture(),5);e.C(5);break;case 5:Q(e,4);break;case 3:t=ee(e),n.dispatchEvent(new F("error",{detail:t}));case 4:return J(e,n.f.requestFullscreen({navigationUI:"hide"}),0)}})})},id.prototype.getVideoContainer=id.prototype.yg=function(){return this.f},id.prototype.getVideo=id.prototype.rc=function(){return this.c},id.prototype.getLocalVideo=id.prototype.gg=function(){return this.B},id.prototype.getPlayer=id.prototype.$a=function(){return this.s},id.prototype.getLocalPlayer=id.prototype.fg=function(){return this.wa},id.prototype.getControlsContainer=id.prototype.Zf=function(){return this.a},id.prototype.getConfig=id.prototype.Xf=function(){return this.g},id.prototype.isSeeking=id.prototype.Eg=function(){return this.Z},id.prototype.isCastAllowed=id.prototype.Cg=function(){return this.Ia},id.prototype.getDisplayTime=id.prototype.Ke=function(){return this.j?parseFloat(this.j.a.value):this.c.currentTime},id.prototype.setLastTouchEventTime=id.prototype.tf=function(e){this.w=e},id.prototype.anySettingsMenusAreOpen=id.prototype.Hc=function(){return this.H.some(function(e){return e.classList.contains("shaka-displayed")})},id.prototype.hideSettingsMenus=id.prototype.tc=function(){this.v.gb()},id.prototype.ia=function(e){"mousemove"==e.type&&(this.a.classList.remove("shaka-keyboard-navigation"),od(this)),"touchstart"==e.type||"touchmove"==e.type||"touchend"==e.type||"keyup"==e.type?this.w=Date.now():this.w+1e3<Date.now()&&(this.w=null),this.w&&"mousemove"==e.type||(this.f.style.cursor="",this.Ma=!0,this.v.stop(),cd(this)||(dd(this),od(this)),this.K.stop(),"touchend"!=e.type&&"keyup"!=e.type&&this.w||this.K.R(3))},id.prototype.sb=function(){this.w||this.K.gb()},id.prototype.L=function(){this.c.ended&&!this.c.paused&&this.c.pause(),od(this)},id.prototype.rb=function(){this.b.xa(h,"mousedown")},y(hd,Hl),O("shaka.ui.OverflowMenu",hd),hd.prototype.destroy=function(){var t=this;return $(function e(){return te(e,function(e){switch(e.o){case 1:return t.f=null,J(e,Promise.all(t.c.map(function(e){return e.destroy()})),2);case 2:return t.c=[],J(e,Hl.prototype.destroy.call(t),0)}})})},hd.registerElement=fd,md.prototype.create=function(e,t){return new hd(e,t)},ad("overflow_menu",new md);var gd=new Map;function vd(e,t,n){Hl.call(this,e,t);var i=this;!function(e,t){e.button=Sl("button"),e.f=Sl("i"),e.f.classList.add("material-icons-round"),e.f.textContent=t,e.button.appendChild(e.f);var n=Sl("label");n.classList.add("shaka-overflow-button-label"),e.l=Sl("span"),n.appendChild(e.l),e.b=Sl("span"),e.b.classList.add("shaka-current-selection-span"),n.appendChild(e.b),e.button.appendChild(n),e.parent.appendChild(e.button)}(this,n),function(e){e.a=Sl("div"),e.a.classList.add("shaka-no-propagation"),e.a.classList.add("shaka-show-controls-on-mouse-over"),e.a.classList.add("shaka-settings-menu"),e.c=Sl("button"),e.c.classList.add("shaka-back-to-overflow-button"),e.a.appendChild(e.c);var t=Sl("i");t.classList.add("material-icons-round"),t.textContent="arrow_back",e.c.appendChild(t),e.j=Sl("span"),e.c.appendChild(e.j),e.controls.a.appendChild(e.a)}(this),this.eventManager.m(this.button,"click",function(){i.controls.dispatchEvent(new F("submenuopen")),Zl(i.a,!0),$l(i.a)})}function bd(e,t){vd.call(this,e,t,"language");var n=this;this.button.classList.add("shaka-language-button"),this.a.classList.add("shaka-audio-languages"),this.eventManager.m(this.localization,"locale-updated",function(){Ed(n)}),this.eventManager.m(this.localization,"locale-changed",function(){Ed(n)}),this.eventManager.m(this.player,"trackschanged",function(){var e=0<n.player.Sb().length;Zl(n.button,e),yd(n)}),this.eventManager.m(this.player,"variantchanged",function(){yd(n)}),Ed(this),yd(this)}function yd(t){Vl(t.player.Sb(),t.a,function(e){t.player.bd(e.language,e.roles[0])},!0,t.b,t.localization,t.controls.g.trackLabelFormat),$l(t.a),t.controls.dispatchEvent(new F("languageselectionupdated"))}function Ed(e){e.c.setAttribute("aria-label",e.localization.resolve("BACK")),e.button.setAttribute("aria-label",e.localization.resolve("LANGUAGE")),e.l.textContent=e.localization.resolve("LANGUAGE"),e.j.textContent=e.localization.resolve("LANGUAGE")}function wd(){}function Td(e,t){Hl.call(this,e,t);var n=this;this.button=Sl("button"),this.parent.appendChild(this.button),this.eventManager.m(this.localization,"locale-updated",function(){Ad(n)}),this.eventManager.m(this.localization,"locale-changed",function(){Ad(n)}),this.eventManager.m(this.video,"play",function(){Ad(n)}),this.eventManager.m(this.video,"pause",function(){Ad(n)}),this.eventManager.m(this.button,"click",function(){Sd(n)?n.video.play():n.video.pause()})}function Sd(e){return e.video.paused&&!e.controls.Z}function Ad(e){e.button.setAttribute("aria-label",e.localization.resolve(Sd(e)?"PLAY":"PAUSE"))}function Id(e,t){Td.call(this,e,t);var n=this;this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),kd(this),Ad(this),this.eventManager.m(this.video,"play",function(){kd(n)}),this.eventManager.m(this.video,"pause",function(){kd(n)})}function kd(e){Sd(e)?e.button.setAttribute("icon","play"):e.button.setAttribute("icon","pause")}function xd(e,t){Hl.call(this,e,t);var i=this;this.b=this.controls.l,this.a=Sl("button"),this.a.classList.add("shaka-cast-button"),this.a.setAttribute("aria-pressed","false"),this.c=Sl("i"),this.c.classList.add("material-icons-round"),this.c.textContent="cast",this.a.appendChild(this.c);var n=Sl("label");n.classList.add("shaka-overflow-button-label"),this.g=Sl("span"),n.appendChild(this.g),this.f=Sl("span"),this.f.classList.add("shaka-current-selection-span"),n.appendChild(this.f),this.a.appendChild(n),this.parent.appendChild(this.a),Pd(this),Cd(this),this.eventManager.m(this.localization,"locale-updated",function(){Pd(i)}),this.eventManager.m(this.localization,"locale-changed",function(){Pd(i)}),this.eventManager.m(this.a,"click",function(){var n;n=i,$(function e(){var t;return te(e,function(e){switch(e.o){case 1:if(n.b.ha()){n.b.xf(),e.C(0);break}return Z(e,3),n.a.disabled=!0,J(e,n.b.cast(),5);case 5:n.a.disabled=!1,Q(e,0);break;case 3:t=ee(e),n.a.disabled=!1,8004!=t.code&&n.controls.dispatchEvent(new F("error",{detail:t})),j(e)}})})}),this.eventManager.m(this.controls,"caststatuschanged",function(){Cd(i)})}function Cd(e){var t=e.b.xe()&&e.controls.Ia,n=e.b.ha();Zl(e.a,t),e.c.textContent=n?"cast_connected":"cast",t&&(n?e.a.setAttribute("aria-pressed","true"):e.a.setAttribute("aria-pressed","false")),Nd(e)}function Nd(e){e.f.textContent=e.b.ha()?e.b.ad():e.localization.resolve("OFF")}function Pd(e){e.a.setAttribute("aria-label",e.localization.resolve("CAST")),e.g.textContent=e.localization.resolve("CAST"),Nd(e)}function Md(){}function Rd(e,t){Hl.call(this,e,t);var n=this;this.a=Sl("button"),this.a.classList.add("material-icons-round"),this.a.classList.add("shaka-fast-forward-button"),this.a.textContent="fast_forward",this.parent.appendChild(this.a),Ld(this),this.eventManager.m(this.localization,"locale-updated",function(){Ld(n)}),this.eventManager.m(this.localization,"locale-changed",function(){Ld(n)}),this.eventManager.m(this.a,"click",function(){var e;n.video.duration&&(e=n.player.xd(),n.player.pe(e<0||4<e?1:2*e))})}function Ld(e){e.a.setAttribute("aria-label",e.localization.resolve("FAST_FORWARD"))}function Ud(){}function _d(e,t){Hl.call(this,e,t);var n=this;this.a=Sl("button"),this.a.classList.add("shaka-fullscreen-button"),this.a.classList.add("material-icons-round"),document.fullscreenEnabled||this.a.classList.add("shaka-hidden"),this.a.textContent="fullscreen",this.parent.appendChild(this.a),Od(this),this.eventManager.m(this.localization,"locale-updated",function(){Od(n)}),this.eventManager.m(this.localization,"locale-changed",function(){Od(n)}),this.eventManager.m(this.a,"click",function(){n.controls.me()}),this.eventManager.m(document,"fullscreenchange",function(){n.a.textContent=document.fullscreenElement?"fullscreen_exit":"fullscreen",Od(n)})}function Od(e){e.a.setAttribute("aria-label",e.localization.resolve(document.fullscreenElement?"EXIT_FULL_SCREEN":"FULL_SCREEN"))}function Dd(){}function Fd(e,t){Hl.call(this,e,t);var n=this;this.a=Sl("button"),this.a.classList.add("shaka-mute-button"),this.a.classList.add("material-icons-round"),this.a.textContent="volume_up",this.parent.appendChild(this.a),jd(this),this.eventManager.m(this.localization,"locale-updated",function(){jd(n)}),this.eventManager.m(this.localization,"locale-changed",function(){jd(n)}),this.eventManager.m(this.a,"click",function(){n.video.muted=!n.video.muted}),this.eventManager.m(this.video,"volumechange",function(){jd(n),n.a.textContent=n.video.muted?"volume_off":"volume_up"})}function jd(e){e.a.setAttribute("aria-label",e.localization.resolve(e.video.muted?"UNMUTE":"MUTE"))}function Kd(){}function Bd(e,t){Hl.call(this,e,t);var i=this;this.g=this.controls.B,this.a=Sl("button"),this.a.classList.add("shaka-pip-button"),this.c=Sl("i"),this.c.classList.add("material-icons-round"),this.c.textContent="picture_in_picture_alt",this.a.appendChild(this.c);var n=Sl("label");n.classList.add("shaka-overflow-button-label"),this.f=Sl("span"),this.f.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),n.appendChild(this.f),this.b=Sl("span"),this.b.classList.add("shaka-current-selection-span"),n.appendChild(this.b),this.a.appendChild(n),Gd(this),this.parent.appendChild(this.a),document.pictureInPictureEnabled&&!this.video.disablePictureInPicture||Zl(this.a,!1),this.eventManager.m(this.localization,"locale-updated",function(){Gd(i)}),this.eventManager.m(this.localization,"locale-changed",function(){Gd(i)}),this.eventManager.m(this.a,"click",function(){var n;n=i,$(function e(){var t;return te(e,function(e){switch(e.o){case 1:return Z(e,2),document.pictureInPictureElement?J(e,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),J(e,n.video.requestPictureInPicture(),5));case 5:Q(e,0);break;case 2:t=ee(e),n.controls.dispatchEvent(new F("error",{detail:t})),j(e)}})})}),this.eventManager.m(this.g,"enterpictureinpicture",function(){i.c.textContent="branding_watermark",i.a.setAttribute("aria-label",i.localization.resolve("EXIT_PICTURE_IN_PICTURE")),i.b.textContent=i.localization.resolve("ON")}),this.eventManager.m(this.g,"leavepictureinpicture",function(){i.c.textContent="picture_in_picture_alt",i.a.setAttribute("aria-label",i.localization.resolve("ENTER_PICTURE_IN_PICTURE")),i.b.textContent=i.localization.resolve("OFF")}),this.eventManager.m(this.controls,"caststatuschanged",function(e){e.newStatus?document.pictureInPictureEnabled&&!i.video.disablePictureInPicture&&Zl(i.a,!1):document.pictureInPictureEnabled&&!i.video.disablePictureInPicture&&Zl(i.a,!0)}),this.eventManager.m(this.player,"trackschanged",function(){var t;t=i,$(function e(){return te(e,function(e){switch(e.o){case 1:if(document.pictureInPictureEnabled&&!t.video.disablePictureInPicture)if(t.player&&t.player.Qe()){if(Zl(t.a,!1),document.pictureInPictureElement)return J(e,document.exitPictureInPicture(),0)}else Zl(t.a,!0);else Zl(t.a,!1);e.C(0)}})})})}function Gd(e){e.f.textContent=e.localization.resolve("PICTURE_IN_PICTURE"),e.a.setAttribute("aria-label",e.localization.resolve(document.pictureInPictureElement?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE")),e.b.textContent=e.localization.resolve(document.pictureInPictureElement?"ON":"OFF")}function Vd(){}function zd(e,t){Hl.call(this,e,t);var a=this;this.a=Sl("button"),this.a.classList.add("shaka-current-time"),Hd(this,"0:00"),this.parent.appendChild(this.a),this.eventManager.m(this.a,"click",function(){a.player.W()&&(a.video.currentTime=a.player.gc().end)}),this.eventManager.m(this.controls,"timeandseekrangeupdated",function(){var e=a.controls.Z,t=a.controls.Ke(),n=a.video.duration,i=a.player.gc(),r=i.end-i.start;a.player.W()?(n=3600<=r,1<=(t=Math.max(0,Math.floor(i.end-t)))||e?(Hd(a,"- "+Wd(t,n)),a.a.disabled=!1):(Hd(a,a.localization.resolve("LIVE")),a.a.disabled=!0)):(t=Wd(t,e=3600<=n),n&&(t+=" / "+Wd(n,e)),Hd(a,t),a.a.disabled=!0)}),this.eventManager.m(this.player,"trackschanged",function(){a.player.W()&&a.a.setAttribute("aria-label",a.localization.resolve("SKIP_TO_LIVE"))})}function Hd(e,t){t!=e.a.textContent&&(e.a.textContent=t)}function Wd(e,t){var n=Math.floor(e/3600),i=Math.floor(e/60%60),r=Math.floor(e%60);return r<10&&(r="0"+r),r=i+":"+r,t&&(i<10&&(r="0"+r),r=n+":"+r),r}function qd(){}function Xd(e,t){vd.call(this,e,t,"settings");var n=this;this.button.classList.add("shaka-resolution-button"),this.a.classList.add("shaka-resolutions"),this.eventManager.m(this.localization,"locale-updated",function(){$d(n)}),this.eventManager.m(this.localization,"locale-changed",function(){$d(n)}),this.eventManager.m(this.player,"variantchanged",function(){Yd(n)}),this.eventManager.m(this.player,"trackschanged",function(){Yd(n)}),this.eventManager.m(this.player,"abrstatuschanged",function(){Yd(n)}),Yd(this),$d(this)}function Yd(i){var r,e,a,n=i.player.Sb();n.length&&!n[0].height?(Zl(i.a,!1),Zl(i.button,!1)):(Zl(i.button,!0),n.sort(function(e,t){return t.height-e.height}),(r=n.find(function(e){return e.active}))&&(n=n.filter(function(e){return e.language==r.language&&e.channelsCount==r.channelsCount})),n=n.filter(function(t,e){return n.findIndex(function(e){return e.height==t.height})==e}),e=Yl(i.a,"shaka-back-to-overflow-button"),Ql(i.a),i.a.appendChild(e),a=i.player.getConfiguration().abr.enabled,n.forEach(function(e){var t=Sl("button");t.classList.add("explicit-resolution"),i.eventManager.m(t,"click",i.s.bind(i,e));var n=Sl("span");n.textContent=e.height+"p",t.appendChild(n),a||e!=r||(t.setAttribute("aria-selected","true"),t.appendChild(Jl()),n.classList.add("shaka-chosen-item"),i.b.textContent=n.textContent),i.a.appendChild(t)}),(e=Sl("button")).classList.add("shaka-enable-abr-button"),i.eventManager.m(e,"click",function(){this.player.configure({abr:{enabled:!0}}),Yd(this)}.bind(i)),i.g=Sl("span"),i.g.classList.add("shaka-auto-span"),i.g.textContent=i.localization.resolve("AUTO_QUALITY"),e.appendChild(i.g),a&&(e.setAttribute("aria-selected","true"),e.appendChild(Jl()),i.g.classList.add("shaka-chosen-item"),i.b.textContent=i.localization.resolve("AUTO_QUALITY")),i.a.appendChild(e),$l(i.a),i.controls.dispatchEvent(new F("resolutionselectionupdated")))}function $d(e){e.button.setAttribute("aria-label",e.localization.resolve("RESOLUTION")),e.c.setAttribute("aria-label",e.localization.resolve("RESOLUTION")),e.j.textContent=e.localization.resolve("RESOLUTION"),e.l.textContent=e.localization.resolve("RESOLUTION"),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),e.player.getConfiguration().abr.enabled&&(e.b.textContent=e.localization.resolve("AUTO_QUALITY"))}function Jd(){}function Zd(e,t){Hl.call(this,e,t);var n=this;this.a=Sl("button"),this.a.classList.add("material-icons-round"),this.a.classList.add("shaka-rewind-button"),this.a.textContent="fast_rewind",this.parent.appendChild(this.a),Qd(this),this.eventManager.m(this.localization,"locale-updated",function(){Qd(n)}),this.eventManager.m(this.localization,"locale-changed",function(){Qd(n)}),this.eventManager.m(this.a,"click",function(){var e;n.video.duration&&(e=n.player.xd(),n.player.pe(0<e||e<-4?-1:2*e))})}function Qd(e){e.a.setAttribute("aria-label",e.localization.resolve("REWIND"))}function eh(){}function th(e,t){Td.call(this,e,t);var n=this;this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),nh(this),Ad(this),this.eventManager.m(this.video,"play",function(){nh(n)}),this.eventManager.m(this.video,"pause",function(){nh(n)})}function nh(e){e.button.textContent=Sd(e)?"play_arrow":"pause"}function ih(){}function rh(e,t){Hl.call(this,e,t);var n=Sl("div");n.classList.add("shaka-spacer"),n.setAttribute("aria-hidden",!0),this.parent.appendChild(n)}function ah(){}function oh(e,t){var n=this;this.f=!1,this.c=[],this.l=e,this.j=t,this.a=Sl("div"),this.a.classList.add("shaka-text-container"),this.j.appendChild(this.a),this.g=new Ne(function(){sh(n)}).Ua(.25),this.b=new Map}function sh(t){function n(e){return t.c.includes(e)&&t.f&&e.startTime<=i&&e.endTime>=i}for(var e,i=t.l.currentTime,r=Y(t.b.keys()),a=r.next();!a.done;a=r.next()){n(a=a.value)||(e=t.b.get(a),t.a.removeChild(e),t.b.delete(a))}for(r=new Set(t.b.values()),e=(a=Y(Array.from(t.a.childNodes))).next();!e.done;e=a.next())e=e.value,r.has(e)||t.a.removeChild(e);for(a=(r=Y(r=t.c.filter(function(e){return n(e)&&!t.b.has(e)}).sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}))).next();!a.done;a=r.next())ch(t,t.a,a.value)}function uh(e,t){var n=Sl("span");return t.spacer?n.style.display="block":lh(n,t,!0),e.appendChild(n),n}function ch(e,t,n){if(n.nestedCues.length){var i=Sl("p");i.style.width="100%",lh(i,n,!1);for(var r=0;r<n.nestedCues.length;r++)uh(i,n.nestedCues[r]);t.appendChild(i),e.b.set(n,i)}else e.b.set(n,uh(t,n))}function lh(e,t,n){var i,r=e.style;r.whiteSpace="pre-line",e.textContent=t.payload,n&&(r.backgroundColor=t.backgroundColor),r.color=t.color,r.direction=t.direction,t.backgroundImage&&(r.backgroundImage="url('"+t.backgroundImage+"')",r.backgroundRepeat="no-repeat",r.backgroundSize="contain",r.backgroundPosition="center",""==t.backgroundColor&&(r.backgroundColor="transparent")),t.backgroundImage&&t.region&&(e=kn,i=t.region.widthUnits==e?"%":"px",r.height=t.region.height+(t.region.heightUnits==e?"%":"px"),r.width=t.region.width+i),r.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",t.nestedCues.length&&(r.alignItems="center",r.display="flex",r.flexDirection="column",r.margin="0"),n&&(r.maxWidth="100%"),r.fontFamily=t.fontFamily,r.fontWeight=t.fontWeight.toString(),r.fontSize=t.fontSize,r.fontStyle=t.fontStyle,t.line?1==t.lineInterpretation&&(r.position="absolute",t.writingMode==bn?t.lineAlign==En?r.top=t.line+"%":"end"==t.lineAlign&&(r.bottom=t.line+"%"):"vertical-lr"==t.writingMode?t.lineAlign==En?r.left=t.line+"%":"end"==t.lineAlign&&(r.right=t.line+"%"):t.lineAlign==En?r.right=t.line+"%":"end"==t.lineAlign&&(r.left=t.line+"%")):t.region&&t.region.id&&!n&&(n=kn,e=t.region.widthUnits==n?"%":"px",i=t.region.viewportAnchorUnits==n?"%":"px",r.height=t.region.height+(t.region.heightUnits==n?"%":"px"),r.width=t.region.width+e,r.position="absolute",r.top=t.region.viewportAnchorY+i,r.left=t.region.viewportAnchorX+i),r.lineHeight=t.lineHeight,t.position&&(t.writingMode==bn?r.paddingLeft=t.position:r.paddingTop=t.position),"line-left"==t.positionAlign?r.cssFloat="left":"line-right"==t.positionAlign&&(r.cssFloat="right"),r.textAlign=t.textAlign,r.textDecoration=t.textDecoration.join(" "),r.writingMode=t.writingMode,t.size&&(t.writingMode==bn?r.width=t.size+"%":r.height=t.size+"%")}function dh(e,t){vd.call(this,e,t,"closed_caption");var n,i,r=this;this.button.classList.add("shaka-caption-button"),this.a.classList.add("shaka-text-languages"),this.player&&this.player.bb()?this.button.setAttribute("aria-pressed","true"):this.button.setAttribute("aria-pressed","false"),n=this,(i=Sl("button")).setAttribute("aria-selected","true"),n.a.appendChild(i),i.appendChild(Jl()),n.g=Sl("span"),n.g.classList.add("shaka-auto-span"),i.appendChild(n.g),this.eventManager.m(this.localization,"locale-updated",function(){ph(r),fh(r)}),this.eventManager.m(this.localization,"locale-changed",function(){ph(r),fh(r)}),this.eventManager.m(this.player,"texttrackvisibility",function(){hh(r),r.player.bb()&&mh(r)}),this.eventManager.m(this.player,"textchanged",function(){fh(r)}),this.eventManager.m(this.player,"trackschanged",function(){mh(r)}),hh(this),ph(this),fh(this)}function hh(e){e.player.bb()?(e.f.classList.add("shaka-captions-on"),e.f.classList.remove("shaka-captions-off"),e.button.setAttribute("aria-pressed","true")):(e.f.classList.add("shaka-captions-off"),e.f.classList.remove("shaka-captions-on"),e.button.setAttribute("aria-pressed","false")),e.controls.dispatchEvent(new F("captionselectionupdated"))}function fh(i){var e=i.player.ib();Vl(e,i.a,function(e){return t=i,n=e,$(function e(){return te(e,function(e){switch(e.o){case 1:return J(e,t.player.ie(!0),2);case 2:t.player&&t.player.cd(n.language,n.roles[0]),j(e)}})});var t,n},i.player.bb(),i.b,i.localization,i.controls.g.trackLabelFormat),(e=Sl("button")).classList.add("shaka-turn-captions-off-button"),i.eventManager.m(e,"click",function(){i.player.ie(!1).catch(function(){}),fh(i)}),e.appendChild(i.g),i.a.appendChild(e),i.player.bb()||(e.setAttribute("aria-selected","true"),e.appendChild(Jl()),i.g.classList.add("shaka-chosen-item"),i.b.textContent=i.localization.resolve("OFF")),$l(i.a),i.controls.dispatchEvent(new F("captionselectionupdated"))}function ph(e){e.button.setAttribute("aria-label",e.localization.resolve("CAPTIONS")),e.c.setAttribute("aria-label",e.localization.resolve("BACK")),e.l.textContent=e.localization.resolve("CAPTIONS"),e.j.textContent=e.localization.resolve("CAPTIONS"),e.g.textContent=e.localization.resolve("OFF")}function mh(e){var t=0<e.player.ib().length;Zl(e.button,t),fh(e)}function gh(){}function vh(e,t,n){this.c=e,this.b=bh(),t.dataset.shakaPlayerContainer="",(t.ui=this).Se()&&t.classList.add("shaka-mobile"),this.a=new id(e,t,n,this.b),this.configure({}),n.controls||e.configure("textDisplayFactory",function(){return new oh(n,t)}),t.ui=this,n.ui=this}function bh(){return{controlPanelElements:"time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:["captions","quality","language","picture_in_picture","cast"],addSeekBar:!0,addBigPlayButton:!0,castReceiverAppId:"",clearBufferOnQualityChange:!0,showUnbufferedStart:!0,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:Th,fadeDelay:0,doubleClickForFullscreen:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0}}function yh(){return $(function e(){var n,i,r,a,o,s,u;return te(e,function(e){switch(e.o){case 1:if($u(),!Gs())return ne.error("Shaka Player does not support this browser. Please see https://tinyurl.com/y7s4j9tr for the list of supported browsers."),Eh("shaka-ui-load-failed"),e.return();if(n=document.querySelectorAll("[data-shaka-player-container]"),!(i=document.querySelectorAll("[data-shaka-player]")).length&&!n.length){e.C(2);break}if(i.length&&!n.length){for(var t=0;t<i.length;t++)(r=i[t]).ui||(a=document.createElement("div"),r.parentElement.replaceChild(a,r),a.appendChild(r),wh(a,r));e.C(2);break}o=0;case 4:if(!(o<n.length)){e.C(2);break}if((s=n[o]).ui){e.C(5);break}for(u=null,t=0;t<i.length;t++)if(i[t].parentElement==s){u=i[t];break}return u||((u=document.createElement("video")).setAttribute("playsinline",""),s.appendChild(u)),J(e,wh(s,u),5);case 5:o++,e.C(4);break;case 2:Eh("shaka-ui-loaded"),j(e)}})})}function Eh(e){var t=document.createEvent("CustomEvent");t.initCustomEvent(e,!1,!1,null),document.dispatchEvent(t)}function wh(l,d){return $(function e(){var t,n,i,r,a,o,s,u,c;return te(e,function(e){switch(e.o){case 1:t=new Fs(d),n=new vh(t,l,d),i="",l.dataset&&l.dataset.shakaPlayerCastReceiverId?i=l.dataset.shakaPlayerCastReceiverId:d.dataset&&d.dataset.shakaPlayerCastReceiverId&&(i=d.dataset.shakaPlayerCastReceiverId),i.length&&n.configure({castReceiverAppId:i}),d.controls&&n.a.sf(!0),(r=d.getAttribute("src"))&&((a=document.createElement("source")).setAttribute("src",r),d.appendChild(a),d.removeAttribute("src")),o=Y(d.querySelectorAll("source")),s=o.next();case 2:if(s.done){e.C(0);break}return u=s.value,Z(e,5),J(e,n.a.$a().load(u.getAttribute("src")),7);case 7:e.C(0);break;case 5:c=ee(e),ne.error("Error auto-loading asset",c);case 3:s=o.next(),e.C(2)}})})}y(vd,Hl),O("shaka.ui.SettingsMenu",vd),y(bd,vd),O("shaka.ui.AudioLanguageSelection",bd),wd.prototype.create=function(e,t){return new bd(e,t)},fd("language",new wd),y(Td,Hl),O("shaka.ui.PlayButton",Td),y(Id,Td),O("shaka.ui.BigPlayButton",Id),y(xd,Hl),O("shaka.ui.CastButton",xd),Md.prototype.create=function(e,t){return new xd(e,t)},fd("cast",new Md),y(Rd,Hl),O("shaka.ui.FastForwardButton",Rd),Ud.prototype.create=function(e,t){return new Rd(e,t)},ad("fast_forward",new Ud),y(_d,Hl),O("shaka.ui.FullscreenButton",_d),Dd.prototype.create=function(e,t){return new _d(e,t)},ad("fullscreen",new Dd),y(Fd,Hl),O("shaka.ui.MuteButton",Fd),Kd.prototype.create=function(e,t){return new Fd(e,t)},ad("mute",new Kd),y(Bd,Hl),O("shaka.ui.PipButton",Bd),Vd.prototype.create=function(e,t){return new Bd(e,t)},fd("picture_in_picture",new Vd),y(zd,Hl),O("shaka.ui.PresentationTimeTracker",zd),qd.prototype.create=function(e,t){return new zd(e,t)},ad("time_and_duration",new qd),y(Xd,vd),O("shaka.ui.ResolutionSelection",Xd),Xd.prototype.s=function(e){this.player.configure({abr:{enabled:!1}}),this.player.pf(e,this.controls.g.clearBufferOnQualityChange)},Jd.prototype.create=function(e,t){return new Xd(e,t)},fd("quality",new Jd),y(Zd,Hl),O("shaka.ui.RewindButton",Zd),eh.prototype.create=function(e,t){return new Zd(e,t)},ad("rewind",new eh),y(th,Td),O("shaka.ui.SmallPlayButton",th),ih.prototype.create=function(e,t){return new th(e,t)},ad("play_pause",new ih),y(rh,Hl),O("shaka.ui.Spacer",rh),ah.prototype.create=function(e,t){return new rh(e,t)},ad("spacer",new ah),O("shaka.ui.TextDisplayer",oh),oh.prototype.append=oh.prototype.append=function(e){for(var t={},n=(e=Y(e)).next();!n.done;t={cue:t.cue},n=e.next())t.cue=n.value,this.c.some(function(t){return function(e){return e.payload==t.cue.payload&&e.startTime==t.cue.startTime&&e.endTime==t.cue.endTime}}(t))||this.c.push(t.cue)},oh.prototype.destroy=oh.prototype.destroy=function(){this.j.removeChild(this.a),this.a=null,this.f=!1,this.c=[],this.g&&this.g.stop(),this.b.clear()},oh.prototype.remove=oh.prototype.remove=function(t,n){return!!this.a&&(this.c=this.c.filter(function(e){return e.startTime<t||e.endTime>=n}),sh(this),!0)},oh.prototype.isTextVisible=oh.prototype.isTextVisible=function(){return this.f},oh.prototype.setTextVisibility=oh.prototype.setTextVisibility=function(e){this.f=e},y(dh,vd),O("shaka.ui.TextSelection",dh),gh.prototype.create=function(e,t){return new dh(e,t)},fd("captions",new gh),O("shaka.ui.Overlay",vh),vh.prototype.destroy=vh.prototype.destroy=function(){var t=this;return $(function e(){return te(e,function(e){switch(e.o){case 1:if(t.a)return J(e,t.a.destroy(),3);e.C(2);break;case 3:t.a=null;case 2:if(t.c)return J(e,t.c.destroy(),5);e.C(0);break;case 5:t.c=null,j(e)}})})},vh.prototype.isMobile=vh.prototype.Se=function(){return!!/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)||ft()&&1<navigator.maxTouchPoints},vh.prototype.getConfiguration=vh.prototype.getConfiguration=function(){var e=bh();return Cs(e,this.b,bh(),{},""),e},vh.prototype.configure=vh.prototype.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Ns(e,t)),Cs(this.b,e,bh(),{},""),this.b.castReceiverAppId&&!this.b.overflowMenuButtons.includes("cast")&&this.b.overflowMenuButtons.push("cast"),this.a.configure(this.b),this.a.dispatchEvent(new F("uiupdated"))},vh.prototype.getPlayer=vh.prototype.$a=function(){return Jn("ui.Overlay.getPlayer()","Please use getControls().getPlayer() instead."),this.a.$a()},vh.prototype.getControls=vh.prototype.Yf=function(){return this.a},vh.prototype.setEnabled=vh.prototype.sh=function(e){this.a.be(e)};var Th=0,Sh=1,Ah=2;function Ih(e,t){Wl.call(this,e,t,["shaka-volume-bar-container"],["shaka-volume-bar"]);var n=this;this.f=this.controls.g,this.eventManager.m(this.video,"volumechange",function(){return kh(n)}),this.eventManager.m(this.localization,"locale-updated",function(){return xh(n)}),this.eventManager.m(this.localization,"locale-changed",function(){return xh(n)}),kh(this),xh(this)}function kh(e){e.video.muted?ql(e,0):ql(e,e.video.volume);var t=e.f.volumeBarColors,n=["to right"];n.push(t.level+100*parseFloat(e.a.value)+"%"),n.push(t.base+100*parseFloat(e.a.value)+"%"),n.push(t.base+"100%"),e.b.style.background="linear-gradient("+n.join(",")+")"}function xh(e){e.a.setAttribute("aria-label",e.localization.resolve("VOLUME"))}function Ch(){}O("shaka.ui.TrackLabelFormat",{LANGUAGE:Th,ROLE:Sh,LANGUAGE_ROLE:Ah}),"complete"==document.readyState?Promise.resolve().then(yh):h.addEventListener("load",yh),y(Ih,Wl),O("shaka.ui.VolumeBar",Ih),Ih.prototype.g=function(){this.video.volume=parseFloat(this.a.value),this.video.muted=0==this.video.volume},Ch.prototype.create=function(e,t){return new Ih(e,t)},ad("volume",new Ch)}.call(t,e,e,void 0),"undefined"!=typeof exports)for(var n in t.shaka)exports[n]=t.shaka[n];else"undefined"!=typeof define&&define.amd?define(function(){return t.shaka}):e.shaka=t.shaka}();