"use strict";const assertString=(e,t)=>{if(!e||"string"!=typeof e)throw new Error(`Expected ${t} string, got "${e}".`)},assertGameName=e=>assertString(e,"game name"),assertMatchID=e=>assertString(e,"match ID"),validateBody=(e,t)=>{if(!e)throw new Error(`Expected body, got “${e}”.`);for(const s in t){const a=t[s],r=e[s];if(typeof r!==a)throw new TypeError(`Expected body.${s} to be of type ${a}, got “${r}”.`)}};class LobbyClient{constructor({server:e=""}={}){this.server=e.replace(/\/$/,"")}async request(e,t){const s=await fetch(this.server+e,t);if(!s.ok)throw new Error(`HTTP status ${s.status}`);return s.json()}async post(e,t){let s={method:"post",body:JSON.stringify(t.body),headers:{"Content-Type":"application/json"}};return t.init&&(s={...s,...t.init,headers:{...s.headers,...t.init.headers}}),this.request(e,s)}async listGames(e){return this.request("/games",e)}async listMatches(e,t,s){assertGameName(e);let a="";if(t){const e=[],{isGameover:s,updatedBefore:r,updatedAfter:i}=t;void 0!==s&&e.push(`isGameover=${s}`),r&&e.push(`updatedBefore=${r}`),i&&e.push(`updatedAfter=${i}`),e.length>0&&(a="?"+e.join("&"))}return this.request(`/games/${e}${a}`,s)}async getMatch(e,t,s){return assertGameName(e),assertMatchID(t),this.request(`/games/${e}/${t}`,s)}async createMatch(e,t,s){return assertGameName(e),validateBody(t,{numPlayers:"number"}),this.post(`/games/${e}/create`,{body:t,init:s})}async joinMatch(e,t,s,a){return assertGameName(e),assertMatchID(t),validateBody(s,{playerID:"string",playerName:"string"}),this.post(`/games/${e}/${t}/join`,{body:s,init:a})}async leaveMatch(e,t,s,a){assertGameName(e),assertMatchID(t),validateBody(s,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/leave`,{body:s,init:a})}async updatePlayer(e,t,s,a){assertGameName(e),assertMatchID(t),validateBody(s,{playerID:"string",credentials:"string"}),await this.post(`/games/${e}/${t}/update`,{body:s,init:a})}async playAgain(e,t,s,a){return assertGameName(e),assertMatchID(t),validateBody(s,{playerID:"string",credentials:"string"}),this.post(`/games/${e}/${t}/playAgain`,{body:s,init:a})}}exports.LobbyClient=LobbyClient;