/*! OOUI v0.41.1 | http://oojs.mit-license.org */
!function(r){"use strict";r.ui.Toolbar=function(o,t,i){r.isPlainObject(o)&&void 0===i&&(o=(i=o).toolFactory,t=i.toolGroupFactory),i=i||{},r.ui.Toolbar.super.call(this,i),r.EventEmitter.call(this),r.ui.mixin.GroupElement.call(this,i),this.toolFactory=o,this.toolGroupFactory=t,this.groupsByName={},this.activeToolGroups=0,this.tools={},this.position=i.position||"top",this.$bar=$("<div>"),this.$actions=$("<div>"),this.$popups=$("<div>"),this.initialized=!1,this.narrowThreshold=null,this.onWindowResizeHandler=this.onWindowResize.bind(this),this.$overlay=(!0===i.$overlay?r.ui.getDefaultOverlay():i.$overlay)||this.$element,this.$element.add(this.$bar).add(this.$group).add(this.$actions).on("mousedown keydown",this.onPointerDown.bind(this)),this.$group.addClass("oo-ui-toolbar-tools"),i.actions&&this.$bar.append(this.$actions.addClass("oo-ui-toolbar-actions")),this.$popups.addClass("oo-ui-toolbar-popups"),this.$bar.addClass("oo-ui-toolbar-bar").append(this.$group,'<div style="clear:both"></div>'),this.$element.addClass("oo-ui-toolbar oo-ui-toolbar-position-"+this.position).append(this.$bar),this.$overlay.append(this.$popups)},r.inheritClass(r.ui.Toolbar,r.ui.Element),r.mixinClass(r.ui.Toolbar,r.EventEmitter),r.mixinClass(r.ui.Toolbar,r.ui.mixin.GroupElement),r.ui.Toolbar.prototype.getToolFactory=function(){return this.toolFactory},r.ui.Toolbar.prototype.getToolGroupFactory=function(){return this.toolGroupFactory},r.ui.Toolbar.prototype.onPointerDown=function(o){var t=$(o.target).closest(".oo-ui-widget"),o=this.$element.closest(".oo-ui-widget");if(!t.length||t[0]===o[0])return!1},r.ui.Toolbar.prototype.onWindowResize=function(){this.$element.add(this.$popups).toggleClass("oo-ui-toolbar-narrow",this.$bar[0].clientWidth<=this.getNarrowThreshold())},r.ui.Toolbar.prototype.getNarrowThreshold=function(){return null===this.narrowThreshold&&(this.narrowThreshold=this.$group[0].offsetWidth+this.$actions[0].offsetWidth),this.narrowThreshold},r.ui.Toolbar.prototype.initialize=function(){this.initialized||(this.initialized=!0,$(this.getElementWindow()).on("resize",this.onWindowResizeHandler),this.onWindowResize())},r.ui.Toolbar.prototype.setup=function(o){var t,i,e,s,l=[];for(this.reset(),t=0,i=o.length;t<i;t++)"*"===(s=o[t]).include&&(void 0===s.type&&(s.type="list"),void 0===s.label&&(s.label=r.ui.msg("ooui-toolbar-more"))),e=this.getToolGroupFactory().lookup(s.type)?s.type:"bar",e=this.getToolGroupFactory().create(e,this,s),l.push(e),(this.groupsByName[s.name]=e).connect(this,{active:"onToolGroupActive"});this.addItems(l)},r.ui.Toolbar.prototype.onToolGroupActive=function(o){o?(this.activeToolGroups++,1===this.activeToolGroups&&this.emit("active",!0)):(this.activeToolGroups--,0===this.activeToolGroups&&this.emit("active",!1))},r.ui.Toolbar.prototype.getToolGroupByName=function(o){return this.groupsByName[o]||null},r.ui.Toolbar.prototype.reset=function(){var o,t;for(this.groupsByName={},this.tools={},o=0,t=this.items.length;o<t;o++)this.items[o].destroy();this.clearItems()},r.ui.Toolbar.prototype.destroy=function(){$(this.getElementWindow()).off("resize",this.onWindowResizeHandler),this.reset(),this.$element.remove()},r.ui.Toolbar.prototype.isToolAvailable=function(o){return!this.tools[o]},r.ui.Toolbar.prototype.reserveTool=function(o){this.tools[o.getName()]=o},r.ui.Toolbar.prototype.releaseTool=function(o){delete this.tools[o.getName()]},r.ui.Toolbar.prototype.getToolAccelerator=function(){},r.ui.Tool=function(o,t){r.isPlainObject(o)&&void 0===t&&(o=(t=o).toolGroup),t=t||{},r.ui.Tool.super.call(this,t),this.toolGroup=o,this.toolbar=this.toolGroup.getToolbar(),this.active=!1,this.$title=$("<span>"),this.$accel=$("<span>"),this.$link=$("<a>"),this.title=null,this.checkIcon=new r.ui.IconWidget({icon:"check",classes:["oo-ui-tool-checkIcon"]}),r.ui.mixin.IconElement.call(this,t),r.ui.mixin.FlaggedElement.call(this,t),r.ui.mixin.TabIndexedElement.call(this,$.extend({$tabIndexed:this.$link},t)),this.toolbar.connect(this,{updateState:"onUpdateState"}),this.$title.addClass("oo-ui-tool-title"),this.$accel.addClass("oo-ui-tool-accel").prop({dir:"ltr",lang:"en"}),this.$link.addClass("oo-ui-tool-link").append(this.checkIcon.$element,this.$icon,this.$title,this.$accel).attr("role","button"),r.ui.isMobile()||this.$link.append(this.$accel),this.$element.data("oo-ui-tool",this).addClass("oo-ui-tool").addClass("oo-ui-tool-name-"+this.constructor.static.name.replace(/^([^/]+)\/([^/]+).*$/,"$1-$2")).toggleClass("oo-ui-tool-with-label",this.constructor.static.displayBothIconAndLabel).append(this.$link),this.setTitle(t.title||this.constructor.static.title)},r.inheritClass(r.ui.Tool,r.ui.Widget),r.mixinClass(r.ui.Tool,r.ui.mixin.IconElement),r.mixinClass(r.ui.Tool,r.ui.mixin.FlaggedElement),r.mixinClass(r.ui.Tool,r.ui.mixin.TabIndexedElement),r.ui.Tool.static.tagName="span",r.ui.Tool.static.name="",r.ui.Tool.static.group="",r.ui.Tool.static.title="",r.ui.Tool.static.displayBothIconAndLabel=!1,r.ui.Tool.static.autoAddToCatchall=!0,r.ui.Tool.static.autoAddToGroup=!0,r.ui.Tool.static.isCompatibleWith=function(){return!1},r.ui.Tool.prototype.onUpdateState=null,r.ui.Tool.prototype.onSelect=null,r.ui.Tool.prototype.isActive=function(){return this.active},r.ui.Tool.prototype.setActive=function(o){this.active=!!o,this.$element.toggleClass("oo-ui-tool-active",this.active),this.updateThemeClasses()},r.ui.Tool.prototype.setTitle=function(o){return this.title=r.ui.resolveMsg(o),this.updateTitle(),this},r.ui.Tool.prototype.getTitle=function(){return this.title},r.ui.Tool.prototype.getName=function(){return this.constructor.static.name},r.ui.Tool.prototype.updateTitle=function(){var o=this.toolGroup.constructor.static.titleTooltips,t=this.toolGroup.constructor.static.accelTooltips,i=this.toolbar.getToolAccelerator(this.constructor.static.name),e=[];this.$title.text(this.title),this.$accel.text(i),o&&"string"==typeof this.title&&this.title.length&&e.push(this.title),t&&"string"==typeof i&&i.length&&e.push(i),e.length?this.$link.attr("title",e.join(" ")):this.$link.removeAttr("title")},r.ui.Tool.prototype.setIcon=function(o){return r.ui.mixin.IconElement.prototype.setIcon.call(this,o),this.$element.toggleClass("oo-ui-tool-with-icon",!!this.icon),this},r.ui.Tool.prototype.destroy=function(){this.toolbar.disconnect(this),this.$element.remove()},r.ui.ToolGroup=function(o,t){r.isPlainObject(o)&&void 0===t&&(o=(t=o).toolbar),t=t||{},r.ui.ToolGroup.super.call(this,t),r.ui.mixin.GroupElement.call(this,t),this.toolbar=o,this.tools={},this.pressed=null,this.autoDisabled=!1,this.include=t.include||[],this.exclude=t.exclude||[],this.promote=t.promote||[],this.demote=t.demote||[],this.onDocumentMouseKeyUpHandler=this.onDocumentMouseKeyUp.bind(this),this.$group.on({mousedown:this.onMouseKeyDown.bind(this),mouseup:this.onMouseKeyUp.bind(this),keydown:this.onMouseKeyDown.bind(this),keyup:this.onMouseKeyUp.bind(this),focus:this.onMouseOverFocus.bind(this),blur:this.onMouseOutBlur.bind(this),mouseover:this.onMouseOverFocus.bind(this),mouseout:this.onMouseOutBlur.bind(this)}),this.toolbar.getToolFactory().connect(this,{register:"onToolFactoryRegister"}),this.aggregate({disable:"itemDisable"}),this.connect(this,{itemDisable:"updateDisabled",disable:"onDisable"}),this.$group.addClass("oo-ui-toolGroup-tools"),this.$element.addClass("oo-ui-toolGroup").append(this.$group),this.onDisable(this.isDisabled()),this.populate()},r.inheritClass(r.ui.ToolGroup,r.ui.Widget),r.mixinClass(r.ui.ToolGroup,r.ui.mixin.GroupElement),r.ui.ToolGroup.static.titleTooltips=!1,r.ui.ToolGroup.static.accelTooltips=!1,r.ui.ToolGroup.static.autoDisable=!0,r.ui.ToolGroup.static.name=null,r.ui.ToolGroup.prototype.isDisabled=function(){return this.autoDisabled||r.ui.ToolGroup.super.prototype.isDisabled.apply(this,arguments)},r.ui.ToolGroup.prototype.updateDisabled=function(){var o,t=!0;if(this.constructor.static.autoDisable){for(o=this.items.length-1;0<=o;o--)if(!this.items[o].isDisabled()){t=!1;break}this.autoDisabled=t}r.ui.ToolGroup.super.prototype.updateDisabled.apply(this,arguments)},r.ui.ToolGroup.prototype.onDisable=function(o){this.$group.toggleClass("oo-ui-toolGroup-disabled-tools",o),this.$group.toggleClass("oo-ui-toolGroup-enabled-tools",!o)},r.ui.ToolGroup.prototype.onMouseKeyDown=function(o){if(!this.isDisabled()&&(o.which===r.ui.MouseButtons.LEFT||o.which===r.ui.Keys.SPACE||o.which===r.ui.Keys.ENTER)&&(this.pressed=this.findTargetTool(o),this.pressed))return this.pressed.setActive(!0),this.getElementDocument().addEventListener("mouseup",this.onDocumentMouseKeyUpHandler,!0),this.getElementDocument().addEventListener("keyup",this.onDocumentMouseKeyUpHandler,!0),!1},r.ui.ToolGroup.prototype.onDocumentMouseKeyUp=function(o){this.getElementDocument().removeEventListener("mouseup",this.onDocumentMouseKeyUpHandler,!0),this.getElementDocument().removeEventListener("keyup",this.onDocumentMouseKeyUpHandler,!0),this.onMouseKeyUp(o)},r.ui.ToolGroup.prototype.onMouseKeyUp=function(o){var t=this.findTargetTool(o);this.isDisabled()||!this.pressed||this.pressed!==t||o.which!==r.ui.MouseButtons.LEFT&&o.which!==r.ui.Keys.SPACE&&o.which!==r.ui.Keys.ENTER||(this.pressed.onSelect(),this.pressed=null,o.preventDefault(),o.stopPropagation()),this.pressed=null},r.ui.ToolGroup.prototype.onMouseOverFocus=function(o){o=this.findTargetTool(o);this.pressed&&this.pressed===o&&this.pressed.setActive(!0)},r.ui.ToolGroup.prototype.onMouseOutBlur=function(o){o=this.findTargetTool(o);this.pressed&&this.pressed===o&&this.pressed.setActive(!1)},r.ui.ToolGroup.prototype.findTargetTool=function(o){var t,o=$(o.target).closest(".oo-ui-tool-link");return(t=o.length?o.parent().data("oo-ui-tool"):t)&&!t.isDisabled()?t:null},r.ui.ToolGroup.prototype.onToolFactoryRegister=function(){this.populate()},r.ui.ToolGroup.prototype.getToolbar=function(){return this.toolbar},r.ui.ToolGroup.prototype.populate=function(){for(var o,t,i=this.toolbar.getToolFactory(),e={},s=[],l=[],u=this.toolbar.getToolFactory().getTools(this.include,this.exclude,this.promote,this.demote),n=0,p=u.length;n<p;n++)o=u[n],i.lookup(o)&&(this.toolbar.isToolAvailable(o)||this.tools[o])&&(this.toolbar.tools[o]=!0,(t=this.tools[o])||(this.tools[o]=t=i.create(o,this),t.updateTitle()),this.toolbar.reserveTool(t),s.push(t),e[o]=!0);for(o in this.tools)e[o]||(this.tools[o].destroy(),this.toolbar.releaseTool(this.tools[o]),l.push(this.tools[o]),delete this.tools[o]);l.length&&this.removeItems(l),s.length?this.$element.removeClass("oo-ui-toolGroup-empty"):this.$element.addClass("oo-ui-toolGroup-empty"),this.addItems(s),this.updateDisabled()},r.ui.ToolGroup.prototype.destroy=function(){for(var o in this.clearItems(),this.toolbar.getToolFactory().disconnect(this),this.tools)this.toolbar.releaseTool(this.tools[o]),this.tools[o].disconnect(this).destroy(),delete this.tools[o];this.$element.remove()},r.ui.ToolFactory=function(){r.ui.ToolFactory.super.call(this)},r.inheritClass(r.ui.ToolFactory,r.Factory),r.ui.ToolFactory.prototype.getTools=function(o,t,i,e){for(var s=[],l={},u=r.simpleArrayDifference(this.extract(o),this.extract(t)),i=this.extract(i,l),e=this.extract(e,l),n=0,p=u.length;n<p;n++)l[u[n]]||s.push(u[n]);return i.concat(s).concat(e)},r.ui.ToolFactory.prototype.extract=function(o,t){for(var i,e,s,l=[],u=0,n=(o=Array.isArray(o)?o:[o]).length;u<n;u++)if("*"===(i=o[u]))for(e in this.registry)!(s=this.registry[e]).static.autoAddToCatchall||t&&t[e]||(l.push(e),t&&(t[e]=!0));else if("string"==typeof i&&(i={name:i}),r.isPlainObject(i))if(i.group)for(e in this.registry)(s=this.registry[e]).static.group!==i.group||!s.static.autoAddToGroup||t&&t[e]||(l.push(e),t&&(t[e]=!0));else!i.name||t&&t[i.name]||(l.push(i.name),t&&(t[i.name]=!0));return l},r.ui.ToolGroupFactory=function(){var o,t,i;for(r.Factory.call(this),o=0,t=(i=this.constructor.static.getDefaultClasses()).length;o<t;o++)this.register(i[o])},r.inheritClass(r.ui.ToolGroupFactory,r.Factory),r.ui.ToolGroupFactory.static.getDefaultClasses=function(){return[r.ui.BarToolGroup,r.ui.ListToolGroup,r.ui.MenuToolGroup]},r.ui.PopupTool=function(o,t){r.isPlainObject(o)&&void 0===t&&(o=(t=o).toolGroup),r.ui.PopupTool.super.call(this,o,t),r.ui.mixin.PopupElement.call(this,t),this.popup.connect(this,{toggle:"onPopupToggle"}),this.popup.setAutoFlip(!1),this.popup.setPosition("bottom"===o.getToolbar().position?"above":"below"),this.$element.addClass("oo-ui-popupTool"),this.popup.$element.addClass("oo-ui-popupTool-popup"),this.toolbar.$popups.append(this.popup.$element)},r.inheritClass(r.ui.PopupTool,r.ui.Tool),r.mixinClass(r.ui.PopupTool,r.ui.mixin.PopupElement),r.ui.PopupTool.prototype.onSelect=function(){return this.isDisabled()||this.popup.toggle(),!1},r.ui.PopupTool.prototype.onUpdateState=function(){},r.ui.PopupTool.prototype.onPopupToggle=function(o){this.setActive(o),this.toolGroup.emit("active",o)},r.ui.ToolGroupTool=function(o,t){r.isPlainObject(o)&&void 0===t&&(o=(t=o).toolGroup),r.ui.ToolGroupTool.super.call(this,o,t),this.innerToolGroup=this.createGroup(this.constructor.static.groupConfig),this.innerToolGroup.connect(this,{disable:"onToolGroupDisable",active:this.toolGroup.emit.bind(this.toolGroup,"active")}),this.$link.remove(),this.$element.addClass("oo-ui-toolGroupTool").append(this.innerToolGroup.$element)},r.inheritClass(r.ui.ToolGroupTool,r.ui.Tool),r.ui.ToolGroupTool.static.groupConfig={},r.ui.ToolGroupTool.prototype.onSelect=function(){return this.innerToolGroup.setActive(!this.innerToolGroup.active),!1},r.ui.ToolGroupTool.prototype.onToolGroupDisable=function(o){this.setDisabled(o)},r.ui.ToolGroupTool.prototype.onUpdateState=function(){this.setActive(!1)},r.ui.ToolGroupTool.prototype.createGroup=function(o){return"*"===o.include&&void 0===o.label&&(o.label=r.ui.msg("ooui-toolbar-more")),this.toolbar.getToolGroupFactory().create("list",this.toolbar,o)},r.ui.BarToolGroup=function(o,t){r.isPlainObject(o)&&void 0===t&&(o=(t=o).toolbar),r.ui.BarToolGroup.super.call(this,o,t),this.$element.addClass("oo-ui-barToolGroup"),this.$group.addClass("oo-ui-barToolGroup-tools")},r.inheritClass(r.ui.BarToolGroup,r.ui.ToolGroup),r.ui.BarToolGroup.static.titleTooltips=!0,r.ui.BarToolGroup.static.accelTooltips=!0,r.ui.BarToolGroup.static.name="bar",r.ui.PopupToolGroup=function(o,t){r.isPlainObject(o)&&void 0===t&&(o=(t=o).toolbar),t=$.extend({indicator:void 0===t.indicator?"bottom"===o.position?"up":"down":t.indicator},t),r.ui.PopupToolGroup.super.call(this,o,t),this.active=!1,this.dragging=!1,this.onPopupDocumentMouseKeyUpHandler=this.onPopupDocumentMouseKeyUp.bind(this),this.$handle=$("<span>"),r.ui.mixin.IconElement.call(this,t),r.ui.mixin.IndicatorElement.call(this,t),r.ui.mixin.LabelElement.call(this,t),r.ui.mixin.TitledElement.call(this,t),r.ui.mixin.FlaggedElement.call(this,t),r.ui.mixin.ClippableElement.call(this,$.extend({$clippable:this.$group},t)),r.ui.mixin.FloatableElement.call(this,$.extend({$floatable:this.$group,$floatableContainer:this.$handle,hideWhenOutOfView:!1,verticalPosition:"bottom"===this.toolbar.position?"above":"below"},t)),r.ui.mixin.TabIndexedElement.call(this,$.extend({$tabIndexed:this.$handle},t)),this.$handle.on({keydown:this.onHandleMouseKeyDown.bind(this),keyup:this.onHandleMouseKeyUp.bind(this),mousedown:this.onHandleMouseKeyDown.bind(this),mouseup:this.onHandleMouseKeyUp.bind(this)}),this.$handle.addClass("oo-ui-popupToolGroup-handle").attr("role","button").attr("aria-expanded","false").append(this.$icon,this.$label,this.$indicator),void 0!==t.header&&this.$group.prepend($("<span>").addClass("oo-ui-popupToolGroup-header").text(t.header)),this.$element.addClass("oo-ui-popupToolGroup").prepend(this.$handle),this.$group.addClass("oo-ui-popupToolGroup-tools"),this.toolbar.$popups.append(this.$group)},r.inheritClass(r.ui.PopupToolGroup,r.ui.ToolGroup),r.mixinClass(r.ui.PopupToolGroup,r.ui.mixin.IconElement),r.mixinClass(r.ui.PopupToolGroup,r.ui.mixin.IndicatorElement),r.mixinClass(r.ui.PopupToolGroup,r.ui.mixin.LabelElement),r.mixinClass(r.ui.PopupToolGroup,r.ui.mixin.TitledElement),r.mixinClass(r.ui.PopupToolGroup,r.ui.mixin.FlaggedElement),r.mixinClass(r.ui.PopupToolGroup,r.ui.mixin.ClippableElement),r.mixinClass(r.ui.PopupToolGroup,r.ui.mixin.FloatableElement),r.mixinClass(r.ui.PopupToolGroup,r.ui.mixin.TabIndexedElement),r.ui.PopupToolGroup.prototype.setDisabled=function(){r.ui.PopupToolGroup.super.prototype.setDisabled.apply(this,arguments),this.isDisabled()&&this.isElementAttached()&&this.setActive(!1)},r.ui.PopupToolGroup.prototype.onPopupDocumentMouseKeyUp=function(o){o=$(o.target);o.closest(".oo-ui-popupToolGroup")[0]!==this.$element[0]&&o.closest(".oo-ui-popupToolGroup-tools")[0]!==this.$group[0]&&this.setActive(!1)},r.ui.PopupToolGroup.prototype.onMouseKeyUp=function(o){return this.isDisabled()||!this.pressed||this.pressed!==this.findTargetTool(o)||o.which!==r.ui.MouseButtons.LEFT&&o.which!==r.ui.Keys.SPACE&&o.which!==r.ui.Keys.ENTER||this.setActive(!1),r.ui.PopupToolGroup.super.prototype.onMouseKeyUp.call(this,o)},r.ui.PopupToolGroup.prototype.onMouseKeyDown=function(o){var t,i;if(!this.isDisabled()&&o.which===r.ui.Keys.TAB){if(t=$(document.activeElement),i=r.ui.findFocusable(this.$group),t[0]===i[0]&&o.shiftKey)return this.$handle.trigger("focus"),!1;i=r.ui.findFocusable(this.$group,!0),t[0]!==i[0]||o.shiftKey||(this.$handle.trigger("focus"),this.setActive(!1))}return r.ui.PopupToolGroup.super.prototype.onMouseKeyDown.call(this,o)},r.ui.PopupToolGroup.prototype.onHandleMouseKeyUp=function(o){if(!this.isDisabled()&&(o.which===r.ui.MouseButtons.LEFT||o.which===r.ui.Keys.SPACE||o.which===r.ui.Keys.ENTER))return!1},r.ui.PopupToolGroup.prototype.onHandleMouseKeyDown=function(o){var t;if(!this.isDisabled())return o.which===r.ui.Keys.TAB&&!o.shiftKey&&(t=r.ui.findFocusable(this.$group)).length?(t.trigger("focus"),!1):o.which===r.ui.MouseButtons.LEFT||o.which===r.ui.Keys.SPACE||o.which===r.ui.Keys.ENTER?(this.setActive(!this.active),!1):void 0},r.ui.PopupToolGroup.prototype.isActive=function(){return this.active},r.ui.PopupToolGroup.prototype.setActive=function(o){var t;o=!!o,this.active!==o&&((this.active=o)?(this.getElementDocument().addEventListener("mouseup",this.onPopupDocumentMouseKeyUpHandler,!0),this.getElementDocument().addEventListener("keyup",this.onPopupDocumentMouseKeyUpHandler,!0),this.$clippable.css("left",""),this.$element.addClass("oo-ui-popupToolGroup-active"),this.$group.addClass("oo-ui-popupToolGroup-active-tools"),this.$handle.attr("aria-expanded",!0),this.togglePositioning(!0),this.toggleClipping(!0),this.setHorizontalPosition("start"),(this.isClippedHorizontally()||this.isFloatableOutOfView())&&this.setHorizontalPosition("end"),(this.isClippedHorizontally()||this.isFloatableOutOfView())&&(t=this.$clippableScrollableContainer.width(),o=this.$clippableScrollableContainer[0]===document.documentElement?0:this.$clippableScrollableContainer.offset().left,this.toggleClipping(!1),this.setHorizontalPosition("start"),this.$clippable.css({"margin-left":-(this.$element.offset().left-o),width:t}))):(this.getElementDocument().removeEventListener("mouseup",this.onPopupDocumentMouseKeyUpHandler,!0),this.getElementDocument().removeEventListener("keyup",this.onPopupDocumentMouseKeyUpHandler,!0),this.$element.removeClass("oo-ui-popupToolGroup-active"),this.$group.removeClass("oo-ui-popupToolGroup-active-tools"),this.$handle.attr("aria-expanded",!1),this.togglePositioning(!1),this.toggleClipping(!1)),this.emit("active",this.active),this.updateThemeClasses())},r.ui.ListToolGroup=function(o,t){r.isPlainObject(o)&&void 0===t&&(o=(t=o).toolbar),t=t||{},this.allowCollapse=t.allowCollapse,this.forceExpand=t.forceExpand,this.expanded=void 0!==t.expanded&&t.expanded,this.collapsibleTools=[],r.ui.ListToolGroup.super.call(this,o,t),this.$element.addClass("oo-ui-listToolGroup"),this.$group.addClass("oo-ui-listToolGroup-tools")},r.inheritClass(r.ui.ListToolGroup,r.ui.PopupToolGroup),r.ui.ListToolGroup.static.name="list",r.ui.ListToolGroup.prototype.populate=function(){var o,t,i=[];for(r.ui.ListToolGroup.super.prototype.populate.call(this),void 0!==this.allowCollapse?i=this.allowCollapse:void 0!==this.forceExpand&&(i=r.simpleArrayDifference(Object.keys(this.tools),this.forceExpand)),this.collapsibleTools=[],o=0,t=i.length;o<t;o++)void 0!==this.tools[i[o]]&&this.collapsibleTools.push(this.tools[i[o]]);this.$group.append(this.getExpandCollapseTool().$element),this.getExpandCollapseTool().toggle(0!==this.collapsibleTools.length),this.updateCollapsibleState()},r.ui.ListToolGroup.prototype.getExpandCollapseTool=function(){var o;return void 0===this.expandCollapseTool&&(o=function(){o.super.apply(this,arguments)},r.inheritClass(o,r.ui.Tool),o.prototype.onSelect=function(){this.toolGroup.expanded=!this.toolGroup.expanded,this.toolGroup.updateCollapsibleState(),this.setActive(!1)},o.prototype.onUpdateState=function(){},o.static.name="more-fewer",this.expandCollapseTool=new o(this)),this.expandCollapseTool},r.ui.ListToolGroup.prototype.onMouseKeyUp=function(o){return(!$(o.target).closest(".oo-ui-tool-name-more-fewer").length||o.which!==r.ui.MouseButtons.LEFT&&o.which!==r.ui.Keys.SPACE&&o.which!==r.ui.Keys.ENTER?r.ui.ListToolGroup:r.ui.ListToolGroup.super).super.prototype.onMouseKeyUp.call(this,o)},r.ui.ListToolGroup.prototype.updateCollapsibleState=function(){var o,t,i="bottom"!==this.toolbar.position?this.expanded?"collapse":"expand":this.expanded?"expand":"collapse";for(this.getExpandCollapseTool().setIcon(i).setTitle(r.ui.msg(this.expanded?"ooui-toolgroup-collapse":"ooui-toolgroup-expand")),o=0,t=this.collapsibleTools.length;o<t;o++)this.collapsibleTools[o].toggle(this.expanded);this.clip()},r.ui.MenuToolGroup=function(o,t){r.isPlainObject(o)&&void 0===t&&(o=(t=o).toolbar),t=t||{},r.ui.MenuToolGroup.super.call(this,o,t),this.toolbar.connect(this,{updateState:"onUpdateState"}),this.$element.addClass("oo-ui-menuToolGroup"),this.$group.addClass("oo-ui-menuToolGroup-tools")},r.inheritClass(r.ui.MenuToolGroup,r.ui.PopupToolGroup),r.ui.MenuToolGroup.static.name="menu",r.ui.MenuToolGroup.prototype.onUpdateState=function(){var o,t=[];for(o in this.tools)this.tools[o].isActive()&&t.push(this.tools[o].getTitle());this.setLabel(t.join(", ")||" ")}}(OO);
//# sourceMappingURL=oojs-ui-toolbars.min.js.map