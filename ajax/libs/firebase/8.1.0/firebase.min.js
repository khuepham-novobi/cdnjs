!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return p&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function n(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(d&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(f&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(y&&d&&m(t))this._bodyArrayBuffer=n(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y||!ArrayBuffer.prototype.isPrototypeOf(t)&&!_(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=n(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(e)}),this.text=function(){var t,e,n=o(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,n=a(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n,r=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(t=(n=e.method||this.method||"GET").toUpperCase(),-1<b.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function l(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}var f,p,d,v,y,g,m,_,b,w;(Ge="undefined"!=typeof self?self:void 0).fetch||(f="URLSearchParams"in Ge,p="Symbol"in Ge&&"iterator"in Symbol,d="FileReader"in Ge&&"Blob"in Ge&&function(){try{return new Blob,!0}catch(t){return!1}}(),v="FormData"in Ge,(y="ArrayBuffer"in Ge)&&(g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},_=ArrayBuffer.isView||function(t){return t&&-1<g.indexOf(Object.prototype.toString.call(t))}),s.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+","+e:e},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=i(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},s.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},p&&(s.prototype[Symbol.iterator]=s.prototype.entries),b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t},w=[301,302,303,307,308],l.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},Ge.Headers=s,Ge.Request=c,Ge.Response=l,Ge.fetch=function(n,o){return new Promise(function(r,t){var e=new c(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new s,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":");(t=e.shift().trim())&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new l(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&d&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},Ge.fetch.polyfill=!0);var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function I(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}function T(t){try{return!!t()}catch(t){return!0}}function S(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function C(t){return V.call(t).slice(8,-1)}function N(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function A(t){return B(N(t))}function k(t){return"object"==typeof t?null!==t:"function"==typeof t}function O(t,e){if(!k(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!k(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!k(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!k(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function R(t,e){return W.call(t,e)}function P(t){return K?H.createElement(t):{}}function D(t){if(!k(t))throw TypeError(String(t)+" is not an object");return t}function x(e,n){try{J(L,e,n)}catch(t){L[e]=n}return n}var L=(Xe=function(t){return t&&t.Math==Math&&t})("object"==typeof globalThis&&globalThis)||Xe("object"==typeof window&&window)||Xe("object"==typeof self&&self)||Xe("object"==typeof E&&E)||function(){return this}()||Function("return this")(),M=!T(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),F={}.propertyIsEnumerable,U=Object.getOwnPropertyDescriptor,j={f:U&&!F.call({1:2},1)?function(t){return!!(t=U(this,t))&&t.enumerable}:F},V={}.toString,q="".split,B=T(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==C(t)?q.call(t,""):Object(t)}:Object,W={}.hasOwnProperty,H=L.document,K=k(H)&&k(H.createElement),z=!M&&!T(function(){return 7!=Object.defineProperty(P("div"),"a",{get:function(){return 7}}).a}),G=Object.getOwnPropertyDescriptor,Q={f:M?G:function(t,e){if(t=A(t),e=O(e,!0),z)try{return G(t,e)}catch(t){}if(R(t,e))return S(!j.f.call(t,e),t[e])}},Y=Object.defineProperty,X={f:M?Y:function(t,e,n){if(D(t),e=O(e,!0),D(n),z)try{return Y(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},J=M?function(t,e,n){return X.f(t,e,S(1,n))}:function(t,e,n){return t[e]=n,t},$=L[$e="__core-js_shared__"]||x($e,{}),Z=Function.toString;function tt(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++pt+dt).toString(36)}"function"!=typeof $.inspectSource&&($.inspectSource=function(t){return Z.call(t)});var et,nt,rt,it,ot,st,at,ut,ct=$.inspectSource,ht="function"==typeof(Ie=L.WeakMap)&&/native code/.test(ct(Ie)),lt=!1,ft=I(function(t){(t.exports=function(t,e){return $[t]||($[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.7.0",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),pt=0,dt=Math.random(),vt=ft("keys"),yt=function(t){return vt[t]||(vt[t]=tt(t))},gt={},mt=L.WeakMap;function _t(t){return"function"==typeof t?t:void 0}function bt(t,e){return arguments.length<2?_t(Pt[t])||_t(L[t]):Pt[t]&&Pt[t][e]||L[t]&&L[t][e]}function wt(t){return isNaN(t=+t)?0:(0<t?xt:Dt)(t)}function Et(t){return 0<t?Lt(wt(t),9007199254740991):0}function It(t,e){var n,r=A(t),i=0,o=[];for(n in r)!R(gt,n)&&R(r,n)&&o.push(n);for(;e.length>i;)R(r,n=e[i++])&&(~Ut(o,n)||o.push(n));return o}function Tt(t,e){for(var n=Wt(e),r=X.f,i=Q.f,o=0;o<n.length;o++){var s=n[o];R(t,s)||r(t,s,i(e,s))}}function St(t,e){var n,r,i,o=t.target,s=t.global,a=t.stat,u=s?L:a?L[o]||x(o,{}):(L[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=Xt(u,n))&&i.value:u[n],!Yt(s?n:o+(a?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;Tt(r,i)}(t.sham||i&&i.sham)&&J(r,"sham",!0),Rt(u,n,r,t)}}function Ct(t){return Object(N(t))}function Nt(){}function At(t){return"<script>"+t+"<\/script>"}at=ht?(et=$.state||($.state=new mt),nt=et.get,rt=et.has,it=et.set,ot=function(t,e){return e.facade=t,it.call(et,t,e),e},st=function(t){return nt.call(et,t)||{}},function(t){return rt.call(et,t)}):(ut=yt("state"),gt[ut]=!0,ot=function(t,e){return e.facade=t,J(t,ut,e),e},st=function(t){return R(t,ut)?t[ut]:{}},function(t){return R(t,ut)});var kt,Ot={set:ot,get:st,has:at,enforce:function(t){return at(t)?st(t):ot(t,{})},getterFor:function(n){return function(t){var e;if(!k(t)||(e=st(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},Rt=I(function(t){var e=Ot.get,a=Ot.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||R(n,"name")||J(n,"name",e),(r=a(n)).source||(r.source=u.join("string"==typeof e?e:""))),t!==L?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:J(t,e,n)):o?t[e]=n:x(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||ct(this)})}),Pt=L,Dt=Math.ceil,xt=Math.floor,Lt=Math.min,Mt=Math.max,Ft=Math.min,Ut=((Ge=function(a){return function(t,e,n){var r,i=A(t),o=Et(i.length),s=(t=o,(n=wt(n=n))<0?Mt(n+t,0):Ft(n,t));if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}})(!0),Ge(!1)),jt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Vt=jt.concat("length","prototype"),qt={f:Object.getOwnPropertyNames||function(t){return It(t,Vt)}},Bt={f:Object.getOwnPropertySymbols},Wt=bt("Reflect","ownKeys")||function(t){var e=qt.f(D(t)),n=Bt.f;return n?e.concat(n(t)):e},Ht=/#|\.prototype\./,Kt=(Xe=function(t,e){return(t=zt[Kt(t)])==Qt||t!=Gt&&("function"==typeof e?T(e):!!e)}).normalize=function(t){return String(t).replace(Ht,".").toLowerCase()},zt=Xe.data={},Gt=Xe.NATIVE="N",Qt=Xe.POLYFILL="P",Yt=Xe,Xt=Q.f,E=!T(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Jt=yt("IE_PROTO"),$t=Object.prototype,Zt=E?Object.getPrototypeOf:function(t){return R(t=Ct(t),Jt)?t[Jt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?$t:null},te=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return D(t),function(){if(!k(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(),r?n.call(t,e):t.__proto__=e,t}}():void 0),ee=Object.keys||function(t){return It(t,jt)},ne=M?Object.defineProperties:function(t,e){D(t);for(var n,r=ee(e),i=r.length,o=0;o<i;)X.f(t,n=r[o++],e[n]);return t},re=bt("document","documentElement"),ie="prototype",oe=yt("IE_PROTO"),se=function(){try{kt=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;se=kt?function(t){t.write(At("")),t.close();var e=t.parentWindow.Object;return t=null,e}(kt):((t=P("iframe")).style.display="none",re.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(At("document.F=Object")),t.close(),t.F);for(var e=jt.length;e--;)delete se[ie][jt[e]];return se()};function ae(t){return R(pe,t)||(fe&&R(de,t)?pe[t]=de[t]:pe[t]=ve("Symbol."+t)),pe[t]}function ue(t){return void 0!==t&&(ye.Array===t||me[ge]===t)}function ce(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function he(r,i,t){if(ce(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}gt[oe]=!0;var le=Object.create||function(t,e){var n;return null!==t?(Nt[ie]=D(t),n=new Nt,Nt[ie]=null,n[oe]=t):n=se(),void 0===e?n:ne(n,e)},fe=!!Object.getOwnPropertySymbols&&!T(function(){return!String(Symbol())}),F=fe&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,pe=ft("wks"),de=L.Symbol,ve=F?de:de&&de.withoutSetter||tt,ye={},ge=ae("iterator"),me=Array.prototype;function _e(t){if(null!=t)return t[Ne]||t["@@iterator"]||ye[Ce(t)]}function be(t){var e=t.return;return void 0!==e&&D(e.call(t)).value}function we(t,e){this.stopped=t,this.result=e}function Ee(t,e,n){function r(t){return o&&be(o),new we(!0,t)}function i(t){return f?(D(t),d?v(t[0],t[1],r):v(t[0],t[1])):d?v(t,r):v(t)}var o,s,a,u,c,h,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=he(e,l,1+f+d);if(p)o=t;else{if("function"!=typeof(p=_e(t)))throw TypeError("Target is not iterable");if(ue(p)){for(s=0,a=Et(t.length);s<a;s++)if((u=i(t[s]))&&u instanceof we)return u;return new we(!1)}o=p.call(t)}for(c=o.next;!(h=c.call(o)).done;){try{u=i(h.value)}catch(t){throw be(o),t}if("object"==typeof u&&u&&u instanceof we)return u}return new we(!1)}($e={})[ae("toStringTag")]="z";var Ie="[object z]"===String($e),Te=ae("toStringTag"),Se="Arguments"==C(function(){return arguments}()),Ce=Ie?C:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Te))?t:Se?C(e):"Object"==(t=C(e))&&"function"==typeof e.callee?"Arguments":t},Ne=ae("iterator"),Ae=function(t,e){var n=this;return n instanceof Ae?(te&&(n=te(new Error(void 0),Zt(n))),void 0!==e&&J(n,"message",String(e)),Ee(t,(e=[]).push,{that:e}),J(n,"errors",e),n):new Ae(t,e)};function ke(t,e,n){for(var r in e)Rt(t,r,e[r],n);return t}function Oe(t,e,n){t&&!R(t=n?t:t.prototype,Le)&&xe(t,Le,{configurable:!0,value:e})}function Re(t){var e=bt(t),t=X.f;M&&e&&!e[Me]&&t(e,Me,{configurable:!0,get:function(){return this}})}function Pe(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}Ae.prototype=le(Error.prototype,{constructor:S(5,Ae),message:S(5,""),name:S(5,"AggregateError")}),St({global:!0},{AggregateError:Ae}),ht=Ie?{}.toString:function(){return"[object "+Ce(this)+"]"},Ie||Rt(Object.prototype,"toString",ht,{unsafe:!0});var De=L.Promise,xe=X.f,Le=ae("toStringTag"),Me=ae("species"),Fe=ae("iterator"),Ue=!1;try{var je=0,Ve={next:function(){return{done:!!je++}},return:function(){Ue=!0}};Ve[Fe]=function(){return this},Array.from(Ve,function(){throw 2})}catch(Gs){}function qe(t,e){if(!e&&!Ue)return!1;var n=!1;try{var r={};r[Fe]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Be(t,e){var n;return void 0===(t=D(t).constructor)||null==(n=D(t)[ze])?e:ce(n)}function We(t){var e;en.hasOwnProperty(t)&&(e=en[t],delete en[t],e())}function He(t){return function(){We(t)}}var Ke,ze=ae("species"),mt=bt("navigator","userAgent")||"",Ge=/(iphone|ipod|ipad).*applewebkit/i.test(mt),Qe="process"==C(L.process),Ye=L.location,Xe=L.setImmediate,E=L.clearImmediate,Je=L.process,$e=L.MessageChannel,Ze=L.Dispatch,tn=0,en={},nn="onreadystatechange",Ie=function(t){We(t.data)},ht=function(t){L.postMessage(t+"",Ye.protocol+"//"+Ye.host)};Xe&&E||(Xe=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return en[++tn]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ke(tn),tn},E=function(t){delete en[t]},Qe?Ke=function(t){Je.nextTick(He(t))}:Ze&&Ze.now?Ke=function(t){Ze.now(He(t))}:$e&&!Ge?(fn=($e=new $e).port2,$e.port1.onmessage=Ie,Ke=he(fn.postMessage,fn,1)):L.addEventListener&&"function"==typeof postMessage&&!L.importScripts&&Ye&&"file:"!==Ye.protocol&&!T(ht)?(Ke=ht,L.addEventListener("message",Ie,!1)):Ke=nn in P("script")?function(t){re.appendChild(P("script"))[nn]=function(){re.removeChild(this),We(t)}}:function(t){setTimeout(He(t),0)});var rn,on,sn,an,un,cn,hn,ln,fn={set:Xe,clear:E},ht=Q.f,pn=fn.set,Ie=L.MutationObserver||L.WebKitMutationObserver,Xe=L.document,dn=L.process,E=L.Promise;function vn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=ce(n),this.reject=ce(r)}function yn(t,e){return D(t),k(e)&&e.constructor===t?e:((0,(t=_n.f(t)).resolve)(e),t.promise)}function gn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}(ht=(ht=ht(L,"queueMicrotask"))&&ht.value)||(rn=function(){var t,e;for(Qe&&(t=dn.domain)&&t.exit();on;){e=on.fn,on=on.next;try{e()}catch(t){throw on?an():sn=void 0,t}}sn=void 0,t&&t.enter()},an=!Ge&&!Qe&&Ie&&Xe?(un=!0,cn=Xe.createTextNode(""),new Ie(rn).observe(cn,{characterData:!0}),function(){cn.data=un=!un}):E&&E.resolve?(hn=E.resolve(void 0),ln=hn.then,function(){ln.call(hn,rn)}):Qe?function(){dn.nextTick(rn)}:function(){pn.call(L,rn)});var mn=ht||function(t){t={fn:t,next:void 0},sn&&(sn.next=t),on||(on=t,an()),sn=t},_n={f:function(t){return new vn(t)}};function bn(t){var e;return!(!k(t)||"function"!=typeof(e=t.then))&&e}function wn(l,f){var p;l.notified||(l.notified=!0,p=l.reactions,mn(function(){for(var t=l.value,e=1==l.state,n=0;p.length>n;){var r,i,o,s=p[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===l.rejection&&Yn(l),l.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(Fn("Promise-chain cycle")):(i=bn(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}l.reactions=[],l.notified=!1,f&&!l.rejection&&Gn(l)}))}function En(t,e,n){var r,i;Wn?((r=Un.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),L.dispatchEvent(r)):r={promise:e,reason:n},!Hn&&(i=L["on"+t])?i(r):t===Kn&&function(t,e){var n=L.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function In(e,n,r){return function(t){e(n,t,r)}}function Tn(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,wn(t,!0))}(ht=(ht=(ht=L.process)&&ht.versions)&&ht.v8)?Hr=(zn=ht.split("."))[0]+zn[1]:mt&&(!(zn=mt.match(/Edge\/(\d+)/))||74<=zn[1])&&(zn=mt.match(/Chrome\/(\d+)/))&&(Hr=zn[1]);var Sn,Cn,Nn,An,kn=Hr&&+Hr,On=fn.set,Rn=ae("species"),Pn="Promise",Dn=Ot.get,xn=Ot.set,Ln=Ot.getterFor(Pn),Mn=De,Fn=L.TypeError,Un=L.document,jn=L.process,Vn=bt("fetch"),qn=_n.f,Bn=qn,Wn=!!(Un&&Un.createEvent&&L.dispatchEvent),Hn="function"==typeof PromiseRejectionEvent,Kn="unhandledrejection",zn=(mt=Yt(Pn,function(){if(ct(Mn)===String(Mn)){if(66===kn)return!0;if(!Qe&&!Hn)return!0}if(51<=kn&&/native code/.test(Mn))return!1;function t(t){t(function(){},function(){})}var e=Mn.resolve(1);return(e.constructor={})[Rn]=t,!(e.then(function(){})instanceof t)}))||!qe(function(t){Mn.all(t).catch(function(){})}),Gn=function(r){On.call(L,function(){var t,e=r.facade,n=r.value;if(Qn(r)&&(t=gn(function(){Qe?jn.emit("unhandledRejection",n,e):En(Kn,e,n)}),r.rejection=Qe||Qn(r)?2:1,t.error))throw t.value})},Qn=function(t){return 1!==t.rejection&&!t.parent},Yn=function(e){On.call(L,function(){var t=e.facade;Qe?jn.emit("rejectionHandled",t):En("rejectionhandled",t,e.value)})},Xn=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw Fn("Promise can't be resolved itself");var r=bn(t);r?mn(function(){var e={done:!1};try{r.call(t,In(Xn,e,n),In(Tn,e,n))}catch(t){Tn(e,t,n)}}):(n.value=t,n.state=1,wn(n,!1))}catch(t){Tn({done:!1},t,n)}}};mt&&(Mn=function(t){Pe(this,Mn,Pn),ce(t),Sn.call(this);var e=Dn(this);try{t(In(Xn,e),In(Tn,e))}catch(t){Tn(e,t)}},(Sn=function(){xn(this,{type:Pn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=ke(Mn.prototype,{then:function(t,e){var n=Ln(this),r=qn(Be(this,Mn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Qe?jn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&wn(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Cn=function(){var t=new Sn,e=Dn(t);this.promise=t,this.resolve=In(Xn,e),this.reject=In(Tn,e)},_n.f=qn=function(t){return t===Mn||t===Nn?new Cn:Bn(t)},"function"==typeof De&&(An=De.prototype.then,Rt(De.prototype,"then",function(t,e){var n=this;return new Mn(function(t,e){An.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof Vn&&St({global:!0,enumerable:!0,forced:!0},{fetch:function(){return yn(Mn,Vn.apply(L,arguments))}}))),St({global:!0,wrap:!0,forced:mt},{Promise:Mn}),Oe(Mn,Pn,!1),Re(Pn),Nn=bt(Pn),St({target:Pn,stat:!0,forced:mt},{reject:function(t){var e=qn(this);return e.reject.call(void 0,t),e.promise}}),St({target:Pn,stat:!0,forced:mt},{resolve:function(t){return yn(this,t)}}),St({target:Pn,stat:!0,forced:zn},{all:function(t){var a=this,e=qn(a),u=e.resolve,c=e.reject,n=gn(function(){var r=ce(a.resolve),i=[],o=0,s=1;Ee(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=qn(n),i=r.reject,e=gn(function(){var e=ce(n.resolve);Ee(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),St({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=_n.f(a),u=e.resolve,n=e.reject,r=gn(function(){var r=ce(a.resolve),i=[],o=0,s=1;Ee(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});var Jn="No one promise resolved";function $n(){return this}function Zn(){return this}function tr(t,e,n,r,i,o,s){function a(t){if(t===i&&v)return v;if(!rr&&t in p)return p[t];switch(t){case"keys":case or:case sr:return function(){return new n(this,t)}}return function(){return new n(this)}}var u;l=e,l+=" Iterator",(u=n).prototype=le(er,{next:S(1,r)}),Oe(u,l,!1),ye[l]=$n;var c,h,l=e+" Iterator",f=!1,p=t.prototype,d=p[ir]||p["@@iterator"]||i&&p[i],v=!rr&&d||a(i);if((r="Array"==e&&p.entries||d)&&(t=Zt(r.call(new t)),nr!==Object.prototype&&t.next&&(Zt(t)!==nr&&(te?te(t,nr):"function"!=typeof t[ir]&&J(t,ir,Zn)),Oe(t,l,!0))),i==or&&d&&d.name!==or&&(f=!0,v=function(){return d.call(this)}),p[ir]!==v&&J(p,ir,v),ye[e]=v,i)if(c={values:a(or),keys:o?v:a("keys"),entries:a(sr)},s)for(h in c)!rr&&!f&&h in p||Rt(p,h,c[h]);else St({target:e,proto:!0,forced:rr||f},c);return c}St({target:"Promise",stat:!0},{any:function(t){var u=this,e=_n.f(u),c=e.resolve,h=e.reject,n=gn(function(){var r=ce(u.resolve),i=[],o=0,s=1,a=!1;Ee(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(bt("AggregateError"))(i,Jn)))})}),--s||h(new(bt("AggregateError"))(i,Jn))});return n.error&&h(n.value),e.promise}}),St({target:"Promise",proto:!0,real:!0,forced:Hr=!!De&&T(function(){De.prototype.finally.call({then:function(){}},function(){})})},{finally:function(e){var n=Be(this,bt("Promise")),t="function"==typeof e;return this.then(t?function(t){return yn(n,e()).then(function(){return t})}:e,t?function(t){return yn(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof De||De.prototype.finally||Rt(De.prototype,"finally",bt("Promise").prototype.finally),mt={codeAt:(fn=function(o){return function(t,e){var n,r=String(N(t)),i=wt(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}})(!1),charAt:fn(!0)},zn=ae("iterator"),Hr=!1,[].keys&&("next"in(dr=[].keys())?(Wr=Zt(Zt(dr)))!==Object.prototype&&(Dr=Wr):Hr=!0),null==Dr&&(Dr={}),R(Dr,zn)||J(Dr,zn,function(){return this});var er=(fn={IteratorPrototype:Dr,BUGGY_SAFARI_ITERATORS:Hr}).IteratorPrototype,nr=fn.IteratorPrototype,rr=fn.BUGGY_SAFARI_ITERATORS,ir=ae("iterator"),or="values",sr="entries",ar=mt.charAt,ur="String Iterator",cr=Ot.set,hr=Ot.getterFor(ur);tr(String,"String",function(t){cr(this,{type:ur,string:String(t),index:0})},function(){var t=hr(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=ar(e,n),t.index+=n.length,{value:n,done:!1})});var lr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},fr=ae("unscopables"),pr=Array.prototype;null==pr[fr]&&X.f(pr,fr,{configurable:!0,value:le(null)});var dr=function(t){pr[fr][t]=!0},vr="Array Iterator",yr=Ot.set,gr=Ot.getterFor(vr),mr=tr(Array,"Array",function(t,e){yr(this,{type:vr,target:A(t),index:0,kind:e})},function(){var t=gr(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");ye.Arguments=ye.Array,dr("keys"),dr("values"),dr("entries");var _r,br=ae("iterator"),wr=ae("toStringTag"),Er=mr.values;for(_r in lr){var Ir=L[_r],Tr=Ir&&Ir.prototype;if(Tr){if(Tr[br]!==Er)try{J(Tr,br,Er)}catch(Gs){Tr[br]=Er}if(Tr[wr]||J(Tr,wr,_r),lr[_r])for(var Sr in mr)if(Tr[Sr]!==mr[Sr])try{J(Tr,Sr,mr[Sr])}catch(Gs){Tr[Sr]=mr[Sr]}}}function Cr(t,e){var n;return Ar(t)&&("function"==typeof(n=t.constructor)&&(n===Array||Ar(n.prototype))||k(n)&&null===(n=n[kr]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function Nr(t){throw t}Pt.Promise,St({target:"Promise",stat:!0},{try:function(t){var e=_n.f(this);return((t=gn(t)).error?e.reject:e.resolve)(t.value),e.promise}});var Ar=Array.isArray||function(t){return"Array"==C(t)},kr=ae("species"),Or=[].push,zn={forEach:(Wr=function(f){var p=1==f,d=2==f,v=3==f,y=4==f,g=6==f,m=5==f||g;return function(t,e,n,r){for(var i,o,s=Ct(t),a=B(s),u=he(e,n,3),c=Et(a.length),h=0,r=r||Cr,l=p?r(t,c):d?r(t,0):void 0;h<c;h++)if((m||h in a)&&(o=u(i=a[h],h,s),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:Or.call(l,i)}else if(y)return!1;return g?-1:v||y?y:l}})(0),map:Wr(1),filter:Wr(2),some:Wr(3),every:Wr(4),find:Wr(5),findIndex:Wr(6)},Rr=Object.defineProperty,Pr={},Dr=function(t,e){if(R(Pr,t))return Pr[t];var n=[][t],r=!!R(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=R(e,0)?e[0]:Nr,o=R(e,1)?e[1]:void 0;return Pr[t]=!!n&&!T(function(){if(r&&!M)return 1;var t={length:-1};r?Rr(t,1,{enumerable:!0,get:Nr}):t[1]=1,n.call(t,i,o)})},xr=zn.find,Lr=!0,fn=Dr(Hr="find");Hr in[]&&Array(1)[Hr](function(){Lr=!1}),St({target:"Array",proto:!0,forced:Lr||!fn},{find:function(t,e){return xr(this,t,1<arguments.length?e:void 0)}}),dr(Hr);var Mr=Function.call,Fr=((mt=function(t,e,n){return he(Mr,L[t].prototype[e],n)})("Array","find"),zn.findIndex),Ur=!0,fn=Dr(Wr="findIndex");function jr(t,e,n){(e=O(e))in t?X.f(t,e,S(0,n)):t[e]=n}Wr in[]&&Array(1)[Wr](function(){Ur=!1}),St({target:"Array",proto:!0,forced:Ur||!fn},{findIndex:function(t,e){return Fr(this,t,1<arguments.length?e:void 0)}}),dr(Wr),mt("Array","findIndex"),St({target:"Array",stat:!0,forced:Hr=!qe(function(t){Array.from(t)})},{from:function(t,e,n){var r,i,o,s,a,u=Ct(t),c="function"==typeof this?this:Array,h=1<(t=arguments.length)?e:void 0,l=void 0!==h,e=_e(u),f=0;if(l&&(h=he(h,2<t?n:void 0,2)),null==e||c==Array&&ue(e))for(i=new c(r=Et(u.length));f<r;f++)jr(i,f,l?h(u[f],f):u[f]);else for(a=(s=e.call(u)).next,i=new c;!(o=a.call(s)).done;f++)jr(i,f,l?function(t,e,n){try{return e(D(n)[0],n[1])}catch(e){throw be(t),e}}(s,h,[o.value,f]):o.value);return i.length=f,i}}),Pt.Array.from;var Vr,qr=zn.some,fn=!!(Vr=[].some)&&T(function(){Vr.call(null,function(){throw 1},1)}),dr=Dr("some");St({target:"Array",proto:!0,forced:!fn||!dr},{some:function(t,e){return qr(this,t,1<arguments.length?e:void 0)}}),mt("Array","some");var Br,Wr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Hr=X.f,ht=L.Int8Array,Kr=ht&&ht.prototype,fn=(Dr=L.Uint8ClampedArray)&&Dr.prototype,zr=ht&&Zt(ht),Gr=Kr&&Zt(Kr),Dr=((dr=Object.prototype).isPrototypeOf,ae("toStringTag")),Qr=tt("TYPED_ARRAY_TAG"),Yr=Wr&&!!te&&"Opera"!==Ce(L.opera),Wr=!1,Xr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(Br in Xr)L[Br]||(Yr=!1);if((!Yr||"function"!=typeof zr||zr===Function.prototype)&&(zr=function(){throw TypeError("Incorrect invocation")},Yr))for(Br in Xr)L[Br]&&te(L[Br],zr);if((!Yr||!Gr||Gr===dr)&&(Gr=zr.prototype,Yr))for(Br in Xr)L[Br]&&te(L[Br].prototype,Gr);if(Yr&&Zt(fn)!==Gr&&te(fn,Gr),M&&!R(Gr,Dr))for(Br in Wr=!0,Hr(Gr,Dr,{get:function(){return k(this)?this[Qr]:void 0}}),Xr)L[Br]&&J(L[Br],Qr,Br);var fn=function(t){if(k(e=t)&&R(Xr,Ce(e)))return t;var e;throw TypeError("Target is not a typed array")},Hr=function(t,e,n){if(M){if(n)for(var r in Xr){var i=L[r];i&&R(i.prototype,t)&&delete i.prototype[t]}Gr[t]&&!n||Rt(Gr,t,!n&&Yr&&Kr[t]||e)}},Dr=ae("iterator"),Wr=L.Uint8Array,Jr=mr.values,$r=mr.keys,Zr=mr.entries,ti=fn,fn=Hr,Wr=!!(Hr=Wr&&Wr.prototype[Dr])&&("values"==Hr.name||null==Hr.name),Hr=function(){return Jr.call(ti(this))};fn("entries",function(){return Zr.call(ti(this))}),fn("keys",function(){return $r.call(ti(this))}),fn("values",Hr,!Wr),fn(Dr,Hr,!Wr);var ei=Object.assign,ni=Object.defineProperty,Hr=!ei||T(function(){if(M&&1!==ei({b:1},ei(ni({},"a",{enumerable:!0,get:function(){ni(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=ei({},t)[n]||ee(ei({},e)).join("")!=r})?function(t){for(var e=Ct(t),n=arguments.length,r=1,i=Bt.f,o=j.f;r<n;)for(var s,a=B(arguments[r++]),u=i?ee(a).concat(i(a)):ee(a),c=u.length,h=0;h<c;)s=u[h++],M&&!o.call(a,s)||(e[s]=a[s]);return e}:ei;St({target:"Object",stat:!0,forced:Object.assign!==Hr},{assign:Hr}),Pt.Object.assign;var ri=j.f,ii=(Hr={entries:(Wr=function(a){return function(t){for(var e,n=A(t),r=ee(n),i=r.length,o=0,s=[];o<i;)e=r[o++],M&&!ri.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}})(!0),values:Wr(!1)}).entries;St({target:"Object",stat:!0},{entries:function(t){return ii(t)}}),Pt.Object.entries;var oi=Hr.values;function si(t){if(k(e=t)&&(void 0!==(n=e[ai])?n:"RegExp"==C(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}St({target:"Object",stat:!0},{values:function(t){return oi(t)}}),Pt.Object.values;var ai=ae("match"),ui=ae("match");St({target:"String",proto:!0,forced:!(Wr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[ui]=!1,"/./"[e](n)}catch(t){}}return!1})("includes")},{includes:function(t,e){return!!~String(N(this)).indexOf(si(t),1<arguments.length?e:void 0)}}),mt("String","includes");var Hr=Q.f,ci="".startsWith,hi=Math.min,li=!((Wr=Wr("startsWith"))||!(li=Hr(String.prototype,"startsWith"))||li.writable);St({target:"String",proto:!0,forced:!li&&!Wr},{startsWith:function(t,e){var n=String(N(this));return si(t),e=Et(hi(1<arguments.length?e:void 0,n.length)),t=String(t),ci?ci.call(n,t,e):n.slice(e,e+t.length)===t}}),mt("String","startsWith"),St({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(N(this)),n="",r=wt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}}),mt("String","repeat");var fi=ae("species"),pi=ae("isConcatSpreadable"),di=9007199254740991,vi="Maximum allowed index exceeded",Wr=51<=kn||!T(function(){var t=[];return t[pi]=!1,t.concat()[0]!==t}),mt=51<=kn||!T(function(){var t=[];return(t.constructor={})[fi]=function(){return{foo:1}},1!==t.concat(Boolean).foo});function yi(t){var e=Pt.Symbol||(Pt.Symbol={});R(e,t)||Si(e,t,{value:Ti.f(t)})}function gi(t,e){var n=ji[t]=le(Di[ki]);return Oi(n,{type:Ai,tag:t,description:e}),M||(n.description=e),n}function mi(e,t){D(e);var n=A(t),t=ee(n).concat(bi(n));return Ci(t,function(t){M&&!_i.call(n,t)||zi(e,t,n[t])}),e}St({target:"Array",proto:!0,forced:!Wr||!mt},{concat:function(){for(var t,e,n,r=Ct(this),i=Cr(r,0),o=0,s=-1,a=arguments.length;s<a;s++)if(function(t){if(k(t)){var e=t[pi];return void 0!==e?e:Ar(t)}}(n=-1===s?r:arguments[s])){if(e=Et(n.length),di<o+e)throw TypeError(vi);for(t=0;t<e;t++,o++)t in n&&jr(i,o,n[t])}else{if(di<=o)throw TypeError(vi);jr(i,o++,n)}return i.length=o,i}});function _i(t){var e=O(t,!0),t=Ui.call(this,e);return!(this===Pi&&R(ji,e)&&!R(Vi,e))&&(!(t||!R(this,e)||!R(ji,e)||R(this,Ni)&&this[Ni][e])||t)}function bi(t){var e=t===Pi,t=Fi(e?Vi:A(t)),n=[];return Ci(t,function(t){!R(ji,t)||e&&!R(Pi,t)||n.push(ji[t])}),n}var wi=qt.f,Ei={}.toString,Ii="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],mt={f:function(t){return Ii&&"[object Window]"==Ei.call(t)?function(t){try{return wi(t)}catch(t){return Ii.slice()}}(t):wi(A(t))}},Ti={f:ae},Si=X.f,Ci=zn.forEach,Ni=yt("hidden"),Ai="Symbol",ki="prototype",zn=ae("toPrimitive"),Oi=Ot.set,Ri=Ot.getterFor(Ai),Pi=Object[ki],Di=L.Symbol,xi=bt("JSON","stringify"),Li=Q.f,Mi=X.f,Fi=mt.f,Ui=j.f,ji=ft("symbols"),Vi=ft("op-symbols"),qi=ft("string-to-symbol-registry"),Bi=ft("symbol-to-string-registry"),yt=ft("wks"),Wi=!(ft=L.QObject)||!ft[ki]||!ft[ki].findChild,Hi=M&&T(function(){return 7!=le(Mi({},"a",{get:function(){return Mi(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Li(Pi,e);r&&delete Pi[e],Mi(t,e,n),r&&t!==Pi&&Mi(Pi,e,r)}:Mi,Ki=F?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Di},zi=function(t,e,n){return t===Pi&&zi(Vi,e,n),D(t),e=O(e,!0),D(n),R(ji,e)?(n.enumerable?(R(t,Ni)&&t[Ni][e]&&(t[Ni][e]=!1),n=le(n,{enumerable:S(0,!1)})):(R(t,Ni)||Mi(t,Ni,S(1,{})),t[Ni][e]=!0),Hi(t,e,n)):Mi(t,e,n)},ft=function(t,e){var n=A(t),t=O(e,!0);if(n!==Pi||!R(ji,t)||R(Vi,t))return!(e=Li(n,t))||!R(ji,t)||R(n,Ni)&&n[Ni][t]||(e.enumerable=!0),e},F=function(t){var t=Fi(A(t)),e=[];return Ci(t,function(t){R(ji,t)||R(gt,t)||e.push(t)}),e};fe||(Rt((Di=function(t){if(this instanceof Di)throw TypeError("Symbol is not a constructor");var e=tt(t=arguments.length&&void 0!==t?String(t):void 0),n=function(t){this===Pi&&n.call(Vi,t),R(this,Ni)&&R(this[Ni],e)&&(this[Ni][e]=!1),Hi(this,e,S(1,t))};return M&&Wi&&Hi(Pi,e,{configurable:!0,set:n}),gi(e,t)})[ki],"toString",function(){return Ri(this).tag}),Rt(Di,"withoutSetter",function(t){return gi(tt(t),t)}),j.f=_i,X.f=zi,Q.f=ft,qt.f=mt.f=F,Bt.f=bi,Ti.f=function(t){return gi(ae(t),t)},M&&(Mi(Di[ki],"description",{configurable:!0,get:function(){return Ri(this).description}}),Rt(Pi,"propertyIsEnumerable",_i,{unsafe:!0}))),St({global:!0,wrap:!0,forced:!fe,sham:!fe},{Symbol:Di}),Ci(ee(yt),function(t){yi(t)}),St({target:Ai,stat:!0,forced:!fe},{for:function(t){var e=String(t);return R(qi,e)?qi[e]:(t=Di(e),qi[e]=t,Bi[t]=e,t)},keyFor:function(t){if(!Ki(t))throw TypeError(t+" is not a symbol");if(R(Bi,t))return Bi[t]},useSetter:function(){Wi=!0},useSimple:function(){Wi=!1}}),St({target:"Object",stat:!0,forced:!fe,sham:!M},{create:function(t,e){return void 0===e?le(t):mi(le(t),e)},defineProperty:zi,defineProperties:mi,getOwnPropertyDescriptor:ft}),St({target:"Object",stat:!0,forced:!fe},{getOwnPropertyNames:F,getOwnPropertySymbols:bi}),St({target:"Object",stat:!0,forced:T(function(){Bt.f(1)})},{getOwnPropertySymbols:function(t){return Bt.f(Ct(t))}}),xi&&St({target:"JSON",stat:!0,forced:oo=!fe||T(function(){var t=Di();return"[null]"!=xi([t])||"{}"!=xi({a:t})||"{}"!=xi(Object(t))})},{stringify:function(t,e){for(var n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if((k(n=e)||void 0!==t)&&!Ki(t))return Ar(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Ki(e))return e}),r[1]=e,xi.apply(null,r)}}),Di[ki][zn]||J(Di[ki],zn,Di[ki].valueOf),Oe(Di,Ai),gt[Ni]=!0,yi("asyncIterator");var Gi,Qi,Yi,Xi,Ji,ft=X.f,$i=L.Symbol;!M||"function"!=typeof $i||"description"in $i.prototype&&void 0===$i().description||(Gi={},Tt(Qi=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),t=this instanceof Qi?new $i(e):void 0===e?$i():$i(e);return""===e&&(Gi[t]=!0),t},$i),(uo=Qi.prototype=$i.prototype).constructor=Qi,Yi=uo.toString,Xi="Symbol(test)"==String($i("test")),Ji=/^Symbol\((.*)\)[^)]+$/,ft(uo,"description",{configurable:!0,get:function(){var t=k(this)?this.valueOf():this,e=Yi.call(t);return R(Gi,t)?"":""===(e=Xi?e.slice(7,-1):e.replace(Ji,"$1"))?void 0:e}}),St({global:!0,forced:!0},{Symbol:Qi})),yi("hasInstance"),yi("isConcatSpreadable"),yi("iterator"),yi("match"),yi("matchAll"),yi("replace"),yi("search"),yi("species"),yi("split"),yi("toPrimitive"),yi("toStringTag"),yi("unscopables"),Oe(L.JSON,"JSON",!0),Oe(Math,"Math",!0),St({global:!0},{Reflect:{}}),Oe(L.Reflect,"Reflect",!0),Pt.Symbol,yi("asyncDispose"),yi("dispose"),yi("observable"),yi("patternMatch"),yi("replaceAll"),Ti.f("iterator");var Zi=!T(function(){return Object.isExtensible(Object.preventExtensions({}))}),to=I(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=X.f,r=tt("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!k(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!R(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!R(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return Zi&&s.REQUIRED&&o(t)&&!R(t,r)&&n(t),t}};gt[r]=!0}),F=function(s,t,e){function n(t){var n=p[t];Rt(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!k(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!k(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!k(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=L[s],p=f&&f.prototype,d=f,v={};return Yt(s,"function"!=typeof f||!(h||p.forEach&&!T(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),to.REQUIRED=!0):Yt(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=T(function(){r.has(1)}),a=qe(function(t){new f(t)}),u=!h&&T(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){Pe(t,d,s);var n,r,i,o=(o=new f,n=t,t=d,te&&"function"==typeof(r=n.constructor)&&r!==t&&k(i=r.prototype)&&i!==t.prototype&&te(o,i),o);return null!=e&&Ee(e,o[l],{that:o,AS_ENTRIES:c}),o})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),St({global:!0,forced:(v[s]=d)!=f},v),Oe(d,s),h||e.setStrong(d,s,c),d},eo=X.f,no=to.fastKey,ro=Ot.set,io=Ot.getterFor,oo={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=u(t),o=s(t,e);return o?o.value=n:(i.last=o={index:r=no(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),M?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}function s(t,e){var n,r=u(t);if("F"!==(t=no(e)))return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n}var a=t(function(t,e){Pe(t,a,n),ro(t,{type:n,index:le(null),first:void 0,last:void 0,size:0}),M||(t.size=0),null!=e&&Ee(e,t[i],{that:t,AS_ENTRIES:r})}),u=io(n);return ke(a.prototype,{clear:function(){for(var t=u(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,M?t.size=0:this.size=0},delete:function(t){var e,n=u(this),r=s(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),M?n.size--:this.size--),!!r},forEach:function(t,e){for(var n,r=u(this),i=he(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!s(this,t)}}),ke(a.prototype,r?{get:function(t){return(t=s(this,t))&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),M&&eo(a.prototype,"size",{get:function(){return u(this).size}}),a},setStrong:function(t,e,n){var r=e+" Iterator",i=io(e),o=io(r);tr(t,e,function(t,e){ro(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),Re(e)}};function so(){for(var t,e=D(this),n=ce(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}function ao(t){return Map.prototype.entries.call(t)}St({target:"Map",stat:!0},{from:zn=(F("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},oo),Pt.Map,function(t,e,n){var r,i,o,s=arguments.length,a=1<s?e:void 0;return ce(this),(e=void 0!==a)&&ce(a),null==t?new this:(r=[],e?(i=0,o=he(a,2<s?n:void 0,2),Ee(t,function(t){r.push(o(t,i++))})):Ee(t,r.push,{that:r}),new this(r))})}),St({target:"Map",stat:!0},{of:ft=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}}),St({target:"Map",proto:!0,real:!0,forced:lt},{deleteAll:function(){return so.apply(this,arguments)}}),St({target:"Map",proto:!0,real:!0,forced:lt},{emplace:function(t,e){var n=D(this),e=n.has(t)&&"update"in e?e.update(n.get(t),t,n):e.insert(t,n);return n.set(t,e),e}}),St({target:"Map",proto:!0,real:!0,forced:lt},{every:function(t,e){var r=D(this),n=ao(r),i=he(t,1<arguments.length?e:void 0,3);return!Ee(n,function(t,e,n){if(!i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),St({target:"Map",proto:!0,real:!0,forced:lt},{filter:function(t,e){var n=D(this),r=ao(n),i=he(t,1<arguments.length?e:void 0,3),o=new(Be(n,bt("Map"))),s=ce(o.set);return Ee(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),o}}),St({target:"Map",proto:!0,real:!0,forced:lt},{find:function(t,e){var r=D(this),n=ao(r),i=he(t,1<arguments.length?e:void 0,3);return Ee(n,function(t,e,n){if(i(e,t,r))return n(e)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),St({target:"Map",proto:!0,real:!0,forced:lt},{findKey:function(t,e){var r=D(this),n=ao(r),i=he(t,1<arguments.length?e:void 0,3);return Ee(n,function(t,e,n){if(i(e,t,r))return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),St({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;ce(n);var i=ce(r.has),o=ce(r.get),s=ce(r.set);return Ee(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}}),St({target:"Map",proto:!0,real:!0,forced:lt},{includes:function(i){return Ee(ao(D(this)),function(t,e,n){if((r=e)===(e=i)||r!=r&&e!=e)return n();var r},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),St({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;ce(e);var r=ce(n.set);return Ee(t,function(t){r.call(n,e(t),t)}),n}}),St({target:"Map",proto:!0,real:!0,forced:lt},{keyOf:function(r){return Ee(ao(D(this)),function(t,e,n){if(e===r)return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),St({target:"Map",proto:!0,real:!0,forced:lt},{mapKeys:function(t,e){var n=D(this),r=ao(n),i=he(t,1<arguments.length?e:void 0,3),o=new(Be(n,bt("Map"))),s=ce(o.set);return Ee(r,function(t,e){s.call(o,i(e,t,n),e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),o}}),St({target:"Map",proto:!0,real:!0,forced:lt},{mapValues:function(t,e){var n=D(this),r=ao(n),i=he(t,1<arguments.length?e:void 0,3),o=new(Be(n,bt("Map"))),s=ce(o.set);return Ee(r,function(t,e){s.call(o,t,i(e,t,n))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),o}}),St({target:"Map",proto:!0,real:!0,forced:lt},{merge:function(){for(var t=D(this),e=ce(t.set),n=0;n<arguments.length;)Ee(arguments[n++],e,{that:t,AS_ENTRIES:!0});return t}}),St({target:"Map",proto:!0,real:!0,forced:lt},{reduce:function(n,t){var r=D(this),e=ao(r),i=arguments.length<2,o=i?void 0:t;if(ce(n),Ee(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i)throw TypeError("Reduce of empty map with no initial value");return o}}),St({target:"Map",proto:!0,real:!0,forced:lt},{some:function(t,e){var r=D(this),n=ao(r),i=he(t,1<arguments.length?e:void 0,3);return Ee(n,function(t,e,n){if(i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),St({target:"Map",proto:!0,real:!0,forced:lt},{update:function(t,e,n){var r=D(this),i=arguments.length;ce(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");return n=o?r.get(t):ce(2<i?n:void 0)(t,r),r.set(t,e(n,t,r)),r}});var uo=function(t,e,n){var r,i=D(this),n=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof n)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof n&&(r=n(),i.set(t,r)),r};function co(t){return Set.prototype.values.call(t)}St({target:"Map",proto:!0,real:!0,forced:lt},{upsert:uo}),St({target:"Map",proto:!0,real:!0,forced:lt},{updateOrInsert:uo}),F("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},oo),Pt.Set,St({target:"Set",stat:!0},{from:zn}),St({target:"Set",stat:!0},{of:ft}),St({target:"Set",proto:!0,real:!0,forced:lt},{addAll:function(){return function(){for(var t=D(this),e=ce(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),St({target:"Set",proto:!0,real:!0,forced:lt},{deleteAll:function(){return so.apply(this,arguments)}}),St({target:"Set",proto:!0,real:!0,forced:lt},{every:function(t,e){var n=D(this),r=co(n),i=he(t,1<arguments.length?e:void 0,3);return!Ee(r,function(t,e){if(!i(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),St({target:"Set",proto:!0,real:!0,forced:lt},{difference:function(t){var e=D(this),n=new(Be(e,bt("Set")))(e),r=ce(n.delete);return Ee(t,function(t){r.call(n,t)}),n}}),St({target:"Set",proto:!0,real:!0,forced:lt},{filter:function(t,e){var n=D(this),r=co(n),i=he(t,1<arguments.length?e:void 0,3),o=new(Be(n,bt("Set"))),s=ce(o.add);return Ee(r,function(t){i(t,t,n)&&s.call(o,t)},{IS_ITERATOR:!0}),o}}),St({target:"Set",proto:!0,real:!0,forced:lt},{find:function(t,e){var n=D(this),r=co(n),i=he(t,1<arguments.length?e:void 0,3);return Ee(r,function(t,e){if(i(t,t,n))return e(t)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),St({target:"Set",proto:!0,real:!0,forced:lt},{intersection:function(t){var e=D(this),n=new(Be(e,bt("Set"))),r=ce(e.has),i=ce(n.add);return Ee(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),St({target:"Set",proto:!0,real:!0,forced:lt},{isDisjointFrom:function(t){var n=D(this),r=ce(n.has);return!Ee(t,function(t,e){if(!0===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),St({target:"Set",proto:!0,real:!0,forced:lt},{isSubsetOf:function(t){var e=function(t){var e=_e(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return D(e.call(t))}(this),n=D(t),r=n.has;return"function"!=typeof r&&(n=new(bt("Set"))(t),r=ce(n.has)),!Ee(e,function(t,e){if(!1===r.call(n,t))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),St({target:"Set",proto:!0,real:!0,forced:lt},{isSupersetOf:function(t){var n=D(this),r=ce(n.has);return!Ee(t,function(t,e){if(!1===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),St({target:"Set",proto:!0,real:!0,forced:lt},{join:function(t){var e=co(n=D(this)),n=void 0===t?",":String(t);return Ee(e,(t=[]).push,{that:t,IS_ITERATOR:!0}),t.join(n)}}),St({target:"Set",proto:!0,real:!0,forced:lt},{map:function(t,e){var n=D(this),r=co(n),i=he(t,1<arguments.length?e:void 0,3),o=new(Be(n,bt("Set"))),s=ce(o.add);return Ee(r,function(t){s.call(o,i(t,t,n))},{IS_ITERATOR:!0}),o}}),St({target:"Set",proto:!0,real:!0,forced:lt},{reduce:function(e,t){var n=D(this),r=co(n),i=arguments.length<2,o=i?void 0:t;if(ce(e),Ee(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},{IS_ITERATOR:!0}),i)throw TypeError("Reduce of empty set with no initial value");return o}}),St({target:"Set",proto:!0,real:!0,forced:lt},{some:function(t,e){var n=D(this),r=co(n),i=he(t,1<arguments.length?e:void 0,3);return Ee(r,function(t,e){if(i(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),St({target:"Set",proto:!0,real:!0,forced:lt},{symmetricDifference:function(t){var e=D(this),n=new(Be(e,bt("Set")))(e),r=ce(n.delete),i=ce(n.add);return Ee(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),St({target:"Set",proto:!0,real:!0,forced:lt},{union:function(t){var e=D(this);return Ee(t,ce((e=new(Be(e,bt("Set")))(e)).add),{that:e}),e}});var ho=Math.floor;St({target:"Number",stat:!0},{isInteger:function(t){return!k(t)&&isFinite(t)&&ho(t)===t}}),Pt.Number.isInteger,St({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),Pt.Number.isNaN;var lo=function(t,e){return(lo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function fo(t,e){function n(){this.constructor=t}lo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var po=function(){return(po=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function vo(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function yo(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function go(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mo(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function _o(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(mo(arguments[e]));return t}function bo(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function wo(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Eo(t){try{return Co.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var Io={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},To=function(t,e){if(!t)throw So(e)},So=function(t){return new Error("Firebase Database ("+Io.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Co={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|(h=u?t[i+2]:0)>>6,h=63&h;u||(h=64,s||(a=64)),r.push(n[c],n[o],n[a],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wo(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();o=o<<2|s>>4,r.push(o),64!==a&&(s=s<<4&240|a>>2,r.push(s),64!==u&&(u|=a<<6&192,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function No(t){return Ao(void 0,t)}function Ao(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Ao(t[n],e[n]));return t}var ko=(Oo.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},Oo);function Oo(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function Ro(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Po(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ro())}function Do(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function xo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Lo(){return!0===Io.NODE_ADMIN}function Mo(){return"indexedDB"in self&&null!=indexedDB}function Fo(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function Uo(){return navigator&&navigator.cookieEnabled}var jo,Vo="FirebaseError",qo=(fo(Bo,jo=Error),Bo);function Bo(t,e,n){return(e=jo.call(this,e)||this).code=t,e.customData=n,e.name=Vo,Object.setPrototypeOf(e,Bo.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,Wo.prototype.create),e}var Wo=(Ho.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=(t=this.errors[t])?(r=i,t.replace(Ko,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new qo(o,t,i)},Ho);function Ho(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Ko=/\{\$([^}]+)}/g;function zo(t){return JSON.parse(t)}function Go(t){return JSON.stringify(t)}function Qo(t){var e={},n={},r={},i="";try{var o=t.split("."),e=zo(Eo(o[0])||""),n=zo(Eo(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Yo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Xo(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function Jo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function $o(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var Zo=(ts.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},ts.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++)s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},ts.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},ts.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},ts);function ts(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function es(t,e){return(e=new ns(t,e)).subscribe.bind(e)}var ns=(rs.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},rs.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},rs.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},rs.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");return void 0===(r=function(t){if("object"==typeof t&&null!==t)for(var e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=is),void 0===r.error&&(r.error=is),void 0===r.complete&&(r.complete=is),n=this.unsubscribeOne.bind(this,this.observers.length),this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},rs.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},rs.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},rs.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},rs.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},rs);function rs(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function is(){}function os(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function ss(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return(t+=" failed: ")+(r+" argument ")}function as(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(ss(t,e,r)+"must be a valid function.")}function us(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(ss(t,e,r)+"must be a valid context object.")}function cs(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var hs=1e3,ls=2,fs=144e5,ps=.5;function ds(t,e,n){return void 0===e&&(e=hs),void 0===n&&(n=ls),n=e*Math.pow(n,t),t=Math.round(ps*n*(Math.random()-.5)*2),Math.min(fs,n+t)}var vs=(ys.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},ys.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},ys.prototype.setServiceProps=function(t){return this.serviceProps=t,this},ys);function ys(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var gs="[DEFAULT]",ms=(_s.prototype.get=function(t){void 0===t&&(t=gs);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new ko;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},_s.prototype.getImmediate=function(t){var e=po({identifier:gs,optional:!1},t),t=e.identifier,n=e.optional,r=this.normalizeInstanceIdentifier(t);try{var i=this.getOrInitializeService(r);if(i)return i;if(n)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(n)return null;throw t}},_s.prototype.getComponent=function(){return this.component},_s.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(gs)}catch(t){}try{for(var r=go(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=mo(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},_s.prototype.clearInstance=function(t){void 0===t&&(t=gs),this.instancesDeferred.delete(t),this.instances.delete(t)},_s.prototype.delete=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(_o(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return t.sent(),[2]}})})},_s.prototype.isComponentSet=function(){return null!=this.component},_s.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,t===gs?void 0:t),this.instances.set(t,e)),e||null},_s.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:gs},_s);function _s(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var bs=(ws.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},ws.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},ws.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ms(t,this);return this.providers.set(t,e),e},ws.prototype.getProviders=function(){return Array.from(this.providers.values())},ws);function ws(t){this.name=t,this.providers=new Map}function Es(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Is,Ts=[];function Ss(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=As[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Es(["["+i+"]  "+t.name+":"],n))}}(zn=Is=Is||{})[zn.DEBUG=0]="DEBUG",zn[zn.VERBOSE=1]="VERBOSE",zn[zn.INFO=2]="INFO",zn[zn.WARN=3]="WARN",zn[zn.ERROR=4]="ERROR",zn[zn.SILENT=5]="SILENT";var Cs={debug:Is.DEBUG,verbose:Is.VERBOSE,info:Is.INFO,warn:Is.WARN,error:Is.ERROR,silent:Is.SILENT},Ns=Is.INFO,As=((ft={})[Is.DEBUG]="log",ft[Is.VERBOSE]="log",ft[Is.INFO]="info",ft[Is.WARN]="warn",ft[Is.ERROR]="error",ft),ks=(Object.defineProperty(Os.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Is))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),Os.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Cs[t]:t},Object.defineProperty(Os.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(Os.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),Os.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Es([this,Is.DEBUG],t)),this._logHandler.apply(this,Es([this,Is.DEBUG],t))},Os.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Es([this,Is.VERBOSE],t)),this._logHandler.apply(this,Es([this,Is.VERBOSE],t))},Os.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Es([this,Is.INFO],t)),this._logHandler.apply(this,Es([this,Is.INFO],t))},Os.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Es([this,Is.WARN],t)),this._logHandler.apply(this,Es([this,Is.WARN],t))},Os.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Es([this,Is.ERROR],t)),this._logHandler.apply(this,Es([this,Is.ERROR],t))},Os);function Os(t){this.name=t,this._logLevel=Ns,this._logHandler=Ss,this._userLogHandler=null,Ts.push(this)}function Rs(e){Ts.forEach(function(t){t.setLogLevel(e)})}var zn=((lt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",lt["bad-app-name"]="Illegal App name: '{$appName}",lt["duplicate-app"]="Firebase App named '{$appName}' already exists",lt["app-deleted"]="Firebase App named '{$appName}' already deleted",lt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",lt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",lt),Ps=new Wo("app","Firebase",zn),mt="@firebase/app",Ds="[DEFAULT]",xs=((ft={})[mt]="fire-core",ft["@firebase/analytics"]="fire-analytics",ft["@firebase/auth"]="fire-auth",ft["@firebase/database"]="fire-rtdb",ft["@firebase/functions"]="fire-fn",ft["@firebase/installations"]="fire-iid",ft["@firebase/messaging"]="fire-fcm",ft["@firebase/performance"]="fire-perf",ft["@firebase/remote-config"]="fire-rc",ft["@firebase/storage"]="fire-gcs",ft["@firebase/firestore"]="fire-fst",ft["fire-js"]="fire-js",ft["firebase-wrapper"]="fire-js-all",ft),Ls=new ks("@firebase/app"),Ms=(Object.defineProperty(Fs.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Fs.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Fs.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Fs.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Fs.prototype._getService=function(t,e){return void 0===e&&(e=Ds),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Fs.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Ds),this.container.getProvider(t).clearInstance(e)},Fs.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Ls.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Fs.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Fs.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ps.create("app-deleted",{appName:this.name_})},Fs);function Fs(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=No(t),this.container=new bs(e.name),this._addComponent(new vs("app",function(){return o},"PUBLIC"));try{for(var s=go(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}Ms.prototype.name&&Ms.prototype.options||Ms.prototype.delete||console.log("dc");var lt=function t(){var u,c,h,l,e=(u=Ms,c={},h=new Map,(l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={}),"object"==typeof e&&null!==e||(e={name:e});var n=e;if(void 0===n.name&&(n.name=Ds),"string"!=typeof(e=n.name)||!e)throw Ps.create("bad-app-name",{appName:String(e)});if(Yo(c,e))throw Ps.create("duplicate-app",{appName:e});return n=new u(t,n,l),c[e]=n},app:f,registerVersion:function(t,e,n){var r=null!==(i=xs[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t)return n=['Unable to register library "'+r+'" with version "'+e+'":'],i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Ls.warn(n.join(" "));o(new vs(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:Rs,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ps.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=0,n=Ts;t<n.length;t++)!function(t){var o=null;e&&e.level&&(o=Cs[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:Is[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}(t,e)},apps:null,SDK_VERSION:"8.1.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){return"serverAuth"===e?null:e}}}).default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l);function f(t){if(!Yo(c,t=t||Ds))throw Ps.create("no-app",{appName:t});return c[t]}function o(n){var t,e,r,i=n.name;if(h.has(i))return Ls.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===n.type?l[i]:null;h.set(i,n),"PUBLIC"===n.type&&(r=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[i])throw Ps.create("invalid-app-argument",{appName:i});return t[i]()},void 0!==n.serviceProps&&Ao(r,n.serviceProps),l[i]=r,u.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,n.multipleInstances?t:[])});try{for(var o=go(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return"PUBLIC"===n.type?l[i]:null}return e.INTERNAL=po(po({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Ao(e,t)},createSubscribe:es,ErrorFactory:Wo,deepExtend:Ao}),e}(),Us=(js.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){return"VERSION"===(null==(e=(e=t).getComponent())?void 0:e.type)?(t=t.getImmediate()).library+"/"+t.version:null;var e}).filter(function(t){return t}).join(" ")},js);function js(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(Ls.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(iu=self.firebase.SDK_VERSION)&&0<=iu.indexOf("LITE")&&Ls.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var Vs=lt.initializeApp;lt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&Ls.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Vs.apply(void 0,t)};var Vl=lt;(yt=Vl).INTERNAL.registerComponent(new vs("platform-logger",function(t){return new Us(t)},"PRIVATE")),yt.registerVersion(mt,"0.6.13",void 0),yt.registerVersion("fire-js",""),Vl.registerVersion("firebase","8.1.0","app"),function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.v),reject:t(this.g)}},s.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.o(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.m(t):this.h(t)}},s.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},s.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Pa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Pa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Pa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},s});var h=h||{},l=this||self,e=/^[\w+/_-]+[=]{0,2}$/,a=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&e.test(t)?t:""}function s(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var n="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:g).apply(null,arguments)}function _(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var b=Date.now;function w(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function I(t,e,n){this.code=C+t,this.message=e||N[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new I(e.substring(C.length),t.message,t.serverResponse):null}w(I,Error),I.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},I.prototype.toJSON=function(){return this.w()};var S,C="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function k(t){for(var e in A)if(A[e].id===t)return t=A[e],{firebaseEndpoint:t.Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function O(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function R(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,R):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function P(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function D(t){throw new P("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function x(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=k("__EID__")?"__EID__":void 0,w(R,Error),R.prototype.name="CustomError",w(P,R),P.prototype.name="AssertionError",x.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var F=new x(function(){return new U},function(t){t.reset()});function U(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},U.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},U.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++)a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n));return i},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=j(t,e)}function K(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function z(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&Array.prototype.splice.call(n,e,1).length})}function G(){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,$=/</g,Z=/>/g,tt=/"/g,et=/'/g,nt=/\x00/g,rt=/[\x00&<>"']/;function it(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:e<t?1:0}var st=l.navigator;function at(t){return it(Y,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function ht(t){var e,n={};for(e in t)n[e]=t[e];return n}Y=(st=st&&st.userAgent)?st:"";var lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<lt.length;i++)e=lt[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function pt(t,e){t:{try{var n=t&&t.ownerDocument;if((n=(n=n&&(n.defaultView||n.parentWindow))||l).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(y(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function dt(t,e){this.a=t===mt&&e||"",this.b=gt}function vt(t){return t instanceof dt&&t.constructor===dt&&t.b===gt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}dt.prototype.sa=!0,dt.prototype.ra=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,gt={},mt={};function _t(){if(void 0===yt){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(t){l.console&&l.console.error(t.message)}yt=t}else yt=t}return yt}function bt(t,e){this.a=e===St?t:""}function wt(t){return t instanceof bt&&t.constructor===bt?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function Et(t,n){var e,r=vt(t);if(!Tt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return e=t=r.replace(It,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof dt?vt(t):encodeURIComponent(String(t))}),new bt(e=(t=_t())?t.createScriptURL(e):e,St)}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a.toString()},bt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={};function Ct(t,e){this.a=e===Dt?t:""}function Nt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var At=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,kt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ot=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Rt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),t=Ot.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(kt))&&At.test(e[1])?new Ct(t,Dt):null);var e}function Pt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Ot.test(t)||(t="about:invalid#zClosurez"),new Ct(t,Dt))}var Dt={},xt=new Ct("about:invalid#zClosurez",Dt);function Lt(t,e,n){this.a=n===Mt?t:""}Lt.prototype.sa=!0,Lt.prototype.ra=function(){return this.a.toString()},Lt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Ft(t,e,n,r){return t=t instanceof Ct?t:Pt(t),e=e||l,n=n instanceof dt?vt(n):n||"",e.open(Nt(t),n,r,void 0)}function Ut(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function jt(t){return rt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace($,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Z,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(tt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(et,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(nt,"&#0;"))),t}function Vt(t){return Vt[" "](t),t}Vt[" "]=s;var qt,Bt=at("Opera"),Wt=at("Trident")||at("MSIE"),Ht=at("Edge"),Kt=Ht||Wt,zt=at("Gecko")&&!(it(Y.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),Gt=it(Y.toLowerCase(),"webkit")&&!at("Edge");function Qt(){var t=l.document;return t?t.documentMode:void 0}var Yt="",st=(st=Y,zt?/rv:([^\);]+)(\)|;)/.exec(st):Ht?/Edge\/([\d\.]+)/.exec(st):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(st):Gt?/WebKit\/(\S+)/.exec(st):Bt?/(?:Version)[ \/]?(\S+)/.exec(st):void 0);st&&(Yt=st?st[1]:""),qt=Wt&&null!=(st=Qt())&&st>parseFloat(Yt)?String(st):Yt;var Xt={};function Jt(a){return t=a,e=function(){for(var t=0,e=X(String(qt)).split("."),n=X(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=ot(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ot(0==o[2].length,0==s[2].length)||ot(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=Xt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var $t=l.document&&Wt&&(Qt()||parseInt(qt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var Zt=!Wt||9<=Number($t);function te(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ee(n,t){ut(t,function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:ie.hasOwnProperty(e)?n.setAttribute(ie[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var ne,re,ie={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function oe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function se(t){l.setTimeout(function(){throw t},0)}function ae(t,e){var n;re=re||(l.Promise&&l.Promise.resolve?(n=l.Promise.resolve(void 0),function(){n.then(he)}):function(){var t=he;!v(l.setImmediate)||l.Window&&l.Window.prototype&&!at("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(ne=ne||function(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!at("Presto")&&(t=function(){(r=oe(document,"IFRAME")).style.display="none",document.documentElement.appendChild(r);var t=r.contentWindow;(r=t.document).open(),r.close();var e="callImmediate"+Math.random(),n="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host,r=m(function(t){"*"!=n&&t.origin!=n||t.data!=e||this.port1.onmessage()},this);t.addEventListener("message",r,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(e,n)}}}),void 0===t||at("Trident")||at("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Fb,n.Fb=null,t())},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}),ue||(re(),ue=!0),ce.add(t,e)}var ue=!1,ce=new M;function he(){for(var t,e,n;n=e=void 0,n=null,(e=ce).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){se(t)}L(F,t)}ue=!1}function le(t,e){if(this.a=fe,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Te(n,pe,t)},function(t){if(!(t instanceof Re))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Te(n,de,t)})}catch(t){Te(this,de,t)}}var fe=0,pe=2,de=3;function ve(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ve.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ye=new x(function(){return new ve},function(t){t.reset()});function ge(t,e,n){var r=ye.get();return r.g=t,r.b=e,r.f=n,r}function me(t){if(t instanceof le)return t;var e=new le(s);return Te(e,pe,t),e}function _e(n){return new le(function(t,e){e(n)})}function be(t,e,n){Se(t,e,n,null)||ae(_(e,t))}function we(n){return new le(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Ob:!0,value:n}:{Ob:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)be(n[e],_(t,e,!0),_(t,e,!1));else r(o)})}function Ee(t,e){t.b||t.a!=pe&&t.a!=de||Ce(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ie(t,i,o,s){var e=ge(null,null,null);return e.a=new le(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof Re?r(t):n(e)}catch(t){r(t)}}:r}),Ee(e.a.c=t,e),e.a}function Te(t,e,n){var r,i;t.a==fe&&(t===n&&(e=de,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Se(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,Ce(t),e!=de||n instanceof Re||(i=n,(r=t).g=!0,ae(function(){r.g&&Oe.call(null,i)}))))}function Se(t,e,n,r){if(t instanceof le)return Ee(t,ge(e||s,n||null,r)),1;if(O(t))return t.then(e,n,r),1;if(y(t))try{var i=t.then;return v(i)?(function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1):void 0}catch(t){return n.call(r,t),1}}function Ce(t){t.h||(t.h=!0,ae(t.fc,t))}function Ne(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ae(t,e,n,r){if(n==de&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ke(e,n,r);else try{e.c?e.g.call(e.f):ke(e,n,r)}catch(t){Oe.call(null,t)}L(ye,e)}function ke(t,e,n){e==pe?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}le.prototype.then=function(t,e,n){return Ie(this,v(t)?t:null,v(e)?e:null,n)},le.prototype.$goog_Thenable=!0,(t=le.prototype).na=function(t,e){return(t=ge(t,t,e)).c=!0,Ee(this,t),this},t.s=function(t,e){return Ie(this,null,t,e)},t.cancel=function(t){var e;this.a==fe&&(e=new Re(t),ae(function(){!function t(e,n){if(e.a==fe)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==fe&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Ne(r),Ae(r,o,de,n)))}e.c=null}else Te(e,de,n)}(this,e)},this))},t.Zc=function(t){this.a=fe,Te(this,pe,t)},t.$c=function(t){this.a=fe,Te(this,de,t)},t.fc=function(){for(var t;t=Ne(this);)Ae(this,t,this.a,this.i);this.h=!1};var Oe=se;function Re(t){R.call(this,t)}function Pe(){this.xa=this.xa,this.oa=this.oa}w(Re,R);var De=0;function xe(t){t.xa||(t.xa=!0,t.Da(),0==De)||Object.prototype.hasOwnProperty.call(t,n)&&t[n]||(t[n]=++r)}Pe.prototype.xa=!(Re.prototype.name="cancel"),Pe.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Yt=Object.freeze||function(t){return t},Le=!Wt||9<=Number($t),Me=Wt&&!Jt("9"),Fe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function Ue(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function je(t,e){if(Ue.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(zt){t:{try{Vt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ve[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}Ue.prototype.preventDefault=function(){this.defaultPrevented=!0},w(je,Ue);var Ve=Yt({2:"touch",3:"pen",4:"mouse"});je.prototype.preventDefault=function(){je.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Me)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},je.prototype.g=function(){return this.a};var qe="closure_listenable_"+(1e6*Math.random()|0),Be=0;function We(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++Be,this.va=this.Oa=!1}function He(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function Ke(t){this.src=t,this.a={},this.b=0}function ze(t,e){var n=e.type;n in t.a&&K(t.a[n],e)&&(He(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Ge(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}Ke.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Ge(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new We(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var Qe="closure_lm_"+(1e6*Math.random()|0),Ye={};function Xe(t,e,n,r,i){if(r&&r.once)$e(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Xe(t,e[o],n,r,i);else n=un(n),t&&t[qe]?hn(t,e,n,y(r)?!!r.capture:!!r,i):Je(t,e,n,!1,r,i)}function Je(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=y(i)?!!i.capture:!!i,c=sn(t);if(c||(t[Qe]=c=new Ke(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=on,r=a=Le?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Fe||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(en(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function $e(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)$e(t,e[o],n,r,i);else n=un(n),t&&t[qe]?ln(t,e,n,y(r)?!!r.capture:!!r,i):Je(t,e,n,!0,r,i)}function Ze(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=un(n),t&&t[qe]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=Ge(o=t.a[e],n,r,i))&&(He(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&sn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Ge(e,n,r,i)),(n=-1<t?e[t]:null)&&tn(n))}function tn(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[qe]?ze(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(en(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=sn(e))?(ze(n,t),0==n.b&&(n.src=null,e[Qe]=null)):He(t)))}function en(t){return t in Ye?Ye[t]:Ye[t]="on"+t}function nn(t,e,n,r){var i=!0;if((t=sn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=rn(o,r),i=i&&!1!==o)}return i}function rn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&tn(t),n.call(r,e)}function on(t,e){if(t.va)return!0;if(Le)return rn(t,new je(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new je(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=nn(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=nn(r[i],t,!1,e),n=n&&o}return n}function sn(t){return(t=t[Qe])instanceof Ke?t:null}var an="__closure_events_fn_"+(1e9*Math.random()>>>0);function un(e){return v(e)?e:(e[an]||(e[an]=function(t){return e.handleEvent(t)}),e[an])}function cn(){Pe.call(this),this.v=new Ke(this),(this.$b=this).fb=null}function hn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function ln(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function fn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.va&&u.capture==n&&(s=u.listener,a=u.Ua||u.src,u.Oa&&ze(t.v,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function pn(t,e,n){if(v(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function dn(n){var r=null;return new le(function(t,e){-1==(r=pn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).s(function(t){throw l.clearTimeout(r),t})}function vn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function yn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function gn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof gn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function mn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];_n(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)_n(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function _n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(cn,Pe),cn.prototype[qe]=!0,cn.prototype.addEventListener=function(t,e,n,r){Xe(this,t,e,n,r)},cn.prototype.removeEventListener=function(t,e,n,r){Ze(this,t,e,n,r)},cn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t?t=new Ue(t,n):t instanceof Ue?t.target=t.target||n:(s=t,ft(t=new Ue(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=fn(o,r,!0,t)&&s;if(s=fn(o=t.b=n,r,!0,t)&&s,s=fn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=fn(o=t.b=e[i],r,!1,t)&&s;return s},cn.prototype.Da=function(){if(cn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)He(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=gn.prototype).V=function(){mn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return mn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return _n(this.b,t)?this.b[t]:e},t.set=function(t,e){_n(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var bn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function wn(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof wn?(this.i=void 0!==e?e:t.i,En(this,t.f),this.l=t.l,this.a=t.a,In(this,t.g),this.c=t.c,Tn(this,Wn(t.b)),this.h=t.h):t&&(n=String(t).match(bn))?(this.i=!!e,En(this,n[1]||"",!0),this.l=kn(n[2]||""),this.a=kn(n[3]||"",!0),In(this,n[4]),this.c=kn(n[5]||"",!0),Tn(this,n[6]||"",!0),this.h=kn(n[7]||"")):(this.i=!!e,this.b=new Fn(null,this.i))}function En(t,e,n){t.f=n?kn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function In(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Tn(t,e,n){var r,i;e instanceof Fn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(Un(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Vn(this,e),Bn(this,n,t))},r)),r.f=i):(n||(e=On(e,Ln)),t.b=new Fn(e,t.i))}function Sn(t,e,n){t.b.set(e,n)}function Cn(t,e){return t.b.get(e)}function Nn(t){return t instanceof wn?new wn(t):new wn(t,void 0)}function An(t,e,n,r){var i=new wn(null,void 0);return t&&En(i,t),e&&(i.a=e),n&&In(i,n),r&&(i.c=r),i}function kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function On(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Rn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Rn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}wn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(On(e,Pn,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(On(e,Pn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(On(n,"/"==n.charAt(0)?xn:Dn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",On(n,Mn)),t.join("")},wn.prototype.resolve=function(t){var e=new wn(this),n=!!t.f;n?En(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r,i=t.c;if(n)In(e,t.g);else if(n=!!t.c)if("/"!=i.charAt(0)&&(this.a&&!this.c?i="/"+i:-1!=(r=e.c.lastIndexOf("/"))&&(i=e.c.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(it(r,"./")||it(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r;return n?e.c=i:n=""!==t.b.toString(),n?Tn(e,Wn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Pn=/[#\/\?@]/g,Dn=/[#\?:]/g,xn=/[#\?]/g,Ln=/[#\?@]/g,Mn=/#/g;function Fn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Un(o){o.a||(o.a=new gn,o.b=0,o.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],r=n,i=i?decodeURIComponent(i.replace(/\+/g," ")):"",o.add(decodeURIComponent(r.replace(/\+/g," ")),i)}}}(o.c))}function jn(t){var e=yn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Fn(null,void 0);t=vn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Bn(n,i,o):n.add(i,o)}return n}function Vn(t,e){Un(t),e=Hn(t,e),_n(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,_n((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&mn(t)))}function qn(t,e){return Un(t),e=Hn(t,e),_n(t.a.b,e)}function Bn(t,e,n){Vn(t,e),0<n.length&&(t.c=null,t.a.set(Hn(t,e),Q(n)),t.b+=n.length)}function Wn(t){var e=new Fn;return e.c=t.c,t.a&&(e.a=new gn(t.a),e.b=t.b),e}function Hn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Kn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return r.push("]"),0}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(s=n[i],"function"!=typeof s&&(r.push(o),Yn(i,r),r.push(":"),t(e,s,r),o=","));return r.push("}"),0}n=n.valueOf()}switch(typeof n){case"string":Yn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new zn,t,e),e.join("")}function zn(){}(t=Fn.prototype).add=function(t,e){Un(this),this.c=null,t=Hn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Un(this),this.a.forEach(function(t,e){V(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){Un(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Un(this);var e=[];if("string"==typeof t)qn(this,t)&&(e=G(e,this.a.get(Hn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return Un(this),this.c=null,qn(this,t=Hn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.V(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Gn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Qn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Yn(t,e){e.push('"',t.replace(Qn,function(t){var e=Gn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Gn[t]=e),e}),'"')}function Xn(){var t=vr();return Wt&&$t&&11==$t||/Edge\/\d+/.test(t)}function Jn(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function $n(t,e){e=e||l.window;var n="about:blank";t&&(n=Nt(Rt(t)||xt)),e.location.href=n}function Zn(t){return!!((t=(t||vr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function tr(t){t=t||l.window;try{t.close()}catch(t){}}function er(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=vr().toLowerCase(),r&&(e.target=r,it(n,"crios/")&&(e.target="_blank")),fr(vr())==hr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:Rt(void 0!==n.href?n.href:String(n))||xt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(pt(s=oe(document,"A"),"HTMLAnchorElement"),e=e instanceof Ct?e:Pt(e),s.href=Nt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Ft("",r,n,s),t=Nt(e),s&&(Kt&&it(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+jt(t)+'">',t=new Lt(t=(r=_t())?r.createHTML(t):t,0,Mt),r=s.document)&&(r.write((o=t)instanceof Lt&&o.constructor===Lt?o.a:(D("expected object of type SafeHtml, got '"+o+"' of type "+p(o)),"type_error:SafeHtml")),r.close())):(s=Ft(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var nr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rr=/^[^@]+@[^@]+$/;function ir(){var e=null;return new le(function(t){"complete"==l.document.readyState?t():(e=function(){t()},$e(window,"load",e))}).s(function(t){throw Ze(window,"load",e),t})}function or(t){return t=t||vr(),!("file:"!==br()&&"ionic:"!==br()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function sr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function ar(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function ur(){return Vl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Vl.INTERNAL.hasOwnProperty("node")?"Node":ar()?"Worker":"Browser"}function cr(){var t=ur();return"ReactNative"===t||"Node"===t}var hr="Firefox",lr="Chrome";function fr(t){var e=t.toLowerCase();return it(e,"opera/")||it(e,"opr/")||it(e,"opios/")?"Opera":it(e,"iemobile")?"IEMobile":it(e,"msie")||it(e,"trident/")?"IE":it(e,"edge/")?"Edge":it(e,"firefox/")?hr:it(e,"silk/")?"Silk":it(e,"blackberry")?"Blackberry":it(e,"webos")?"Webos":!it(e,"safari/")||it(e,"chrome/")||it(e,"crios/")||it(e,"android")?!it(e,"chrome/")&&!it(e,"crios/")||it(e,"edge/")?it(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":lr:"Safari"}var pr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function dr(t,e){e=e||[];var n,r=[],i={};for(n in pr)i[pr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=ur())?r=fr(i=vr()):"Worker"===r&&(r=fr(i=vr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function vr(){return l.navigator&&l.navigator.userAgent||""}function yr(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function gr(){try{var t=l.localStorage,e=Sr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Xn()||!!l.indexedDB}catch(t){return ar()&&!!l.indexedDB}return!1}function mr(){return(_r()||"chrome-extension:"===br()||or())&&!cr()&&gr()&&!ar()}function _r(){return"http:"===br()||"https:"===br()}function br(){return l.location&&l.location.protocol||null}function wr(t){return!Zn(t=t||vr())&&fr(t)!=hr}function Er(t){return void 0===t?null:Kn(t)}function Ir(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Tr(t){if(null!==t)return JSON.parse(t)}function Sr(t){return t||Math.floor(1e9*Math.random()).toString()}function Cr(t){return"Safari"!=fr(t=t||vr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Nr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Ar(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=vr(),e=ur(),this.b=Zn(t)||"ReactNative"===e}function kr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Or(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function Rr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Pr(){return yr("fireauth.oauthhelper",l)||yr("fireauth.iframe",l)}Ar.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!_r()&&"chrome-extension:"!==br()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Dr,xr={};function Lr(t){xr[t]||(xr[t]=!0,Or(t))}try{var Mr={};Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:2}),Dr=2==Mr.abcd}catch(t){Dr=!1}function Fr(t,e,n){Dr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ur(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Fr(t,n,e[n])}function jr(t){var e={};return Ur(e,t),e}function Vr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Fr(e,n,Vr(t[n]));return e}function qr(t){var e=t&&(t[zr]?"phone":null);if(!(e&&t&&t[Kr]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");Fr(this,"uid",t[Kr]),Fr(this,"displayName",t[Wr]||null);var n=null;t[Hr]&&(n=new Date(t[Hr]).toUTCString()),Fr(this,"enrollmentTime",n),Fr(this,"factorId",e)}function Br(t){try{var e=new Gr(t)}catch(t){e=null}return e}qr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Wr="displayName",Hr="enrolledAt",Kr="mfaEnrollmentId",zr="phoneInfo";function Gr(t){qr.call(this,t),Fr(this,"phoneNumber",t[zr])}function Qr(t){var e={},n=t[$r],r=t[ti],i=t[ei];if(t=Br(t[Zr]),!i||i!=Xr&&i!=Jr&&!n||i==Jr&&!r||i==Yr&&!t)throw Error("Invalid checkActionCode response!");i==Jr?(e[ri]=n||null,e[oi]=n||null,e[ni]=r):(e[ri]=r||null,e[oi]=r||null,e[ni]=n||null),e[ii]=t||null,Fr(this,ai,i),Fr(this,si,Vr(e))}w(Gr,qr),Gr.prototype.w=function(){var t=Gr.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Yr="REVERT_SECOND_FACTOR_ADDITION",Xr="EMAIL_SIGNIN",Jr="VERIFY_AND_CHANGE_EMAIL",$r="email",Zr="mfaInfo",ti="newEmail",ei="requestType",ni="email",ri="fromEmail",ii="multiFactorInfo",oi="previousEmail",si="data",ai="operation";function ui(t){var e=Cn(t=Nn(t),ci)||null,n=Cn(t,hi)||null,r=(r=Cn(t,pi)||null)&&vi[r]||null;if(!e||!n||!r)throw new I("argument-error",ci+", "+hi+"and "+pi+" are required in a valid action code URL.");Ur(this,{apiKey:e,operation:r,code:n,continueUrl:Cn(t,li)||null,languageCode:Cn(t,fi)||null,tenantId:Cn(t,di)||null})}var ci="apiKey",hi="oobCode",li="continueUrl",fi="languageCode",pi="mode",di="tenantId",vi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Yr,signIn:Xr,verifyAndChangeEmail:Jr,verifyEmail:"VERIFY_EMAIL"};function yi(t){try{return new ui(t)}catch(t){return null}}function gi(t){var e=t[Ei];if(void 0===e)throw new I("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new I("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[mi])&&"object"==typeof r){e=r[Si];var n=r[Ii],r=r[Ti];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new I("argument-error",Ii+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new I("argument-error",Ti+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new I("argument-error",Si+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new I("missing-android-pkg-name")}}else if(void 0!==r)throw new I("argument-error",mi+" property must be a non null object when specified.");if(this.f=null,(e=t[wi])&&"object"==typeof e){if("string"==typeof(e=e[Ci])&&e.length)this.f=e;else if(void 0!==e)throw new I("argument-error",Ci+" property must be a non empty string when specified.")}else if(void 0!==e)throw new I("argument-error",wi+" property must be a non null object when specified.");if(void 0!==(e=t[bi])&&"boolean"!=typeof e)throw new I("argument-error",bi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[_i])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new I("argument-error",_i+" property must be a non empty string when specified.");this.i=t||null}var mi="android",_i="dynamicLinkDomain",bi="handleCodeInApp",wi="iOS",Ei="url",Ii="installApp",Ti="minimumVersion",Si="packageName",Ci="bundleId";function Ni(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Ai=null;function ki(t){var e=Ri(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Oi(t){try{return new ki(t)}catch(t){return null}}function Ri(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e,n=(4-(t=t[1]).length%4)%4,r=0;r<n;r++)t+=".";try{return JSON.parse((e="",function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Ai[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Ai){Ai={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ai[o]&&(Ai[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e))}catch(t){}return null}ki.prototype.S=function(){return this.f},ki.prototype.i=function(){return this.b},ki.prototype.toString=function(){return this.g};var Pi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Di=["client_id","response_type","scope","redirect_uri","state"],xi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Di},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Di},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Di},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Pi},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Li(t){for(var e in xi)if(xi[e].fa==t)return xi[e];return null}function Mi(t){var e={};e["facebook.com"]=qi,e["google.com"]=Wi,e["github.com"]=Bi,e["twitter.com"]=Hi;var n=t&&t[Ui];try{if(n)return new(e[n]||Vi)(t);if(void 0!==t[Fi])return new ji(t)}catch(t){}return null}var Fi="idToken",Ui="providerId";function ji(t){var e,n=t[Ui];if(n||!t[Fi]||(e=Oi(t[Fi]))&&e.a&&(n=e.a),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Fr(this,"providerId",n),Fr(this,"isNewUser",e)}function Vi(t){ji.call(this,t),Fr(this,"profile",Vr((t=Tr(t.rawUserInfo||"{}"))||{}))}function qi(t){if(Vi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Bi(t){if(Vi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",this.profile&&this.profile.login||null)}function Wi(t){if(Vi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Hi(t){if(Vi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",t.screenName||null)}function Ki(t){var e=Cn(r=Nn(t),"link"),n=Cn(Nn(e),"link"),r=Cn(r,"deep_link_id");return Cn(Nn(r),"link")||r||n||e||t}function zi(t,e){if(!t&&!e)throw new I("internal-error","Internal assert: no raw session string available");if(t&&e)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Gi:Qi}w(Vi,ji),w(qi,Vi),w(Bi,Vi),w(Wi,Vi),w(Hi,Vi);var Gi="enroll",Qi="signin";function Yi(){}function Xi(t,n){return t.then(function(t){if(t[Us]){var e=Oi(t[Us]);if(!e||n!=e.h)throw new I("user-mismatch");return t}throw new I("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==C+"user-not-found"?new I("user-mismatch"):t})}function Ji(t,e){if(!e)throw new I("internal-error","failed to construct a credential");this.a=e,Fr(this,"providerId",t),Fr(this,"signInMethod",t)}function $i(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Zi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Ji(t.providerId,t.pendingToken)}catch(t){}return null}function to(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Fr(this,"idToken",e.idToken),e.accessToken&&Fr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Fr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");Fr(this,"accessToken",e.oauthToken),Fr(this,"secret",e.oauthTokenSecret)}Fr(this,"providerId",t),Fr(this,"signInMethod",n)}function eo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:jn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function no(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new to(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ro(t,e){this.Pc=e||[],Ur(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Li(t)||{}).Ja||null,this.nb=null}function io(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');ro.call(this,t,[])}function oo(t){ro.call(this,t,Di),this.a=[]}function so(){oo.call(this,"facebook.com")}function ao(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new so).credential({accessToken:e})}function uo(){oo.call(this,"github.com")}function co(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new uo).credential({accessToken:e})}function ho(){oo.call(this,"google.com"),this.Ca("profile")}function lo(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new ho).credential({idToken:n,accessToken:e})}function fo(){ro.call(this,"twitter.com",Pi)}function po(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new to("twitter.com",n,"twitter.com")}function vo(t,e,n){this.a=t,this.f=e,Fr(this,"providerId","password"),Fr(this,"signInMethod",n===go.EMAIL_LINK_SIGN_IN_METHOD?go.EMAIL_LINK_SIGN_IN_METHOD:go.EMAIL_PASSWORD_SIGN_IN_METHOD)}function yo(t){return t&&t.email&&t.password?new vo(t.email,t.password,t.signInMethod):null}function go(){Ur(this,{providerId:"password",isOAuthProvider:!1})}function mo(t,e){if(!(e=_o(e)))throw new I("argument-error","Invalid email link!");return new vo(t,e.code,go.EMAIL_LINK_SIGN_IN_METHOD)}function _o(t){return(t=yi(t=Ki(t)))&&t.operation===Xr?t:null}function bo(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new I("internal-error");this.a=t,Fr(this,"providerId","phone"),this.fa="phone",Fr(this,"signInMethod","phone")}function wo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new bo(n)}return null}function Eo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function Io(t){try{this.a=t||Vl.auth()}catch(t){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ur(this,{providerId:"phone",isOAuthProvider:!1})}function To(t,e){if(!t)throw new I("missing-verification-id");if(!e)throw new I("missing-verification-code");return new bo({cb:t,bb:e})}function So(t){if(t.temporaryProof&&t.phoneNumber)return new bo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return lo(o,n);case"facebook.com":return ao(n);case"github.com":return co(n);case"twitter.com":return po(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new Ji(e,s):new to(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new oo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Co(t){if(!t.isOAuthProvider)throw new I("invalid-oauth-provider")}function No(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function Ao(t){return(t=t||{}).type?new No(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function ko(){this.b=null,this.a=[]}zi.prototype.Ha=function(){return this.a?me(this.a):me(this.b)},zi.prototype.w=function(){return this.type==Gi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Yi.prototype.ja=function(){},Yi.prototype.b=function(){},Yi.prototype.c=function(){},Yi.prototype.w=function(){},Ji.prototype.ja=function(t){return oa(t,$i(this))},Ji.prototype.b=function(t,e){var n=$i(this);return n.idToken=e,sa(t,n)},Ji.prototype.c=function(t,e){return Xi(aa(t,$i(this)),e)},Ji.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},to.prototype.ja=function(t){return oa(t,eo(this))},to.prototype.b=function(t,e){var n=eo(this);return n.idToken=e,sa(t,n)},to.prototype.c=function(t,e){return Xi(aa(t,eo(this)),e)},to.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ro.prototype.Ka=function(t){return this.Hb=ht(t),this},w(io,ro),w(oo,ro),oo.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},oo.prototype.Pb=function(){return Q(this.a)},oo.prototype.credential=function(t,e){if(!(e=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!e.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new to(this.providerId,e,this.providerId)},w(so,oo),Fr(so,"PROVIDER_ID","facebook.com"),Fr(so,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(uo,oo),Fr(uo,"PROVIDER_ID","github.com"),Fr(uo,"GITHUB_SIGN_IN_METHOD","github.com"),w(ho,oo),Fr(ho,"PROVIDER_ID","google.com"),Fr(ho,"GOOGLE_SIGN_IN_METHOD","google.com"),w(fo,ro),Fr(fo,"PROVIDER_ID","twitter.com"),Fr(fo,"TWITTER_SIGN_IN_METHOD","twitter.com"),vo.prototype.ja=function(t){return this.signInMethod==go.EMAIL_LINK_SIGN_IN_METHOD?Ba(t,va,{email:this.a,oobCode:this.f}):Ba(t,Fa,{email:this.a,password:this.f})},vo.prototype.b=function(t,e){return this.signInMethod==go.EMAIL_LINK_SIGN_IN_METHOD?Ba(t,ya,{idToken:e,email:this.a,oobCode:this.f}):Ba(t,ka,{idToken:e,email:this.a,password:this.f})},vo.prototype.c=function(t,e){return Xi(this.ja(t),e)},vo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Ur(go,{PROVIDER_ID:"password"}),Ur(go,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ur(go,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),bo.prototype.ja=function(t){return t.eb(Eo(this))},bo.prototype.b=function(t,e){var n=Eo(this);return n.idToken=e,Ba(t,ja,n)},bo.prototype.c=function(t,e){var n=Eo(this);return n.operation="REAUTH",Xi(t=Ba(t,Va,n),e)},bo.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Io.prototype.eb=function(r,i){var o=this.a.a;return me(i.verify()).then(function(e){if("string"!=typeof e)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=y(r)?r.session:null,n=y(r)?r.phoneNumber:r;return(t=t&&t.type==Gi?t.Ha().then(function(t){return Ba(o,Ra,{idToken:t,phoneEnrollmentInfo:{phoneNumber:n,recaptchaToken:e}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Qi?t.Ha().then(function(t){return t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:e}},Ba(o,Pa,t).then(function(t){return t.phoneResponseInfo.sessionInfo})}):Ba(o,Na,{phoneNumber:n,recaptchaToken:e})).then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},Ur(Io,{PROVIDER_ID:"phone"}),Ur(Io,{PHONE_SIGN_IN_METHOD:"phone"}),No.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},No.prototype.S=function(){return this.h},No.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Oo,Ro=null;function Po(t){var e="unauthorized-domain",n=void 0,r=Nn(t);t=r.a,"chrome-extension"==(r=r.f)?n=Ut("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ut("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",I.call(this,e,n)}function Do(t,e,n){I.call(this,t,n),(t=e||{}).Ib&&Fr(this,"email",t.Ib),t.ea&&Fr(this,"phoneNumber",t.ea),t.credential&&Fr(this,"credential",t.credential),t.Yb&&Fr(this,"tenantId",t.Yb)}function xo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:So(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new I(e,t.message||void 0);return new Do(e,n,t.message)}return null}function Lo(){}function Mo(t){return t.c||(t.c=t.b())}function Fo(){}function Uo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function jo(){}function Vo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.pc,this),this.a.onerror=m(this.Rb,this),this.a.onprogress=m(this.qc,this),this.a.ontimeout=m(this.uc,this)}function qo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Bo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Wo(t){this.f=t,this.b=this.c=this.a=null}function Ho(t,e){this.name=t,this.value=e}w(Po,I),w(Do,I),Do.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&ft(t,e),t},Do.prototype.toJSON=function(){return this.w()},Lo.prototype.c=null,w(Fo,Lo),Fo.prototype.a=function(){var t=Uo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Fo.prototype.b=function(){var t={};return Uo(this)&&(t[0]=!0,t[1]=!0),t},Oo=new Fo,w(jo,Lo),jo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Vo;throw Error("Unsupported browser")},jo.prototype.b=function(){return{}},(t=Vo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,qo(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",qo(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,qo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Bo.prototype.a=null,Bo.prototype.reset=function(t,e,n,r,i){delete this.a},Ho.prototype.toString=function(){return this.name};var Ko=new Ho("SEVERE",1e3),zo=new Ho("WARNING",900),Go=new Ho("CONFIG",700),Qo=new Ho("FINE",500);Wo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c||(e.a?t(e.a):(D("Root logger has no level set."),null))}(this).value)for(v(e)&&(e=e()),t=new Bo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Yo,Xo={},Jo=null;function $o(t){var e,n,r;return Jo||(Jo=new Wo(""),(Xo[""]=Jo).c=Go),(e=Xo[t])||(e=new Wo(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=$o(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,Xo[t]=e),e}function Zo(t,e){t&&t.log(Qo,e,void 0)}function ts(t){this.f=t}function es(t){cn.call(this),this.u=t,this.h=void 0,this.readyState=ns,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.o="GET",this.f="",this.a=!1,this.i=$o("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(ts,Lo),ts.prototype.a=function(){return new es(this.f)},ts.prototype.b=(Yo={},function(){return Yo}),w(es,cn);var ns=0;function rs(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function is(t){t.readyState=4,t.g=null,t.c=null,t.m=null,os(t)}function os(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ss(t){cn.call(this),this.headers=new gn,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=as,this.u=this.R=!1}(t=es.prototype).open=function(t,e){if(this.readyState!=ns)throw this.abort(),Error("Error reopening a connection");this.o=t,this.f=e,this.readyState=1,os(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.o,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,is(this)),this.readyState=ns},t.tc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,os(this)),this.a&&(this.readyState=3,os(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,rs(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){var e;this.a&&((e=this.m.decode(t.value||new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?is:os)(this),3==this.readyState&&rs(this))},t.sc=function(t){this.a&&(this.response=this.responseText=t,is(this))},t.rc=function(t){this.a&&(this.response=t,is(this))},t.Ta=function(t){var e=this.i;e&&e.log(zo,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&is(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(zo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(zo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(es.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(ss,cn);var as="";ss.prototype.b=$o("goog.net.XhrIo");var us=/^https?$/i,cs=["POST","PUT"];function hs(t){return"content-type"==t.toLowerCase()}function ls(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,fs(t),ds(t)}function fs(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ps(t){if(t.c&&void 0!==h)if(t.A[1]&&4==ys(t)&&2==gs(t))Zo(t.b,ms(t,"Local request error detected and ignored"));else if(t.i&&4==ys(t))pn(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==ys(t)){Zo(t.b,ms(t,"Request complete")),t.c=!1;try{var e,n,r,i,o=gs(t);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.l).match(bn)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!us.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var a=2<ys(t)?t.a.statusText:""}catch(e){Zo(t.b,"Can not get status: "+e.message),a=""}t.h=a+" ["+gs(t)+"]",fs(t)}}finally{ds(t)}}}function ds(t,e){if(t.a){vs(t);var n=t.a,r=t.A[0]?s:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Ko,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function vs(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(l.clearTimeout(t.o),t.o=null)}function ys(t){return t.a?t.a.readyState:0}function gs(t){try{return 2<ys(t)?t.a.status:-1}catch(t){return-1}}function ms(t,e){return e+" ["+t.P+" "+t.l+" "+gs(t)+"]"}function _s(t){var e=Os;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function bs(t,e,n){t.a=!0,t.c=n,t.f=!e,Ts(t)}function ws(t){if(t.a){if(!t.m)throw new Ss;t.m=!1}}function Es(t,e,n,r){t.g.push([e,n,r]),t.a&&Ts(t)}function Is(t){return W(t.g,function(t){return v(t[1])})}function Ts(t){var e,n;t.h&&t.a&&Is(t)&&(e=t.h,(n=As[e])&&(l.clearTimeout(n.a),delete As[e]),t.h=0),t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=(s=t.g.shift())[0],o=s[1],s=s[2];if(i=t.f?o:i)try{var a=i.call(s||t.o,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(O(e)||"function"==typeof l.Promise&&e instanceof l.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Is(t)||(n=!0)}}t.c=e,r&&(a=m(t.v,t,!0),r=m(t.v,t,!1),e instanceof _s?(Es(e,a,r),e.A=!0):e.then(a,r)),n&&(e=new Ns(e),As[e.a]=e,t.h=e.a)}function Ss(){R.call(this)}function Cs(){R.call(this)}function Ns(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=ss.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Zo(this.b,ms(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Zo(this.b,ms(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ds(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ds(this,!0)),ss.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?ps(this):this.Ic())},t.Ic=function(){ps(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case as:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Ko,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Zo(this.b,"Can not get response: "+t.message),null}},_s.prototype.cancel=function(t){var e;this.a?this.c instanceof _s&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new Cs,ws(this),bs(this,!1,t)))},_s.prototype.v=function(t,e){this.i=!1,bs(this,t,e)},_s.prototype.then=function(t,e,n){var r,i,o=new le(function(t,e){r=t,i=e});return Es(this,r,function(t){t instanceof Cs?o.cancel():i(t)}),o.then(t,e,n)},_s.prototype.$goog_Thenable=!0,w(Ss,R),Ss.prototype.message="Deferred has already fired",Ss.prototype.name="AlreadyCalledError",w(Cs,R),Cs.prototype.message="Deferred was canceled",Cs.prototype.name="CanceledError",Ns.prototype.c=function(){throw delete As[this.a],this.b};var As={};function ks(t){var e=document,n=wt(t).toString(),r=oe(document,"SCRIPT"),i={Vb:r,Ma:void 0},o=new _s(i),s=window.setTimeout(function(){Rs(r,!0);var t=new xs(Ds,"Timeout reached for loading script "+n);ws(o),bs(o,!1,t)},5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Rs(r,!1,s),ws(o),bs(o,!0,null))},r.onerror=function(){Rs(r,!0,s);var t=new xs(Ps,"Error while loading script "+n);ws(o),bs(o,!1,t)},ft(i={},{type:"text/javascript",charset:"UTF-8"}),ee(r,i),i=t,pt(t=r,"HTMLScriptElement"),t.src=wt(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=l?f(i.document):(null===a&&(a=f(l.document)),a))&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function Os(){var t;this&&this.Vb&&(t=this.Vb)&&"SCRIPT"==t.tagName&&Rs(t,!0,this.Ma)}function Rs(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ps=0,Ds=1;function xs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function Ls(t){this.f=t}function Ms(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||js,this.g=ht(t.secureTokenHeaders||Vs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||qs,this.a=ht(t.firebaseHeaders||Bs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==ur(),!(n=l.XMLHttpRequest||n&&Vl.INTERNAL.node&&Vl.INTERNAL.node.XMLHttpRequest)&&!ar())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ar()?this.f=new ts(self):cr()?this.f=new Ls(n):this.f=new jo,this.b=null}w(xs,R),w(Ls,Lo),Ls.prototype.a=function(){return new this.f},Ls.prototype.b=function(){return{}};var Fs,Us="idToken",js=new Ar(3e4,6e4),Vs={"Content-Type":"application/x-www-form-urlencoded"},qs=new Ar(3e4,6e4),Bs={"Content-Type":"application/json"};function Ws(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Hs(t,e){e&&(t.l=Ks("https://securetoken.googleapis.com/v1/token",e),t.h=Ks("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Ks("https://identitytoolkit.googleapis.com/v2/",e))}function Ks(t,e){return t=Nn(t),e=Nn(e.url),t.c=t.a+t.c,En(t,e.f),t.a=e.a,In(t,e.g),t.toString()}function zs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Gs(t,e,n,r,i,o,s){var a;(t=((a=fr(a=vr())==lr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Wt&&$t&&!(9<$t))&&!ar()?(Fs=Fs||new le(function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(l[Ys]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},Es(ks(Et(Qs,{onload:Ys})),null,function(){r(Error("CORS_UNSUPPORTED"))},void 0))}),m(t.o,t)):m(t.u,t))(e,n,r,i,o,s)}Ms.prototype.S=function(){return this.b},Ms.prototype.u=function(t,n,e,r,i,o){if(ar()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new ss(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),hn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Zo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),ln(a,"ready",function(){s&&clearTimeout(s),xe(this)}),ln(a,"timeout",function(){s&&clearTimeout(s),xe(this),n&&n(null)}),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=(t.O||Oo).a(),t.A=t.O?Mo(t.O):Mo(Oo),t.a.onreadystatechange=m(t.Ub,t);try{Zo(t.b,ms(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return Zo(t.b,ms(t,"Error opening Xhr: "+e.message)),ls(t,e)}e=r||"";var o,s=new gn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)V(t,e,void 0);else for(var n=yn(t),r=vn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=hs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=l.FormData&&e instanceof l.FormData,!H(cs,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{vs(t),0<t.g&&(t.u=(o=t.a,Wt&&Jt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),Zo(t.b,ms(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=m(t.Ma,t)):t.o=pn(t.Ma,t.g,t)),Zo(t.b,ms(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Zo(t.b,ms(t,"Send error: "+e.message)),ls(t,e)}}(a,t,e,r,i)};var Qs=new dt(mt,"https://apis.google.com/js/client.js?onload=%{onload}"),Ys="__fcb"+Math.floor(1e6*Math.random()).toString();function Xs(t){if("string"!=typeof(t=t.email)||!rr.test(t))throw new I("invalid-email")}function Js(t){"email"in t&&Xs(t)}function $s(t){if(!t[Us]){if(t.mfaPendingCredential)throw new I("multi-factor-auth-required",null,ht(t));throw new I("internal-error")}}function Zs(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new I("internal-error")}else{if(!t.sessionInfo)throw new I("missing-verification-id");if(!t.code)throw new I("missing-verification-code")}}Ms.prototype.o=function(t,n,r,i,o){var s=this;Fs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).s(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Ms.prototype.yb=function(){return Ba(this,Oa,{})},Ms.prototype.Ab=function(t,e){return Ba(this,Aa,{idToken:t,email:e})},Ms.prototype.Bb=function(t,e){return Ba(this,ka,{idToken:t,password:e})};var ta={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ea(t){if(!t.phoneVerificationInfo)throw new I("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new I("missing-verification-code")}function na(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new I("internal-error")}function ra(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&qn(t=new Fn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ia(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=xo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=xo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=xo(t)):t.errorMessage&&(e=Wa(t.errorMessage)),e)throw e;$s(t)}function oa(t,e){return e.returnIdpCredential=!0,Ba(t,Da,e)}function sa(t,e){return e.returnIdpCredential=!0,Ba(t,La,e)}function aa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ba(t,xa,e)}function ua(t){if(!t.oobCode)throw new I("invalid-action-code")}(t=Ms.prototype).Cb=function(t,r){var i={idToken:t},o=[];return ut(ta,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Ba(this,Aa,i)},t.ub=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),Ba(this,Ia,t)},t.vb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),Ba(this,ba,t)},t.tb=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ba(this,wa,t)},t.Db=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ba(this,Ea,t)},t.eb=function(t){return Ba(this,Ua,t)},t.mb=function(t,e){return Ba(this,Ca,{oobCode:t,newPassword:e})},t.Qa=function(t){return Ba(this,ha,{oobCode:t})},t.ib=function(t){return Ba(this,ca,{oobCode:t})};var ca={endpoint:"setAccountInfo",B:ua,Z:"email",C:!0},ha={endpoint:"resetPassword",B:ua,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new I("internal-error")},C:!0},la={endpoint:"signupNewUser",B:function(t){if(Xs(t),!t.password)throw new I("weak-password")},F:$s,U:!0,C:!0},fa={endpoint:"createAuthUri",C:!0},pa={endpoint:"deleteAccount",M:["idToken"]},da={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if(!Array.isArray(t.deleteProvider))throw new I("internal-error")}},va={endpoint:"emailLinkSignin",M:["email","oobCode"],B:Xs,F:$s,U:!0,C:!0},ya={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:Xs,F:$s,U:!0},ga={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:ea,F:$s,C:!0,Na:!0},ma={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:ea,F:$s,C:!0,Na:!0},_a={endpoint:"getAccountInfo"},ba={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new I("internal-error");Xs(t)},Z:"email",C:!0},wa={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",C:!0},Ea={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",C:!0},Ia={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new I("internal-error");Xs(t)},Z:"email",C:!0},Ta={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},Sa={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new I("internal-error")}},Ca={endpoint:"resetPassword",B:ua,Z:"email",C:!0},Na={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Aa={endpoint:"setAccountInfo",M:["idToken"],B:Js,U:!0},ka={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(Js(t),!t.password)throw new I("weak-password")},F:$s,U:!0},Oa={endpoint:"signupNewUser",F:$s,U:!0,C:!0},Ra={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new I("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new I("internal-error")},C:!0,Na:!0},Pa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new I("internal-error")},C:!0,Na:!0},Da={endpoint:"verifyAssertion",B:na,Xa:ra,F:ia,U:!0,C:!0},xa={endpoint:"verifyAssertion",B:na,Xa:ra,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new I("user-not-found");if(t.errorMessage)throw Wa(t.errorMessage);$s(t)},U:!0,C:!0},La={endpoint:"verifyAssertion",B:function(t){if(na(t),!t.idToken)throw new I("internal-error")},Xa:ra,F:ia,U:!0},Ma={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new I("invalid-custom-token")},F:$s,U:!0,C:!0},Fa={endpoint:"verifyPassword",B:function(t){if(Xs(t),!t.password)throw new I("wrong-password")},F:$s,U:!0,C:!0},Ua={endpoint:"verifyPhoneNumber",B:Zs,F:$s,C:!0},ja={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new I("internal-error");Zs(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",xo(t);$s(t)}},Va={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:Zs,F:$s,C:!0},qa={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Us]^!!t.refreshToken)throw new I("internal-error")},C:!0,Na:!0};function Ba(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return _e(new I("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return me(n).then(e.B).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Nn(e+n);Sn(a,"key",t.c),s&&Sn(a,"cb",b().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Sn(a,c,i[c]);return new le(function(e,n){Gs(t,a.toString(),function(t){t?t.error?n(Ha(t,o||{})):e(t):n(new I("network-request-failed"))},r,u?void 0:Kn(Ir(i)),t.a,t.m.get())})}(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)}).then(function(t){return r=t,e.Xa?e.Xa(n,r):r}).then(e.F).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new I("internal-error");return r[e.Z]})}function Wa(t){return Ha({error:{errors:[{message:t}],code:400,message:t}})}function Ha(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new I(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",ft(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new I(i[n],e);return!e&&t&&(e=Er(t)),new I("internal-error",e)}function Ka(t){var o;this.b=t,this.a=null,this.qb=(o=this,(Ya=Ya||new le(function(t,e){function n(){Nr(),yr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Nr(),e(Error("Network Error"))},timeout:Ga.get()})}var r;yr("gapi.iframes.Iframe")?t():yr("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){yr("gapi.load")?n():e(Error("Network Error"))},me(ks(Et(za,{onload:r}))).s(function(){e(Error("Network Error"))}))}).s(function(t){throw Ya=null,t})).then(function(){return new le(function(r,i){yr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Qa.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var za=new dt(mt,"https://apis.google.com/js/api.js?onload=%{onload}"),Ga=new Ar(3e4,6e4),Qa=new Ar(5e3,15e3),Ya=null;function Xa(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?An((t=Nn(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):An("https",this.l,null,"/__/auth/iframe"),this.a=t,Sn(this.a,"apiKey",this.h),Sn(this.a,"appName",this.i),this.b=null,this.c=[]}function Ja(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function $a(t){try{return Vl.app(t).auth().Ga()}catch(t){return[]}}function Za(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function tu(t){var a=Jn();return Ba(t,Ta,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=Nn(a)).f,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?Nn(i).a==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(nr.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Po(Jn())})}function eu(i){return i.v||(i.v=ir().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=$a(i.b),(r=new Xa(i.o,i.g,i.b,i.f)).f=t,r.b=e,r.c=Q(n||[]),i.u=r.toString()),i.m=new Ka(i.u),function(r){if(!r.m)throw Error("IfcHandler must be initialized!");var t,e;t=r.m,e=function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Ao(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",me(e)}return e.status="ERROR",me(e)},t.qb.then(function(){t.a.register("authEvent",e,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(i)})),i.v}function nu(t){return t.l||(t.A=t.c?dr(t.c,$a(t.b)):null,t.l=new Ms(t.g,k(t.i),t.A),t.f&&Hs(t.l,t.f)),t.l}function ru(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new Ja(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ht(u||null),t.f=c,t.xb(h).toString()}function iu(t){if(this.a=t||Vl.INTERNAL.reactNative&&Vl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function ou(t){this.b=t,this.a={},this.f=m(this.c,this)}Xa.prototype.toString=function(){return this.f?Sn(this.a,"v",this.f):Vn(this.a.b,"v"),this.b?Sn(this.a,"eid",this.b):Vn(this.a.b,"eid"),this.c.length?Sn(this.a,"fw",this.c.join(",")):Vn(this.a.b,"fw"),this.a.toString()},Ja.prototype.xb=function(t){return this.h=t,this},Ja.prototype.toString=function(){var t;if(Sn(t=this.m?An((t=Nn(this.m.url)).f,t.a,t.g,"/emulator/auth/handler"):An("https",this.u,null,"/__/auth/handler"),"apiKey",this.o),Sn(t,"appName",this.c),Sn(t,"authType",this.v),this.a.isOAuthProvider){var e,n=this.a;try{var r=Vl.app(this.c).auth().ka()}catch(t){r=null}for(e in n.nb=r,Sn(t,"providerId",this.a.providerId),n=Ir((r=this.a).Hb))n[e]=n[e].toString();e=r.Pc,n=ht(n);for(var i=0;i<e.length;i++){var o=e[i];o in n&&delete n[o]}r.ob&&r.nb&&!n[r.ob]&&(n[r.ob]=r.nb),ct(n)||Sn(t,"customParameters",Er(n))}if("function"==typeof this.a.Pb&&(r=this.a.Pb()).length&&Sn(t,"scopes",r.join(",")),this.l?Sn(t,"redirectUrl",this.l):Vn(t.b,"redirectUrl"),this.g?Sn(t,"eventId",this.g):Vn(t.b,"eventId"),this.i?Sn(t,"v",this.i):Vn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Cn(t,s)&&Sn(t,s,this.b[s]);return this.h?Sn(t,"tid",this.h):Vn(t.b,"tid"),this.f?Sn(t,"eid",this.f):Vn(t.b,"eid"),(s=$a(this.c)).length&&Sn(t,"fw",s.join(",")),t.toString()},(t=Za.prototype).Nb=function(e,n,t){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),o=this,s=!1;return this.la().then(function(){var t,r={type:"webStorageSupport"};eu(t=o).then(function(){return e=t.m,n=r,e.qb.then(function(){return new le(function(t){e.a.send(n.type,n,t,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&tr(e),n(i),s=!0)})}).s(function(){}).then(function(){if(!s)return n=e,new le(function(e){return function t(){dn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return dn(t).then(function(){n(r)})})},t.Wb=function(){var t=vr();return!wr(t)&&!Cr(t)},t.Sb=function(){return!1},t.Lb=function(e,t,n,r,i,o,s,a){if(!e)return _e(new I("popup-blocked"));if(s&&!wr())return this.la().s(function(t){tr(e),i(t)}),r(),me();this.a||(this.a=tu(nu(this)));var u=this;return this.a.then(function(){var t=u.la().s(function(t){throw tr(e),i(t),t});return r(),t}).then(function(){Co(n),s||$n(ru(u.o,u.g,u.b,t,n,null,o,u.c,void 0,u.i,a,u.f),e)}).s(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Mb=function(t,e,n,r){this.a||(this.a=tu(nu(this)));var i=this;return this.a.then(function(){Co(e),$n(ru(i.o,i.g,i.b,t,e,Jn(),n,i.c,void 0,i.i,r,i.f))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.la=function(){var t=this;return eu(this).then(function(){return t.m.qb}).s(function(){throw t.a=null,new I("network-request-failed")})},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(e){z(this.h,function(t){return t==e})},(t=iu.prototype).get=function(t){return me(this.a.getItem(t)).then(function(t){return t&&Tr(t)})},t.set=function(t,e){return me(this.a.setItem(t,Er(e)))},t.T=function(t){return me(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var su,au=[];function uu(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function cu(t){this.a=t}function hu(t){this.c=t,this.b=!1,this.a=[]}function lu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return _e(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new le(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return fu(r,c),t}).s(function(t){throw fu(r,c),t})}function fu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),z(t.a,function(t){return t==e}))}function pu(){if(!yu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.v=l.indexedDB,this.type="indexedDB",this.g=this.m=this.f=this.l=null,this.o=!1,this.h=null;var t,e,n,r=this;ar()&&self?(this.m=(n=ar()?self:null,V(au,function(t){t.b==n&&(e=t)}),e||(e=new ou(n),au.push(e)),e),uu(this.m,"keyChanged",function(t,n){return wu(r).then(function(e){return 0<e.length&&V(r.a,function(t){t(e)}),{keyProcessed:H(e,n.key)}})}),uu(this.m,"ping",function(){return me(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?me().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):me(null)).then(function(t){(r.h=t)&&(r.g=new hu(new cu(t)),lu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&H(t[0].value,"keyChanged")&&(r.o=!0)}).s(function(){}))})}function du(t){return t.i||(t.i=function i(o){return new le(function(e,n){var t=o.v.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=o,new le(function(t,e){var n=r.v.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return i(o)}).then(function(t){e(t)}).s(function(t){n(t)}))}})}(t)),t.i}function vu(i,t){var o=0;return new le(function e(n,r){du(i).then(t).then(n).s(function(t){return 3<++o?void r(t):du(i).then(function(t){return t.close(),i.i=void 0,e(n,r)})})})}function yu(){try{return l.indexedDB}catch(t){return}}function gu(t){return t.objectStore("firebaseLocalStorage")}function mu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function _u(t){return new le(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function bu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?lu(t.g,"keyChanged",{key:e},t.o).then(function(){}).s(function(){}):me();var n}function wu(r){return du(r).then(function(t){var i=gu(mu(t,!1));return i.getAll?_u(i.getAll()):new le(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Eu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Iu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=me().then(function(){if(yu()){var e=Sr(),n="__sak"+e;return su=su||new pu,(i=su).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).s(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){V(r.a,function(t){t(e)})}),t})}function Tu(){this.a={},this.type="inMemory"}function Su(){if(!function(){var t="Node"==ur();if(t=Cu()||t&&Vl.INTERNAL.node&&Vl.INTERNAL.node.localStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==ur())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Cu()||Vl.INTERNAL.node.localStorage,this.type="localStorage"}function Cu(){try{var t=l.localStorage,e=Sr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Nu(){this.type="nullStorage"}function Au(){if(!function(){var t="Node"==ur();if(t=ku()||t&&Vl.INTERNAL.node&&Vl.INTERNAL.node.sessionStorage)try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==ur())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=ku()||Vl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function ku(){try{var t=l.sessionStorage,e=Sr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ou(){var t={};t.Browser=Du,t.Node=xu,t.ReactNative=Lu,t.Worker=Mu,this.a=t[ur()]}ou.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],V(t,function(t){e.push(me().then(function(){return t(n.origin,n.data.data)}))}),we(e).then(function(t){var e=[];V(t,function(t){e.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})}),V(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},cu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},hu.prototype.close=function(){for(;0<this.a.length;)fu(this,this.a[0]);this.b=!0},(t=pu.prototype).set=function(r,i){var o=this,s=!1;return vu(this,function(t){return _u((t=gu(mu(t,!0))).get(r))}).then(function(n){return vu(o,function(t){if(t=gu(mu(t,!0)),n)return n.value=i,_u(t.put(n));o.b++,s=!0;var e={};return e.fbase_key=r,e.value=i,_u(t.add(e))})}).then(function(){return o.c[r]=i,bu(o,r)}).na(function(){s&&o.b--})},t.get=function(e){return vu(this,function(t){return _u(gu(mu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=this,r=!1;return vu(this,function(t){return r=!0,n.b++,_u(gu(mu(t,!0)).delete(e))}).then(function(){return delete n.c[e],bu(n,e)}).na(function(){r&&n.b--})},t.ca=function(t){var n;0==this.a.length&&(Eu(n=this),function e(){n.f=setTimeout(function(){n.l=wu(n).then(function(e){0<e.length&&V(n.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){z(this.a,function(t){return t==e}),0==this.a.length&&Eu(this)},(t=Iu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){z(this.a,function(t){return t==e})},(t=Tu.prototype).get=function(t){return me(this.a[t])},t.set=function(t,e){return this.a[t]=e,me()},t.T=function(t){return delete this.a[t],me()},t.ca=function(){},t.ia=function(){},(t=Su.prototype).get=function(t){var e=this;return me().then(function(){return Tr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return me().then(function(){var t=Er(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return me().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&Xe(l.window,"storage",t)},t.ia=function(t){l.window&&Ze(l.window,"storage",t)},(t=Nu.prototype).get=function(){return me(null)},t.set=function(){return me()},t.T=function(){return me()},t.ca=function(){},t.ia=function(){},(t=Au.prototype).get=function(t){var e=this;return me().then(function(){return Tr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return me().then(function(){var t=Er(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return me().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Ru,Pu,Du={D:Su,ab:Au},xu={D:Su,ab:Au},Lu={D:iu,ab:Nu},Mu={D:Su,ab:Nu},Fu={qd:"local",NONE:"none",sd:"session"};function Uu(){var t=!(Cr(vr())||!sr()),e=wr(),n=gr();this.v=t,this.h=e,this.l=n,this.a={},t=Ru=Ru||new Ou;try{this.g=!Xn()&&Pr()||!l.indexedDB?new t.a.D:new Iu(new(ar()?Tu:t.a.D))}catch(t){this.g=new Tu,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new Tu}this.m=new Tu,this.f=m(this.Xb,this),this.b={}}function ju(){return Pu=Pu||new Uu}function Vu(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function qu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Bu(t,e,n){return n=qu(e,n),"local"==e.D&&(t.b[n]=null),Vu(t,e.D).T(n)}function Wu(t){t.c&&(clearInterval(t.c),t.c=null)}function Hu(t){this.a=t,this.b=ju()}(t=Uu.prototype).get=function(t,e){return Vu(this,t.D).get(qu(t,e))},t.set=function(e,t,n){var r=qu(e,n),i=this,o=Vu(this,e.D);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.D&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=qu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ct(this.a)&&(Vu(this,"local").ca(this.f),this.h||(Xn()||!Pr())&&l.indexedDB||!this.l||(Wu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new je({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Xb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=qu(t,e),this.a[t]&&(z(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(Vu(this,"local").ia(this.f),Wu(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Vu(this,"local").ia(this.f):Wu(this),this.v)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.lb(e))};Wt&&$t&&10==$t&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,m(this.lb,this))},t.lb=function(t){this.a[t]&&V(this.a[t],function(t){t()})};var Ku,zu={name:"authEvent",D:"local"};function Gu(){this.a=ju()}function Qu(t,e){this.b=Yu,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Ku&&(Ku=l.Int32Array?new Int32Array(nc):nc),this.reset()}w(Qu,function(){this.b=-1});for(var Yu=64,Xu=Yu-1,Ju=[],$u=0;$u<Xu;$u++)Ju[$u]=0;var Zu=G(128,Ju);function tc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++)var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0,s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Ku[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0;t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function ec(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(tc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(tc(t),i=0)}}t.c=i,t.g+=n}Qu.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Q(this.h)};var nc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function rc(){Qu.call(this,8,ic)}w(rc,Qu);var ic=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function oc(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new Gu,this.g=new Hu(this.h),this.f=null,this.b=[],this.a=this.c=null}function sc(t){return new I("invalid-cordova-configuration",t)}function ac(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function uc(c){return c.f||(c.f=c.la().then(function(){return new le(function(n){function e(r){t=!0,s&&s.cancel(),cc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,-1!=(n=Ki(r.url)).indexOf("/__/auth/callback")&&(e=(e="object"==typeof(e=Tr(Cn(e=Nn(n),"firebaseError")||null))?T(e):null)?new No(t.c,t.b,null,null,e,null,t.S()):new No(t.c,t.b,n,t.f,null,null,t.S())),n=e||o),ac(i,n)})}var i,o,t,s,r,a,u;c.Ea(function t(e){return n(e),c.Ra(t),!1}),i=c,o=new No("unknown",null,null,null,new I("no-auth-event")),t=!1,s=dn(500).then(function(){return cc(i).then(function(){t||ac(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(yr("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Ro=Ro||new ko,a=e,(u=Ro).a.push(a),u.b||(u.b=function(t){for(var e=0;e<u.a.length;e++)u.a[e](t)},"function"==typeof(a=yr("universalLinks.subscribe",l))&&a(null,u.b))})})),c.f}function cc(e){var t,n=null;return(t=e.g).b.get(zu,t.a).then(Ao).then(function(t){return n=t,Bu((t=e.g).b,zu,t.a)}).then(function(){return n})}function hc(t){this.a=t,this.b=ju()}(t=oc.prototype).la=function(){return this.Ia||(this.Ia=(or(void 0)?ir().then(function(){return new le(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):_e(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof yr("universalLinks.subscribe",l))throw sc("cordova-universal-links-plugin-fix is not installed");if(void 0===yr("BuildInfo.packageName",l))throw sc("cordova-plugin-buildinfo is not installed");if("function"!=typeof yr("cordova.plugins.browsertab.openUrl",l))throw sc("cordova-plugin-browsertab is not installed");if("function"!=typeof yr("cordova.InAppBrowser.open",l))throw sc("cordova-plugin-inappbrowser is not installed")},function(){throw new I("cordova-not-ready")}))},t.Nb=function(t,e){return e(new I("operation-not-supported-in-this-environment")),me()},t.Lb=function(){return _e(new I("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return _e(new I("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=me().then(function(){return Co(e),uc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new No(t,r,null,o,new I("no-auth-event"),null,i),a=yr("BuildInfo.packageName",l);if("string"!=typeof a)throw new I("invalid-cordova-configuration");var u=yr("BuildInfo.displayName",l),c={};if(vr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!vr().toLowerCase().match(/android/))return _e(new I("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=function(t){var e=new rc;ec(e,t),t=[];var n=8*e.g;e.c<56?ec(e,Zu,56-e.c):ec(e,Zu,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(tc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return B(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}(o),c.sessionId=o;var h=ru(n.m,n.i,n.l,t,e,null,r,n.v,c,n.u,i,n.o);return n.la().then(function(){var t=n.h;return n.A.a.set(zu,s.w(),t)}).then(function(){var t=yr("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new I("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=yr("cordova.plugins.browsertab.openUrl",l)))throw new I("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=yr("cordova.InAppBrowser.open",l)))throw new I("invalid-cordova-configuration");t=vr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new le(function(e,t){a=function(){var t=yr("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s=s||dn(2e3).then(function(){t(new I("redirect-cancelled-by-user"))})},c=function(){kr()&&u()},o.addEventListener("resume",u,!1),vr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).s(function(t){return cc(i).then(function(){throw t})})}).na(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Ra(a),i.c=null})},t.Ea=function(e){this.b.push(e),uc(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new No("unknown",null,null,null,new I("no-auth-event")),e(t))})},t.Ra=function(e){z(this.b,function(t){return t==e})};var lc={name:"pendingRedirect",D:"session"};function fc(t){return Bu(t.b,lc,t.a)}function pc(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=m(this.o,this),this.b=new Ac,this.A=new Dc,this.g=new hc(Cc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=dc(this.O,this.m,this.v,S,this.G)}function dc(t,e,n,r,i){var o=Vl.SDK_VERSION||null;return new(or()?oc:Za)(t,e,n,o,r,i)}function vc(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.la().s(function(t){throw e.a==n&&e.reset(),t})}function yc(n){n.a.Wb()&&vc(n).s(function(t){var e=new No("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Ec(t)&&n.o(e)}),n.a.Sb()||kc(n.b)}function gc(n,t){H(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(lc,t.a).then(function(t){return"pending"==t}).then(function(t){t?fc(n.g).then(function(){vc(n).s(function(t){var e=new No("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Ec(t)&&n.o(e)})}):yc(n)}).s(function(){yc(n)})}function mc(t,e){z(t.h,function(t){return t==e})}pc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=dc(this.O,this.m,this.v,null,this.G),this.i={}},pc.prototype.o=function(t){if(!t)throw new I("invalid-auth-event");if(6e5<=b()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=b())),e=!0;break}}return kc(this.b),e};var _c=new Ar(2e3,1e4),bc=new Ar(3e4,6e4);function wc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Ec(t){return t&&"auth/cordova-not-ready"==t.code}function Ic(e,t,n,r,i){var o,s;return(s=e.g).b.set(lc,"pending",s.a).then(function(){return e.a.Mb(t,n,r,i).s(function(t){if(Ec(t))throw new I("operation-not-supported-in-this-environment");return o=t,fc(e.g).then(function(){throw o})}).then(function(){return e.a.Zb()?new le(function(){}):fc(e.g).then(function(){return e.qa()}).then(function(){}).s(function(){})})})}function Tc(t,e,n,r,i){return t.a.Nb(r,function(t){e.ma(n,null,t,i)},_c.get())}pc.prototype.qa=function(){return this.b.qa()};var Sc={};function Cc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Nc(t,e,n,r){var i=Cc(e,n,r);return Sc[i]||(Sc[i]=new pc(t,e,n,r)),Sc[i]}function Ac(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function kc(t){t.g||(t.g=!0,Pc(t,!1,null,null))}function Oc(t){t.g&&!t.i&&Pc(t,!1,null,null)}function Rc(t,e){if(t.b=function(){return me(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Pc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return _e(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Rc(t,n):Rc(t,{user:null}),t.f=[],t.c=[]}function Dc(){}function xc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Lc(t,e){this.a=e,Fr(this,"verificationId",t)}function Mc(t,e,n,r){return new Io(t).eb(e,n).then(function(t){return new Lc(t,r)})}function Fc(t){var e=Ri(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ur(this,{token:t,expirationTime:Rr(1e3*e.exp),authTime:Rr(1e3*e.auth_time),issuedAtTime:Rr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Uc(t,e,n){var r=e&&e[Vc];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ht(e),this.g=n,this.c=new zi(null,r),this.b=[];var i=this;V(e[jc]||[],function(t){(t=Br(t))&&i.b.push(t)}),Fr(this,"auth",this.a),Fr(this,"session",this.c),Fr(this,"hints",this.b)}Ac.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ac.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Pc(this,!0,null,t.a),me()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Pc(e,a,t,null)}).s(function(t){Pc(e,a,null,t)})}(this,t,e):_e(new I("invalid-auth-event")):(Pc(this,!1,null,null),me())):_e(new I("invalid-auth-event"))},Ac.prototype.qa=function(){var i=this;return new le(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new I("timeout"),n.a&&n.a.cancel(),n.a=dn(bc.get()).then(function(){n.b||(n.g=!0,Pc(n,!0,null,r))}))})},Dc.prototype.h=function(t,e){var n,r,i,o,s;t?(n=t.c,r=t.b,t.a?(e.ma(t.c,null,t.a,t.b),me()):e.Fa(n,r)?(i=e,o=t.b,s=t.c,i.Fa(s,o)(t.g,t.f,t.S(),t.i).then(function(t){i.ma(s,t,null,o)}).s(function(t){i.ma(s,null,t,o)})):_e(new I("invalid-auth-event"))):_e(new I("invalid-auth-event"))},Lc.prototype.confirm=function(t){return t=To(this.verificationId,t),this.a(t)};var jc="mfaInfo",Vc="mfaPendingCredential";function qc(t,e,n,r){I.call(this,"multi-factor-auth-required",r,e),this.b=new Uc(t,e,n),Fr(this,"resolver",this.b)}function Bc(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new qc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Wc(){}function Hc(t){Fr(this,"factorId",t.fa),this.a=t}function Kc(t){if(Hc.call(this,t),this.a.fa!=Io.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function zc(t,e){for(var n in Ue.call(this,t),e)this[n]=e[n]}function Gc(t,e){this.a=t,this.b=[],this.c=m(this.xc,this),Xe(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Kr]=t.uid),t.displayName&&(n[Wr]=t.displayName),t.enrollmentTime&&(n[Hr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[zr]=t.phoneNumber);try{e=new Gr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),Qc(this,r)}function Qc(t,e){t.b=e,Fr(t,"enrolledFactors",e)}function Yc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Xc(t){this.c=t,this.b=this.a=null}function Jc(t){return t.b&&1e3*t.b.c||0}function $c(t,e){var n=e.refreshToken;t.b=Oi(e[Us]||""),t.a=n}function Zc(t,e){this.a=t||null,this.b=e||null,Ur(this,{lastSignInTime:Rr(e||null),creationTime:Rr(t||null)})}function th(t,e,n,r,i,o){Ur(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function eh(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var r,i=Vl.SDK_VERSION?dr(Vl.SDK_VERSION):null;this.a=new Ms(this.l,k(S),i),t.emulatorConfig&&Hs(this.a,t.emulatorConfig),this.b=new Xc(this.a),ch(this,e[Us]),$c(this.b,e),Fr(this,"refreshToken",this.b.a),fh(this,n||{}),cn.call(this),this.P=!1,this.o&&mr()&&(this.i=Nc(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=(r=this,new Yc(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=Jc(r.b)-b()-3e5;return 0<t?t:0})),this.$=m(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){Hs(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){ih(o,t.f)},this.aa=null,this.N=new Gc(this,n),Fr(this,"multiFactor",this.N)}function nh(t,e){t.ba&&Ze(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&Xe(e,"languageCodeChanged",t.Ba)}function rh(t,e){t.W&&Ze(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&Xe(e,"emulatorConfigChanged",t.za)}function ih(t,e){t.X=e,zs(t.a,Vl.SDK_VERSION?dr(Vl.SDK_VERSION,t.X):null)}function oh(t,e){t.aa&&Ze(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&Xe(e,"frameworkChanged",t.Aa)}function sh(e){try{return Vl.app(e.m).auth()}catch(t){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function ah(t){t.A||t.u.b||(t.u.start(),Ze(t,"tokenChanged",t.$),Xe(t,"tokenChanged",t.$))}function uh(t){Ze(t,"tokenChanged",t.$),t.u.stop()}function ch(t,e){t.ya=e,Fr(t,"_lat",e)}function hh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return we(e).then(function(){return t})}function lh(t){t.i&&!t.P&&(t.P=!0,gc(t.i,t))}function fh(t,e){Ur(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Zc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function ph(){}function dh(t){return me().then(function(){if(t.A)throw new I("app-deleted")})}function vh(t){return B(t.providerData,function(t){return t.providerId})}function yh(t,e){e&&(gh(t,e.providerId),t.providerData.push(e))}function gh(t,e){z(t.providerData,function(t){return t.providerId==e})}function mh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Fr(t,e,n)}function _h(e,t){var n,r;e!=t&&(Ur(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Fr(e,"metadata",new Zc((r=t.metadata).a,r.b)):Fr(e,"metadata",new Zc),V(t.providerData,function(t){yh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,Fr(e,"refreshToken",e.b.a),Qc(e.N,t.N.b))}function bh(r){return r.I().then(function(t){var e,n=r.isAnonymous;return Ba((e=r).a,_a,{idToken:t}).then(m(e.Jc,e)).then(function(){return n||mh(r,"isAnonymous",!1),t})})}function wh(t,e){e[Us]&&t.ya!=e[Us]&&($c(t.b,e),t.dispatchEvent(new zc("tokenChanged")),ch(t,e[Us]),mh(t,"refreshToken",t.b.a))}function Eh(t,e){return bh(t).then(function(){if(H(vh(t),e))return hh(t).then(function(){throw new I("provider-already-linked")})})}function Ih(t,e,n){return jr({user:t,credential:So(e),additionalUserInfo:e=Mi(e),operationType:n})}function Th(t,e){return wh(t,e),t.reload().then(function(){return t})}function Sh(n,r,t,e,i){if(!mr())return _e(new I("operation-not-supported-in-this-environment"));if(n.f&&!i)return _e(n.f);var o=Li(t.providerId),s=Sr(n.uid+":::"),a=null;(!wr()||sr())&&n.o&&t.isOAuthProvider&&(a=ru(n.o,n.l,n.m,r,t,null,s,Vl.SDK_VERSION||null,null,null,n.tenantId));var u=er(a,o&&o.ua,o&&o.ta);return e=e().then(function(){if(Nh(n),!i)return n.I().then(function(){})}).then(function(){return wc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new le(function(t,e){n.ma(r,null,new I("cancelled-popup-request"),n.h||null),n.g=t,n.O=e,n.h=s,n.c=Tc(n.i,n,r,u,s)})}).then(function(t){return u&&tr(u),t?jr(t):null}).s(function(t){throw u&&tr(u),t}),Ah(n,e,i)}function Ch(e,t,n,r,i){if(!mr())return _e(new I("operation-not-supported-in-this-environment"));if(e.f&&!i)return _e(e.f);var o=null,s=Sr(e.uid+":::");return r=r().then(function(){if(Nh(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=s,hh(e)}).then(function(t){return e.ha&&(t=(t=e.ha).b.set(Rh,e.w(),t.a)),t}).then(function(){return Ic(e.i,t,n,s,e.tenantId)}).s(function(t){if(o=t,e.ha)return Ph(e.ha);throw o}).then(function(){if(o)throw o}),Ah(e,r,i)}function Nh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Ah(n,t,e){var r,i=(r=n).f&&!e?(t.cancel(),_e(r.f)):t.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.f||r.dispatchEvent(new zc("userInvalidated")),r.f=t),t});return n.G.push(i),i.na(function(){K(n.G,i)}),i.s(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Bc(t.w(),sh(n),m(n.ic,n))),e||t})}function kh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Us]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new eh(e,n,t);return t.providerData&&V(t.providerData,function(t){t&&yh(r,jr(t))}),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Oh(t){this.a=t,this.b=ju()}Uc.prototype.Qc=function(t){var n=this;return t.rb(this.a.a,this.c).then(function(t){var e=ht(n.f);return delete e[jc],delete e[Vc],ft(e,t),n.g(e)})},w(qc,I),Wc.prototype.rb=function(t,e,n){return e.type==Gi?(o=this,s=t,a=n,e.Ha().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),ft(t,{phoneVerificationInfo:Eo(o.a)}),Ba(s,ga,t)})):(r=this,i=t,e.Ha().then(function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:Eo(r.a)}),Ba(i,ma,t)}));var r,i,o,s,a},w(Hc,Wc),w(Kc,Hc),w(zc,Ue),(t=Gc.prototype).xc=function(t){var e;Qc(this,(t=t.gd,e=[],V(t.mfaInfo||[],function(t){(t=Br(t))&&e.push(t)}),e))},t.Qb=function(){return this.a.I().then(function(t){return new zi(t,null)})},t.ec=function(e,n){var r=this,i=this.a.a;return this.Qb().then(function(t){return e.rb(i,t,n)}).then(function(t){return wh(r.a,t),r.a.reload()})},t.ad=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Ba(e,qa,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=q(n.b,function(t){return t.uid!=r});return Qc(n,e),wh(n.a,t),n.a.reload().s(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:B(this.b,function(t){return t.w()})}}},Yc.prototype.start=function(){this.a=this.c,function e(n,t){var r;n.stop(),n.b=dn((r=n,(t=t)?(r.a=r.c,r.g()):(t=r.a,r.a*=2,r.a>r.f&&(r.a=r.f),t))).then(function(){return e=l.document,n=null,kr()||!e?me():new le(function(t){n=function(){kr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).s(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).s(function(t){n.i(t)&&e(n,!1)})}(this,!0)},Yc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Xc.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:Jc(this)}},Xc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?_e(new I("user-token-expired")):t||!this.b||b()>Jc(this)-3e4?this.a?(t={grant_type:"refresh_token",refresh_token:(e=this).a},r=e.c,i=t,new le(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Gs(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ha(t)):t.access_token&&t.refresh_token?e(t):n(new I("internal-error")):n(new I("network-request-failed"))},"POST",jn(i).toString(),r.g,r.v.get()):n(new I("internal-error"))}).then(function(t){return e.b=Oi(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t})):me(null):me({accessToken:this.b.toString(),refreshToken:this.a});var e,r,i},Zc.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(eh,cn),eh.prototype.wa=function(t){this.pa=t,Ws(this.a,t)},eh.prototype.ka=function(){return this.pa},eh.prototype.Ga=function(){return Q(this.X)},eh.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Fr(eh.prototype,"providerId","firebase"),(t=eh.prototype).reload=function(){var t=this;return Ah(this,dh(this).then(function(){return bh(t).then(function(){return hh(t)}).then(ph)}))},t.nc=function(t){return this.I(t).then(function(t){return new Fc(t)})},t.I=function(t){var e=this;return Ah(this,dh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new I("internal-error");return t.accessToken!=e.ya&&(ch(e,t.accessToken),e.dispatchEvent(new zc("tokenChanged"))),mh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new I("internal-error");fh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=t.providerUserInfo)&&e.length?B(e,function(t){return new th(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)yh(this,n[r]);mh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new zc("userReloaded",{gd:t}))},t.Kc=function(t){return Lr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return Ah(this,t.c(this.a,this.uid).then(function(t){return wh(e,t),n=Ih(e,t,"reauthenticate"),e.f=null,e.reload()}).then(function(){return n}),!0)},t.Bc=function(t){return Lr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(e){var n=this,r=null;return Ah(this,Eh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Ih(n,t,"link"),Th(n,t)}).then(function(){return r}))},t.Cc=function(t,e){var n=this;return Ah(this,Eh(this,"phone").then(function(){return Mc(sh(n),t,e,m(n.pb,n))}))},t.Lc=function(t,e){var n=this;return Ah(this,me().then(function(){return Mc(sh(n),t,e,m(n.sb,n))}),!0)},t.Ab=function(e){var n=this;return Ah(this,this.I().then(function(t){return n.a.Ab(t,e)}).then(function(t){return wh(n,t),n.reload()}))},t.dd=function(e){var n=this;return Ah(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return wh(n,t),n.reload()}))},t.Bb=function(e){var n=this;return Ah(this,this.I().then(function(t){return n.a.Bb(t,e)}).then(function(t){return wh(n,t),n.reload()}))},t.Cb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return dh(this);var n=this;return Ah(this,this.I().then(function(t){return n.a.Cb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return wh(n,t),mh(n,"displayName",t.displayName||null),mh(n,"photoURL",t.photoUrl||null),V(n.providerData,function(t){"password"===t.providerId&&(Fr(t,"displayName",n.displayName),Fr(t,"photoURL",n.photoURL))}),hh(n)}).then(ph))},t.bd=function(e){var n=this;return Ah(this,bh(this).then(function(t){return H(vh(n),e)?Ba(n.a,da,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return V(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),V(vh(n),function(t){e[t]||gh(n,t)}),e[Io.PROVIDER_ID]||Fr(n,"phoneNumber",null),hh(n)}):hh(n).then(function(){throw new I("no-such-provider")})}))},t.delete=function(){var e=this;return Ah(this,this.I().then(function(t){return Ba(e.a,pa,{idToken:t})}).then(function(){e.dispatchEvent(new zc("userDeleted"))})).then(function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");nh(e,null),rh(e,null),oh(e,null),e.G=[],e.A=!0,uh(e),Fr(e,"refreshToken",null),e.i&&mc(e.i,e)})},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?m(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?m(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?m(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?m(this.Kb,this):null},t.Dc=function(t){var e=this;return Sh(this,"linkViaPopup",t,function(){return Eh(e,t.providerId).then(function(){return hh(e)})},!1)},t.Mc=function(t){return Sh(this,"reauthViaPopup",t,function(){return me()},!0)},t.Ec=function(t){var e=this;return Ch(this,"linkViaRedirect",t,function(){return Eh(e,t.providerId)},!1)},t.Nc=function(t){return Ch(this,"reauthViaRedirect",t,function(){return me()},!0)},t.Jb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return sa(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Ih(i,t,"link"),Th(i,t)}).then(function(){return o}),Ah(this,t)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ah(this,me().then(function(){return Xi(aa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ih(i,t,"reauthenticate"),wh(i,t),i.f=null,i.reload()}).then(function(){return o}),!0)},t.tb=function(e){var n=this,r=null;return Ah(this,this.I().then(function(t){return r=t,void 0===e||ct(e)?{}:Ni(new gi(e))}).then(function(t){return n.a.tb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Db=function(e,n){var r=this,i=null;return Ah(this,this.I().then(function(t){return i=t,void 0===n||ct(n)?{}:Ni(new gi(n))}).then(function(t){return r.a.Db(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.ic=function(t){var e=null,n=this;return Ah(this,t=Xi(me(t),n.uid).then(function(t){return e=Ih(n,t,"reauthenticate"),wh(n,t),n.f=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ft(e,this.metadata.w()),V(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),ft(e,this.N.w()),e};var Rh={name:"redirectUser",D:"session"};function Ph(t){return Bu(t.b,Rh,t.a)}function Dh(t){var e,n,r,i,o,s,a,u,c;this.a=t,this.b=ju(),this.c=null,this.f=(n=Mh("local"),r=Mh("session"),i=Mh("none"),o=(e=this).b,s=n,a=e.a,u=qu(s,a),c=Vu(o,s.D),o.get(s,a).then(function(t){var e=null;try{e=Tr(l.localStorage.getItem(u))}catch(t){}if(e&&!t)return l.localStorage.removeItem(u),o.set(s,e,a);e&&t&&"localStorage"!=c.type&&l.localStorage.removeItem(u)}).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Lh,e.a).then(function(t){return t?Mh(t):n})})})}).then(function(t){return e.c=t,xh(e,t.D)}).s(function(){e.c||(e.c=n)})),this.b.addListener(Mh("local"),this.a,m(this.g,this))}function xh(t,e){var n,a,r=[];for(n in Fu)Fu[n]!==e&&r.push(Bu(t.b,Mh(Fu[n]),t.a));return r.push(Bu(t.b,Lh,t.a)),a=r,new le(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)be(a[s],_(t,s),o);else n(i)})}Dh.prototype.g=function(){var e=this,n=Mh("local");Vh(this,function(){return me().then(function(){return e.c&&"local"!=e.c.D?e.b.get(n,e.a):null}).then(function(t){if(t)return xh(e,"local").then(function(){e.c=n})})})};var Lh={name:"persistence",D:"session"};function Mh(t){return{name:"authUser",D:t}}function Fh(t,e){return Vh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Uh(t){return Vh(t,function(){return Bu(t.b,t.c,t.a)})}function jh(t,e,n){return Vh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),kh(t||{})})})}function Vh(t,e){return t.f=t.f.then(e,e),t.f}function qh(t){if(this.m=!1,Fr(this,"settings",new xc),Fr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new I("invalid-api-key");var n,e,r,i,o,s,a,u,c;t=Vl.SDK_VERSION?dr(Vl.SDK_VERSION):null,this.a=new Ms(this.app.options&&this.app.options.apiKey,k(S),t),this.R=[],this.u=[],this.P=[],this.ac=Vl.INTERNAL.createSubscribe(m(this.yc,this)),this.X=void 0,this.bc=Vl.INTERNAL.createSubscribe(m(this.zc,this)),Gh(this,null),this.l=new Dh(this.app.options.apiKey+":"+this.app.name),this.G=new Oh(this.app.options.apiKey+":"+this.app.name),this.$=$h(this,(e=(n=this).app.options.authDomain,u=(a=n).G,c=a.app.options.authDomain,u=u.b.get(Rh,u.a).then(function(t){return t&&c&&(t.authDomain=c),kh(t||{})}).then(function(t){return(a.o=t)&&(t.ha=a.G),Ph(a.G)}),t=$h(a,u).then(function(){return jh(n.l,e,n.f)}).then(function(e){return e?(e.ha=n.G,n.o&&(n.o.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Fh(n.l,e).then(function(){return e})}).s(function(t){return"auth/network-request-failed"==t.code?e:Uh(n.l)})):null}).then(function(t){Gh(n,t||null)}),$h(n,t))),this.i=$h(this,(r=this).$.then(function(){return zh(r)}).s(function(){}).then(function(){if(!r.m)return r.pa()}).s(function(){}).then(function(){var t;r.m||(r.ba=!0,(t=r.l).b.addListener(Mh("local"),t.a,r.pa))})),this.ba=!1,this.pa=m(this.Yc,this),this.Ba=m(this.da,this),this.ya=m(this.kc,this),this.za=m(this.vc,this),this.Aa=m(this.wc,this),this.b=null,o=(i=this).app.options.authDomain,s=i.app.options.apiKey,o&&mr()&&(i.gb=i.$.then(function(){var t;if(!i.m)return i.b=Nc(o,s,i.app.name,i.f),gc(i.b,i),Yh(i)&&lh(Yh(i)),i.o&&(lh(i.o),(t=i.o).wa(i.ka()),nh(t,i),ih(t=i.o,i.N),oh(t,i),Hs((t=i.o).a,i.f),rh(t,i),i.o=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Fc,this),this.A=0,cn.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null,this.N=[],this.f=null}function Bh(t){Ue.call(this,"languageCodeChanged"),this.h=t}function Wh(t){Ue.call(this,"emulatorConfigChanged"),this.c=t}function Hh(t){Ue.call(this,"frameworkChanged"),this.f=t}function Kh(t){return t.gb||_e(new I("auth-domain-config-required"))}function zh(t){if(!mr())return _e(new I("operation-not-supported-in-this-environment"));var e=Kh(t).then(function(){return t.b.qa()}).then(function(t){return t?jr(t):null});return $h(t,e)}function Gh(t,e){var n,r;Yh(t)&&(n=Yh(t),r=t.Ba,z(n.R,function(t){return t==r}),Ze(Yh(t),"tokenChanged",t.ya),Ze(Yh(t),"userDeleted",t.za),Ze(Yh(t),"userInvalidated",t.Aa),uh(Yh(t))),e&&(e.R.push(t.Ba),Xe(e,"tokenChanged",t.ya),Xe(e,"userDeleted",t.za),Xe(e,"userInvalidated",t.Aa),0<t.A&&ah(e)),Fr(t,"currentUser",e),e&&(e.wa(t.ka()),nh(e,t),ih(e,t.N),oh(e,t),Hs(e.a,t.f),rh(e,t))}function Qh(n,t){var e=null,r=null;return $h(n,t.then(function(t){return e=So(t),r=Mi(t),s=t,(a={}).apiKey=(o=n).app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.f&&(a.emulatorConfig=o.f),o.$.then(function(){return t=a,e=s,n=o.G,r=o.Ga(),i=new eh(t,e),n&&(i.ha=n),r&&ih(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return Yh(o)&&t.uid==Yh(o).uid?_h(Yh(o),t):(Gh(o,t),lh(t)),o.da(t)}).then(function(){Jh(o)});var o,s,a},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Bc(t.w(),n,m(n.jc,n))),e||t}).then(function(){return jr({user:Yh(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function Yh(t){return t.currentUser}function Xh(t){return Yh(t)&&Yh(t)._lat||null}function Jh(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](Xh(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](Xh(t))}}function $h(t,e){return t.R.push(e),e.na(function(){K(t.R,e)}),e}function Zh(){}function tl(){this.a={},this.b=1e12}Dh.prototype.wb=function(e){var n=null,r=this;return function(t){var e=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");t:{for(r in Fu)if(Fu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(ur()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!yu()&&"none"!==t)throw n;break;default:if(!gr()&&"none"!==t)throw n}}(e),Vh(this,function(){return e!=r.c.D?r.b.get(r.c,r.a).then(function(t){return n=t,xh(r,e)}).then(function(){if(r.c=Mh(e),n)return r.b.set(r.c,n,r.a)}):me()})},w(qh,cn),w(Bh,Ue),w(Wh,Ue),w(Hh,Ue),(t=qh.prototype).wb=function(t){return t=this.l.wb(t),$h(this,t)},t.wa=function(t){this.aa===t||this.m||(this.aa=t,Ws(this.a,this.aa),this.dispatchEvent(new Bh(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Or("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&ir().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.f={url:t},this.settings.hb=!0,Hs(this.a,this.f),this.dispatchEvent(new Wh(this.f))}},t.Fc=function(t){this.N.push(t),zs(this.a,Vl.SDK_VERSION?dr(Vl.SDK_VERSION,this.N):null),this.dispatchEvent(new Hh(this.N))},t.Ga=function(){return Q(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:Yh(this)&&Yh(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?m(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return Qh(i,oa(i.a,o))})},t.Wc=function(e){if(!mr())return _e(new I("operation-not-supported-in-this-environment"));var n=this,t=Li(e.providerId),r=Sr(),i=null;(!wr()||sr())&&this.app.options.authDomain&&e.isOAuthProvider&&(i=ru(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Vl.SDK_VERSION||null,null,null,this.S(),this.f));var o=er(i,t&&t.ua,t&&t.ta);return $h(this,t=Kh(this).then(function(t){return wc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new le(function(t,e){n.ma("signInViaPopup",null,new I("cancelled-popup-request"),n.h),n.g=t,n.O=e,n.h=r,n.c=Tc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&tr(o),t?jr(t):null}).s(function(t){throw o&&tr(o),t}))},t.Xc=function(t){if(!mr())return _e(new I("operation-not-supported-in-this-environment"));var e=this;return $h(this,Kh(this).then(function(){return Vh(t=e.l,function(){return t.b.set(Lh,t.c.D,t.a)});var t}).then(function(){return Ic(e.b,"signInViaRedirect",t,void 0,e.S())}))},t.qa=function(){var e=this;return zh(this).then(function(t){return e.b&&Oc(e.b.b),t}).s(function(t){throw e.b&&Oc(e.b.b),t})},t.cd=function(t){if(!t)return _e(new I("null-user"));if(this.W!=t.tenantId)return _e(new I("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u=(r=t,i=n,o=e.G,s=e.Ga(),a=r.b,(n={})[Us]=a.b&&a.b.toString(),n.refreshToken=a.a,i=new eh(i||{apiKey:r.l,authDomain:r.o,appName:r.m},n),o&&(i.ha=o),s&&ih(i,s),_h(i,r),i);return $h(this,this.i.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return Yh(e)&&t.uid==Yh(e).uid?(_h(Yh(e),t),e.da(t)):(Gh(e,u),lh(u),e.da(u))}).then(function(){Jh(e)}))},t.zb=function(){var t=this,e=this.i.then(function(){return t.b&&Oc(t.b.b),Yh(t)?(Gh(t,null),Uh(t.l).then(function(){Jh(t)})):me()});return $h(this,e)},t.Yc=function(){var r=this;return jh(this.l,this.app.options.authDomain).then(function(t){if(!r.m){var e,n;if((n=Yh(r)&&t)&&(n=Yh(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return _h(Yh(r),t),Yh(r).I();(Yh(r)||t)&&(Gh(r,t),t&&(lh(t),t.ha=r.G),r.b&&gc(r.b,r),Jh(r))}})},t.da=function(t){return Fh(this.l,t)},t.kc=function(){Jh(this),this.da(Yh(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then(function(){return Qh(e,me(t))})},t.yc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(Yh(e))})},t.zc=function(t){var e,n=this,r=function(){t.next(Yh(n))};(e=this).P.push(r),$h(e,e.i.then(function(){!e.m&&H(e.P,r)&&e.X!==e.getUid()&&(e.X=e.getUid(),r(Xh(e)))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(Yh(r)):"function"==typeof t.next&&t.next(Yh(r))}),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(Yh(r)):"function"==typeof t.next&&t.next(Yh(r))}),this.bc(t,e,n)},t.mc=function(t){var e=this,n=this.i.then(function(){return Yh(e)?Yh(e).I(t).then(function(t){return{accessToken:t}}):null});return $h(this,n)},t.Sc=function(t){var n=this;return this.i.then(function(){return Qh(n,Ba(n.a,Ma,{token:t}))}).then(function(t){var e=t.user;return mh(e,"isAnonymous",!1),n.da(e),t})},t.Tc=function(t,e){var n=this;return this.i.then(function(){return Qh(n,Ba(n.a,Fa,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.i.then(function(){return Qh(n,Ba(n.a,la,{email:t,password:e}))})},t.Za=function(t){var e=this;return this.i.then(function(){return Qh(e,t.ja(e.a))})},t.Rc=function(t){return Lr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var n=this;return this.i.then(function(){var t=Yh(n);if(t&&t.isAnonymous){var e=jr({providerId:null,isNewUser:!1});return jr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return Qh(n,n.a.yb()).then(function(t){var e=t.user;return mh(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return Yh(this)&&Yh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&Yh(this)&&ah(Yh(this))},t.Oc=function(e){var n=this;V(this.u,function(t){t==e&&n.A--}),this.A<0&&(this.A=0),0==this.A&&Yh(this)&&uh(Yh(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),$h(this,this.i.then(function(){e.m||H(e.u,t)&&t(Xh(e))}))},t.removeAuthTokenListener=function(e){z(this.u,function(t){return t==e})},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Mh("local"),t.a,this.pa),this.b&&(mc(this.b,this),Oc(this.b.b)),Promise.resolve()},t.gc=function(t){return $h(this,Ba(this.a,fa,{identifier:t,continueUri:_r()?Jn():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Ac=function(t){return!!_o(t)},t.vb=function(e,n){var r=this;return $h(this,me().then(function(){var t=new gi(n);if(!t.c)throw new I("argument-error",bi+" must be true when sending sign in link to email");return Ni(t)}).then(function(t){return r.a.vb(e,t)}).then(function(){}))},t.hd=function(t){return this.Qa(t).then(function(t){return t.data.email})},t.mb=function(t,e){return $h(this,this.a.mb(t,e).then(function(){}))},t.Qa=function(t){return $h(this,this.a.Qa(t).then(function(t){return new Qr(t)}))},t.ib=function(t){return $h(this,this.a.ib(t).then(function(){}))},t.ub=function(e,t){var n=this;return $h(this,me().then(function(){return void 0===t||ct(t)?{}:Ni(new gi(t))}).then(function(t){return n.a.ub(e,t)}).then(function(){}))},t.Vc=function(t,e){return $h(this,Mc(this,t,e,m(this.Za,this)))},t.Uc=function(n,r){var i=this;return $h(this,me().then(function(){var t=r||Jn(),e=mo(n,t);if(!(t=_o(t)))throw new I("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new I("tenant-id-mismatch");return i.Za(e)}))},Zh.prototype.render=function(){},Zh.prototype.reset=function(){},Zh.prototype.getResponse=function(){},Zh.prototype.execute=function(){};var el=null;function nl(t,e){return(e=rl(e))&&t.a[e]||null}function rl(t){return(t=void 0===t?1e12:t)?t.toString():null}function il(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=te(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Xe(this.f,"click",this.i)}function ol(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function sl(){}function al(){}tl.prototype.render=function(t,e){return this.a[this.b.toString()]=new il(t,e),this.b++},tl.prototype.reset=function(t){var e=nl(this,t);t=rl(t),e&&t&&(e.delete(),delete this.a[t])},tl.prototype.getResponse=function(t){return(t=nl(this,t))?t.getResponse():null},tl.prototype.execute=function(t){(t=nl(this,t))&&t.execute()},il.prototype.getResponse=function(){return ol(this),this.b},il.prototype.execute=function(){ol(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},il.prototype.delete=function(){ol(this),this.g=!0,clearTimeout(this.a),this.a=null,Ze(this.f,"click",this.i)},Fr(sl,"FACTOR_ID","phone"),al.prototype.g=function(){return me(el=el||new tl)},al.prototype.c=function(){};var ul=null;function cl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var hl=new dt(mt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),ll=new Ar(3e4,6e4);cl.prototype.g=function(i){var o=this;return new le(function(t,e){var r=setTimeout(function(){e(new I("network-request-failed"))},ll.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new I("internal-error"))),delete l[o.a]},me(ks(Et(hl,{onload:o.a,hl:i||""}))).s(function(){clearTimeout(r),e(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},cl.prototype.c=function(){this.b--};var fl=null;function pl(t,e,n,r,i,o,s){if(Fr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s=s?ul=ul||new al:fl=fl||new cl,this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[yl])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[gl],!l.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!te(e)||!this.i&&te(e).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Ms(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[dl];this.a[dl]=function(t){var e;ml(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=yr(u,l))&&e(t)};var c=this.a[vl];this.a[vl]=function(){var t;ml(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=yr(c,l))&&t()}}var dl="callback",vl="expired-callback",yl="sitekey",gl="size";function ml(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function _l(t,e){return t.h.push(e),e.na(function(){K(t.h,e)}),e}function bl(t){if(t.A)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function wl(t,e,n){var r=!1;try{this.b=n||Vl.app()}catch(t){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Vl.SDK_VERSION?dr(Vl.SDK_VERSION,o):null,pl.call(this,n,t,e,function(){try{var e=i.b.auth().ka()}catch(t){e=null}return e},o,k(S),r)}function El(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=Il.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=Il[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new I("argument-error",t+" failed: "+r)}(t=pl.prototype).Ia=function(){var e=this;return this.f||(this.f=_l(this,me().then(function(){if(_r()&&!ar())return ir();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.v.g(e.u())}).then(function(t){return e.g=t,Ba(e.o,Sa,{})}).then(function(t){e.a[yl]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t})))},t.render=function(){bl(this);var n=this;return _l(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.m,n.i||(t=te(e),e=function(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!Zt&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',jt(i.name),'"'),i.type&&(r.push(' type="',jt(i.type),'"'),ft(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=oe(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ee(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];if(!d(o)||y(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(y(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){s="function"==typeof o.item;break t}}s=!1}V(s?Q(o):o,r)}}}(n,r,e),r}("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){bl(this);var i=this;return _l(this,this.render().then(function(e){return new le(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,z(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){bl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){bl(this),this.A=!0,this.v.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(e=te(this.m);t=e.firstChild;)e.removeChild(t)},w(wl,pl);var Il="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Tl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Sl(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Cl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:y}}function Nl(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Al(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function kl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ja||!e)}}}function Ol(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}}function Rl(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Pl(t,e){return y(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Dl(t){return y(t)&&"string"==typeof t.uid}function xl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Ll(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Ml(t,e){for(var n in e){var r=e[n].name;t[r]=jl(r,t[n],e[n].j)}}function Fl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_(function(t){return this[t]},n),set:_(function(t,e,n,r){El(t,[n],[r],!0),this[e]=r},r,n,e[n].jb),enumerable:!0})}}function Ul(t,e,n,r){t[e]=jl(e,n,r)}function jl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return El(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=t.split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Ml(qh.prototype,{ib:{name:"applyActionCode",j:[Tl("code")]},Qa:{name:"checkActionCode",j:[Tl("code")]},mb:{name:"confirmPasswordReset",j:[Tl("code"),Tl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Tl("email"),Tl("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Tl("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Tl("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Ll(Cl(),Nl(),"nextOrObserver"),Nl("opt_error",!0),Nl("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Ll(Cl(),Nl(),"nextOrObserver"),Nl("opt_error",!0),Nl("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Tl("email"),Ll(Cl("opt_actionCodeSettings",!0),Al(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Tl("email"),Cl("actionCodeSettings")]},wb:{name:"setPersistence",j:[Tl("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[kl()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[kl()]},Sc:{name:"signInWithCustomToken",j:[Tl("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Tl("email"),Tl("password")]},Uc:{name:"signInWithEmailLink",j:[Tl("email"),Tl("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Tl("phoneNumber"),xl()]},Wc:{name:"signInWithPopup",j:[Rl()]},Xc:{name:"signInWithRedirect",j:[Rl()]},cd:{name:"updateCurrentUser",j:[Ll({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof eh)}},Al(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Tl(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Tl("url")]},hd:{name:"verifyPasswordResetCode",j:[Tl("code")]}}),Fl(qh.prototype,{lc:{name:"languageCode",jb:Ll(Tl(),Al(),"languageCode")},ti:{name:"tenantId",jb:Ll(Tl(),Al(),"tenantId")}}),(qh.Persistence=Fu).LOCAL="local",qh.Persistence.SESSION="session",qh.Persistence.NONE="none",Ml(eh.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Sl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Sl("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[kl()]},pb:{name:"linkWithCredential",j:[kl()]},Cc:{name:"linkWithPhoneNumber",j:[Tl("phoneNumber"),xl()]},Dc:{name:"linkWithPopup",j:[Rl()]},Ec:{name:"linkWithRedirect",j:[Rl()]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[kl()]},sb:{name:"reauthenticateWithCredential",j:[kl()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Tl("phoneNumber"),xl()]},Mc:{name:"reauthenticateWithPopup",j:[Rl()]},Nc:{name:"reauthenticateWithRedirect",j:[Rl()]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Ll(Cl("opt_actionCodeSettings",!0),Al(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Tl(null,!0)]},bd:{name:"unlink",j:[Tl("provider")]},Ab:{name:"updateEmail",j:[Tl("email")]},Bb:{name:"updatePassword",j:[Tl("password")]},dd:{name:"updatePhoneNumber",j:[kl("phone")]},Cb:{name:"updateProfile",j:[Cl("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Tl("email"),Ll(Cl("opt_actionCodeSettings",!0),Al(null,!0),"opt_actionCodeSettings",!0)]}}),Ml(tl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ml(Zh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ml(le.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Fl(xc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Sl("appVerificationDisabledForTesting")}}),Ml(Lc.prototype,{confirm:{name:"confirm",j:[Tl("verificationCode")]}}),Ul(Yi,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[no,yo,wo,Zi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Ll(Tl(),Cl(),"json")]),Ul(go,"credential",function(t,e){return new vo(t,e)},[Tl("email"),Tl("password")]),Ml(vo.prototype,{w:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(so.prototype,{Ca:{name:"addScope",j:[Tl("scope")]},Ka:{name:"setCustomParameters",j:[Cl("customOAuthParameters")]}}),Ul(so,"credential",ao,[Ll(Tl(),Cl(),"token")]),Ul(go,"credentialWithLink",mo,[Tl("email"),Tl("emailLink")]),Ml(uo.prototype,{Ca:{name:"addScope",j:[Tl("scope")]},Ka:{name:"setCustomParameters",j:[Cl("customOAuthParameters")]}}),Ul(uo,"credential",co,[Ll(Tl(),Cl(),"token")]),Ml(ho.prototype,{Ca:{name:"addScope",j:[Tl("scope")]},Ka:{name:"setCustomParameters",j:[Cl("customOAuthParameters")]}}),Ul(ho,"credential",lo,[Ll(Tl(),Ll(Cl(),Al()),"idToken"),Ll(Tl(),Al(),"accessToken",!0)]),Ml(fo.prototype,{Ka:{name:"setCustomParameters",j:[Cl("customOAuthParameters")]}}),Ul(fo,"credential",po,[Ll(Tl(),Cl(),"token"),Tl("secret",!0)]),Ml(oo.prototype,{Ca:{name:"addScope",j:[Tl("scope")]},credential:{name:"credential",j:[Ll(Tl(),Ll(Cl(),Al()),"optionsOrIdToken"),Ll(Tl(),Al(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Cl("customOAuthParameters")]}}),Ml(to.prototype,{w:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(Ji.prototype,{w:{name:"toJSON",j:[Tl(null,!0)]}}),Ul(Io,"credential",To,[Tl("verificationId"),Tl("verificationCode")]),Ml(Io.prototype,{eb:{name:"verifyPhoneNumber",j:[Ll(Tl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Pl(t.session,Gi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Pl(t.session,Qi)&&Dl(t.multiFactorHint):t.session&&t.multiFactorUid?Pl(t.session,Qi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),xl()]}}),Ml(bo.prototype,{w:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(I.prototype,{toJSON:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(Do.prototype,{toJSON:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(Po.prototype,{toJSON:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(qc.prototype,{toJSON:{name:"toJSON",j:[Tl(null,!0)]}}),Ml(Uc.prototype,{Qc:{name:"resolveSignIn",j:[Ol()]}}),Ml(Gc.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[Ol(),Tl("displayName",!0)]},ad:{name:"unenroll",j:[Ll({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Dl},Tl(),"multiFactorInfoIdentifier")]}}),Ml(wl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ul(ui,"parseLink",yi,[Tl("link")]),Ul(sl,"assertion",function(t){return new Kc(t)},[kl("phone")]),function(){if(void 0===Vl||!Vl.INTERNAL||!Vl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Xr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Yr,VERIFY_AND_CHANGE_EMAIL:Jr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:qh,AuthCredential:Yi,Error:I};Ul(t,"EmailAuthProvider",go,[]),Ul(t,"FacebookAuthProvider",so,[]),Ul(t,"GithubAuthProvider",uo,[]),Ul(t,"GoogleAuthProvider",ho,[]),Ul(t,"TwitterAuthProvider",fo,[]),Ul(t,"OAuthProvider",oo,[Tl("providerId")]),Ul(t,"SAMLAuthProvider",io,[Tl("providerId")]),Ul(t,"PhoneAuthProvider",Io,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof qh)}}]),Ul(t,"RecaptchaVerifier",wl,[Ll(Tl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Cl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Vl.app.App)}}]),Ul(t,"ActionCodeURL",ui,[]),Ul(t,"PhoneMultiFactorGenerator",sl,[]),Vl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new qh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Vl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.mc,t),addAuthTokenListener:m(t.cc,t),removeAuthTokenListener:m(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Vl.registerVersion("@firebase/auth","0.15.2"),Vl.INTERNAL.extendNamespace({User:eh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var qs=(Bs.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Go(e))},Bs.prototype.get=function(t){return null==(t=this.domStorage_.getItem(this.prefixedName_(t)))?null:zo(t)},Bs.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Bs.prototype.prefixedName_=function(t){return this.prefix_+t},Bs.prototype.toString=function(){return this.domStorage_.toString()},Bs);function Bs(t){this.domStorage_=t,this.prefix_="firebase:"}var Ws=(Hs.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Hs.prototype.get=function(t){return Yo(this.cache_,t)?this.cache_[t]:null},Hs.prototype.remove=function(t){delete this.cache_[t]},Hs);function Hs(){this.cache_={},this.isInMemoryStorage=!0}function Ks(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,To(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new Zo).update(e),t=t.digest(),Co.encodeByteArray(t)}function zs(t,e){To(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(ra.logLevel=Is.VERBOSE,sa=ra.log.bind(ra),e&&na.set("logging_enabled",!0)):"function"==typeof t?sa=t:(sa=null,na.remove("logging_enabled"))}function Gs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+oa.apply(void 0,_o(t));ra.error(n)}function Qs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+oa.apply(void 0,_o(t));throw ra.error(n),new Error(n)}function Ys(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+oa.apply(void 0,_o(t));ra.warn(n)}function Xs(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Js(t,e){return t===e?0:t<e?-1:1}function $s(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Go(e))}function Zs(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var ta,ea=(zn=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new qs(e)}}catch(t){}return new Ws})("localStorage"),na=zn("sessionStorage"),ra=new ks("@firebase/database"),ia=(ta=1,function(){return ta++}),oa=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=oa.apply(null,i):n+="object"==typeof i?Go(i):i,n+=" "}return n},sa=null,aa=!0,ua=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===aa&&(aa=!1,null===sa&&!0===na.get("logging_enabled")&&zs(!0)),sa&&(t=oa.apply(null,e),sa(t))},ca=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ua.apply(void 0,_o([n],t))}},ha="[MIN_NAME]",la="[MAX_NAME]",fa=function(t,e){if(t===e)return 0;if(t===ha||e===la)return-1;if(e===ha||t===la)return 1;var n=_a(t),r=_a(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},pa=function(t){if("object"!=typeof t||null===t)return Go(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=Go(n[i]),r+=":",r+=pa(t[n[i]]);return r+"}"};function da(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function va(t){var e,n,r,i;To(!Xs(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();for(var a=o.join(""),u="",s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function ya(t){try{t()}catch(t){setTimeout(function(){throw Ys("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}}function ga(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var ma=new RegExp("^-?(0*)\\d{1,10}$"),_a=function(t){return ma.test(t)&&-2147483648<=(t=Number(t))&&t<=2147483647?t:null},ba=(Object.defineProperty(wa,"Empty",{get:function(){return new wa("")},enumerable:!1,configurable:!0}),wa.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},wa.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},wa.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new wa(this.pieces_,t)},wa.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},wa.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},wa.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},wa.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},wa.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new wa(t,0)},wa.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof wa)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else for(var r=t.split("/"),n=0;n<r.length;n++)0<r[n].length&&e.push(r[n]);return new wa(e,0)},wa.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},wa.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return wa.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},wa.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=fa(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},wa.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},wa.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},wa);function wa(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var Ea=(Object.defineProperty(Ia,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(Ia,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),Ia.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=cs(t),this.checkValid_()},Ia.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=cs(t),0<this.parts_.length&&--this.byteLength_},Ia.prototype.checkValid_=function(){if(this.byteLength_>Ia.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Ia.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Ia.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ia.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Ia.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Ia);function Ia(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=cs(this.parts_[n]);this.checkValid_()}var Ta="firebaseio.com",Sa="websocket",Ca="long_polling",Na=(Aa.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Aa.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Aa.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Aa.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Aa.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ea.set("host:"+this.host,this.internalHost))},Aa.prototype.connectionURL=function(t,e){var n;if(To("string"==typeof t,"typeof type must == string"),To("object"==typeof e,"typeof params must == object"),t===Sa)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Ca)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return da(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},Aa.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Aa.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Aa);function Aa(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=ea.get("host:"+t)||this.host}function ka(t,e){var i,o,s,n,r,a,u,c,h,l,f,p,c=(l=!(h=c=u=a=r=""),f="https",p=443,"string"==typeof(i=t)&&(0<=(n=i.indexOf("//"))&&(f=i.substring(0,n-1),i=i.substring(n+2)),-1===(o=i.indexOf("/"))&&(o=i.length),-1===(s=i.indexOf("?"))&&(s=i.length),r=i.substring(0,Math.min(o,s)),o<s&&(c=function(){for(var t="",e=i.substring(o,s).split("/"),n=0;n<e.length;n++)if(0<e[n].length){var r=e[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(t){}t+="/"+r}return t}()),s=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=go(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):Ys("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(i.substring(Math.min(i.length,s))),0<=(n=r.indexOf(":"))?(l="https"===f||"wss"===f,p=parseInt(r.substring(n+1),10)):n=r.length,"localhost"===(n=r.slice(0,n)).toLowerCase()?a="localhost":n.split(".").length<=2?a=n:(n=r.indexOf("."),u=r.substring(0,n).toLowerCase(),a=r.substring(n+1),h=u),"ns"in s&&(h=s.ns)),{host:r,port:p,domain:a,subdomain:u,secure:l,scheme:f,pathString:c,namespace:h}),h=c.namespace;return"firebase.com"===c.domain&&Qs(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),h&&"undefined"!==h||"localhost"===c.domain||Qs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ys("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Na(c.host,c.secure,h,e,t="ws"===c.scheme||"wss"===c.scheme,"",h!==c.subdomain),path:new ba(c.pathString)}}function Oa(t){return"string"==typeof t&&0!==t.length&&!qa.test(t)}function Ra(t){return"string"==typeof t&&0!==t.length&&!Ba.test(t)}function Pa(t){return null===t||"string"==typeof t||"number"==typeof t&&!Xs(t)||t&&"object"==typeof t&&Yo(t,".sv")}function Da(t,e,n,r,i){i&&void 0===n||Ha(ss(t,e,i),n,r)}function xa(t,e,n,r,i){if(!i||void 0!==n){var o=ss(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];da(n,function(t,e){if(t=new ba(t),Ha(o,e,r.child(t)),".priority"===t.getBack()&&!Pa(e))throw new Error(o+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(t)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Oa(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(ba.comparePaths);for(var s=null,r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function La(t,e,n,r){if(!r||void 0!==n){if(Xs(n))throw new Error(ss(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Pa(n))throw new Error(ss(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Ma(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ss(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Fa(t,e,n,r){if(!(r&&void 0===n||Oa(n)))throw new Error(ss(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Ua(t,e,n,r){if(!(r&&void 0===n||Ra(n)))throw new Error(ss(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function ja(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function Va(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Oa(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!Ra(r=r&&r.replace(/^\/*\.info(\/|$)/,"/")))throw new Error(ss(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var qa=/[\[\].#$\/\u0000-\u001F\u007F]/,Ba=/[\[\].#$\u0000-\u001F\u007F]/,Wa=10485760,Ha=function(n,t,e){var r=e instanceof ba?new Ea(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(Xs(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>Wa/3&&cs(t)>Wa)throw new Error(n+"contains a string greater than "+Wa+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(da(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Oa(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),Ha(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Ka=(za.prototype.cancel=function(t){os("OnDisconnect.cancel",0,1,arguments.length),as("OnDisconnect.cancel",1,t,!0);var e=new ko;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},za.prototype.remove=function(t){os("OnDisconnect.remove",0,1,arguments.length),ja("OnDisconnect.remove",this.path_),as("OnDisconnect.remove",1,t,!0);var e=new ko;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},za.prototype.set=function(t,e){os("OnDisconnect.set",1,2,arguments.length),ja("OnDisconnect.set",this.path_),Da("OnDisconnect.set",1,t,this.path_,!1),as("OnDisconnect.set",2,e,!0);var n=new ko;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},za.prototype.setWithPriority=function(t,e,n){os("OnDisconnect.setWithPriority",2,3,arguments.length),ja("OnDisconnect.setWithPriority",this.path_),Da("OnDisconnect.setWithPriority",1,t,this.path_,!1),La("OnDisconnect.setWithPriority",2,e,!1),as("OnDisconnect.setWithPriority",3,n,!0);var r=new ko;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},za.prototype.update=function(t,e){if(os("OnDisconnect.update",1,2,arguments.length),ja("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Ys("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xa("OnDisconnect.update",1,t,this.path_,!1),as("OnDisconnect.update",2,e,!0);var i=new ko;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},za);function za(t,e){this.repo_=t,this.path_=e}var Ga=(Qa.prototype.toJSON=function(){return os("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},Qa);function Qa(t,e){this.committed=t,this.snapshot=e}var Ya,Xa,Ja,$a=(Ya="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Xa=0,Ja=[],function(t){var e=t===Xa;Xa=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=Ya.charAt(t%64),t=Math.floor(t/64);To(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Ja[r];r--)Ja[r]=0;Ja[r]++}else for(r=0;r<12;r++)Ja[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=Ya.charAt(Ja[r]);return To(20===i.length,"nextPushId: Length should be 20."),i}),Za=(tu.Wrap=function(t,e){return new tu(t,e)},tu);function tu(t,e){this.name=t,this.node=e}var eu,ft=(nu.prototype.getCompare=function(){return this.compare.bind(this)},nu.prototype.indexedValueChanged=function(t,e){return t=new Za(ha,t),e=new Za(ha,e),0!==this.compare(t,e)},nu.prototype.minPost=function(){return Za.MIN},nu);function nu(){}var ru,iu=(fo(ou,ru=ft),Object.defineProperty(ou,"__EMPTY_NODE",{get:function(){return eu},set:function(t){eu=t},enumerable:!1,configurable:!0}),ou.prototype.compare=function(t,e){return fa(t.name,e.name)},ou.prototype.isDefinedOn=function(t){throw So("KeyIndex.isDefinedOn not expected to be called.")},ou.prototype.indexedValueChanged=function(t,e){return!1},ou.prototype.minPost=function(){return Za.MIN},ou.prototype.maxPost=function(){return new Za(la,eu)},ou.prototype.makePost=function(t,e){return To("string"==typeof t,"KeyIndex indexValue must always be a string."),new Za(t,eu)},ou.prototype.toString=function(){return".key"},ou);function ou(){return null!==ru&&ru.apply(this,arguments)||this}var su,au=new iu;function uu(t){return"number"==typeof t?"number:"+va(t):"string:"+t}var cu,hu,lu,fu,pu=function(t){var e;t.isLeafNode()?(e=t.val(),To("string"==typeof e||"number"==typeof e||"object"==typeof e&&Yo(e,".sv"),"Priority must be a string or number.")):To(t===su||t.isEmpty(),"priority of unexpected type."),To(t===su||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},du=(Object.defineProperty(vu,"__childrenNodeConstructor",{get:function(){return cu},set:function(t){cu=t},enumerable:!1,configurable:!0}),vu.prototype.isLeafNode=function(){return!0},vu.prototype.getPriority=function(){return this.priorityNode_},vu.prototype.updatePriority=function(t){return new vu(this.value_,t)},vu.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:vu.__childrenNodeConstructor.EMPTY_NODE},vu.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:vu.__childrenNodeConstructor.EMPTY_NODE},vu.prototype.hasChild=function(){return!1},vu.prototype.getPredecessorChildName=function(t,e){return null},vu.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:vu.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},vu.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(To(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,vu.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},vu.prototype.isEmpty=function(){return!1},vu.prototype.numChildren=function(){return 0},vu.prototype.forEachChild=function(t,e){return!1},vu.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},vu.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+uu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?va(this.value_):this.value_,this.lazyHash_=Ks(t)),this.lazyHash_},vu.prototype.getValue=function(){return this.value_},vu.prototype.compareTo=function(t){return t===vu.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof vu.__childrenNodeConstructor?-1:(To(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},vu.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=vu.VALUE_TYPE_ORDER.indexOf(e),i=vu.VALUE_TYPE_ORDER.indexOf(n);return To(0<=r,"Unknown leaf type: "+e),To(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},vu.prototype.withIndex=function(){return this},vu.prototype.isIndexed=function(){return!0},vu.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},vu.VALUE_TYPE_ORDER=["object","boolean","number","string"],vu);function vu(t,e){void 0===e&&(e=vu.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,To(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),pu(this.priorityNode_)}function yu(){return null!==fu&&fu.apply(this,arguments)||this}var gu=(fo(yu,fu=ft),yu.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority();return 0===(r=n.compareTo(r))?fa(t.name,e.name):r},yu.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},yu.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},yu.prototype.minPost=function(){return Za.MIN},yu.prototype.maxPost=function(){return new Za(la,new du("[PRIORITY-POST]",lu))},yu.prototype.makePost=function(t,e){return t=hu(t),new Za(e,new du("[PRIORITY-POST]",t))},yu.prototype.toString=function(){return".priority"},new yu),mu=(_u.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},_u.prototype.hasNext=function(){return 0<this.nodeStack_.length},_u.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},_u);function _u(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var bu=(wu.prototype.copy=function(t,e,n,r,i){return new wu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},wu.prototype.count=function(){return this.left.count()+1+this.right.count()},wu.prototype.isEmpty=function(){return!1},wu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},wu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},wu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},wu.prototype.minKey=function(){return this.min_().key},wu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},wu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},wu.prototype.removeMin_=function(){if(this.left.isEmpty())return Iu.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},wu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return Iu.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},wu.prototype.isRed_=function(){return this.color},wu.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},wu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},wu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},wu.prototype.rotateLeft_=function(){var t=this.copy(null,null,wu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},wu.prototype.rotateRight_=function(){var t=this.copy(null,null,wu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},wu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},wu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},wu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},wu.RED=!0,wu.BLACK=!1,wu);function wu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:wu.RED,this.left=null!=r?r:Iu.EMPTY_NODE,this.right=null!=i?i:Iu.EMPTY_NODE}function Eu(){}Eu.prototype.copy=function(t,e,n,r,i){return this},Eu.prototype.insert=function(t,e,n){return new bu(t,e,null)},Eu.prototype.remove=function(t,e){return this},Eu.prototype.count=function(){return 0},Eu.prototype.isEmpty=function(){return!0},Eu.prototype.inorderTraversal=function(t){return!1},Eu.prototype.reverseTraversal=function(t){return!1},Eu.prototype.minKey=function(){return null},Eu.prototype.maxKey=function(){return null},Eu.prototype.check_=function(){return 0},Eu.prototype.isRed_=function(){return!1},lt=Eu;var Iu=(Tu.prototype.insert=function(t,e){return new Tu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,bu.BLACK,null,null))},Tu.prototype.remove=function(t){return new Tu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,bu.BLACK,null,null))},Tu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Tu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Tu.prototype.isEmpty=function(){return this.root_.isEmpty()},Tu.prototype.count=function(){return this.root_.count()},Tu.prototype.minKey=function(){return this.root_.minKey()},Tu.prototype.maxKey=function(){return this.root_.maxKey()},Tu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Tu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Tu.prototype.getIterator=function(t){return new mu(this.root_,null,this.comparator_,!1,t)},Tu.prototype.getIteratorFrom=function(t,e){return new mu(this.root_,t,this.comparator_,!1,e)},Tu.prototype.getReverseIteratorFrom=function(t,e){return new mu(this.root_,t,this.comparator_,!0,e)},Tu.prototype.getReverseIterator=function(t){return new mu(this.root_,null,this.comparator_,!0,t)},Tu.EMPTY_NODE=new lt,Tu);function Tu(t,e){void 0===e&&(e=Tu.EMPTY_NODE),this.comparator_=t,this.root_=e}var Su=Math.log(2),Cu=(Nu.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Nu);function Nu(t){this.count=(e=t+1,parseInt(Math.log(e)/Su,10)),this.current_=this.count-1;var e=(e=this.count,parseInt(Array(e+1).join("1"),2));this.bits_=t+1&e}var Au,ku,Ou=function(c,t,h,e){c.sort(t);var l=function(t,e){if(0==(n=e-t))return null;if(1==n)return r=c[t],i=h?h(r):r,new bu(i,r.node,bu.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new bu(i,r.node,bu.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t,t=l(1+n,r),r=c[n],n=h?h(r):r,o(new bu(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},s=0;s<t.count;++s){var a=t.nextBitIsOne(),u=Math.pow(2,t.count-(s+1));a?r(u,bu.BLACK):(r(u,bu.BLACK),r(u,bu.RED))}return n}(new Cu(c.length));return new Iu(e||t,n)},Ru={},Pu=(Object.defineProperty(Du,"Default",{get:function(){return To(gu,"ChildrenNode.ts has not been loaded"),Au=Au||new Du({".priority":Ru},{".priority":gu})},enumerable:!1,configurable:!0}),Du.prototype.get=function(t){var e=Xo(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Iu?e:null},Du.prototype.hasIndex=function(t){return Yo(this.indexSet_,t.toString())},Du.prototype.addIndex=function(t,e){To(t!==au,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(Za.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Ou(r,t.getCompare()):Ru;var a=t.toString(),u=po({},this.indexSet_);return u[a]=t,(e=po({},this.indexes_))[a]=n,new Du(e,u)},Du.prototype.addToIndexes=function(s,a){var u=this;return new Du($o(this.indexes_,function(t,e){var n=Xo(u.indexSet_,e);if(To(n,"Missing index implementation for "+e),t!==Ru)return(n=a.get(s.name))&&(t=t.remove(new Za(s.name,n))),t.insert(s,s.node);if(n.isDefinedOn(s.node)){for(var r=[],i=a.getIterator(Za.Wrap),o=i.getNext();o;)o.name!==s.name&&r.push(o),o=i.getNext();return r.push(s),Ou(r,n.getCompare())}return Ru}),this.indexSet_)},Du.prototype.removeFromIndexes=function(n,r){return new Du($o(this.indexes_,function(t){if(t===Ru)return t;var e=r.get(n.name);return e?t.remove(new Za(n.name,e)):t}),this.indexSet_)},Du);function Du(t,e){this.indexes_=t,this.indexSet_=e}function xu(t,e){return fa(t.name,e.name)}function Lu(t,e){return fa(t,e)}var Mu,Fu=(Object.defineProperty(Uu,"EMPTY_NODE",{get:function(){return ku=ku||new Uu(new Iu(Lu),null,Pu.Default)},enumerable:!1,configurable:!0}),Uu.prototype.isLeafNode=function(){return!1},Uu.prototype.getPriority=function(){return this.priorityNode_||ku},Uu.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Uu(this.children_,t,this.indexMap_)},Uu.prototype.getImmediateChild=function(t){return".priority"===t?this.getPriority():null===(t=this.children_.get(t))?ku:t},Uu.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Uu.prototype.hasChild=function(t){return null!==this.children_.get(t)},Uu.prototype.updateImmediateChild=function(t,e){if(To(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new Za(t,e),r=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?ku:this.priorityNode_;return new Uu(r,n,i)},Uu.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:(To(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path"),e=this.getImmediateChild(n).updateChild(t.popFront(),e),this.updateImmediateChild(n,e))},Uu.prototype.isEmpty=function(){return this.children_.isEmpty()},Uu.prototype.numChildren=function(){return this.children_.count()},Uu.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(gu,function(t,e){r[t]=e.val(n),i++,s&&Uu.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},Uu.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+uu(this.getPriority().val())+":"),this.forEachChild(gu,function(t,e){""!==(e=e.hash())&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":Ks(n)),this.lazyHash_},Uu.prototype.getPredecessorChildName=function(t,e,n){return(n=this.resolveIndex_(n))?(e=n.getPredecessorKey(new Za(t,e)))?e.name:null:this.children_.getPredecessorKey(t)},Uu.prototype.getFirstChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.minKey())&&t.name:this.children_.minKey()},Uu.prototype.getFirstChild=function(t){return(t=this.getFirstChildName(t))?new Za(t,this.children_.get(t)):null},Uu.prototype.getLastChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.maxKey())&&t.name:this.children_.maxKey()},Uu.prototype.getLastChild=function(t){return(t=this.getLastChildName(t))?new Za(t,this.children_.get(t)):null},Uu.prototype.forEachChild=function(t,e){return(t=this.resolveIndex_(t))?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},Uu.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Uu.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Za.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Uu.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Uu.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Za.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Uu.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vu?-1:0},Uu.prototype.withIndex=function(t){return t===au||this.indexMap_.hasIndex(t)?this:(t=this.indexMap_.addIndex(t,this.children_),new Uu(this.children_,this.priorityNode_,t))},Uu.prototype.isIndexed=function(t){return t===au||this.indexMap_.hasIndex(t)},Uu.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(gu),n=t.getIterator(gu),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},Uu.prototype.resolveIndex_=function(t){return t===au?null:this.indexMap_.get(t.toString())},Uu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Uu);function Uu(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&pu(this.priorityNode_),this.children_.isEmpty()&&To(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function ju(){return Mu.call(this,new Iu(Lu),Fu.EMPTY_NODE,Pu.Default)||this}var Vu=(fo(ju,Mu=Fu),ju.prototype.compareTo=function(t){return t===this?0:1},ju.prototype.equals=function(t){return t===this},ju.prototype.getPriority=function(){return this},ju.prototype.getImmediateChild=function(t){return Fu.EMPTY_NODE},ju.prototype.isEmpty=function(){return!1},new ju);Object.defineProperties(Za,{MIN:{value:new Za(ha,Fu.EMPTY_NODE)},MAX:{value:new Za(la,Vu)}}),iu.__EMPTY_NODE=Fu.EMPTY_NODE,du.__childrenNodeConstructor=Fu,lu=su=Vu;var qu,Bu=!0;function Wu(n,t){if(void 0===t&&(t=null),null===n)return Fu.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),To(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new du(n,Wu(t));if(n instanceof Array||!Bu){var r=Fu.EMPTY_NODE;return da(n,function(t,e){Yo(n,t)&&"."!==t.substring(0,1)&&(!(e=Wu(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(Wu(t))}var i=[],o=!1;if(da(n,function(t,e){"."!==t.substring(0,1)&&((e=Wu(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new Za(t,e))))}),0===i.length)return Fu.EMPTY_NODE;var e=Ou(i,xu,function(t){return t.name},Lu);if(o){var s=Ou(i,gu.getCompare());return new Fu(e,Wu(t),new Pu({".priority":s},{".priority":gu}))}return new Fu(e,Wu(t),Pu.Default)}function Hu(){return null!==qu&&qu.apply(this,arguments)||this}hu=Wu;var Ku,zu=(fo(Hu,qu=ft),Hu.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?fa(t.name,e.name):n},Hu.prototype.isDefinedOn=function(t){return!0},Hu.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},Hu.prototype.minPost=function(){return Za.MIN},Hu.prototype.maxPost=function(){return Za.MAX},Hu.prototype.makePost=function(t,e){return t=Wu(t),new Za(e,t)},Hu.prototype.toString=function(){return".value"},new Hu),Gu=(fo(Qu,Ku=ft),Qu.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},Qu.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},Qu.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node);return 0===(r=n.compareTo(r))?fa(t.name,e.name):r},Qu.prototype.makePost=function(t,e){return t=Wu(t),t=Fu.EMPTY_NODE.updateChild(this.indexPath_,t),new Za(e,t)},Qu.prototype.maxPost=function(){var t=Fu.EMPTY_NODE.updateChild(this.indexPath_,Vu);return new Za(la,t)},Qu.prototype.toString=function(){return this.indexPath_.slice().join("/")},Qu);function Qu(t){var e=Ku.call(this)||this;return e.indexPath_=t,To(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var Yu=(Xu.prototype.val=function(){return os("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Xu.prototype.exportVal=function(){return os("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Xu.prototype.toJSON=function(){return os("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Xu.prototype.exists=function(){return os("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Xu.prototype.child=function(t){os("DataSnapshot.child",0,1,arguments.length),Ua("DataSnapshot.child",1,t=String(t),!1);var e=new ba(t),t=this.ref_.child(e);return new Xu(this.node_.getChild(e),t,gu)},Xu.prototype.hasChild=function(t){return os("DataSnapshot.hasChild",1,1,arguments.length),Ua("DataSnapshot.hasChild",1,t,!1),t=new ba(t),!this.node_.getChild(t).isEmpty()},Xu.prototype.getPriority=function(){return os("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Xu.prototype.forEach=function(n){var r=this;return os("DataSnapshot.forEach",1,1,arguments.length),as("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new Xu(e,r.ref_.child(t),gu))})},Xu.prototype.hasChildren=function(){return os("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Xu.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),Xu.prototype.numChildren=function(){return os("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Xu.prototype.getRef=function(){return os("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Xu.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Xu);function Xu(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var Ju=($u.prototype.getPath=function(){var t=this.snapshot.getRef();return("value"===this.eventType?t:t.getParent()).path},$u.prototype.getEventType=function(){return this.eventType},$u.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},$u.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Go(this.snapshot.exportVal())},$u);function $u(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var Zu=(tc.prototype.getPath=function(){return this.path},tc.prototype.getEventType=function(){return"cancel"},tc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},tc.prototype.toString=function(){return this.path.toString()+":cancel"},tc);function tc(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var ec=(nc.prototype.respondsTo=function(t){return"value"===t},nc.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Ju("value",this,new Yu(t.snapshotNode,e.getRef(),n))},nc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){To(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},nc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Zu(this,t,e):null},nc.prototype.matches=function(t){return t instanceof nc&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},nc.prototype.hasAnyCallback=function(){return null!==this.callback_},nc);function nc(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var rc,ic=(oc.prototype.respondsTo=function(t){return t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t,Yo(this.callbacks_,t)},oc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Zu(this,t,e):null},oc.prototype.createEvent=function(t,e){To(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),e=e.getQueryParams().getIndex();return new Ju(t.type,this,new Yu(t.snapshotNode,n,e),t.prevName)},oc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){To(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},oc.prototype.matches=function(e){var n=this;if(e instanceof oc){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length)return 1!==i?r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]}):(t=t[0],!((r=r[0])!==t||e.callbacks_[t]&&this.callbacks_[r]&&e.callbacks_[t]!==this.callbacks_[r]))}}return!1},oc.prototype.hasAnyCallback=function(){return null!==this.callbacks_},oc);function oc(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}Object.defineProperty(sc,"__referenceConstructor",{get:function(){return To(rc,"Reference.ts has not been loaded"),rc},set:function(t){rc=t},enumerable:!1,configurable:!0}),sc.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===au){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ha)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==la)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===gu){if(null!=e&&!Pa(e)||null!=n&&!Pa(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(To(t.getIndex()instanceof Gu||t.getIndex()===zu,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},sc.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},sc.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},sc.prototype.getQueryParams=function(){return this.queryParams_},sc.prototype.getRef=function(){return os("Query.ref",0,0,arguments.length),new sc.__referenceConstructor(this.repo,this.path)},sc.prototype.on=function(t,e,n,r){return os("Query.on",2,4,arguments.length),Ma("Query.on",1,t,!1),as("Query.on",2,e,!1),n=sc.getCancelAndContextArgs_("Query.on",n,r),"value"===t?this.onValueEvent(e,n.cancel,n.context):((r={})[t]=e,this.onChildEvent(r,n.cancel,n.context)),e},sc.prototype.onValueEvent=function(t,e,n){n=new ec(t,e||null,n||null),this.repo.addEventCallbackForQuery(this,n)},sc.prototype.onChildEvent=function(t,e,n){n=new ic(t,e,n),this.repo.addEventCallbackForQuery(this,n)},sc.prototype.off=function(t,e,n){os("Query.off",0,3,arguments.length),Ma("Query.off",1,t,!0),as("Query.off",2,e,!0),us("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new ec(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new ic(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},sc.prototype.get=function(){return this.repo.getValue(this)},sc.prototype.once=function(e,n,t,r){var i=this;os("Query.once",1,4,arguments.length),Ma("Query.once",1,e,!1),as("Query.once",2,n,!0);var o=sc.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new ko;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},sc.prototype.limitToFirst=function(t){if(os("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new sc(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},sc.prototype.limitToLast=function(t){if(os("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new sc(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},sc.prototype.orderByChild=function(t){if(os("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');if(Ua("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild"),(t=new ba(t)).isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");return t=new Gu(t),t=this.queryParams_.orderBy(t),sc.validateQueryEndpoints_(t),new sc(this.repo,this.path,t,!0)},sc.prototype.orderByKey=function(){os("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(au);return sc.validateQueryEndpoints_(t),new sc(this.repo,this.path,t,!0)},sc.prototype.orderByPriority=function(){os("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(gu);return sc.validateQueryEndpoints_(t),new sc(this.repo,this.path,t,!0)},sc.prototype.orderByValue=function(){os("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(zu);return sc.validateQueryEndpoints_(t),new sc(this.repo,this.path,t,!0)},sc.prototype.startAt=function(t,e){void 0===t&&(t=null),os("Query.startAt",0,2,arguments.length),Da("Query.startAt",1,t,this.path,!0),Fa("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(sc.validateLimit_(n),sc.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new sc(this.repo,this.path,n,this.orderByCalled_)},sc.prototype.endAt=function(t,e){if(void 0===t&&(t=null),os("Query.endAt",0,2,arguments.length),Da("Query.endAt",1,t,this.path,!0),Fa("Query.endAt",2,e,!0),e=this.queryParams_.endAt(t,e),sc.validateLimit_(e),sc.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new sc(this.repo,this.path,e,this.orderByCalled_)},sc.prototype.equalTo=function(t,e){if(os("Query.equalTo",1,2,arguments.length),Da("Query.equalTo",1,t,this.path,!1),Fa("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},sc.prototype.toString=function(){return os("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},sc.prototype.toJSON=function(){return os("Query.toJSON",0,1,arguments.length),this.toString()},sc.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},sc.prototype.queryIdentifier=function(){var t=this.queryObject();return"{}"===(t=pa(t))?"default":t},sc.prototype.isEqual=function(t){if(os("Query.isEqual",1,1,arguments.length),!(t instanceof sc))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),t=this.queryIdentifier()===t.queryIdentifier();return e&&n&&t},sc.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,as(t,3,r.cancel,!0),r.context=n,us(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(ss(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(sc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),uo=sc;function sc(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var ac=(uc.prototype.getImmediateChild=function(t){return new uc(this.node_.getImmediateChild(t))},uc.prototype.node=function(){return this.node_},uc);function uc(t){this.node_=t}var cc=(hc.prototype.getImmediateChild=function(t){return t=this.path_.child(t),new hc(this.syncTree_,t)},hc.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},hc);function hc(t,e){this.syncTree_=t,this.path_=e}function lc(t,e,n,r){return yc(e,new cc(n,t),r)}function fc(t,e,n){return yc(t,new ac(e),n)}var pc=function(t,e,n){return t&&"object"==typeof t?(To(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?dc(t[".sv"],e,n):"object"==typeof t[".sv"]?vc(t[".sv"],e):void To(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},dc=function(t,e,n){if("timestamp"===t)return n.timestamp;To(!1,"Unexpected server value: "+t)},vc=function(t,e,n){return t.hasOwnProperty("increment")||To(!1,"Unexpected server value: "+JSON.stringify(t,null,2)),"number"!=typeof(t=t.increment)&&To(!1,"Unexpected increment value: "+t),e=e.node(),To(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode()||"number"!=typeof(e=e.getValue())?t:e+t};function yc(t,r,i){var e=t.getPriority().val(),n=pc(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t;return(e=pc(o.getValue(),r,i))!==o.getValue()||n!==o.getPriority().val()?new du(e,Wu(n)):t}var s=t=t;return n!==t.getPriority().val()&&(s=s.updatePriority(new du(n))),t.forEachChild(gu,function(t,e){var n=yc(e,r.getImmediateChild(t),i);n!==e&&(s=s.updateImmediateChild(t,n))}),s}var gc,mc=(_c.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},_c.prototype.remember=function(t,e){var n;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new _c),n=this.children.get(n),t=t.popFront(),n.remember(t,e))},_c.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null===this.value)return!(0<this.children.size)||(e=t.getFront(),t=t.popFront(),this.children.has(e)&&this.children.get(e).forget(t)&&this.children.delete(e),0===this.children.size);if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(gu,function(t,e){n.remember(new ba(t),e)}),this.forget(t)},_c.prototype.forEachTree=function(n,r){null!==this.value?r(n,this.value):this.forEachChild(function(t,e){t=new ba(n.toString()+"/"+t),e.forEachTree(t,r)})},_c.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},_c);function _c(){this.value=null,this.children=new Map}(zn=gc={})[zn.OVERWRITE=0]="OVERWRITE",zn[zn.MERGE=1]="MERGE",zn[zn.ACK_USER_WRITE=2]="ACK_USER_WRITE",zn[zn.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var bc=(wc.User=new wc(!0,!1,null,!1),wc.Server=new wc(!1,!0,null,!1),wc.forServerTaggedQuery=function(t){return new wc(!1,!0,t,!0)},wc);function wc(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,To(!r||e,"Tagged queries must be from server.")}var Ec,Ic=(Tc.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return To(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new ba(t));return new Tc(ba.Empty,e,this.revert)}return To(this.path.getFront()===t,"operationForChild called for unrelated child."),new Tc(this.path.popFront(),this.affectedTree,this.revert)},Tc);function Tc(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=gc.ACK_USER_WRITE,this.source=bc.User}var Sc=(Cc.fromObject=function(t){var n=Cc.Empty;return da(t,function(t,e){n=n.set(new ba(t),e)}),n},Cc.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Cc.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ba.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);return null===r||null==(e=r.findRootMostMatchingPathAndValue(t.popFront(),e))?null:{path:new ba(n).child(e.path),value:e.value}},Cc.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Cc.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront();return null!==(e=this.children.get(e))?e.subtree(t.popFront()):Cc.Empty},Cc.prototype.set=function(t,e){if(t.isEmpty())return new Cc(e,this.children);var n=t.getFront(),e=(this.children.get(n)||Cc.Empty).set(t.popFront(),e),e=this.children.insert(n,e);return new Cc(this.value,e)},Cc.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?Cc.Empty:new Cc(null,this.children);var e=t.getFront(),n=this.children.get(e);return n?(n=n.remove(t.popFront()),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n),null===this.value&&t.isEmpty()?Cc.Empty:new Cc(this.value,t)):this},Cc.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront();return(e=this.children.get(e))?e.get(t.popFront()):null},Cc.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),t=(this.children.get(n)||Cc.Empty).setTree(t.popFront(),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new Cc(this.value,e)},Cc.prototype.fold=function(t){return this.fold_(ba.Empty,t)},Cc.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},Cc.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ba.Empty,e)},Cc.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront();return(r=this.children.get(i))?r.findOnPath_(t.popFront(),e.child(i),n):null},Cc.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ba.Empty,e)},Cc.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):Cc.Empty},Cc.prototype.foreach=function(t){this.foreach_(ba.Empty,t)},Cc.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},Cc.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Cc.Empty=new Cc(null),Cc);function Cc(t,e){void 0===e&&(e=Ec=Ec||new Iu(Js)),this.value=t,this.children=e}var Nc=(Ac.prototype.operationForChild=function(t){return this.path.isEmpty()?new Ac(this.source,ba.Empty):new Ac(this.source,this.path.popFront())},Ac);function Ac(t,e){this.source=t,this.path=e,this.type=gc.LISTEN_COMPLETE}var kc=(Oc.prototype.operationForChild=function(t){return this.path.isEmpty()?new Oc(this.source,ba.Empty,this.snap.getImmediateChild(t)):new Oc(this.source,this.path.popFront(),this.snap)},Oc);function Oc(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=gc.OVERWRITE}var Rc=(Pc.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new ba(t));return e.isEmpty()?null:e.value?new kc(this.source,ba.Empty,e.value):new Pc(this.source,ba.Empty,e)}return To(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Pc(this.source,this.path.popFront(),this.children)},Pc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Pc);function Pc(t,e,n){this.source=t,this.path=e,this.children=n,this.type=gc.MERGE}var Dc=(xc.prototype.isFullyInitialized=function(){return this.fullyInitialized_},xc.prototype.isFiltered=function(){return this.filtered_},xc.prototype.isCompleteForPath=function(t){return t.isEmpty()?this.isFullyInitialized()&&!this.filtered_:(t=t.getFront(),this.isCompleteForChild(t))},xc.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},xc.prototype.getNode=function(){return this.node_},xc);function xc(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var Lc=(Mc.prototype.updateEventSnap=function(t,e,n){return new Mc(new Dc(t,e,n),this.serverCache_)},Mc.prototype.updateServerSnap=function(t,e,n){return new Mc(this.eventCache_,new Dc(t,e,n))},Mc.prototype.getEventCache=function(){return this.eventCache_},Mc.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Mc.prototype.getServerCache=function(){return this.serverCache_},Mc.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Mc.Empty=new Mc(new Dc(Fu.EMPTY_NODE,!1,!1),new Dc(Fu.EMPTY_NODE,!1,!1)),Mc);function Mc(t,e){this.eventCache_=t,this.serverCache_=e}var Fc=(Uc.valueChange=function(t){return new Uc(Uc.VALUE,t)},Uc.childAddedChange=function(t,e){return new Uc(Uc.CHILD_ADDED,e,t)},Uc.childRemovedChange=function(t,e){return new Uc(Uc.CHILD_REMOVED,e,t)},Uc.childChangedChange=function(t,e,n){return new Uc(Uc.CHILD_CHANGED,e,t,n)},Uc.childMovedChange=function(t,e){return new Uc(Uc.CHILD_MOVED,e,t)},Uc.CHILD_ADDED="child_added",Uc.CHILD_REMOVED="child_removed",Uc.CHILD_CHANGED="child_changed",Uc.CHILD_MOVED="child_moved",Uc.VALUE="value",Uc);function Uc(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var jc=(Vc.prototype.updateChild=function(t,e,n,r,i,o){To(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Fc.childRemovedChange(e,s)):To(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Fc.childAddedChange(e,n)):o.trackChildChange(Fc.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Vc.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(gu,function(t,e){n.hasChild(t)||i.trackChildChange(Fc.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(gu,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(Fc.childChangedChange(t,e,n)):i.trackChildChange(Fc.childAddedChange(t,e))})),n.withIndex(this.index_)},Vc.prototype.updatePriority=function(t,e){return t.isEmpty()?Fu.EMPTY_NODE:t.updatePriority(e)},Vc.prototype.filtersNodes=function(){return!1},Vc.prototype.getIndexedFilter=function(){return this},Vc.prototype.getIndex=function(){return this.index_},Vc);function Vc(t){this.index_=t}var qc=(Bc.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;To(e===Fc.CHILD_ADDED||e===Fc.CHILD_CHANGED||e===Fc.CHILD_REMOVED,"Only child changes supported for tracking"),To(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Fc.CHILD_ADDED&&i===Fc.CHILD_REMOVED)this.changeMap.set(n,Fc.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Fc.CHILD_REMOVED&&i===Fc.CHILD_ADDED)this.changeMap.delete(n);else if(e===Fc.CHILD_REMOVED&&i===Fc.CHILD_CHANGED)this.changeMap.set(n,Fc.childRemovedChange(n,r.oldSnap));else if(e===Fc.CHILD_CHANGED&&i===Fc.CHILD_ADDED)this.changeMap.set(n,Fc.childAddedChange(n,t.snapshotNode));else{if(e!==Fc.CHILD_CHANGED||i!==Fc.CHILD_CHANGED)throw So("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Fc.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Bc.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Bc);function Bc(){this.changeMap=new Map}function Wc(){}var Hc=(Wc.prototype.getCompleteChild=function(t){return null},Wc.prototype.getChildAfterChild=function(t,e,n){return null},new Wc),Kc=(zc.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();return e.isCompleteForChild(t)?e.getNode().getImmediateChild(t):(e=null!=this.optCompleteServerCache_?new Dc(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache(),this.writes_.calcCompleteChild(t,e))},zc.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap();return 0===(t=this.writes_.calcIndexedSlice(r,e,1,n,t)).length?null:t[0]},zc);function zc(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function Gc(t,e){this.viewCache=t,this.changes=e}var Qc=(Yc.prototype.assertIndexed=function(t){To(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),To(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Yc.prototype.applyOperation=function(t,e,n,r){var i=new qc;if(e.type===gc.OVERWRITE)var o=e,s=o.source.fromUser?this.applyUserOverwrite_(t,o.path,o.snap,n,r,i):(To(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered()&&!o.path.isEmpty(),this.applyServerOverwrite_(t,o.path,o.snap,n,r,a,i));else if(e.type===gc.MERGE)s=(o=e).source.fromUser?this.applyUserMerge_(t,o.path,o.children,n,r,i):(To(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,o.path,o.children,n,r,a,i));else if(e.type===gc.ACK_USER_WRITE)var a=e,s=a.revert?this.revertUserWrite_(t,a.path,n,r,i):this.ackUserWrite_(t,a.path,a.affectedTree,n,r,i);else{if(e.type!==gc.LISTEN_COMPLETE)throw So("Unknown operation type: "+e.type);s=this.listenComplete_(t,e.path,n,i)}return i=i.getChanges(),Yc.maybeAddValueEvent_(t,s,i),new Gc(s,i)},Yc.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(Fc.valueChange(e.getCompleteEventSnap())))},Yc.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=void 0,l=e.isEmpty()?(To(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(s=(s=t.getCompleteServerSnap())instanceof Fu?s:Fu.EMPTY_NODE,s=n.calcCompleteEventChildren(s),this.filter_.updateFullNode(t.getEventCache().getNode(),s,i)):(a=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),a,i))):".priority"===(a=e.getFront())?(To(1===e.getLength(),"Can't have a priority with additional path components"),u=o.getNode(),h=t.getServerCache().getNode(),null!=(c=n.calcEventCacheAfterServerOverwrite(e,u,h))?this.filter_.updatePriority(u,c):o.getNode()):(u=e.popFront(),c=void 0,null!=(c=o.isCompleteForChild(a)?(h=t.getServerCache().getNode(),null!=(h=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),h))?o.getNode().getImmediateChild(a).updateChild(u,h):o.getNode().getImmediateChild(a)):n.calcCompleteChild(a,t.getServerCache()))?this.filter_.updateChild(o.getNode(),a,c,u,r,i):o.getNode());return t.updateEventSnap(l,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},Yc.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{if(o=e.getFront(),!a.isCompleteForPath(e)&&1<e.getLength())return t;c=e.popFront(),n=a.getNode().getImmediateChild(o).updateChild(c,n),h=".priority"===o?u.updatePriority(a.getNode(),n):u.updateChild(a.getNode(),o,n,c,Hc,null)}return u=t.updateServerSnap(h,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),i=new Kc(r,u,i),this.generateEventCacheAfterServerEvent_(u,e,r,i,s)},Yc.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Kc(r,t,i);return e.isEmpty()?(a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(a,!0,this.filter_.filtersNodes())):".priority"===(s=e.getFront())?(a=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered())):(r=e.popFront(),i=u.getNode().getImmediateChild(s),a=void 0,a=r.isEmpty()?n:null!=(e=c.getCompleteChild(s))?".priority"===r.getBack()&&e.getChild(r.parent()).isEmpty()?e:e.updateChild(r,n):Fu.EMPTY_NODE,i.equals(a)?t:(o=this.filter_.updateChild(u.getNode(),s,a,r,c,o),t.updateEventSnap(o,u.isFullyInitialized(),this.filter_.filtersNodes())))},Yc.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},Yc.prototype.applyUserMerge_=function(n,r,t,i,o,s){var a=this,u=n;return t.foreach(function(t,e){t=r.child(t),Yc.cacheHasChild_(n,t.getFront())&&(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),t.foreach(function(t,e){t=r.child(t),Yc.cacheHasChild_(n,t.getFront())||(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),u},Yc.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},Yc.prototype.applyServerMerge_=function(r,t,e,i,o,s,a){var u=this;if(r.getServerCache().getNode().isEmpty()&&!r.getServerCache().isFullyInitialized())return r;var c=r,e=t.isEmpty()?e:Sc.Empty.setTree(t,e),h=r.getServerCache().getNode();return e.children.inorderTraversal(function(t,e){var n;h.hasChild(t)&&(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new ba(t),e,i,o,s,a))}),e.children.inorderTraversal(function(t,e){var n=!r.getServerCache().isCompleteForChild(t)&&null==e.value;h.hasChild(t)||n||(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new ba(t),e,i,o,s,a))}),c},Yc.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=Sc.Empty;return a.getNode().forEachChild(au,function(t,e){u=u.set(new ba(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=Sc.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},Yc.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),i=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(i,e,n,Hc,r)},Yc.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u=new Kc(n,t,r),c=t.getEventCache().getNode(),r=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=void 0,a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),To(s instanceof Fu,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),r=this.filter_.updateFullNode(c,a,i)):(s=e.getFront(),null==(a=n.calcCompleteChild(s,t.getServerCache()))&&t.getServerCache().isCompleteForChild(s)&&(a=c.getImmediateChild(s)),(r=null!=a?this.filter_.updateChild(c,s,a,e.popFront(),u,i):t.getEventCache().getNode().hasChild(s)?this.filter_.updateChild(c,s,Fu.EMPTY_NODE,e.popFront(),u,i):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(r=this.filter_.updateFullNode(r,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(ba.Empty),t.updateEventSnap(r,o,this.filter_.filtersNodes())},Yc);function Yc(t){this.filter_=t}var Xc=(Jc.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===Fc.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Fc.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,Fc.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Fc.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Fc.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Fc.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Fc.VALUE,t,n,e),i},Jc.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this;(t=t.filter(function(t){return t.type===e})).sort(this.compareChanges_.bind(this)),t.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},Jc.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},Jc.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw So("Should only compare child_ events.");return t=new Za(t.childName,t.snapshotNode),e=new Za(e.childName,e.snapshotNode),this.index_.compare(t,e)},Jc);function Jc(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var $c,Zc=(th.prototype.getQuery=function(){return this.query_},th.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},th.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},th.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},th.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},th.prototype.removeEventRegistration=function(t,e){var n,r=[];if(e&&(To(null==t,"A cancel should cancel all event registrations."),n=this.query_.path,this.eventRegistrations_.forEach(function(t){(t=t.createCancelEvent(e,n))&&r.push(t)})),t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return r},th.prototype.applyOperation=function(t,e,n){t.type===gc.MERGE&&null!==t.source.queryId&&(To(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),To(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,n=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(n.viewCache),To(n.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=n.viewCache,this.generateEventsForChanges_(n.changes,n.viewCache.getEventCache().getNode(),null)},th.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(gu,function(t,e){n.push(Fc.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(Fc.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},th.prototype.generateEventsForChanges_=function(t,e,n){return n=n?[n]:this.eventRegistrations_,this.eventGenerator_.generateEventsForChanges(t,e,n)},th);function th(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new jc(n.getIndex()),i=n.getNodeFilter();this.processor_=new Qc(i);var o=e.getServerCache(),t=e.getEventCache(),n=r.updateFullNode(Fu.EMPTY_NODE,o.getNode(),null),e=i.updateFullNode(Fu.EMPTY_NODE,t.getNode(),null),r=new Dc(n,o.isFullyInitialized(),r.filtersNodes()),i=new Dc(e,t.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Lc(i,r),this.eventGenerator_=new Xc(this.query_)}var eh=(Object.defineProperty(nh,"__referenceConstructor",{get:function(){return To($c,"Reference.ts has not been loaded"),$c},set:function(t){To(!$c,"__referenceConstructor has already been defined"),$c=t},enumerable:!1,configurable:!0}),nh.prototype.isEmpty=function(){return 0===this.views.size},nh.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return To(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=go(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},nh.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a=t.queryIdentifier(),u=this.views.get(a);return u||(s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof Fu?n.calcCompleteEventChildren(r):Fu.EMPTY_NODE,!1),i=new Lc(new Dc(o,s,!1),new Dc(r,i,!1)),u=new Zc(t,i),this.views.set(a,u)),u.addEventRegistration(e),u.getInitialEvents(e)},nh.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=go(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=mo(h.value,2),f=l[0],p=l[1],a=a.concat(p.removeEventRegistration(e,n));p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new nh.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},nh.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=go(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},nh.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=go(this.views.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r||s.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},nh.prototype.viewForQuery=function(t){return t.getQueryParams().loadsAllData()?this.getCompleteView():(t=t.queryIdentifier(),this.views.get(t))},nh.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},nh.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},nh.prototype.getCompleteView=function(){var t,e;try{for(var n=go(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},nh);function nh(){this.views=new Map}var rh=(ih.prototype.addWrite=function(t,e){if(t.isEmpty())return new ih(new Sc(e));if(null==(i=this.writeTree_.findRootMostValueAndPath(t)))return e=new Sc(e),new ih(this.writeTree_.setTree(t,e));var n=i.path,r=i.value,i=ba.relativePath(n,t),r=r.updateChild(i,e);return new ih(this.writeTree_.set(n,r))},ih.prototype.addWrites=function(n,t){var r=this;return da(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},ih.prototype.removeWrite=function(t){return t.isEmpty()?ih.Empty:new ih(this.writeTree_.setTree(t,Sc.Empty))},ih.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},ih.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(ba.relativePath(e.path,t)):null},ih.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(gu,function(t,e){n.push(new Za(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new Za(t,e.value))}),n},ih.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new ih(null!=e?new Sc(e):this.writeTree_.subtree(t))},ih.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},ih.prototype.apply=function(t){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(To(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}(ba.Empty,this.writeTree_,t)},ih.Empty=new ih(new Sc(null)),ih);function ih(t){this.writeTree_=t}var oh=(sh.prototype.childWrites=function(t){return new ah(t,this)},sh.prototype.addOverwrite=function(t,e,n,r){To(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},sh.prototype.addMerge=function(t,e,n){To(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},sh.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},sh.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});To(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):da(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},sh.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},sh.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(ba.Empty)){var o=sh.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),s=t||Fu.EMPTY_NODE;return o.apply(s)}return null}if(null!=(o=this.visibleWrites_.getCompleteNode(e)))return o;if((o=this.visibleWrites_.childCompoundWrite(e)).isEmpty())return t;if(null!=t||o.hasCompleteWrite(ba.Empty)){s=t||Fu.EMPTY_NODE;return o.apply(s)}return null},sh.prototype.calcCompleteEventChildren=function(t,e){var n=Fu.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(gu,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(gu,function(t,e){e=i.childCompoundWrite(new ba(t)).apply(e),n=n.updateImmediateChild(t,e)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},sh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){return To(n||r,"Either existingEventSnap or existingServerSnap must exist"),t=t.child(e),this.visibleWrites_.hasCompleteWrite(t)?null:(t=this.visibleWrites_.childCompoundWrite(t)).isEmpty()?r.getChild(e):t.apply(r.getChild(e))},sh.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e);return null!=(t=this.visibleWrites_.getCompleteNode(r))?t:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},sh.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},sh.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t);if(null!=(t=a.getCompleteNode(ba.Empty)))s=t;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),l=h.getNext();l&&u.length<r;)0!==c(l,n)&&u.push(l),l=h.getNext();return u},sh.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},sh.prototype.resetTree_=function(){this.visibleWrites_=sh.layerTree_(this.allWrites_,sh.DefaultFilter_,ba.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},sh.DefaultFilter_=function(t){return t.visible},sh.layerTree_=function(t,e,n){for(var r=rh.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=ba.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=ba.relativePath(s,n),r=r.addWrite(ba.Empty,o.snap.getChild(a)));else{if(!o.children)throw So("WriteRecord should have .snap or .children");n.contains(s)?(a=ba.relativePath(n,s),r=r.addWrites(a,o.children)):s.contains(n)&&((a=ba.relativePath(s,n)).isEmpty()?r=r.addWrites(ba.Empty,o.children):(o=Xo(o.children,a.getFront()))&&(a=o.getChild(a.popFront()),r=r.addWrite(ba.Empty,a)))}}}return r},sh);function sh(){this.visibleWrites_=rh.Empty,this.allWrites_=[],this.lastWriteId_=-1}var ah=(uh.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},uh.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},uh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},uh.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},uh.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},uh.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},uh.prototype.child=function(t){return new uh(this.treePath_.child(t),this.writeTree_)},uh);function uh(t,e){this.treePath_=t,this.writeTree_=e}var ch=(hh.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new kc(bc.User,t,e)):[]},hh.prototype.applyUserMerge=function(t,e,n){return this.pendingWriteTree_.addMerge(t,e,n),e=Sc.fromObject(e),this.applyOperationToSyncPoints_(new Rc(bc.User,t,e))},hh.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Sc.Empty;return null!=n.snap?r=r.set(ba.Empty,!0):da(n.children,function(t,e){r=r.set(new ba(t),e)}),this.applyOperationToSyncPoints_(new Ic(n.path,r,e))}return[]},hh.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new kc(bc.Server,t,e))},hh.prototype.applyServerMerge=function(t,e){return e=Sc.fromObject(e),this.applyOperationToSyncPoints_(new Rc(bc.Server,t,e))},hh.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Nc(bc.Server,t))},hh.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);return null==r?[]:(r=(n=hh.parseQueryKey_(r)).path,n=n.queryId,t=ba.relativePath(r,t),e=new kc(bc.forServerTaggedQuery(n),t,e),this.applyTaggedOperation_(r,e))},hh.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);return r?(r=(n=hh.parseQueryKey_(r)).path,n=n.queryId,t=ba.relativePath(r,t),e=Sc.fromObject(e),e=new Rc(bc.forServerTaggedQuery(n),t,e),this.applyTaggedOperation_(r,e)):[]},hh.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);return n?(n=(e=hh.parseQueryKey_(n)).path,e=e.queryId,t=ba.relativePath(n,t),t=new Nc(bc.forServerTaggedQuery(e),t),this.applyTaggedOperation_(n,t)):[]},hh.prototype.addEventRegistration=function(t,e){var n=t.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,function(t,e){t=ba.relativePath(t,n),r=r||e.getCompleteServerCache(t),i=i||e.hasCompleteView()});var o=this.syncPointTree_.get(n);o?(i=i||o.hasCompleteView(),r=r||o.getCompleteServerCache(ba.Empty)):(o=new eh,this.syncPointTree_=this.syncPointTree_.set(n,o)),null!=r?c=!0:(c=!1,r=Fu.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild(function(t,e){(e=e.getCompleteServerCache(ba.Empty))&&(r=r.updateImmediateChild(t,e))}));var s,a=o.viewExistsForQuery(t);a||t.getQueryParams().loadsAllData()||(u=hh.makeQueryKey_(t),To(!this.queryToTagMap.has(u),"View does not exist, but we have a tag"),s=hh.getNextQueryTag_(),this.queryToTagMap.set(u,s),this.tagToQueryMap.set(s,u));var u=this.pendingWriteTree_.childWrites(n),c=o.addEventRegistration(t,e,u,r,c);return a||i||(o=o.viewForQuery(t),c=c.concat(this.setupListener_(t,o))),c},hh.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);if(o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i)),e=a.removed,s=a.events,o=-1!==e.findIndex(function(t){return t.getQueryParams().loadsAllData()}),a=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()}),o&&!a&&!(i=this.syncPointTree_.subtree(i)).isEmpty())for(var u=this.collectDistinctViewsForSubTree_(i),c=0;c<u.length;++c){var h=(l=u[c]).getQuery(),l=this.createListenerForView_(l);this.listenProvider_.startListening(hh.queryForListening_(h),this.tagForQuery_(h),l.hashFn,l.onComplete)}!a&&0<e.length&&!n&&(o?this.listenProvider_.stopListening(hh.queryForListening_(t),null):e.forEach(function(t){var e=r.queryToTagMap.get(hh.makeQueryKey_(t));r.listenProvider_.stopListening(hh.queryForListening_(t),e)})),this.removeTags_(e)}return s},hh.prototype.calcCompleteEventCache=function(n,t){var e=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(n,function(t,e){if(t=ba.relativePath(t,n),t=e.getCompleteServerCache(t))return t});return e.calcCompleteEventCache(n,r,t,!0)},hh.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),da(n,function(t,e){r=r.concat(e)}),r})},hh.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r=t[e];r.getQueryParams().loadsAllData()||(n=hh.makeQueryKey_(r),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},hh.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},hh.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),e=this.createListenerForView_(e),e=this.listenProvider_.startListening(hh.queryForListening_(t),r,e.hashFn,e.onComplete),n=this.syncPointTree_.subtree(n);if(r)To(!n.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var i=n.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),da(n,function(t,e){r=r.concat(e)}),r}),o=0;o<i.length;++o){var s=i[o];this.listenProvider_.stopListening(hh.queryForListening_(s),this.tagForQuery_(s))}return e},hh.prototype.createListenerForView_=function(t){var r=this,i=t.getQuery(),o=this.tagForQuery_(i);return{hashFn:function(){return(t.getServerCache()||Fu.EMPTY_NODE).hash()},onComplete:function(t){return"ok"===t?o?r.applyTaggedListenComplete(i.path,o):r.applyListenComplete(i.path):(n="Unknown Error","too_big"===(e=t)?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable"),(n=new Error(e+" at "+i.path.toString()+": "+n)).code=e.toUpperCase(),t=n,r.removeEventRegistration(i,null,t));var e,n}}},hh.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},hh.parseQueryKey_=function(t){var e=t.indexOf("$");return To(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ba(t.substr(0,e))}},hh.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},hh.prototype.tagForQuery_=function(t){return t=hh.makeQueryKey_(t),this.queryToTagMap.get(t)},hh.getNextQueryTag_=function(){return hh.nextQueryTag_++},hh.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);return To(n,"Missing sync point for query tag that we're tracking"),t=this.pendingWriteTree_.childWrites(t),n.applyOperation(e,t,null)},hh.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(ba.Empty))},hh.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(ba.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(ba.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);return u&&a&&(e=n?n.getImmediateChild(s):null,s=r.child(s),o=o.concat(this.applyOperationHelper_(a,u,e,s))),i&&(o=o.concat(i.applyOperation(t,r,n))),o},hh.prototype.applyOperationDescendantsHelper_=function(i,t,o,s){var a=this,e=t.get(ba.Empty);null==o&&null!=e&&(o=e.getCompleteServerCache(ba.Empty));var u=[];return t.children.inorderTraversal(function(t,e){var n=o?o.getImmediateChild(t):null,r=s.child(t);(t=i.operationForChild(t))&&(u=u.concat(a.applyOperationDescendantsHelper_(t,e,n,r)))}),e&&(u=u.concat(e.applyOperation(i,s,o))),u},hh.nextQueryTag_=1,hh);function hh(t){this.listenProvider_=t,this.syncPointTree_=Sc.Empty,this.pendingWriteTree_=new oh,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var lh=(fh.prototype.getNode=function(t){return this.rootNode_.getChild(t)},fh.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},fh);function fh(){this.rootNode_=Fu.EMPTY_NODE}var ph=(dh.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Yo(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},dh.prototype.get=function(){return No(this.counters_)},dh);function dh(){this.counters_={}}var vh=(yh.getCollection=function(t){return t=t.toString(),this.collections_[t]||(this.collections_[t]=new ph),this.collections_[t]},yh.getOrCreateReporter=function(t,e){return t=t.toString(),this.reporters_[t]||(this.reporters_[t]=e()),this.reporters_[t]},yh.collections_={},yh.reporters_={},yh);function yh(){}var gh=(mh.prototype.get=function(){var t=this.collection_.get(),n=po({},t);return this.last_&&da(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},mh);function mh(t){this.collection_=t,this.last_=null}var _h=(bh.prototype.includeStat=function(t){this.statsToReport_[t]=!0},bh.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;da(t,function(t,e){0<e&&Yo(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),ga(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},bh);function bh(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new gh(t),t=1e4+2e4*Math.random(),ga(this.reportStats_.bind(this),Math.floor(t))}var wh=(Eh.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Ih(i)),e.add(r)}e&&this.eventLists_.push(e)},Eh.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},Eh.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},Eh.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Eh);function Eh(){this.eventLists_=[],this.recursionDepth_=0}var Ih=(Th.prototype.add=function(t){this.events_.push(t)},Th.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),sa&&ua("event: "+n.toString()),ya(e))}},Th.prototype.getPath=function(){return this.path_},Th);function Th(t){this.path_=t,this.events_=[]}function Sh(t){this.allowedEvents_=t,this.listeners_={},To(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}Sh.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=_o(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Sh.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n}),(t=this.getInitialEvent(t))&&e.apply(n,t)},Sh.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Sh.prototype.validateEventType_=function(e){To(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)};var Ch,Nh=(fo(Ah,Ch=lt=Sh),Ah.getInstance=function(){return new Ah},Ah.prototype.getInitialEvent=function(t){return To("visible"===t,"Unknown event type: "+t),[this.visible_]},Ah);function Ah(){var e,t,n=Ch.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var kh,Oh=(fo(Rh,kh=lt),Rh.getInstance=function(){return new Rh},Rh.prototype.getInitialEvent=function(t){return To("online"===t,"Unknown event type: "+t),[this.online_]},Rh.prototype.currentlyOnline=function(){return this.online_},Rh);function Rh(){var t=kh.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Po()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Ph=(Dh.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Dh.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum]&&"break"!==function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&ya(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}(););},Dh);function Dh(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var xh="pLPCommand",Lh="pRTLPCB",Mh=(Fh.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ph(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;s.isClosed_||(s.scriptTagHolder=new Uh(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=mo(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=(r=mo(t,2))[0],r=r[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(n,r)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Ta)&&(t.r="f"),t=s.urlFn(t),s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},Fh.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Fh.forceAllow=function(){Fh.forceAllow_=!0},Fh.forceDisallow=function(){Fh.forceDisallow_=!0},Fh.isAvailable=function(){return!!Fh.forceAllow_||!(Fh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Fh.prototype.markConnectionHealthy=function(){},Fh.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Fh.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Fh.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Fh.prototype.send=function(t){t=Go(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var e,n=Zs(t=(e=wo(e=t),Co.encodeByteArray(e,!0)),1840),r=0;r<n.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,n.length,n[r]),this.curSegmentNum++},Fh.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Fh.prototype.incrementIncomingBytes_=function(t){t=Go(t).length,this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},Fh);function Fh(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ca(t),this.stats_=vh.getCollection(e),this.urlFn=function(t){return e.connectionURL(Ca,t)}}var Uh=(jh.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ua("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},jh.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},jh.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},jh.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++,(t={}).id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+e.length<=1870;){var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},jh.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},jh.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},jh.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){ua("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},jh);function jh(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=ia(),window[xh+this.uniqueCallbackIdentifier]=t,window[Lh+this.uniqueCallbackIdentifier]=e,this.myIFrame=jh.createIFrame_(),e="",this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(e='<script>document.domain="'+document.domain+'";<\/script>');var i="<html><body>"+e+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){ua("frame writing exception"),t.stack&&ua(t.stack),ua(t)}}var Vh="";function qh(t){Vh=t}var Bh=null;"undefined"!=typeof MozWebSocket?Bh=MozWebSocket:"undefined"!=typeof WebSocket&&(Bh=WebSocket);var Wh=(Hh.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Ta)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Sa,r)},Hh.prototype.open=function(t,e){var n,r=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ea.set("previous_websocket_failure",!0);try{Lo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new Bh(this.connURL,[],n))}catch(e){return this.log_("Error instantiating WebSocket."),(t=e.message||e.data)&&this.log_(t),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection."),(t=t.message||t.data)&&r.log_(t),r.onClosed_()}},Hh.prototype.start=function(){},Hh.forceDisallow=function(){Hh.forceDisallow_=!0},Hh.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0),!e&&null!==Bh&&!Hh.forceDisallow_},Hh.previouslyFailed=function(){return ea.isInMemoryStorage||!0===ea.get("previous_websocket_failure")},Hh.prototype.markConnectionHealthy=function(){ea.remove("previous_websocket_failure")},Hh.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=zo(t),this.onMessage(t))},Hh.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Hh.prototype.extractFrameCount_=function(t){if(To(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Hh.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null===this.frames&&null===(t=this.extractFrameCount_(t))||this.appendFrame_(t))},Hh.prototype.send=function(t){this.resetKeepAlive(),t=Go(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=Zs(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},Hh.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Hh.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Hh.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Hh.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},Hh.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Hh.responsesRequiredToBeHealthy=2,Hh.healthyTimeout=3e4,Hh);function Hh(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ca(this.connId),this.stats_=vh.getCollection(e),this.connURL=Hh.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var Kh=(Object.defineProperty(zh,"ALL_TRANSPORTS",{get:function(){return[Mh,Wh]},enumerable:!1,configurable:!0}),zh.prototype.initTransports_=function(t){var e,n,r=Wh&&Wh.isAvailable(),i=r&&!Wh.previouslyFailed();if(t.webSocketOnly&&(r||Ys("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Wh];else{var o=this.transports_=[];try{for(var s=go(zh.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},zh.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},zh.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},zh);function zh(t){this.initTransports_(t)}var Gh=(Qh.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0)),0<(e=e.healthyTimeout||0)&&(this.healthyTimeout_=ga(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},Qh.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Qh.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},Qh.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},Qh.prototype.sendRequest=function(t){t={t:"d",d:t},this.sendData_(t)},Qh.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Qh.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},Qh.prototype.onSecondaryMessageReceived_=function(t){var e=$s("t",t),t=$s("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},Qh.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Qh.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Qh.prototype.onPrimaryMessageReceived_=function(t){var e=$s("t",t),t=$s("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},Qh.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Qh.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Qh.prototype.onControl_=function(t){var e=$s("t",t);if("d"in t)if(t=t.d,"h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?Gs("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gs("Unknown control packet command: "+e)},Qh.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Ys("Protocol version mismatch detected"),this.tryStartUpgrade_())},Qh.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Qh.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),ga(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},Qh.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},Qh.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ga(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},Qh.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Qh.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Qh.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ea.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Qh.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Qh.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Qh.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Qh.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Qh);function Qh(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ca("c:"+this.id+":"),this.transportManager_=new Kh(e),this.log_("Connection created"),this.start_()}function Yh(){}Yh.prototype.put=function(t,e,n,r){},Yh.prototype.merge=function(t,e,n,r){},Yh.prototype.refreshAuthToken=function(t){},Yh.prototype.onDisconnectPut=function(t,e,n){},Yh.prototype.onDisconnectMerge=function(t,e,n){},Yh.prototype.onDisconnectCancel=function(t,e){},Yh.prototype.reportStats=function(t){};var Xh,Jh=1e3,$h=3e5,Zh=(fo(tl,Xh=iu=Yh),tl.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(Go(e)),To(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},tl.prototype.get=function(t){var n=this,r=new ko,i={p:t.path.toString(),q:t.queryObject()},e={action:"g",request:i,onComplete:function(t){var e=t.d;"ok"===t.s?(n.onDataUpdate_(i.p,e,!1,null),r.resolve(e)):r.reject(e)}};this.outstandingGets_.push(e),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=n.outstandingGets_[o];void 0!==t&&e===t&&(delete n.outstandingGets_[o],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),n.log_("get "+o+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),r.promise},tl.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),To(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),To(!this.listens.get(o).has(i),"listen() called twice for same path/queryId."),n={onComplete:r,hashFn:e,query:t,tag:n},this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},tl.prototype.sendGet_=function(e){var n=this,r=this.outstandingGets_[e];this.sendRequest("g",r.request,function(t){delete n.outstandingGets_[e],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),r.onComplete&&r.onComplete(t)})},tl.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;tl.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},tl.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&Yo(t,"w")&&(t=Xo(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&Ys("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+(t='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"')+" at "+(e=e.path.toString())+" to your security rules for better performance."))},tl.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},tl.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||"object"==typeof(t=Qo(t=t).claims)&&!0===t.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},tl.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=(e=Qo(e=n=this.authToken_).claims)&&"object"==typeof e&&e.hasOwnProperty("iat")?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},tl.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),To(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},tl.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e),t={p:t},r&&(t.q=n,t.t=r),this.sendRequest("n",t)},tl.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},tl.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},tl.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},tl.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n},this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},tl.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},tl.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},tl.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n},void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++,r=this.outstandingPuts_.length-1,this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},tl.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},tl.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},tl.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Go(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},tl.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Gs("Unrecognized action received from server: "+Go(t)+"\nAre you using the latest client?")},tl.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},tl.prototype.scheduleConnect_=function(t){var e=this;To(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},tl.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Jh,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},tl.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Jh,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},tl.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=Jh),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},tl.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t,h=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+tl.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){To(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?ua("getToken() completed but was canceled"):(ua("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new Gh(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){Ys(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(h.repoInfo_.nodeAdmin&&Ys(t),c())}))},tl.prototype.interrupt=function(t){ua("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},tl.prototype.resume=function(t){ua("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Jo(this.interruptReasons_)&&(this.reconnectDelay_=Jh,this.realtime_||this.scheduleConnect_(0))},tl.prototype.handleTimestamp_=function(t){t-=(new Date).getTime(),this.onServerInfoUpdate_({serverTimeOffset:t})},tl.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},tl.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return pa(t)}).join("$"):"default",(e=this.removeListen_(t,e))&&e.onComplete&&e.onComplete("permission_denied")},tl.prototype.removeListen_=function(t,e){var n,r=new ba(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},tl.prototype.onAuthRevoked_=function(t,e){ua("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},tl.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},tl.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=go(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,go(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},tl.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Vh.replace(/\./g,"-")]=1,Po()?t["framework.cordova"]=1:xo()&&(t["framework.reactnative"]=1),this.reportStats(t)},tl.prototype.shouldReconnect_=function(){var t=Oh.getInstance().currentlyOnline();return Jo(this.interruptReasons_)&&t},tl.nextPersistentConnectionId_=0,tl.nextConnectionId_=0,tl);function tl(t,e,n,r,i,o,s){var a=Xh.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=tl.nextPersistentConnectionId_++,a.log_=ca("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingGets_=[],a.outstandingPutCount_=0,a.outstandingGetCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=Jh,a.maxReconnectDelay_=$h,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!Lo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Nh.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&Oh.getInstance().on("online",a.onOnline_,a),a}var el,nl=(fo(rl,el=iu),rl.prototype.reportStats=function(t){throw new Error("Method not implemented.")},rl.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(To(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},rl.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=rl.getListenId_(t,n),a={};this.listens_[s]=a,t=t.getQueryParams().toRestQueryStringParameters(),this.restRequest_(o+".json",t,function(t,e){404===t&&(t=e=null),null===t&&i.onDataUpdate_(o,e,!1,n),Xo(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},rl.prototype.unlisten=function(t,e){e=rl.getListenId_(t,e),delete this.listens_[e]},rl.prototype.get=function(t){var n=this,e=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new ko;return this.restRequest_(r+".json",e,function(t,e){404===t&&(t=e=null),null===t?(n.onDataUpdate_(r,e,!1,null),i.resolve(e)):i.reject(new Error(e))}),i.promise},rl.prototype.refreshAuthToken=function(t){},rl.prototype.restRequest_=function(r,i,o){var s=this;void 0===i&&(i={}),i.format="export",this.authTokenProvider_.getToken(!1).then(function(t){(t=t&&t.accessToken)&&(i.auth=t);var e=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+r+"?ns="+s.repoInfo_.namespace+function(){for(var n=[],t=0,e=Object.entries(i);t<e.length;t++){var r=e[t];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(r[0],r[1])}return n.length?"&"+n.join("&"):""}();s.log_("Sending REST request for "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(o&&4===n.readyState){s.log_("REST Response for "+e+" received. status:",n.status,"response:",n.responseText);var t=null;if(200<=n.status&&n.status<300){try{t=zo(n.responseText)}catch(t){Ys("Failed to parse JSON response for "+e+": "+n.responseText)}o(null,t)}else 401!==n.status&&404!==n.status&&Ys("Got unsuccessful REST response for "+e+" Status: "+n.status),o(n.status);o=null}},n.open("GET",e,!0),n.send()})},rl);function rl(t,e,n){var r=el.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=ca("p:rest:"),r.listens_={},r}var il="repo_interrupt",ol=(sl.prototype.start=function(){var s=this;if(this.stats_=vh.getCollection(this.repoInfo_),this.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new nl(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var t=this.app.options.databaseAuthVariableOverride;if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Go(t)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new Zh(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,t),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=vh.getOrCreateReporter(this.repoInfo_,function(){return new _h(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new lh,this.infoSyncTree_=new ch({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new ch({startListening:function(n,t,e,r){return s.server_.listen(n,e,t,function(t,e){e=r(t,e),s.eventQueue_.raiseEventsForChangedPath(n.path,e)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})},sl.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},sl.prototype.name=function(){return this.repoInfo_.namespace},sl.prototype.serverTime=function(){var t=this.infoData_.getNode(new ba(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},sl.prototype.generateServerValues=function(){return(t=t={timestamp:this.serverTime()}).timestamp=t.timestamp||(new Date).getTime(),t;var t},sl.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new ba(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s,t=i;0<(s=r?n?(o=$o(e,function(t){return Wu(t)}),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(o=Wu(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,o,r)):n?(n=$o(e,function(t){return Wu(t)}),this.serverSyncTree_.applyServerMerge(i,n)):(e=Wu(e),this.serverSyncTree_.applyServerOverwrite(i,e))).length&&(t=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(t,s)},sl.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},sl.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},sl.prototype.onServerInfoUpdate_=function(t){var n=this;da(t,function(t,e){n.updateInfo_(t,e)})},sl.prototype.updateInfo_=function(t,e){t=new ba("/.info/"+t),e=Wu(e),this.infoData_.updateSnapshot(t,e),e=this.infoSyncTree_.applyServerOverwrite(t,e),this.eventQueue_.raiseEventsForChangedPath(t,e)},sl.prototype.getNextWriteId_=function(){return this.nextWriteId_++},sl.prototype.getValue=function(n){var r=this;return this.server_.get(n).then(function(t){var e=Wu(t),t=r.serverSyncTree_.applyServerOverwrite(n.path,e);return r.eventQueue_.raiseEventsAtPath(n.path,t),Promise.resolve(new Yu(e,n.getRef(),n.getQueryParams().getIndex()))},function(t){r.log_("get for query "+Go(n)+" falling back to cache after error: "+t);var e=r.serverSyncTree_.calcCompleteEventCache(n.path);return e.isEmpty()?Promise.reject(new Error(t)):Promise.resolve(new Yu(e,n.getRef(),n.getQueryParams().getIndex()))})},sl.prototype.setWithPriority=function(r,t,e,i){var o=this;this.log_("set",{path:r.toString(),value:t,priority:e});var n=this.generateServerValues(),n=fc(t=Wu(t,e),e=this.serverSyncTree_.calcCompleteEventCache(r),n),s=this.getNextWriteId_(),n=this.serverSyncTree_.applyUserOverwrite(r,n,s,!0);this.eventQueue_.queueEvents(n),this.server_.put(r.toString(),t.val(!0),function(t,e){var n="ok"===t;n||Ys("set at "+r+" failed: "+t),n=o.serverSyncTree_.ackUserWrite(s,!n),o.eventQueue_.raiseEventsForChangedPath(r,n),o.callOnCompleteCallback(i,t,e)}),t=this.abortTransactions_(r),this.rerunTransactions_(t),this.eventQueue_.raiseEventsForChangedPath(t,[])},sl.prototype.update=function(i,t,o){var s=this;this.log_("update",{path:i.toString(),value:t});var a,e,n=!0,r=this.generateServerValues(),u={};da(t,function(t,e){n=!1,u[t]=lc(i.child(t),Wu(e),s.serverSyncTree_,r)}),n?(ua("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(o,"ok")):(a=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(i,u,a),this.eventQueue_.queueEvents(e),this.server_.merge(i.toString(),t,function(t,e){(r="ok"===t)||Ys("update at "+i+" failed: "+t);var n=s.serverSyncTree_.ackUserWrite(a,!r),r=0<n.length?s.rerunTransactions_(i):i;s.eventQueue_.raiseEventsForChangedPath(r,n),s.callOnCompleteCallback(o,t,e)}),da(t,function(t){t=s.abortTransactions_(i.child(t)),s.rerunTransactions_(t)}),this.eventQueue_.raiseEventsForChangedPath(i,[]))},sl.prototype.runOnDisconnectEvents_=function(){var n=this;this.log_("onDisconnectEvents");var r=this.generateServerValues(),i=new mc;this.onDisconnect_.forEachTree(ba.Empty,function(t,e){e=lc(t,e,n.serverSyncTree_,r),i.remember(t,e)});var o=[];i.forEachTree(ba.Empty,function(t,e){o=o.concat(n.serverSyncTree_.applyServerOverwrite(t,e)),t=n.abortTransactions_(t),n.rerunTransactions_(t)}),this.onDisconnect_=new mc,this.eventQueue_.raiseEventsForChangedPath(ba.Empty,o)},sl.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},sl.prototype.onDisconnectSet=function(n,t,r){var i=this,o=Wu(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},sl.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=Wu(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},sl.prototype.onDisconnectUpdate=function(n,r,i){var o=this;if(Jo(r))return ua("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(n.toString(),r,function(t,e){"ok"===t&&da(r,function(t,e){e=Wu(e),o.onDisconnect_.remember(n.child(t),e)}),o.callOnCompleteCallback(i,t,e)})},sl.prototype.addEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,e)},sl.prototype.removeEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,e)},sl.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(il)},sl.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(il)},sl.prototype.stats=function(t){var i;void 0===t&&(t=!1),"undefined"!=typeof console&&(t=t?(this.statsListener_||(this.statsListener_=new gh(this.stats_)),this.statsListener_.get()):this.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),da(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},sl.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},sl.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),ua.apply(void 0,_o([n],t))},sl.prototype.callOnCompleteCallback=function(n,r,i){n&&ya(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})},Object.defineProperty(sl.prototype,"database",{get:function(){return this.__database||(this.__database=new Nl(this))},enumerable:!1,configurable:!0}),sl);function sl(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new mc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}var al=(ul.prototype.getStartPost=function(){return this.startPost_},ul.prototype.getEndPost=function(){return this.endPost_},ul.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},ul.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Za(e,n))||(n=Fu.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},ul.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Fu.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(Fu.EMPTY_NODE),i=this;return e.forEachChild(gu,function(t,e){i.matches(new Za(t,e))||(r=r.updateImmediateChild(t,Fu.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},ul.prototype.updatePriority=function(t,e){return t},ul.prototype.filtersNodes=function(){return!0},ul.prototype.getIndexedFilter=function(){return this.indexedFilter_},ul.prototype.getIndex=function(){return this.index_},ul.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},ul.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},ul);function ul(t){this.indexedFilter_=new jc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=ul.getStartPost_(t),this.endPost_=ul.getEndPost_(t)}var cl=(hl.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Za(e,n))||(n=Fu.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},hl.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Fu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Fu.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Fu.EMPTY_NODE);for(var a,u=void 0,c=void 0,h=void 0,i=void 0,h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare()),o=0,l=!1;i.hasNext();)s=i.getNext(),!l&&h(u,s)<=0&&(l=!0),l&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,Fu.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},hl.prototype.updatePriority=function(t,e){return t},hl.prototype.filtersNodes=function(){return!0},hl.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},hl.prototype.getIndex=function(){return this.index_},hl.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare(),a=t;To(a.numChildren()===this.limit_,"");var u=new Za(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);return h&&!n.isEmpty()&&0<=p?(null!=i&&i.trackChildChange(Fc.childChangedChange(e,n,l)),a.updateImmediateChild(e,n)):(null!=i&&i.trackChildChange(Fc.childRemovedChange(e,l)),l=a.updateImmediateChild(e,Fu.EMPTY_NODE),null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Fc.childAddedChange(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l)}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(Fc.childRemovedChange(c.name,c.node)),i.trackChildChange(Fc.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Fu.EMPTY_NODE)):t},hl);function hl(t){this.rangedFilter_=new al(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var ll=(fl.prototype.hasStart=function(){return this.startSet_},fl.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===fl.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},fl.prototype.getIndexStartValue=function(){return To(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},fl.prototype.getIndexStartName=function(){return To(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ha},fl.prototype.hasEnd=function(){return this.endSet_},fl.prototype.getIndexEndValue=function(){return To(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},fl.prototype.getIndexEndName=function(){return To(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:la},fl.prototype.hasLimit=function(){return this.limitSet_},fl.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},fl.prototype.getLimit=function(){return To(this.limitSet_,"Only valid if limit has been set"),this.limit_},fl.prototype.getIndex=function(){return this.index_},fl.prototype.copy_=function(){var t=new fl;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},fl.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},fl.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=fl.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},fl.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=fl.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},fl.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},fl.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},fl.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},fl.prototype.getQueryObject=function(){var t,e=fl.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==gu&&(n[e.INDEX]=this.index_.toString()),n},fl.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},fl.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===gu},fl.prototype.getNodeFilter=function(){return this.loadsAllData()?new jc(this.getIndex()):new(this.hasLimit()?cl:al)(this)},fl.prototype.toRestQueryStringParameters=function(){var t,e=fl.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===gu?e.PRIORITY_INDEX:this.index_===zu?e.VALUE_INDEX:this.index_===au?e.KEY_INDEX:(To(this.index_ instanceof Gu,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=Go(t),this.startSet_&&(n[e.START_AT]=Go(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+Go(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=Go(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+Go(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},fl.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},fl.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},fl.DEFAULT=new fl,fl);function fl(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=gu}var pl,dl=(fo(vl,pl=uo),vl.prototype.getKey=function(){return os("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},vl.prototype.child=function(t){var e;return os("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof ba||(null===this.path.getFront()?(0,Ua("Reference.child",1,e=(e=t)&&e.replace(/^\/*\.info(\/|$)/,"/"),!1)):Ua("Reference.child",1,t,!1)),new vl(this.repo,this.path.child(t))},vl.prototype.getParent=function(){os("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new vl(this.repo,t)},vl.prototype.getRoot=function(){os("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},vl.prototype.databaseProp=function(){return this.repo.database},vl.prototype.set=function(t,e){os("Reference.set",1,2,arguments.length),ja("Reference.set",this.path),Da("Reference.set",1,t,this.path,!1),as("Reference.set",2,e,!0);var n=new ko;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},vl.prototype.update=function(t,e){if(os("Reference.update",1,2,arguments.length),ja("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Ys("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xa("Reference.update",1,t,this.path,!1),as("Reference.update",2,e,!0);var i=new ko;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},vl.prototype.setWithPriority=function(t,e,n){if(os("Reference.setWithPriority",2,3,arguments.length),ja("Reference.setWithPriority",this.path),Da("Reference.setWithPriority",1,t,this.path,!1),La("Reference.setWithPriority",2,e,!1),as("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new ko;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},vl.prototype.remove=function(t){return os("Reference.remove",0,1,arguments.length),ja("Reference.remove",this.path),as("Reference.remove",1,t,!0),this.set(null,t)},vl.prototype.transaction=function(t,r,e){if(os("Reference.transaction",1,3,arguments.length),ja("Reference.transaction",this.path),as("Reference.transaction",1,t,!1),as("Reference.transaction",2,r,!0),function(){if(void 0!==e&&"boolean"!=typeof e)throw new Error(ss("Reference.transaction",3,!0)+"must be a boolean.")}(),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new ko;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new Ga(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},vl.prototype.setPriority=function(t,e){os("Reference.setPriority",1,2,arguments.length),ja("Reference.setPriority",this.path),La("Reference.setPriority",1,t,!1),as("Reference.setPriority",2,e,!0);var n=new ko;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},vl.prototype.push=function(t,e){os("Reference.push",0,2,arguments.length),ja("Reference.push",this.path),Da("Reference.push",1,t,this.path,!0),as("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=$a(n),n=this.child(r),i=this.child(r),t=null!=t?n.set(t,e).then(function(){return i}):Promise.resolve(i);return n.then=t.then.bind(t),n.catch=t.then.bind(t,void 0),"function"==typeof e&&t.catch(function(){}),n},vl.prototype.onDisconnect=function(){return ja("Reference.onDisconnect",this.path),new Ka(this.repo,this.path)},Object.defineProperty(vl.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(vl.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(vl.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(vl.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),vl);function vl(t,e){if(!(t instanceof ol))throw new Error("new Reference() no longer supported - use app.database().");return pl.call(this,t,e,ll.DEFAULT,!1)||this}uo.__referenceConstructor=dl,eh.__referenceConstructor=dl;function yl(){this.children={},this.childCount=0,this.value=null}var gl,ml=(_l.prototype.subTree=function(t){for(var e=t instanceof ba?t:new ba(t),n=this,r=e.getFront();null!==r;)n=new _l(r,n,Xo(n.node_.children,r)||new yl),r=(e=e.popFront()).getFront();return n},_l.prototype.getValue=function(){return this.node_.value},_l.prototype.setValue=function(t){To(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},_l.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},_l.prototype.hasChildren=function(){return 0<this.node_.childCount},_l.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},_l.prototype.forEachChild=function(n){var r=this;da(this.node_.children,function(t,e){n(new _l(t,r,e))})},_l.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},_l.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},_l.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},_l.prototype.path=function(){return new ba(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},_l.prototype.name=function(){return this.name_},_l.prototype.parent=function(){return this.parent_},_l.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},_l.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Yo(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},_l);function _l(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new yl),this.name_=t,this.parent_=e,this.node_=n}(ft=gl={})[ft.RUN=0]="RUN",ft[ft.SENT=1]="SENT",ft[ft.COMPLETED=2]="COMPLETED",ft[ft.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",ft[ft.NEEDS_ABORT=4]="NEEDS_ABORT",ol.MAX_TRANSACTION_RETRIES_=25,ol.prototype.transactionsInit_=function(){this.transactionQueueTree_=new ml},ol.prototype.startTransaction=function(t,e,n,r){function i(){}this.log_("transaction on "+t);var o=new dl(this,t);o.on("value",i);var s,a={path:t,update:e,onComplete:n,status:null,order:ia(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},e=this.getLatestState_(t);a.currentInputSnapshot=e,void 0===(n=a.update(e.val()))?(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&(s=new Yu(a.currentInputSnapshot,new dl(this,a.path),gu),a.onComplete(null,!1,s))):(Ha("transaction failed: Data returned ",n,a.path),a.status=gl.RUN,(s=(r=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(a),r.setValue(s),r=void 0,"object"==typeof n&&null!==n&&Yo(n,".priority")?(r=Xo(n,".priority"),To(Pa(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):r=(this.serverSyncTree_.calcCompleteEventCache(t)||Fu.EMPTY_NODE).getPriority().val(),s=this.generateServerValues(),s=fc(r=Wu(n,r),e,s),a.currentOutputSnapshotRaw=r,a.currentOutputSnapshotResolved=s,a.currentWriteId=this.getNextWriteId_(),a=this.serverSyncTree_.applyUserOverwrite(t,s,a.currentWriteId,a.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,a),this.sendReadyTransactions_())},ol.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Fu.EMPTY_NODE},ol.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),To(0<e.length,"Sending zero length transaction queue"),e.every(function(t){return t.status===gl.RUN})&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild(function(t){n.sendReadyTransactions_(t)})},ol.prototype.sendTransactionQueue_=function(s,a){for(var u=this,t=a.map(function(t){return t.currentWriteId}),e=o=this.getLatestState_(s,t),t=o.hash(),n=0;n<a.length;n++){var r=a[n];To(r.status===gl.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=gl.SENT,r.retryCount++;var i=ba.relativePath(s,r.path),e=e.updateChild(i,r.currentOutputSnapshotRaw)}var o=e.val(!0),c=s;this.server_.put(c.toString(),o,function(t){u.log_("transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i=[],o=0;o<a.length;o++)a[o].status=gl.COMPLETED,e=e.concat(u.serverSyncTree_.ackUserWrite(a[o].currentWriteId)),a[o].onComplete&&(n=a[o].currentOutputSnapshotResolved,r=new dl(u,a[o].path),r=new Yu(n,r,gu),i.push(a[o].onComplete.bind(null,null,!0,r))),a[o].unwatcher();for(u.pruneCompletedTransactionsBelowNode_(u.transactionQueueTree_.subTree(s)),u.sendReadyTransactions_(),u.eventQueue_.raiseEventsForChangedPath(s,e),o=0;o<i.length;o++)ya(i[o])}else{if("datastale"===t)for(o=0;o<a.length;o++)a[o].status===gl.SENT_NEEDS_ABORT?a[o].status=gl.NEEDS_ABORT:a[o].status=gl.RUN;else for(Ys("transaction at "+c.toString()+" failed: "+t),o=0;o<a.length;o++)a[o].status=gl.NEEDS_ABORT,a[o].abortReason=t;u.rerunTransactions_(s)}},t)},ol.prototype.rerunTransactions_=function(t){var t=(e=this.getAncestorTransactionNode_(t)).path(),e=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(e,t),t},ol.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===gl.RUN}).map(function(t){return t.currentWriteId}),o=0;o<t.length;o++){var s,a,u,c=t[o],h=ba.relativePath(e,c.path),l=!1,f=void 0;To(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===gl.NEEDS_ABORT?(l=!0,f=c.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):c.status===gl.RUN&&(r=c.retryCount>=ol.MAX_TRANSACTION_RETRIES_?(l=!0,f="maxretry",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):(s=this.getLatestState_(c.path,i),c.currentInputSnapshot=s,void 0!==(u=t[o].update(s.val()))?(Ha("transaction failed: Data returned ",u,c.path),a=Wu(u),"object"==typeof u&&null!=u&&Yo(u,".priority")||(a=a.updatePriority(s.getPriority())),h=c.currentWriteId,u=fc(a,s,u=this.generateServerValues()),c.currentOutputSnapshotRaw=a,c.currentOutputSnapshotResolved=u,c.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(h),1),(r=r.concat(this.serverSyncTree_.applyUserOverwrite(c.path,u,c.currentWriteId,c.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(h,!0))):(l=!0,f="nodata",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],l&&(t[o].status=gl.COMPLETED,c=t[o].unwatcher,setTimeout(c,Math.floor(0)),t[o].onComplete&&("nodata"===f?(l=new dl(this,t[o].path),c=t[o].currentInputSnapshot,l=new Yu(c,l,gu),n.push(t[o].onComplete.bind(null,null,!1,l))):n.push(t[o].onComplete.bind(null,new Error(f),!1,null))))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)ya(n[o]);this.sendReadyTransactions_()}},ol.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},ol.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},ol.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},ol.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==gl.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},ol.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path();return(t=this.transactionQueueTree_.subTree(t)).forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(t),t.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},ol.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===gl.SENT_NEEDS_ABORT||(e[o].status===gl.SENT?(To(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=gl.SENT_NEEDS_ABORT,e[o].abortReason="set"):(To(e[o].status===gl.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)ya(n[o])}};var bl=(wl.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(ua("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},wl.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},wl.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},wl.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ys(t)},wl);function wl(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var El=(Il.prototype.getToken=function(t){return Promise.resolve({accessToken:Il.EMULATOR_AUTH_TOKEN})},Il.prototype.addTokenChangeListener=function(t){t(Il.EMULATOR_AUTH_TOKEN)},Il.prototype.removeTokenChangeListener=function(t){},Il.prototype.notifyForInvalidToken=function(){},Il.EMULATOR_AUTH_TOKEN="owner",Il);function Il(){}var Tl,Sl=(Cl.getInstance=function(){return Tl=Tl||new Cl},Cl.prototype.interrupt=function(){var t,e,n,r;try{for(var i=go(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,go(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},Cl.prototype.resume=function(){var t,e,n,r;try{for(var i=go(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,go(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},Cl.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Na(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new El)},Cl.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||Qs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ua("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=ka(i,r),a=s.repoInfo,n=void 0;return"undefined"!=typeof process&&(n=process.env.FIREBASE_DATABASE_EMULATOR_HOST),n?(o=!0,a=(s=ka(i="http://"+n+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure,e=r&&o?new El:new bl(t,e),Va("Invalid Firebase Database URL",1,s),s.path.isEmpty()||Qs("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,e).database},Cl.prototype.deleteRepo=function(t){var e=Xo(this.repos_,t.app.name);e&&Xo(e,t.key)===t||Qs("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},Cl.prototype.createRepo=function(t,e,n){var r=Xo(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=Xo(r,t.toURLString());return i&&Qs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new ol(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Cl.prototype.forceRestClient=function(t){this.useRestClient_=t},Cl);function Cl(){this.repos_={},this.useRestClient_=!1}var Nl=(Object.defineProperty(Al.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(Al.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new dl(this.repo_,ba.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(Al.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),Al.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?Qs("Cannot call useEmulator() after instance has already been initialized."):Sl.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},Al.prototype.ref=function(t){return this.checkDeleted_("ref"),os("database.ref",0,1,arguments.length),t instanceof dl?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},Al.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),os(e,1,1,arguments.length);var n=ka(t,this.repo_.repoInfo_.nodeAdmin);return Va(e,1,n),(t=n.repoInfo).isCustomHost()||t.host===this.repo_.repoInfo_.host||Qs(e+": Host name does not match the current database: (found "+t.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Al.prototype.checkDeleted_=function(t){null===this.repoInternal_&&Qs("Cannot call "+t+" on a deleted database.")},Al.prototype.goOffline=function(){os("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Al.prototype.goOnline=function(){os("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Al.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},Al);function Al(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return vo(e,void 0,void 0,function(){return yo(this,function(t){return this.checkDeleted_("delete"),Sl.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof ol||Qs("Don't call new Database() directly - please use firebase.database().")}F=Object.freeze({__proto__:null,forceLongPolling:function(){Wh.forceDisallow(),Mh.forceAllow()},forceWebSockets:function(){Mh.forceDisallow()},isWebSocketsAvailable:function(){return Wh.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return qh(r),(r=new ms("auth-internal",new bs("database-standalone"))).setComponent(new vs("auth-internal",function(){return i},"PRIVATE")),{instance:Sl.getInstance().databaseFromApp(e,r,n,t),namespace:o}}}),zn=Zh;Zh.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Zh.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};oo=Object.freeze({__proto__:null,DataConnection:zn,RealTimeConnection:Gh,hijackHash:function(i){var o=Zh.prototype.put;return Zh.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){Zh.prototype.put=o}},ConnectionTarget:Na,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Sl.getInstance().forceRestClient(t)}}),mt=Nl.ServerValue;qh((yt=Vl).SDK_VERSION),yt.INTERNAL.registerComponent(new vs("database",function(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return Sl.getInstance().databaseFromApp(n,t,e)},"PUBLIC").setServiceProps({Reference:dl,Query:uo,Database:Nl,DataSnapshot:Yu,enableLogging:zs,INTERNAL:F,ServerValue:mt,TEST_ACCESS:oo}).setMultipleInstances(!0)),yt.registerVersion("@firebase/database","0.8.0");var kl=function(t,e){return(kl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ol(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var lt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Rl=lt||self;function Pl(){}function Dl(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function xl(t){var e=Dl(t);return"array"==e||"object"==e&&"number"==typeof t.length}function Ll(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Ml="closure_uid_"+(1e9*Math.random()>>>0),Fl=0;function Ul(t,e,n){return t.call.apply(t.bind,arguments)}function jl(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function ql(t,e,n){return(ql=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ul:jl).apply(null,arguments)}function Bl(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var Wl=Date.now;function Hl(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t}function Kl(){this.j=this.j,this.i=this.i}Kl.prototype.j=!1,Kl.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&(Object.prototype.hasOwnProperty.call(this,Ml)&&this[Ml]||(this[Ml]=++Fl))},Kl.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var zl=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Gl=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ql(){return Array.prototype.concat.apply([],arguments)}function Yl(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Xl(t){return/^[\s\xa0]*$/.test(t)}var Jl=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function $l(t,e){return-1!=t.indexOf(e)}function Zl(t,e){return t<e?-1:e<t?1:0}F=Rl.navigator;function tf(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ef(t){var e,n={};for(e in t)n[e]=t[e];return n}lf=(F=F&&F.userAgent)?F:"";var nf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rf(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<nf.length;i++)e=nf[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function of(t){return of[" "](t),t}of[" "]=Pl;var sf,mt=$l(lf,"Opera"),af=$l(lf,"Trident")||$l(lf,"MSIE"),oo=$l(lf,"Edge"),uf=oo||af,cf=$l(lf,"Gecko")&&!($l(lf.toLowerCase(),"webkit")&&!$l(lf,"Edge"))&&!($l(lf,"Trident")||$l(lf,"MSIE"))&&!$l(lf,"Edge"),yt=$l(lf.toLowerCase(),"webkit")&&!$l(lf,"Edge");function hf(){var t=Rl.document;return t?t.documentMode:void 0}var F="",lf=(lf=lf,cf?/rv:([^\);]+)(\)|;)/.exec(lf):oo?/Edge\/([\d\.]+)/.exec(lf):af?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(lf):yt?/WebKit\/(\S+)/.exec(lf):mt?/(?:Version)[ \/]?(\S+)/.exec(lf):void 0);lf&&(F=lf?lf[1]:""),sf=af&&null!=(lf=hf())&&lf>parseFloat(F)?String(lf):F;var ff={};function pf(a){return t=a,e=function(){for(var t=0,e=Jl(String(sf)).split("."),n=Jl(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=Zl(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Zl(0==o[2].length,0==s[2].length)||Zl(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=ff,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e();var t,e,n}var df=Rl.document&&af&&(hf()||parseInt(sf,10))||void 0,vf=!af||9<=Number(df),yf=af&&!pf("9"),gf=function(){if(!Rl.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Rl.addEventListener("test",Pl,e),Rl.removeEventListener("test",Pl,e)}catch(t){}return t}();function mf(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function _f(t,e){if(mf.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(cf){t:{try{of(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:bf[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}mf.prototype.b=function(){this.defaultPrevented=!0},Hl(_f,mf);var bf={2:"touch",3:"pen",4:"mouse"};_f.prototype.b=function(){_f.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,yf)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var wf="closure_listenable_"+(1e6*Math.random()|0),Ef=0;function If(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Ef,this.Y=this.Z=!1}function Tf(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Sf(t){this.src=t,this.a={},this.b=0}function Cf(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=zl(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Tf(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Nf(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Sf.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Nf(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new If(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Af="closure_lm_"+(1e6*Math.random()|0),kf={};function Of(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Uf(r),e&&e[wf]?e.wa(n,r,Ll(i)?!!i.capture:!!i,o):Rf(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Of(t,e[o],n,r,i);return null}return n=Uf(n),t&&t[wf]?t.va(e,n,Ll(r)?!!r.capture:!!r,i):Rf(t,e,n,!1,r,i)}function Rf(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ll(i)?!!i.capture:!!i;if(s&&!vf)return null;var a,u,c=Mf(t);if(c||(t[Af]=c=new Sf(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=Lf,r=u=vf?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)gf||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Df(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Pf(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[wf]?Cf(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Df(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Mf(e))?(Cf(n,t),0==n.b&&(n.src=null,e[Af]=null)):Tf(t)))}function Df(t){return t in kf?kf[t]:kf[t]="on"+t}function xf(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Pf(t),n.call(r,e)}function Lf(t,e){if(t.Y)return!0;if(vf)return xf(t,new _f(e,this));if(!e)t:{e=["window","event"];for(var n=Rl,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return xf(t,e=new _f(e,this))}function Mf(t){return(t=t[Af])instanceof Sf?t:null}var Ff="__closure_events_fn_"+(1e9*Math.random()>>>0);function Uf(e){return"function"==Dl(e)?e:(e[Ff]||(e[Ff]=function(t){return e.handleEvent(t)}),e[Ff])}function jf(){Kl.call(this),this.c=new Sf(this),(this.J=this).C=null}function Vf(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new mf(e,t):e instanceof mf?e.target=e.target||t:(s=e,rf(e=new mf(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=qf(o,r,!0,e)&&s;if(s=qf(o=e.a=t,r,!0,e)&&s,s=qf(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=qf(o=e.a=n[i],r,!1,e)&&s}function qf(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Cf(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}Hl(jf,Kl),jf.prototype[wf]=!0,(iu=jf.prototype).addEventListener=function(t,e,n,r){Of(this,t,e,n,r)},iu.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=Ll(i)?!!i.capture:!!i,r=Uf(r),e&&e[wf]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Nf(s=e.a[n],r,i,o))&&(Tf(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Mf(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Nf(n,r,i,o)),(r=-1<e?n[e]:null)&&Pf(r))}(this,t,e,n,r)},iu.G=function(){if(jf.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Tf(n[r]);delete e.a[t],e.b--}}this.C=null},iu.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},iu.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Bf=Rl.JSON.stringify;function Wf(){this.b=this.a=null}var Hf,Kf=(zf.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new zf(function(){return new Gf},function(t){t.reset()},100));function zf(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function Gf(){this.next=this.b=this.a=null}function Qf(t,e){var n;Hf||(n=Rl.Promise.resolve(void 0),Hf=function(){n.then(Jf)}),Yf||(Hf(),Yf=!0),Xf.add(t,e)}Wf.prototype.add=function(t,e){var n=Kf.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Gf.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Yf=!(Gf.prototype.reset=function(){this.next=this.b=this.a=null}),Xf=new Wf;function Jf(){for(var t,e;n=e=void 0,n=null,(e=Xf).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){Rl.setTimeout(function(){throw t},0)}(t)}var n=Kf;n.g(t),n.b<n.f&&(n.b++,t.next=n.a,n.a=t)}Yf=!1}function $f(t,e){jf.call(this),this.b=t||1,this.a=e||Rl,this.f=ql(this.Xa,this),this.g=Wl()}function Zf(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function tp(t,e,n){if("function"==Dl(t))n&&(t=ql(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ql(t.handleEvent,t)}return 2147483647<Number(e)?-1:Rl.setTimeout(t,e||0)}Hl($f,jf),(iu=$f.prototype).aa=!1,iu.M=null,iu.Xa=function(){var t;this.aa&&(0<(t=Wl()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Vf(this,"tick"),this.aa&&(Zf(this),this.start())))},iu.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Wl())},iu.G=function(){$f.X.G.call(this),Zf(this),delete this.a};var ep,np,rp=(kl(np=op,F=ep=Kl),np.prototype=null===F?Object.create(F):(ip.prototype=F.prototype,new ip),op.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=tp(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},op.prototype.G=function(){ep.prototype.G.call(this),this.a&&(Rl.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},op);function ip(){this.constructor=np}function op(t,e,n){var r=ep.call(this)||this;return r.g=null!=n?t.bind(n):t,r.h=e,r.b=null,r.c=!1,r.a=null,r}function sp(t){Kl.call(this),this.b=t,this.a={}}Hl(sp,Kl);var ap=[];function up(t,e,n,r){Array.isArray(n)||(n&&(ap[0]=n.toString()),n=ap);for(var i=0;i<n.length;i++){var o=Of(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function cp(t){tf(t.a,function(t,e){this.a.hasOwnProperty(e)&&Pf(t)},t),t.a={}}function hp(){this.a=!0}function lp(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)&&"noop"!=(r=i[0])&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}return Bf(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}sp.prototype.G=function(){sp.X.G.call(this),cp(this)},sp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hp.prototype.info=function(){};var fp=null;function pp(){return fp=fp||new jf}function dp(t){mf.call(this,"serverreachability",t)}function vp(){var t=pp();Vf(t,new dp(t))}function yp(t){mf.call(this,"statevent",t)}function gp(){var t=pp();Vf(t,new yp(t))}function mp(t){mf.call(this,"timingevent",t)}function _p(t,e){if("function"!=Dl(t))throw Error("Fn must not be null and must be a function");return Rl.setTimeout(function(){t()},e)}function bp(){}function wp(t){var e;return(e=t.a)||(e=t.a={}),e}function Ep(){}Hl(dp,mf),Hl(yp,mf),Hl(mp,mf),ft={NO_ERROR:0,Ya:1,fb:2,eb:3,ab:4,cb:5,gb:6,Da:7,TIMEOUT:8,jb:9},zn={$a:"complete",nb:"success",Ea:"error",Da:"abort",lb:"ready",mb:"readystatechange",TIMEOUT:"timeout",hb:"incrementaldata",kb:"progress",bb:"downloadprogress",ob:"uploadprogress"},bp.prototype.a=null;var Ip,lt={OPEN:"a",Za:"b",Ea:"c",ib:"d"};function Tp(){mf.call(this,"d")}function Sp(){mf.call(this,"c")}function Cp(){}function Np(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new sp(this),this.P=Ap,t=uf?125:void 0,this.R=new $f(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Hl(Tp,mf),Hl(Sp,mf),Hl(Cp,bp),Ip=new Cp;var Ap=45e3,kp={},Op={};function Rp(t,e,n){t.H=1,t.i=$p(zp(e)),t.j=n,t.I=!0,Pp(t,null)}function Pp(t,e){t.u=Wl(),xp(t),t.l=zp(t.i);var s,a,u,c,h,l,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),ld(n.b,"t",r),t.D=0,t.a=iv(t.g,t.g.C?e:null),0<t.O&&(t.F=new rp(ql(t.Ca,t,t.a),t.O)),up(t.J,t.a,"readystatechange",t.Va),e=t.B?ef(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),vp(),s=t.c,a=t.m,u=t.l,c=t.f,h=t.S,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function Dp(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var a=(a=n,o=void 0,i=(r=t).D,-1==(o=a.indexOf("\n",i))?Op:(i=Number(a.substring(i,o)),isNaN(i)?kp:(o+=1)+i>a.length?Op:(a=a.substr(o,i),r.D=o+i,a)));if(a==Op){4==e&&(t.h=4,gp(),s=!1),lp(t.c,t.f,null,"[Incomplete Response]");break}if(a==kp){t.h=4,gp(),lp(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}lp(t.c,t.f,a,null),jp(t,a)}4==e&&0==n.length&&(t.h=1,gp(),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Xd(e),e.F=!0,gp())):(lp(t.c,t.f,n,"[Invalid Chunked Response]"),Up(t),Fp(t))}function xp(t){t.T=Wl()+t.P,Lp(t,t.P)}function Lp(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=_p(ql(t.Ta,t),e)}function Mp(t){t.o&&(Rl.clearTimeout(t.o),t.o=null)}function Fp(t){0==t.g.v||t.A||Zd(t.g,t)}function Up(t){Mp(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Zf(t.R),cp(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function jp(t,e){try{var n,r,i,o,s,a=t.g;if(0!=a.v&&(a.a==t||md(a.b,t)))if(a.I=t.N,!t.C&&md(a.b,t)&&3==a.v){try{var u=a.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!a.j){if(a.a){if(!(a.a.u+3e3<t.u))break t;$d(a),qd(a)}Yd(a),gp()}}else a.oa=c[1],0<a.oa-a.P&&c[2]<37500&&a.H&&0==a.o&&!a.m&&(a.m=_p(ql(a.Qa,a),6e3));if(gd(a.b)<=1&&a.ea){try{a.ea()}catch(t){}a.ea=void 0}}else ev(a,11)}else if(!t.C&&a.a!=t||$d(a),!Xl(e))for(e=u=a.ka.a.parse(e),u=0;u<e.length;u++)c=e[u],a.P=c[0],c=c[1],2==a.v?"c"==c[0]?(a.J=c[1],a.ga=c[2],null!=(r=c[3])&&(a.ha=r,a.c.info("VER="+a.ha)),null!=(o=c[4])&&(a.pa=o,a.c.info("SVER="+a.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,a.D=n,a.c.info("backChannelRequestTimeoutMs_="+n)),n=a,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&($l(r,"spdy")||$l(r,"quic")||$l(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(_d(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,Jp(n.B,n.A,s))),a.v=3,a.f&&a.f.ta(),a.U&&(a.N=Wl()-t.u,a.c.info("Handshake RTT: "+a.N+"ms")),i=t,(n=a).la=rv(n,n.C?n.ga:null,n.fa),i.C?(bd(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(Mp(o),xp(o)),n.a=i):Qd(n),0<a.g.length&&Hd(a)):"stop"!=c[0]&&"close"!=c[0]||ev(a,7):3==a.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ev(a,7):Vd(a):"noop"!=c[0]&&a.f&&a.f.sa(c),a.o=0);vp()}catch(t){}}function Vp(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(xl(t)||"string"==typeof t)Gl(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(xl(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(xl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function qp(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof qp)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Bp(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Wp(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)Wp(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Wp(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(iu=Np.prototype).setTimeout=function(t){this.P=t},iu.Va=function(t){t=t.target;var e=this.F;e&&3==Md(t)?e.f():this.Ca(t)},iu.Ca=function(t){try{if(t==this.a)t:{var e=Md(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!uf&&!this.a.$())){this.A||4!=e||7==n||vp(),Mp(this);var i=this.a.W();if(this.N=i,n=this.a.$(),this.b=200==i,r=this.c,a=this.m,u=this.l,c=this.f,h=this.S,l=e,f=i,r.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+h+"]: "+a+"\n"+u+"\n"+l+" "+f}),this.b){if(this.U&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xl(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,gp(),Up(this),Fp(this);break t}lp(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,jp(this,s)}this.I?(Dp(this,e,n),uf&&this.b&&3==e&&(up(this.J,this.R,"tick",this.Ua),this.R.start())):(lp(this.c,this.f,n,null),jp(this,n)),4==e&&Up(this),this.b&&!this.A&&(4==e?Zd(this.g,this):(this.b=!1,xp(this)))}else 400==i&&0<n.indexOf("Unknown SID")?this.h=3:this.h=0,gp(),Up(this),Fp(this)}}}catch(t){}var a,u,c,h,l,f},iu.Ua=function(){var t,e;this.a&&(t=Md(this.a),e=this.a.$(),this.D<e.length&&(Mp(this),Dp(this,t,e),this.b&&4!=t&&xp(this)))},iu.cancel=function(){this.A=!0,Up(this)},iu.Ta=function(){this.o=null;var t,e,n=Wl();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(vp(),gp()),Up(this),this.h=2,Fp(this)):Lp(this,this.T-n)},(iu=qp.prototype).K=function(){Bp(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},iu.L=function(){return Bp(this),this.a.concat()},iu.get=function(t,e){return Wp(this.b,t)?this.b[t]:e},iu.set=function(t,e){Wp(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},iu.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Hp=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Kp(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Kp?(this.a=void 0!==e?e:t.a,Gp(this,t.f),this.j=t.j,Qp(this,t.c),Yp(this,t.h),this.g=t.g,e=t.b,(n=new ad).c=e.c,e.a&&(n.a=new qp(e.a),n.b=e.b),Xp(this,n),this.i=t.i):t&&(n=String(t).match(Hp))?(this.a=!!e,Gp(this,n[1]||"",!0),this.j=Zp(n[2]||""),Qp(this,n[3]||"",!0),Yp(this,n[4]),this.g=Zp(n[5]||"",!0),Xp(this,n[6]||"",!0),this.i=Zp(n[7]||"")):(this.a=!!e,this.b=new ad(null,this.a))}function zp(t){return new Kp(t)}function Gp(t,e,n){t.f=n?Zp(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Qp(t,e,n){t.c=n?Zp(e,!0):e}function Yp(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Xp(t,e,n){var r,i;e instanceof ad?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(ud(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(cd(this,e),ld(this,n,t))},r)),r.f=i):(n||(e=td(e,od)),t.b=new ad(e,t.a))}function Jp(t,e,n){t.b.set(e,n)}function $p(t){return Jp(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Wl()).toString(36)),t}function Zp(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function td(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ed),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ed(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Kp.prototype.toString=function(){var t=[],e=this.f;e&&t.push(td(e,nd,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(td(e,nd,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(td(n,"/"==n.charAt(0)?id:rd,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",td(n,sd)),t.join("")};var nd=/[#\/\?@]/g,rd=/[#\?:]/g,id=/[#\?]/g,od=/[#\?@]/g,sd=/#/g;function ad(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ud(o){o.a||(o.a=new qp,o.b=0,o.c&&function(t){if(t){t=t.split("&");for(var e=0;e<t.length;e++){var n,r=t[e].indexOf("="),i=null;0<=r?(n=t[e].substring(0,r),i=t[e].substring(r+1)):n=t[e],r=n,i=i?decodeURIComponent(i.replace(/\+/g," ")):"",o.add(decodeURIComponent(r.replace(/\+/g," ")),i)}}}(o.c))}function cd(t,e){ud(t),e=fd(t,e),Wp(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Wp((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Bp(t)))}function hd(t,e){return ud(t),e=fd(t,e),Wp(t.a.b,e)}function ld(t,e,n){cd(t,e),0<n.length&&(t.c=null,t.a.set(fd(t,e),Yl(n)),t.b+=n.length)}function fd(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function pd(t,e){this.b=t,this.a=e}function dd(t){this.g=t||vd,t=Rl.PerformanceNavigationTiming?0<(t=Rl.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Rl.ia&&Rl.ia.ya&&Rl.ia.ya()&&Rl.ia.ya().pb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(iu=ad.prototype).add=function(t,e){ud(this),this.c=null,t=fd(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},iu.forEach=function(n,r){ud(this),this.a.forEach(function(t,e){Gl(t,function(t){n.call(r,t,e,this)},this)},this)},iu.L=function(){ud(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},iu.K=function(t){ud(this);var e=[];if("string"==typeof t)hd(this,t)&&(e=Ql(e,this.a.get(fd(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ql(e,t[n])}return e},iu.set=function(t,e){return ud(this),this.c=null,hd(this,t=fd(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},iu.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},iu.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var vd=10;function yd(t){return t.b||t.a&&t.a.size>=t.f}function gd(t){return t.b?1:t.a?t.a.size:0}function md(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function _d(t,e){t.a?t.a.add(e):t.b=e}function bd(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function wd(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return Yl(t.c);var r=t.c;try{for(var i=Ol(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Ed(){}function Id(){this.a=new Ed}function Td(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}dd.prototype.cancel=function(){var t,e;if(this.c=wd(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Ol(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Ed.prototype.stringify=function(t){return Rl.JSON.stringify(t,void 0)},Ed.prototype.parse=function(t){return Rl.JSON.parse(t,void 0)};var Sd=Rl.JSON.parse;function Cd(t){jf.call(this),this.headers=new qp,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Nd,this.D=this.F=!1}Hl(Cd,jf);var Nd="",Ad=/^https?$/i,kd=["POST","PUT"];function Od(t){return"content-type"==t.toLowerCase()}function Rd(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Pd(t),xd(t)}function Pd(t){t.u||(t.u=!0,Vf(t,"complete"),Vf(t,"error"))}function Dd(t){if(t.b&&(!t.s[1]||4!=Md(t)||2!=t.W()))if(t.l&&4==Md(t))tp(t.za,0,t);else if(Vf(t,"readystatechange"),4==Md(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.B).match(Hp)[1]||null)&&Rl.self&&Rl.self.location&&(i=(r=Rl.self.location.protocol).substr(0,r.length-1)),n=!Ad.test(i?i.toLowerCase():"")),e=n),e)Vf(t,"complete"),Vf(t,"success");else{t.h=6;try{var a=2<Md(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.W()+"]",Pd(t)}}finally{xd(t)}}}function xd(t,e){if(t.a){Ld(t);var n=t.a,r=t.s[0]?Pl:null;t.a=null,t.s=null,e||Vf(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Ld(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Rl.clearTimeout(t.m),t.m=null)}function Md(t){return t.a?t.a.readyState:0}function Fd(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",tf(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Jp(t,e,n))}function Ud(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function jd(t){this.pa=0,this.g=[],this.c=new hp,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Ma=this.R=0,this.Ja=Ud("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Fa=Ud("baseRetryDelayMs",5e3,t),this.Pa=Ud("retryDelaySeedMs",1e4,t),this.Ka=Ud("forwardChannelMaxRetries",2,t),this.ma=Ud("forwardChannelRequestTimeoutMs",2e4,t),this.La=t&&t.h||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new dd(t&&t.concurrentRequestLimit),this.ka=new Id,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.g&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ia=t&&t.f||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Vd(t){var e,n;Bd(t),3==t.v&&(e=t.R++,Jp(n=zp(t.B),"SID",t.J),Jp(n,"RID",e),Jp(n,"TYPE","terminate"),zd(t,n),(e=new Np(t,t.c,e,void 0)).H=2,e.i=$p(zp(n)),n=!1,Rl.navigator&&Rl.navigator.sendBeacon&&(n=Rl.navigator.sendBeacon(e.i.toString(),"")),!n&&Rl.Image&&((new Image).src=e.i,n=!0),n||(e.a=iv(e.g,null),e.a.ba(e.i)),e.u=Wl(),xp(e)),nv(t)}function qd(t){t.a&&(Xd(t),t.a.cancel(),t.a=null)}function Bd(t){qd(t),t.j&&(Rl.clearTimeout(t.j),t.j=null),$d(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Rl.clearTimeout(t.h),t.h=null)}function Wd(t,e){t.g.push(new pd(t.Ma++,e)),3==t.v&&Hd(t)}function Hd(t){yd(t.b)||t.h||(t.h=!0,Qf(t.Ba,t),t.u=0)}function Kd(t,e){var n=e?e.f:t.R++,r=zp(t.B);Jp(r,"SID",t.J),Jp(r,"RID",n),Jp(r,"AID",t.P),zd(t,r),t.i&&t.l&&Fd(r,t.i,t.l),n=new Np(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Gd(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),_d(t.b,n),Rp(n,r,e)}function zd(t,n){t.f&&Vp({},function(t,e){Jp(n,e,t)})}function Gd(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ql(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r){var i="req"+c+"_"||"";try{Vp(t,function(t,e){var n=t;Ll(t)&&(n=Bf(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s)}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Qd(t){t.a||t.j||(t.T=1,Qf(t.Aa,t),t.o=0)}function Yd(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=_p(ql(t.Aa,t),tv(t,t.o)),t.o++,1)}function Xd(t){null!=t.s&&(Rl.clearTimeout(t.s),t.s=null)}function Jd(t){t.a=new Np(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=zp(t.la);Jp(e,"RID","rpc"),Jp(e,"SID",t.J),Jp(e,"CI",t.H?"0":"1"),Jp(e,"AID",t.P),zd(t,e),Jp(e,"TYPE","xmlhttp"),t.i&&t.l&&Fd(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=$p(zp(e)),n.j=null,n.I=!0,Pp(n,t)}function $d(t){null!=t.m&&(Rl.clearTimeout(t.m),t.m=null)}function Zd(t,e){var n,r,i,o=null;if(t.a==e){$d(t),Xd(t),t.a=null;var s=2}else{if(!md(t.b,e))return;o=e.s,bd(t.b,e),s=1}if(t.I=e.N,0!=t.v)if(e.b)1==s?(o=e.j?e.j.length:0,e=Wl()-e.u,n=t.u,Vf(s=pp(),new mp(s)),Hd(t)):Qd(t);else if(3==(n=e.h)||0==n&&0<t.I||(1!=s||(i=e,gd((r=t).b)>=r.b.f-(r.h?1:0)||(r.h?(r.g=i.s.concat(r.g),0):1==r.v||2==r.v||r.u>=(r.Ja?0:r.Ka)||(r.h=_p(ql(r.Ba,r,i),tv(r,r.u)),r.u++,0))))&&(2!=s||!Yd(t)))switch(o&&0<o.length&&(e=t.b,e.c=e.c.concat(o)),n){case 1:ev(t,5);break;case 4:ev(t,10);break;case 3:ev(t,6);break;default:ev(t,2)}}function tv(t,e){var n=t.Fa+Math.floor(Math.random()*t.Pa);return t.f||(n*=2),n*e}function ev(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=ql(t.Wa,t),r||(r=new Kp("//www.google.com/images/cleardot.gif"),Rl.location&&"http"==Rl.location.protocol||Gp(r,"https"),$p(r)),n=r.toString(),r=o,o=new hp,Rl.Image?((i=new Image).onload=Bl(Td,o,i,"TestLoadImage: loaded",!0,r),i.onerror=Bl(Td,o,i,"TestLoadImage: error",!1,r),i.onabort=Bl(Td,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=Bl(Td,o,i,"TestLoadImage: timeout",!1,r),Rl.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):gp(),t.v=0,t.f&&t.f.ra(e),nv(t),Bd(t)}function nv(t){t.v=0,t.I=-1,t.f&&(0==wd(t.b).length&&0==t.g.length||(t.b.c.length=0,Yl(t.g),t.g.length=0),t.f.qa())}function rv(t,e,n){var r,i,o,s,a,u=(s=n)instanceof Kp?zp(s):new Kp(s,void 0);return""!=u.c?(e&&Qp(u,e+"."+u.c),Yp(u,u.h)):(r=(a=Rl.location).protocol,i=e?e+"."+a.hostname:a.hostname,o=+a.port,s=n,a=new Kp(null,void 0),r&&Gp(a,r),i&&Qp(a,i),o&&Yp(a,o),s&&(a.g=s),u=a),t.V&&tf(t.V,function(t,e){Jp(u,e,t)}),e=t.A,n=t.na,e&&n&&Jp(u,e,n),Jp(u,"VER",t.ha),zd(t,u),u}function iv(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cd(t.La)).F=t.C,e}function ov(){}function sv(){if(af&&!(10<=Number(df)))throw Error("Environmental error: no available transport.")}function av(t,e){jf.call(this),this.a=new jd(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Xl(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xl(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new hv(this)}function uv(t){Tp.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function cv(){Sp.call(this),this.status=1}function hv(t){this.a=t}(iu=Cd.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?wp(this.H):wp(Ip),this.a.onreadystatechange=ql(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Rd(this,t)}t=n||"";var i,o=new qp(this.headers);r&&Vp(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Od,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=Rl.FormData&&t instanceof Rl.FormData,0<=zl(kd,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ld(this),0<this.o&&((this.D=(i=this.a,af&&pf(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=ql(this.xa,this)):this.m=tp(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Rd(this,t)}},iu.xa=function(){this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Vf(this,"timeout"),this.abort(8))},iu.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Vf(this,"complete"),Vf(this,"abort"),xd(this))},iu.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),xd(this,!0)),Cd.X.G.call(this)},iu.za=function(){this.j||(this.A||this.l||this.g?Dd(this):this.Sa())},iu.Sa=function(){Dd(this)},iu.W=function(){try{return 2<Md(this)?this.a.status:-1}catch(t){return-1}},iu.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},iu.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Sd(e)}},iu.ua=function(){return this.h},iu.Oa=function(){return"string"==typeof this.f?this.f:String(this.f)},(iu=jd.prototype).ha=8,iu.v=1,iu.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Np(this,this.c,t,void 0),r=this.l;if(this.O&&(r?rf(r=ef(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Gd(this,n,e),Jp(i=zp(this.B),"RID",t),Jp(i,"CVER",22),this.A&&Jp(i,"X-HTTP-Session-Id",this.A),zd(this,i),this.i&&r&&Fd(i,this.i,r),_d(this.b,n),this.Ga&&Jp(i,"TYPE","init"),this.da?(Jp(i,"$req",e),Jp(i,"SID","null"),n.U=!0,Rp(n,i,null)):Rp(n,i,e),this.v=2}}else 3==this.v&&(t?Kd(this,t):0==this.g.length||yd(this.b)||Kd(this))},iu.Aa=function(){var t;this.j=null,Jd(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=_p(ql(this.Ra,this),t))},iu.Ra=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,gp(),qd(this),Jd(this))},iu.Qa=function(){null!=this.m&&(this.m=null,qd(this),Yd(this),gp())},iu.Wa=function(t){t?this.c.info("Successfully pinged google.com"):this.c.info("Failed to ping google.com"),gp()},(iu=ov.prototype).ta=function(){},iu.sa=function(){},iu.ra=function(){},iu.qa=function(){},iu.Ha=function(){},sv.prototype.a=function(t,e){return new av(t,e)},Hl(av,jf),av.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;gp(),t.fa=e,t.V=n||{},t.H=t.S,t.B=rv(t,null,t.fa),Hd(t)},av.prototype.close=function(){Vd(this.a)},av.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,Wd(this.a,e)):this.l?((e={}).__data__=Bf(t),Wd(this.a,e)):Wd(this.a,t)},av.prototype.G=function(){this.a.f=null,delete this.f,Vd(this.a),delete this.a,av.X.G.call(this)},Hl(uv,Tp),Hl(cv,Sp),Hl(hv,ov),hv.prototype.ta=function(){Vf(this.a,"a")},hv.prototype.sa=function(t){Vf(this.a,new uv(t))},hv.prototype.ra=function(t){Vf(this.a,new cv)},hv.prototype.qa=function(){Vf(this.a,"b")},sv.prototype.createWebChannel=sv.prototype.a,av.prototype.send=av.prototype.h,av.prototype.open=av.prototype.g,ft.NO_ERROR=0,ft.TIMEOUT=8,ft.HTTP_ERROR=6,zn.COMPLETE="complete",(Ep.EventType=lt).OPEN="a",lt.CLOSE="b",lt.ERROR="c",lt.MESSAGE="d",jf.prototype.listen=jf.prototype.va,Cd.prototype.listenOnce=Cd.prototype.wa,Cd.prototype.getLastError=Cd.prototype.Oa,Cd.prototype.getLastErrorCode=Cd.prototype.ua,Cd.prototype.getStatus=Cd.prototype.W,Cd.prototype.getResponseJson=Cd.prototype.Na,Cd.prototype.getResponseText=Cd.prototype.$,Cd.prototype.send=Cd.prototype.ba;var lv=ft,fv=zn,pv=Ep,dv=Cd,vv=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},yv=(Object.defineProperty(_v.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),_v.prototype.isEqual=function(t){return t instanceof _v&&t.projectId===this.projectId&&t.database===this.database},_v),gv=(mv.prototype.u=function(){return null!=this.uid},mv.prototype.h=function(){return this.u()?"uid:"+this.uid:"anonymous-user"},mv.prototype.isEqual=function(t){return t.uid===this.uid},mv);function mv(t){this.uid=t}function _v(t,e){this.projectId=t,this.database=e||"(default)"}gv.UNAUTHENTICATED=new gv(null),gv.l=new gv("google-credentials-uid"),gv._=new gv("first-party-uid");var bv=new ks("@firebase/firestore");function wv(){return bv.logLevel}function Ev(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];bv.logLevel<=Is.DEBUG&&(e=n.map(Sv),bv.debug.apply(bv,bo(["Firestore (8.1.0): "+t],e)))}function Iv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];bv.logLevel<=Is.ERROR&&(e=n.map(Sv),bv.error.apply(bv,bo(["Firestore (8.1.0): "+t],e)))}function Tv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];bv.logLevel<=Is.WARN&&(e=n.map(Sv),bv.warn.apply(bv,bo(["Firestore (8.1.0): "+t],e)))}function Sv(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Cv(t){throw void 0===t&&(t="Unexpected state"),Iv(t="FIRESTORE (8.1.0) INTERNAL ASSERTION FAILED: "+t),new Error(t)}function Nv(t){t||Cv()}function Av(t,e){this.user=e,this.type="OAuth",this.T={},this.T.Authorization="Bearer "+t}var kv,Ov={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Rv=(fo(Vv,kv=Error),Vv),Pv=(jv.prototype.getToken=function(){return Promise.resolve(null)},jv.prototype.m=function(){},jv.prototype.A=function(t){(this.I=t)(gv.UNAUTHENTICATED)},jv.prototype.R=function(){this.I=null},jv),Dv=(Uv.prototype.getToken=function(){var e=this,n=this.V,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.V!==n?(Ev("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Nv("string"==typeof t.accessToken),new Av(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},Uv.prototype.m=function(){this.forceRefresh=!0},Uv.prototype.A=function(t){this.I=t,this.g&&t(this.currentUser)},Uv.prototype.R=function(){this.auth&&this.auth.removeAuthTokenListener(this.P),this.P=null,this.I=null},Uv.prototype.p=function(){var t=this.auth&&this.auth.getUid();return Nv(null===t||"string"==typeof t),new gv(t)},Uv),xv=(Object.defineProperty(Fv.prototype,"T",{get:function(){var t={"X-Goog-AuthUser":this.S},e=this.v.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),Fv),Lv=(Mv.prototype.getToken=function(){return Promise.resolve(new xv(this.v,this.S))},Mv.prototype.A=function(t){t(gv._)},Mv.prototype.R=function(){},Mv.prototype.m=function(){},Mv);function Mv(t,e){this.v=t,this.S=e}function Fv(t,e){this.v=t,this.S=e,this.type="FirstParty",this.user=gv._}function Uv(t){var e=this;this.P=null,this.currentUser=gv.UNAUTHENTICATED,this.g=!1,this.V=0,this.I=null,this.forceRefresh=!1,this.P=function(){e.V++,e.currentUser=e.p(),e.g=!0,e.I&&e.I(e.currentUser)},this.V=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.P):(this.P(null),t.get().then(function(t){e.auth=t,e.P&&e.auth.addAuthTokenListener(e.P)},function(){}))}function jv(){this.I=null}function Vv(t,e){var n=this;return(n=kv.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}var qv=(Bv.D=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(var n=0;n<40;n++)e[n]=Math.floor(256*Math.random());return e}(),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Bv);function Bv(){}function Wv(t,e){return t<e?-1:e<t?1:0}function Hv(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function Kv(t){return t+"\0"}var zv,Gv,Qv=(oy.now=function(){return oy.fromMillis(Date.now())},oy.fromDate=function(t){return oy.fromMillis(t.getTime())},oy.fromMillis=function(t){var e=Math.floor(t/1e3);return new oy(e,1e6*(t-1e3*e))},oy.prototype.toDate=function(){return new Date(this.toMillis())},oy.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},oy.prototype.C=function(t){return this.seconds===t.seconds?Wv(this.nanoseconds,t.nanoseconds):Wv(this.seconds,t.seconds)},oy.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},oy.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},oy.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},oy.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},oy),Yv=(iy.N=function(t){return new iy(t)},iy.min=function(){return new iy(new Qv(0,0))},iy.prototype.F=function(t){return this.timestamp.C(t.timestamp)},iy.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},iy.prototype.O=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},iy.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},iy.prototype.M=function(){return this.timestamp},iy),lt=(Object.defineProperty(ry.prototype,"length",{get:function(){return this.k},enumerable:!1,configurable:!0}),ry.prototype.isEqual=function(t){return 0===ry.$(this,t)},ry.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof ry?t.forEach(function(t){e.push(t)}):e.push(t),this.L(e)},ry.prototype.limit=function(){return this.offset+this.length},ry.prototype.B=function(t){return t=void 0===t?1:t,this.L(this.segments,this.offset+t,this.length-t)},ry.prototype.q=function(){return this.L(this.segments,this.offset,this.length-1)},ry.prototype.U=function(){return this.segments[this.offset]},ry.prototype.K=function(){return this.get(this.length-1)},ry.prototype.get=function(t){return this.segments[this.offset+t]},ry.prototype.W=function(){return 0===this.length},ry.prototype.j=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},ry.prototype.G=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},ry.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},ry.prototype.H=function(){return this.segments.slice(this.offset,this.limit())},ry.$=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},ry),Xv=(fo(ny,Gv=lt),ny.prototype.L=function(t,e,n){return new ny(t,e,n)},ny.prototype.J=function(){return this.H().join("/")},ny.prototype.toString=function(){return this.J()},ny.Y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new Rv(Ov.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new ny(n)},ny.X=function(){return new ny([])},ny),Jv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,$v=(fo(ey,zv=lt),ey.prototype.L=function(t,e,n){return new ey(t,e,n)},ey.Z=function(t){return Jv.test(t)},ey.prototype.J=function(){return this.H().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),ey.Z(t)||(t="`"+t+"`"),t}).join(".")},ey.prototype.toString=function(){return this.J()},ey.prototype.tt=function(){return 1===this.length&&"__name__"===this.get(0)},ey.et=function(){return new ey(["__name__"])},ey.nt=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Rv(Ov.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Rv(Ov.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new Rv(Ov.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Rv(Ov.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ey(e)},ey.X=function(){return new ey([])},ey),Zv=(ty.st=function(t){return new ty(Xv.Y(t))},ty.it=function(t){return new ty(Xv.Y(t).B(5))},ty.prototype.rt=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},ty.prototype.isEqual=function(t){return null!==t&&0===Xv.$(this.path,t.path)},ty.prototype.toString=function(){return this.path.toString()},ty.$=function(t,e){return Xv.$(t.path,e.path)},ty.ot=function(t){return t.length%2==0},ty.ct=function(t){return new ty(new Xv(t.slice()))},ty);function ty(t){this.path=t}function ey(){return null!==zv&&zv.apply(this,arguments)||this}function ny(){return null!==Gv&&Gv.apply(this,arguments)||this}function ry(t,e,n){void 0===e?e=0:e>t.length&&Cv(),void 0===n?n=t.length-e:n>t.length-e&&Cv(),this.segments=t,this.offset=e,this.k=n}function iy(t){this.timestamp=t}function oy(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Rv(Ov.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Rv(Ov.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Rv(Ov.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Rv(Ov.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function sy(t){return null==t}function ay(t){return 0===t&&1/t==-1/0}function uy(t){return"number"==typeof t&&Number.isInteger(t)&&!ay(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var cy=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ut=null};function hy(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new cy(t,e,n,r,i,o,s)}function ly(t){var e=t;return null===e.ut&&(t=e.path.J(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return t.field.J()+t.op.toString()+vg(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return t.field.J()+t.dir}).join(","),sy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=H_(e.startAt)),e.endAt&&(t+="|ub:",t+=H_(e.endAt)),e.ut=t),e.ut}function fy(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!lg(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!z_(t.startAt,e.startAt)&&z_(t.endAt,e.endAt)}function py(t){return Zv.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}var dy=(vy.fromBase64String=function(t){return new vy(atob(t))},vy.fromUint8Array=function(t){return new vy(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},vy.prototype.toBase64=function(){return t=this.at,btoa(t);var t},vy.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.at)},vy.prototype.ht=function(){return 2*this.at.length},vy.prototype.F=function(t){return Wv(this.at,t.at)},vy.prototype.isEqual=function(t){return this.at===t.at},vy);function vy(t){this.at=t}function yy(t){this.count=t}dy.lt=new dy("");var gy,my=(_y.prototype.dt=function(t){return new _y(this.target,this.targetId,this._t,t,this.ft,this.lastLimboFreeSnapshotVersion,this.resumeToken)},_y.prototype.wt=function(t,e){return new _y(this.target,this.targetId,this._t,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},_y.prototype.Et=function(t){return new _y(this.target,this.targetId,this._t,this.sequenceNumber,this.ft,t,this.resumeToken)},_y);function _y(t,e,n,r,i,o,s){void 0===i&&(i=Yv.min()),void 0===o&&(o=Yv.min()),void 0===s&&(s=dy.lt),this.target=t,this.targetId=e,this._t=n,this.sequenceNumber=r,this.ft=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function by(t){switch(t){case Ov.OK:return Cv(),0;case Ov.CANCELLED:case Ov.UNKNOWN:case Ov.DEADLINE_EXCEEDED:case Ov.RESOURCE_EXHAUSTED:case Ov.INTERNAL:case Ov.UNAVAILABLE:case Ov.UNAUTHENTICATED:return;case Ov.INVALID_ARGUMENT:case Ov.NOT_FOUND:case Ov.ALREADY_EXISTS:case Ov.PERMISSION_DENIED:case Ov.FAILED_PRECONDITION:case Ov.ABORTED:case Ov.OUT_OF_RANGE:case Ov.UNIMPLEMENTED:case Ov.DATA_LOSS:return 1;default:return Cv(),0}}function wy(t){if(void 0===t)return Iv("GRPC error has no .code"),Ov.UNKNOWN;switch(t){case gy.OK:return Ov.OK;case gy.CANCELLED:return Ov.CANCELLED;case gy.UNKNOWN:return Ov.UNKNOWN;case gy.DEADLINE_EXCEEDED:return Ov.DEADLINE_EXCEEDED;case gy.RESOURCE_EXHAUSTED:return Ov.RESOURCE_EXHAUSTED;case gy.INTERNAL:return Ov.INTERNAL;case gy.UNAVAILABLE:return Ov.UNAVAILABLE;case gy.UNAUTHENTICATED:return Ov.UNAUTHENTICATED;case gy.INVALID_ARGUMENT:return Ov.INVALID_ARGUMENT;case gy.NOT_FOUND:return Ov.NOT_FOUND;case gy.ALREADY_EXISTS:return Ov.ALREADY_EXISTS;case gy.PERMISSION_DENIED:return Ov.PERMISSION_DENIED;case gy.FAILED_PRECONDITION:return Ov.FAILED_PRECONDITION;case gy.ABORTED:return Ov.ABORTED;case gy.OUT_OF_RANGE:return Ov.OUT_OF_RANGE;case gy.UNIMPLEMENTED:return Ov.UNIMPLEMENTED;case gy.DATA_LOSS:return Ov.DATA_LOSS;default:return Cv()}}(ft=gy={})[ft.OK=0]="OK",ft[ft.CANCELLED=1]="CANCELLED",ft[ft.UNKNOWN=2]="UNKNOWN",ft[ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ft[ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ft[ft.NOT_FOUND=5]="NOT_FOUND",ft[ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",ft[ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",ft[ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",ft[ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ft[ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ft[ft.ABORTED=10]="ABORTED",ft[ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",ft[ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",ft[ft.INTERNAL=13]="INTERNAL",ft[ft.UNAVAILABLE=14]="UNAVAILABLE",ft[ft.DATA_LOSS=15]="DATA_LOSS";var Ey=(Ny.prototype.Tt=function(t,e){return new Ny(this.$,this.root.Tt(t,e,this.$).copy(null,null,Ty.It,null,null))},Ny.prototype.remove=function(t){return new Ny(this.$,this.root.remove(t,this.$).copy(null,null,Ty.It,null,null))},Ny.prototype.get=function(t){for(var e=this.root;!e.W();){var n=this.$(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Ny.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.W();){var r=this.$(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Ny.prototype.W=function(){return this.root.W()},Object.defineProperty(Ny.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Ny.prototype.At=function(){return this.root.At()},Ny.prototype.Rt=function(){return this.root.Rt()},Ny.prototype.Pt=function(t){return this.root.Pt(t)},Ny.prototype.forEach=function(n){this.Pt(function(t,e){return n(t,e),!1})},Ny.prototype.toString=function(){var n=[];return this.Pt(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Ny.prototype.gt=function(t){return this.root.gt(t)},Ny.prototype.yt=function(){return new Iy(this.root,null,this.$,!1)},Ny.prototype.Vt=function(t){return new Iy(this.root,t,this.$,!1)},Ny.prototype.vt=function(){return new Iy(this.root,null,this.$,!0)},Ny.prototype.bt=function(t){return new Iy(this.root,t,this.$,!0)},Ny),Iy=(Cy.prototype.Ct=function(){var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.St)for(t=t.left;!t.W();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.W();)this.Dt.push(t),t=t.left;return e},Cy.prototype.Nt=function(){return 0<this.Dt.length},Cy.prototype.xt=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},Cy),Ty=(Sy.prototype.copy=function(t,e,n,r,i){return new Sy(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Sy.prototype.W=function(){return!1},Sy.prototype.Pt=function(t){return this.left.Pt(t)||t(this.key,this.value)||this.right.Pt(t)},Sy.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},Sy.prototype.min=function(){return this.left.W()?this:this.left.min()},Sy.prototype.At=function(){return this.min().key},Sy.prototype.Rt=function(){return this.right.W()?this.key:this.right.Rt()},Sy.prototype.Tt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Tt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Tt(t,e,n))).Ft()},Sy.prototype.Ot=function(){if(this.left.W())return Sy.EMPTY;var t=this;return t.left.Mt()||t.left.left.Mt()||(t=t.kt()),(t=t.copy(null,null,null,t.left.Ot(),null)).Ft()},Sy.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.W()||r.left.Mt()||r.left.left.Mt()||(r=r.kt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.Mt()&&(r=r.$t()),r.right.W()||r.right.Mt()||r.right.left.Mt()||(r=r.Lt()),0===e(t,r.key)){if(r.right.W())return Sy.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.Ot())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Ft()},Sy.prototype.Mt=function(){return this.color},Sy.prototype.Ft=function(){var t=this;return t.right.Mt()&&!t.left.Mt()&&(t=t.Bt()),t.left.Mt()&&t.left.left.Mt()&&(t=t.$t()),t.left.Mt()&&t.right.Mt()&&(t=t.qt()),t},Sy.prototype.kt=function(){var t=this.qt();return t.right.left.Mt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.$t())).Bt()).qt()),t},Sy.prototype.Lt=function(){var t=this.qt();return t.left.left.Mt()&&(t=(t=t.$t()).qt()),t},Sy.prototype.Bt=function(){var t=this.copy(null,null,Sy.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Sy.prototype.$t=function(){var t=this.copy(null,null,Sy.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Sy.prototype.qt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Sy.prototype.Ut=function(){var t=this.Qt();return Math.pow(2,t)<=this.size+1},Sy.prototype.Qt=function(){if(this.Mt()&&this.left.Mt())throw Cv();if(this.right.Mt())throw Cv();var t=this.left.Qt();if(t!==this.right.Qt())throw Cv();return t+(this.Mt()?0:1)},Sy);function Sy(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Sy.RED,this.left=null!=r?r:Sy.EMPTY,this.right=null!=i?i:Sy.EMPTY,this.size=this.left.size+1+this.right.size}function Cy(t,e,n,r){this.St=r,this.Dt=[];for(var i=1;!t.W();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.St?t.left:t.right;else{if(0===i){this.Dt.push(t);break}this.Dt.push(t),t=this.St?t.right:t.left}}function Ny(t,e){this.$=t,this.root=e||Ty.EMPTY}function Ay(){this.size=0}Ty.EMPTY=null,Ty.RED=!0,Ty.It=!1,Ty.EMPTY=(Object.defineProperty(Ay.prototype,"key",{get:function(){throw Cv()},enumerable:!1,configurable:!0}),Object.defineProperty(Ay.prototype,"value",{get:function(){throw Cv()},enumerable:!1,configurable:!0}),Object.defineProperty(Ay.prototype,"color",{get:function(){throw Cv()},enumerable:!1,configurable:!0}),Object.defineProperty(Ay.prototype,"left",{get:function(){throw Cv()},enumerable:!1,configurable:!0}),Object.defineProperty(Ay.prototype,"right",{get:function(){throw Cv()},enumerable:!1,configurable:!0}),Ay.prototype.copy=function(t,e,n,r,i){return this},Ay.prototype.Tt=function(t,e,n){return new Ty(t,e)},Ay.prototype.remove=function(t,e){return this},Ay.prototype.W=function(){return!0},Ay.prototype.Pt=function(t){return!1},Ay.prototype.gt=function(t){return!1},Ay.prototype.At=function(){return null},Ay.prototype.Rt=function(){return null},Ay.prototype.Mt=function(){return!1},Ay.prototype.Ut=function(){return!0},Ay.prototype.Qt=function(){return 0},new Ay);var ky=(Dy.prototype.has=function(t){return null!==this.data.get(t)},Dy.prototype.first=function(){return this.data.At()},Dy.prototype.last=function(){return this.data.Rt()},Object.defineProperty(Dy.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Dy.prototype.indexOf=function(t){return this.data.indexOf(t)},Dy.prototype.forEach=function(n){this.data.Pt(function(t,e){return n(t),!1})},Dy.prototype.Kt=function(t,e){for(var n=this.data.Vt(t[0]);n.Nt();){var r=n.Ct();if(0<=this.$(r.key,t[1]))return;e(r.key)}},Dy.prototype.Wt=function(t,e){for(var n=void 0!==e?this.data.Vt(e):this.data.yt();n.Nt();)if(!t(n.Ct().key))return},Dy.prototype.jt=function(t){return(t=this.data.Vt(t)).Nt()?t.Ct().key:null},Dy.prototype.yt=function(){return new Oy(this.data.yt())},Dy.prototype.Vt=function(t){return new Oy(this.data.Vt(t))},Dy.prototype.add=function(t){return this.copy(this.data.remove(t).Tt(t,!0))},Dy.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Dy.prototype.W=function(){return this.data.W()},Dy.prototype.Gt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Dy.prototype.isEqual=function(t){if(!(t instanceof Dy))return!1;if(this.size!==t.size)return!1;for(var e=this.data.yt(),n=t.data.yt();e.Nt();){var r=e.Ct().key,i=n.Ct().key;if(0!==this.$(r,i))return!1}return!0},Dy.prototype.H=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Dy.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Dy.prototype.copy=function(t){var e=new Dy(this.$);return e.data=t,e},Dy),Oy=(Py.prototype.Ct=function(){return this.zt.Ct().key},Py.prototype.Nt=function(){return this.zt.Nt()},Py),Ry=new Ey(Zv.$);function Py(t){this.zt=t}function Dy(t){this.$=t,this.data=new Ey(this.$)}var xy=new Ey(Zv.$),Ly=new Ey(Zv.$),My=new ky(Zv.$);function Fy(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=My,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Uy=new ky(Wv),jy=(eg.Yt=function(t){return new eg(t.$)},eg.prototype.has=function(t){return null!=this.Ht.get(t)},eg.prototype.get=function(t){return this.Ht.get(t)},eg.prototype.first=function(){return this.Jt.At()},eg.prototype.last=function(){return this.Jt.Rt()},eg.prototype.W=function(){return this.Jt.W()},eg.prototype.indexOf=function(t){return(t=this.Ht.get(t))?this.Jt.indexOf(t):-1},Object.defineProperty(eg.prototype,"size",{get:function(){return this.Jt.size},enumerable:!1,configurable:!0}),eg.prototype.forEach=function(n){this.Jt.Pt(function(t,e){return n(t),!1})},eg.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ht.Tt(t.key,t),e.Jt.Tt(t,null))},eg.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ht.remove(t),this.Jt.remove(e)):this},eg.prototype.isEqual=function(t){if(!(t instanceof eg))return!1;if(this.size!==t.size)return!1;for(var e=this.Jt.yt(),n=t.Jt.yt();e.Nt();){var r=e.Ct().key,i=n.Ct().key;if(!r.isEqual(i))return!1}return!0},eg.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},eg.prototype.copy=function(t,e){var n=new eg;return n.$=this.$,n.Ht=t,n.Jt=e,n},eg),Vy=(tg.prototype.track=function(t){var e=t.doc.key,n=this.Xt.get(e);!n||0!==t.type&&3===n.type?this.Xt=this.Xt.Tt(e,t):3===t.type&&1!==n.type?this.Xt=this.Xt.Tt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Xt=this.Xt.Tt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Xt=this.Xt.remove(e):1===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):Cv()},tg.prototype.Zt=function(){var n=[];return this.Xt.Pt(function(t,e){n.push(e)}),n},tg),qy=(Zy.ie=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new Zy(t,e,jy.Yt(e),i,n,r,!0,!1)},Object.defineProperty(Zy.prototype,"hasPendingWrites",{get:function(){return!this.ee.W()},enumerable:!1,configurable:!0}),Zy.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ne===t.ne&&this.ee.isEqual(t.ee)&&p_(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.te.isEqual(t.te)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},Zy),By=($y.ae=function(t,e){var n=new Map;return n.set(t,Wy.he(t,e)),new $y(Yv.min(),n,Uy,Ry,Fy())},$y),Wy=(Jy.he=function(t,e){return new Jy(dy.lt,e,Fy(),Fy(),Fy())},Jy),Hy=function(t,e,n,r){this.we=t,this.removedTargetIds=e,this.key=n,this.Ee=r},Ky=function(t,e){this.targetId=t,this.Te=e},zy=function(t,e,n,r){void 0===n&&(n=dy.lt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Gy=(Object.defineProperty(Xy.prototype,"le",{get:function(){return this.Re},enumerable:!1,configurable:!0}),Object.defineProperty(Xy.prototype,"resumeToken",{get:function(){return this.Ae},enumerable:!1,configurable:!0}),Object.defineProperty(Xy.prototype,"ge",{get:function(){return 0!==this.Ie},enumerable:!1,configurable:!0}),Object.defineProperty(Xy.prototype,"ye",{get:function(){return this.Pe},enumerable:!1,configurable:!0}),Xy.prototype.Ve=function(t){0<t.ht()&&(this.Pe=!0,this.Ae=t)},Xy.prototype.pe=function(){var n=Fy(),r=Fy(),i=Fy();return this.me.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:Cv()}}),new Wy(this.Ae,this.Re,n,r,i)},Xy.prototype.ve=function(){this.Pe=!1,this.me=rg()},Xy.prototype.be=function(t,e){this.Pe=!0,this.me=this.me.Tt(t,e)},Xy.prototype.Se=function(t){this.Pe=!0,this.me=this.me.remove(t)},Xy.prototype.De=function(){this.Ie+=1},Xy.prototype.Ce=function(){--this.Ie},Xy.prototype.Ne=function(){this.Pe=!0,this.Re=!0},Xy),Qy=(Yy.prototype.$e=function(t){for(var e=0,n=t.we;e<n.length;e++){var r=n[e];t.Ee instanceof Xm?this.Le(r,t.Ee):t.Ee instanceof Jm&&this.Be(r,t.key,t.Ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Be(s,t.key,t.Ee)}},Yy.prototype.qe=function(n){var r=this;this.Ue(n,function(t){var e=r.Qe(t);switch(n.state){case 0:r.Ke(t)&&e.Ve(n.resumeToken);break;case 1:e.Ce(),e.ge||e.ve(),e.Ve(n.resumeToken);break;case 2:e.Ce(),e.ge||r.removeTarget(t);break;case 3:r.Ke(t)&&(e.Ne(),e.Ve(n.resumeToken));break;case 4:r.Ke(t)&&(r.We(t),e.Ve(n.resumeToken));break;default:Cv()}})},Yy.prototype.Ue=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Fe.forEach(function(t,e){r.Ke(e)&&n(e)})},Yy.prototype.je=function(t){var e=t.targetId,n=t.Te.count;(t=this.Ge(e))&&(py(t=t.target)?0===n?(t=new Zv(t.path),this.Be(e,t,new Jm(t,Yv.min()))):Nv(1===n):this.ze(e)!==n&&(this.We(e),this.ke=this.ke.add(e)))},Yy.prototype.He=function(r){var i=this,o=new Map;this.Fe.forEach(function(t,e){var n=i.Ge(e);n&&(t.le&&py(n.target)&&(n=new Zv(n.target.path),null!==i.Oe.get(n)||i.Je(e,n)||i.Be(e,n,new Jm(n,r))),t.ye&&(o.set(e,t.pe()),t.ve()))});var s=Fy();this.Me.forEach(function(t,e){var n=!0;e.Wt(function(t){return!(t=i.Ge(t))||2===t._t||(n=!1)}),n&&(s=s.add(t))});var t=new By(r,o,this.ke,this.Oe,s);return this.Oe=Ry,this.Me=ng(),this.ke=new ky(Wv),t},Yy.prototype.Le=function(t,e){var n;this.Ke(t)&&(n=this.Je(t,e.key)?2:0,this.Qe(t).be(e.key,n),this.Oe=this.Oe.Tt(e.key,e),this.Me=this.Me.Tt(e.key,this.Ye(e.key).add(t)))},Yy.prototype.Be=function(t,e,n){var r;this.Ke(t)&&(r=this.Qe(t),this.Je(t,e)?r.be(e,1):r.Se(e),this.Me=this.Me.Tt(e,this.Ye(e).delete(t)),n&&(this.Oe=this.Oe.Tt(e,n)))},Yy.prototype.removeTarget=function(t){this.Fe.delete(t)},Yy.prototype.ze=function(t){var e=this.Qe(t).pe();return this.xe.Xe(t).size+e._e.size-e.de.size},Yy.prototype.De=function(t){this.Qe(t).De()},Yy.prototype.Qe=function(t){var e=this.Fe.get(t);return e||(e=new Gy,this.Fe.set(t,e)),e},Yy.prototype.Ye=function(t){var e=this.Me.get(t);return e||(e=new ky(Wv),this.Me=this.Me.Tt(t,e)),e},Yy.prototype.Ke=function(t){var e=null!==this.Ge(t);return e||Ev("WatchChangeAggregator","Detected inactive target",t),e},Yy.prototype.Ge=function(t){var e=this.Fe.get(t);return e&&e.ge?null:this.xe.Ze(t)},Yy.prototype.We=function(e){var n=this;this.Fe.set(e,new Gy),this.xe.Xe(e).forEach(function(t){n.Be(e,t,null)})},Yy.prototype.Je=function(t,e){return this.xe.Xe(t).has(e)},Yy);function Yy(t){this.xe=t,this.Fe=new Map,this.Oe=Ry,this.Me=ng(),this.ke=new ky(Wv)}function Xy(){this.Ie=0,this.me=rg(),this.Ae=dy.lt,this.Re=!1,this.Pe=!0}function Jy(t,e,n,r,i){this.resumeToken=t,this.le=e,this._e=n,this.fe=r,this.de=i}function $y(t,e,n,r,i){this.ft=t,this.re=e,this.oe=n,this.ce=r,this.ue=i}function Zy(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.te=n,this.docChanges=r,this.ee=i,this.fromCache=o,this.ne=s,this.se=a}function tg(){this.Xt=new Ey(Zv.$)}function eg(n){this.$=n?function(t,e){return n(t,e)||Zv.$(t.key,e.key)}:function(t,e){return Zv.$(t.key,e.key)},this.Ht=xy,this.Jt=new Ey(this.$)}function ng(){return new Ey(Zv.$)}function rg(){return new Ey(Zv.$)}function ig(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function og(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sg(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ag(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ug(t){return t=yg(t.mapValue.fields.__local_write_time__.timestampValue),new Qv(t.seconds,t.nanos)}var cg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ag(t)?4:10:Cv()}function lg(r,i){var t,e=hg(r);if(e!==hg(i))return!1;switch(e){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return ug(r).isEqual(ug(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=yg(r.timestampValue),t=yg(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return t=i,mg(r.bytesValue).isEqual(mg(t.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,gg((t=r).geoPointValue.latitude)===gg(e.geoPointValue.latitude)&&gg(t.geoPointValue.longitude)===gg(e.geoPointValue.longitude);case 2:return t=i,"integerValue"in(e=r)&&"integerValue"in t?gg(e.integerValue)===gg(t.integerValue):"doubleValue"in e&&"doubleValue"in t&&((e=gg(e.doubleValue))===(t=gg(t.doubleValue))?ay(e)===ay(t):isNaN(e)&&isNaN(t));case 9:return Hv(r.arrayValue.values||[],i.arrayValue.values||[],lg);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(ig(e)!==ig(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!lg(e[t],n[t])))return!1;return!0}();default:return Cv()}}function fg(t,e){return void 0!==(t.values||[]).find(function(t){return lg(t,e)})}function pg(t,e){var n,r,i,o=hg(t),s=hg(e);if(o!==s)return Wv(o,s);switch(o){case 0:return 0;case 1:return Wv(t.booleanValue,e.booleanValue);case 2:return n=e,(r=gg(t.integerValue||t.doubleValue))<(n=gg(n.integerValue||n.doubleValue))?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return dg(t.timestampValue,e.timestampValue);case 4:return dg(ug(t),ug(e));case 5:return Wv(t.stringValue,e.stringValue);case 6:return i=t.bytesValue,s=e.bytesValue,i=mg(i),s=mg(s),i.F(s);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Wv(n[i],r[i]);if(0!==o)return o}return Wv(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return o=t.geoPointValue,r=e.geoPointValue,0!==(n=Wv(gg(o.latitude),gg(r.latitude)))?n:Wv(gg(o.longitude),gg(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=pg(n[i],r[i]);if(o)return o}return Wv(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Wv(r[s],o[s]);if(0!==a)return a;if(0!==(a=pg(n[r[s]],i[o[s]])))return a}return Wv(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Cv()}}function dg(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Wv(t,e);var n=yg(t),t=yg(e);return 0!==(e=Wv(n.seconds,t.seconds))?e:Wv(n.nanos,t.nanos)}function vg(t){return function s(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?"time("+(t=yg(t=i.timestampValue)).seconds+","+t.nanos+")":"stringValue"in i?i.stringValue:"bytesValue"in i?mg(i.bytesValue).toBase64():"referenceValue"in i?(e=i.referenceValue,Zv.it(e).toString()):"geoPointValue"in i?"geo("+(e=i.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in i?function(){for(var t="[",e=!0,n=0,r=i.arrayValue.values||[];n<r.length;n++)e?e=!1:t+=",",t+=s(r[n]);return t+"]"}():"mapValue"in i?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(i.mapValue):Cv();var t,e}(t)}function yg(t){if(Nv(!!t),"string"!=typeof t)return{seconds:gg(t.seconds),nanos:gg(t.nanos)};var e=0,n=cg.exec(t);return Nv(!!n),n[1]&&(n=(n[1]+"000000000").substr(0,9),e=Number(n)),t=new Date(t),{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function gg(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function mg(t){return"string"==typeof t?dy.fromBase64String(t):dy.fromUint8Array(t)}function _g(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.J()}}function bg(t){return t&&"integerValue"in t}function wg(t){return!!t&&"arrayValue"in t}function Eg(t){return t&&"nullValue"in t}function Ig(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Tg(t){return t&&"mapValue"in t}var Sg={asc:"ASCENDING",desc:"DESCENDING"},Cg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ng=function(t,e){this.t=t,this.tn=e};function Ag(t){return{integerValue:""+t}}function kg(t,e){if(t.tn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ay(e)?"-0":e}}function Og(t,e){return uy(e)?Ag(e):kg(t,e)}function Rg(t,e){return t.tn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pg(t,e){return t.tn?e.toBase64():e.toUint8Array()}function Dg(t){return Nv(!!t),Yv.N((t=yg(t),new Qv(t.seconds,t.nanos)))}function xg(t,e){return new Xv(["projects",t.projectId,"databases",t.database]).child("documents").child(e).J()}function Lg(t){return Nv($g(t=Xv.Y(t))),t}function Mg(t,e){return xg(t.t,e.path)}function Fg(t,e){if((e=Lg(e)).get(1)!==t.t.projectId)throw new Rv(Ov.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.t.projectId);if(e.get(3)!==t.t.database)throw new Rv(Ov.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.t.database);return new Zv(qg(e))}function Ug(t,e){return xg(t.t,e)}function jg(t){return 4===(t=Lg(t)).length?Xv.X():qg(t)}function Vg(t){return new Xv(["projects",t.t.projectId,"databases",t.t.database]).J()}function qg(t){return Nv(4<t.length&&"documents"===t.get(4)),t.B(5)}function Bg(t,e,n){return{name:Mg(t,e),fields:n.proto.mapValue.fields}}function Wg(t,e){var n,r,i;if(e instanceof Am)n={update:Bg(t,e.key,e.value)};else if(e instanceof jm)n={delete:Mg(t,e.key)};else if(e instanceof km)n={update:Bg(t,e.key,e.data),updateMask:(i=e.en,r=[],i.fields.forEach(function(t){return r.push(t.J())}),{fieldPaths:r})};else if(e instanceof xm)n={transform:{document:Mg(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof nm)return{fieldPath:t.field.J(),setToServerValue:"REQUEST_TIME"};if(e instanceof rm)return{fieldPath:t.field.J(),appendMissingElements:{values:e.elements}};if(e instanceof um)return{fieldPath:t.field.J(),removeAllFromArray:{values:e.elements}};if(e instanceof fm)return{fieldPath:t.field.J(),increment:e.nn};throw Cv()})}};else{if(!(e instanceof Vm))return Cv();n={verify:Mg(t,e.key)}}return e.rn.sn||(n.currentDocument=void 0!==(i=e.rn).updateTime?{updateTime:Rg(e=t,(t=i.updateTime).M())}:void 0!==i.exists?{exists:i.exists}:Cv()),n}function Hg(i,t){var e=t.currentDocument?void 0!==(o=t.currentDocument).updateTime?bm.updateTime(Dg(o.updateTime)):void 0!==o.exists?bm.exists(o.exists):bm.on():bm.on();if(t.update){t.update.name;var n=Fg(i,t.update.name),r=new qm({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=(o=t.updateMask.fieldPaths||[],new ym(o.map(function(t){return $v.nt(t)})));return new km(n,r,o,e)}return new Am(n,r,e)}if(t.delete){var s=Fg(i,t.delete);return new jm(s,e)}return t.transform?(r=Fg(i,t.transform.document),s=t.transform.fieldTransforms.map(function(t){return e=i,r=null,"setToServerValue"in(t=t)?(Nv("REQUEST_TIME"===t.setToServerValue),r=new nm):"appendMissingElements"in t?(n=t.appendMissingElements.values||[],r=new rm(n)):"removeAllFromArray"in t?(n=t.removeAllFromArray.values||[],r=new um(n)):"increment"in t?r=new fm(e,t.increment):Cv(),t=$v.nt(t.fieldPath),new gm(t,r);var e,n,r}),Nv(!0===e.exists),new xm(r,s)):t.verify?(t=Fg(i,t.verify),new Vm(t,e)):Cv()}function Kg(t,e){return{documents:[Ug(t,e.path)]}}function zg(t,e){var n={structuredQuery:{}},r=e.path;return null!==e.collectionGroup?(n.parent=Ug(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ug(t,r.q()),n.structuredQuery.from=[{collectionId:r.K()}]),(r=function(t){if(0!==t.length)return 1===(t=t.map(function(t){if("=="===t.op){if(Ig(t.value))return{unaryFilter:{field:Xg(t.field),op:"IS_NAN"}};if(Eg(t.value))return{unaryFilter:{field:Xg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Ig(t.value))return{unaryFilter:{field:Xg(t.field),op:"IS_NOT_NAN"}};if(Eg(t.value))return{unaryFilter:{field:Xg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xg(t.field),op:(e=t.op,Cg[e]),value:t.value}};var e})).length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(e.filters))&&(n.structuredQuery.where=r),(r=function(t){if(0!==t.length)return t.map(function(t){return{field:Xg(t.field),direction:(t=t.dir,Sg[t])}})}(e.orderBy))&&(n.structuredQuery.orderBy=r),r=e.limit,null!==(r=t.tn||sy(r)?r:{value:r})&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=Qg(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Qg(e.endAt)),n}function Gg(t){var e=jg(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(Nv(1===r),(s=n.from[0]).allDescendants?i=s.collectionId:e=e.child(s.collectionId));var o=[];n.where&&(o=function t(e){return e?void 0!==e.unaryFilter?[function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Jg(t.unaryFilter.field);return __.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Jg(t.unaryFilter.field);return __.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":return n=Jg(t.unaryFilter.field),__.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":return t=Jg(t.unaryFilter.field),__.create(t,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Cv()}}(e)]:void 0!==e.fieldFilter?[(n=e,__.create(Jg(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Cv()}}(),n.fieldFilter.value))]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(t).reduce(function(t,e){return t.concat(e)}):Cv():[];var n}(n.where)),t=[],n.orderBy&&(t=n.orderBy.map(function(t){return new G_(Jg((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e})),r=null,n.limit&&(r=sy(a="object"==typeof(a=n.limit)?a.value:a)?null:a);var s=null;n.startAt&&(s=Yg(n.startAt));var a=null;return n.endAt&&(a=Yg(n.endAt)),r_(e,i,t,o,r,"F",s,a)}function Qg(t){return{before:t.before,values:t.position}}function Yg(t){var e=!!t.before,t=t.values||[];return new j_(t,e)}function Xg(t){return{fieldPath:t.J()}}function Jg(t){return $v.nt(t.fieldPath)}function $g(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function Zg(t,e){return t instanceof fm?bg(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var tm,em,nm=(fo(om,em=zn=function(){this.cn=void 0}),om),rm=(fo(im,tm=zn),im);function im(t){var e=this;return(e=tm.call(this)||this).elements=t,e}function om(){return null!==em&&em.apply(this,arguments)||this}function sm(t,e){for(var n=vm(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return lg(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var am,um=(fo(cm,am=zn),cm);function cm(t){var e=this;return(e=am.call(this)||this).elements=t,e}function hm(t,e){for(var n=vm(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!lg(t,e)})}(i[r]);return{arrayValue:{values:n}}}var lm,fm=(fo(pm,lm=zn),pm);function pm(t,e){var n=this;return(n=lm.call(this)||this).serializer=t,n.nn=e,n}function dm(t){return gg(t.integerValue||t.doubleValue)}function vm(t){return wg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ym=(mm.prototype.un=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].j(t))return!0;return!1},mm.prototype.isEqual=function(t){return Hv(this.fields,t.fields,function(t,e){return t.isEqual(e)})},mm),gm=function(t,e){this.field=t,this.transform=e};function mm(t){(this.fields=t).sort($v.$)}function _m(t,e){this.version=t,this.transformResults=e}var bm=(wm.on=function(){return new wm},wm.exists=function(t){return new wm(void 0,t)},wm.updateTime=function(t){return new wm(t)},Object.defineProperty(wm.prototype,"sn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),wm.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},wm);function wm(t,e){this.updateTime=t,this.exists=e}function Em(t,e){return void 0!==t.updateTime?e instanceof Xm&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Xm}function Im(t,e,n,r){return t instanceof Am?(o=e,Em((i=t).rn,o)?(o=Sm(o),new Xm(i.key,o,i.value,{an:!0})):o):t instanceof km?function(t,e){if(!Em(t.rn,e))return e;var n=Sm(e),e=Pm(t,e);return new Xm(t.key,n,e,{an:!0})}(t,e):t instanceof xm?function(t,e,n,r){if(!Em(t.rn,e))return e;var i=e,r=function(t,e,n,r){for(var i,o=[],s=0,a=t;s<a.length;s++){var u=a[s],c=u.transform,h=null;n instanceof Xm&&(h=n.field(u.field)),null===h&&r instanceof Xm&&(h=r.field(u.field)),o.push((i=h,u=e,h=void 0,c instanceof nm?(h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}},i&&(h.fields.__previous_value__=i),{mapValue:h}):c instanceof rm?sm(c,i):c instanceof um?hm(c,i):(i=dm(c=Zg(h=c,i))+dm(h.nn),bg(c)&&bg(h.nn)?Ag(i):kg(h.serializer,i))))}return o}(t.fieldTransforms,n,e,r),r=Mm(t,i.data(),r);return new Xm(t.key,i.version,r,{an:!0})}(t,e,r,n):Em(t.rn,e)?new Jm(t.key,Yv.min()):e;var i,o}function Tm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.rn.isEqual(e.rn)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.en.isEqual(e.en):2!==t.type||Hv(t.fieldTransforms,t.fieldTransforms,function(t,e){return t.field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof rm&&e instanceof rm||t instanceof um&&e instanceof um?Hv(t.elements,e.elements,lg):t instanceof fm&&e instanceof fm?lg(t.nn,e.nn):t instanceof nm&&e instanceof nm)}))}function Sm(t){return t instanceof Xm?t.version:Yv.min()}var Cm,Nm,Am=(fo(Rm,Nm=lt=function(){}),Rm),km=(fo(Om,Cm=lt),Om);function Om(t,e,n,r){var i=this;return(i=Cm.call(this)||this).key=t,i.data=e,i.en=n,i.rn=r,i.type=1,i}function Rm(t,e,n){var r=this;return(r=Nm.call(this)||this).key=t,r.value=e,r.rn=n,r.type=0,r}function Pm(t,e){return n=t,e=e instanceof Xm?e.data():qm.empty(),r=new Bm(e),n.en.fields.forEach(function(t){var e;t.W()||(null!==(e=n.data.field(t))?r.set(t,e):r.delete(t))}),r.hn();var n,r}var Dm,xm=(fo(Lm,Dm=lt),Lm);function Lm(t,e){var n=this;return(n=Dm.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.rn=bm.exists(!0),n}function Mm(t,e,n){for(var r=new Bm(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.hn()}var Fm,Um,jm=(fo(zm,Um=lt),zm),Vm=(fo(Km,Fm=lt),Km),qm=(Hm.empty=function(){return new Hm({mapValue:{}})},Hm.prototype.field=function(t){if(t.W())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Tg(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.K()])||null},Hm.prototype.isEqual=function(t){return lg(this.proto,t.proto)},Hm),Bm=(Wm.prototype.set=function(t,e){return this.fn(t,e),this},Wm.prototype.delete=function(t){return this.fn(t,null),this},Wm.prototype.fn=function(t,e){for(var n=this._n,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===hg(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.K(),e)},Wm.prototype.hn=function(){var t=this.dn($v.X(),this._n);return null!=t?new qm(t):this.ln},Wm.prototype.dn=function(r,t){var i=this,o=!1,e=this.ln.field(r),s=Tg(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.dn(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},Wm);function Wm(t){void 0===t&&(t=qm.empty()),this.ln=t,this._n=new Map}function Hm(t){this.proto=t}function Km(t,e){var n=this;return(n=Fm.call(this)||this).key=t,n.rn=e,n.type=4,n}function zm(t,e){var n=this;return(n=Um.call(this)||this).key=t,n.rn=e,n.type=3,n}var Gm,Qm,Ym,Xm=(fo(n_,Ym=ft=function(t,e){this.key=t,this.version=e}),n_.prototype.field=function(t){return this.wn.field(t)},n_.prototype.data=function(){return this.wn},n_.prototype.En=function(){return this.wn.proto},n_.prototype.isEqual=function(t){return t instanceof n_&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.an===t.an&&this.hasCommittedMutations===t.hasCommittedMutations&&this.wn.isEqual(t.wn)},n_.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.wn.toString()+", {hasLocalMutations: "+this.an+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(n_.prototype,"hasPendingWrites",{get:function(){return this.an||this.hasCommittedMutations},enumerable:!1,configurable:!0}),n_),Jm=(fo(e_,Qm=ft),e_.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e_.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e_.prototype.isEqual=function(t){return t instanceof e_&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e_),$m=(fo(t_,Gm=ft),t_.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t_.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),t_.prototype.isEqual=function(t){return t instanceof t_&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},t_),Zm=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Tn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.In=null,this.mn=null,this.startAt,this.endAt};function t_(){return null!==Gm&&Gm.apply(this,arguments)||this}function e_(t,e,n){var r=this;return(r=Qm.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function n_(t,e,n,r){var i=this;return(i=Ym.call(this,t,e)||this).wn=n,i.an=!!r.an,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function r_(t,e,n,r,i,o,s,a){return new Zm(t,e,n,r,i,o,s,a)}function i_(t){return new Zm(t)}function o_(t){return!sy(t.limit)&&"F"===t.limitType}function s_(t){return!sy(t.limit)&&"L"===t.limitType}function a_(t){return 0<t.Tn.length?t.Tn[0].field:null}function u_(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.An())return r.field}return null}function c_(t){return null!==t.collectionGroup}function h_(t){var e=t;if(null===e.In){e.In=[];var n=u_(e),t=a_(e);if(null!==n&&null===t)n.tt()||e.In.push(new G_(n)),e.In.push(new G_($v.et(),"asc"));else{for(var r=!1,i=0,o=e.Tn;i<o.length;i++){var s=o[i];e.In.push(s),s.field.tt()&&(r=!0)}r||(n=0<e.Tn.length?e.Tn[e.Tn.length-1].dir:"asc",e.In.push(new G_($v.et(),n)))}}return e.In}function l_(t){var e=t;if(!e.mn)if("F"===e.limitType)e.mn=hy(e.path,e.collectionGroup,h_(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=h_(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new G_(o.field,s))}var a=e.endAt?new j_(e.endAt.position,!e.endAt.before):null,t=e.startAt?new j_(e.startAt.position,!e.startAt.before):null;e.mn=hy(e.path,e.collectionGroup,n,e.filters,e.limit,a,t)}return e.mn}function f_(t,e,n){return new Zm(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function p_(t,e){return fy(l_(t),l_(e))&&t.limitType===e.limitType}function d_(t){return ly(l_(t))+"|lt:"+t.limitType}function v_(t){return"Query(target="+(n=(e=l_(t)).path.J(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return t.field.J()+" "+t.op+" "+vg(t.value)}).join(", ")+"]"),sy(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return t.field.J()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+H_(e.startAt)),e.endAt&&(n+=", endAt: "+H_(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function y_(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.rt(e.collectionGroup)&&e.path.j(n):Zv.ot(e.path)?e.path.isEqual(n):e.path.G(n))&&function(t){for(var e=0,n=i.Tn;e<n.length;e++){var r=n[e];if(!r.field.tt()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||K_(t.startAt,h_(t),n))&&(!t.endAt||!K_(t.endAt,h_(t),n)));var e,n}function g_(a){return function(t,e){for(var n=!1,r=0,i=h_(a);r<i.length;r++){var o=i[r],s=function(t,e,n){var r,i;switch(n=t.field.tt()?Zv.$(e.key,n.key):(r=t.field,i=n,e=e.field(r),r=i.field(r),null!==e&&null!==r?pg(e,r):Cv()),t.dir){case"asc":return n;case"desc":return-1*n;default:return Cv()}}(o,t,e);if(0!==s)return s;n=n||o.field.tt()}return 0}}var m_,__=(fo(b_,m_=function(){}),b_.create=function(t,e,n){return t.tt()?"in"===e||"not-in"===e?this.Rn(t,e,n):new T_(t,e,n):"array-contains"===e?new L_(t,n):"in"===e?new M_(t,n):"not-in"===e?new F_(t,n):"array-contains-any"===e?new U_(t,n):new b_(t,e,n)},b_.Rn=function(t,e,n){return new("in"===e?S_:C_)(t,n)},b_.prototype.matches=function(t){return t=t.field(this.field),"!="===this.op?null!==t&&this.Pn(pg(t,this.value)):null!==t&&hg(this.value)===hg(t)&&this.Pn(pg(t,this.value))},b_.prototype.Pn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Cv()}},b_.prototype.An=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},b_);function b_(t,e,n){var r=this;return(r=m_.call(this)||this).field=t,r.op=e,r.value=n,r}var w_,E_,I_,T_=(fo(k_,I_=__),k_.prototype.matches=function(t){return t=Zv.$(t.key,this.key),this.Pn(t)},k_),S_=(fo(A_,E_=__),A_.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},A_),C_=(fo(N_,w_=__),N_.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},N_);function N_(t,e){var n=this;return(n=w_.call(this,t,"not-in",e)||this).keys=O_(0,e),n}function A_(t,e){var n=this;return(n=E_.call(this,t,"in",e)||this).keys=O_(0,e),n}function k_(t,e,n){var r=this;return(r=I_.call(this,t,e,n)||this).key=Zv.it(n.referenceValue),r}function O_(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return Zv.it(t.referenceValue)})}var R_,P_,D_,x_,L_=(fo(W_,x_=__),W_.prototype.matches=function(t){return wg(t=t.field(this.field))&&fg(t.arrayValue,this.value)},W_),M_=(fo(B_,D_=__),B_.prototype.matches=function(t){return null!==(t=t.field(this.field))&&fg(this.value.arrayValue,t)},B_),F_=(fo(q_,P_=__),q_.prototype.matches=function(t){return!fg(this.value.arrayValue,{nullValue:"NULL_VALUE"})&&(null!==(t=t.field(this.field))&&!fg(this.value.arrayValue,t))},q_),U_=(fo(V_,R_=__),V_.prototype.matches=function(t){var e=this;return!(!wg(t=t.field(this.field))||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return fg(e.value.arrayValue,t)})},V_),j_=function(t,e){this.position=t,this.before=e};function V_(t,e){return R_.call(this,t,"array-contains-any",e)||this}function q_(t,e){return P_.call(this,t,"not-in",e)||this}function B_(t,e){return D_.call(this,t,"in",e)||this}function W_(t,e){return x_.call(this,t,"array-contains",e)||this}function H_(t){return(t.before?"b":"a")+":"+t.position.map(vg).join(",")}function K_(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.tt()?Zv.$(Zv.it(s.referenceValue),n.key):pg(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function z_(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!lg(t.position[n],e.position[n]))return!1;return!0}var G_=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e},Q_=(rb.prototype.yn=function(t,e,n){for(var r,i,o,s,a,u=n.Vn,c=0;c<this.mutations.length;c++){var h=this.mutations[c];h.key.isEqual(t)&&(r=h,i=e,o=u[c],h=a=s=void 0,e=r instanceof Am?new Xm(r.key,o.version,r.value,{hasCommittedMutations:!0}):r instanceof km?(a=i,h=o,Em((s=r).rn,a)?(a=Pm(s,a),new Xm(s.key,h.version,a,{hasCommittedMutations:!0})):new $m(s.key,h.version)):r instanceof xm?function(t,e,n){if(Nv(null!=n.transformResults),!Em(t.rn,e))return new $m(t.key,n.version);var r=e,e=function(t,e,n){var r=[];Nv(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Xm&&(a=e.field(o.field)),r.push((o=s,s=a,a=n[i],o instanceof rm?sm(o,s):o instanceof um?hm(o,s):a))}return r}(t.fieldTransforms,e,n.transformResults),n=n.version,e=Mm(t,r.data(),e);return new Xm(t.key,n,e,{hasCommittedMutations:!0})}(r,i,o):new Jm(r.key,o.version,{hasCommittedMutations:!0}))}return e},rb.prototype.pn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Im(i,e,e,this.gn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Im(u,e,o,this.gn))}return e},rb.prototype.vn=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.pn(t.key,n.get(t.key));e&&(i=i.Tt(t.key,e))}),i},rb.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Fy())},rb.prototype.isEqual=function(t){return this.batchId===t.batchId&&Hv(this.mutations,t.mutations,Tm)&&Hv(this.baseMutations,t.baseMutations,Tm)},rb),Y_=(nb.from=function(t,e,n){Nv(t.mutations.length===n.length);for(var r=Ly,i=t.mutations,o=0;o<i.length;o++)r=r.Tt(i[o].key,n[o].version);return new nb(t,e,n,r)},nb),X_=(eb.prototype.get=function(t){var e=this.Dn(t);if(void 0!==(e=this.Nn[e]))for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];if(this.Cn(i,t))return o}},eb.prototype.has=function(t){return void 0!==this.get(t)},eb.prototype.set=function(t,e){var n=this.Dn(t),r=this.Nn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.Cn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.Nn[n]=[[t,e]]},eb.prototype.delete=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.Cn(n[r][0],t))return 1===n.length?delete this.Nn[e]:n.splice(r,1),!0;return!1},eb.prototype.forEach=function(s){og(this.Nn,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];s(i,o)}})},eb.prototype.W=function(){return sg(this.Nn)},eb),J_=(tb.prototype.catch=function(t){return this.next(void 0,t)},tb.prototype.next=function(r,i){var o=this;return this.Mn&&Cv(),this.Mn=!0,this.On?this.error?this.kn(i,this.error):this.$n(r,this.result):new tb(function(e,n){o.xn=function(t){o.$n(r,t).next(e,n)},o.Fn=function(t){o.kn(i,t).next(e,n)}})},tb.prototype.Ln=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},tb.prototype.Bn=function(t){try{var e=t();return e instanceof tb?e:tb.resolve(e)}catch(t){return tb.reject(t)}},tb.prototype.$n=function(t,e){return t?this.Bn(function(){return t(e)}):tb.resolve(e)},tb.prototype.kn=function(t,e){return t?this.Bn(function(){return t(e)}):tb.reject(e)},tb.resolve=function(n){return new tb(function(t,e){t(n)})},tb.reject=function(n){return new tb(function(t,e){e(n)})},tb.qn=function(t){return new tb(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},tb.Un=function(t){for(var n=tb.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?tb.resolve(t):e()})}(r[e]);return n},tb.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.qn(i)},tb),zn=(Z_.prototype.Wn=function(t){return(t=this.Qn.get(t))?t.readTime:Yv.min()},Z_.prototype.jn=function(t,e){this.Gn(),this.Qn.set(t.key,{zn:t,readTime:e})},Z_.prototype.Hn=function(t,e){void 0===e&&(e=null),this.Gn(),this.Qn.set(t,{zn:null,readTime:e})},Z_.prototype.Jn=function(t,e){this.Gn();var n=this.Qn.get(e);return void 0!==n?J_.resolve(n.zn):this.Yn(t,e)},Z_.prototype.getEntries=function(t,e){return this.Xn(t,e)},Z_.prototype.apply=function(t){return this.Gn(),this.Kn=!0,this.Zn(t)},Z_.prototype.Gn=function(){},Z_),$_=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})};function Z_(){this.Qn=new X_(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.Kn=!1}function tb(t){var e=this;this.xn=null,this.Fn=null,this.result=void 0,this.error=void 0,this.On=!1,this.Mn=!1,t(function(t){e.On=!0,e.result=t,e.xn&&e.xn(t)},function(t){e.On=!0,e.error=t,e.Fn&&e.Fn(t)})}function eb(t,e){this.Dn=t,this.Cn=e,this.Nn={}}function nb(t,e,n,r){this.batch=t,this.bn=e,this.Vn=n,this.Sn=r}function rb(t,e,n,r){this.batchId=t,this.gn=e,this.baseMutations=n,this.mutations=r}function ib(t){return new Ng(t,!0)}function ob(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var sb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",lt=(pb.prototype.es=function(t){this.ts.push(t)},pb.prototype.ns=function(){this.ts.forEach(function(t){return t()})},pb),ab=(fb.prototype.cs=function(e,n){var r=this;return this.rs.us(e,n).next(function(t){return r.hs(e,n,t)})},fb.prototype.hs=function(t,r,i){return this.ss.Jn(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].pn(r,t);return t})},fb.prototype.ls=function(t,e,i){var o=Ry;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].pn(t,e);o=o.Tt(t,e)}),o},fb.prototype._s=function(e,t){var n=this;return this.ss.getEntries(e,t).next(function(t){return n.fs(e,t)})},fb.prototype.fs=function(e,r){var i=this;return this.rs.ds(e,r).next(function(t){var t=i.ls(e,r,t),n=Ry;return t.forEach(function(t,e){e=e||new Jm(t,Yv.min()),n=n.Tt(t,e)}),n})},fb.prototype.ws=function(t,e,n){return r=e,Zv.ot(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Es(t,e.path):c_(e)?this.Ts(t,e,n):this.Is(t,e,n);var r},fb.prototype.Es=function(t,e){return this.cs(t,new Zv(e)).next(function(t){var e=xy;return t instanceof Xm&&(e=e.Tt(t.key,t)),e})},fb.prototype.Ts=function(n,r,i){var o=this,s=r.collectionGroup,a=xy;return this.os.As(n,s).next(function(t){return J_.forEach(t,function(t){var e=(e=r,t=t.child(s),new Zm(t,null,e.Tn.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.Is(n,e,i).next(function(t){t.forEach(function(t,e){a=a.Tt(t,e)})})}).next(function(){return a})})},fb.prototype.Is=function(e,n,t){var u,c,r=this;return this.ss.ws(e,n,t).next(function(t){return u=t,r.rs.Rs(e,n)}).next(function(t){return c=t,r.Ps(e,c,u).next(function(t){u=t;for(var e=0,n=c;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,s=Im(s,s=u.get(a),s,r.gn);u=s instanceof Xm?u.Tt(a,s):u.remove(a)}})}).next(function(){return u.forEach(function(t,e){y_(n,e)||(u=u.remove(t))}),u})},fb.prototype.Ps=function(t,e,n){for(var r=Fy(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof km&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ss.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Xm&&(c=c.Tt(t,e))}),c})},fb),ub=(lb.Vs=function(t,e){for(var n=Fy(),r=Fy(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new lb(t,e.fromCache,n,r)},lb),cb=(hb.prototype.vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},hb.prototype.next=function(){var t=++this.previousValue;return this.bs&&this.bs(t),t},hb);function hb(t,e){var n=this;this.previousValue=t,e&&(e.ps=function(t){return n.vs(t)},this.bs=function(t){return e.Ss(t)})}function lb(t,e,n,r){this.targetId=t,this.fromCache=e,this.gs=n,this.ys=r}function fb(t,e,n){this.ss=t,this.rs=e,this.os=n}function pb(){this.ts=[]}cb.Ds=-1;var db,vb=(Eb.prototype.reset=function(){this.Ms=0},Eb.prototype.Ls=function(){this.Ms=this.Os},Eb.prototype.Bs=function(t){var e=this;this.cancel();var n=Math.floor(this.Ms+this.qs()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);0<i&&Ev("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ms+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ks=this.Cs.Us(this.Ns,i,function(){return e.$s=Date.now(),t()}),this.Ms*=this.Fs,this.Ms<this.xs&&(this.Ms=this.xs),this.Ms>this.Os&&(this.Ms=this.Os)},Eb.prototype.Qs=function(){null!==this.ks&&(this.ks.Ks(),this.ks=null)},Eb.prototype.cancel=function(){null!==this.ks&&(this.ks.cancel(),this.ks=null)},Eb.prototype.qs=function(){return(Math.random()-.5)*this.Ms},Eb),yb=(wb.delete=function(t){return Ev("SimpleDb","Removing database:",t),Ab(window.indexedDB.deleteDatabase(t)).Ln()},wb.Gs=function(){if("undefined"==typeof indexedDB)return!1;if(wb.zs())return!0;var t=Ro(),e=0<(n=wb.js(t))&&n<10,n=0<(n=wb.Hs(t))&&n<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||e||n)},wb.zs=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Js)},wb.Ys=function(t,e){return t.store(e)},wb.js=function(t){return t=(t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i))?t[1].split("_").slice(0,2).join("."):"-1",Number(t)},wb.Hs=function(t){return t=(t=t.match(/Android ([\d.]+)/i))?t[1].split(".").slice(0,2).join("."):"-1",Number(t)},wb.prototype.Xs=function(o){return vo(this,void 0,void 0,function(){var e,i=this;return yo(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(Ev("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result,e(t)},r.onblocked=function(){n(new mb(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){"VersionError"===(t=t.target.error).name?n(new Rv(Ov.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new mb(o,t))},r.onupgradeneeded=function(t){Ev("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.Ws.createOrUpgrade(e,r.transaction,t.oldVersion,i.version).next(function(){Ev("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.Zs&&(this.db.onversionchange=function(t){return i.Zs(t)}),this.db)]}})})},wb.prototype.ti=function(e){this.Zs=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},wb.prototype.runTransaction=function(a,n,u,c){return vo(this,void 0,void 0,function(){var i,o,s,e;return yo(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,s.Xs(a)];case 2:return s.db=t.sent(),e=Tb.open(s.db,a,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),J_.reject(t)}).Ln(),r={},n.catch(function(){}),[4,e.ei];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,Ev("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),s.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},s=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},wb.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},wb),gb=(Object.defineProperty(bb.prototype,"On",{get:function(){return this.si},enumerable:!1,configurable:!0}),Object.defineProperty(bb.prototype,"ri",{get:function(){return this.ii},enumerable:!1,configurable:!0}),Object.defineProperty(bb.prototype,"cursor",{set:function(t){this.ni=t},enumerable:!1,configurable:!0}),bb.prototype.done=function(){this.si=!0},bb.prototype.oi=function(t){this.ii=t},bb.prototype.delete=function(){return Ab(this.ni.delete())},bb),mb=(fo(_b,db=Rv),_b);function _b(t,e){var n=this;return(n=db.call(this,Ov.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function bb(t){this.ni=t,this.si=!1,this.ii=null}function wb(t,e,n){this.name=t,this.version=e,this.Ws=n,12.2===wb.js(Ro())&&Iv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function Eb(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Cs=t,this.Ns=e,this.xs=n,this.Fs=r,this.Os=i,this.Ms=0,this.ks=null,this.$s=Date.now(),this.reset()}function Ib(t){return"IndexedDbTransactionError"===t.name}var Tb=(Nb.open=function(t,e,n,r){try{return new Nb(e,t.transaction(r,n))}catch(t){throw new mb(e,t)}},Object.defineProperty(Nb.prototype,"ei",{get:function(){return this.ci.promise},enumerable:!1,configurable:!0}),Nb.prototype.abort=function(t){t&&this.ci.reject(t),this.aborted||(Ev("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Nb.prototype.store=function(t){return t=this.transaction.objectStore(t),new Sb(t)},Nb),Sb=(Cb.prototype.put=function(t,e){return Ab(t=void 0!==e?(Ev("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Ev("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},Cb.prototype.add=function(t){return Ev("SimpleDb","ADD",this.store.name,t,t),Ab(this.store.add(t))},Cb.prototype.get=function(e){var n=this;return Ab(this.store.get(e)).next(function(t){return void 0===t&&(t=null),Ev("SimpleDb","GET",n.store.name,e,t),t})},Cb.prototype.delete=function(t){return Ev("SimpleDb","DELETE",this.store.name,t),Ab(this.store.delete(t))},Cb.prototype.count=function(){return Ev("SimpleDb","COUNT",this.store.name),Ab(this.store.count())},Cb.prototype.ui=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.ai(e,function(t,e){n.push(e)}).next(function(){return n})},Cb.prototype.hi=function(t,e){return Ev("SimpleDb","DELETE ALL",this.store.name),(e=this.options(t,e)).li=!1,e=this.cursor(e),this.ai(e,function(t,e,n){return n.delete()})},Cb.prototype._i=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.ai(n,e)},Cb.prototype.fi=function(r){var t=this.cursor({});return new J_(function(n,e){t.onerror=function(t){t=Ob(t.target.error),e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},Cb.prototype.ai=function(t,i){var o=[];return new J_(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new gb(n),(t=i(n.primaryKey,n.value,e))instanceof J_&&(t=t.catch(function(t){return e.done(),J_.reject(t)}),o.push(t)),e.On?r():null===e.ri?n.continue():n.continue(e.ri)):r()}}).next(function(){return J_.qn(o)})},Cb.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},Cb.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.li?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},Cb);function Cb(t){this.store=t}function Nb(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ci=new $_,this.transaction.oncomplete=function(){n.ci.resolve()},this.transaction.onabort=function(){t.error?n.ci.reject(new mb(e,t.error)):n.ci.resolve()},this.transaction.onerror=function(t){t=Ob(t.target.error),n.ci.reject(new mb(e,t))}}function Ab(t){return new J_(function(e,n){t.onsuccess=function(t){t=t.target.result,e(t)},t.onerror=function(t){t=Ob(t.target.error),n(t)}})}var kb=!1;function Ob(t){var e=yb.js(Ro());if(12.2<=e&&e<13&&(e="An internal error was encountered in the Indexed Database server",0<=t.message.indexOf(e))){var n=new Rv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return kb||(kb=!0,setTimeout(function(){throw n},0)),n}return t}function Rb(){return"undefined"!=typeof window?window:null}function Pb(){return"undefined"!=typeof document?document:null}var Db=(Mb.Ii=function(t,e,n,r,i){return(i=new Mb(t,e,Date.now()+n,r,i)).start(n),i},Mb.prototype.start=function(t){var e=this;this.mi=setTimeout(function(){return e.Ai()},t)},Mb.prototype.Ks=function(){return this.Ai()},Mb.prototype.cancel=function(t){null!==this.mi&&(this.clearTimeout(),this.Ti.reject(new Rv(Ov.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Mb.prototype.Ai=function(){var e=this;this.di.Ri(function(){return null!==e.mi?(e.clearTimeout(),e.op().then(function(t){return e.Ti.resolve(t)})):Promise.resolve()})},Mb.prototype.clearTimeout=function(){null!==this.mi&&(this.Ei(this),clearTimeout(this.mi),this.mi=null)},Mb),xb=(Object.defineProperty(Lb.prototype,"Ci",{get:function(){return this.yi},enumerable:!1,configurable:!0}),Lb.prototype.Ri=function(t){this.enqueue(t)},Lb.prototype.Ni=function(t){this.xi(),this.Fi(t)},Lb.prototype.Oi=function(){var t;this.yi||(this.yi=!0,(t=Pb())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Di))},Lb.prototype.enqueue=function(t){return this.xi(),this.yi?new Promise(function(t){}):this.Fi(t)},Lb.prototype.Mi=function(t){var e=this;this.Ri(function(){return e.gi.push(t),e.ki()})},Lb.prototype.ki=function(){return vo(this,void 0,void 0,function(){var e,n=this;return yo(this,function(t){switch(t.label){case 0:if(0===this.gi.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.gi[0]()];case 2:return t.sent(),this.gi.shift(),this.Si.reset(),[3,4];case 3:if(!Ib(e=t.sent()))throw e;return Ev("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.gi.length&&this.Si.Bs(function(){return n.ki()}),t.label=5;case 5:return[2]}})})},Lb.prototype.Fi=function(t){var r=this,e=this.Pi.then(function(){return r.vi=!0,t().catch(function(t){throw r.pi=t,r.vi=!1,Iv("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.vi=!1,t})});return this.Pi=e},Lb.prototype.Us=function(t,e,n){var r=this;return this.xi(),-1<this.bi.indexOf(t)&&(e=0),n=Db.Ii(this,t,e,n,function(t){return r.$i(t)}),this.Vi.push(n),n},Lb.prototype.xi=function(){this.pi&&Cv()},Lb.prototype.Li=function(){},Lb.prototype.Bi=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,e=this.Pi];case 1:t.sent(),t.label=2;case 2:if(e!==this.Pi)return[3,0];t.label=3;case 3:return[2]}})})},Lb.prototype.qi=function(t){for(var e=0,n=this.Vi;e<n.length;e++)if(n[e].Ns===t)return!0;return!1},Lb.prototype.Ui=function(r){var i=this;return this.Bi().then(function(){i.Vi.sort(function(t,e){return t.wi-e.wi});for(var t=0,e=i.Vi;t<e.length;t++){var n=e[t];if(n.Ks(),"all"!==r&&n.Ns===r)break}return i.Bi()})},Lb.prototype.Qi=function(t){this.bi.push(t)},Lb.prototype.$i=function(t){t=this.Vi.indexOf(t),this.Vi.splice(t,1)},Lb);function Lb(){var e=this;this.Pi=Promise.resolve(),this.gi=[],this.yi=!1,this.Vi=[],this.pi=null,this.vi=!1,this.bi=[],this.Si=new vb(this,"async_queue_retry"),this.Di=function(){var t=Pb();t&&Ev("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Si.Qs()};var t=Pb();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Di)}function Mb(t,e,n,r,i){this.di=t,this.Ns=e,this.wi=n,this.op=r,this.Ei=i,this.Ti=new $_,this.then=this.Ti.promise.then.bind(this.Ti.promise),this.Ti.promise.catch(function(t){})}function Fb(t,e){if(Iv("AsyncQueue",e+": "+t),Ib(t))return new Rv(Ov.UNAVAILABLE,e+": "+t);throw t}function Ub(t,e){var n=t[0],r=t[1],t=e[0],e=e[1];return 0===(t=Wv(n,t))?Wv(r,e):t}var jb=(Wb.prototype.ji=function(){return++this.Wi},Wb.prototype.Gi=function(t){var e=[t,this.ji()];this.buffer.size<this.Ki?this.buffer=this.buffer.add(e):Ub(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(Wb.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),Wb),Vb={zi:!1,Hi:0,Ji:0,Yi:0},qb=(Bb.er=function(t){return new Bb(t,Bb.nr,Bb.sr)},Bb);function Bb(t,e,n){this.Xi=t,this.Zi=e,this.tr=n}function Wb(t){this.Ki=t,this.buffer=new ky(Ub),this.Wi=0}qb.nr=10,qb.sr=1e3,qb.ir=new qb(41943040,qb.nr,qb.sr),qb.rr=new qb(-1,0,0);var Hb=(Gb.prototype.start=function(t){-1!==this.cr.params.Xi&&this.hr(t)},Gb.prototype.stop=function(){this.ar&&(this.ar.cancel(),this.ar=null)},Object.defineProperty(Gb.prototype,"lr",{get:function(){return null!==this.ar},enumerable:!1,configurable:!0}),Gb.prototype.hr=function(n){var t=this,e=this.ur?3e5:6e4;Ev("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.ar=this.di.Us("lru_garbage_collection",e,function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:this.ar=null,this.ur=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n._r(this.cr)];case 2:return t.sent(),[3,7];case 3:return Ib(e=t.sent())?(Ev("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,RE(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.hr(n)];case 8:return t.sent(),[2]}})})})},Gb),Kb=(zb.prototype.wr=function(t,e){return this.dr.Er(t).next(function(t){return Math.floor(e/100*t)})},zb.prototype.Tr=function(t,e){var n=this;if(0===e)return J_.resolve(cb.Ds);var r=new jb(e);return this.dr.Ue(t,function(t){return r.Gi(t.sequenceNumber)}).next(function(){return n.dr.Ir(t,function(t){return r.Gi(t)})}).next(function(){return r.maxValue})},zb.prototype.mr=function(t,e,n){return this.dr.mr(t,e,n)},zb.prototype.Ar=function(t,e){return this.dr.Ar(t,e)},zb.prototype.Rr=function(e,n){var r=this;return-1===this.params.Xi?(Ev("LruGarbageCollector","Garbage collection skipped; disabled"),J_.resolve(Vb)):this.Pr(e).next(function(t){return t<r.params.Xi?(Ev("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.Xi),Vb):r.gr(e,n)})},zb.prototype.Pr=function(t){return this.dr.Pr(t)},zb.prototype.gr=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.wr(e,this.params.Zi).next(function(t){return i=t>h.params.tr?(Ev("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.tr+" from "+t),h.params.tr):t,s=Date.now(),h.Tr(e,i)}).next(function(t){return r=t,a=Date.now(),h.mr(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.Ar(e,r)}).next(function(t){return c=Date.now(),wv()<=Is.DEBUG&&Ev("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),J_.resolve({zi:!0,Hi:i,Ji:o,Yi:t})})},zb);function zb(t,e){this.dr=t,this.params=e}function Gb(t,e){this.cr=t,this.di=e,this.ur=!1,this.ar=null}function Qb(t){for(var o="",e=0;e<t.length;e++)0<o.length&&(o=Yb(o)),o=function(t){for(var e=o,n=t.length,r=0;r<n;r++){var i=t.charAt(r);switch(i){case"\0":e+="";break;case"":e+="";break;default:e+=i}}return e}(t.get(e));return Yb(o)}function Yb(t){return t+""}function Xb(t){var e=t.length;if(Nv(2<=e),2===e)return Nv(""===t.charAt(0)&&""===t.charAt(1)),Xv.X();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&Cv(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Cv()}o=s+2}return new Xv(r)}var Jb=function(t){this.yr=t};function $b(t,e){if(e.document)return n=t.yr,r=e.document,i=!!e.hasCommittedMutations,t=Fg(n,r.name),n=Dg(r.updateTime),r=new qm({mapValue:{fields:r.fields}}),new Xm(t,n,r,{hasCommittedMutations:!!i});var n,r;if(e.noDocument){var i=Zv.ct(e.noDocument.path),o=rw(e.noDocument.readTime);return new Jm(i,o,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(o=Zv.ct(e.unknownDocument.path),e=rw(e.unknownDocument.version),new $m(o,e)):Cv()}function Zb(t,e,n){var r=tw(n),n=e.key.path.q().H();if(e instanceof Xm){var i={name:Mg(i=t.yr,(o=e).key),fields:o.En().mapValue.fields,updateTime:Rg(i,o.version.M())},o=e.hasCommittedMutations;return new Uw(null,null,i,o,r,n)}if(e instanceof Jm){var i=e.key.path.H(),o=nw(e.version),s=e.hasCommittedMutations;return new Uw(null,new Mw(i,o),null,s,r,n)}return e instanceof $m?(s=e.key.path.H(),e=nw(e.version),new Uw(new Fw(s,e),null,null,!0,r,n)):Cv()}function tw(t){return[(t=t.M()).seconds,t.nanoseconds]}function ew(t){return t=new Qv(t[0],t[1]),Yv.N(t)}function nw(t){return t=t.M(),new Nw(t.seconds,t.nanoseconds)}function rw(t){return t=new Qv(t.seconds,t.nanoseconds),Yv.N(t)}function iw(e,t){var n=(t.baseMutations||[]).map(function(t){return Hg(e.yr,t)}),r=t.mutations.map(function(t){return Hg(e.yr,t)}),i=Qv.fromMillis(t.localWriteTimeMs);return new Q_(t.batchId,i,n,r)}function ow(t){var e=rw(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?rw(t.lastLimboFreeSnapshotVersion):Yv.min(),r=void 0!==t.query.documents?(Nv(1===(r=t.query).documents.length),l_(i_(jg(r.documents[0])))):l_(Gg(t.query));return new my(r,t.targetId,0,t.lastListenSequenceNumber,e,n,dy.fromBase64String(t.resumeToken))}function sw(t,e){var n=nw(e.ft),r=nw(e.lastLimboFreeSnapshotVersion),i=(py(e.target)?Kg:zg)(t.yr,e.target),t=e.resumeToken.toBase64();return new Vw(e.targetId,ly(e.target),n,t,e.sequenceNumber,r,i)}function aw(t){var e=Gg({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?f_(e,e.limit,"L"):e}var uw=(cw.vr=function(t,e,n,r){return Nv(""!==t.uid),new cw(t.u()?t.uid:"",e,n,r)},cw.prototype.br=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fw(t)._i({index:Dw.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},cw.prototype.Sr=function(d,v,y,g){var m=this,_=pw(d),b=fw(d);return b.add({}).next(function(t){Nv("number"==typeof t);for(var e,n,r,i,o,s=new Q_(t,v,y,g),a=(e=m.serializer,n=m.userId,i=(r=s).baseMutations.map(function(t){return Wg(e.yr,t)}),o=r.mutations.map(function(t){return Wg(e.yr,t)}),new Dw(n,r.batchId,r.gn.toMillis(),i,o)),u=[],c=new ky(function(t,e){return Wv(t.J(),e.J())}),h=0,l=g;h<l.length;h++){var f=l[h],p=xw.key(m.userId,f.key.path,t),c=c.add(f.key.path.q());u.push(b.put(a)),u.push(_.put(p,xw.PLACEHOLDER))}return c.forEach(function(t){u.push(m.os.Dr(d,t))}),d.es(function(){m.pr[t]=s.keys()}),J_.qn(u).next(function(){return s})})},cw.prototype.Cr=function(t,e){var n=this;return fw(t).get(e).next(function(t){return t?(Nv(t.userId===n.userId),iw(n.serializer,t)):null})},cw.prototype.Nr=function(t,e){var n=this;return this.pr[e]?J_.resolve(this.pr[e]):this.Cr(t,e).next(function(t){return t?(t=t.keys(),n.pr[e]=t):null})},cw.prototype.Fr=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return fw(t)._i({index:Dw.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(Nv(e.batchId>=i),o=iw(r.serializer,e)),n.done()}).next(function(){return o})},cw.prototype.Or=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return fw(t)._i({index:Dw.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},cw.prototype.Mr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fw(t).ui(Dw.userMutationsIndex,n).next(function(t){return t.map(function(t){return iw(e.serializer,t)})})},cw.prototype.us=function(o,s){var a=this,t=xw.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),u=[];return pw(o)._i({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=Xb(i);if(r===a.userId&&s.path.isEqual(i))return fw(o).get(t).next(function(t){if(!t)throw Cv();Nv(t.userId===a.userId),u.push(iw(a.serializer,t))});n.done()}).next(function(){return u})},cw.prototype.ds=function(e,t){var s=this,a=new ky(Wv),n=[];return t.forEach(function(o){var t=xw.prefixForPath(s.userId,o.path),t=IDBKeyRange.lowerBound(t),t=pw(e)._i({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=Xb(i);r===s.userId&&o.path.isEqual(i)?a=a.add(t):n.done()});n.push(t)}),J_.qn(n).next(function(){return s.kr(e,a)})},cw.prototype.Rs=function(t,e){var o=this,s=e.path,a=s.length+1,e=xw.prefixForPath(this.userId,s),e=IDBKeyRange.lowerBound(e),u=new ky(Wv);return pw(t)._i({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=Xb(i);r===o.userId&&s.j(i)?i.length===a&&(u=u.add(t)):n.done()}).next(function(){return o.kr(t,u)})},cw.prototype.kr=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(fw(e).get(t).next(function(t){if(null===t)throw Cv();Nv(t.userId===n.userId),r.push(iw(n.serializer,t))}))}),J_.qn(i).next(function(){return r})},cw.prototype.$r=function(e,n){var r=this;return lw(e.Lr,this.userId,n).next(function(t){return e.es(function(){r.Br(n.batchId)}),J_.forEach(t,function(t){return r.Vr.qr(e,t)})})},cw.prototype.Br=function(t){delete this.pr[t]},cw.prototype.Ur=function(e){var i=this;return this.br(e).next(function(t){if(!t)return J_.resolve();var t=IDBKeyRange.lowerBound(xw.prefixForUser(i.userId)),r=[];return pw(e)._i({range:t},function(t,e,n){t[0]===i.userId?(t=Xb(t[1]),r.push(t)):n.done()}).next(function(){Nv(0===r.length)})})},cw.prototype.Qr=function(t,e){return hw(t,this.userId,e)},cw.prototype.Kr=function(t){var e=this;return dw(t).get(this.userId).next(function(t){return t||new Pw(e.userId,-1,"")})},cw);function cw(t,e,n,r){this.userId=t,this.serializer=e,this.os=n,this.Vr=r,this.pr={}}function hw(t,o,e){var s=(e=xw.prefixForPath(o,e.path))[1],e=IDBKeyRange.lowerBound(e),a=!1;return pw(t)._i({range:e,li:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function lw(t,e,n){var r=t.store(Dw.store),i=t.store(xw.store),o=[],t=IDBKeyRange.only(n.batchId),s=0,t=r._i({range:t},function(t,e,n){return s++,n.delete()});o.push(t.next(function(){Nv(1===s)}));for(var a=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=xw.key(e,h.key.path,n.batchId);o.push(i.delete(l)),a.push(h.key)}return J_.qn(o).next(function(){return a})}function fw(t){return fE.Ys(t,Dw.store)}function pw(t){return fE.Ys(t,xw.store)}function dw(t){return fE.Ys(t,Pw.store)}var vw,yw=(_w.prototype.jn=function(t,e,n){return ww(t).put(Ew(e),n)},_w.prototype.Hn=function(t,e){return t=ww(t),e=Ew(e),t.delete(e)},_w.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.Wr(e,t)})},_w.prototype.Jn=function(t,e){var n=this;return ww(t).get(Ew(e)).next(function(t){return n.jr(t)})},_w.prototype.Gr=function(t,e){var n=this;return ww(t).get(Ew(e)).next(function(t){var e=n.jr(t);return e?{zn:e,size:Iw(t)}:null})},_w.prototype.getEntries=function(t,e){var n=this,r=Ry;return this.zr(t,e,function(t,e){e=n.jr(e),r=r.Tt(t,e)}).next(function(){return r})},_w.prototype.Hr=function(t,e){var r=this,i=Ry,o=new Ey(Zv.$);return this.zr(t,e,function(t,e){var n=r.jr(e);o=n?(i=i.Tt(t,n),o.Tt(t,Iw(e))):(i=i.Tt(t,null),o.Tt(t,0))}).next(function(){return{Jr:i,Yr:o}})},_w.prototype.zr=function(t,e,i){if(e.W())return J_.resolve();var n=IDBKeyRange.bound(e.first().path.H(),e.last().path.H()),o=e.yt(),s=o.Ct();return ww(t)._i({range:n},function(t,e,n){for(var r=Zv.ct(t);s&&Zv.$(s,r)<0;)i(s,null),s=o.Ct();s&&s.isEqual(r)&&(i(s,e),s=o.Nt()?o.Ct():null),s?n.oi(s.path.H()):n.done()}).next(function(){for(;s;)i(s,null),s=o.Nt()?o.Ct():null})},_w.prototype.ws=function(t,r,e){var n,i=this,o=xy,s=r.path.length+1,a={};return e.isEqual(Yv.min())?(n=r.path.H(),a.range=IDBKeyRange.lowerBound(n)):(n=r.path.H(),e=tw(e),a.range=IDBKeyRange.lowerBound([n,e],!0),a.index=Uw.collectionReadTimeIndex),ww(t)._i(a,function(t,e,n){t.length===s&&(e=$b(i.serializer,e),r.path.j(e.key.path)?e instanceof Xm&&y_(r,e)&&(o=o.Tt(e.key,e)):n.done())}).next(function(){return o})},_w.prototype.Xr=function(t){return new gw(this,!!t&&t.Zr)},_w.prototype.eo=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},_w.prototype.getMetadata=function(t){return bw(t).get(jw.key).next(function(t){return Nv(!!t),t})},_w.prototype.Wr=function(t,e){return bw(t).put(jw.key,e)},_w.prototype.jr=function(t){return!t||(t=$b(this.serializer,t))instanceof Jm&&t.version.isEqual(Yv.min())?null:t},_w),gw=(fo(mw,vw=zn),mw.prototype.Zn=function(i){var o=this,s=[],a=0,u=new ky(function(t,e){return Wv(t.J(),e.J())});return this.Qn.forEach(function(t,e){var n,r=o.so.get(t);e.zn?(n=Zb(o.no.serializer,e.zn,o.Wn(t)),u=u.add(t.path.q()),e=Iw(n),a+=e-r,s.push(o.no.jn(i,t,n))):(a-=r,o.Zr?(r=Zb(o.no.serializer,new Jm(t,Yv.min()),o.Wn(t)),s.push(o.no.jn(i,t,r))):s.push(o.no.Hn(i,t)))}),u.forEach(function(t){s.push(o.no.os.Dr(i,t))}),s.push(this.no.updateMetadata(i,a)),J_.qn(s)},mw.prototype.Yn=function(t,e){var n=this;return this.no.Gr(t,e).next(function(t){return null===t?(n.so.set(e,0),null):(n.so.set(e,t.size),t.zn)})},mw.prototype.Xn=function(t,e){var n=this;return this.no.Hr(t,e).next(function(t){var e=t.Jr;return t.Yr.forEach(function(t,e){n.so.set(t,e)}),e})},mw);function mw(t,e){var n=this;return(n=vw.call(this)||this).no=t,n.Zr=e,n.so=new X_(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function _w(t,e){this.serializer=t,this.os=e}function bw(t){return fE.Ys(t,jw.store)}function ww(t){return fE.Ys(t,Uw.store)}function Ew(t){return t.path.H()}function Iw(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Cv();e=t.noDocument}return JSON.stringify(e).length}var Tw=(Rw.prototype.Dr=function(t,e){return this.io.add(e),J_.resolve()},Rw.prototype.As=function(t,e){return J_.resolve(this.io.getEntries(e))},Rw),Sw=(Ow.prototype.add=function(t){var e=t.K(),n=t.q(),r=this.index[e]||new ky(Xv.$),t=!r.has(n);return this.index[e]=r.add(n),t},Ow.prototype.has=function(t){var e=t.K(),t=t.q();return(e=this.index[e])&&e.has(t)},Ow.prototype.getEntries=function(t){return(this.index[t]||new ky(Xv.$)).H()},Ow),Cw=(kw.prototype.createOrUpgrade=function(e,n,t,r){var i=this;Nv(t<r&&0<=t&&r<=11);var o=new Tb("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(Aw.store),(s=e).createObjectStore(Pw.store,{keyPath:Pw.keyPath}),s.createObjectStore(Dw.store,{keyPath:Dw.keyPath,autoIncrement:!0}).createIndex(Dw.userMutationsIndex,Dw.userMutationsKeyPath,{unique:!0}),s.createObjectStore(xw.store),Hw(e),e.createObjectStore(Uw.store));var s,a=J_.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(qw.store),s.deleteObjectStore(Vw.store),s.deleteObjectStore(Bw.store),Hw(e)),a=a.next(function(){return t=o.store(Bw.store),e=new Bw(0,0,Yv.min().M(),0),t.put(Bw.key,e);var t,e})),t<4&&4<=r&&(0!==t&&(a=a.next(function(){return n=e,(r=o).store(Dw.store).ui().next(function(t){n.deleteObjectStore(Dw.store),n.createObjectStore(Dw.store,{keyPath:Dw.keyPath,autoIncrement:!0}).createIndex(Dw.userMutationsIndex,Dw.userMutationsKeyPath,{unique:!0});var e=r.store(Dw.store),t=t.map(function(t){return e.put(t)});return J_.qn(t)});var n,r})),a=a.next(function(){e.createObjectStore(Kw.store,{keyPath:Kw.keyPath})})),t<5&&5<=r&&(a=a.next(function(){return i.removeAcknowledgedMutations(o)})),t<6&&6<=r&&(a=a.next(function(){return e.createObjectStore(jw.store),i.addDocumentGlobal(o)})),t<7&&7<=r&&(a=a.next(function(){return i.ensureSequenceNumbers(o)})),t<8&&8<=r&&(a=a.next(function(){return i.createCollectionParentIndex(e,o)})),t<9&&9<=r&&(a=a.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(Uw.store)).createIndex(Uw.readTimeIndex,Uw.readTimeIndexPath,{unique:!1}),t.createIndex(Uw.collectionReadTimeIndex,Uw.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(a=a.next(function(){return i.rewriteCanonicalIds(o)})),t<11&&11<=r&&(a=a.next(function(){e.createObjectStore(zw.store,{keyPath:zw.keyPath}),e.createObjectStore(Gw.store,{keyPath:Gw.keyPath})})),a},kw.prototype.addDocumentGlobal=function(e){var n=0;return e.store(Uw.store)._i(function(t,e){n+=Iw(e)}).next(function(){var t=new jw(n);return e.store(jw.store).put(jw.key,t)})},kw.prototype.removeAcknowledgedMutations=function(n){var r=this,t=n.store(Pw.store),i=n.store(Dw.store);return t.ui().next(function(t){return J_.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.ui(Dw.userMutationsIndex,t).next(function(t){return J_.forEach(t,function(t){return Nv(t.userId===e.userId),t=iw(r.serializer,t),lw(n,e.userId,t).next(function(){})})})})})},kw.prototype.ensureSequenceNumbers=function(t){var o=t.store(qw.store),e=t.store(Uw.store);return t.store(Bw.store).get(Bw.key).next(function(r){var i=[];return e._i(function(t,e){var n=new Xv(t),t=[0,Qb(n)];i.push(o.get(t).next(function(t){return t?J_.resolve():o.put(new qw(0,Qb(n),r.highestListenSequenceNumber))}))}).next(function(){return J_.qn(i)})})},kw.prototype.createCollectionParentIndex=function(t,e){function r(t){if(i.add(t)){var e=t.K(),t=t.q();return n.put({collectionId:e,parent:Qb(t)})}}t.createObjectStore(Ww.store,{keyPath:Ww.keyPath});var n=e.store(Ww.store),i=new Sw;return e.store(Uw.store)._i({li:!0},function(t,e){return r((t=new Xv(t)).q())}).next(function(){return e.store(xw.store)._i({li:!0},function(t,e){t[0];var n=t[1];return r((n=(t[2],Xb(n))).q())})})},kw.prototype.rewriteCanonicalIds=function(t){var n=this,r=t.store(Vw.store);return r._i(function(t,e){return e=ow(e),e=sw(n.serializer,e),r.put(e)})},kw),Nw=function(t,e){this.seconds=t,this.nanoseconds=e},Aw=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function kw(t){this.serializer=t}function Ow(){this.index={}}function Rw(){this.io=new Sw}Aw.store="owner",Aw.key="owner";var Pw=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Pw.store="mutationQueues",Pw.keyPath="userId";var Dw=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Dw.store="mutations",Dw.keyPath="batchId",Dw.userMutationsIndex="userMutationsIndex",Dw.userMutationsKeyPath=["userId","batchId"];var xw=(Lw.prefixForUser=function(t){return[t]},Lw.prefixForPath=function(t,e){return[t,Qb(e)]},Lw.key=function(t,e,n){return[t,Qb(e),n]},Lw);function Lw(){}xw.store="documentMutations",xw.PLACEHOLDER=new xw;var Mw=function(t,e){this.path=t,this.readTime=e},Fw=function(t,e){this.path=t,this.version=e},Uw=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Uw.store="remoteDocuments",Uw.readTimeIndex="readTimeIndex",Uw.readTimeIndexPath="readTime",Uw.collectionReadTimeIndex="collectionReadTimeIndex",Uw.collectionReadTimeIndexPath=["parentPath","readTime"];var jw=function(t){this.byteSize=t};jw.store="remoteDocumentGlobal",jw.key="remoteDocumentGlobalKey";var Vw=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Vw.store="targets",Vw.keyPath="targetId",Vw.queryTargetsIndexName="queryTargetsIndex",Vw.queryTargetsKeyPath=["canonicalId","targetId"];var qw=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};qw.store="targetDocuments",qw.keyPath=["targetId","path"],qw.documentTargetsIndex="documentTargetsIndex",qw.documentTargetsKeyPath=["path","targetId"];var Bw=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Bw.key="targetGlobalKey",Bw.store="targetGlobal";var Ww=function(t,e){this.collectionId=t,this.parent=e};function Hw(t){t.createObjectStore(qw.store,{keyPath:qw.keyPath}).createIndex(qw.documentTargetsIndex,qw.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Vw.store,{keyPath:Vw.keyPath}).createIndex(Vw.queryTargetsIndexName,Vw.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Bw.store)}Ww.store="collectionParents",Ww.keyPath=["collectionId","parent"];var Kw=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Kw.store="clientMetadata",Kw.keyPath="clientId";var zw=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};zw.store="bundles",zw.keyPath="bundleId";var Gw=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Gw.store="namedQueries",Gw.keyPath="name";var Qw=bo(bo(bo(bo([Pw.store,Dw.store,xw.store,Uw.store,Vw.store,Aw.store,Bw.store,qw.store],[Kw.store]),[jw.store]),[Ww.store]),[zw.store,Gw.store]),Yw=(Xw.prototype.ro=function(t,e){return Jw(t).get(e).next(function(t){if(t)return{id:t.bundleId,createTime:rw(t.createTime),version:t.version}})},Xw.prototype.oo=function(t,e){return Jw(t).put({bundleId:e.id,createTime:nw(Dg(e.createTime)),version:e.version})},Xw.prototype.co=function(t,e){return $w(t).get(e).next(function(t){if(t)return{name:t.name,query:aw(t.bundledQuery),readTime:rw(t.readTime)}})},Xw.prototype.uo=function(t,e){return $w(t).put({name:e.name,readTime:nw(Dg(e.readTime)),bundledQuery:e.bundledQuery})},Xw);function Xw(t){this.serializer=t}function Jw(t){return fE.Ys(t,zw.store)}function $w(t){return fE.Ys(t,Gw.store)}var Zw=(tE.prototype.Dr=function(t,e){var n=this;if(this.ao.has(e))return J_.resolve();var r=e.K(),i=e.q();return t.es(function(){n.ao.add(e)}),i={collectionId:r,parent:Qb(i)},eE(t).put(i)},tE.prototype.As=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[Kv(i),""],!1,!0);return eE(t).ui(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(Xb(r.parent))}return o})},tE);function tE(){this.ao=new Sw}function eE(t){return fE.Ys(t,Ww.store)}var nE=(oE.prototype.next=function(){return this.ho+=2,this.ho},oE.lo=function(){return new oE(0)},oE._o=function(){return new oE(-1)},oE),rE=(iE.prototype.fo=function(n){var r=this;return this.wo(n).next(function(t){var e=new nE(t.highestTargetId);return t.highestTargetId=e.next(),r.Eo(n,t).next(function(){return t.highestTargetId})})},iE.prototype.To=function(t){return this.wo(t).next(function(t){return Yv.N(new Qv(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},iE.prototype.Io=function(t){return this.wo(t).next(function(t){return t.highestListenSequenceNumber})},iE.prototype.mo=function(e,n,r){var i=this;return this.wo(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.M()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Eo(e,t)})},iE.prototype.Ao=function(e,n){var r=this;return this.Ro(e,n).next(function(){return r.wo(e).next(function(t){return t.targetCount+=1,r.Po(n,t),r.Eo(e,t)})})},iE.prototype.yo=function(t,e){return this.Ro(t,e)},iE.prototype.Vo=function(e,t){var n=this;return this.po(e,t.targetId).next(function(){return sE(e).delete(t.targetId)}).next(function(){return n.wo(e)}).next(function(t){return Nv(0<t.targetCount),--t.targetCount,n.Eo(e,t)})},iE.prototype.mr=function(n,r,i){var o=this,s=0,a=[];return sE(n)._i(function(t,e){(e=ow(e)).sequenceNumber<=r&&null===i.get(e.targetId)&&(s++,a.push(o.Vo(n,e)))}).next(function(){return J_.qn(a)}).next(function(){return s})},iE.prototype.Ue=function(t,n){return sE(t)._i(function(t,e){e=ow(e),n(e)})},iE.prototype.wo=function(t){return aE(t).get(Bw.key).next(function(t){return Nv(null!==t),t})},iE.prototype.Eo=function(t,e){return aE(t).put(Bw.key,e)},iE.prototype.Ro=function(t,e){return sE(t).put(sw(this.serializer,e))},iE.prototype.Po=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},iE.prototype.vo=function(t){return this.wo(t).next(function(t){return t.targetCount})},iE.prototype.bo=function(t,r){var e=ly(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return sE(t)._i({range:e,index:Vw.queryTargetsIndexName},function(t,e,n){e=ow(e),fy(r,e.target)&&(i=e,n.done())}).next(function(){return i})},iE.prototype.So=function(n,t,r){var i=this,o=[],s=uE(n);return t.forEach(function(t){var e=Qb(t.path);o.push(s.put(new qw(r,e))),o.push(i.Vr.Do(n,r,t))}),J_.qn(o)},iE.prototype.Co=function(n,t,r){var i=this,o=uE(n);return J_.forEach(t,function(t){var e=Qb(t.path);return J_.qn([o.delete([r,e]),i.Vr.No(n,r,t)])})},iE.prototype.po=function(t,e){return t=uE(t),e=IDBKeyRange.bound([e],[e+1],!1,!0),t.delete(e)},iE.prototype.xo=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=uE(t),r=Fy();return t._i({range:e,li:!0},function(t,e,n){t=Xb(t[1]),t=new Zv(t),r=r.add(t)}).next(function(){return r})},iE.prototype.Qr=function(t,e){var e=Qb(e.path),e=IDBKeyRange.bound([e],[Kv(e)],!1,!0),i=0;return uE(t)._i({index:qw.documentTargetsIndex,li:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},iE.prototype.Ze=function(t,e){return sE(t).get(e).next(function(t){return t?ow(t):null})},iE);function iE(t,e){this.Vr=t,this.serializer=e}function oE(t){this.ho=t}function sE(t){return fE.Ys(t,Vw.store)}function aE(t){return fE.Ys(t,Bw.store)}function uE(t){return fE.Ys(t,qw.store)}var cE,hE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lE=(fo(dE,cE=lt),dE),fE=(pE.Ys=function(t,e){if(t instanceof lE)return yb.Ys(t.Lr,e);throw Cv()},pE.prototype.start=function(){var e=this;return this.Ho().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Rv(Ov.FAILED_PRECONDITION,hE);return e.Jo(),e.Yo(),e.Xo(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.jo.Io(t)})}).then(function(t){e.ko=new cb(t,e.Oo)}).then(function(){e.$o=!0}).catch(function(t){return e.Wo&&e.Wo.close(),Promise.reject(t)})},pE.prototype.Zo=function(n){var t=this;return this.Qo=function(e){return vo(t,void 0,void 0,function(){return yo(this,function(t){return this.lr?[2,n(e)]:[2]})})},n(this.isPrimary)},pE.prototype.tc=function(n){var t=this;this.Wo.ti(function(e){return vo(t,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},pE.prototype.ec=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Cs.Ri(function(){return vo(e,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this.lr?[4,this.Ho()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},pE.prototype.Ho=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return yE(e).put(new Kw(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.nc(e).next(function(t){t||(n.isPrimary=!1,n.Cs.Mi(function(){return n.Qo(!1)}))})}).next(function(){return n.sc(e)}).next(function(t){return n.isPrimary&&!t?n.ic(e).next(function(){return!1}):!!t&&n.rc(e).next(function(){return!0})})}).catch(function(t){if(Ib(t))return Ev("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return Ev("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Cs.Mi(function(){return n.Qo(t)}),n.isPrimary=t})},pE.prototype.nc=function(t){var e=this;return vE(t).get(Aw.key).next(function(t){return J_.resolve(e.oc(t))})},pE.prototype.cc=function(t){return yE(t).delete(this.clientId)},pE.prototype.uc=function(){return vo(this,void 0,void 0,function(){var e,n,r,i,o=this;return yo(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.ac(this.Uo,18e5)?[3,2]:(this.Uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=pE.Ys(t,Kw.store);return r.ui().next(function(t){var e=o.hc(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return J_.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.zo)for(n=0,r=e;n<r.length;n++)i=r[n],this.zo.removeItem(this.lc(i.clientId));t.label=2;case 2:return[2]}})})},pE.prototype.Xo=function(){var t=this;this.qo=this.Cs.Us("client_metadata_refresh",4e3,function(){return t.Ho().then(function(){return t.uc()}).then(function(){return t.Xo()})})},pE.prototype.oc=function(t){return!!t&&t.ownerId===this.clientId},pE.prototype.sc=function(e){var r=this;return this.Mo?J_.resolve(!0):vE(e).get(Aw.key).next(function(t){if(null!==t&&r.ac(t.leaseTimestampMs,5e3)&&!r._c(t.ownerId)){if(r.oc(t)&&r.networkEnabled)return!0;if(!r.oc(t)){if(!t.allowTabSynchronization)throw new Rv(Ov.FAILED_PRECONDITION,hE);return!1}}return!(!r.networkEnabled||!r.inForeground)||yE(e).ui().next(function(t){return void 0===r.hc(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&Ev("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},pE.prototype.fc=function(){return vo(this,void 0,void 0,function(){var n=this;return yo(this,function(t){switch(t.label){case 0:return this.$o=!1,this.dc(),this.qo&&(this.qo.cancel(),this.qo=null),this.wc(),this.Ec(),[4,this.Wo.runTransaction("shutdown","readwrite",[Aw.store,Kw.store],function(t){var e=new lE(t,cb.Ds);return n.ic(e).next(function(){return n.cc(e)})})];case 1:return t.sent(),this.Wo.close(),this.Tc(),[2]}})})},pE.prototype.hc=function(t,e){var n=this;return t.filter(function(t){return n.ac(t.updateTimeMs,e)&&!n._c(t.clientId)})},pE.prototype.Ic=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return yE(t).ui().next(function(t){return e.hc(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(pE.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),pE.prototype.mc=function(t){return uw.vr(t,this.serializer,this.os,this.Vr)},pE.prototype.Ac=function(){return this.jo},pE.prototype.Rc=function(){return this.ss},pE.prototype.Pc=function(){return this.os},pE.prototype.gc=function(){return this.Go},pE.prototype.runTransaction=function(e,n,r){var i=this;Ev("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.Wo.runTransaction(e,t,Qw,function(t){return o=new lE(t,i.ko?i.ko.next():cb.Ds),"readwrite-primary"===n?i.nc(o).next(function(t){return!!t||i.sc(o)}).next(function(t){if(!t)throw Iv("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Cs.Mi(function(){return i.Qo(!1)}),new Rv(Ov.FAILED_PRECONDITION,sb);return r(o)}).next(function(t){return i.rc(o).next(function(){return t})}):i.yc(o).next(function(){return r(o)})}).then(function(t){return o.ns(),t})},pE.prototype.yc=function(t){var e=this;return vE(t).get(Aw.key).next(function(t){if(null!==t&&e.ac(t.leaseTimestampMs,5e3)&&!e._c(t.ownerId)&&!e.oc(t)&&!(e.Mo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Rv(Ov.FAILED_PRECONDITION,hE)})},pE.prototype.rc=function(t){var e=new Aw(this.clientId,this.allowTabSynchronization,Date.now());return vE(t).put(Aw.key,e)},pE.Gs=function(){return yb.Gs()},pE.prototype.ic=function(t){var e=this,n=vE(t);return n.get(Aw.key).next(function(t){return e.oc(t)?(Ev("IndexedDbPersistence","Releasing primary lease."),n.delete(Aw.key)):J_.resolve()})},pE.prototype.ac=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Iv("Detected an update time that is in the future: "+t+" > "+n),1))},pE.prototype.Jo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Bo=function(){t.Cs.Ri(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ho()})},this.document.addEventListener("visibilitychange",this.Bo),this.inForeground="visible"===this.document.visibilityState)},pE.prototype.wc=function(){this.Bo&&(this.document.removeEventListener("visibilitychange",this.Bo),this.Bo=null)},pE.prototype.Yo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Lo=function(){e.dc(),e.Cs.Ri(function(){return e.fc()})},this.window.addEventListener("unload",this.Lo))},pE.prototype.Ec=function(){this.Lo&&(this.window.removeEventListener("unload",this.Lo),this.Lo=null)},pE.prototype._c=function(t){try{var e=null!==(null===(e=this.zo)||void 0===e?void 0:e.getItem(this.lc(t)));return Ev("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Iv("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},pE.prototype.dc=function(){if(this.zo)try{this.zo.setItem(this.lc(this.clientId),String(Date.now()))}catch(t){Iv("Failed to set zombie client id.",t)}},pE.prototype.Tc=function(){if(this.zo)try{this.zo.removeItem(this.lc(this.clientId))}catch(t){}},pE.prototype.lc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},pE);function pE(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Cs=i,this.window=o,this.document=s,this.Oo=u,this.Mo=c,this.ko=null,this.$o=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Lo=null,this.inForeground=!1,this.Bo=null,this.qo=null,this.Uo=Number.NEGATIVE_INFINITY,this.Qo=function(t){return Promise.resolve()},!pE.Gs())throw new Rv(Ov.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Vr=new gE(this,r),this.Ko=e+"main",this.serializer=new Jb(a),this.Wo=new yb(this.Ko,11,new Cw(this.serializer)),this.jo=new rE(this.Vr,this.serializer),this.os=new Zw,this.ss=(e=this.serializer,a=this.os,new yw(e,a)),this.Go=new Yw(this.serializer),this.window&&this.window.localStorage?this.zo=this.window.localStorage:(this.zo=null,!1===c&&Iv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function dE(t,e){var n=this;return(n=cE.call(this)||this).Lr=t,n.Fo=e,n}function vE(t){return fE.Ys(t,Aw.store)}function yE(t){return fE.Ys(t,Kw.store)}var gE=(mE.prototype.Er=function(t){var n=this.Vc(t);return this.db.Ac().vo(t).next(function(e){return n.next(function(t){return e+t})})},mE.prototype.Vc=function(t){var e=0;return this.Ir(t,function(t){e++}).next(function(){return e})},mE.prototype.Ue=function(t,e){return this.db.Ac().Ue(t,e)},mE.prototype.Ir=function(t,n){return this.vc(t,function(t,e){return n(e)})},mE.prototype.Do=function(t,e,n){return _E(t,n)},mE.prototype.No=function(t,e,n){return _E(t,n)},mE.prototype.mr=function(t,e,n){return this.db.Ac().mr(t,e,n)},mE.prototype.qr=_E,mE.prototype.bc=function(t,e){return r=e,i=!1,dw(n=t).fi(function(t){return hw(n,t,r).next(function(t){return t&&(i=!0),J_.resolve(!t)})}).next(function(){return i});var n,r,i},mE.prototype.Ar=function(n,r){var i=this,o=this.db.Rc().Xr(),s=[],a=0;return this.vc(n,function(e,t){t<=r&&(t=i.bc(n,e).next(function(t){if(!t)return a++,o.Jn(n,e).next(function(){return o.Hn(e),uE(n).delete([0,Qb(e.path)])})}),s.push(t))}).next(function(){return J_.qn(s)}).next(function(){return o.apply(n)}).next(function(){return a})},mE.prototype.removeTarget=function(t,e){return e=e.dt(t.Fo),this.db.Ac().yo(t,e)},mE.prototype.Sc=_E,mE.prototype.vc=function(t,r){var i,t=uE(t),o=cb.Ds;return t._i({index:qw.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==cb.Ds&&r(new Zv(Xb(i)),o),o=e,i=t):o=cb.Ds}).next(function(){o!==cb.Ds&&r(new Zv(Xb(i)),o)})},mE.prototype.Pr=function(t){return this.db.Rc().eo(t)},mE);function mE(t,e){this.db=t,this.cr=new Kb(this,e)}function _E(t,e){return uE(t).put((t=t.Fo,new qw(0,Qb(e.path),t)))}function bE(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var wE=(EE.prototype._r=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Rr(t,n.Cc)})},EE);function EE(t,e,n,r){this.persistence=t,this.Dc=e,this.serializer=r,this.Cc=new Ey(Wv),this.Nc=new X_(ly,fy),this.xc=Yv.min(),this.rs=t.mc(n),this.Fc=t.Rc(),this.jo=t.Ac(),this.Oc=new ab(this.Fc,this.rs,this.persistence.Pc()),this.Go=t.gc(),this.Dc.Mc(this.Oc)}function IE(t,e,n,r){return new wE(t,e,n,r)}function TE(i,o){return vo(this,void 0,void 0,function(){var e,n,m,r;return yo(this,function(t){switch(t.label){case 0:return n=(e=i).rs,m=e.Oc,[4,e.persistence.runTransaction("Handle user change","readonly",function(y){var g;return e.rs.Mr(y).next(function(t){return g=t,n=e.persistence.mc(o),m=new ab(e.Fc,n,e.persistence.Pc()),n.Mr(y)}).next(function(t){for(var e=[],n=[],r=Fy(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m._s(y,r).next(function(t){return{kc:t,$c:e,Lc:n}})})})];case 1:return r=t.sent(),[2,(e.rs=n,e.Oc=m,e.Dc.Mc(e.Oc),r)]}})})}function SE(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.jo.To(t)})}function CE(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.jo.bo(e,r).next(function(t){return t?(n=t,J_.resolve(n)):i.jo.fo(e).next(function(t){return n=new my(r,t,0,e.Fo),i.jo.Ao(e,n).next(function(){return n})})})}).then(function(t){var e=i.Cc.get(t.targetId);return(null===e||0<t.ft.F(e.ft))&&(i.Cc=i.Cc.Tt(t.targetId,t),i.Nc.set(r,t.targetId)),t})}function NE(i,o,s){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:n=(e=i).Cc.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.Vr.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!Ib(r=t.sent()))throw r;return Ev("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.Cc=e.Cc.remove(o),e.Nc.delete(n.target),[2]}})})}function AE(t,o,s){var a=t,u=Yv.min(),c=Fy();return a.persistence.runTransaction("Execute query","readonly",function(e){return t=a,n=e,r=l_(o),(void 0!==(t=(i=t).Nc.get(r))?J_.resolve(i.Cc.get(t)):i.jo.bo(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,a.jo.xo(e,t.targetId).next(function(t){c=t})}).next(function(){return a.Dc.ws(e,o,s?u:Yv.min(),s?c:Fy())}).next(function(t){return{documents:t,Bc:c}});var t,n,r,i})}function kE(t,e){var n=t,r=n.jo;return(t=n.Cc.get(e))?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Ze(t,e).next(function(t){return t?t.target:null})})}function OE(t){var s=t;return s.persistence.runTransaction("Get new document changes","readonly",function(t){return e=s.Fc,n=t,t=s.xc,r=e,i=Ry,o=tw(t),t=ww(n),n=IDBKeyRange.lowerBound(o,!0),t._i({index:Uw.readTimeIndex,range:n},function(t,e){var n=$b(r.serializer,e);i=i.Tt(n.key,n),o=e.readTime}).next(function(){return{qc:i,readTime:ew(o)}});var e,n,r,i,o}).then(function(t){var e=t.qc,t=t.readTime;return s.xc=t,e})}function RE(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){if(e.code!==Ov.FAILED_PRECONDITION||e.message!==sb)throw e;return Ev("LocalStore","Unexpectedly lost primary lease"),[2]})})}function PE(t,e,n,r,i){var o=this;this.Cu=t,this.Nu=e,this.di=n,this.xu={},this.Fu=[],this.Ou=new Map,this.Mu=new Set,this.ku=[],this.$u=i,this.$u.Lu(function(t){n.Ri(function(){return vo(o,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return ZE(this)?(Ev("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return(e=n).Mu.add(4),[4,zE(e)];case 1:return t.sent(),e.Bu.set("Unknown"),e.Mu.delete(4),[4,KE(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Bu=new jE(n,r)}var DE,xE,LE,ft=(HE.prototype.Gc=function(){return 1===this.state||2===this.state||4===this.state},HE.prototype.zc=function(){return 2===this.state},HE.prototype.start=function(){3!==this.state?this.auth():this.Hc()},HE.prototype.stop=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this.Gc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},HE.prototype.Jc=function(){this.state=0,this.Si.reset()},HE.prototype.Yc=function(){var t=this;this.zc()&&null===this.jc&&(this.jc=this.Cs.Us(this.Uc,6e4,function(){return t.Xc()}))},HE.prototype.Zc=function(t){this.tu(),this.stream.send(t)},HE.prototype.Xc=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){return this.zc()?[2,this.close(0)]:[2]})})},HE.prototype.tu=function(){this.jc&&(this.jc.cancel(),this.jc=null)},HE.prototype.close=function(e,n){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this.tu(),this.Si.cancel(),this.Wc++,3!==e?this.Si.reset():n&&n.code===Ov.RESOURCE_EXHAUSTED?(Iv(n.toString()),Iv("Using maximum backoff delay to prevent overloading the backend."),this.Si.Ls()):n&&n.code===Ov.UNAUTHENTICATED&&this.Kc.m(),null!==this.stream&&(this.eu(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.nu(n)];case 1:return t.sent(),[2]}})})},HE.prototype.eu=function(){},HE.prototype.auth=function(){var n=this;this.state=1;var t=this.su(this.Wc),e=this.Wc;this.Kc.getToken().then(function(t){n.Wc===e&&n.iu(t)},function(e){t(function(){var t=new Rv(Ov.UNKNOWN,"Fetching auth token failed: "+e.message);return n.ru(t)})})},HE.prototype.iu=function(t){var e=this,n=this.su(this.Wc);this.stream=this.ou(t),this.stream.cu(function(){n(function(){return e.state=2,e.listener.cu()})}),this.stream.nu(function(t){n(function(){return e.ru(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},HE.prototype.Hc=function(){var t=this;this.state=4,this.Si.Bs(function(){return vo(t,void 0,void 0,function(){return yo(this,function(t){return this.state=0,this.start(),[2]})})})},HE.prototype.ru=function(t){return Ev("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},HE.prototype.su=function(e){var n=this;return function(t){n.Cs.Ri(function(){return n.Wc===e?t():(Ev("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},HE),ME=(fo(WE,LE=ft),WE.prototype.ou=function(t){return this.Qc.uu("Listen",t)},WE.prototype.onMessage=function(t){this.Si.reset();var e,n=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:Cv(),r=e.targetChange.targetIds||[],i=(o=e.targetChange.resumeToken,t.tn?(Nv(void 0===o||"string"==typeof o),dy.fromBase64String(o||"")):(Nv(void 0===o||o instanceof Uint8Array),dy.fromUint8Array(o||new Uint8Array))),o=e.targetChange.cause,s=o&&(o=void 0===(s=o).code?Ov.UNKNOWN:wy(s.code),new Rv(o,s.message||"")),r=new zy(n,r,i,s||null)}else if("documentChange"in e){e.documentChange,(u=e.documentChange).document,u.document.name,u.document.updateTime;var i=Fg(t,u.document.name),a=Dg(u.document.updateTime),s=new qm({mapValue:{fields:u.document.fields}}),a=new Xm(i,a,s,{}),s=u.targetIds||[],u=u.removedTargetIds||[];r=new Hy(s,u,a.key,a)}else if("documentDelete"in e){e.documentDelete,(u=e.documentDelete).document;var a=Fg(t,u.document),c=u.readTime?Dg(u.readTime):Yv.min(),c=new Jm(a,c),u=u.removedTargetIds||[];r=new Hy([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove,(c=e.documentRemove).document;var h=Fg(t,c.document),c=c.removedTargetIds||[];r=new Hy([],c,h,null)}else{if(!("filter"in e))return Cv();e.filter,(h=e.filter).targetId,e=new yy(e=h.count||0),h=h.targetId,r=new Ky(h,e)}return r}(this.serializer,t),t=!("targetChange"in(e=t))||(e=e.targetChange).targetIds&&e.targetIds.length||!e.readTime?Yv.min():Dg(e.readTime);return this.listener.au(n,t)},WE.prototype.hu=function(t){var e,n,r,i,o={};o.database=Vg(this.serializer),o.addTarget=(e=this.serializer,(r=py(r=(n=t).target)?{documents:Kg(e,r)}:{query:zg(e,r)}).targetId=n.targetId,0<n.resumeToken.ht()?r.resumeToken=Pg(e,n.resumeToken):0<n.ft.F(Yv.min())&&(r.readTime=Rg(e,n.ft.M())),r),(t=(this.serializer,i=t,null==(t=function(){switch(i._t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Cv()}}())?null:{"goog-listen-tags":t}))&&(o.labels=t),this.Zc(o)},WE.prototype.lu=function(t){var e={};e.database=Vg(this.serializer),e.removeTarget=t,this.Zc(e)},WE),FE=(fo(BE,xE=ft),Object.defineProperty(BE.prototype,"fu",{get:function(){return this._u},enumerable:!1,configurable:!0}),BE.prototype.start=function(){this._u=!1,this.lastStreamToken=void 0,xE.prototype.start.call(this)},BE.prototype.eu=function(){this._u&&this.du([])},BE.prototype.ou=function(t){return this.Qc.uu("Write",t)},BE.prototype.onMessage=function(t){if(Nv(!!t.streamToken),this.lastStreamToken=t.streamToken,this._u){this.Si.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Nv(void 0!==r),n.map(function(t){return n=r,(t=(e=t).updateTime?Dg(e.updateTime):Dg(n)).isEqual(Yv.min())&&(t=Dg(n)),n=null,e.transformResults&&0<e.transformResults.length&&(n=e.transformResults),new _m(t,n);var e,n})):[]),n=Dg(t.commitTime);return this.listener.wu(n,e)}var r;return Nv(!t.writeResults||0===t.writeResults.length),this._u=!0,this.listener.Eu()},BE.prototype.Tu=function(){var t={};t.database=Vg(this.serializer),this.Zc(t)},BE.prototype.du=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return Wg(e.serializer,t)})};this.Zc(t)},BE),UE=(fo(qE,DE=function(){}),qE.prototype.mu=function(){if(this.Iu)throw new Rv(Ov.FAILED_PRECONDITION,"The client has already been terminated.")},qE.prototype.Au=function(e,n,r){var i=this;return this.mu(),this.credentials.getToken().then(function(t){return i.Qc.Au(e,n,r,t)}).catch(function(t){throw t.code===Ov.UNAUTHENTICATED&&i.credentials.m(),t})},qE.prototype.Ru=function(e,n,r){var i=this;return this.mu(),this.credentials.getToken().then(function(t){return i.Qc.Ru(e,n,r,t)}).catch(function(t){throw t.code===Ov.UNAUTHENTICATED&&i.credentials.m(),t})},qE.prototype.terminate=function(){this.Iu=!1},qE),jE=(VE.prototype.pu=function(){var t=this;0===this.gu&&(this.vu("Unknown"),this.yu=this.di.Us("online_state_timeout",1e4,function(){return t.yu=null,t.bu("Backend didn't respond within 10 seconds."),t.vu("Offline"),Promise.resolve()}))},VE.prototype.Su=function(t){"Online"===this.state?this.vu("Unknown"):(this.gu++,1<=this.gu&&(this.Du(),this.bu("Connection failed 1 times. Most recent error: "+t.toString()),this.vu("Offline")))},VE.prototype.set=function(t){this.Du(),this.gu=0,"Online"===t&&(this.Vu=!1),this.vu(t)},VE.prototype.vu=function(t){t!==this.state&&(this.state=t,this.Pu(t))},VE.prototype.bu=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.",this.Vu?(Iv(t),this.Vu=!1):Ev("OnlineStateTracker",t)},VE.prototype.Du=function(){null!==this.yu&&(this.yu.cancel(),this.yu=null)},VE);function VE(t,e){this.di=t,this.Pu=e,this.state="Unknown",this.gu=0,this.yu=null,this.Vu=!0}function qE(t,e,n){var r=this;return(r=DE.call(this)||this).credentials=t,r.Qc=e,r.serializer=n,r.Iu=!1,r}function BE(t,e,n,r,i){var o=this;return(o=xE.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o._u=!1,o}function WE(t,e,n,r,i){var o=this;return(o=LE.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function HE(t,e,n,r,i,o){this.Cs=t,this.Uc=n,this.Qc=r,this.Kc=i,this.listener=o,this.state=0,this.Wc=0,this.jc=null,this.stream=null,this.Si=new vb(t,e)}function KE(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:if(!ZE(r))return[3,4];e=0,n=r.ku,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function zE(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:e=0,n=r.ku,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function GE(t,e){t.Ou.has(e.targetId)||(t.Ou.set(e.targetId,e),$E(t)?JE(t):aI(t).zc()&&YE(t,e))}function QE(t,e){var n=t,t=aI(n);n.Ou.delete(e),t.zc()&&XE(n,e),0===n.Ou.size&&(t.zc()?t.Yc():ZE(n)&&n.Bu.set("Unknown"))}function YE(t,e){t.qu.De(e.targetId),aI(t).hu(e)}function XE(t,e){t.qu.De(e),aI(t).lu(e)}function JE(e){e.qu=new Qy({Xe:function(t){return e.xu.Xe(t)},Ze:function(t){return e.Ou.get(t)||null}}),aI(e).start(),e.Bu.pu()}function $E(t){return ZE(t)&&!aI(t).Gc()&&0<t.Ou.size}function ZE(t){return 0===t.Mu.size}function tI(t){t.qu=void 0}function eI(n,r,i){return vo(this,void 0,void 0,function(){var e=this;return yo(this,function(t){switch(t.label){case 0:if(!Ib(r))throw r;return n.Mu.add(1),[4,zE(n)];case 1:return t.sent(),n.Bu.set("Offline"),i=i||function(){return SE(n.Cu)},n.di.Mi(function(){return vo(e,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return Ev("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Mu.delete(1),[4,KE(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function nI(e,n){return n().catch(function(t){return eI(e,t,n)})}function rI(c){return vo(this,void 0,void 0,function(){var o,s,a,u;return yo(this,function(t){switch(t.label){case 0:s=uI(o=c),a=0<o.Fu.length?o.Fu[o.Fu.length-1].batchId:-1,t.label=1;case 1:if(!(ZE(o)&&o.Fu.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(n=o.Cu,r=a,(i=n).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===r&&(r=-1),i.rs.Fr(t,r)}))];case 3:return null===(u=t.sent())?(0===o.Fu.length&&s.Yc(),[3,7]):(a=u.batchId,e=u,(n=o).Fu.push(e),(n=uI(n)).zc()&&n.fu&&n.du(e.mutations),[3,6]);case 4:return u=t.sent(),[4,eI(o,u)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return iI(o)&&oI(o),[2]}var e,n,r,i})})}function iI(t){return ZE(t)&&!uI(t).Gc()&&0<t.Fu.length}function oI(t){uI(t).start()}function sI(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=n,r?(e.Mu.delete(2),[4,KE(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Mu.add(2),[4,zE(e)]);case 3:t.sent(),e.Bu.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function aI(n){var t,e,r,i=this;return n.ju||(n.ju=(t=n.Nu,e=n.di,r={cu:function(n){return vo(this,void 0,void 0,function(){return yo(this,function(t){return n.Ou.forEach(function(t,e){YE(n,t)}),[2]})})}.bind(null,n),nu:function(e,n){return vo(this,void 0,void 0,function(){return yo(this,function(t){return tI(e),$E(e)?(e.Bu.Su(n),JE(e)):e.Bu.set("Unknown"),[2]})})}.bind(null,n),au:function(s,a,u){return vo(this,void 0,void 0,function(){var n,o;return yo(this,function(t){switch(t.label){case 0:if(s.Bu.set("Online"),!(a instanceof zy&&2===a.state&&a.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.Ou.has(i)?[4,o.xu.Uu(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.Ou.delete(i),o.qu.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,a)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Ev("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),n),[4,eI(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(a instanceof Hy?s.qu.$e(a):a instanceof Ky?s.qu.je(a):s.qu.qe(a),u.isEqual(Yv.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,SE(s.Cu)];case 8:return o=t.sent(),0<=u.F(o)?[4,(i=u,(e=(r=s).qu.He(i)).re.forEach(function(t,e){var n;0<t.resumeToken.ht()&&(n=r.Ou.get(e))&&r.Ou.set(e,n.wt(t.resumeToken,i))}),e.oe.forEach(function(t){var e=r.Ou.get(t);e&&(r.Ou.set(t,e.wt(dy.lt,e.ft)),XE(r,t),e=new my(e.target,t,1,e.sequenceNumber),YE(r,e))}),r.xu.Qu(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Ev("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,eI(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}.bind(null,n)},t.mu(),new ME(e,t.Qc,t.credentials,t.serializer,r)),n.ku.push(function(e){return vo(i,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return e?(n.ju.Jc(),$E(n)?JE(n):n.Bu.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.ju.stop()];case 2:t.sent(),tI(n),t.label=3;case 3:return[2]}})})})),n.ju}function uI(n){var t,e,r,i=this;return n.Gu||(n.Gu=(t=n.Nu,e=n.di,r={cu:function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){return uI(e).Tu(),[2]})})}.bind(null,n),nu:function(e,n){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return n&&uI(e).fu?[4,function(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return by(n=i.code)&&n!==Ov.ABORTED?(e=r.Fu.shift(),uI(r).Jc(),[4,nI(r,function(){return r.xu.Wu(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,rI(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return iI(e)&&oI(e),[2]}})})}.bind(null,n),Eu:function(o){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){for(e=uI(o),n=0,r=o.Fu;n<r.length;n++)i=r[n],e.du(i.mutations);return[2]})})}.bind(null,n),wu:function(r,i,o){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return e=r.Fu.shift(),n=Y_.from(e,i,o),[4,nI(r,function(){return r.xu.Ku(n)})];case 1:return t.sent(),[4,rI(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.mu(),new FE(e,t.Qc,t.credentials,t.serializer,r)),n.ku.push(function(e){return vo(i,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return e?(n.Gu.Jc(),[4,rI(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.Gu.stop()];case 3:t.sent(),0<n.Fu.length&&(Ev("RemoteStore","Stopping write stream with "+n.Fu.length+" pending writes"),n.Fu=[]),t.label=4;case 4:return[2]}})})})),n.Gu}function cI(){this.queries=new X_(d_,p_),this.onlineState="Unknown",this.Hu=new Set}var hI=function(){this.zu=void 0,this.listeners=[]};function lI(s,a){return vo(this,void 0,void 0,function(){var e,n,r,i,o;return yo(this,function(t){switch(t.label){case 0:if(e=s,n=a.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new hI),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.Ju(n)];case 2:return o.zu=t.sent(),[3,4];case 3:return o=Fb(o=t.sent(),"Initialization of query '"+v_(a.query)+"' failed"),[2,void a.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(a),a.Yu(e.onlineState),i.zu&&a.Xu(i.zu)&&pI(e),[2]}})})}function fI(s,a){return vo(this,void 0,void 0,function(){var e,n,r,i,o;return yo(this,function(t){return e=s,n=a.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(a))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.Zu(n))]:[2]})})}function pI(t){t.Hu.forEach(function(t){t.next()})}var dI=(_I.prototype.Xu=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new qy(t.query,t.docs,t.te,e,t.ee,t.fromCache,t.ne,!0)}var o=!1;return this.ea?this.sa(t)&&(this.ta.next(t),o=!0):this.ia(t,this.onlineState)&&(this.ra(t),o=!0),this.na=t,o},_I.prototype.onError=function(t){this.ta.error(t)},_I.prototype.Yu=function(t){this.onlineState=t;var e=!1;return this.na&&!this.ea&&this.ia(this.na,t)&&(this.ra(this.na),e=!0),e},_I.prototype.ia=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.oa&&n||t.docs.W()&&"Offline"!==e)},_I.prototype.sa=function(t){if(0<t.docChanges.length)return!0;var e=this.na&&this.na.hasPendingWrites!==t.hasPendingWrites;return!(!t.ne&&!e)&&!0===this.options.includeMetadataChanges},_I.prototype.ra=function(t){t=qy.ie(t.query,t.docs,t.ee,t.fromCache),this.ea=!0,this.ta.next(t)},_I),vI=(mI.prototype.W=function(){return this.ca.W()},mI.prototype.Do=function(t,e){e=new yI(t,e),this.ca=this.ca.add(e),this.aa=this.aa.add(e)},mI.prototype.la=function(t,e){var n=this;t.forEach(function(t){return n.Do(t,e)})},mI.prototype.No=function(t,e){this._a(new yI(t,e))},mI.prototype.fa=function(t,e){var n=this;t.forEach(function(t){return n.No(t,e)})},mI.prototype.da=function(t){var e=this,n=new Zv(new Xv([])),r=new yI(n,t),t=new yI(n,t+1),i=[];return this.aa.Kt([r,t],function(t){e._a(t),i.push(t.key)}),i},mI.prototype.wa=function(){var e=this;this.ca.forEach(function(t){return e._a(t)})},mI.prototype._a=function(t){this.ca=this.ca.delete(t),this.aa=this.aa.delete(t)},mI.prototype.Ea=function(t){var e=new Zv(new Xv([])),n=new yI(e,t),t=new yI(e,t+1),r=Fy();return this.aa.Kt([n,t],function(t){r=r.add(t.key)}),r},mI.prototype.Qr=function(t){var e=new yI(t,0);return null!==(e=this.ca.jt(e))&&t.isEqual(e.key)},mI),yI=(gI.ua=function(t,e){return Zv.$(t.key,e.key)||Wv(t.Ta,e.Ta)},gI.ha=function(t,e){return Wv(t.Ta,e.Ta)||Zv.$(t.key,e.key)},gI);function gI(t,e){this.key=t,this.Ta=e}function mI(){this.ca=new ky(yI.ua),this.aa=new ky(yI.ha)}function _I(t,e,n){this.query=t,this.ta=e,this.ea=!1,this.na=null,this.onlineState="Unknown",this.options=n||{}}function bI(t,e){return"firestore_clients_"+t+"_"+e}function wI(t,e,n){return n="firestore_mutations_"+t+"_"+n,e.u()&&(n+="_"+e.uid),n}function EI(t,e){return"firestore_targets_"+t+"_"+e}var II=(HI.Ia=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Rv(r.error.code,r.error.message)),i?new HI(t,e,r.state,o):(Iv("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},HI.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},HI),TI=(WI.Ia=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Rv(n.error.code,n.error.message)),r?new WI(t,n.state,i):(Iv("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},WI.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},WI),SI=(BI.Ia=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Uy,o=0;r&&o<n.activeTargetIds.length;++o)r=uy(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new BI(t,i):(Iv("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},BI),CI=(qI.Ia=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new qI(e.clientId,e.onlineState):(Iv("SharedClientState","Failed to parse online state: "+t),null)},qI),NI=(VI.prototype.Aa=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},VI.prototype.Ra=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},VI.prototype.ma=function(){var t={activeTargetIds:this.activeTargetIds.H(),updateTimeMs:Date.now()};return JSON.stringify(t)},VI),AI=(jI.Gs=function(t){return!(!t||!t.localStorage)},jI.prototype.start=function(){return vo(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return yo(this,function(t){switch(t.label){case 0:return[4,this.ga.Ic()];case 1:for(s=t.sent(),e=0,n=s;e<n.length;e++)(r=n[e])!==this.Pa&&(i=this.getItem(bI(this.persistenceKey,r)))&&(o=SI.Ia(r,i))&&(this.pa=this.pa.Tt(o.clientId,o));for(this.Oa(),(s=this.storage.getItem(this.xa))&&(a=this.Ma(s))&&this.ka(a),u=0,c=this.va;u<c.length;u++)h=c[u],this.Va(h);return this.va=[],this.window.addEventListener("unload",function(){return l.fc()}),this.lr=!0,[2]}})})},jI.prototype.Ss=function(t){this.setItem(this.Sa,JSON.stringify(t))},jI.prototype.$a=function(){return this.La(this.pa)},jI.prototype.Ba=function(n){var r=!1;return this.pa.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},jI.prototype.qa=function(t){this.Ua(t,"pending")},jI.prototype.Qa=function(t,e,n){this.Ua(t,e,n),this.Ka(t)},jI.prototype.Wa=function(t){var e,n="not-current";return this.Ba(t)&&(!(e=this.storage.getItem(EI(this.persistenceKey,t)))||(e=TI.Ia(t,e))&&(n=e.state)),this.ja.Aa(t),this.Oa(),n},jI.prototype.Ga=function(t){this.ja.Ra(t),this.Oa()},jI.prototype.za=function(t){return this.ja.activeTargetIds.has(t)},jI.prototype.Ha=function(t){this.removeItem(EI(this.persistenceKey,t))},jI.prototype.Ja=function(t,e,n){this.Ya(t,e,n)},jI.prototype.Xa=function(t,e,n){var r=this;e.forEach(function(t){r.Ka(t)}),this.currentUser=t,n.forEach(function(t){r.qa(t)})},jI.prototype.Za=function(t){this.th(t)},jI.prototype.eh=function(){this.nh()},jI.prototype.fc=function(){this.lr&&(this.window.removeEventListener("storage",this.ya),this.removeItem(this.ba),this.lr=!1)},jI.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ev("SharedClientState","READ",t,e),e},jI.prototype.setItem=function(t,e){Ev("SharedClientState","SET",t,e),this.storage.setItem(t,e)},jI.prototype.removeItem=function(t){Ev("SharedClientState","REMOVE",t),this.storage.removeItem(t)},jI.prototype.Va=function(t){var e=this,o=t;o.storageArea===this.storage&&(Ev("SharedClientState","EVENT",o.key,o.newValue),o.key!==this.ba?this.Cs.Mi(function(){return vo(e,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){if(this.lr){if(null!==o.key)if(this.Da.test(o.key)){if(null==o.newValue)return e=this.sh(o.key),[2,this.ih(e,null)];if(e=this.rh(o.key,o.newValue))return[2,this.ih(e.clientId,e)]}else if(this.Ca.test(o.key)){if(null!==o.newValue&&(n=this.oh(o.key,o.newValue)))return[2,this.uh(n)]}else if(this.Na.test(o.key)){if(null!==o.newValue&&(r=this.ah(o.key,o.newValue)))return[2,this.hh(r)]}else if(o.key===this.xa){if(null!==o.newValue&&(i=this.Ma(o.newValue)))return[2,this.ka(i)]}else if(o.key===this.Sa)(i=function(t){var e=cb.Ds;if(null!=t)try{var n=JSON.parse(t);Nv("number"==typeof n),e=n}catch(t){Iv("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(o.newValue))!==cb.Ds&&this.ps(i);else if(o.key===this.Fa)return[2,this.ga.lh()]}else this.va.push(o);return[2]})})}):Iv("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(jI.prototype,"ja",{get:function(){return this.pa.get(this.Pa)},enumerable:!1,configurable:!0}),jI.prototype.Oa=function(){this.setItem(this.ba,this.ja.ma())},jI.prototype.Ua=function(t,e,n){n=new II(this.currentUser,t,e,n),t=wI(this.persistenceKey,this.currentUser,t),this.setItem(t,n.ma())},jI.prototype.Ka=function(t){t=wI(this.persistenceKey,this.currentUser,t),this.removeItem(t)},jI.prototype.th=function(t){t={clientId:this.Pa,onlineState:t},this.storage.setItem(this.xa,JSON.stringify(t))},jI.prototype.Ya=function(t,e,n){var r=EI(this.persistenceKey,t),n=new TI(t,e,n);this.setItem(r,n.ma())},jI.prototype.nh=function(){this.setItem(this.Fa,"value-not-used")},jI.prototype.sh=function(t){return(t=this.Da.exec(t))?t[1]:null},jI.prototype.rh=function(t,e){return t=this.sh(t),SI.Ia(t,e)},jI.prototype.oh=function(t,e){var n=this.Ca.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return II.Ia(new gv(n),t,e)},jI.prototype.ah=function(t,e){return t=this.Na.exec(t),t=Number(t[1]),TI.Ia(t,e)},jI.prototype.Ma=function(t){return CI.Ia(t)},jI.prototype.uh=function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.ga._h(e.batchId,e.state,e.error)]:(Ev("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},jI.prototype.hh=function(t){return this.ga.fh(t.targetId,t.state,t.error)},jI.prototype.ih=function(t,e){var n=this,r=e?this.pa.Tt(t,e):this.pa.remove(t),i=this.La(this.pa),o=this.La(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.ga.dh(s,a).then(function(){n.pa=r})},jI.prototype.ka=function(t){this.pa.get(t.clientId)&&this.Pu(t.onlineState)},jI.prototype.La=function(t){var n=Uy;return t.forEach(function(t,e){n=n.Gt(e.activeTargetIds)}),n},jI),kI=(UI.prototype.qa=function(t){},UI.prototype.Qa=function(t,e,n){},UI.prototype.Wa=function(t){return this.wh.Aa(t),this.Eh[t]||"not-current"},UI.prototype.Ja=function(t,e,n){this.Eh[t]=e},UI.prototype.Ga=function(t){this.wh.Ra(t)},UI.prototype.za=function(t){return this.wh.activeTargetIds.has(t)},UI.prototype.Ha=function(t){delete this.Eh[t]},UI.prototype.$a=function(){return this.wh.activeTargetIds},UI.prototype.Ba=function(t){return this.wh.activeTargetIds.has(t)},UI.prototype.start=function(){return this.wh=new NI,Promise.resolve()},UI.prototype.Xa=function(t,e,n){},UI.prototype.Za=function(t){},UI.prototype.fc=function(){},UI.prototype.Ss=function(t){},UI.prototype.eh=function(){},UI),OI=function(t){this.key=t},RI=function(t){this.key=t},PI=(Object.defineProperty(FI.prototype,"Ph",{get:function(){return this.Th},enumerable:!1,configurable:!0}),FI.prototype.gh=function(t,e){var s=this,a=e?e.yh:new Vy,u=(e||this).Rh,c=(e||this).ee,h=u,l=!1,f=o_(this.query)&&u.size===this.query.limit?u.last():null,p=s_(this.query)&&u.size===this.query.limit?u.first():null;if(t.Pt(function(t,e){var n=u.get(t),r=(r=e instanceof Xm?e:null)&&(y_(s.query,r)?r:null),i=!!n&&s.ee.has(n.key),o=!!r&&(r.an||s.ee.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(a.track({type:3,doc:r}),e=!0):s.Vh(n,r)||(a.track({type:2,doc:r}),e=!0,(f&&0<s.Ah(r,f)||p&&s.Ah(r,p)<0)&&(l=!0)):!n&&r?(a.track({type:0,doc:r}),e=!0):n&&!r&&(a.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),o_(this.query)||s_(this.query))for(;h.size>this.query.limit;){var n=o_(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);a.track({type:1,doc:n})}return{Rh:h,yh:a,ph:l,ee:c}},FI.prototype.Vh=function(t,e){return t.an&&e.hasCommittedMutations&&!e.an},FI.prototype.Zn=function(t,e,n){var o=this,r=this.Rh;this.Rh=t.Rh,this.ee=t.ee;var i=t.yh.Zt();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.Ah(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Cv()}}var r,i}),this.bh(n);var s=e?this.Sh():[],e=(n=0===this.mh.size&&this.le?1:0)!==this.Ih;return this.Ih=n,0!==i.length||e?{snapshot:new qy(this.query,t.Rh,r,i,t.ee,0==n,e,!1),Dh:s}:{Dh:s}},FI.prototype.Yu=function(t){return this.le&&"Offline"===t?(this.le=!1,this.Zn({Rh:this.Rh,yh:new Vy,ee:this.ee,ph:!1},!1)):{Dh:[]}},FI.prototype.Ch=function(t){return!this.Th.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).an},FI.prototype.bh=function(t){var e=this;t&&(t._e.forEach(function(t){return e.Th=e.Th.add(t)}),t.fe.forEach(function(t){}),t.de.forEach(function(t){return e.Th=e.Th.delete(t)}),this.le=t.le)},FI.prototype.Sh=function(){var e=this;if(!this.le)return[];var n=this.mh;this.mh=Fy(),this.Rh.forEach(function(t){e.Ch(t.key)&&(e.mh=e.mh.add(t.key))});var r=[];return n.forEach(function(t){e.mh.has(t)||r.push(new RI(t))}),this.mh.forEach(function(t){n.has(t)||r.push(new OI(t))}),r},FI.prototype.Nh=function(t){return this.Th=t.Bc,this.mh=Fy(),t=this.gh(t.documents),this.Zn(t,!0)},FI.prototype.xh=function(){return qy.ie(this.query,this.Rh,this.ee,0===this.Ih)},FI),DI=function(t,e,n){this.query=t,this.targetId=e,this.view=n},xI=function(t){this.key=t,this.Fh=!1},LI=(Object.defineProperty(MI.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),MI);function MI(t,e,n,r,i,o){this.Cu=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new X_(d_,p_),this.qh=new Map,this.Uh=[],this.Qh=new Ey(Zv.$),this.Kh=new Map,this.Wh=new vI,this.jh={},this.Gh=new Map,this.zh=nE._o(),this.onlineState="Unknown",this.Hh=void 0}function FI(t,e){this.query=t,this.Th=e,this.Ih=null,this.le=!1,this.mh=Fy(),this.ee=Fy(),this.Ah=g_(t),this.Rh=new jy(this.Ah)}function UI(){this.wh=new NI,this.Eh={},this.Pu=null,this.ps=null}function jI(t,e,n,r,i){this.window=t,this.Cs=e,this.persistenceKey=n,this.Pa=r,this.ga=null,this.Pu=null,this.ps=null,this.ya=this.Va.bind(this),this.pa=new Ey(Wv),this.lr=!1,this.va=[],n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),this.storage=this.window.localStorage,this.currentUser=i,this.ba=bI(this.persistenceKey,this.Pa),this.Sa="firestore_sequence_number_"+this.persistenceKey,this.pa=this.pa.Tt(this.Pa,new NI),this.Da=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Ca=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.Na=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.xa="firestore_online_state_"+this.persistenceKey,this.Fa="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.ya)}function VI(){this.activeTargetIds=Uy}function qI(t,e){this.clientId=t,this.onlineState=e}function BI(t,e){this.clientId=t,this.activeTargetIds=e}function WI(t,e,n){this.targetId=t,this.state=e,this.error=n}function HI(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function KI(i,o,s,a){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return i.Yh=function(t,e,n){return function(r,i,o,s){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return(e=i.view.gh(o)).ph?[4,AE(r.Cu,i.query,!1).then(function(t){return t=t.documents,i.view.gh(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.re.get(i.targetId),n=i.view.Zn(e,r.Jh,n),[2,(tT(r,i.targetId,n.Dh),n.snapshot)]}})})}(i,t,e,n)},[4,AE(i.Cu,o,!0)];case 1:return n=t.sent(),r=new PI(o,n.Bc),e=r.gh(n.documents),n=Wy.he(s,a&&"Offline"!==i.onlineState),n=r.Zn(e,i.Jh,n),tT(i,s,n.Dh),r=new DI(o,s,r),[2,(i.Bh.set(o,r),i.qh.has(s)?i.qh.get(s).push(o):i.qh.set(s,[o]),n.snapshot)]}})})}function zI(f,p,d){return vo(this,void 0,void 0,function(){var s,a;return yo(this,function(t){switch(t.label){case 0:a=sT(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=a.Cu,u=p,h=i,l=Qv.now(),o=u.reduce(function(t,e){return t.add(e.key)},Fy()),h.persistence.runTransaction("Locally write mutations","readwrite",function(a){return h.Oc._s(a,o).next(function(t){c=t;for(var s,e=[],n=0,r=u;n<r.length;n++){var i=r[n],o=(s=i,o=c.get(i.key),s instanceof xm?function(t){for(var e=null,n=0,r=s.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Xm?t.field(i.field):void 0;null!=(o=Zg(i.transform,o||null))&&(e=(null==e?new Bm:e).set(i.field,o))}return e?e.hn():null}(o):null);null!=o&&e.push(new km(i.key,o,function s(t){var a=[];return og(t.fields||{},function(t,e){var n=new $v([t]);if(Tg(e))if(0===(e=s(e.mapValue).fields).length)a.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];a.push(n.child(o))}else a.push(n)}),new ym(a)}(o.proto.mapValue),bm.exists(!0)))}return h.rs.Sr(a,l,e,u)})}).then(function(t){var e=t.vn(c);return{batchId:t.batchId,Qn:e}}))];case 2:return s=t.sent(),a.kh.qa(s.batchId),e=a,n=s.batchId,r=d,i=(i=(i=e.jh[e.currentUser.h()])||new Ey(Wv)).Tt(n,r),e.jh[e.currentUser.h()]=i,[4,nT(a,s.Qn)];case 3:return t.sent(),[4,rI(a.Oh)];case 4:return t.sent(),[3,6];case 5:return a=Fb(a=t.sent(),"Failed to persist write"),d.reject(a),[3,6];case 6:return[2]}var e,n,r,i,u,c,h,l,o})})}function GI(i,s){return vo(this,void 0,void 0,function(){var n,r;return yo(this,function(t){switch(t.label){case 0:n=i,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Cu,h=e,l=(o=s).ft,f=h.Cc,h.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=h.Fc.Xr({Zr:!0});f=h.Cc;var a=[];o.re.forEach(function(t,e){var n,r,i,o=f.get(e);o&&(a.push(h.jo.Co(s,t.de,e).next(function(){return h.jo.So(s,t._e,e)})),0<(i=t.resumeToken).ht()&&(n=o.wt(i,l).dt(s.Fo),f=f.Tt(e,n),r=o,i=t,Nv(0<(o=n).resumeToken.ht()),(0===r.resumeToken.ht()||3e8<=o.ft.O()-r.ft.O()||0<i._e.size+i.fe.size+i.de.size)&&a.push(h.jo.yo(s,n))))});var e,u,n,c,r,i=Ry;return o.ce.forEach(function(t,e){o.ue.has(t)&&a.push(h.persistence.Vr.Sc(s,t))}),a.push((e=s,u=t,n=o.ce,c=l,r=Fy(),n.forEach(function(t){return r=r.add(t)}),u.getEntries(e,r).next(function(i){var o=Ry;return n.forEach(function(t,e){var n=i.get(t),r=c;e instanceof Jm&&e.version.isEqual(Yv.min())?(u.Hn(t,r),o=o.Tt(t,e)):null==n||0<e.version.F(n.version)||0===e.version.F(n.version)&&n.hasPendingWrites?(u.jn(e,r),o=o.Tt(t,e)):Ev("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o}).next(function(t){i=t}))),l.isEqual(Yv.min())||(e=h.jo.To(s).next(function(t){return h.jo.mo(s,s.Fo,l)}),a.push(e)),J_.qn(a).next(function(){return t.apply(s)}).next(function(){return h.Oc.fs(s,i)})}).then(function(t){return h.Cc=f,t}))];case 2:return r=t.sent(),s.re.forEach(function(t,e){(e=n.Kh.get(e))&&(Nv(t._e.size+t.fe.size+t.de.size<=1),0<t._e.size?e.Fh=!0:0<t.fe.size?Nv(e.Fh):0<t.de.size&&(Nv(e.Fh),e.Fh=!1))}),[4,nT(n,r,s)];case 3:return t.sent(),[3,6];case 4:return[4,RE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,o,h,l,f})})}function QI(t,n,e){var r;((t=t).Jh&&0===e||!t.Jh&&1===e)&&(r=[],t.Bh.forEach(function(t,e){(e=e.view.Yu(n)).snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].Yu(i)&&(o=!0)}),o&&pI(t)}(t.Mh,n),r.length&&t.Lh.au(r),t.onlineState=n,t.Jh&&t.kh.Za(n))}function YI(o,s){return vo(this,void 0,void 0,function(){var n,r,i;return yo(this,function(t){switch(t.label){case 0:ZE((n=o).Oh)||Ev("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.Cu).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.rs.Or(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Gh.get(r)||[]).push(s),n.Gh.set(r,i),[3,4]);case 3:return i=Fb(i=t.sent(),"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function XI(t,e){(t.Gh.get(e)||[]).forEach(function(t){t.resolve()}),t.Gh.delete(e)}function JI(t,e,n){var r=t,i=r.jh[r.currentUser.h()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.jh[r.currentUser.h()]=i)}function $I(e,t,n){void 0===n&&(n=null),e.kh.Ga(t);for(var r=0,i=e.qh.get(t);r<i.length;r++){var o=i[r];e.Bh.delete(o),n&&e.Lh.Xh(o,n)}e.qh.delete(t),e.Jh&&e.Wh.da(t).forEach(function(t){e.Wh.Qr(t)||ZI(e,t)})}function ZI(t,e){var n=t.Qh.get(e);null!==n&&(QE(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),eT(t))}function tT(t,e,n){for(var r,i,o=0,s=n;o<s.length;o++){var a=s[o];a instanceof OI?(t.Wh.Do(a.key,e),r=t,i=(i=a).key,r.Qh.get(i)||(Ev("SyncEngine","New document in limbo: "+i),r.Uh.push(i),eT(r))):a instanceof RI?(Ev("SyncEngine","Document no longer in limbo: "+a.key),t.Wh.No(a.key,e),t.Wh.Qr(a.key)||ZI(t,a.key)):Cv()}}function eT(t){for(;0<t.Uh.length&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new xI(e)),t.Qh=t.Qh.Tt(e,n),GE(t.Oh,new my(l_(i_(e.path)),n,2,cb.Ds))}}function nT(e,s,a){return vo(this,void 0,void 0,function(){var n,r,i,o;return yo(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Bh.W()?[3,3]:(n.Bh.forEach(function(t,e){o.push(n.Yh(e,s,a).then(function(t){t&&(n.Jh&&n.kh.Ja(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=ub.Vs(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.Lh.au(r),[4,function(u,c){return vo(this,void 0,void 0,function(){var r,e,n,i,o,s,a;return yo(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return J_.forEach(c,function(e){return J_.forEach(e.gs,function(t){return r.persistence.Vr.Do(n,e.targetId,t)}).next(function(){return J_.forEach(e.ys,function(t){return r.persistence.Vr.No(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!Ib(e=t.sent()))throw e;return Ev("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)a=i[n],o=a.targetId,a.fromCache||(s=r.Cc.get(o),a=s.ft,a=s.Et(a),r.Cc=r.Cc.Tt(o,a));return[2]}})})}(n.Cu,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function rT(p,d){return vo(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f;return yo(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.qh.get(s))&&0!==u.length?[4,CE(e.Cu,l_(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.Bh.get(l),[4,function(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,AE((e=r).Cu,i.query,!0)];case 1:return n=t.sent(),n=i.view.Nh(n),[2,(e.Jh&&tT(e,i.targetId,n.Dh),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,kE(e.Cu,s)];case 8:return f=t.sent(),[4,CE(e.Cu,f)];case 9:return a=t.sent(),[4,KI(e,iT(f),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.Lh.au(r),n)]}})})}function iT(t){return r_(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function oT(t){return t.Oh.xu.Qu=GI.bind(null,t),t.Oh.xu.Xe=function(t,e){var n=t;if((t=n.Kh.get(e))&&t.Fh)return Fy().add(t.key);var r=Fy();if(!(e=n.qh.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.Bh.get(s),r=r.Gt(s.view.Ph);return r}.bind(null,t),t.Oh.xu.Uu=function(o,s,a){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:return(e=o).kh.Ja(s,"rejected",a),i=e.Kh.get(s),(n=i&&i.key)?(r=(r=new Ey(Zv.$)).Tt(n,new Jm(n,Yv.min())),i=Fy().add(n),i=new By(Yv.min(),new Map,new ky(Wv),r,i),[4,GI(e,i)]):[3,2];case 1:return t.sent(),e.Qh=e.Qh.remove(n),e.Kh.delete(s),eT(e),[3,4];case 2:return[4,NE(e.Cu,s,!1).then(function(){return $I(e,s,a)}).catch(RE)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.Lh.au=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query;if(a=n.queries.get(a)){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Xu(s)&&(r=!0);a.zu=s}}r&&pI(n)}.bind(null,t.Mh),t.Lh.Xh=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.Mh),t}function sT(t){return t.Oh.xu.Ku=function(o,s){return vo(this,void 0,void 0,function(){var n,r,i;return yo(this,function(t){switch(t.label){case 0:n=o,r=s.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Cu,h=s,(l=e).persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r,e=h.batch.keys(),n=l.Fc.Xr({Zr:!0}),i=l,o=t,s=n,a=(r=h).batch,u=a.keys(),c=J_.resolve();return u.forEach(function(n){c=c.next(function(){return s.Jn(o,n)}).next(function(t){var e=t;Nv(null!==(t=r.Sn.get(n))),(!e||e.version.F(t)<0)&&(e=a.yn(n,e,r))&&s.jn(e,r.bn)})}),c.next(function(){return i.rs.$r(o,a)}).next(function(){return n.apply(t)}).next(function(){return l.rs.Ur(t)}).next(function(){return l.Oc._s(t,e)})}))];case 2:return i=t.sent(),JI(n,r,null),XI(n,r),n.kh.Qa(r,"acknowledged"),[4,nT(n,i)];case 3:return t.sent(),[3,6];case 4:return[4,RE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,h,l})})}.bind(null,t),t.Oh.xu.Wu=function(s,a,u){return vo(this,void 0,void 0,function(){var n,o;return yo(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Cu,r=a,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.rs.Cr(e,r).next(function(t){return Nv(null!==t),n=t.keys(),i.rs.$r(e,t)}).next(function(){return i.rs.Ur(e)}).next(function(){return i.Oc._s(e,n)})}))];case 2:return o=t.sent(),JI(n,a,u),XI(n,a),n.kh.Qa(a,"rejected",u),[4,nT(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,RE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}.bind(null,t),t}var aT,uT,cT,hT,lT,fT=(XT.prototype.Mc=function(t){this.Zh=t},XT.prototype.ws=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.Tn.length||1===r.Tn.length&&r.Tn[0].field.tt())||i.isEqual(Yv.min())?this.tl(e,r):this.Zh._s(e,o).next(function(t){var n=s.el(r,t);return(o_(r)||s_(r))&&s.ph(r.limitType,n,o,i)?s.tl(e,r):(wv()<=Is.DEBUG&&Ev("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),v_(r)),s.Zh.ws(e,r,i).next(function(e){return n.forEach(function(t){e=e.Tt(t.key,t)}),e}))})},XT.prototype.el=function(n,t){var r=new ky(g_(n));return t.forEach(function(t,e){e instanceof Xm&&y_(n,e)&&(r=r.add(e))}),r},XT.prototype.ph=function(t,e,n,r){return n.size!==e.size||!!(e="F"===t?e.last():e.first())&&(e.hasPendingWrites||0<e.version.F(r))},XT.prototype.tl=function(t,e){return wv()<=Is.DEBUG&&Ev("IndexFreeQueryEngine","Using full collection scan to execute query:",v_(e)),this.Zh.ws(t,e,Yv.min())},XT),pT=(YT.prototype.br=function(t){return J_.resolve(0===this.rs.length)},YT.prototype.Sr=function(t,e,n,r){var i=this.nl;this.nl++,0<this.rs.length&&this.rs[this.rs.length-1],n=new Q_(i,e,n,r),this.rs.push(n);for(var o=0,s=r;o<s.length;o++){var a=s[o];this.sl=this.sl.add(new yI(a.key,i)),this.os.Dr(t,a.key.path.q())}return J_.resolve(n)},YT.prototype.Cr=function(t,e){return J_.resolve(this.il(e))},YT.prototype.Fr=function(t,e){return e+=1,e=(e=this.rl(e))<0?0:e,J_.resolve(this.rs.length>e?this.rs[e]:null)},YT.prototype.Or=function(){return J_.resolve(0===this.rs.length?-1:this.nl-1)},YT.prototype.Mr=function(t){return J_.resolve(this.rs.slice())},YT.prototype.us=function(t,e){var n=this,r=new yI(e,0),e=new yI(e,Number.POSITIVE_INFINITY),i=[];return this.sl.Kt([r,e],function(t){t=n.il(t.Ta),i.push(t)}),J_.resolve(i)},YT.prototype.ds=function(t,e){var n=this,r=new ky(Wv);return e.forEach(function(t){var e=new yI(t,0),t=new yI(t,Number.POSITIVE_INFINITY);n.sl.Kt([e,t],function(t){r=r.add(t.Ta)})}),J_.resolve(this.ol(r))},YT.prototype.Rs=function(t,e){var n=e.path,r=n.length+1,e=n;Zv.ot(e)||(e=e.child(""));var e=new yI(new Zv(e),0),i=new ky(Wv);return this.sl.Wt(function(t){var e=t.key.path;return!!n.j(e)&&(e.length===r&&(i=i.add(t.Ta)),!0)},e),J_.resolve(this.ol(i))},YT.prototype.ol=function(t){var e=this,n=[];return t.forEach(function(t){null!==(t=e.il(t))&&n.push(t)}),n},YT.prototype.$r=function(n,r){var i=this;Nv(0===this.cl(r.batchId,"removed")),this.rs.shift();var o=this.sl;return J_.forEach(r.mutations,function(t){var e=new yI(t.key,r.batchId);return o=o.delete(e),i.Vr.qr(n,t.key)}).next(function(){i.sl=o})},YT.prototype.Br=function(t){},YT.prototype.Qr=function(t,e){var n=new yI(e,0),n=this.sl.jt(n);return J_.resolve(e.isEqual(n&&n.key))},YT.prototype.Ur=function(t){return this.rs.length,J_.resolve()},YT.prototype.cl=function(t,e){return this.rl(t)},YT.prototype.rl=function(t){return 0===this.rs.length?0:t-this.rs[0].batchId},YT.prototype.il=function(t){return(t=this.rl(t))<0||t>=this.rs.length?null:this.rs[t]},YT),dT=(QT.prototype.jn=function(t,e,n){var r=e.key,i=(o=this.docs.get(r))?o.size:0,o=this.ul(e);return this.docs=this.docs.Tt(r,{zn:e,size:o,readTime:n}),this.size+=o-i,this.os.Dr(t,r.path.q())},QT.prototype.Hn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},QT.prototype.Jn=function(t,e){return e=this.docs.get(e),J_.resolve(e?e.zn:null)},QT.prototype.getEntries=function(t,e){var n=this,r=Ry;return e.forEach(function(t){var e=n.docs.get(t);r=r.Tt(t,e?e.zn:null)}),J_.resolve(r)},QT.prototype.ws=function(t,e,n){for(var r=xy,i=new Zv(e.path.child("")),o=this.docs.Vt(i);o.Nt();){var s=(a=o.Ct()).key,a=(u=a.value).zn,u=u.readTime;if(!e.path.j(s.path))break;u.F(n)<=0||a instanceof Xm&&y_(e,a)&&(r=r.Tt(a.key,a))}return J_.resolve(r)},QT.prototype.al=function(t,e){return J_.forEach(this.docs,function(t){return e(t)})},QT.prototype.Xr=function(t){return new vT(this)},QT.prototype.eo=function(t){return J_.resolve(this.size)},QT),vT=(fo(GT,lT=zn),GT.prototype.Zn=function(n){var r=this,i=[];return this.Qn.forEach(function(t,e){e&&e.zn?i.push(r.no.jn(n,e.zn,r.Wn(t))):r.no.Hn(t)}),J_.qn(i)},GT.prototype.Yn=function(t,e){return this.no.Jn(t,e)},GT.prototype.Xn=function(t,e){return this.no.getEntries(t,e)},GT),yT=(zT.prototype.Ue=function(t,n){return this.hl.forEach(function(t,e){return n(e)}),J_.resolve()},zT.prototype.To=function(t){return J_.resolve(this.lastRemoteSnapshotVersion)},zT.prototype.Io=function(t){return J_.resolve(this.ll)},zT.prototype.fo=function(t){return this.highestTargetId=this.fl.next(),J_.resolve(this.highestTargetId)},zT.prototype.mo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),J_.resolve()},zT.prototype.Ro=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new nE(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},zT.prototype.Ao=function(t,e){return this.Ro(e),this.targetCount+=1,J_.resolve()},zT.prototype.yo=function(t,e){return this.Ro(e),J_.resolve()},zT.prototype.Vo=function(t,e){return this.hl.delete(e.target),this._l.da(e.targetId),--this.targetCount,J_.resolve()},zT.prototype.mr=function(n,r,i){var o=this,s=0,a=[];return this.hl.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.hl.delete(t),a.push(o.po(n,e.targetId)),s++)}),J_.qn(a).next(function(){return s})},zT.prototype.vo=function(t){return J_.resolve(this.targetCount)},zT.prototype.bo=function(t,e){return e=this.hl.get(e)||null,J_.resolve(e)},zT.prototype.So=function(t,e,n){return this._l.la(e,n),J_.resolve()},zT.prototype.Co=function(e,t,n){this._l.fa(t,n);var r=this.persistence.Vr,i=[];return r&&t.forEach(function(t){i.push(r.qr(e,t))}),J_.qn(i)},zT.prototype.po=function(t,e){return this._l.da(e),J_.resolve()},zT.prototype.xo=function(t,e){return e=this._l.Ea(e),J_.resolve(e)},zT.prototype.Qr=function(t,e){return J_.resolve(this._l.Qr(e))},zT),gT=(KT.prototype.ro=function(t,e){return J_.resolve(this.dl.get(e))},KT.prototype.oo=function(t,e){return this.dl.set(e.id,{id:e.id,version:e.version,createTime:Dg(e.createTime)}),J_.resolve()},KT.prototype.co=function(t,e){return J_.resolve(this.wl.get(e))},KT.prototype.uo=function(t,e){return this.wl.set(e.name,{name:e.name,query:aw(e.bundledQuery),readTime:Dg(e.readTime)}),J_.resolve()},KT),mT=(HT.prototype.start=function(){return Promise.resolve()},HT.prototype.fc=function(){return this.$o=!1,Promise.resolve()},Object.defineProperty(HT.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),HT.prototype.tc=function(){},HT.prototype.ec=function(){},HT.prototype.Pc=function(){return this.os},HT.prototype.mc=function(t){var e=this.El[t.h()];return e||(e=new pT(this.os,this.Vr),this.El[t.h()]=e),e},HT.prototype.Ac=function(){return this.jo},HT.prototype.Rc=function(){return this.ss},HT.prototype.gc=function(){return this.Go},HT.prototype.runTransaction=function(t,e,n){var r=this;Ev("MemoryPersistence","Starting transaction:",t);var i=new _T(this.ko.next());return this.Vr.Il(),n(i).next(function(t){return r.Vr.ml(i).next(function(){return t})}).Ln().then(function(t){return i.ns(),t})},HT.prototype.Al=function(e,n){return J_.Un(Object.values(this.El).map(function(t){return function(){return t.Qr(e,n)}}))},HT),_T=(fo(WT,hT=lt),WT),bT=(BT.gl=function(t){return new BT(t)},Object.defineProperty(BT.prototype,"yl",{get:function(){if(this.Pl)return this.Pl;throw Cv()},enumerable:!1,configurable:!0}),BT.prototype.Do=function(t,e,n){return this.Rl.Do(n,e),this.yl.delete(n.toString()),J_.resolve()},BT.prototype.No=function(t,e,n){return this.Rl.No(n,e),this.yl.add(n.toString()),J_.resolve()},BT.prototype.qr=function(t,e){return this.yl.add(e.toString()),J_.resolve()},BT.prototype.removeTarget=function(t,e){var n=this;this.Rl.da(e.targetId).forEach(function(t){return n.yl.add(t.toString())});var r=this.persistence.Ac();return r.xo(t,e.targetId).next(function(t){t.forEach(function(t){return n.yl.add(t.toString())})}).next(function(){return r.Vo(t,e)})},BT.prototype.Il=function(){this.Pl=new Set},BT.prototype.ml=function(n){var r=this,i=this.persistence.Rc().Xr();return J_.forEach(this.yl,function(t){var e=Zv.st(t);return r.Vl(n,e).next(function(t){t||i.Hn(e)})}).next(function(){return r.Pl=null,i.apply(n)})},BT.prototype.Sc=function(t,e){var n=this;return this.Vl(t,e).next(function(t){t?n.yl.delete(e.toString()):n.yl.add(e.toString())})},BT.prototype.Tl=function(t){return 0},BT.prototype.Vl=function(t,e){var n=this;return J_.Un([function(){return J_.resolve(n.Rl.Qr(e))},function(){return n.persistence.Ac().Qr(t,e)},function(){return n.persistence.Al(t,e)}])},BT),wT=(qT.prototype.cu=function(t){this.bl=t},qT.prototype.nu=function(t){this.Sl=t},qT.prototype.onMessage=function(t){this.Dl=t},qT.prototype.close=function(){this.vl()},qT.prototype.send=function(t){this.pl(t)},qT.prototype.Cl=function(){this.bl()},qT.prototype.Nl=function(t){this.Sl(t)},qT.prototype.xl=function(t){this.Dl(t)},qT),ET={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},IT=(VT.prototype.Au=function(e,t,n,r){var i=this.kl(e,t);return Ev("RestConnection","Sending: ",i,n),t={},this.$l(t,r),this.Ll(e,i,t,n).then(function(t){return Ev("RestConnection","Received: ",t),t},function(t){throw Tv("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},VT.prototype.Ru=function(t,e,n,r){return this.Au(t,e,n,r)},VT.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.1.0",t["Content-Type"]="text/plain",e)for(var n in e.T)e.T.hasOwnProperty(n)&&(t[n]=e.T[n])},VT.prototype.kl=function(t,e){return t=ET[t],this.Ol+"/v1/"+e+":"+t},fo(jT,cT=VT),jT.prototype.Ll=function(o,e,s,a){return new Promise(function(n,r){var i=new dv;i.listenOnce(fv.COMPLETE,function(){try{switch(i.getLastErrorCode()){case lv.NO_ERROR:var t=i.getResponseJson();Ev("Connection","XHR received:",JSON.stringify(t)),n(t);break;case lv.TIMEOUT:Ev("Connection",'RPC "'+o+'" timed out'),r(new Rv(Ov.DEADLINE_EXCEEDED,"Request time out"));break;case lv.HTTP_ERROR:var e=i.getStatus();Ev("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace("_","-"),e=0<=Object.values(Ov).indexOf(e)?e:Ov.UNKNOWN,r(new Rv(e,t.message))):r(new Rv(Ov.UNKNOWN,"Server responded with status "+i.getStatus())):r(new Rv(Ov.UNAVAILABLE,"Connection failed."));break;default:Cv()}}finally{Ev("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(a);i.send(e,"POST",t,s,15)})},jT.prototype.uu=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new sv,t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(t.initMessageHeaders,e),Po()||xo()||0<=Ro().indexOf("Electron/")||0<=(e=Ro()).indexOf("MSIE ")||0<=e.indexOf("Trident/")||0<=Ro().indexOf("MSAppHost/")||Do()||(t.httpHeadersOverwriteParam="$httpHeaders"),Ev("Connection","Creating WebChannel: "+(n=n.join("")),t);var o=r.createWebChannel(n,t),i=!1,s=!1,a=new wT({pl:function(t){s?Ev("Connection","Not sending because WebChannel is closed:",t):(i||(Ev("Connection","Opening WebChannel transport."),o.open(),i=!0),Ev("Connection","WebChannel sending:",t),o.send(t))},vl:function(){return o.close()}});return(t=function(t,e){o.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})})(pv.EventType.OPEN,function(){s||Ev("Connection","WebChannel transport opened.")}),t(pv.EventType.CLOSE,function(){s||(s=!0,Ev("Connection","WebChannel transport closed"),a.Nl())}),t(pv.EventType.ERROR,function(t){s||(s=!0,Tv("Connection","WebChannel transport errored:",t),a.Nl(new Rv(Ov.UNAVAILABLE,"The operation could not be completed")))}),t(pv.EventType.MESSAGE,function(t){var e,n,r,i;s||(Nv(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Ev("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=gy[r];if(void 0!==t)return wy(t)}(),i=n.message,void 0===t&&(t=Ov.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),s=!0,a.Nl(new Rv(t,i)),o.close()):(Ev("Connection","WebChannel received:",e),a.xl(e)))}),setTimeout(function(){a.Cl()},0),a},jT),TT=(UT.prototype.Lu=function(t){this.Kl.push(t)},UT.prototype.fc=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},UT.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},UT.prototype.ql=function(){Ev("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},UT.prototype.Ql=function(){Ev("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},UT.Gs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},UT),ST=(FT.prototype.Lu=function(t){},FT.prototype.fc=function(){},FT),CT=(MT.prototype.initialize=function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this.serializer=ib(e.Fl.t),this.kh=this.jl(e),this.persistence=this.Gl(e),[4,this.persistence.start()];case 1:return t.sent(),this.zl=this.Hl(e),this.Cu=this.Jl(e),[2]}})})},MT.prototype.Hl=function(t){return null},MT.prototype.Jl=function(t){return IE(this.persistence,new fT,t.Yl,this.serializer)},MT.prototype.Gl=function(t){return new mT(bT.gl,this.serializer)},MT.prototype.jl=function(t){return new kI},MT.prototype.terminate=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.fc()];case 1:return t.sent(),[4,this.persistence.fc()];case 2:return t.sent(),[2]}})})},MT),NT=(fo(LT,uT=CT),LT.prototype.initialize=function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,uT.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=ww(t),r=Yv.min(),t._i({index:Uw.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=ew(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.xc=t})]})})}(this.Cu)];case 2:return t.sent(),[4,this.Xl.initialize(this,e)];case 3:return t.sent(),[4,sT(this.Xl.ga)];case 4:return t.sent(),[4,rI(this.Xl.Oh)];case 5:return t.sent(),[2]}})})},LT.prototype.Jl=function(t){return IE(this.persistence,new fT,t.Yl,this.serializer)},LT.prototype.Hl=function(t){var e=this.persistence.Vr.cr;return new Hb(e,t.di)},LT.prototype.Gl=function(t){var e=bE(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?qb.er(this.cacheSizeBytes):qb.ir;return new fE(this.synchronizeTabs,e,t.clientId,n,t.di,Rb(),Pb(),this.serializer,this.kh,!!this.forceOwnership)},LT.prototype.jl=function(t){return new kI},LT),AT=(fo(xT,aT=NT),xT.prototype.initialize=function(r){return vo(this,void 0,void 0,function(){var e,n=this;return yo(this,function(t){switch(t.label){case 0:return[4,aT.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Xl.ga,this.kh instanceof AI?(this.kh.ga={_h:function(a,u,c,h){return vo(this,void 0,void 0,function(){var o,s;return yo(this,function(t){switch(t.label){case 0:return[4,(e=(o=a).Cu,n=u,i=(r=e).rs,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.Nr(e,n).next(function(t){return t?r.Oc._s(e,t):J_.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,rI(o.Oh)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(JI(o,u,h||null),XI(o,u),o.Cu.rs.Br(u)):Cv(),t.label=4;case 4:return[4,nT(o,s)];case 5:return t.sent(),[3,7];case 6:Ev("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}.bind(null,e),fh:function(i,o,s,a){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return(e=i).Hh?(Ev("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.qh.has(o))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,OE(e.Cu)];case 3:return n=t.sent(),r=By.ae(o,"current"===s),[4,nT(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,NE(e.Cu,o,!0)];case 6:return t.sent(),$I(e,o,a),[3,8];case 7:Cv(),t.label=8;case 8:return[2]}})})}.bind(null,e),dh:function(c,h,l){return vo(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u;return yo(this,function(t){switch(t.label){case 0:if(!(n=oT(c)).Hh)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.qh.has(r)?(Ev("SyncEngine","Adding an already active target "+r),[3,5]):[4,kE(n.Cu,r)]):[3,6];case 2:return i=t.sent(),[4,CE(n.Cu,i)];case 3:return o=t.sent(),[4,KI(n,iT(i),o.targetId,!1)];case 4:t.sent(),GE(n.Oh,o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return yo(this,function(t){switch(t.label){case 0:return n.qh.has(e)?[4,NE(n.Cu,e,!1).then(function(){QE(n.Oh,e),$I(n,e)}).catch(RE)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=0,u=l,t.label=7;case 7:return a<u.length?(u=u[a],[5,s(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})}.bind(null,e),Ic:function(t){return t.Cu.persistence.Ic()}.bind(null,e),lh:function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){return[2,OE((e=n).Cu).then(function(t){return nT(e,t)})]})})}.bind(null,e)},[4,this.kh.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.Zo(function(e){return vo(n,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,function(h,l){return vo(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return yo(this,function(t){switch(t.label){case 0:return oT(r=h),sT(r),!0!==l||!0===r.Hh?[3,3]:(e=r.kh.$a(),[4,rT(r,e.H())]);case 1:return i=t.sent(),r.Hh=!0,[4,sI(r.Oh,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],GE(r.Oh,a);return[3,7];case 3:return!1!==l||!1===r.Hh?[3,7]:(u=[],c=Promise.resolve(),r.qh.forEach(function(t,e){r.kh.za(e)?u.push(e):c=c.then(function(){return $I(r,e),NE(r.Cu,e,!0)}),QE(r.Oh,e)}),[4,c]);case 4:return t.sent(),[4,rT(r,u)];case 5:return t.sent(),(n=r).Kh.forEach(function(t,e){QE(n.Oh,e)}),n.Wh.wa(),n.Kh=new Map,n.Qh=new Ey(Zv.$),r.Hh=!1,[4,sI(r.Oh,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}(this.Xl.ga,e)];case 1:return t.sent(),this.zl&&(e&&!this.zl.lr?this.zl.start(this.Cu):e||this.zl.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},xT.prototype.jl=function(t){var e=Rb();if(!AI.Gs(e))throw new Rv(Ov.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=bE(t.Fl.t,t.Fl.persistenceKey);return new AI(e,t.di,n,t.clientId,t.Yl)},xT),kT=(DT.prototype.initialize=function(n,r){return vo(this,void 0,void 0,function(){var e=this;return yo(this,function(t){switch(t.label){case 0:return this.Cu?[3,2]:(this.Cu=n.Cu,this.kh=n.kh,this.Nu=this.Zl(r),this.Oh=this.t_(r),this.Mh=this.e_(r),this.ga=this.n_(r,!n.synchronizeTabs),this.kh.Pu=function(t){return QI(e.ga,t,1)},this.Oh.xu.s_=function(i,o){return vo(this,void 0,void 0,function(){var n,r;return yo(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Ev("SyncEngine","User change. New user:",o.h()),[4,TE(n.Cu,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Gh.forEach(function(t){t.forEach(function(t){t.reject(new Rv(Ov.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Gh.clear(),n.kh.Xa(o,r.$c,r.Lc),[4,nT(n,r.kc)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}.bind(null,this.ga),[4,sI(this.Oh,this.ga.Jh)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},DT.prototype.e_=function(t){return new cI},DT.prototype.Zl=function(t){var e=ib(t.Fl.t),n=(n=t.Fl,new IT(n));return t=t.credentials,new UE(t,n,e)},DT.prototype.t_=function(t){var e=this;return new PE(this.Cu,this.Nu,t.di,function(t){return QI(e.ga,t,0)},t=new(TT.Gs()?TT:ST))},DT.prototype.n_=function(t,e){return n=this.Cu,r=this.Oh,i=this.Mh,o=this.kh,s=t.Yl,t=t.$h,e=e,t=new LI(n,r,i,o,s,t),e&&(t.Hh=!0),t;var n,r,i,o,s},DT.prototype.terminate=function(){return function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=n,Ev("RemoteStore","RemoteStore shutting down."),e.Mu.add(5),[4,zE(e)];case 1:return t.sent(),e.$u.fc(),e.Bu.set("Unknown"),[2]}})})}(this.Oh)},DT),OT=(PT.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},PT.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},PT.prototype.r_=function(){this.muted=!0},PT.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},PT),RT=function(t){this.o_=t};function PT(t){this.observer=t,this.muted=!1}function DT(){}function xT(t,e){var n=this;return(n=aT.call(this,t,e,!1)||this).Xl=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function LT(t,e,n){var r=this;return(r=uT.call(this)||this).Xl=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function MT(){this.synchronizeTabs=!1}function FT(){}function UT(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}function jT(t){var e=this;return(e=cT.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.i=t.i,e}function VT(t){this.Fl=t,this.t=t.t;var e=t.ssl?"https":"http";this.Ol=e+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}function qT(t){this.pl=t.pl,this.vl=t.vl}function BT(t){this.persistence=t,this.Rl=new vI,this.Pl=null}function WT(t){var e=this;return(e=hT.call(this)||this).Fo=t,e}function HT(t,e){var n=this;this.El={},this.ko=new cb(0),this.$o=!1,this.$o=!0,this.Vr=t(this),this.jo=new yT(this),this.os=new Tw,this.ss=(t=this.os,new dT(t,function(t){return n.Vr.Tl(t)})),this.serializer=new Jb(e),this.Go=new gT(this.serializer)}function KT(t){this.serializer=t,this.dl=new Map,this.wl=new Map}function zT(t){this.persistence=t,this.hl=new X_(ly,fy),this.lastRemoteSnapshotVersion=Yv.min(),this.highestTargetId=0,this.ll=0,this._l=new vI,this.targetCount=0,this.fl=nE.lo()}function GT(t){var e=this;return(e=lT.call(this)||this).no=t,e}function QT(t,e){this.os=t,this.ul=e,this.docs=new Ey(Zv.$),this.size=0}function YT(t,e){this.os=t,this.Vr=e,this.rs=[],this.nl=1,this.sl=new ky(yI.ua)}function XT(){}function JT(t,e,n){if(!n)throw new Rv(Ov.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function $T(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Rv(Ov.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ZT(t,e,n,r){if(!0===e&&!0===r)throw new Rv(Ov.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function tS(t){if(!Zv.ot(t))throw new Rv(Ov.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function eS(t){if(Zv.ot(t))throw new Rv(Ov.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function nS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Cv();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function rS(t,e){if(t instanceof RT&&(t=t.o_),t instanceof e)return t;if(e.name===t.constructor.name)throw new Rv(Ov.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");throw t=nS(t),new Rv(Ov.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function iS(t,e){if(e<=0)throw new Rv(Ov.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var oS,sS=function(t){this.c_=t},aS=(fo(uS,oS=sS),uS.prototype.u_=function(t){if(2!==t.a_)throw 1===t.a_?t.h_(this.c_+"() can only appear at the top level of your update data"):t.h_(this.c_+"() cannot be used with set() unless you pass {merge:true}");return t.en.push(t.path),null},uS.prototype.isEqual=function(t){return t instanceof uS},uS);function uS(){return null!==oS&&oS.apply(this,arguments)||this}function cS(t,e,n){return new rN({a_:3,l_:e.settings.l_,methodName:t.c_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var hS,lS,fS,pS,dS=(fo(OS,pS=sS),OS.prototype.u_=function(t){return new gm(t.path,new nm)},OS.prototype.isEqual=function(t){return t instanceof OS},OS),vS=(fo(kS,fS=sS),kS.prototype.u_=function(t){var e=cS(this,t,!0),n=this.f_.map(function(t){return lN(t,e)}),n=new rm(n);return new gm(t.path,n)},kS.prototype.isEqual=function(t){return this===t},kS),yS=(fo(AS,lS=sS),AS.prototype.u_=function(t){var e=cS(this,t,!0),n=this.f_.map(function(t){return lN(t,e)}),n=new um(n);return new gm(t.path,n)},AS.prototype.isEqual=function(t){return this===t},AS),gS=(fo(NS,hS=sS),NS.prototype.u_=function(t){var e=new fm(t.serializer,Og(t.serializer,this.d_));return new gm(t.path,e)},NS.prototype.isEqual=function(t){return this===t},NS),mS=(Object.defineProperty(CS.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(CS.prototype,"longitude",{get:function(){return this.E_},enumerable:!1,configurable:!0}),CS.prototype.isEqual=function(t){return this.w_===t.w_&&this.E_===t.E_},CS.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.E_}},CS.prototype.C=function(t){return Wv(this.w_,t.w_)||Wv(this.E_,t.E_)},CS),_S=(SS.fromBase64String=function(t){try{return new SS(dy.fromBase64String(t))}catch(t){throw new Rv(Ov.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+t)}},SS.fromUint8Array=function(t){return new SS(dy.fromUint8Array(t))},SS.prototype.toBase64=function(){return this.T_.toBase64()},SS.prototype.toUint8Array=function(){return this.T_.toUint8Array()},SS.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},SS.prototype.isEqual=function(t){return this.T_.isEqual(t.T_)},SS),bS=new Map,wS=(TS.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},TS),ES=(Object.defineProperty(IS.prototype,"app",{get:function(){if(!this.g_)throw new Rv(Ov.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.g_},enumerable:!1,configurable:!0}),Object.defineProperty(IS.prototype,"y_",{get:function(){return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(IS.prototype,"V_",{get:function(){return void 0!==this.p_},enumerable:!1,configurable:!0}),IS.prototype.v_=function(t){if(this.A_)throw new Rv(Ov.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.m_=new wS(t),void 0!==t.credentials&&(this.P_=function(t){if(!t)return new Pv;switch(t.type){case"gapi":var e=t.client;return Nv(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Lv(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Rv(Ov.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},IS.prototype.b_=function(){return this.m_},IS.prototype.S_=function(){return this.A_=!0,this.m_},IS.prototype._delete=function(){return this.p_||(this.p_=this.D_()),this.p_},IS.prototype.D_=function(){return(t=bS.get(this))&&(Ev("ComponentProvider","Removing Datastore"),bS.delete(this),t.terminate()),Promise.resolve();var t},IS);function IS(t,e){this.I_="(lite)",this.m_=new wS({}),this.A_=!1,t instanceof yv?(this.R_=t,this.P_=new Pv):(this.g_=t,this.R_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Rv(Ov.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yv(t.options.projectId)}(t),this.P_=new Dv(e))}function TS(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Rv(Ov.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Rv(Ov.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ZT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function SS(t){this.T_=t}function CS(t,e){if(!isFinite(t)||t<-90||90<t)throw new Rv(Ov.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Rv(Ov.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.E_=e}function NS(t,e){var n=this;return(n=hS.call(this,t)||this).d_=e,n}function AS(t,e){var n=this;return(n=lS.call(this,t)||this).f_=e,n}function kS(t,e){var n=this;return(n=fS.call(this,t)||this).f_=e,n}function OS(){return null!==pS&&pS.apply(this,arguments)||this}function RS(){if("undefined"==typeof Uint8Array)throw new Rv(Ov.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function PS(){if("undefined"==typeof atob)throw new Rv(Ov.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var DS,xS,LS,MS=(fo(HS,LS=_S),HS.fromBase64String=function(t){PS();try{return new HS(dy.fromBase64String(t))}catch(t){throw new Rv(Ov.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},HS.fromUint8Array=function(t){return RS(),new HS(dy.fromUint8Array(t))},HS.prototype.toBase64=function(){return PS(),LS.prototype.toBase64.call(this)},HS.prototype.toUint8Array=function(){return RS(),LS.prototype.toUint8Array.call(this)},HS.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},HS),zn=(WS.prototype.C_=function(t,e){switch(void 0===e&&(e="none"),hg(t)){case 0:return null;case 1:return t.booleanValue;case 2:return gg(t.integerValue||t.doubleValue);case 3:return this.N_(t.timestampValue);case 4:return this.x_(t,e);case 5:return t.stringValue;case 6:return this.F_(mg(t.bytesValue));case 7:return this.O_(t.referenceValue);case 8:return this.M_(t.geoPointValue);case 9:return this.k_(t.arrayValue,e);case 10:return this.L_(t.mapValue,e);default:throw Cv()}},WS.prototype.L_=function(t,n){var r=this,i={};return og(t.fields||{},function(t,e){i[t]=r.C_(e,n)}),i},WS.prototype.M_=function(t){return new mS(gg(t.latitude),gg(t.longitude))},WS.prototype.k_=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.C_(t,e)})},WS.prototype.x_=function(t,e){switch(e){case"previous":var n=function t(e){return ag(e=e.mapValue.fields.__previous_value__)?t(e):e}(t);return null==n?null:this.C_(n,e);case"estimate":return this.N_(ug(t));default:return null}},WS.prototype.N_=function(t){return t=yg(t),new Qv(t.seconds,t.nanos)},WS.prototype.B_=function(t,e){var n=Xv.Y(t);return Nv($g(n)),t=new yv(n.get(1),n.get(3)),n=new Zv(n.B(5)),t.isEqual(e)||Iv("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},WS),FS=(fo(BS,xS=zn),BS.prototype.F_=function(t){return new MS(t)},BS.prototype.O_=function(t){return t=this.B_(t,this.firestore.R_),nA.q_(t,this.firestore,null)},BS),US=(Object.defineProperty(qS.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(qS.prototype,"ref",{get:function(){return new vC(this.U_,this.j_,this.K_)},enumerable:!1,configurable:!0}),qS.prototype.exists=function(){return null!==this.W_},qS.prototype.data=function(){if(this.W_){if(this.j_){var t=new jS(this.U_,this.Q_,this.K_,this.W_,null);return this.j_.fromFirestore(t)}return this.Q_.C_(this.W_.En())}},qS.prototype.get=function(t){if(this.W_&&null!==(t=this.W_.data().field(KS("DocumentSnapshot.get",t))))return this.Q_.C_(t)},qS),jS=(fo(VS,DS=US),VS.prototype.data=function(){return DS.prototype.data.call(this)},VS);function VS(){return null!==DS&&DS.apply(this,arguments)||this}function qS(t,e,n,r,i){this.U_=t,this.Q_=e,this.K_=n,this.W_=r,this.j_=i}function BS(t){var e=this;return(e=xS.call(this)||this).firestore=t,e}function WS(){}function HS(){return null!==LS&&LS.apply(this,arguments)||this}function KS(t,e){return"string"==typeof e?gN(t,e):(e instanceof RT?e.o_:e).G_}var zS,GS=(XS.prototype.isEqual=function(t){return this.G_.isEqual(t.G_)},XS),QS=(fo(YS,zS=ES),YS.prototype.D_=function(){return this.H_||XN(this),this.H_.terminate()},YS);function YS(t,e){var n=this;return(n=zS.call(this,t,e)||this).z_=new xb,n.I_="name"in t?t.name:"[DEFAULT]",n}function XS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Rv(Ov.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.G_=new $v(t)}function JS(n,r,i){var t=this,o=new $_;return n.di.enqueue(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,CN(n,i)];case 1:return t.sent(),[4,NN(n,r)];case 2:return t.sent(),o.resolve(),[3,4];case 3:if(!("FirebaseError"===(t=e=t.sent()).name?t.code===Ov.FAILED_PRECONDITION||t.code===Ov.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),o.reject(e),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function $S(t){if(t.y_||t.V_)throw new Rv(Ov.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var ZS,tC,eC=(fo(sC,tC=US),sC.prototype.exists=function(){return tC.prototype.exists.call(this)},sC.prototype.data=function(t){if(void 0===t&&(t={}),this.W_){if(this.j_){var e=new nC(this.U_,this.Q_,this.K_,this.W_,this.metadata,null);return this.j_.fromFirestore(e,t)}return this.Q_.C_(this.W_.En(),t.serverTimestamps)}},sC.prototype.get=function(t,e){if(void 0===e&&(e={}),this.W_&&null!==(t=this.W_.data().field(KS("DocumentSnapshot.get",t))))return this.Q_.C_(t,e.serverTimestamps)},sC),nC=(fo(oC,ZS=eC),oC.prototype.data=function(t){return void 0===t&&(t={}),ZS.prototype.data.call(this,t)},oC),rC=(Object.defineProperty(iC.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(iC.prototype,"size",{get:function(){return this.Y_.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(iC.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),iC.prototype.forEach=function(e,n){var r=this;this.Y_.docs.forEach(function(t){e.call(n,new nC(r.U_,r.Q_,t.key,t,new vA(r.Y_.ee.has(t.key),r.Y_.fromCache),r.query.j_))})},iC.prototype.docChanges=function(t){if(void 0===t&&(t={}),(t=!!t.includeMetadataChanges)&&this.Y_.se)throw new Rv(Ov.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.X_&&this.Z_===t||(this.X_=function(i,e){if(i.Y_.te.W()){var n=0;return i.Y_.docChanges.map(function(t){var e=new nC(i.U_,i.Q_,t.doc.key,t.doc,new vA(i.Y_.ee.has(t.doc.key),i.Y_.fromCache),i.query.j_);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i.Y_.te;return i.Y_.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new nC(i.U_,i.Q_,t.doc.key,t.doc,new vA(i.Y_.ee.has(t.doc.key),i.Y_.fromCache),i.query.j_),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(){switch(t.type){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Cv()}}(),doc:e,oldIndex:n,newIndex:r}})}(this,t),this.Z_=t),this.X_},iC);function iC(t,e,n,r){this.U_=t,this.Q_=e,this.Y_=r,this.metadata=new vA(r.hasPendingWrites,r.fromCache),this.query=n}function oC(){return null!==ZS&&ZS.apply(this,arguments)||this}function sC(t,e,n,r,i,o){var s=this;return(s=tC.call(this,t,e,n,r,o)||this).U_=t,s.J_=t,s.metadata=i,s}function aC(t,e){return t instanceof eC&&e instanceof eC?t.U_===e.U_&&t.K_.isEqual(e.K_)&&(null===t.W_?null===e.W_:t.W_.isEqual(e.W_))&&t.j_===e.j_:t instanceof rC&&e instanceof rC&&t.U_===e.U_&&YC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.Y_.isEqual(e.Y_)}var uC,cC=(fo(hC,uC=zn),hC.prototype.F_=function(t){return new _S(t)},hC.prototype.O_=function(t){return t=this.B_(t,this.firestore.R_),new vC(this.firestore,null,t)},hC);function hC(t){var e=this;return(e=uC.call(this)||this).firestore=t,e}function lC(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=rS(t.firestore,QS),s=XC(o);return e instanceof RT&&(e=e.o_),pC(o,("string"==typeof e||e instanceof GS?cN(s,"updateDoc",t.K_,e,n,r):uN(s,"updateDoc",t.K_,e)).ef(t.K_,bm.exists(!0)))}function fC(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i={includeMetadataChanges:!1},o=0;"object"!=typeof n[o]||ob(n[o])||(i=n[o],o++);var s,a,u,c,h,l={includeMetadataChanges:i.includeMetadataChanges};ob(n[o])&&(u=n[o],n[o]=null===(i=u.next)||void 0===i?void 0:i.bind(u),n[o+1]=null===(i=u.error)||void 0===i?void 0:i.bind(u),n[o+2]=null===(i=u.complete)||void 0===i?void 0:i.bind(u)),e instanceof vC?(s=rS(e.firestore,QS),a=i_(e.K_.path),h={next:function(t){n[o]&&n[o](dC(s,e,t))},error:n[o+1],complete:n[o+2]}):(s=rS(e.firestore,QS),a=e.tf,c=new cC(s),h={next:function(t){n[o]&&n[o](new rC(s,c,e,t))},error:n[o+1],complete:n[o+2]},jC(e.tf));var f=YN(s),p=new OT(h),d=new dI(a,p,l);return s.z_.Ri(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=lI,[4,xN(f)];case 1:return[2,e.apply(void 0,[t.sent(),d])]}})})}),function(){p.r_(),s.z_.Ri(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=fI,[4,xN(f)];case 1:return[2,e.apply(void 0,[t.sent(),d])]}})})})}}function pC(t,e){return function(n,r){var t=this,i=new $_;return n.di.Ri(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=zI,[4,DN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(YN(t),e)}function dC(t,e,n){var r=n.docs.get(e.K_),i=new cC(t);return new eC(t,i,e.K_,r,new vA(n.hasPendingWrites,n.fromCache),e.j_)}var vC=(Object.defineProperty(mC.prototype,"nf",{get:function(){return this.K_.path},enumerable:!1,configurable:!0}),Object.defineProperty(mC.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(mC.prototype,"path",{get:function(){return this.K_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(mC.prototype,"parent",{get:function(){return new qC(this.firestore,this.j_,this.K_.path.q())},enumerable:!1,configurable:!0}),mC.prototype.withConverter=function(t){return new mC(this.firestore,t,this.K_)},mC),yC=(gC.prototype.withConverter=function(t){return new gC(this.firestore,t,this.tf)},gC);function gC(t,e,n){this.j_=e,this.tf=n,this.type="query",this.firestore=t}function mC(t,e,n){this.j_=e,this.K_=n,this.type="document",this.firestore=t}function _C(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r].sf(t);return t}var bC,wC,EC,IC,TC,SC=(fo(xC,TC=lt=function(){}),xC.prototype.sf=function(t){var e=XC(t.firestore),e=function(t,e,n,r,i,o){if(r.tt()){if("array-contains"===i||"array-contains-any"===i)throw new Rv(Ov.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){FC(o,i);for(var s=[],a=0,u=o;a<u.length;a++){var c=u[a];s.push(MC(n,t,c))}h={arrayValue:{values:s}}}else h=MC(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||FC(o,i),h=hN(e,"where",o,"in"===i||"not-in"===i);var h=__.create(r,i,h);return function(t,e){if(e.An()){var n=u_(t);if(null!==n&&!n.isEqual(e.field))throw new Rv(Ov.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");null!==(n=a_(t))&&UC(0,e.field,n)}if(null!==(t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}())))throw t===e.op?new Rv(Ov.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Rv(Ov.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(t.tf,e,t.firestore.R_,this.rf,this.cf,this.uf);return new yC(t.firestore,t.j_,(e=(t=t.tf).filters.concat([e]),new Zm(t.path,t.collectionGroup,t.Tn.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},xC),CC=(fo(DC,IC=lt),DC.prototype.sf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Rv(Ov.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Rv(Ov.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new G_(e,n);return e=r,null!==a_(n=t)||null!==(t=u_(n))&&UC(0,t,e.field),r}(t.tf,this.rf,this.af);return new yC(t.firestore,t.j_,(e=(t=t.tf).Tn.concat([e]),new Zm(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},DC),NC=(fo(PC,EC=lt),PC.prototype.sf=function(t){return new yC(t.firestore,t.j_,f_(t.tf,this.hf,this.lf))},PC),AC=(fo(RC,wC=lt),RC.prototype.sf=function(t){var e=LC(t,this.type,this._f,this.ff);return new yC(t.firestore,t.j_,(t=t.tf,new Zm(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},RC),kC=(fo(OC,bC=lt),OC.prototype.sf=function(t){var e=LC(t,this.type,this._f,this.ff);return new yC(t.firestore,t.j_,(t=t.tf,new Zm(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},OC);function OC(t,e,n){var r=this;return(r=bC.call(this)||this).type=t,r._f=e,r.ff=n,r}function RC(t,e,n){var r=this;return(r=wC.call(this)||this).type=t,r._f=e,r.ff=n,r}function PC(t,e,n){var r=this;return(r=EC.call(this)||this).type=t,r.hf=e,r.lf=n,r}function DC(t,e){var n=this;return(n=IC.call(this)||this).rf=t,n.af=e,n.type="orderBy",n}function xC(t,e,n){var r=this;return(r=TC.call(this)||this).rf=t,r.cf=e,r.uf=n,r.type="where",r}function LC(t,c,e,n){if(e[0]instanceof RT&&(e[0]=e[0].o_),e[0]instanceof US)return function(t,e,n,r){if(!n)throw new Rv(Ov.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=h_(t);o<s.length;o++){var a=s[o];if(a.field.tt())i.push(_g(e,n.key));else{var u=n.field(a.field);if(ag(u))throw new Rv(Ov.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u)throw a=a.field.J(),new Rv(Ov.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.");i.push(u)}}return new j_(i,r)}(t.tf,t.firestore.R_,e[0].W_,n);var r=XC(t.firestore);return function(t,e,n,r,i,o){var s=t.Tn;if(i.length>s.length)throw new Rv(Ov.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.tt()){if("string"!=typeof c)throw new Rv(Ov.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!c_(t)&&-1!==c.indexOf("/"))throw new Rv(Ov.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Xv.Y(c));if(!Zv.ot(h))throw new Rv(Ov.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new Zv(h),a.push(_g(e,h))}else c=hN(n,r,c),a.push(c)}return new j_(a,o)}(t.tf,t.firestore.R_,r,c,e,n)}function MC(t,e,n){if(n instanceof RT&&(n=n.o_),"string"==typeof n){if(""===n)throw new Rv(Ov.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!c_(e)&&-1!==n.indexOf("/"))throw new Rv(Ov.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");if(e=e.path.child(Xv.Y(n)),!Zv.ot(e))throw new Rv(Ov.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return _g(t,new Zv(e))}if(n instanceof vC)return _g(t,n.K_);throw new Rv(Ov.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+nS(n)+".")}function FC(t,e){if(!Array.isArray(t)||0===t.length)throw new Rv(Ov.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Rv(Ov.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function UC(t,e,n){if(!n.isEqual(e))throw new Rv(Ov.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function jC(t){if(s_(t)&&0===t.Tn.length)throw new Rv(Ov.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var VC,qC=(fo(BC,VC=yC),Object.defineProperty(BC.prototype,"id",{get:function(){return this.tf.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(BC.prototype,"path",{get:function(){return this.tf.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(BC.prototype,"parent",{get:function(){var t=this.nf.q();return t.W()?null:new vC(this.firestore,null,new Zv(t))},enumerable:!1,configurable:!0}),BC.prototype.withConverter=function(t){return new BC(this.firestore,t,this.nf)},BC);function BC(t,e,n){var r=this;return(r=VC.call(this,t,e,i_(n))||this).firestore=t,r.nf=n,r.type="collection",r}function WC(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(JT("collection","path",e),t instanceof ES){var i=Xv.Y.apply(Xv,bo([e],n));return eS(i),new qC(t,null,i)}if(!(t instanceof vC||t instanceof qC))throw new Rv(Ov.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return eS(e=Xv.Y.apply(Xv,bo([t.path],n)).child(Xv.Y(e))),new qC(t.firestore,null,e)}function HC(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(1===arguments.length&&(e=qv.D()),JT("doc","path",e),t instanceof ES){var i=Xv.Y.apply(Xv,bo([e],n));return tS(i),new vC(t,null,new Zv(i))}if(!(t instanceof vC||t instanceof qC))throw new Rv(Ov.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return tS(e=t.nf.child(Xv.Y.apply(Xv,bo([e],n)))),new vC(t.firestore,t instanceof qC?t.j_:null,new Zv(e))}var KC,zC=(fo(GC,KC=zn),GC.prototype.F_=function(t){return new _S(t)},GC.prototype.O_=function(t){return t=this.B_(t,this.firestore.R_),new vC(this.firestore,null,t)},GC);function GC(t){var e=this;return(e=KC.call(this)||this).firestore=t,e}function QC(t,e){return(t instanceof vC||t instanceof qC)&&(e instanceof vC||e instanceof qC)&&t.firestore===e.firestore&&t.path===e.path&&t.j_===e.j_}function YC(t,e){return t instanceof yC&&e instanceof yC&&t.firestore===e.firestore&&p_(t.tf,e.tf)&&t.j_===e.j_}function XC(t){var e=t.S_(),n=ib(t.R_);return new iN(t.R_,!!e.ignoreUndefinedProperties,n)}var JC=/^__.*__$/,$C=(eN.prototype.ef=function(t,e){var n=[];return null!==this.en?n.push(new km(t,this.data,this.en,e)):n.push(new Am(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new xm(t,this.fieldTransforms)),n},eN),ZC=(tN.prototype.ef=function(t,e){return e=[new km(t,this.data,this.en,e)],0<this.fieldTransforms.length&&e.push(new xm(t,this.fieldTransforms)),e},tN);function tN(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}function eN(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}function nN(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Cv()}}var rN=(Object.defineProperty(sN.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(sN.prototype,"a_",{get:function(){return this.settings.a_},enumerable:!1,configurable:!0}),sN.prototype.wf=function(t){return new sN(Object.assign(Object.assign({},this.settings),t),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.en)},sN.prototype.Ef=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t);return(e=this.wf({path:e,__:!1})).Tf(t),e},sN.prototype.If=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t);return(t=this.wf({path:t,__:!1})).df(),t},sN.prototype.mf=function(t){return this.wf({path:void 0,__:!0})},sN.prototype.h_=function(t){return mN(t,this.settings.methodName,this.settings.Af||!1,this.path,this.settings.l_)},sN.prototype.contains=function(e){return void 0!==this.en.find(function(t){return e.j(t)})||void 0!==this.fieldTransforms.find(function(t){return e.j(t.field)})},sN.prototype.df=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Tf(this.path.get(t))},sN.prototype.Tf=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(nN(this.a_)&&JC.test(t))throw this.h_('Document fields cannot begin and end with "__"')},sN),iN=(oN.prototype.Rf=function(t,e,n,r){return void 0===r&&(r=!1),new rN({a_:t,methodName:e,l_:n,path:$v.X(),__:!1,Af:r},this.t,this.serializer,this.ignoreUndefinedProperties)},oN);function oN(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||ib(t)}function sN(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.df(),this.fieldTransforms=i||[],this.en=o||[]}function aN(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Rf(o.merge||o.mergeFields?2:0,e,n,i);dN("Data must be an object, but it was:",s,r);var a,u,r=fN(r,s);if(o.merge)a=new ym(s.en),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=vN(e,l[h],n);if(!s.contains(f))throw new Rv(Ov.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");_N(c,f)||c.push(f)}a=new ym(c),u=s.fieldTransforms.filter(function(t){return a.un(t.field)})}else a=null,u=s.fieldTransforms;return new $C(new qm(r),a,u)}function uN(t,r,i,e){var o=t.Rf(1,r,i);dN("Data must be an object, but it was:",o,e);var s=[],a=new Bm;return og(e,function(t,e){var n=gN(r,t,i);e instanceof RT&&(e=e.o_),t=o.If(n),e instanceof aS?s.push(n):null!=(t=lN(e,t))&&(s.push(n),a.set(n,t))}),e=new ym(s),new ZC(a.hn(),e,o.fieldTransforms)}function cN(t,e,n,r,i,o){var s=t.Rf(1,e,n),a=[vN(e,r,n)],u=[i];if(o.length%2!=0)throw new Rv(Ov.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(vN(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=new Bm,v=a.length-1;0<=v;--v)_N(p,a[v])||(h=a[v],(l=u[v])instanceof RT&&(l=l.o_),f=s.If(h),l instanceof aS?p.push(h):null!=(f=lN(l,f))&&(p.push(h),d.set(h,f)));return i=new ym(p),new ZC(d.hn(),i,s.fieldTransforms)}function hN(t,e,n,r){return void 0===r&&(r=!1),lN(n,t.Rf(r?4:3,e))}function lN(s,t){if(s instanceof RT&&(s=s.o_),pN(s))return dN("Unsupported field value:",t,s),fN(s,t);if(s instanceof sS)return function(t,e){if(!nN(e.a_))throw e.h_(t.c_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.c_+"() is not currently supported inside arrays");(t=t.u_(e))&&e.fieldTransforms.push(t)}(s,t),null;if(t.path&&t.en.push(t.path),s instanceof Array){if(t.settings.__&&4!==t.a_)throw t.h_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=lN(i[r],t.mf(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(t instanceof RT&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Og(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Qv.fromDate(t);return{timestampValue:Rg(e.serializer,n)}}if(t instanceof Qv){var r=new Qv(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Rg(e.serializer,r)}}if(t instanceof mS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _S)return{bytesValue:Pg(e.serializer,t.T_)};if(t instanceof vC){if(n=e.t,!(r=t.firestore.R_).isEqual(n))throw e.h_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:xg(t.firestore.R_||e.t,t.K_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+nS(t))}(s,t)}function fN(t,n){var r={};return sg(t)?n.path&&0<n.path.length&&n.en.push(n.path):og(t,function(t,e){null!=(e=lN(e,n.Ef(t)))&&(r[t]=e)}),{mapValue:{fields:r}}}function pN(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Qv||t instanceof mS||t instanceof _S||t instanceof vC||t instanceof sS)}function dN(t,e,n){if(!pN(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))throw"an object"===(n=nS(n))?e.h_(t+" a custom object"):e.h_(t+" "+n);var r}function vN(t,e,n){if(e instanceof RT&&(e=e.o_),e instanceof GS)return e.G_;if("string"==typeof e)return gN(t,e);throw mN("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var yN=new RegExp("[~\\*/\\[\\]]");function gN(e,n,r){if(0<=n.search(yN))throw mN("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(GS.bind.apply(GS,bo([void 0],n.split("."))))).G_}catch(t){throw mN("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function mN(t,e,n,r,i){var o=r&&!r.W(),s=void 0!==i,e="Function "+e+"() called with invalid data";return n&&(e+=" (via `toFirestore()`)"),n="",(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new Rv(Ov.INVALID_ARGUMENT,(e+=". ")+t+n)}function _N(t,e){return t.some(function(t){return t.isEqual(e)})}var bN=(SN.prototype.pf=function(r){return vo(this,void 0,void 0,function(){var e,n=this;return yo(this,function(t){switch(t.label){case 0:if(this.vf(),0<this.mutations.length)throw new Rv(Ov.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return vo(this,void 0,void 0,function(){var r,e,n,i,o;return yo(this,function(t){switch(t.label){case 0:return e=Vg((r=s).serializer)+"/documents",n={documents:a.map(function(t){return Mg(r.serializer,t)})},[4,r.Ru("BatchGetDocuments",e,n)];case 1:return n=t.sent(),i=new Map,n.forEach(function(t){var e,n,t=(n=r.serializer,"found"in t?function(t,e){Nv(!!e.found),e.found.name,e.found.updateTime;var n=Fg(t,e.found.name),t=Dg(e.found.updateTime),e=new qm({mapValue:{fields:e.found.fields}});return new Xm(n,t,e,{})}(n,t):"missing"in t?(e=n,Nv(!!(n=t).missing),Nv(!!n.readTime),e=Fg(e,n.missing),n=Dg(n.readTime),new Jm(e,n)):Cv());i.set(t.key.toString(),t)}),o=[],[2,(a.forEach(function(t){Nv(!!(t=i.get(t.toString()))),o.push(t)}),o)]}})})}(this.Nu,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof Jm||t instanceof Xm?n.bf(t):Cv()}),e)]}})})},SN.prototype.set=function(t,e){this.write(e.ef(t,this.rn(t))),this.Vf.add(t.toString())},SN.prototype.update=function(t,e){try{this.write(e.ef(t,this.Sf(t)))}catch(t){this.yf=t}this.Vf.add(t.toString())},SN.prototype.delete=function(t){this.write([new jm(t,this.rn(t))]),this.Vf.add(t.toString())},SN.prototype.commit=function(){return vo(this,void 0,void 0,function(){var e,n=this;return yo(this,function(t){switch(t.label){case 0:if(this.vf(),this.yf)throw this.yf;return e=this.Pf,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=Zv.st(e),n.mutations.push(new Vm(e,n.rn(e)))}),[4,function(i,o){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return n=Vg((e=i).serializer)+"/documents",r={writes:o.map(function(t){return Wg(e.serializer,t)})},[4,e.Au("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.Nu,this.mutations)];case 1:return t.sent(),this.gf=!0,[2]}})})},SN.prototype.bf=function(t){var e;if(t instanceof Xm)e=t.version;else{if(!(t instanceof Jm))throw Cv();e=Yv.min()}var n=this.Pf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Rv(Ov.ABORTED,"Document version changed between two reads.")}else this.Pf.set(t.key.toString(),e)},SN.prototype.rn=function(t){var e=this.Pf.get(t.toString());return!this.Vf.has(t.toString())&&e?bm.updateTime(e):bm.on()},SN.prototype.Sf=function(t){var e=this.Pf.get(t.toString());if(this.Vf.has(t.toString())||!e)return bm.exists(!0);if(e.isEqual(Yv.min()))throw new Rv(Ov.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bm.updateTime(e)},SN.prototype.write=function(t){this.vf(),this.mutations=this.mutations.concat(t)},SN.prototype.vf=function(){},SN),wN=(TN.prototype.run=function(){this.Cf()},TN.prototype.Cf=function(){var t=this;this.Si.Bs(function(){return vo(t,void 0,void 0,function(){var e,n,r=this;return yo(this,function(t){return e=new bN(this.Nu),(n=this.Nf(e))&&n.then(function(t){r.di.Ri(function(){return e.commit().then(function(){r.Ti.resolve(t)}).catch(function(t){r.xf(t)})})}).catch(function(t){r.xf(t)}),[2]})})})},TN.prototype.Nf=function(t){try{var e=this.updateFunction(t);return!sy(e)&&e.catch&&e.then?e:(this.Ti.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ti.reject(t),null}},TN.prototype.xf=function(t){var e=this;0<this.Df&&this.Ff(t)?(--this.Df,this.di.Ri(function(){return e.Cf(),Promise.resolve()})):this.Ti.reject(t)},TN.prototype.Ff=function(t){return"FirebaseError"===t.name&&("aborted"===(t=t.code)||"failed-precondition"===t||!by(t))},TN),EN=(IN.prototype.getConfiguration=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,this.g.promise];case 1:return[2,(t.sent(),{di:this.di,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}})})},IN.prototype.Mf=function(t){var e=this;this.Of=t,this.g.promise.then(function(){return e.Of(e.user)})},IN.prototype.kf=function(){if(this.di.Ci)throw new Rv(Ov.FAILED_PRECONDITION,"The client has already been terminated.")},IN.prototype.terminate=function(){var t=this;this.di.Oi();var n=new $_;return this.di.Ni(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.$f?[4,this.$f.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.Lf?[4,this.Lf.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.R(),n.resolve(),[3,6];case 5:return e=Fb(t.sent(),"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},IN);function IN(t,e,n){var r=this;this.credentials=t,this.di=e,this.Fl=n,this.user=gv.UNAUTHENTICATED,this.clientId=qv.D(),this.Of=function(){},this.g=new $_,this.credentials.A(function(t){Ev("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.Of(t)),r.g.resolve()})}function TN(t,e,n,r){this.di=t,this.Nu=e,this.updateFunction=n,this.Ti=r,this.Df=5,this.Si=new vb(this.di,"transaction_retry")}function SN(t){this.Nu=t,this.Pf=new Map,this.mutations=[],this.gf=!1,this.yf=null,this.Vf=new Set}function CN(r,i){return vo(this,void 0,void 0,function(){var e,n=this;return yo(this,function(t){switch(t.label){case 0:return r.di.Li(),Ev("FirestoreClient","Initializing OfflineComponentProvider"),[4,r.getConfiguration()];case 1:return e=t.sent(),[4,i.initialize(e)];case 2:return t.sent(),r.Mf(function(e){return r.di.Mi(function(){return vo(n,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,TE(i.Cu,e)];case 1:return t.sent(),[2]}})})})}),i.persistence.tc(function(){return r.terminate()}),r.Lf=i,[2]}})})}function NN(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return r.di.Li(),[4,AN(r)];case 1:return e=t.sent(),Ev("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.Mf(function(t){return r.di.Mi(function(){return function(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return(e=r).di.Li(),Ev("RemoteStore","RemoteStore received new credentials"),n=ZE(e),e.Mu.add(3),[4,zE(e)];case 1:return t.sent(),n&&e.Bu.set("Unknown"),[4,e.xu.s_(i)];case 2:return t.sent(),e.Mu.delete(3),[4,KE(e)];case 3:return t.sent(),[2]}})})}(i.Oh,t)})}),r.$f=i,[2]}})})}function AN(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return e.Lf?[3,2]:(Ev("FirestoreClient","Using default OfflineComponentProvider"),[4,CN(e,new CT)]);case 1:t.sent(),t.label=2;case 2:return[2,e.Lf]}})})}function kN(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return e.$f?[3,2]:(Ev("FirestoreClient","Using default OnlineComponentProvider"),[4,NN(e,new kT)]);case 1:t.sent(),t.label=2;case 2:return[2,e.$f]}})})}function ON(t){return AN(t).then(function(t){return t.persistence})}function RN(t){return AN(t).then(function(t){return t.Cu})}function PN(t){return kN(t).then(function(t){return t.Oh})}function DN(t){return kN(t).then(function(t){return t.ga})}function xN(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,kN(r)];case 1:return e=t.sent(),[2,((n=e.Mh).Ju=function(s,a){return vo(this,void 0,void 0,function(){var e,n,r,i,o;return yo(this,function(t){switch(t.label){case 0:return e=oT(s),(o=e.Bh.get(a))?(n=o.targetId,e.kh.Wa(n),r=o.view.xh(),[3,4]):[3,1];case 1:return[4,CE(e.Cu,l_(a))];case 2:return i=t.sent(),o=e.kh.Wa(i.targetId),n=i.targetId,[4,KI(e,a,n,"current"===o)];case 3:r=t.sent(),e.Jh&&GE(e.Oh,i),t.label=4;case 4:return[2,r]}})})}.bind(null,e.ga),n.Zu=function(i,o){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return n=(e=i).Bh.get(o),1<(r=e.qh.get(n.targetId)).length?[2,(e.qh.set(n.targetId,r.filter(function(t){return!p_(t,o)})),void e.Bh.delete(o))]:e.Jh?(e.kh.Ga(n.targetId),e.kh.Ba(n.targetId)?[3,2]:[4,NE(e.Cu,n.targetId,!1).then(function(){e.kh.Ha(n.targetId),QE(e.Oh,n.targetId),$I(e,n.targetId)}).catch(RE)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return $I(e,n.targetId),[4,NE(e.Cu,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.ga),n)]}})})}function LN(n,r,i,o,s){var t=new OT({next:function(t){r.Ri(function(){return fI(n,a)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new Rv(Ov.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new Rv(Ov.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),a=new dI(i_(i.path),t,{includeMetadataChanges:!0,oa:!0});return lI(n,a)}function MN(e,n,t,r,i){var o=new OT({next:function(t){n.Ri(function(){return fI(e,s)}),t.fromCache&&"server"===r.source?i.reject(new Rv(Ov.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new dI(t,o,{includeMetadataChanges:!0,oa:!0});return lI(e,s)}var FN=(UN.prototype.set=function(t,e,n){return this.Kf(),e=OA((t=jN(t,this.U_)).j_,e,n),n=aN(this.Qf,"WriteBatch.set",t.K_,e,null!==t.j_,n),this.qf=this.qf.concat(n.ef(t.K_,bm.on())),this},UN.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return this.Kf(),t=jN(t,this.U_),e instanceof RT&&(e=e.o_),e="string"==typeof e||e instanceof GS?cN(this.Qf,"WriteBatch.update",t.K_,e,n,r):uN(this.Qf,"WriteBatch.update",t.K_,e),this.qf=this.qf.concat(e.ef(t.K_,bm.exists(!0))),this},UN.prototype.delete=function(t){return this.Kf(),t=jN(t,this.U_),this.qf=this.qf.concat(new jm(t.K_,bm.on())),this},UN.prototype.commit=function(){return this.Kf(),this.Uf=!0,0<this.qf.length?this.Bf(this.qf):Promise.resolve()},UN.prototype.Kf=function(){if(this.Uf)throw new Rv(Ov.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},UN);function UN(t,e){this.U_=t,this.Bf=e,this.qf=[],this.Uf=!1,this.Qf=XC(t)}function jN(t,e){if(t instanceof RT&&(t=t.o_),t.firestore!==e)throw new Rv(Ov.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var VN,qN,BN=(QN.prototype.get=function(t){var e=this,n=jN(t,this.U_),r=new zC(this.U_);return this.Wf.pf([n.K_]).then(function(t){if(!t||1!==t.length)return Cv();if((t=t[0])instanceof Jm)return new US(e.U_,r,n.K_,null,n.j_);if(t instanceof Xm)return new US(e.U_,r,t.key,t,n.j_);throw Cv()})},QN.prototype.set=function(t,e,n){return e=OA((t=jN(t,this.U_)).j_,e,n),n=aN(this.Qf,"Transaction.set",t.K_,e,null!==t.j_,n),this.Wf.set(t.K_,n),this},QN.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t=jN(t,this.U_),e instanceof RT&&(e=e.o_),e="string"==typeof e||e instanceof GS?cN(this.Qf,"Transaction.update",t.K_,e,n,r):uN(this.Qf,"Transaction.update",t.K_,e),this.Wf.update(t.K_,e),this},QN.prototype.delete=function(t){return t=jN(t,this.U_),this.Wf.delete(t.K_),this},fo(GN,qN=QN),GN.prototype.get=function(t){var e=this,n=jN(t,this.U_),r=new cC(this.U_);return qN.prototype.get.call(this,t).then(function(t){return new eC(e.U_,r,n.K_,t.W_,new vA(!1,!1),n.j_)})},GN),WN=(zN.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){$S(t);var n=YN(t),r=t.S_();return JS(n,t=new kT,new NT(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},zN.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){$S(t);var e=YN(t),n=t.S_();return JS(e,t=new kT,new AT(t,n.cacheSizeBytes))}(t.o_)},zN.prototype.clearIndexedDbPersistence=function(t){return function(n){var t=this;if(n.y_&&!n.V_)throw new Rv(Ov.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new $_;return n.z_.Ni(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return yb.Gs()?(e=n+"main",[4,yb.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(bE(n.R_,n.I_))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise}(t.o_)},zN),HN=(fo(KN,VN=RT),Object.defineProperty(KN.prototype,"R_",{get:function(){return this.o_.R_},enumerable:!1,configurable:!0}),KN.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.b_()),t)).merge,this.o_.v_(t)},KN.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.b_().host&&Tv("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},KN.prototype.enableNetwork=function(){return function(r){var t=this;return r.di.enqueue(function(){return vo(t,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,ON(r)];case 1:return e=t.sent(),[4,PN(r)];case 2:return n=t.sent(),[2,(e.ec(!0),(t=n).Mu.delete(0),KE(t))]}})})})}(YN(this.o_))},KN.prototype.disableNetwork=function(){return function(r){var t=this;return r.di.enqueue(function(){return vo(t,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,ON(r)];case 1:return e=t.sent(),[4,PN(r)];case 2:return n=t.sent(),[2,(e.ec(!1),function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return(e=n).Mu.add(0),[4,zE(e)];case 1:return t.sent(),e.Bu.set("Offline"),[2]}})})}(n))]}})})})}(YN(this.o_))},KN.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ZT("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.jf.enableMultiTabIndexedDbPersistence(this):this.jf.enableIndexedDbPersistence(this,n)},KN.prototype.clearPersistence=function(){return this.jf.clearIndexedDbPersistence(this)},KN.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},KN.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new $_;return n.di.Ri(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=YI,[4,DN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(YN(this.o_))},KN.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,r=YN(t),e=ob(e)?e:{next:e},i=new OT(e);return t.z_.Ri(function(){return vo(n,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Hu.add(e),e.next()},[4,xN(r)];case 1:return e.apply(void 0,[t.sent(),i]),[2]}})})}),function(){i.r_(),t.z_.Ri(function(){return vo(n,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Hu.delete(e)},[4,xN(r)];case 1:return e.apply(void 0,[t.sent(),i]),[2]}})})})}}(this.o_,t)},Object.defineProperty(KN.prototype,"app",{get:function(){if(!this.Gf)throw new Rv(Ov.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Gf},enumerable:!1,configurable:!0}),KN.prototype.collection=function(t){try{return new wA(this,WC(this.o_,t))}catch(t){throw sA(t,"collection()","Firestore.collection()")}},KN.prototype.doc=function(t){try{return new nA(this,HC(this.o_,t))}catch(t){throw sA(t,"doc()","Firestore.doc()")}},KN.prototype.collectionGroup=function(t){try{return new mA(this,function(t,e){if(JT("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new Rv(Ov.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new yC(t,null,new Zm(Xv.X(),e))}(this.o_,t))}catch(t){throw sA(t,"collectionGroup()","Firestore.collectionGroup()")}},KN.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new $_;return n.di.Ri(function(){return vo(t,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,kN(n).then(function(t){return t.Nu})];case 1:return e=t.sent(),new wN(n.di,e,r,i).run(),[2]}})})}),i.promise}(YN(n=this.o_),function(t){return t=new BN(n,t),e(new tA(r,t))})},KN.prototype.batch=function(){var e=this;return YN(this.o_),new eA(new FN(this.o_,function(t){return pC(e.o_,t)}))},KN);function KN(t,e,n){var r=this;return(r=VN.call(this,e)||this).jf=n,r.INTERNAL={delete:function(){return r.terminate()}},t instanceof yv||(r.Gf=t),r}function zN(){}function GN(t,e){var n=this;return(n=qN.call(this,t,e)||this).U_=t,n}function QN(t,e){this.U_=t,this.Wf=e,this.Qf=XC(t)}function YN(t){return t.H_||XN(t),t.H_.kf(),t.H_}function XN(t){var e,n,r=t.S_(),r=(e=t.R_,n=t.I_,new vv(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.H_=new EN(t.P_,t.z_,r)}var JN,$N,ZN,tA=(fo(oA,ZN=RT),oA.prototype.get=function(t){var e=this,t=kA(t);return this.o_.get(t).then(function(t){return new yA(e.U_,t)})},oA.prototype.set=function(t,e,n){return t=kA(t),n?($T("Transaction.set",n),this.o_.set(t,e,n)):this.o_.set(t,e),this},oA.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=kA(t);return 2===arguments.length?this.o_.update(o,e):(t=this.o_).update.apply(t,bo([o,e,n],r)),this},oA.prototype.delete=function(t){return t=kA(t),this.o_.delete(t),this},oA),eA=(fo(iA,$N=RT),iA.prototype.set=function(t,e,n){return t=kA(t),n?($T("WriteBatch.set",n),this.o_.set(t,e,n)):this.o_.set(t,e),this},iA.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=kA(t);return 2===arguments.length?this.o_.update(o,e):(t=this.o_).update.apply(t,bo([o,e,n],r)),this},iA.prototype.delete=function(t){return t=kA(t),this.o_.delete(t),this},iA.prototype.commit=function(){return this.o_.commit()},iA),nA=(fo(rA,JN=RT),rA.zf=function(t,e,n){if(t.length%2!=0)throw new Rv(Ov.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.J()+" has "+t.length);return new rA(e,new vC(e.o_,n,new Zv(t)))},rA.q_=function(t,e,n){return new rA(e,new vC(e.o_,n,t))},Object.defineProperty(rA.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(rA.prototype,"parent",{get:function(){return new wA(this.firestore,this.o_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(rA.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),rA.prototype.collection=function(t){try{return new wA(this.firestore,WC(this.o_,t))}catch(t){throw sA(t,"collection()","DocumentReference.collection()")}},rA.prototype.isEqual=function(t){return t instanceof RT&&(t=t.o_),t instanceof vC&&QC(this.o_,t)},rA.prototype.set=function(t,e){e=$T("DocumentReference.set",e);try{return n=this.o_,r=t,i=e,o=rS(n.firestore,QS),r=OA(n.j_,r,i),pC(o,aN(XC(o),"setDoc",n.K_,r,null!==n.j_,i).ef(n.K_,bm.on()))}catch(t){throw sA(t,"setDoc()","DocumentReference.set()")}var n,r,i,o},rA.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?lC(this.o_,t):lC.apply(void 0,bo([this.o_,t,e],n))}catch(t){throw sA(t,"updateDoc()","DocumentReference.update()")}},rA.prototype.delete=function(){return pC(rS((t=this.o_).firestore,QS),[new jm(t.K_,bm.on())]);var t},rA.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=aA(t),i=uA(t,function(t){return new yA(e.firestore,new eC(e.firestore.o_,e.Q_,t.K_,t.W_,t.metadata,e.o_.j_))});return fC(this.o_,r,i)},rA.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){var t=this,n=rS(e.firestore,QS),r=YN(n),i=new cC(n),o=new $_;return n.z_.Ri(function(){return vo(t,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,RN(r)];case 1:return[4,function(i,o,s){return vo(this,void 0,void 0,function(){var r;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=o,(n=i).persistence.runTransaction("read document","readonly",function(t){return n.Oc.cs(t,e)}))];case 1:return(r=t.sent())instanceof Xm?s.resolve(r):r instanceof Jm?s.resolve(null):s.reject(new Rv(Ov.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=Fb(r=t.sent(),"Failed to get document '"+o+" from cache"),s.reject(r),[3,3];case 3:return[2]}var e,n})})}(t.sent(),e.K_,o)];case 2:return t.sent(),[2]}})})}),o.promise.then(function(t){return new eC(n,i,e.K_,t,new vA(t instanceof Xm&&t.an,!0),e.j_)})}:"server"===(null==t?void 0:t.source)?function(e){var t=this,n=rS(e.firestore,QS),r=YN(n),i=new $_;return n.z_.Ri(function(){return vo(t,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,xN(r)];case 1:return[4,LN(t.sent(),n.z_,e.K_,{source:"server"},i)];case 2:return t.sent(),[2]}})})}),i.promise.then(function(t){return dC(n,e,t)})}:function(e){var t=this,n=rS(e.firestore,QS),r=YN(n),i=new $_;return n.z_.Ri(function(){return vo(t,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,xN(r)];case 1:return[4,LN(t.sent(),n.z_,e.K_,{source:"default"},i)];case 2:return t.sent(),[2]}})})}),i.promise.then(function(t){return dC(n,e,t)})})(this.o_).then(function(t){return new yA(e.firestore,new eC(e.firestore.o_,e.Q_,t.K_,t.W_,t.metadata,e.o_.j_))})},rA.prototype.withConverter=function(t){return new rA(this.firestore,this.o_.withConverter(t))},rA);function rA(t,e){var n=this;return(n=JN.call(this,e)||this).firestore=t,n.Q_=new FS(t),n}function iA(){return null!==$N&&$N.apply(this,arguments)||this}function oA(t,e){var n=this;return(n=ZN.call(this,e)||this).U_=t,n}function sA(t,e,n){return t.message=t.message.replace(e,n),t}function aA(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ob(r))return r}return{}}function uA(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=ob(t[0])?t[0]:ob(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var cA,hA,lA,fA,pA,dA,vA=(AA.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},AA),yA=(fo(NA,dA=RT),Object.defineProperty(NA.prototype,"ref",{get:function(){return new nA(this.U_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(NA.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(NA.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(NA.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),NA.prototype.data=function(t){return this.o_.data(t)},NA.prototype.get=function(t,e){return this.o_.get(t,e)},NA.prototype.isEqual=function(t){return aC(this.o_,t.o_)},NA),gA=(fo(CA,pA=yA),CA.prototype.data=function(t){return this.o_.data(t)},CA),mA=(fo(SA,fA=RT),SA.prototype.where=function(t,e,n){try{return new SA(this.firestore,_C(this.o_,(r=n,i=e,o=KS("where",t),new SC(o,i,r))))}catch(t){throw sA(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},SA.prototype.orderBy=function(n,t){try{return new SA(this.firestore,_C(this.o_,function(t){void 0===t&&(t="asc");var e=t,t=KS("orderBy",n);return new CC(t,e)}(t)))}catch(n){throw sA(n,/(orderBy|where)\(\)/,"Query.$1()")}},SA.prototype.limit=function(t){try{return new SA(this.firestore,_C(this.o_,(iS("limit",e=t),new NC("limit",e,"F"))))}catch(t){throw sA(t,"limit()","Query.limit()")}var e},SA.prototype.limitToLast=function(t){try{return new SA(this.firestore,_C(this.o_,(iS("limitToLast",e=t),new NC("limitToLast",e,"L"))))}catch(t){throw sA(t,"limitToLast()","Query.limitToLast()")}var e},SA.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new SA(this.firestore,_C(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new AC("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw sA(t,"startAt()","Query.startAt()")}},SA.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new SA(this.firestore,_C(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new AC("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw sA(t,"startAfter()","Query.startAfter()")}},SA.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new SA(this.firestore,_C(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kC("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw sA(t,"endBefore()","Query.endBefore()")}},SA.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new SA(this.firestore,_C(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kC("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw sA(t,"endAt()","Query.endAt()")}},SA.prototype.isEqual=function(t){return YC(this.o_,t.o_)},SA.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){var t=this,n=rS(e.firestore,QS),r=YN(n),i=new cC(n),o=new $_;return n.z_.Ri(function(){return vo(t,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,RN(r)];case 1:return[4,function(r,i,o){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,AE(r,i,!0)];case 1:return n=t.sent(),e=new PI(i,n.Bc),n=e.gh(n.documents),n=e.Zn(n,!1),o.resolve(n.snapshot),[3,3];case 2:return n=Fb(n=t.sent(),"Failed to execute query '"+i+" against cache"),o.reject(n),[3,3];case 3:return[2]}})})}(t.sent(),e.tf,o)];case 2:return t.sent(),[2]}})})}),o.promise.then(function(t){return new rC(n,i,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){var t=this,n=rS(e.firestore,QS),r=YN(n),i=new cC(n),o=new $_;return n.z_.Ri(function(){return vo(t,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,xN(r)];case 1:return[4,MN(t.sent(),n.z_,e.tf,{source:"server"},o)];case 2:return t.sent(),[2]}})})}),o.promise.then(function(t){return new rC(n,i,e,t)})}:function(e){var t=this,n=rS(e.firestore,QS),r=YN(n),i=new cC(n);jC(e.tf);var o=new $_;return n.z_.Ri(function(){return vo(t,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,xN(r)];case 1:return[4,MN(t.sent(),n.z_,e.tf,{source:"default"},o)];case 2:return t.sent(),[2]}})})}),o.promise.then(function(t){return new rC(n,i,e,t)})})(this.o_).then(function(t){return new bA(e.firestore,t)})},SA.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=aA(t),i=uA(t,function(t){return new bA(e.firestore,t)});return fC(this.o_,r,i)},SA.prototype.withConverter=function(t){return new SA(this.firestore,this.o_.withConverter(t))},SA),_A=(fo(TA,lA=RT),Object.defineProperty(TA.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(TA.prototype,"doc",{get:function(){return new gA(this.U_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(TA.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(TA.prototype,"newIndex",{get:function(){return this.o_.newIndex},enumerable:!1,configurable:!0}),TA),bA=(fo(IA,hA=RT),Object.defineProperty(IA.prototype,"query",{get:function(){return new mA(this.U_,this.o_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(IA.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(IA.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(IA.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(IA.prototype,"docs",{get:function(){var e=this;return this.o_.docs.map(function(t){return new gA(e.U_,t)})},enumerable:!1,configurable:!0}),IA.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map(function(t){return new _A(e.U_,t)})},IA.prototype.forEach=function(e,n){var r=this;this.o_.forEach(function(t){e.call(n,new gA(r.U_,t))})},IA.prototype.isEqual=function(t){return aC(this.o_,t.o_)},IA),wA=(fo(EA,cA=mA),Object.defineProperty(EA.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(EA.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),Object.defineProperty(EA.prototype,"parent",{get:function(){var t=this.o_.parent;return t?new nA(this.firestore,t):null},enumerable:!1,configurable:!0}),EA.prototype.doc=function(t){try{return new nA(this.firestore,void 0===t?HC(this.o_):HC(this.o_,t))}catch(t){throw sA(t,"doc()","CollectionReference.doc()")}},EA.prototype.add=function(t){var e,n=this,r=this.o_,i=t;return t=rS(r.firestore,QS),e=HC(r),i=OA(r.j_,i),pC(t,aN(XC(r.firestore),"addDoc",e.K_,i,null!==r.j_,{}).ef(e.K_,bm.exists(!1))).then(function(){return e}).then(function(t){return new nA(n.firestore,t)})},EA.prototype.isEqual=function(t){return QC(this.o_,t.o_)},EA.prototype.withConverter=function(t){return new EA(this.firestore,this.o_.withConverter(t))},EA);function EA(t,e){var n=this;return(n=cA.call(this,t,e)||this).firestore=t,n.o_=e,n}function IA(t,e){var n=this;return(n=hA.call(this,e)||this).U_=t,n}function TA(t,e){var n=this;return(n=lA.call(this,e)||this).U_=t,n}function SA(t,e){var n=this;return(n=fA.call(this,e)||this).firestore=t,n}function CA(){return null!==pA&&pA.apply(this,arguments)||this}function NA(t,e){var n=this;return(n=dA.call(this,e)||this).U_=t,n}function AA(t,e){this.hasPendingWrites=t,this.fromCache=e}function kA(t){return t instanceof RT&&(t=t.o_),rS(t,vC)}function OA(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var RA,PA,lt=(fo(xA,PA=RT),xA.documentId=function(){return new xA($v.et().J())},xA.prototype.isEqual=function(t){return t instanceof RT&&(t=t.o_),t instanceof GS&&this.o_.G_.isEqual(t.G_)},xA),zn=(fo(DA,RA=RT),DA.serverTimestamp=function(){var t=new dS("serverTimestamp");return t.c_="FieldValue.serverTimestamp",new DA(t)},DA.delete=function(){var t=new aS("deleteField");return t.c_="FieldValue.delete",new DA(t)},DA.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vS("arrayUnion",t)}.apply(void 0,t);return n.c_="FieldValue.arrayUnion",new DA(n)},DA.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yS("arrayRemove",t)}.apply(void 0,t);return n.c_="FieldValue.arrayRemove",new DA(n)},DA.increment=function(t){return(t=new gS("increment",t)).c_="FieldValue.increment",new DA(t)},DA.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},DA),iu={Firestore:HN,GeoPoint:mS,Timestamp:Qv,Blob:MS,Transaction:tA,WriteBatch:eA,DocumentReference:nA,DocumentSnapshot:yA,Query:mA,QueryDocumentSnapshot:gA,QuerySnapshot:bA,CollectionReference:wA,FieldPath:lt,FieldValue:zn,setLogLevel:function(t){bv.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function DA(){return null!==RA&&RA.apply(this,arguments)||this}function xA(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return PA.call(this,new(GS.bind.apply(GS,bo([void 0],t))))||this}(ft=Vl).INTERNAL.registerComponent(new vs("firestore",function(t){return e=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal"),new HN(e,new QS(e,t),new WN);var e},"PUBLIC").setServiceProps(Object.assign({},iu))),ft.registerVersion("@firebase/firestore","2.0.3");var LA,MA={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},FA=(fo(UA,LA=Error),UA);function UA(t,e,n){return e=LA.call(this,e)||this,Object.setPrototypeOf(e,UA.prototype),e.code=t,e.details=n,e}var jA=(VA.prototype.getAuthToken=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},VA.prototype.getInstanceIdToken=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},VA.prototype.getContext=function(){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},VA);function VA(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function qA(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var BA=(WA.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return qA(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},WA.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?qA(t,function(t){return e.decode(t)}):t},WA);function WA(){}var HA,KA=(Object.defineProperty(zA.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),zA.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},zA.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},zA.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},zA.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},zA.prototype.postJSON=function(r,i,o){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:o["Content-Type"]="application/json",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},zA.prototype.call=function(c,h,l){return vo(this,void 0,void 0,function(){var i,o,s,a,u;return yo(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},s={},[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new FA("deadline-exceeded","deadline-exceeded"))},n)}),u=(a={timer:r,promise:e}).timer,a=a.promise,[4,Promise.race([GA(u,this.postJSON(i,o,s)),a,GA(u,this.cancelAllRequests)])];case 2:if(!(a=t.sent()))throw new FA("cancelled","Firebase Functions instance was deleted.");if(u=function(t,e,n){var r=function(){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!MA[a])return new FA("internal","internal");r=MA[a],i=a}"string"==typeof(a=s.message)&&(i=a),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new FA(r,i,o)}(a.status,a.json,this.serializer))throw u;if(!a.json)throw new FA("internal","Response is not valid JSON object.");if(void 0===(u=a.json.data)&&(u=a.json.result),void 0===u)throw new FA("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},zA);function zA(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new BA,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new jA(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}function GA(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}function QA(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function YA(n,r,i){var o,t=new Promise(function(t,e){QA(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function XA(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function JA(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return YA(this[n],t,arguments)})})}function $A(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function ZA(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=YA(t,n,arguments)).then(function(t){if(t)return new ek(t,e.request)});var t,e})})}function tk(t){this._index=t}function ek(t,e){this._cursor=t,this._request=e}function nk(t){this._store=t}function rk(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function ik(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new rk(n)}function ok(t){this._db=t}function sk(t,e,n){var r=(e=YA(indexedDB,"open",[t,e])).request;return r&&(r.onupgradeneeded=function(t){n&&n(new ik(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new ok(t)})}function ak(t){return YA(indexedDB,"deleteDatabase",[t])}iu=Vl,HA=fetch.bind(self),ft={Functions:KA},iu.INTERNAL.registerComponent(new vs("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),t=t.getProvider("messaging");return new KA(n,r,t,e,HA)},"PUBLIC").setServiceProps(ft).setMultipleInstances(!0)),Vl.registerVersion("@firebase/functions","0.6.1"),XA(tk,"_index",["name","keyPath","multiEntry","unique"]),JA(tk,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ZA(tk,"_index",IDBIndex,["openCursor","openKeyCursor"]),XA(ek,"_cursor",["direction","key","primaryKey","value"]),JA(ek,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(ek.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),QA(e._request).then(function(t){if(t)return new ek(t,e._request)})})})}),nk.prototype.createIndex=function(){return new tk(this._store.createIndex.apply(this._store,arguments))},nk.prototype.index=function(){return new tk(this._store.index.apply(this._store,arguments))},XA(nk,"_store",["name","keyPath","indexNames","autoIncrement"]),JA(nk,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ZA(nk,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),$A(nk,"_store",IDBObjectStore,["deleteIndex"]),rk.prototype.objectStore=function(){return new nk(this._tx.objectStore.apply(this._tx,arguments))},XA(rk,"_tx",["objectStoreNames","mode"]),$A(rk,"_tx",IDBTransaction,["abort"]),ik.prototype.createObjectStore=function(){return new nk(this._db.createObjectStore.apply(this._db,arguments))},XA(ik,"_db",["name","version","objectStoreNames"]),$A(ik,"_db",IDBDatabase,["deleteObjectStore","close"]),ok.prototype.transaction=function(){return new rk(this._db.transaction.apply(this._db,arguments))},XA(ok,"_db",["name","version","objectStoreNames"]),$A(ok,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[nk,tk].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[tk,nk].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var uk=1e4,ck="w:0.4.19",hk="FIS_v2",lk="https://firebaseinstallations.googleapis.com/v1",fk=36e5,zn=((lt={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',lt["not-registered"]="Firebase Installation is not registered.",lt["installation-not-found"]="Firebase Installation not found.",lt["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',lt["app-offline"]="Could not process request. Application offline.",lt["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",lt),pk=new Wo("installations","Installations",zn);function dk(t){return t instanceof qo&&t.code.includes("request-failed")}function vk(t){return t=t.projectId,lk+"/projects/"+t+"/installations"}function yk(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function gk(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent().error,[2,pk.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function mk(t){return t=t.apiKey,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _k(t,e){return e=e.refreshToken,(t=mk(t)).append("Authorization",hk+" "+e),t}function bk(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function wk(e){return new Promise(function(t){setTimeout(t,e)})}var Ek=/^[cdef][\w-]{21}$/,Ik="";function Tk(t){return t.appName+"!"+t.appId}var Sk=new Map;function Ck(t,e){var n;Nk(t=Tk(t),e),n=t,t=e,(e=kk())&&e.postMessage({key:n,fid:t}),Ok()}function Nk(t,e){var n,r,i=Sk.get(t);if(i)try{for(var o=go(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var Ak=null;function kk(){return!Ak&&"BroadcastChannel"in self&&((Ak=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){Nk(t.data.key,t.data.fid)}),Ak}function Ok(){0===Sk.size&&Ak&&(Ak.close(),Ak=null)}var Rk="firebase-installations-database",Pk=1,Dk="firebase-installations-store",xk=null;function Lk(){return xk=xk||sk(Rk,Pk,function(t){0===t.oldVersion&&t.createObjectStore(Dk)})}function Mk(o,s){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:return e=Tk(o),[4,Lk()];case 1:return r=t.sent(),[4,(r=(n=r.transaction(Dk,"readwrite")).objectStore(Dk)).get(e)];case 2:return i=t.sent(),[4,r.put(s,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===s.fid||Ck(o,s.fid),[2,s]}})})}function Fk(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return e=Tk(r),[4,Lk()];case 1:return[4,(n=(n=t.sent()).transaction(Dk,"readwrite")).objectStore(Dk).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function Uk(s,a){return vo(this,void 0,void 0,function(){var e,n,r,i,o;return yo(this,function(t){switch(t.label){case 0:return e=Tk(s),[4,Lk()];case 1:return r=t.sent(),[4,(r=(n=r.transaction(Dk,"readwrite")).objectStore(Dk)).get(e)];case 2:return i=t.sent(),void 0!==(o=a(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||Ck(s,o.fid),[2,o]}})})}function jk(i){return vo(this,void 0,void 0,function(){var r,e,n;return yo(this,function(t){switch(t.label){case 0:return[4,Uk(i,function(t){var e,n;return t=qk(t||{fid:function(){try{var t=new Uint8Array(17);return(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16,t=btoa(String.fromCharCode.apply(String,_o(t))).replace(/\+/g,"-").replace(/\//g,"_").substr(0,22),Ek.test(t)?t:Ik}catch(t){return Ik}}(),registrationStatus:0}),e=i,t=0!==(n=t).registrationStatus?1===n.registrationStatus?{installationEntry:n,registrationPromise:function(i){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return[4,Vk(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,wk(100)];case 3:return t.sent(),[4,Vk(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,jk(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(e)}:{installationEntry:n}:navigator.onLine?{installationEntry:n={fid:n.fid,registrationStatus:1,registrationTime:Date.now()},registrationPromise:e=function(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(s){var a=i.fid;return vo(this,void 0,void 0,function(){var e,n,r,i,o;return yo(this,function(t){switch(t.label){case 0:return e=vk(s),n=mk(s),o={fid:a,authVersion:hk,appId:s.appId,sdkVersion:ck},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,bk(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return[2,{fid:(o=t.sent()).fid||a,registrationStatus:2,refreshToken:o.refreshToken,authToken:yk(o.authToken)}];case 3:return[4,gk("Create Installation",i)];case 4:throw t.sent()}})})}(r)];case 1:return e=t.sent(),[2,Mk(r,e)];case 2:return dk(n=t.sent())&&409===n.customData.serverCode?[4,Fk(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,Mk(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(e,n)}:{installationEntry:n,registrationPromise:Promise.reject(pk.create("app-offline"))},r=t.registrationPromise,t.installationEntry})];case 1:return(e=t.sent()).fid!==Ik?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function Vk(t){return Uk(t,function(t){if(!t)throw pk.create("installation-not-found");return qk(t)})}function qk(t){return 1===t.registrationStatus&&t.registrationTime+uk<Date.now()?{fid:t.fid,registrationStatus:0}:t}function Bk(t,a){var u=t.appConfig,c=t.platformLoggerProvider;return vo(this,void 0,void 0,function(){var n,r,i,o,s;return yo(this,function(t){switch(t.label){case 0:return e=(e=a).fid,n=vk(u)+"/"+e+"/authTokens:generate",r=_k(u,a),(s=c.getImmediate({optional:!0}))&&r.append("x-firebase-client",s.getPlatformInfoString()),s={installation:{sdkVersion:ck}},i={method:"POST",headers:r,body:JSON.stringify(s)},[4,bk(function(){return fetch(n,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,yk(s=t.sent())];case 3:return[4,gk("Generate Auth Token",o)];case 4:throw t.sent()}var e})})}function Wk(s,a){return void 0===a&&(a=!1),vo(this,void 0,void 0,function(){var o,e,n;return yo(this,function(t){switch(t.label){case 0:return[4,Uk(s.appConfig,function(t){if(!Kk(t))throw pk.create("not-registered");var e,n,r,i=t.authToken;if(a||2!==(e=i).requestStatus||(n=e,(r=Date.now())<n.creationTime||n.creationTime+n.expiresIn<r+fk)){if(1===i.requestStatus)return o=function(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,Hk(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,wk(100)];case 3:return t.sent(),[4,Hk(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,Wk(n,r)]:[2,e]}})})}(s,a),t;if(!navigator.onLine)throw pk.create("app-offline");return e=t,i={requestStatus:1,requestTime:Date.now()},i=po(po({},e),{authToken:i}),o=function(i,o){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,Bk(i,o)];case 1:return e=t.sent(),r=po(po({},o),{authToken:e}),[4,Mk(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!dk(n=t.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,Fk(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=po(po({},o),{authToken:{requestStatus:0}}),[4,Mk(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(s,i),i}return t})];case 1:return e=t.sent(),o?[4,o]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function Hk(t){return Uk(t,function(t){if(!Kk(t))throw pk.create("not-registered");var e=t.authToken;return 1===e.requestStatus&&e.requestTime+uk<Date.now()?po(po({},t),{authToken:{requestStatus:0}}):t})}function Kk(t){return void 0!==t&&2===t.registrationStatus}function zk(o,s){return vo(this,void 0,void 0,function(){var n,r,i;return yo(this,function(t){switch(t.label){case 0:return e=(e=s).fid,n=vk(o)+"/"+e,i=_k(o,s),r={method:"DELETE",headers:i},[4,bk(function(){return fetch(n,r)})];case 1:return(i=t.sent()).ok?[3,3]:[4,gk("Delete Installation",i)];case 2:throw t.sent();case 3:return[2]}var e})})}function Gk(t){return pk.create("missing-app-config-values",{valueName:t})}(iu=Vl).INTERNAL.registerComponent(new vs("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw Gk("App Configuration");if(!t.name)throw Gk("App Name");try{for(var r=go(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw Gk(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,jk(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||Wk(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return function(e,n){return void 0===n&&(n=!1),vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,jk(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,Wk(e,n)];case 2:return[2,t.sent().token]}})})}(n,t)},delete:function(){return function(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,Uk(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw pk.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw pk.create("app-offline");case 3:return[4,zk(e,n)];case 4:return t.sent(),[4,Fk(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return function(t,e){kk();var n=Tk(t);(t=Sk.get(n))||(t=new Set,Sk.set(n,t)),t.add(e)}(i=n.appConfig,r=t),function(){var t,e=r,n=Tk(t=i);(t=Sk.get(n))&&(t.delete(e),0===t.size&&Sk.delete(n),Ok())};var r,i}}},"PUBLIC")),iu.registerVersion("@firebase/installations","0.4.19");var Qk,zn=((lt={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',lt["only-available-in-window"]="This method is available in a Window context.",lt["only-available-in-sw"]="This method is available in a service worker context.",lt["permission-default"]="The notification permission was not granted and dismissed instead.",lt["permission-blocked"]="The notification permission was not granted and blocked instead.",lt["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",lt["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",lt["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",lt["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",lt["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",lt["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",lt["token-update-no-token"]="FCM returned no token when updating the user to push.",lt["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",lt["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",lt["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",lt["invalid-vapid-key"]="The public VAPID key must be a string.",lt["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",lt),Yk=new Wo("messaging","Messaging",zn),Xk="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Jk="https://fcmregistrations.googleapis.com/v1",$k="FCM_MSG",Zk="google.c.a.c_id";function tO(t){return t=new Uint8Array(t),btoa(String.fromCharCode.apply(String,_o(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(lt=Qk={}).PUSH_RECEIVED="push-received",lt.NOTIFICATION_CLICKED="notification-clicked";var eO="fcm_token_details_db",nO=5,rO="fcm_token_object_Store";var iO="firebase-messaging-database",oO=1,sO="firebase-messaging-store",aO=null;function uO(){return aO=aO||sk(iO,oO,function(t){0===t.oldVersion&&t.createObjectStore(sO)})}function cO(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return e=lO(r),[4,uO()];case 1:return[4,t.sent().transaction(sO).objectStore(sO).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,function(s){return vo(this,void 0,void 0,function(){var o,e=this;return yo(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!t.sent().map(function(t){return t.name}).includes(eO))return[2,null];t.label=2;case 2:return o=null,[4,sk(eO,nO,function(i){return vo(e,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return!(i.oldVersion<2)&&i.objectStoreNames.contains(rO)?[4,(r=i.transaction.objectStore(rO)).index("fcmSenderId").get(s)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:tO(n.vapidKey)}}}else 3!==i.oldVersion&&4!==i.oldVersion||(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:tO(n.auth),p256dh:tO(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:tO(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,ak(eO)];case 4:return t.sent(),[4,ak("fcm_vapid_details_db")];case 5:return t.sent(),[4,ak("undefined")];case 6:return t.sent(),[2,function(t){if(t&&t.subscriptionOptions){var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}}(o)?o:null]}})})}(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,hO(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function hO(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return e=lO(r),[4,uO()];case 1:return[4,(n=(n=t.sent()).transaction(sO,"readwrite")).objectStore(sO).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function lO(t){return t.appConfig.appId}function fO(r,i){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,dO(r)];case 1:e={method:"DELETE",headers:e=t.sent()},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(pO(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,Yk.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),Yk.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function pO(t){return t=t.projectId,Jk+"/projects/"+t+"/registrations"}function dO(t){var n=t.appConfig,r=t.installations;return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function vO(t){var e=t.p256dh,n=t.auth,e={web:{endpoint:t.endpoint,auth:n,p256dh:e}};return(t=t.vapidKey)!==Xk&&(e.web.applicationPubKey=t),e}function yO(u,c,h){return vo(this,void 0,void 0,function(){var o,s,a;return yo(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw Yk.create("permission-blocked");return[4,function(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(c,h)];case 1:return a=t.sent(),[4,cO(u)];case 2:return o=t.sent(),s={vapidKey:h,swScope:c.scope,endpoint:a.endpoint,auth:tO(a.getKey("auth")),p256dh:tO(a.getKey("p256dh"))},o?[3,3]:[2,mO(u,s)];case 3:if(e=o.subscriptionOptions,n=s.vapidKey===e.vapidKey,r=s.endpoint===e.endpoint,i=s.auth===e.auth,e=s.p256dh===e.p256dh,n&&r&&i&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,fO(u,o.token)];case 5:return t.sent(),[3,7];case 6:return a=t.sent(),console.warn(a),[3,7];case 7:return[2,mO(u,s)];case 8:return Date.now()>=o.createTime+6048e5?[2,function(i,o,s){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,s){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:return[4,dO(o)];case 1:e=t.sent(),n=vO(s.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(pO(o.appConfig)+"/"+s.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),Yk.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,Yk.create("token-update-failed",{errorInfo:i});if(!r.token)throw Yk.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=po(po({},i),{token:e,createTime:Date.now()}),[4,hO(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,gO(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:o.token,createTime:Date.now(),subscriptionOptions:s},u,c)]:[2,o.token];case 9:return[2]}var e,n,r,i})})}function gO(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,cO(n)];case 1:return(e=t.sent())?[4,fO(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return e=lO(r),[4,uO()];case 1:return[4,(n=(n=t.sent()).transaction(sO,"readwrite")).objectStore(sO).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function mO(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,function(o,s){return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:return[4,dO(o)];case 1:e=t.sent(),n=vO(s),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(pO(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),Yk.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,Yk.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw Yk.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e={token:e=t.sent(),createTime:Date.now(),subscriptionOptions:r},[4,hO(n,e)];case 2:return t.sent(),[2,e.token]}})})}function _O(t){return"object"==typeof t&&t&&Zk in t}function bO(e){return new Promise(function(t){setTimeout(t,e)})}var wO=(Object.defineProperty(EO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),EO.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw Yk.create("invalid-bg-handler");this.bgMessageHandler=t},EO.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},EO.prototype.getToken=function(){var n;return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,cO(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:Xk,t.label=2;case 2:return[2,yO(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},EO.prototype.deleteToken=function(){return gO(this.firebaseDependencies,self.registration)},EO.prototype.requestPermission=function(){throw Yk.create("only-available-in-window")},EO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Yk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Yk.create("invalid-vapid-key");this.vapidKey=t},EO.prototype.useServiceWorker=function(){throw Yk.create("only-available-in-window")},EO.prototype.onMessage=function(){throw Yk.create("only-available-in-window")},EO.prototype.onTokenRefresh=function(){throw Yk.create("only-available-in-window")},EO.prototype.onPush=function(c){return vo(this,void 0,void 0,function(){var s,a,u;return yo(this,function(t){switch(t.label){case 0:return(u=function(){var t=c.data;if(!t)return null;try{return t.json()}catch(t){return null}}())?[4,IO()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(s=t.sent()).some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=Qk.PUSH_RECEIVED;try{for(var i=go(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(s,u)]:(a=!1,u.notification?[4,((o=po({},(r=u).notification)).data=((i={})[$k]=r,i),n=(e=o).actions,r=Notification.maxActions,n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(r=e.title)&&void 0!==r?r:"",e))]:[3,3]);case 2:t.sent(),a=!0,t.label=3;case 3:return!0===a&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(o={from:(i=u).from,collapseKey:i.collapse_key},n=o,(r=i).notification&&(n.notification={},(e=r.notification.title)&&(n.notification.title=e),(e=r.notification.body)&&(n.notification.body=e),(r=r.notification.image)&&(n.notification.image=r)),i.data&&(o.data=i.data),n=o,(r=i).fcmOptions&&(n.fcmOptions={},(i=r.fcmOptions.link)&&(n.fcmOptions.link=i),(r=r.fcmOptions.analytics_label)&&(n.fcmOptions.analyticsLabel=r)),u=o,"function"==typeof this.bgMessageHandler?this.bgMessageHandler(u):this.bgMessageHandler.next(u)),[4,bO(1e3)]);case 4:return t.sent(),[2]}var e,n,r,i,o})})},EO.prototype.onSubChange=function(n){var r;return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,gO(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,cO(this.firebaseDependencies)];case 3:return e=t.sent(),[4,gO(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,yO(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:Xk)];case 5:return t.sent(),[2]}})})},EO.prototype.onNotificationClick=function(u){var c;return vo(this,void 0,void 0,function(){var r,i,o,s,a;return yo(this,function(t){switch(t.label){case 0:return!(r=null===(c=null===(c=u.notification)||void 0===c?void 0:c.data)||void 0===c?void 0:c[$k])||u.action?[2]:(u.stopImmediatePropagation(),u.notification.close(),n=null!==(e=null===(e=r.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=r.notification)||void 0===n?void 0:n.click_action,(i=n||(_O(r.data)?self.location.origin:null))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,function(u){return vo(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return yo(this,function(t){switch(t.label){case 0:return[4,IO()];case 1:e=t.sent();try{for(n=go(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}(o)]):[2]);case 1:return(a=t.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=t.sent(),[4,bO(3e3)];case 3:return t.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=t.sent(),t.label=6;case 6:return a?(r.messageType=Qk.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}var e,n})})},EO);function EO(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function IO(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var TO=(Object.defineProperty(SO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),SO.prototype.messageEventListener=function(i){return vo(this,void 0,void 0,function(){var n,r;return yo(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===Qk.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),_O(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},SO.prototype.getVapidKey=function(){return this.vapidKey},SO.prototype.getSwReg=function(){return this.swRegistration},SO.prototype.getToken=function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw Yk.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,yO(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},SO.prototype.updateVapidKey=function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=Xk),[2]})})},SO.prototype.updateSwReg=function(e){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw Yk.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},SO.prototype.registerDefaultSw=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),Yk.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},SO.prototype.deleteToken=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,gO(this.firebaseDependencies,this.swRegistration)]}})})},SO.prototype.requestPermission=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?Yk.create("permission-blocked"):Yk.create("permission-default")}})})},SO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw Yk.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw Yk.create("invalid-vapid-key");this.vapidKey=t},SO.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw Yk.create("invalid-sw-registration");if(this.swRegistration)throw Yk.create("use-sw-after-get-token");this.swRegistration=t},SO.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},SO.prototype.setBackgroundMessageHandler=function(){throw Yk.create("only-available-in-sw")},SO.prototype.onBackgroundMessage=function(){throw Yk.create("only-available-in-sw")},SO.prototype.onTokenRefresh=function(){return function(){}},SO.prototype.logEvent=function(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return e=function(){switch(n){case Qk.NOTIFICATION_CLICKED:return"notification_open";case Qk.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[Zk],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},SO);function SO(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function CO(t){return Yk.create("missing-app-config-values",{valueName:t})}function NO(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}zn={isSupported:NO},Vl.INTERNAL.registerComponent(new vs("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw CO("App Configuration Object");if(!t.name)throw CO("App Name");var r=t.options;try{for(var i=go(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw CO(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!NO())throw Yk.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?wO:TO)(t)},"PUBLIC").setServiceProps(zn));var AO,kO="firebasestorage.googleapis.com",OO="storageBucket",RO=(fo(PO,AO=qo),PO.prototype.codeEquals=function(t){return xO(t)===this.code},Object.defineProperty(PO.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(PO.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),PO);function PO(t,e){return(t=AO.call(this,xO(t),"Firebase Storage: "+e+" ("+xO(t)+")")||this).customData={serverResponse:null},Object.setPrototypeOf(t,PO.prototype),t}var DO={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error",UNSUPPORTED_ENVIRONMENT:"unsupported-environment"};function xO(t){return"storage/"+t}function LO(){return new RO(DO.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function MO(){return new RO(DO.CANCELED,"User canceled the upload/download.")}function FO(){return new RO(DO.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function UO(t){return new RO(DO.INVALID_ARGUMENT,t)}function jO(){return new RO(DO.APP_DELETED,"The Firebase app was deleted.")}function VO(t){return new RO(DO.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qO(t,e){return new RO(DO.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function BO(t){throw new RO(DO.INTERNAL_ERROR,"Internal error: "+t)}function WO(t,e){this.data=t,this.contentType=e||null}var HO={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function KO(t,e){switch(t){case HO.RAW:return new WO(zO(e));case HO.BASE64:case HO.BASE64URL:return new WO(GO(t,e));case HO.DATA_URL:return new WO((t=new QO(t=e)).base64?GO(HO.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw qO(HO.DATA_URL,"Malformed data URL.")}return zO(e)}(t.rest),new QO(e).contentType)}throw LO()}function zO(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function GO(t,e){switch(t){case HO.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw qO(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case HO.BASE64URL:if(r=-1!==e.indexOf("+"),n=-1!==e.indexOf("/"),r||n)throw qO(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(e)}catch(e){throw qO(t,"Invalid character found")}for(var o=new Uint8Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}function QO(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw qO(HO.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}var YO,XO="running",JO="pausing",$O="paused",ZO="success",tR="canceling",eR="canceled",nR="error",rR={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function iR(t){switch(t){case XO:case JO:case tR:return rR.RUNNING;case $O:return rR.PAUSED;case ZO:return rR.SUCCESS;case eR:return rR.CANCELED;case nR:default:return rR.ERROR}}(lt=YO={})[lt.NO_ERROR=0]="NO_ERROR",lt[lt.NETWORK_ERROR=1]="NETWORK_ERROR",lt[lt.ABORT=2]="ABORT";var oR=(sR.prototype.send=function(t,e,n,r){if(this.sent_)throw BO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},sR.prototype.getErrorCode=function(){if(!this.sent_)throw BO("cannot .getErrorCode() before sending");return this.errorCode_},sR.prototype.getStatus=function(){if(!this.sent_)throw BO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},sR.prototype.getResponseText=function(){if(!this.sent_)throw BO("cannot .getResponseText() before sending");return this.xhr_.responseText},sR.prototype.abort=function(){this.xhr_.abort()},sR.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},sR.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},sR.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},sR);function sR(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=YO.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=YO.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=YO.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var aR=(uR.prototype.createXhrIo=function(){return new oR},uR);function uR(){}function cR(t){return"string"==typeof t||t instanceof String}function hR(t){return lR()&&t instanceof Blob}function lR(){return"undefined"!=typeof Blob}function fR(t,e,n,r){if(r<e)throw new RO(DO.INVALID_ARGUMENT,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw new RO(DO.INVALID_ARGUMENT,"Invalid value for '"+t+"'. Expected "+n+" or less.")}var pR=(dR.prototype.size=function(){return this.size_},dR.prototype.type=function(){return this.type_},dR.prototype.slice=function(t,e){if(hR(this.data_)){var n=this.data_;return null===(i=(r=t,i=e,n.webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null))?null:new dR(i)}var r,i;return new dR(new Uint8Array(this.data_.buffer,t,e-t),!0)},dR.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(lR()){var n=t.map(function(t){return t instanceof dR?t.data_:t});return new dR(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(lR())return new Blob(t);throw new RO(DO.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}.apply(null,n))}var n=t.map(function(t){return cR(t)?KO(HO.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new dR(i,!0)},dR.prototype.uploadData=function(){return this.data_},dR);function dR(t,e){var n=0,r="";hR(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var vR=(Object.defineProperty(yR.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(yR.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),yR.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},yR.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},yR.makeFromBucketSpec=function(t){var e;try{e=yR.makeFromUrl(t)}catch(e){return new yR(t,"")}if(""===e.path)return e;throw new RO(DO.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")},yR.makeFromUrl=function(t){var e,n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=kO.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){n=new yR(c[u.indices.bucket],c[u.indices.path]||""),u.postModify(n);break}}if(null==n)throw e=t,new RO(DO.INVALID_URL,"Invalid URL '"+e+"'.");return n},yR);function yR(t,e){this.bucket=t,this.path_=e}function gR(t){var e;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof e||Array.isArray(e)?null:e}function mR(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function _R(t){return"https://"+kO+"/v0"+t}function bR(t){var e,n=encodeURIComponent,r="?";for(e in t)t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&");return r.slice(0,-1)}function wR(t,e){return e}var ER=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||wR},IR=null;function TR(){if(IR)return IR;var t=[];t.push(new ER("bucket")),t.push(new ER("generation")),t.push(new ER("metageneration")),t.push(new ER("name","fullPath",!0));var e=new ER("name");return e.xform=function(t,e){return!cR(e)||e.length<2?e:mR(e)},t.push(e),(e=new ER("size")).xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new ER("timeCreated")),t.push(new ER("updated")),t.push(new ER("md5Hash",null,!0)),t.push(new ER("cacheControl",null,!0)),t.push(new ER("contentDisposition",null,!0)),t.push(new ER("contentEncoding",null,!0)),t.push(new ER("contentLanguage",null,!0)),t.push(new ER("contentType",null,!0)),t.push(new ER("metadata","customMetadata",!0)),IR=t}function SR(t,e,n){return null===(e=gR(e))?null:function(t,e,n){for(var r,i,o={type:"file"},s=n.length,a=0;a<s;a++){var u=n[a];o[u.local]=u.xform(o,e[u.server])}return r=o,i=t,Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,e=new vR(t,e);return i.makeStorageReference(e)}}),o}(t,e,n)}function CR(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var NR="prefixes",AR="items";var kR=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function OR(t){if(!t)throw LO()}function RR(n,r){return function(t,e){return OR(null!==(e=SR(n,e,r))),e}}function PR(o,s){return function(t,e){return OR(null!==(n=o,r=s,e=null===(i=gR(i=e))?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[NR])for(var i=0,o=n[NR];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new vR(e,s));r.prefixes.push(a)}if(n[AR])for(var u=0,c=n[AR];u<c.length;u++){var h=c[u],a=t.makeStorageReference(new vR(e,h.name));r.items.push(a)}return r}(n,r,i))),e;var n,r,i}}function DR(i){return function(t,e){var n,r=401===t.getStatus()?new RO(DO.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new RO(DO.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new RO(DO.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):e;return r.serverResponse=e.serverResponse,r}}function xR(r){var i=DR(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new RO(DO.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")),n.serverResponse=e.serverResponse,n}}function LR(t,e,n){var r=_R(e.fullServerUrl()),i=t.maxOperationRetryTime;return(i=new kR(r,"GET",RR(t,n),i)).errorHandler=xR(e),i}function MR(t,e,n){return(n=Object.assign({},n)).fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function FR(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}function UR(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){OR(!1)}return OR(!!n&&-1!==(e||["active"]).indexOf(n)),n}function jR(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(this.next=t.next,this.error=t.error,this.complete=t.complete)}function VR(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}function qR(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var BR=(WR.prototype._makeProgressCallback=function(){var e=this,n=this._transferred;return function(t){return e._updateProgress(n+t)}},WR.prototype._shouldDoResumable=function(t){return 262144<t.size()},WR.prototype._start=function(){this._state===XO&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},WR.prototype._resolveToken=function(e){var n=this;this._ref.storage.getAuthToken().then(function(t){switch(n._state){case XO:e(t);break;case tR:n._transition(eR);break;case JO:n._transition($O)}})},WR.prototype._createResumable=function(){var u=this;this._resolveToken(function(t){var e,n,r,i,o,s,a,e=(e=u._ref.storage,n=u._ref._location,r=u._mappings,i=u._blob,o=u._metadata,s=n.bucketOnlyServerUrl(),a=MR(n,i,o),o={name:a.fullPath},s=_R(s),i={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":i.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},r=CR(a,r),e=e.maxUploadRetryTime,(e=new kR(s,"POST",function(t){var e;UR(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){OR(!1)}return OR(cR(e)),e},e)).urlParams=o,e.headers=i,e.body=r,e.errorHandler=DR(n),e),t=u._ref.storage.makeRequest(e,t);(u._request=t).getPromise().then(function(t){u._request=void 0,u._uploadUrl=t,u._needToFetchStatus=!1,u.completeTransitions_()},u._errorHandler)})},WR.prototype._fetchStatus=function(){var o=this,s=this._uploadUrl;this._resolveToken(function(t){var e,n,r,i,e=(e=o._ref.storage,n=o._ref._location,r=s,i=o._blob,e=e.maxUploadRetryTime,(e=new kR(r,"POST",function(t){var e=UR(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){OR(!1)}n||OR(!1);var r=Number(n);return OR(!isNaN(r)),new FR(r,i.size(),"final"===e)},e)).headers={"X-Goog-Upload-Command":"query"},e.errorHandler=DR(n),e),t=o._ref.storage.makeRequest(e,t);(o._request=t).getPromise().then(function(t){o._request=void 0,o._updateProgress(t.current),o._needToFetchStatus=!1,t.finalized&&(o._needToFetchMetadata=!0),o.completeTransitions_()},o._errorHandler)})},WR.prototype._continueUpload=function(){var n=this,r=262144*this._chunkMultiplier,i=new FR(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken(function(t){var e;try{e=function(t,o,e,s,n,a,r,i){var u=new FR(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw new RO(DO.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;if(0<n&&(h=Math.min(h,n)),n=(r=u.current)+h,c={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},null===(r=s.slice(r,n)))throw FO();return n=o.maxUploadRetryTime,(n=new kR(e,"POST",function(t,e){var n=UR(t,["active","final"]),r=u.current+h,i=s.size(),e="final"===n?RR(o,a)(t,e):null;return new FR(r,i,"final"===n,e)},n)).headers=c,n.body=r.uploadData(),n.progressCallback=i||null,n.errorHandler=DR(t),n}(n._ref._location,n._ref.storage,o,n._blob,r,n._mappings,i,n._makeProgressCallback())}catch(t){return n._error=t,void n._transition(nR)}t=n._ref.storage.makeRequest(e,t),(n._request=t).getPromise().then(function(t){n._increaseMultiplier(),n._request=void 0,n._updateProgress(t.current),t.finalized?(n._metadata=t.metadata,n._transition(ZO)):n.completeTransitions_()},n._errorHandler)})},WR.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},WR.prototype._fetchMetadata=function(){var n=this;this._resolveToken(function(t){var e=LR(n._ref.storage,n._ref._location,n._mappings),t=n._ref.storage.makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._transition(ZO)},n._metadataErrorHandler)})},WR.prototype._oneShotUpload=function(){var n=this;this._resolveToken(function(t){var e=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=MR(e,r,i),i="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+CR(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",a="\r\n--"+a+"--";if(null===(r=pR.getBlob(i,r,a)))throw FO();return a={name:u.fullPath},u=_R(o),o=t.maxUploadRetryTime,(o=new kR(u,"POST",RR(t,n),o)).urlParams=a,o.headers=s,o.body=r.uploadData(),o.errorHandler=DR(e),o}(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage.makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._updateProgress(n._blob.size()),n._transition(ZO)},n._errorHandler)})},WR.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},WR.prototype._transition=function(t){if(this._state!==t)switch(t){case tR:case JO:this._state=t,void 0!==this._request&&this._request.cancel();break;case XO:var e=this._state===$O;this._state=t,e&&(this._notifyObservers(),this._start());break;case $O:this._state=t,this._notifyObservers();break;case eR:this._error=MO(),this._state=t,this._notifyObservers();break;case nR:case ZO:this._state=t,this._notifyObservers()}},WR.prototype.completeTransitions_=function(){switch(this._state){case JO:this._transition($O);break;case tR:this._transition(eR);break;case XO:this._start()}},Object.defineProperty(WR.prototype,"snapshot",{get:function(){var t=iR(this._state);return new VR(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),WR.prototype.on=function(t,e,n,r){var i=this,o=new jR(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},WR.prototype.then=function(t,e){return this._promise.then(t,e)},WR.prototype.catch=function(t){return this.then(null,t)},WR.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},WR.prototype._removeObserver=function(t){-1!==(t=this._observers.indexOf(t))&&this._observers.splice(t,1)},WR.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},WR.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(iR(this._state)){case rR.SUCCESS:qR(this._resolve.bind(null,this.snapshot))();break;case rR.CANCELED:case rR.ERROR:qR(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},WR.prototype._notifyObserver=function(t){switch(iR(this._state)){case rR.RUNNING:case rR.PAUSED:t.next&&qR(t.next.bind(t,this.snapshot))();break;case rR.SUCCESS:t.complete&&qR(t.complete.bind(t))();break;case rR.CANCELED:case rR.ERROR:t.error&&qR(t.error.bind(t,this._error))();break;default:t.error&&qR(t.error.bind(t,this._error))()}},WR.prototype.resume=function(){var t=this._state===$O||this._state===JO;return t&&this._transition(XO),t},WR.prototype.pause=function(){var t=this._state===XO;return t&&this._transition(JO),t},WR.prototype.cancel=function(){var t=this._state===XO||this._state===JO;return t&&this._transition(tR),t},WR);function WR(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=TR(),this._resumable=this._shouldDoResumable(this._blob),this._state=XO,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(DO.CANCELED)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(nR))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(DO.CANCELED)?r.completeTransitions_():(r._error=t,r._transition(nR))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}var HR=(KR.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},KR.prototype.newRef=function(t,e){return new KR(t,e)},Object.defineProperty(KR.prototype,"root",{get:function(){var t=new vR(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(KR.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(KR.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(KR.prototype,"name",{get:function(){return mR(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(KR.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(KR.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);return null===t?null:(t=new vR(this._location.bucket,t),new KR(this._service,t))},enumerable:!1,configurable:!0}),KR.prototype._throwIfRoot=function(t){if(""===this._location.path)throw VO(t)},KR);function KR(t,e){this._service=t,this._location=e instanceof vR?e:vR.makeFromUrl(e)}function zR(a,u){return vo(this,void 0,void 0,function(){var o,s;return yo(this,function(t){switch(t.label){case 0:return null!=u&&"number"==typeof u.maxResults&&fR("options.maxResults",1,1e3,u.maxResults),[4,a.storage.getAuthToken()];case 1:return o=t.sent(),s=u||{},e=a.storage,n=a._location,r=s.pageToken,i=s.maxResults,t={},n.isRoot?t.prefix="":t.prefix=n.path+"/",0<"/".length&&(t.delimiter="/"),r&&(t.pageToken=r),i&&(t.maxResults=i),r=_R(n.bucketOnlyServerUrl()),i=e.maxOperationRetryTime,(i=new kR(r,"GET",PR(e,n.bucket),i)).urlParams=t,i.errorHandler=DR(n),[2,a.storage.makeRequest(i,o).getPromise()]}var e,n,r,i})})}function GR(u){return vo(this,void 0,void 0,function(){var a;return yo(this,function(t){switch(t.label){case 0:return u._throwIfRoot("getDownloadURL"),[4,u.storage.getAuthToken()];case 1:return a=t.sent(),e=u.storage,n=u._location,o=TR(),s=_R(n.fullServerUrl()),t=e.maxOperationRetryTime,(t=new kR(s,"GET",(r=e,i=o,function(t,e){var n=SR(r,e,i);return OR(null!==n),function(r,t){if(null===(t=gR(t)))return null;if(!cR(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var i=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return _R("/b/"+i(e)+"/o/"+i(n))+bR({alt:"media",token:t})})[0]}(n,e)}),t)).errorHandler=xR(n),[2,u.storage.makeRequest(t,a).getPromise().then(function(t){if(null===t)throw new RO(DO.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})]}var r,i,e,n,o,s})})}function QR(t,e){var n,e=(n=t._location.path,e=e.split("/").filter(function(t){return 0<t.length}).join("/"),0===n.length?e:n+"/"+e),e=new vR(t._location.bucket,e);return new HR(t.storage,e)}var YR=(Object.defineProperty(XR.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(XR.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(XR.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(XR.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),XR);function XR(t,e,n){this._delegate=t,this.task=e,this.ref=n}var JR=(Object.defineProperty($R.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),$R.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new YR(t,n,n._ref))},t)},$R.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new YR(t,i,i._ref))}:{next:e.next?function(t){return e.next(new YR(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},$R);function $R(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new YR(this._delegate.snapshot,this,this._ref)}var ZR=(Object.defineProperty(tP.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new eP(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(tP.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new eP(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(tP.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),tP);function tP(t,e){this._delegate=t,this._service=e}var eP=(Object.defineProperty(nP.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(nP.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(nP.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),nP.prototype.toString=function(){return this._delegate.toString()},nP.prototype.child=function(t){return new nP(QR(this._delegate,t),this.storage)},Object.defineProperty(nP.prototype,"root",{get:function(){return new nP(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(nP.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new nP(t,this.storage)},enumerable:!1,configurable:!0}),nP.prototype.put=function(t,e){return this._throwIfRoot("put"),new JR((void 0===e&&(e=null),(n=this._delegate)._throwIfRoot("uploadBytesResumable"),new BR(n,new pR(t),e)),this);var n},nP.prototype.putString=function(t,e,n){return void 0===e&&(e=HO.RAW),this._throwIfRoot("putString"),new JR((r=this._delegate,void 0===e&&(e=HO.RAW),r._throwIfRoot("putString"),t=KO(e,t),null==(n=po({},n)).contentType&&null!=t.contentType&&(n.contentType=t.contentType),new BR(r,new pR(t.data,!0),n)),this);var r},nP.prototype.listAll=function(){var t,e=this;return function r(i,o,s){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,zR(i,{pageToken:s})];case 1:return e=t.sent(),(n=o.prefixes).push.apply(n,e.prefixes),(n=o.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,r(i,o,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(this._delegate,t={prefixes:[],items:[]}).then(function(){return t}).then(function(t){return new ZR(t,e.storage)})},nP.prototype.list=function(t){var e=this;return zR(this._delegate,t).then(function(t){return new ZR(t,e.storage)})},nP.prototype.getMetadata=function(){return function(r){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return r._throwIfRoot("getMetadata"),[4,r.storage.getAuthToken()];case 1:return e=t.sent(),n=LR(r.storage,r._location,TR()),[2,r.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},nP.prototype.updateMetadata=function(t){return function(a,u){return vo(this,void 0,void 0,function(){var s;return yo(this,function(t){switch(t.label){case 0:return a._throwIfRoot("updateMetadata"),[4,a.storage.getAuthToken()];case 1:return s=t.sent(),e=a.storage,n=a._location,r=u,i=TR(),o=_R(n.fullServerUrl()),t=CR(r,i),r=e.maxOperationRetryTime,(r=new kR(o,"PATCH",RR(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=t,r.errorHandler=xR(n),[2,a.storage.makeRequest(r,s).getPromise()]}var e,n,r,i,o})})}(this._delegate,t)},nP.prototype.getDownloadURL=function(){return GR(this._delegate)},nP.prototype.delete=function(){return this._throwIfRoot("delete"),function(i){return vo(this,void 0,void 0,function(){var r;return yo(this,function(t){switch(t.label){case 0:return i._throwIfRoot("deleteObject"),[4,i.storage.getAuthToken()];case 1:return r=t.sent(),e=i.storage,t=_R((n=i._location).fullServerUrl()),e=e.maxOperationRetryTime,(e=new kR(t,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=xR(n),[2,i.storage.makeRequest(e,r).getPromise()]}var e,n})})}(this._delegate)},nP.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw VO(t)},nP);function nP(t,e){this._delegate=t,this.storage=e}var rP=(iP.prototype.getPromise=function(){return this.promise_},iP.prototype.cancel=function(t){},iP);function iP(t){this.promise_=Promise.reject(t)}var oP=(sP.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());void 0!==s?r(s):r()}catch(t){i(t)}else null!==o?((n=LO()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?jO:MO)()):i(n=new RO(DO.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,bo([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new aP(!1,null,!0)):this.backoffId_=(e=function(r,t){function i(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new aP(!1,null,!0)):(t=c.pool_.createXhrIo(),c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(i),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(i),c.pendingXhr_=null;var e=t.getErrorCode()===YO.NO_ERROR,n=t.getStatus();e&&!c.isRetryStatusCode_(n)?(n=-1!==c.successCodes_.indexOf(n),r(!0,new aP(n,t))):(t=t.getErrorCode()===YO.ABORT,r(!1,new aP(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},sP.prototype.getPromise=function(){return this.promise_},sP.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},sP.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},sP);function sP(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var aP=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function uP(t){return/^[A-Za-z]+:\/\//.test(t)}function cP(t,e){if(e&&uP(e)){if(t instanceof hP)return new HR(t,e);throw UO("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof hP){var r=e;if(null==r._bucket)throw new RO(DO.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+OO+"' property when initializing the app?");return r=new HR(r,r._bucket),null!=n?t(r,n):r}if(void 0===n)return e;if(n.includes(".."))throw UO('`path` param cannot contain ".."');return QR(e,n)}(t,e)}var hP=(Object.defineProperty(lP.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){fR("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(lP.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){fR("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),lP.prototype.getAuthToken=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},lP.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},lP.prototype.makeStorageReference=function(t){return new HR(this,t)},lP.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new rP(jO());var r,i,o,s,a,u=(r=t,i=this._appId,o=e,s=this._pool,a=bR(r.urlParams),t=r.url+a,e=Object.assign({},r.headers),a=e,i&&(a["X-Firebase-GMPID"]=i),i=e,null!==o&&0<o.length&&(i.Authorization="Firebase "+o),i=e,o=void 0!==Vl?Vl.SDK_VERSION:"AppManager",i["X-Firebase-Storage-Version"]="webjs/"+o,new oP(t,r.method,e,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s));return this._requests.add(u),u.getPromise().then(function(){return n._requests.delete(u)},function(){return n._requests.delete(u)}),u},lP);function lP(t,e,n,r){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null==r&&null==(r=null==(r=this.app.options)?void 0:r[OO])?null:vR.makeFromBucketSpec(r)}var fP=(Object.defineProperty(pP.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(pP.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),pP.prototype.ref=function(t){if(uP(t))throw UO("ref() expected a child path but got a URL, use refFromURL instead.");return new eP(cP(this._delegate,t),this)},pP.prototype.refFromURL=function(t){if(!uP(t))throw UO("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vR.makeFromUrl(t)}catch(t){throw UO("refFromUrl() expected a valid full URL but got an invalid one.")}return new eP(cP(this._delegate,t),this)},pP.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},pP.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},pP);function pP(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}ft={TaskState:rR,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:HO,Storage:hP,Reference:eP},(iu=Vl).INTERNAL.registerComponent(new vs("storage",function(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return new fP(n,new hP(n,t,new aR,e))},"PUBLIC").setServiceProps(ft).setMultipleInstances(!0)),iu.registerVersion("@firebase/storage","0.4.2");var dP,vP,yP="0.4.4",gP="FB-PERF-TRACE-MEASURE",mP="@firebase/performance/config",_P="@firebase/performance/configexpire",zn="Performance",lt=((lt={})["trace started"]="Trace {$traceName} was started before.",lt["trace stopped"]="Trace {$traceName} is not running.",lt["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",lt["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",lt["no window"]="Window is not available.",lt["no app id"]="App id is not available.",lt["no project id"]="Project id is not available.",lt["no api key"]="Api key is not available.",lt["invalid cc log"]="Attempted to queue invalid cc event",lt["FB not default"]="Performance can only start when Firebase app instance is the default one.",lt["RC response not ok"]="RC response is not ok",lt["invalid attribute name"]="Attribute name {$attributeName} is invalid.",lt["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",lt["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",lt["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",lt),bP=new Wo("performance",zn,lt),wP=new ks(zn);wP.logLevel=Is.INFO;var EP,IP=(TP.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},TP.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},TP.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},TP.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},TP.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},TP.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},TP.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Mo()||(wP.info("IndexedDB is not supported by current browswer"),!1):(wP.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},TP.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},TP.getInstance=function(){return void 0===dP&&(dP=new TP(vP)),dP},TP);function TP(t){if(!(this.window=t))throw bP.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function SP(t,e){var n=t.length-e.length;if(n<0||1<n)throw bP.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var CP,NP,AP=(kP.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw bP.create("no app id");return t},kP.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw bP.create("no project id");return t},kP.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw bP.create("no api key");return t},kP.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},kP.getInstance=function(){return void 0===EP&&(EP=new kP),EP},kP);function kP(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=SP("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=SP("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(zn=NP=NP||{})[zn.UNKNOWN=0]="UNKNOWN",zn[zn.VISIBLE=1]="VISIBLE",zn[zn.HIDDEN=2]="HIDDEN";var OP=["firebase_","google_","ga_"],RP=new RegExp("^[a-zA-Z]\\w*$");function PP(){switch(IP.getInstance().document.visibilityState){case"visible":return NP.VISIBLE;case"hidden":return NP.HIDDEN;default:return NP.UNKNOWN}}var DP="0.0.1",xP={loggingEnabled:!0},LP="FIREBASE_INSTALLATIONS_AUTH";function MP(t){var n,e=function(){var t=IP.getInstance().localStorage;if(t){var e=t.getItem(_P);if(e&&Number(e)>Date.now()){var n=t.getItem(mP);if(n)try{return JSON.parse(n)}catch(t){return}}}}();return e?(UP(e),Promise.resolve()):(n=t,(t=AP.getInstance().installationsService.getToken()).then(function(t){}),t.then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+AP.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+AP.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:LP+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:AP.getInstance().getAppId(),app_version:yP,sdk_version:DP})});return fetch(t).then(function(t){if(t.ok)return t.json();throw bP.create("RC response not ok")})}).catch(function(){wP.info(FP)}).then(UP).then(function(t){var e=IP.getInstance().localStorage;t&&e&&(e.setItem(mP,JSON.stringify(t)),e.setItem(_P,String(Date.now()+60*AP.getInstance().configTimeToLive*60*1e3)))},function(){}))}var FP="Could not fetch config, will use default configs";function UP(t){if(!t)return t;var e=AP.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):xP.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=jP(e.tracesSamplingRate),e.logNetworkAfterSampling=jP(e.networkRequestsSamplingRate),t}function jP(t){return Math.random()<=t}var VP,qP=1;function BP(){return qP=2,VP=VP||(n=IP.getInstance().document,new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()}).then(function(){return(t=AP.getInstance().installationsService.getId()).then(function(t){CP=t}),t;var t}).then(MP).then(WP,WP));var n}function WP(){qP=3}var HP,KP=1e4,zP=3,GP=zP,QP=[],YP=!1;function XP(t){setTimeout(function(){if(0!==GP)return QP.length?void function(){var t=bo(QP);QP=[];var e,r,n=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});e={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:AP.getInstance().logSource,log_event:n},r=t,n=e,e=AP.getInstance().getFlTransportFullUrl(),fetch(e,{method:"POST",body:JSON.stringify(n)}).then(function(t){return t.ok||wP.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=KP;isNaN(e)||(n=Math.max(e,n)),t=t.logResponseDetails,Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(QP=bo(r,QP),wP.info("Retry transport request later.")),GP=zP,XP(n)}).catch(function(){QP=bo(t,QP),GP--,wP.info("Tries left: "+GP+"."),XP(KP)})}():XP(KP)},t)}function JP(t,e){var n;(HP=HP||(n=tD,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw bP.create("invalid cc log");QP=bo(QP,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}))(t,e)}function $P(t){var e=AP.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&IP.getInstance().requiredApisAvailable()&&(t.isAuto&&PP()!==NP.VISIBLE||(3===qP?ZP(t):BP().then(function(){return ZP(t)},function(){return ZP(t)})))}function ZP(t){var e;!CP||(e=AP.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return JP(t,1)},0)}function tD(t,e){return(0===e?function(t){return t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:eD(),network_request_metric:t},JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};return 0!==Object.keys(t.counters).length&&(e.counters=t.counters),t=t.getAttributes(),0!==Object.keys(t).length&&(e.custom_attributes=t),e={application_info:eD(),trace_metric:e},JSON.stringify(e)})(t)}function eD(){return{google_app_id:AP.getInstance().getAppId(),app_instance_id:CP,web_app_info:{sdk_version:yP,page_url:IP.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=IP.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:PP(),effective_connection_type:function(){var t=IP.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var nD=["_fp","_fcp","_fid"],rD=(iD.prototype.start=function(){if(1!==this.state)throw bP.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},iD.prototype.stop=function(){if(2!==this.state)throw bP.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),$P(this)},iD.prototype.record=function(t,e,n){if(t<=0)throw bP.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw bP.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=po({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}$P(this)},iD.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},iD.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<nD.indexOf(n))&&n.startsWith("_"))throw bP.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&wP.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},iD.prototype.getMetric=function(t){return this.counters[t]||0},iD.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||40<n.length||OP.some(function(t){return n.startsWith(t)})||!n.match(RP)),i=0!==(i=e).length&&i.length<=100;if(r&&i)this.customAttributes[t]=e;else{if(!r)throw bP.create("invalid attribute name",{attributeName:t});if(!i)throw bP.create("invalid attribute value",{attributeValue:e})}},iD.prototype.getAttribute=function(t){return this.customAttributes[t]},iD.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},iD.prototype.getAttributes=function(){return po({},this.customAttributes)},iD.prototype.setStartTime=function(t){this.startTimeUs=t},iD.prototype.setDuration=function(t){this.durationUs=t},iD.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure);(t=t&&t[0])&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},iD.createOobTrace=function(t,e,n){var r,i=IP.getInstance().getUrl();i&&(r=new iD("_wt_"+i,!0),i=Math.floor(1e3*IP.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),$P(r))},iD.createUserTimingTrace=function(t){$P(new iD(t,!1,t))},iD);function iD(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=IP.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||gP+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function oD(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=IP.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=AP.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return JP(e,0)},0)))}var sD=5e3;function aD(){CP&&(setTimeout(function(){var e,t=IP.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");t.onFirstInputDelay?(e=setTimeout(function(){rD.createOobTrace(n,r),e=void 0},sD),t.onFirstInputDelay(function(t){e&&(clearTimeout(e),rD.createOobTrace(n,r,t))})):rD.createOobTrace(n,r)},0),setTimeout(function(){for(var t=IP.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)oD(n[e]);t.setupObserver("resource",oD)},0),setTimeout(function(){for(var t=IP.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)uD(n[e]);t.setupObserver("measure",uD)},0))}function uD(t){(t=t.name).substring(0,gP.length)!==gP&&rD.createUserTimingTrace(t)}var cD=(hD.prototype.trace=function(t){return new rD(t)},Object.defineProperty(hD.prototype,"instrumentationEnabled",{get:function(){return AP.getInstance().instrumentationEnabled},set:function(t){AP.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(hD.prototype,"dataCollectionEnabled",{get:function(){return AP.getInstance().dataCollectionEnabled},set:function(t){AP.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),hD);function hD(t){this.app=t,IP.getInstance().requiredApisAvailable()&&Fo().then(function(t){t&&(YP||(XP(5500),YP=!0),BP().then(aD,aD))}).catch(function(t){wP.info("Environment doesn't support IndexedDB: "+t)})}(iu=Vl).INTERNAL.registerComponent(new vs("performance",function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw bP.create("FB not default");if("undefined"==typeof window)throw bP.create("no window");return vP=window,AP.getInstance().firebaseAppInstance=t,AP.getInstance().installationsService=e,new cD(t)}(t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate())},"PUBLIC")),iu.registerVersion("@firebase/performance","0.4.4");var lD,fD="firebase_id",pD="origin",dD=6e4,vD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yD="https://www.googletagmanager.com/gtag/js";(zn=lD=lD||{}).EVENT="event",zn.SET="set",zn.CONFIG="config",(zn=lt={}).ADD_SHIPPING_INFO="add_shipping_info",zn.ADD_PAYMENT_INFO="add_payment_info",zn.ADD_TO_CART="add_to_cart",zn.ADD_TO_WISHLIST="add_to_wishlist",zn.BEGIN_CHECKOUT="begin_checkout",zn.CHECKOUT_PROGRESS="checkout_progress",zn.EXCEPTION="exception",zn.GENERATE_LEAD="generate_lead",zn.LOGIN="login",zn.PAGE_VIEW="page_view",zn.PURCHASE="purchase",zn.REFUND="refund",zn.REMOVE_FROM_CART="remove_from_cart",zn.SCREEN_VIEW="screen_view",zn.SEARCH="search",zn.SELECT_CONTENT="select_content",zn.SELECT_ITEM="select_item",zn.SELECT_PROMOTION="select_promotion",zn.SET_CHECKOUT_OPTION="set_checkout_option",zn.SHARE="share",zn.SIGN_UP="sign_up",zn.TIMING_COMPLETE="timing_complete",zn.VIEW_CART="view_cart",zn.VIEW_ITEM="view_item",zn.VIEW_ITEM_LIST="view_item_list",zn.VIEW_PROMOTION="view_promotion",zn.VIEW_SEARCH_RESULTS="view_search_results";var gD=new ks("@firebase/analytics");var zn=((zn={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",zn["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",zn["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",zn["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",zn["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",zn["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",zn["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",zn["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',zn["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',zn),mD=new Wo("analytics","Analytics",zn),_D=30;function bD(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var wD=(bD.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},bD.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},bD.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},new bD);function ED(a,u,c){return void 0===u&&(u=wD),vo(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return yo(this,function(t){if(i=a.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw mD.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new ID,setTimeout(function(){return vo(s,void 0,void 0,function(){return yo(this,function(t){return o.abort(),[2]})})},void 0!==c?c:dD),[2,function u(c,t,h,l){var f=t.throttleEndTimeMillis,p=t.backoffCount;return void 0===l&&(l=wD),vo(this,void 0,void 0,function(){var e,n,r,s,a;return yo(this,function(t){switch(t.label){case 0:e=c.appId,n=c.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(i=h,o=f,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(mD.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 2:return t.sent(),[3,4];case 3:if(s=t.sent(),n)return gD.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:n}];throw s;case 4:return t.trys.push([4,6,,7]),[4,function(o){var s;return vo(this,void 0,void 0,function(){var e,n,r,i;return yo(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=vD.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(s=i.error)&&void 0!==s&&s.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw mD.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}(c)];case 5:return a=t.sent(),l.deleteThrottleMetadata(e),[2,a];case 6:if(function(t){if(t instanceof qo&&t.customData)return 429===(t=Number(t.customData.httpStatus))||500===t||503===t||504===t}(r=t.sent()))return s=503===Number(r.customData.httpStatus)?ds(p,l.intervalMillis,_D):ds(p,l.intervalMillis),a={throttleEndTimeMillis:Date.now()+s,backoffCount:p+1},l.setThrottleMetadata(e,a),gD.debug("Calling attemptFetch again in "+s+" millis"),[2,u(c,a,h,l)];if(l.deleteThrottleMetadata(e),n)return gD.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}var i,o})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw mD.create("no-api-key")})})}var ID=(TD.prototype.addEventListener=function(t){this.listeners.push(t)},TD.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},TD);function TD(){this.listeners=[]}var SD,CD,ND={},AD=[],kD={},OD="dataLayer",RD="gtag",PD=!1;function DD(t,e){n=[],Do()&&n.push("This is a browser extension environment."),Uo()||n.push("Cookies are not available."),0<n.length&&(n=n.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=mD.create("invalid-analytics-context",{errorInfo:n}),gD.warn(n.message));var n,r,i,o,s,a,u,c,h,l,f=t.options.appId;if(!f)throw mD.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw mD.create("no-api-key");gD.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=ND[f])throw mD.create("already-exists",{id:f});return PD||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(yD))return r}}()||(s=OD,(a=document.createElement("script")).src=yD+"?l="+s,a.async=!0,document.head.appendChild(a)),i=OD,o=[],Array.isArray(window[i])?o=window[i]:window[i]=o,n=ND,s=AD,a=kD,r=OD,i=RD,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)},window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=(u=o,c=n,h=s,l=a,function(n,r,i){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==lD.EVENT?[3,2]:[4,function(u,c,h,l,f){return vo(this,void 0,void 0,function(){var n,r,e,i,o,s,a;return yo(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),n=[],f&&f.send_to?(a=f.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e});if(!(t=t&&c[t.appId]))return n=[],"break";n.push(t)},i=0,o=a;i<o.length&&(s=o[i],"break"!==e(s));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(lD.EVENT,l,f||{}),[3,5];case 4:return a=t.sent(),gD.error(a),[3,5];case 5:return[2]}})})}(u,c,h,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==lD.CONFIG?[3,4]:[4,function(r,i,o,s,a,u){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:e=s[a],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return(n=(n=t.sent()).find(function(t){return t.measurementId===a}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),gD.error(n),[3,8];case 8:return r(lD.CONFIG,a,u),[2]}})})}(u,c,h,l,r,i)];case 3:return t.sent(),[3,5];case 4:u(lD.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),gD.error(e),[3,7];case 7:return[2]}})})}),i={gtagCore:o,wrappedGtag:window[i]},CD=i.wrappedGtag,SD=i.gtagCore,PD=!0),ND[f]=function(i,o,s,a,u){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return(e=ED(i)).then(function(t){s[t.measurementId]=t.appId,i.options.measurementId&&t.measurementId!==i.options.measurementId&&gD.warn("The measurement ID in the local Firebase config ("+i.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return gD.error(t)}),o.push(e),n=function(){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return Mo()?[3,1]:(gD.warn(mD.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,Fo()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),gD.warn(mD.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?a.getId():void 0}),[4,Promise.all([e,n])];case 1:return r=t.sent(),e=r[0],n=r[1],u("js",new Date),(r={})[pD]="firebase",r.update=!0,null!=n&&(r[fD]=n),u(lD.CONFIG,e.measurementId,r),[2,e.measurementId]}})})}(t,AD,kD,e,SD),{app:t,logEvent:function(t,e,n){(function(n,r,i,o,s){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return s&&s.global?(n(lD.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=po(po({},o),{send_to:e}),n(lD.EVENT,i,e),t.label=3;case 3:return[2]}})})})(CD,ND[f],t,e,n).catch(function(t){return gD.error(t)})},setCurrentScreen:function(t,e){(function(n,r,i,o){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return o&&o.global?(n(lD.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(lD.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})})(CD,ND[f],t,e).catch(function(t){return gD.error(t)})},setUserId:function(t,e){(function(n,r,i,o){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return o&&o.global?(n(lD.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(lD.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})})(CD,ND[f],t,e).catch(function(t){return gD.error(t)})},setUserProperties:function(t,e){(function(s,a,u,c){return vo(this,void 0,void 0,function(){var e,n,r,i,o;return yo(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return s(lD.SET,e),[2,Promise.resolve()];case 1:return[4,a];case 2:o=t.sent(),s(lD.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})})(CD,ND[f],t,e).catch(function(t){return gD.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(n,r){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})})(ND[f],t).catch(function(t){return gD.error(t)})},INTERNAL:{delete:function(){return delete ND[f],Promise.resolve()}}}}var xD="analytics";(iu=Vl).INTERNAL.registerComponent(new vs(xD,function(t){return DD(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:function(t){if(PD)throw mD.create("already-initialized");t.dataLayerName&&(OD=t.dataLayerName),t.gtagName&&(RD=t.gtagName)},EventName:lt,isSupported:function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:if(Do())return[2,!1];if(!Uo())return[2,!1];if(!Mo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Fo()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}})),iu.INTERNAL.registerComponent(new vs("analytics-internal",function(t){try{return{logEvent:t.getProvider(xD).getImmediate().logEvent}}catch(t){throw mD.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),iu.registerVersion("@firebase/analytics","0.6.2");var LD=(MD.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},MD.prototype.fetch=function(i){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e)?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},MD);function MD(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var zn=((zn={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",zn["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",zn["registration-api-key"]="Undefined API key. Check Firebase app initialization.",zn["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",zn["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",zn["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",zn["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",zn["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",zn["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",zn["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',zn["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',zn["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",zn["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",zn),FD=new Wo("remoteconfig","Remote Config",zn),UD=(jD.prototype.fetch=function(f){return vo(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l;return yo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),FD.create(o,{originalErrorMessage:i.message});case 6:if(s=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),FD.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?s=500:"NO_CHANGE"===c?s=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==s&&200!==s)throw FD.create("fetch-status",{httpStatus:s});return[2,{status:s,eTag:a,config:u}]}var e})})},jD);function jD(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var VD=(qD.prototype.addEventListener=function(t){this.listeners.push(t)},qD.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},qD);function qD(){this.listeners=[]}var BD=["1","true","t","yes","y","on"],WD=(HD.prototype.asString=function(){return this._value},HD.prototype.asBoolean=function(){return"static"!==this._source&&0<=BD.indexOf(this._value.toLowerCase())},HD.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},HD.prototype.getSource=function(){return this._source},HD);function HD(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var KD=(zD.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Is.DEBUG;break;case"silent":this._logger.logLevel=Is.SILENT;break;default:this._logger.logLevel=Is.ERROR}},Object.defineProperty(zD.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(zD.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),zD.prototype.activate=function(){return vo(this,void 0,void 0,function(){var e,n;return yo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},zD.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},zD.prototype.fetch=function(){return vo(this,void 0,void 0,function(){var e,n,r,i=this;return yo(this,function(t){switch(t.label){case 0:e=new VD,setTimeout(function(){return vo(i,void 0,void 0,function(){return yo(this,function(t){return e.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return n=t.sent(),r=n instanceof qo&&-1!==n.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw t.sent(),n;case 6:return[2]}})})},zD.prototype.fetchAndActivate=function(){return vo(this,void 0,void 0,function(){return yo(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},zD.prototype.getAll=function(){var t,e,n=this;return t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(po(po({},t),e)).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},zD.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},zD.prototype.getNumber=function(t){return this.getValue(t).asNumber()},zD.prototype.getString=function(t){return this.getValue(t).asString()},zD.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new WD("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new WD("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new WD("static"))},zD);function zD(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function GD(t,e){return t=t.target.error||void 0,FD.create(e,{originalErrorMessage:t&&t.message})}var QD="app_namespace_store",YD=(XD.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},XD.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},XD.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},XD.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},XD.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},XD.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},XD.prototype.getActiveConfig=function(){return this.get("active_config")},XD.prototype.setActiveConfig=function(t){return this.set("active_config",t)},XD.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},XD.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},XD.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},XD.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},XD.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},XD.prototype.get=function(a){return vo(this,void 0,void 0,function(){var o,s=this;return yo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([QD],"readonly").objectStore(QD),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){n(GD(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result,e(t?t.value:void 0)}}catch(t){n(FD.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},XD.prototype.set=function(a,u){return vo(this,void 0,void 0,function(){var o,s=this;return yo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([QD],"readwrite").objectStore(QD),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(GD(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(FD.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},XD.prototype.delete=function(a){return vo(this,void 0,void 0,function(){var o,s=this;return yo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([QD],"readwrite").objectStore(QD),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(GD(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(FD.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},XD.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},XD);function XD(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open("firebase_remote_config",1);t.onerror=function(t){n(GD(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(QD,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var JD=($D.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},$D.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},$D.prototype.getActiveConfig=function(){return this.activeConfig},$D.prototype.loadFromStorage=function(){return vo(this,void 0,void 0,function(){var e,n,r;return yo(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},$D.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},$D.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},$D.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},$D);function $D(t){this.storage=t}var ZD=(tx.prototype.fetch=function(n){return vo(this,void 0,void 0,function(){var e;return yo(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},tx.prototype.attemptFetch=function(s,t){var a=t.throttleEndTimeMillis,u=t.backoffCount;return vo(this,void 0,void 0,function(){var n,r;return yo(this,function(t){switch(t.label){case 0:return[4,(i=s.signal,o=a,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(FD.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(s)];case 3:return n=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,n];case 5:if(!((e=r=t.sent())instanceof qo&&e.customData)||429!==(e=Number(e.customData.httpStatus))&&500!==e&&503!==e&&504!==e)throw r;return r={throttleEndTimeMillis:Date.now()+ds(u),backoffCount:u+1},[4,this.storage.setThrottleMetadata(r)];case 6:return t.sent(),[2,this.attemptFetch(s,r)];case 7:return[2]}var e,i,o})})},tx);function tx(t,e){this.client=t,this.storage=e}var ex,nx="@firebase/remote-config";return(ex=Vl).INTERNAL.registerComponent(new vs("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw FD.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw FD.create("registration-project-id");if(!s)throw FD.create("registration-api-key");if(!a)throw FD.create("registration-app-id");e=e||"firebase";var u=new YD(a,n.name,e),t=new JD(u);return(i=new ks(nx)).logLevel=Is.ERROR,a=new UD(r,ex.SDK_VERSION,e,o,s,a),a=new ZD(a,u),a=new LD(a,u,t,i),(i=new KD(n,a,t,u,i)).ensureInitialized(),i},"PUBLIC").setMultipleInstances(!0)),ex.registerVersion(nx,"0.1.30"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Vl.registerVersion("firebase","8.1.0","cdn"),Vl});