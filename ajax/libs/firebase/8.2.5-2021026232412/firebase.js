!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return p&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function n(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(d&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(f&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(y&&d&&m(t))this._bodyArrayBuffer=n(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=n(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(e)}),this.text=function(){var t,e,n=o(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=a(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n,r=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(n=e.method||this.method||"GET",t=n.toUpperCase(),-1<_.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function l(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}var f,p,d,v,y,g,m,b,_,w;(qt="undefined"!=typeof self?self:void 0).fetch||(f="URLSearchParams"in qt,p="Symbol"in qt&&"iterator"in Symbol,d="FileReader"in qt&&"Blob"in qt&&function(){try{return new Blob,!0}catch(t){return!1}}(),v="FormData"in qt,(y="ArrayBuffer"in qt)&&(g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&-1<g.indexOf(Object.prototype.toString.call(t))}),s.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+","+e:e},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=i(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},s.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},p&&(s.prototype[Symbol.iterator]=s.prototype.entries),_=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t},w=[301,302,303,307,308],l.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},qt.Headers=s,qt.Request=c,qt.Response=l,qt.fetch=function(n,o){return new Promise(function(r,t){var e=new c(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new s,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new l(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&d&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},qt.fetch.polyfill=!0);var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function I(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}function T(t){try{return!!t()}catch(t){return!0}}function S(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function C(t){return q.call(t).slice(8,-1)}function N(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function A(t){return H(N(t))}function k(t){return"object"==typeof t?null!==t:"function"==typeof t}function O(t,e){if(!k(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!k(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!k(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!k(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function R(t,e){return K.call(t,e)}function P(t){return z?W.createElement(t):{}}function D(t){if(!k(t))throw TypeError(String(t)+" is not an object");return t}function x(e,n){try{$(M,e,n)}catch(t){M[e]=n}return n}var L=function(t){return t&&t.Math==Math&&t},M=L("object"==typeof globalThis&&globalThis)||L("object"==typeof window&&window)||L("object"==typeof self&&self)||L("object"==typeof E&&E)||function(){return this}()||Function("return this")(),F=!T(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),U={}.propertyIsEnumerable,j=Object.getOwnPropertyDescriptor,V={f:j&&!U.call({1:2},1)?function(t){t=j(this,t);return!!t&&t.enumerable}:U},q={}.toString,B="".split,H=T(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==C(t)?B.call(t,""):Object(t)}:Object,K={}.hasOwnProperty,W=M.document,z=k(W)&&k(W.createElement),G=!F&&!T(function(){return 7!=Object.defineProperty(P("div"),"a",{get:function(){return 7}}).a}),Q=Object.getOwnPropertyDescriptor,Y={f:F?Q:function(t,e){if(t=A(t),e=O(e,!0),G)try{return Q(t,e)}catch(t){}if(R(t,e))return S(!V.f.call(t,e),t[e])}},X=Object.defineProperty,J={f:F?X:function(t,e,n){if(D(t),e=O(e,!0),D(n),G)try{return X(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},$=F?function(t,e,n){return J.f(t,e,S(1,n))}:function(t,e,n){return t[e]=n,t},Z="__core-js_shared__",tt=M[Z]||x(Z,{}),et=Function.toString;"function"!=typeof tt.inspectSource&&(tt.inspectSource=function(t){return et.call(t)});function nt(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++yt+gt).toString(36)}var rt,it,ot,st,at,ut,ct,ht,lt=tt.inspectSource,ft=M.WeakMap,pt="function"==typeof ft&&/native code/.test(lt(ft)),dt=!1,vt=I(function(t){(t.exports=function(t,e){return tt[t]||(tt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})}),yt=0,gt=Math.random(),mt=vt("keys"),bt=function(t){return mt[t]||(mt[t]=nt(t))},_t={},wt=M.WeakMap;ct=pt?(rt=tt.state||(tt.state=new wt),it=rt.get,ot=rt.has,st=rt.set,at=function(t,e){return e.facade=t,st.call(rt,t,e),e},ut=function(t){return it.call(rt,t)||{}},function(t){return ot.call(rt,t)}):(ht=bt("state"),_t[ht]=!0,at=function(t,e){return e.facade=t,$(t,ht,e),e},ut=function(t){return R(t,ht)?t[ht]:{}},function(t){return R(t,ht)});function Et(t){return"function"==typeof t?t:void 0}function It(t,e){return arguments.length<2?Et(Lt[t])||Et(M[t]):Lt[t]&&Lt[t][e]||M[t]&&M[t][e]}function Tt(t){return isNaN(t=+t)?0:(0<t?Ft:Mt)(t)}function St(t){return 0<t?Ut(Tt(t),9007199254740991):0}function Ct(t,e){var n,r=A(t),i=0,o=[];for(n in r)!R(_t,n)&&R(r,n)&&o.push(n);for(;e.length>i;)R(r,n=e[i++])&&(~Bt(o,n)||o.push(n));return o}function Nt(t,e){for(var n=Gt(e),r=J.f,i=Y.f,o=0;o<n.length;o++){var s=n[o];R(t,s)||r(t,s,i(e,s))}}function At(t,e){var n,r,i,o=t.target,s=t.global,a=t.stat,u=s?M:a?M[o]||x(o,{}):(M[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=te(u,n))&&i.value:u[n],!Zt(s?n:o+(a?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;Nt(r,i)}(t.sham||i&&i.sham)&&$(r,"sham",!0),xt(u,n,r,t)}}function kt(t){return Object(N(t))}function Ot(){}function Rt(t){return"<script>"+t+"</"+ce+">"}var Pt,Dt={set:at,get:ut,has:ct,enforce:function(t){return ct(t)?ut(t):at(t,{})},getterFor:function(n){return function(t){var e;if(!k(t)||(e=ut(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},xt=I(function(t){var e=Dt.get,a=Dt.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||R(n,"name")||$(n,"name",e),(r=a(n)).source||(r.source=u.join("string"==typeof e?e:""))),t!==M?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:$(t,e,n)):o?t[e]=n:x(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||lt(this)})}),Lt=M,Mt=Math.ceil,Ft=Math.floor,Ut=Math.min,jt=Math.max,Vt=Math.min,qt=function(a){return function(t,e,n){var r,i=A(t),o=St(i.length),s=function(t,e){t=Tt(t);return t<0?jt(t+e,0):Vt(t,e)}(n,o);if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}},Bt={includes:qt(!0),indexOf:qt(!1)}.indexOf,Ht=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Kt=Ht.concat("length","prototype"),Wt={f:Object.getOwnPropertyNames||function(t){return Ct(t,Kt)}},zt={f:Object.getOwnPropertySymbols},Gt=It("Reflect","ownKeys")||function(t){var e=Wt.f(D(t)),n=zt.f;return n?e.concat(n(t)):e},Qt=/#|\.prototype\./,L=function(t,e){t=Xt[Yt(t)];return t==$t||t!=Jt&&("function"==typeof e?T(e):!!e)},Yt=L.normalize=function(t){return String(t).replace(Qt,".").toLowerCase()},Xt=L.data={},Jt=L.NATIVE="N",$t=L.POLYFILL="P",Zt=L,te=Y.f,E=!T(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),ee=bt("IE_PROTO"),ne=Object.prototype,re=E?Object.getPrototypeOf:function(t){return t=kt(t),R(t,ee)?t[ee]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ne:null},ie=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return D(t),function(t){if(!k(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),oe=Object.keys||function(t){return Ct(t,Ht)},se=F?Object.defineProperties:function(t,e){D(t);for(var n,r=oe(e),i=r.length,o=0;o<i;)J.f(t,n=r[o++],e[n]);return t},ae=It("document","documentElement"),ue="prototype",ce="script",he=bt("IE_PROTO"),le=function(){try{Pt=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;le=Pt?function(t){t.write(Rt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Pt):((t=P("iframe")).style.display="none",ae.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(Rt("document.F=Object")),t.close(),t.F);for(var e=Ht.length;e--;)delete le[ue][Ht[e]];return le()};_t[he]=!0;function fe(t){return R(me,t)||(ge&&R(be,t)?me[t]=be[t]:me[t]=_e("Symbol."+t)),me[t]}function pe(t){return void 0!==t&&(we.Array===t||Ie[Ee]===t)}function de(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function ve(r,i,t){if(de(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}var ye=Object.create||function(t,e){var n;return null!==t?(Ot[ue]=D(t),n=new Ot,Ot[ue]=null,n[he]=t):n=le(),void 0===e?n:se(n,e)},ge=!!Object.getOwnPropertySymbols&&!T(function(){return!String(Symbol())}),U=ge&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,me=vt("wks"),be=M.Symbol,_e=U?be:be&&be.withoutSetter||nt,we={},Ee=fe("iterator"),Ie=Array.prototype,Z={};Z[fe("toStringTag")]="z";function Te(t){if(null!=t)return t[Re]||t["@@iterator"]||we[Oe(t)]}function Se(t){var e=t.return;return void 0!==e&&D(e.call(t)).value}function Ce(t,e){this.stopped=t,this.result=e}function Ne(t,e,n){function r(t){return o&&Se(o),new Ce(!0,t)}function i(t){return f?(D(t),d?v(t[0],t[1],r):v(t[0],t[1])):d?v(t,r):v(t)}var o,s,a,u,c,h,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=ve(e,l,1+f+d);if(p)o=t;else{if("function"!=typeof(p=Te(t)))throw TypeError("Target is not iterable");if(pe(p)){for(s=0,a=St(t.length);s<a;s++)if((u=i(t[s]))&&u instanceof Ce)return u;return new Ce(!1)}o=p.call(t)}for(c=o.next;!(h=c.call(o)).done;){try{u=i(h.value)}catch(t){throw Se(o),t}if("object"==typeof u&&u&&u instanceof Ce)return u}return new Ce(!1)}var ft="[object z]"===String(Z),Ae=fe("toStringTag"),ke="Arguments"==C(function(){return arguments}()),Oe=ft?C:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ae))?t:ke?C(e):"Object"==(t=C(e))&&"function"==typeof e.callee?"Arguments":t},Re=fe("iterator"),Pe=function(t,e){var n=this;if(!(n instanceof Pe))return new Pe(t,e);ie&&(n=ie(new Error(void 0),re(n))),void 0!==e&&$(n,"message",String(e));e=[];return Ne(t,e.push,{that:e}),$(n,"errors",e),n};Pe.prototype=ye(Error.prototype,{constructor:S(5,Pe),message:S(5,""),name:S(5,"AggregateError")}),At({global:!0},{AggregateError:Pe});pt=ft?{}.toString:function(){return"[object "+Oe(this)+"]"};ft||xt(Object.prototype,"toString",pt,{unsafe:!0});function De(t,e,n){for(var r in e)xt(t,r,e[r],n);return t}function xe(t,e,n){t&&!R(t=n?t:t.prototype,je)&&Ue(t,je,{configurable:!0,value:e})}function Le(t){var e=It(t),t=J.f;F&&e&&!e[Ve]&&t(e,Ve,{configurable:!0,get:function(){return this}})}function Me(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}var Fe=M.Promise,Ue=J.f,je=fe("toStringTag"),Ve=fe("species"),qe=fe("iterator"),Be=!1;try{var He=0,Ke={next:function(){return{done:!!He++}},return:function(){Be=!0}};Ke[qe]=function(){return this},Array.from(Ke,function(){throw 2})}catch(ia){}function We(t,e){if(!e&&!Be)return!1;var n=!1;try{var r={};r[qe]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function ze(t,e){var n;return void 0===(t=D(t).constructor)||null==(n=D(t)[Xe])?e:de(n)}function Ge(t){var e;nn.hasOwnProperty(t)&&(e=nn[t],delete nn[t],e())}function Qe(t){return function(){Ge(t)}}var Ye,Xe=fe("species"),wt=It("navigator","userAgent")||"",qt=/(iphone|ipod|ipad).*applewebkit/i.test(wt),Je="process"==C(M.process),$e=M.location,L=M.setImmediate,E=M.clearImmediate,Ze=M.process,Z=M.MessageChannel,tn=M.Dispatch,en=0,nn={},rn="onreadystatechange",ft=function(t){Ge(t.data)},pt=function(t){M.postMessage(t+"",$e.protocol+"//"+$e.host)};L&&E||(L=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return nn[++en]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ye(en),en},E=function(t){delete nn[t]},Je?Ye=function(t){Ze.nextTick(Qe(t))}:tn&&tn.now?Ye=function(t){tn.now(Qe(t))}:Z&&!qt?(pn=(Z=new Z).port2,Z.port1.onmessage=ft,Ye=ve(pn.postMessage,pn,1)):M.addEventListener&&"function"==typeof postMessage&&!M.importScripts&&$e&&"file:"!==$e.protocol&&!T(pt)?(Ye=pt,M.addEventListener("message",ft,!1)):Ye=rn in P("script")?function(t){ae.appendChild(P("script"))[rn]=function(){ae.removeChild(this),Ge(t)}}:function(t){setTimeout(Qe(t),0)});var on,sn,an,un,cn,hn,ln,fn,pn={set:L,clear:E},pt=Y.f,dn=pn.set,ft=M.MutationObserver||M.WebKitMutationObserver,L=M.document,vn=M.process,E=M.Promise,pt=pt(M,"queueMicrotask"),pt=pt&&pt.value;pt||(on=function(){var t,e;for(Je&&(t=vn.domain)&&t.exit();sn;){e=sn.fn,sn=sn.next;try{e()}catch(t){throw sn?un():an=void 0,t}}an=void 0,t&&t.enter()},un=!qt&&!Je&&ft&&L?(cn=!0,hn=L.createTextNode(""),new ft(on).observe(hn,{characterData:!0}),function(){hn.data=cn=!cn}):E&&E.resolve?(ln=E.resolve(void 0),fn=ln.then,function(){fn.call(ln,on)}):Je?function(){vn.nextTick(on)}:function(){dn.call(M,on)});function yn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=de(n),this.reject=de(r)}function gn(t,e){return D(t),k(e)&&e.constructor===t?e:((0,(t=_n.f(t)).resolve)(e),t.promise)}function mn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var bn=pt||function(t){t={fn:t,next:void 0};an&&(an.next=t),sn||(sn=t,un()),an=t},_n={f:function(t){return new yn(t)}},pt=M.process,pt=pt&&pt.versions,pt=pt&&pt.v8;pt?Zn=(Gn=pt.split("."))[0]+Gn[1]:wt&&(!(Gn=wt.match(/Edge\/(\d+)/))||74<=Gn[1])&&(Gn=wt.match(/Chrome\/(\d+)/))&&(Zn=Gn[1]);function wn(t){var e;return!(!k(t)||"function"!=typeof(e=t.then))&&e}function En(l,f){var p;l.notified||(l.notified=!0,p=l.reactions,bn(function(){for(var t=l.value,e=1==l.state,n=0;p.length>n;){var r,i,o,s=p[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===l.rejection&&Xn(l),l.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(Un("Promise-chain cycle")):(i=wn(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}l.reactions=[],l.notified=!1,f&&!l.rejection&&Qn(l)}))}function In(t,e,n){var r,i;Kn?((r=jn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),M.dispatchEvent(r)):r={promise:e,reason:n},!Wn&&(i=M["on"+t])?i(r):t===zn&&function(t,e){var n=M.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Tn(e,n,r){return function(t){e(n,t,r)}}function Sn(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,En(t,!0))}var Cn,Nn,An,kn,On=Zn&&+Zn,Rn=pn.set,Pn=fe("species"),Dn="Promise",xn=Dt.get,Ln=Dt.set,Mn=Dt.getterFor(Dn),Fn=Fe,Un=M.TypeError,jn=M.document,Vn=M.process,qn=It("fetch"),Bn=_n.f,Hn=Bn,Kn=!!(jn&&jn.createEvent&&M.dispatchEvent),Wn="function"==typeof PromiseRejectionEvent,zn="unhandledrejection",wt=Zt(Dn,function(){if(!(lt(Fn)!==String(Fn))){if(66===On)return!0;if(!Je&&!Wn)return!0}if(51<=On&&/native code/.test(Fn))return!1;function t(t){t(function(){},function(){})}var e=Fn.resolve(1);return(e.constructor={})[Pn]=t,!(e.then(function(){})instanceof t)}),Gn=wt||!We(function(t){Fn.all(t).catch(function(){})}),Qn=function(r){Rn.call(M,function(){var t,e=r.facade,n=r.value;if(Yn(r)&&(t=mn(function(){Je?Vn.emit("unhandledRejection",n,e):In(zn,e,n)}),r.rejection=Je||Yn(r)?2:1,t.error))throw t.value})},Yn=function(t){return 1!==t.rejection&&!t.parent},Xn=function(e){Rn.call(M,function(){var t=e.facade;Je?Vn.emit("rejectionHandled",t):In("rejectionhandled",t,e.value)})},Jn=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw Un("Promise can't be resolved itself");var r=wn(t);r?bn(function(){var e={done:!1};try{r.call(t,Tn(Jn,e,n),Tn(Sn,e,n))}catch(t){Sn(e,t,n)}}):(n.value=t,n.state=1,En(n,!1))}catch(t){Sn({done:!1},t,n)}}};wt&&(Fn=function(t){Me(this,Fn,Dn),de(t),Cn.call(this);var e=xn(this);try{t(Tn(Jn,e),Tn(Sn,e))}catch(t){Sn(e,t)}},(Cn=function(){Ln(this,{type:Dn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=De(Fn.prototype,{then:function(t,e){var n=Mn(this),r=Bn(ze(this,Fn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Je?Vn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&En(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Nn=function(){var t=new Cn,e=xn(t);this.promise=t,this.resolve=Tn(Jn,e),this.reject=Tn(Sn,e)},_n.f=Bn=function(t){return t===Fn||t===An?new Nn:Hn(t)},"function"==typeof Fe&&(kn=Fe.prototype.then,xt(Fe.prototype,"then",function(t,e){var n=this;return new Fn(function(t,e){kn.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof qn&&At({global:!0,enumerable:!0,forced:!0},{fetch:function(){return gn(Fn,qn.apply(M,arguments))}}))),At({global:!0,wrap:!0,forced:wt},{Promise:Fn}),xe(Fn,Dn,!1),Le(Dn),An=It(Dn),At({target:Dn,stat:!0,forced:wt},{reject:function(t){var e=Bn(this);return e.reject.call(void 0,t),e.promise}}),At({target:Dn,stat:!0,forced:wt},{resolve:function(t){return gn(this,t)}}),At({target:Dn,stat:!0,forced:Gn},{all:function(t){var a=this,e=Bn(a),u=e.resolve,c=e.reject,n=mn(function(){var r=de(a.resolve),i=[],o=0,s=1;Ne(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=Bn(n),i=r.reject,e=mn(function(){var e=de(n.resolve);Ne(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),At({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=_n.f(a),u=e.resolve,n=e.reject,r=mn(function(){var r=de(a.resolve),i=[],o=0,s=1;Ne(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});var $n="No one promise resolved";At({target:"Promise",stat:!0},{any:function(t){var u=this,e=_n.f(u),c=e.resolve,h=e.reject,n=mn(function(){var r=de(u.resolve),i=[],o=0,s=1,a=!1;Ne(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(It("AggregateError"))(i,$n)))})}),--s||h(new(It("AggregateError"))(i,$n))});return n.error&&h(n.value),e.promise}});var Zn=!!Fe&&T(function(){Fe.prototype.finally.call({then:function(){}},function(){})});At({target:"Promise",proto:!0,real:!0,forced:Zn},{finally:function(e){var n=ze(this,It("Promise")),t="function"==typeof e;return this.then(t?function(t){return gn(n,e()).then(function(){return t})}:e,t?function(t){return gn(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof Fe||Fe.prototype.finally||xt(Fe.prototype,"finally",It("Promise").prototype.finally);pn=function(o){return function(t,e){var n,r=String(N(t)),i=Tt(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}},wt={codeAt:pn(!1),charAt:pn(!0)},Gn=fe("iterator"),Zn=!1;[].keys&&("next"in(yr=[].keys())?(Dr=re(re(yr)))!==Object.prototype&&(Mr=Dr):Zn=!0),null==Mr&&(Mr={}),R(Mr,Gn)||$(Mr,Gn,function(){return this});function tr(){return this}function er(){return this}function nr(t,e,n,r,i,o,s){function a(t){if(t===i&&d)return d;if(!or&&t in f)return f[t];switch(t){case"keys":case ar:case ur:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){e+=" Iterator";t.prototype=ye(rr,{next:S(1,n)}),xe(t,e,!1),we[e]=tr}(n,e,r);var u,c,h=e+" Iterator",l=!1,f=t.prototype,p=f[sr]||f["@@iterator"]||i&&f[i],d=!or&&p||a(i);if((r="Array"==e&&f.entries||p)&&(t=re(r.call(new t)),ir!==Object.prototype&&t.next&&(re(t)!==ir&&(ie?ie(t,ir):"function"!=typeof t[sr]&&$(t,sr,er)),xe(t,h,!0))),i==ar&&p&&p.name!==ar&&(l=!0,d=function(){return p.call(this)}),f[sr]!==d&&$(f,sr,d),we[e]=d,i)if(u={values:a(ar),keys:o?d:a("keys"),entries:a(ur)},s)for(c in u)!or&&!l&&c in f||xt(f,c,u[c]);else At({target:e,proto:!0,forced:or||l},u);return u}var pn={IteratorPrototype:Mr,BUGGY_SAFARI_ITERATORS:Zn},rr=pn.IteratorPrototype,ir=pn.IteratorPrototype,or=pn.BUGGY_SAFARI_ITERATORS,sr=fe("iterator"),ar="values",ur="entries",cr=wt.charAt,hr="String Iterator",lr=Dt.set,fr=Dt.getterFor(hr);nr(String,"String",function(t){lr(this,{type:hr,string:String(t),index:0})},function(){var t=fr(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=cr(e,n),t.index+=n.length,{value:n,done:!1})});var pr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},dr=fe("unscopables"),vr=Array.prototype;null==vr[dr]&&J.f(vr,dr,{configurable:!0,value:ye(null)});var yr=function(t){vr[dr][t]=!0},gr="Array Iterator",mr=Dt.set,br=Dt.getterFor(gr),_r=nr(Array,"Array",function(t,e){mr(this,{type:gr,target:A(t),index:0,kind:e})},function(){var t=br(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");we.Arguments=we.Array,yr("keys"),yr("values"),yr("entries");var wr,Er=fe("iterator"),Ir=fe("toStringTag"),Tr=_r.values;for(wr in pr){var Sr=M[wr],Cr=Sr&&Sr.prototype;if(Cr){if(Cr[Er]!==Tr)try{$(Cr,Er,Tr)}catch(ia){Cr[Er]=Tr}if(Cr[Ir]||$(Cr,Ir,wr),pr[wr])for(var Nr in _r)if(Cr[Nr]!==_r[Nr])try{$(Cr,Nr,_r[Nr])}catch(ia){Cr[Nr]=_r[Nr]}}}Lt.Promise;At({target:"Promise",stat:!0},{try:function(t){var e=_n.f(this),t=mn(t);return(t.error?e.reject:e.resolve)(t.value),e.promise}});function Ar(t,e){var n;return Or(t)&&("function"==typeof(n=t.constructor)&&(n===Array||Or(n.prototype))||k(n)&&null===(n=n[Rr]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function kr(t){throw t}var Or=Array.isArray||function(t){return"Array"==C(t)},Rr=fe("species"),Pr=[].push,Dr=function(f){var p=1==f,d=2==f,v=3==f,y=4==f,g=6==f,m=7==f,b=5==f||g;return function(t,e,n,r){for(var i,o,s=kt(t),a=H(s),u=ve(e,n,3),c=St(a.length),h=0,r=r||Ar,l=p?r(t,c):d||m?r(t,0):void 0;h<c;h++)if((b||h in a)&&(o=u(i=a[h],h,s),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:Pr.call(l,i)}else switch(f){case 4:return!1;case 7:Pr.call(l,i)}return g?-1:v||y?y:l}},Gn={forEach:Dr(0),map:Dr(1),filter:Dr(2),some:Dr(3),every:Dr(4),find:Dr(5),findIndex:Dr(6),filterOut:Dr(7)},xr=Object.defineProperty,Lr={},Mr=function(t,e){if(R(Lr,t))return Lr[t];var n=[][t],r=!!R(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=R(e,0)?e[0]:kr,o=R(e,1)?e[1]:void 0;return Lr[t]=!!n&&!T(function(){if(r&&!F)return 1;var t={length:-1};r?xr(t,1,{enumerable:!0,get:kr}):t[1]=1,n.call(t,i,o)})},Fr=Gn.find,Zn="find",Ur=!0,pn=Mr(Zn);Zn in[]&&Array(1)[Zn](function(){Ur=!1}),At({target:"Array",proto:!0,forced:Ur||!pn},{find:function(t,e){return Fr(this,t,1<arguments.length?e:void 0)}}),yr(Zn);var jr=Function.call,wt=function(t,e,n){return ve(jr,M[t].prototype[e],n)},Vr=(wt("Array","find"),Gn.findIndex),Dr="findIndex",qr=!0,pn=Mr(Dr);Dr in[]&&Array(1)[Dr](function(){qr=!1}),At({target:"Array",proto:!0,forced:qr||!pn},{findIndex:function(t,e){return Vr(this,t,1<arguments.length?e:void 0)}}),yr(Dr);function Br(t,e,n){(e=O(e))in t?J.f(t,e,S(0,n)):t[e]=n}wt("Array","findIndex");Zn=!We(function(t){Array.from(t)});At({target:"Array",stat:!0,forced:Zn},{from:function(t,e,n){var r,i,o,s,a,u,c=kt(t),h="function"==typeof this?this:Array,t=arguments.length,l=1<t?e:void 0,f=void 0!==l,e=Te(c),p=0;if(f&&(l=ve(l,2<t?n:void 0,2)),null==e||h==Array&&pe(e))for(i=new h(r=St(c.length));p<r;p++)u=f?l(c[p],p):c[p],Br(i,p,u);else for(a=(s=e.call(c)).next,i=new h;!(o=a.call(s)).done;p++)u=f?function(e,t,n,r){try{return r?t(D(n)[0],n[1]):t(n)}catch(t){throw Se(e),t}}(s,l,[o.value,p],!0):o.value,Br(i,p,u);return i.length=p,i}});Lt.Array.from;var Hr,Kr,Wr=Gn.some,pn=!!(Kr=[]["some"])&&T(function(){Kr.call(null,Hr||function(){throw 1},1)}),yr=Mr("some");At({target:"Array",proto:!0,forced:!pn||!yr},{some:function(t,e){return Wr(this,t,1<arguments.length?e:void 0)}});wt("Array","some");function zr(t){return!!k(t)&&(t=Oe(t),R(ti,t)||R(ei,t))}var Gr,Dr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Zn=J.f,Qr=M.Int8Array,Yr=Qr&&Qr.prototype,Mr=M.Uint8ClampedArray,pn=Mr&&Mr.prototype,Xr=Qr&&re(Qr),Jr=Yr&&re(Yr),yr=Object.prototype,Mr=(yr.isPrototypeOf,fe("toStringTag")),$r=nt("TYPED_ARRAY_TAG"),Zr=Dr&&!!ie&&"Opera"!==Oe(M.opera),Dr=!1,ti={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},ei={BigInt64Array:8,BigUint64Array:8};for(Gr in ti)M[Gr]||(Zr=!1);if((!Zr||"function"!=typeof Xr||Xr===Function.prototype)&&(Xr=function(){throw TypeError("Incorrect invocation")},Zr))for(Gr in ti)M[Gr]&&ie(M[Gr],Xr);if((!Zr||!Jr||Jr===yr)&&(Jr=Xr.prototype,Zr))for(Gr in ti)M[Gr]&&ie(M[Gr].prototype,Jr);if(Zr&&re(pn)!==Jr&&ie(pn,Jr),F&&!R(Jr,Mr))for(Gr in Dr=!0,Zn(Jr,Mr,{get:function(){return k(this)?this[$r]:void 0}}),ti)M[Gr]&&$(M[Gr],$r,Gr);var pn=function(t){if(zr(t))return t;throw TypeError("Target is not a typed array")},Zn=function(t,e,n){if(F){if(n)for(var r in ti){var i=M[r];i&&R(i.prototype,t)&&delete i.prototype[t]}Jr[t]&&!n||xt(Jr,t,!n&&Zr&&Yr[t]||e)}},Mr=fe("iterator"),Dr=M.Uint8Array,ni=_r.values,ri=_r.keys,ii=_r.entries,oi=pn,pn=Zn,Zn=Dr&&Dr.prototype[Mr],Dr=!!Zn&&("values"==Zn.name||null==Zn.name),Zn=function(){return ni.call(oi(this))};pn("entries",function(){return ii.call(oi(this))}),pn("keys",function(){return ri.call(oi(this))}),pn("values",Zn,!Dr),pn(Mr,Zn,!Dr);var si=Object.assign,ai=Object.defineProperty,Zn=!si||T(function(){if(F&&1!==si({b:1},si(ai({},"a",{enumerable:!0,get:function(){ai(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=si({},t)[n]||oe(si({},e)).join("")!=r})?function(t){for(var e=kt(t),n=arguments.length,r=1,i=zt.f,o=V.f;r<n;)for(var s,a=H(arguments[r++]),u=i?oe(a).concat(i(a)):oe(a),c=u.length,h=0;h<c;)s=u[h++],F&&!o.call(a,s)||(e[s]=a[s]);return e}:si;At({target:"Object",stat:!0,forced:Object.assign!==Zn},{assign:Zn});Lt.Object.assign;var ui=V.f,Dr=function(a){return function(t){for(var e,n=A(t),r=oe(n),i=r.length,o=0,s=[];o<i;)e=r[o++],F&&!ui.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}},Zn={entries:Dr(!0),values:Dr(!1)},ci=Zn.entries;At({target:"Object",stat:!0},{entries:function(t){return ci(t)}});Lt.Object.entries;var hi=Zn.values;At({target:"Object",stat:!0},{values:function(t){return hi(t)}});Lt.Object.values;function li(t){if(k(e=t)&&(void 0!==(n=e[fi])?!!n:"RegExp"==C(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}var fi=fe("match"),pi=fe("match"),Dr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[pi]=!1,"/./"[e](n)}catch(t){}}return!1};At({target:"String",proto:!0,forced:!Dr("includes")},{includes:function(t,e){return!!~String(N(this)).indexOf(li(t),1<arguments.length?e:void 0)}});wt("String","includes");var di,Zn=Y.f,vi="".startsWith,yi=Math.min,Dr=Dr("startsWith"),di=!(Dr||(!(di=Zn(String.prototype,"startsWith"))||di.writable));At({target:"String",proto:!0,forced:!di&&!Dr},{startsWith:function(t,e){var n=String(N(this));li(t);e=St(yi(1<arguments.length?e:void 0,n.length)),t=String(t);return vi?vi.call(n,t,e):n.slice(e,e+t.length)===t}});wt("String","startsWith");At({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(N(this)),n="",r=Tt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});wt("String","repeat");var gi,mi=fe("species"),bi=fe("isConcatSpreadable"),_i=9007199254740991,wi="Maximum allowed index exceeded",Dr=51<=On||!T(function(){var t=[];return t[bi]=!1,t.concat()[0]!==t}),wt=(gi="concat",51<=On||!T(function(){var t=[];return(t.constructor={})[mi]=function(){return{foo:1}},1!==t[gi](Boolean).foo}));At({target:"Array",proto:!0,forced:!Dr||!wt},{concat:function(){for(var t,e,n,r=kt(this),i=Ar(r,0),o=0,s=-1,a=arguments.length;s<a;s++)if(function(t){if(!k(t))return!1;var e=t[bi];return void 0!==e?!!e:Or(t)}(n=-1===s?r:arguments[s])){if(e=St(n.length),_i<o+e)throw TypeError(wi);for(t=0;t<e;t++,o++)t in n&&Br(i,o,n[t])}else{if(_i<=o)throw TypeError(wi);Br(i,o++,n)}return i.length=o,i}});function Ei(t){var e=Lt.Symbol||(Lt.Symbol={});R(e,t)||ki(e,t,{value:Ai.f(t)})}function Ii(t,e){var n=Hi[t]=ye(Fi[Di]);return xi(n,{type:Pi,tag:t,description:e}),F||(n.description=e),n}function Ti(e,t){D(e);var n=A(t),t=oe(n).concat($i(n));return Oi(t,function(t){F&&!Ji.call(n,t)||Xi(e,t,n[t])}),e}var Si=Wt.f,Ci={}.toString,Ni="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wt={f:function(t){return Ni&&"[object Window]"==Ci.call(t)?function(t){try{return Si(t)}catch(t){return Ni.slice()}}(t):Si(A(t))}},Ai={f:fe},ki=J.f,Oi=Gn.forEach,Ri=bt("hidden"),Pi="Symbol",Di="prototype",Gn=fe("toPrimitive"),xi=Dt.set,Li=Dt.getterFor(Pi),Mi=Object[Di],Fi=M.Symbol,Ui=It("JSON","stringify"),ji=Y.f,Vi=J.f,qi=wt.f,Bi=V.f,Hi=vt("symbols"),Ki=vt("op-symbols"),Wi=vt("string-to-symbol-registry"),zi=vt("symbol-to-string-registry"),bt=vt("wks"),vt=M.QObject,Gi=!vt||!vt[Di]||!vt[Di].findChild,Qi=F&&T(function(){return 7!=ye(Vi({},"a",{get:function(){return Vi(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=ji(Mi,e);r&&delete Mi[e],Vi(t,e,n),r&&t!==Mi&&Vi(Mi,e,r)}:Vi,Yi=U?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Fi},Xi=function(t,e,n){t===Mi&&Xi(Ki,e,n),D(t);e=O(e,!0);return D(n),R(Hi,e)?(n.enumerable?(R(t,Ri)&&t[Ri][e]&&(t[Ri][e]=!1),n=ye(n,{enumerable:S(0,!1)})):(R(t,Ri)||Vi(t,Ri,S(1,{})),t[Ri][e]=!0),Qi(t,e,n)):Vi(t,e,n)},Ji=function(t){var e=O(t,!0),t=Bi.call(this,e);return!(this===Mi&&R(Hi,e)&&!R(Ki,e))&&(!(t||!R(this,e)||!R(Hi,e)||R(this,Ri)&&this[Ri][e])||t)},vt=function(t,e){var n=A(t),t=O(e,!0);if(n!==Mi||!R(Hi,t)||R(Ki,t)){e=ji(n,t);return!e||!R(Hi,t)||R(n,Ri)&&n[Ri][t]||(e.enumerable=!0),e}},U=function(t){var t=qi(A(t)),e=[];return Oi(t,function(t){R(Hi,t)||R(_t,t)||e.push(t)}),e},$i=function(t){var e=t===Mi,t=qi(e?Ki:A(t)),n=[];return Oi(t,function(t){!R(Hi,t)||e&&!R(Mi,t)||n.push(Hi[t])}),n};ge||(xt((Fi=function(t){if(this instanceof Fi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==t?String(t):void 0,e=nt(t),n=function(t){this===Mi&&n.call(Ki,t),R(this,Ri)&&R(this[Ri],e)&&(this[Ri][e]=!1),Qi(this,e,S(1,t))};return F&&Gi&&Qi(Mi,e,{configurable:!0,set:n}),Ii(e,t)})[Di],"toString",function(){return Li(this).tag}),xt(Fi,"withoutSetter",function(t){return Ii(nt(t),t)}),V.f=Ji,J.f=Xi,Y.f=vt,Wt.f=wt.f=U,zt.f=$i,Ai.f=function(t){return Ii(fe(t),t)},F&&(Vi(Fi[Di],"description",{configurable:!0,get:function(){return Li(this).description}}),xt(Mi,"propertyIsEnumerable",Ji,{unsafe:!0}))),At({global:!0,wrap:!0,forced:!ge,sham:!ge},{Symbol:Fi}),Oi(oe(bt),function(t){Ei(t)}),At({target:Pi,stat:!0,forced:!ge},{for:function(t){var e=String(t);if(R(Wi,e))return Wi[e];t=Fi(e);return Wi[e]=t,zi[t]=e,t},keyFor:function(t){if(!Yi(t))throw TypeError(t+" is not a symbol");if(R(zi,t))return zi[t]},useSetter:function(){Gi=!0},useSimple:function(){Gi=!1}}),At({target:"Object",stat:!0,forced:!ge,sham:!F},{create:function(t,e){return void 0===e?ye(t):Ti(ye(t),e)},defineProperty:Xi,defineProperties:Ti,getOwnPropertyDescriptor:vt}),At({target:"Object",stat:!0,forced:!ge},{getOwnPropertyNames:U,getOwnPropertySymbols:$i}),At({target:"Object",stat:!0,forced:T(function(){zt.f(1)})},{getOwnPropertySymbols:function(t){return zt.f(kt(t))}}),Ui&&(lo=!ge||T(function(){var t=Fi();return"[null]"!=Ui([t])||"{}"!=Ui({a:t})||"{}"!=Ui(Object(t))}),At({target:"JSON",stat:!0,forced:lo},{stringify:function(t,e){for(var n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if((k(n=e)||void 0!==t)&&!Yi(t))return Or(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Yi(e))return e}),r[1]=e,Ui.apply(null,r)}})),Fi[Di][Gn]||$(Fi[Di],Gn,Fi[Di].valueOf),xe(Fi,Pi),_t[Ri]=!0,Ei("asyncIterator");var Zi,to,eo,no,ro,vt=J.f,io=M.Symbol;!F||"function"!=typeof io||"description"in io.prototype&&void 0===io().description||(Zi={},Nt(to=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),t=this instanceof to?new io(e):void 0===e?io():io(e);return""===e&&(Zi[t]=!0),t},io),(vo=to.prototype=io.prototype).constructor=to,eo=vo.toString,no="Symbol(test)"==String(io("test")),ro=/^Symbol\((.*)\)[^)]+$/,vt(vo,"description",{configurable:!0,get:function(){var t=k(this)?this.valueOf():this,e=eo.call(t);if(R(Zi,t))return"";e=no?e.slice(7,-1):e.replace(ro,"$1");return""===e?void 0:e}}),At({global:!0,forced:!0},{Symbol:to})),Ei("hasInstance"),Ei("isConcatSpreadable"),Ei("iterator"),Ei("match"),Ei("matchAll"),Ei("replace"),Ei("search"),Ei("species"),Ei("split"),Ei("toPrimitive"),Ei("toStringTag"),Ei("unscopables"),xe(M.JSON,"JSON",!0),xe(Math,"Math",!0),At({global:!0},{Reflect:{}}),xe(M.Reflect,"Reflect",!0);Lt.Symbol;Ei("asyncDispose"),Ei("dispose"),Ei("observable"),Ei("patternMatch"),Ei("replaceAll");Ai.f("iterator");var oo=!T(function(){return Object.isExtensible(Object.preventExtensions({}))}),so=I(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=J.f,r=nt("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!k(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!R(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!R(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return oo&&s.REQUIRED&&o(t)&&!R(t,r)&&n(t),t}};_t[r]=!0}),U=function(s,t,e){function n(t){var n=p[t];xt(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!k(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!k(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!k(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=M[s],p=f&&f.prototype,d=f,v={};return Zt(s,"function"!=typeof f||!(h||p.forEach&&!T(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),so.REQUIRED=!0):Zt(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=T(function(){r.has(1)}),a=We(function(t){new f(t)}),u=!h&&T(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){Me(t,d,s);var n,r,i,o,n=(n=new f,r=t,t=d,ie&&"function"==typeof(i=r.constructor)&&i!==t&&k(o=i.prototype)&&o!==t.prototype&&ie(n,o),n);return null!=e&&Ne(e,n[l],{that:n,AS_ENTRIES:c}),n})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),v[s]=d,At({global:!0,forced:d!=f},v),xe(d,s),h||e.setStrong(d,s,c),d},ao=J.f,uo=so.fastKey,co=Dt.set,ho=Dt.getterFor,lo={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=a(t),o=u(t,e);return o?o.value=n:(i.last=o={index:r=uo(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),F?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var s=t(function(t,e){Me(t,s,n),co(t,{type:n,index:ye(null),first:void 0,last:void 0,size:0}),F||(t.size=0),null!=e&&Ne(e,t[i],{that:t,AS_ENTRIES:r})}),a=ho(n),u=function(t,e){var n,r=a(t),t=uo(e);if("F"!==t)return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return De(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,F?t.size=0:this.size=0},delete:function(t){var e,n=a(this),r=u(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),F?n.size--:this.size--),!!r},forEach:function(t,e){for(var n,r=a(this),i=ve(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!u(this,t)}}),De(s.prototype,r?{get:function(t){t=u(this,t);return t&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),F&&ao(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=ho(e),o=ho(r);nr(t,e,function(t,e){co(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),Le(e)}},Gn=(U("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},lo),Lt.Map,function(t,e,n){var r,i,o,s=arguments.length,a=1<s?e:void 0;return de(this),(e=void 0!==a)&&de(a),null==t?new this:(r=[],e?(i=0,o=ve(a,2<s?n:void 0,2),Ne(t,function(t){r.push(o(t,i++))})):Ne(t,r.push,{that:r}),new this(r))});At({target:"Map",stat:!0},{from:Gn});vt=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)};At({target:"Map",stat:!0},{of:vt});function fo(){for(var t,e=D(this),n=de(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}At({target:"Map",proto:!0,real:!0,forced:dt},{deleteAll:function(){return fo.apply(this,arguments)}});At({target:"Map",proto:!0,real:!0,forced:dt},{emplace:function(t,e){var n=D(this),e=n.has(t)&&"update"in e?e.update(n.get(t),t,n):e.insert(t,n);return n.set(t,e),e}});function po(t){return Map.prototype.entries.call(t)}At({target:"Map",proto:!0,real:!0,forced:dt},{every:function(t,e){var r=D(this),n=po(r),i=ve(t,1<arguments.length?e:void 0,3);return!Ne(n,function(t,e,n){if(!i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),At({target:"Map",proto:!0,real:!0,forced:dt},{filter:function(t,e){var n=D(this),r=po(n),i=ve(t,1<arguments.length?e:void 0,3),o=new(ze(n,It("Map"))),s=de(o.set);return Ne(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),o}}),At({target:"Map",proto:!0,real:!0,forced:dt},{find:function(t,e){var r=D(this),n=po(r),i=ve(t,1<arguments.length?e:void 0,3);return Ne(n,function(t,e,n){if(i(e,t,r))return n(e)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),At({target:"Map",proto:!0,real:!0,forced:dt},{findKey:function(t,e){var r=D(this),n=po(r),i=ve(t,1<arguments.length?e:void 0,3);return Ne(n,function(t,e,n){if(i(e,t,r))return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),At({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;de(n);var i=de(r.has),o=de(r.get),s=de(r.set);return Ne(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});At({target:"Map",proto:!0,real:!0,forced:dt},{includes:function(i){return Ne(po(D(this)),function(t,e,n){if((r=e)===(e=i)||r!=r&&e!=e)return n();var r},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),At({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;de(e);var r=de(n.set);return Ne(t,function(t){r.call(n,e(t),t)}),n}}),At({target:"Map",proto:!0,real:!0,forced:dt},{keyOf:function(r){return Ne(po(D(this)),function(t,e,n){if(e===r)return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),At({target:"Map",proto:!0,real:!0,forced:dt},{mapKeys:function(t,e){var n=D(this),r=po(n),i=ve(t,1<arguments.length?e:void 0,3),o=new(ze(n,It("Map"))),s=de(o.set);return Ne(r,function(t,e){s.call(o,i(e,t,n),e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),o}}),At({target:"Map",proto:!0,real:!0,forced:dt},{mapValues:function(t,e){var n=D(this),r=po(n),i=ve(t,1<arguments.length?e:void 0,3),o=new(ze(n,It("Map"))),s=de(o.set);return Ne(r,function(t,e){s.call(o,t,i(e,t,n))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),o}}),At({target:"Map",proto:!0,real:!0,forced:dt},{merge:function(){for(var t=D(this),e=de(t.set),n=0;n<arguments.length;)Ne(arguments[n++],e,{that:t,AS_ENTRIES:!0});return t}}),At({target:"Map",proto:!0,real:!0,forced:dt},{reduce:function(n,t){var r=D(this),e=po(r),i=arguments.length<2,o=i?void 0:t;if(de(n),Ne(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i)throw TypeError("Reduce of empty map with no initial value");return o}}),At({target:"Map",proto:!0,real:!0,forced:dt},{some:function(t,e){var r=D(this),n=po(r),i=ve(t,1<arguments.length?e:void 0,3);return Ne(n,function(t,e,n){if(i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),At({target:"Map",proto:!0,real:!0,forced:dt},{update:function(t,e,n){var r=D(this),i=arguments.length;de(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");n=o?r.get(t):de(2<i?n:void 0)(t,r);return r.set(t,e(n,t,r)),r}});var vo=function(t,e,n){var r,i=D(this),n=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof n)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof n&&(r=n(),i.set(t,r)),r};At({target:"Map",proto:!0,real:!0,forced:dt},{upsert:vo}),At({target:"Map",proto:!0,real:!0,forced:dt},{updateOrInsert:vo});U("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},lo),Lt.Set;At({target:"Set",stat:!0},{from:Gn}),At({target:"Set",stat:!0},{of:vt});At({target:"Set",proto:!0,real:!0,forced:dt},{addAll:function(){return function(){for(var t=D(this),e=de(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),At({target:"Set",proto:!0,real:!0,forced:dt},{deleteAll:function(){return fo.apply(this,arguments)}});function yo(t){return Set.prototype.values.call(t)}At({target:"Set",proto:!0,real:!0,forced:dt},{every:function(t,e){var n=D(this),r=yo(n),i=ve(t,1<arguments.length?e:void 0,3);return!Ne(r,function(t,e){if(!i(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),At({target:"Set",proto:!0,real:!0,forced:dt},{difference:function(t){var e=D(this),n=new(ze(e,It("Set")))(e),r=de(n.delete);return Ne(t,function(t){r.call(n,t)}),n}}),At({target:"Set",proto:!0,real:!0,forced:dt},{filter:function(t,e){var n=D(this),r=yo(n),i=ve(t,1<arguments.length?e:void 0,3),o=new(ze(n,It("Set"))),s=de(o.add);return Ne(r,function(t){i(t,t,n)&&s.call(o,t)},{IS_ITERATOR:!0}),o}}),At({target:"Set",proto:!0,real:!0,forced:dt},{find:function(t,e){var n=D(this),r=yo(n),i=ve(t,1<arguments.length?e:void 0,3);return Ne(r,function(t,e){if(i(t,t,n))return e(t)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),At({target:"Set",proto:!0,real:!0,forced:dt},{intersection:function(t){var e=D(this),n=new(ze(e,It("Set"))),r=de(e.has),i=de(n.add);return Ne(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),At({target:"Set",proto:!0,real:!0,forced:dt},{isDisjointFrom:function(t){var n=D(this),r=de(n.has);return!Ne(t,function(t,e){if(!0===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),At({target:"Set",proto:!0,real:!0,forced:dt},{isSubsetOf:function(t){var e=function(t){var e=Te(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return D(e.call(t))}(this),n=D(t),r=n.has;return"function"!=typeof r&&(n=new(It("Set"))(t),r=de(n.has)),!Ne(e,function(t,e){if(!1===r.call(n,t))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),At({target:"Set",proto:!0,real:!0,forced:dt},{isSupersetOf:function(t){var n=D(this),r=de(n.has);return!Ne(t,function(t,e){if(!1===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),At({target:"Set",proto:!0,real:!0,forced:dt},{join:function(t){var e=D(this),n=yo(e),e=void 0===t?",":String(t),t=[];return Ne(n,t.push,{that:t,IS_ITERATOR:!0}),t.join(e)}}),At({target:"Set",proto:!0,real:!0,forced:dt},{map:function(t,e){var n=D(this),r=yo(n),i=ve(t,1<arguments.length?e:void 0,3),o=new(ze(n,It("Set"))),s=de(o.add);return Ne(r,function(t){s.call(o,i(t,t,n))},{IS_ITERATOR:!0}),o}}),At({target:"Set",proto:!0,real:!0,forced:dt},{reduce:function(e,t){var n=D(this),r=yo(n),i=arguments.length<2,o=i?void 0:t;if(de(e),Ne(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},{IS_ITERATOR:!0}),i)throw TypeError("Reduce of empty set with no initial value");return o}}),At({target:"Set",proto:!0,real:!0,forced:dt},{some:function(t,e){var n=D(this),r=yo(n),i=ve(t,1<arguments.length?e:void 0,3);return Ne(r,function(t,e){if(i(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),At({target:"Set",proto:!0,real:!0,forced:dt},{symmetricDifference:function(t){var e=D(this),n=new(ze(e,It("Set")))(e),r=de(n.delete),i=de(n.add);return Ne(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),At({target:"Set",proto:!0,real:!0,forced:dt},{union:function(t){var e=D(this),e=new(ze(e,It("Set")))(e);return Ne(t,de(e.add),{that:e}),e}});var go=Math.floor;At({target:"Number",stat:!0},{isInteger:function(t){return!k(t)&&isFinite(t)&&go(t)===t}});Lt.Number.isInteger;At({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});Lt.Number.isNaN;var mo=function(t,e){return(mo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function bo(t,e){function n(){this.constructor=t}mo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var _o=function(){return(_o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function wo(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function Eo(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Io(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function To(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function So(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(To(arguments[e]));return t}function Co(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function No(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Ao(t){try{return Po.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var ko={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Oo=function(t,e){if(!t)throw Ro(e)},Ro=function(t){return new Error("Firebase Database ("+ko.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Po={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|c>>6,c=63&c;u||(c=64,s||(a=64)),r.push(n[h],n[o],n[a],n[c])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(No(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();o=o<<2|s>>4;r.push(o),64!==a&&(s=s<<4&240|a>>2,r.push(s),64!==u&&(u=a<<6&192|u,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Do(t){return xo(void 0,t)}function xo(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=xo(t[n],e[n]));return t}var Lo=(Mo.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},Mo);function Mo(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function Fo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Uo(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fo())}function jo(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Vo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function qo(){return!0===ko.NODE_ADMIN}function Bo(){return"indexedDB"in self&&null!=indexedDB}function Ho(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function Ko(){return!(!navigator||!navigator.cookieEnabled)}var Wo,zo="FirebaseError",Go=(bo(Qo,Wo=Error),Qo);function Qo(t,e,n){e=Wo.call(this,e)||this;return e.code=t,e.customData=n,e.name=zo,Object.setPrototypeOf(e,Qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,Yo.prototype.create),e}var Yo=(Xo.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(Jo,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new Go(o,t,i)},Xo);function Xo(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Jo=/\{\$([^}]+)}/g;function $o(t){return JSON.parse(t)}function Zo(t){return JSON.stringify(t)}function ts(t){var e={},n={},r={},i="";try{var o=t.split("."),e=$o(Ao(o[0])||""),n=$o(Ao(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function es(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ns(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function rs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function is(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var os=(ss.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},ss.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++){s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},ss.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},ss.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},ss);function ss(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function as(t,e){e=new us(t,e);return e.subscribe.bind(e)}var us=(cs.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},cs.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},cs.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},cs.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=hs),void 0===r.error&&(r.error=hs),void 0===r.complete&&(r.complete=hs);n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},cs.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},cs.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},cs.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},cs.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},cs);function cs(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function hs(){}function ls(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function fs(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}t+=" failed: ";return t+=r+" argument "}function ps(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(fs(t,e,r)+"must be a valid function.")}function ds(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(fs(t,e,r)+"must be a valid context object.")}function vs(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var ys=1e3,gs=2,ms=144e5,bs=.5;function _s(t,e,n){void 0===e&&(e=ys),void 0===n&&(n=gs);n=e*Math.pow(n,t),t=Math.round(bs*n*(Math.random()-.5)*2);return Math.min(ms,n+t)}var ws=(Es.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},Es.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},Es.prototype.setServiceProps=function(t){return this.serviceProps=t,this},Es);function Es(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var Is="[DEFAULT]",Ts=(Ss.prototype.get=function(t){void 0===t&&(t=Is);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Lo;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},Ss.prototype.getImmediate=function(t){var e=_o({identifier:Is,optional:!1},t),t=e.identifier,n=e.optional,r=this.normalizeInstanceIdentifier(t);try{var i=this.getOrInitializeService(r);if(i)return i;if(n)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(n)return null;throw t}},Ss.prototype.getComponent=function(){return this.component},Ss.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(Is)}catch(t){}try{for(var r=Io(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=To(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},Ss.prototype.clearInstance=function(t){void 0===t&&(t=Is),this.instancesDeferred.delete(t),this.instances.delete(t)},Ss.prototype.delete=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(So(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return t.sent(),[2]}})})},Ss.prototype.isComponentSet=function(){return null!=this.component},Ss.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===Is?void 0:e),this.instances.set(t,n)),n||null},Ss.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:Is},Ss);function Ss(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var Cs=(Ns.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},Ns.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},Ns.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Ts(t,this);return this.providers.set(t,e),e},Ns.prototype.getProviders=function(){return Array.from(this.providers.values())},Ns);function Ns(t){this.name=t,this.providers=new Map}function As(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var ks,Os=[];(Gn=ks=ks||{})[Gn.DEBUG=0]="DEBUG",Gn[Gn.VERBOSE=1]="VERBOSE",Gn[Gn.INFO=2]="INFO",Gn[Gn.WARN=3]="WARN",Gn[Gn.ERROR=4]="ERROR",Gn[Gn.SILENT=5]="SILENT";function Rs(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=xs[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,As(["["+i+"]  "+t.name+":"],n))}}var Ps={debug:ks.DEBUG,verbose:ks.VERBOSE,info:ks.INFO,warn:ks.WARN,error:ks.ERROR,silent:ks.SILENT},Ds=ks.INFO,xs=((vt={})[ks.DEBUG]="log",vt[ks.VERBOSE]="log",vt[ks.INFO]="info",vt[ks.WARN]="warn",vt[ks.ERROR]="error",vt),Ls=(Object.defineProperty(Ms.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ks))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),Ms.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Ps[t]:t},Object.defineProperty(Ms.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ms.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),Ms.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,As([this,ks.DEBUG],t)),this._logHandler.apply(this,As([this,ks.DEBUG],t))},Ms.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,As([this,ks.VERBOSE],t)),this._logHandler.apply(this,As([this,ks.VERBOSE],t))},Ms.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,As([this,ks.INFO],t)),this._logHandler.apply(this,As([this,ks.INFO],t))},Ms.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,As([this,ks.WARN],t)),this._logHandler.apply(this,As([this,ks.WARN],t))},Ms.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,As([this,ks.ERROR],t)),this._logHandler.apply(this,As([this,ks.ERROR],t))},Ms);function Ms(t){this.name=t,this._logLevel=Ds,this._logHandler=Rs,this._userLogHandler=null,Os.push(this)}function Fs(e){Os.forEach(function(t){t.setLogLevel(e)})}var Gn=((dt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",dt["bad-app-name"]="Illegal App name: '{$appName}",dt["duplicate-app"]="Firebase App named '{$appName}' already exists",dt["app-deleted"]="Firebase App named '{$appName}' already deleted",dt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",dt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",dt),Us=new Yo("app","Firebase",Gn),js="@firebase/app",Vs="[DEFAULT]",qs=((vt={})[js]="fire-core",vt["@firebase/analytics"]="fire-analytics",vt["@firebase/auth"]="fire-auth",vt["@firebase/database"]="fire-rtdb",vt["@firebase/functions"]="fire-fn",vt["@firebase/installations"]="fire-iid",vt["@firebase/messaging"]="fire-fcm",vt["@firebase/performance"]="fire-perf",vt["@firebase/remote-config"]="fire-rc",vt["@firebase/storage"]="fire-gcs",vt["@firebase/firestore"]="fire-fst",vt["fire-js"]="fire-js",vt["firebase-wrapper"]="fire-js-all",vt),Bs=new Ls("@firebase/app"),Hs=(Object.defineProperty(Ks.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ks.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Ks.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Ks.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Ks.prototype._getService=function(t,e){return void 0===e&&(e=Vs),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Ks.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Vs),this.container.getProvider(t).clearInstance(e)},Ks.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Bs.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Ks.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Ks.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Ks.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Us.create("app-deleted",{appName:this.name_})},Ks);function Ks(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Do(t),this.container=new Cs(e.name),this._addComponent(new ws("app",function(){return o},"PUBLIC"));try{for(var s=Io(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}Hs.prototype.name&&Hs.prototype.options||Hs.prototype.delete||console.log("dc");var Ws="8.2.5-2021026232412";function zs(u){var c={},h=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});{"object"==typeof e&&null!==e||(e={name:e})}var n=e;void 0===n.name&&(n.name=Vs);e=n.name;if("string"!=typeof e||!e)throw Us.create("bad-app-name",{appName:String(e)});if(es(c,e))throw Us.create("duplicate-app",{appName:e});n=new u(t,n,l);return c[e]=n},app:f,registerVersion:function(t,e,n){var r=null!==(i=qs[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t){n=['Unable to register library "'+r+'" with version "'+e+'":'];return i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Bs.warn(n.join(" "))}o(new ws(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:Fs,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Us.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=0,n=Os;t<n.length;t++){!function(t){var o=null;e&&e.level&&(o=Ps[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:ks[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}}(t,e)},apps:null,SDK_VERSION:Ws,INTERNAL:{registerComponent:o,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function f(t){if(!es(c,t=t||Vs))throw Us.create("no-app",{appName:t});return c[t]}function o(n){var e,t,r,i=n.name;if(h.has(i))return Bs.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===n.type?l[i]:null;h.set(i,n),"PUBLIC"===n.type&&(r=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[i])throw Us.create("invalid-app-argument",{appName:i});return t[i]()},void 0!==n.serviceProps&&xo(r,n.serviceProps),l[i]=r,u.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,n.multipleInstances?t:[])});try{for(var o=Io(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[i]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l}var dt=function t(){var e=zs(Hs);return e.INTERNAL=_o(_o({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){xo(e,t)},createSubscribe:as,ErrorFactory:Yo,deepExtend:xo}),e}(),Gs=(Qs.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){t=t.getComponent();return"VERSION"===(null==t?void 0:t.type)}(t)){t=t.getImmediate();return t.library+"/"+t.version}return null}).filter(function(t){return t}).join(" ")},Qs);function Qs(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(Bs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(mu=self.firebase.SDK_VERSION)&&0<=mu.indexOf("LITE")&&Bs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var Ys=dt.initializeApp;dt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&Bs.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Ys.apply(void 0,t)};var Xs,Js,Xl=dt;(Xs=Xl).INTERNAL.registerComponent(new ws("platform-logger",function(t){return new Gs(t)},"PRIVATE")),Xs.registerVersion(js,"0.6.14-2021026232412",Js),Xs.registerVersion("fire-js","");Xl.registerVersion("firebase","8.2.5-2021026232412","app");(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},s.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.v(t):this.h(t)}},s.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},s.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Qa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Qa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Qa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},s});var h=h||{},l=this||self,e=/^[\w+/_-]+[=]{0,2}$/,a=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&e.test(t)?t:""}function s(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var n="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:g).apply(null,arguments)}function b(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now;function w(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function I(t,e,n){this.code=C+t,this.message=e||N[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new I(e.substring(C.length),t.message,t.serverResponse):null}w(I,Error),I.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},I.prototype.toJSON=function(){return this.w()};var S,C="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function k(t){for(var e in A)if(A[e].id===t)return t=A[e],{firebaseEndpoint:t.Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function O(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function R(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,R):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function P(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function D(t){throw new P("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function x(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=k("__EID__")?"__EID__":void 0,w(R,Error),R.prototype.name="CustomError",w(P,R),P.prototype.name="AssertionError",x.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var F=new x(function(){return new U},function(t){t.reset()});function U(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},U.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},U.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++){a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n))}return i},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},H=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=j(t,e)}function W(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function z(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function G(){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,$=/</g,Z=/>/g,tt=/"/g,et=/'/g,nt=/\x00/g,rt=/[\x00&<>"']/;function it(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:e<t?1:0}t:{var st=l.navigator;if(st){st=st.userAgent;if(st){Y=st;break t}}Y=""}function at(t){return it(Y,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function ht(t){var e,n={};for(e in t)n[e]=t[e];return n}var lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<lt.length;i++)e=lt[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function pt(t,e){t:{try{var n=t&&t.ownerDocument,n=n&&(n.defaultView||n.parentWindow);if((n=n||l).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(y(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function dt(t,e){this.a=t===mt&&e||"",this.b=gt}function vt(t){return t instanceof dt&&t.constructor===dt&&t.b===gt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}dt.prototype.sa=!0,dt.prototype.ra=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,gt={},mt={};function bt(){if(void 0===yt){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(t){l.console&&l.console.error(t.message)}yt=t}else yt=t}return yt}function _t(t,e){this.a=e===St?t:""}function wt(t){return t instanceof _t&&t.constructor===_t?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function Et(t,n){var e,r=vt(t);if(!Tt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(It,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof dt?vt(t):encodeURIComponent(String(t))}),e=t,t=bt(),new _t(e=t?t.createScriptURL(e):e,St)}_t.prototype.sa=!0,_t.prototype.ra=function(){return this.a.toString()},_t.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={};function Ct(t,e){this.a=e===Dt?t:""}function Nt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var At=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,kt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ot=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Rt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),t=Ot.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(kt))&&At.test(e[1])?new Ct(t,Dt):null);var e}function Pt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Ot.test(t)||(t="about:invalid#zClosurez"),new Ct(t,Dt))}var Dt={},xt=new Ct("about:invalid#zClosurez",Dt);function Lt(t,e,n){this.a=n===Mt?t:""}Lt.prototype.sa=!0,Lt.prototype.ra=function(){return this.a.toString()},Lt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Ft(t,e,n,r){return t=t instanceof Ct?t:Pt(t),e=e||l,n=n instanceof dt?vt(n):n||"",e.open(Nt(t),n,r,void 0)}function Ut(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function jt(t){return rt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace($,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Z,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(tt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(et,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(nt,"&#0;"))),t}function Vt(t){return Vt[" "](t),t}Vt[" "]=s;var qt,Bt=at("Opera"),Ht=at("Trident")||at("MSIE"),Kt=at("Edge"),Wt=Kt||Ht,zt=at("Gecko")&&!(it(Y.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),Gt=it(Y.toLowerCase(),"webkit")&&!at("Edge");function Qt(){var t=l.document;return t?t.documentMode:void 0}t:{var Yt="",Xt=(Xt=Y,zt?/rv:([^\);]+)(\)|;)/.exec(Xt):Kt?/Edge\/([\d\.]+)/.exec(Xt):Ht?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):Gt?/WebKit\/(\S+)/.exec(Xt):Bt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);if(Xt&&(Yt=Xt?Xt[1]:""),Ht){Xt=Qt();if(null!=Xt&&Xt>parseFloat(Yt)){qt=String(Xt);break t}}qt=Yt}var Jt={};function $t(a){return t=a,e=function(){for(var t=0,e=X(String(qt)).split("."),n=X(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ot(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ot(0==o[2].length,0==s[2].length)||ot(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Jt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Zt=l.document&&Ht?Qt()||(parseInt(qt,10)||void 0):void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Ht||9<=Number(Zt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){ut(t,function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!te&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',jt(i.name),'"'),i.type&&(r.push(' type="',jt(i.type),'"'),ft(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=ae(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ne(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];if(!d(o)||y(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(y(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){s="function"==typeof o.item;break t}}s=!1}V(s?Q(o):o,r)}}}(n,r,e),r}function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ue(t){l.setTimeout(function(){throw t},0)}function ce(t,e){ie||function(){{var t;ie=l.Promise&&l.Promise.resolve?(t=l.Promise.resolve(void 0),function(){t.then(fe)}):function(){var t=fe;!v(l.setImmediate)||l.Window&&l.Window.prototype&&!at("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||function(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!at("Presto")&&(t=function(){var t=ae(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0===t||at("Trident")||at("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Gb,n.Gb=null,t())},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}}}(),he||(ie(),he=!0),le.add(t,e)}var he=!1,le=new M;function fe(){for(var t,e,n;n=e=void 0,n=null,(e=le).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ue(t)}L(F,t)}he=!1}function pe(t,e){if(this.a=de,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Ce(n,ve,t)},function(t){if(!(t instanceof De))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ce(n,ye,t)})}catch(t){Ce(this,ye,t)}}var de=0,ve=2,ye=3;function ge(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ge.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var me=new x(function(){return new ge},function(t){t.reset()});function be(t,e,n){var r=me.get();return r.g=t,r.b=e,r.f=n,r}function _e(t){if(t instanceof pe)return t;var e=new pe(s);return Ce(e,ve,t),e}function we(n){return new pe(function(t,e){e(n)})}function Ee(t,e,n){Ne(t,e,n,null)||ce(b(e,t))}function Ie(n){return new pe(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Pb:!0,value:n}:{Pb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Ee(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Te(t,e){t.b||t.a!=ve&&t.a!=ye||Ae(t),t.f?t.f.next=e:t.b=e,t.f=e}function Se(t,i,o,s){var e=be(null,null,null);return e.a=new pe(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof De?r(t):n(e)}catch(t){r(t)}}:r}),Te(e.a.c=t,e),e.a}function Ce(t,e,n){var r,i;t.a==de&&(t===n&&(e=ye,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ne(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ae(t),e!=ye||n instanceof De||(i=n,(r=t).g=!0,ce(function(){r.g&&Pe.call(null,i)}))))}function Ne(t,e,n,r){if(t instanceof pe)return Te(t,be(e||s,n||null,r)),1;if(O(t))return t.then(e,n,r),1;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ae(t){t.h||(t.h=!0,ce(t.gc,t))}function ke(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Oe(t,e,n,r){if(n==ye&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Re(e,n,r);else try{e.c?e.g.call(e.f):Re(e,n,r)}catch(t){Pe.call(null,t)}L(me,e)}function Re(t,e,n){e==ve?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}pe.prototype.then=function(t,e,n){return Se(this,v(t)?t:null,v(e)?e:null,n)},pe.prototype.$goog_Thenable=!0,(t=pe.prototype).oa=function(t,e){return(t=be(t,t,e)).c=!0,Te(this,t),this},t.o=function(t,e){return Se(this,null,t,e)},t.cancel=function(t){var e;this.a==de&&(e=new De(t),ce(function(){!function t(e,n){if(e.a==de)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==de&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):ke(r),Oe(r,o,ye,n)))}e.c=null}else Ce(e,ye,n)}(this,e)},this))},t.$c=function(t){this.a=de,Ce(this,ve,t)},t.ad=function(t){this.a=de,Ce(this,ye,t)},t.gc=function(){for(var t;t=ke(this);)Oe(this,t,this.a,this.i);this.h=!1};var Pe=ue;function De(t){R.call(this,t)}function xe(){this.xa=this.xa,this.pa=this.pa}w(De,R);var Le=0;function Me(t){t.xa||(t.xa=!0,t.Da(),0==Le)||(t=t,Object.prototype.hasOwnProperty.call(t,n)&&t[n]||(t[n]=++r))}xe.prototype.xa=!(De.prototype.name="cancel"),xe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Fe=Object.freeze||function(t){return t},Ue=!Ht||9<=Number(Zt),je=Ht&&!$t("9"),Ve=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Be(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(zt){t:{try{Vt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:He[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}qe.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Be,qe);var He=Fe({2:"touch",3:"pen",4:"mouse"});Be.prototype.preventDefault=function(){Be.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,je)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Be.prototype.g=function(){return this.a};var Ke="closure_listenable_"+(1e6*Math.random()|0),We=0;function ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++We,this.va=this.Pa=!1}function Ge(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function Qe(t){this.src=t,this.a={},this.b=0}function Ye(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Ge(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Xe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}Qe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Xe(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new ze(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var Je="closure_lm_"+(1e6*Math.random()|0),$e={};function Ze(t,e,n,r,i){if(r&&r.once)en(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else n=ln(n),t&&t[Ke]?pn(t,e,n,y(r)?!!r.capture:!!r,i):tn(t,e,n,!1,r,i)}function tn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=y(i)?!!i.capture:!!i,c=cn(t);if(c||(t[Je]=c=new Qe(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=un,r=a=Ue?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Ve||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(on(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function en(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else n=ln(n),t&&t[Ke]?dn(t,e,n,y(r)?!!r.capture:!!r,i):tn(t,e,n,!0,r,i)}function nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=ln(n),t&&t[Ke]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=Xe(o=t.a[e],n,r,i))&&(Ge(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&cn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Xe(e,n,r,i)),(n=-1<t?e[t]:null)&&rn(n))}function rn(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[Ke]?Ye(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(on(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cn(e))?(Ye(n,t),0==n.b&&(n.src=null,e[Je]=null)):Ge(t)))}function on(t){return t in $e?$e[t]:$e[t]="on"+t}function sn(t,e,n,r){var i=!0;if((t=cn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=an(o,r),i=i&&!1!==o)}return i}function an(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&rn(t),n.call(r,e)}function un(t,e){if(t.va)return!0;if(Ue)return an(t,new Be(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Be(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=sn(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=sn(r[i],t,!1,e),n=n&&o}return n}function cn(t){return(t=t[Je])instanceof Qe?t:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ln(e){return v(e)?e:(e[hn]||(e[hn]=function(t){return e.handleEvent(t)}),e[hn])}function fn(){xe.call(this),this.v=new Qe(this),(this.ac=this).gb=null}function pn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function dn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function vn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.va&&u.capture==n&&(s=u.listener,a=u.Va||u.src,u.Pa&&Ye(t.v,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function yn(t,e,n){if(v(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function gn(n){var r=null;return new pe(function(t,e){-1==(r=yn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function mn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function bn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function _n(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _n)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function wn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];En(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)En(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function En(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(fn,xe),fn.prototype[Ke]=!0,fn.prototype.addEventListener=function(t,e,n,r){Ze(this,t,e,n,r)},fn.prototype.removeEventListener=function(t,e,n,r){nn(this,t,e,n,r)},fn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t?t=new qe(t,n):t instanceof qe?t.target=t.target||n:(s=t,ft(t=new qe(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=vn(o,r,!0,t)&&s;if(s=vn(o=t.b=n,r,!0,t)&&s,s=vn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=vn(o=t.b=e[i],r,!1,t)&&s;return s},fn.prototype.Da=function(){if(fn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ge(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=_n.prototype).W=function(){wn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return wn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return En(this.b,t)?this.b[t]:e},t.set=function(t,e){En(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var In=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Tn?(this.i=void 0!==e?e:t.i,Sn(this,t.c),this.l=t.l,this.a=t.a,Cn(this,t.g),this.f=t.f,Nn(this,zn(t.b)),this.h=t.h):t&&(n=String(t).match(In))?(this.i=!!e,Sn(this,n[1]||"",!0),this.l=Pn(n[2]||""),this.a=Pn(n[3]||"",!0),Cn(this,n[4]),this.f=Pn(n[5]||"",!0),Nn(this,n[6]||"",!0),this.h=Pn(n[7]||"")):(this.i=!!e,this.b=new Vn(null,this.i))}function Sn(t,e,n){t.c=n?Pn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Cn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Nn(t,e,n){var r,i;e instanceof Vn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(qn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Hn(this,e),Wn(this,n,t))},r)),r.f=i):(n||(e=Dn(e,Un)),t.b=new Vn(e,t.i))}function An(t,e,n){t.b.set(e,n)}function kn(t,e){return t.b.get(e)}function On(t){return t instanceof Tn?new Tn(t):new Tn(t,void 0)}function Rn(t,e,n,r){var i=new Tn(null,void 0);return t&&Sn(i,t),e&&(i.a=e),n&&Cn(i,n),r&&(i.f=r),i}function Pn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Dn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Tn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Dn(e,Ln,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(Dn(e,Ln,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Dn(n,"/"==n.charAt(0)?Fn:Mn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Dn(n,jn)),t.join("")},Tn.prototype.resolve=function(t){var e=new Tn(this),n=!!t.c;n?Sn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r,i=t.f;if(n)Cn(e,t.g);else if(n=!!t.f){if("/"!=i.charAt(0)&&(this.a&&!this.f?i="/"+i:-1!=(r=e.f.lastIndexOf("/"))&&(i=e.f.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(it(r,"./")||it(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r}return n?e.f=i:n=""!==t.b.toString(),n?Nn(e,zn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Ln=/[#\/\?@]/g,Mn=/[#\?:]/g,Fn=/[#\?]/g,Un=/[#\?@]/g,jn=/#/g;function Vn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qn(n){n.a||(n.a=new _n,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Bn(t){var e=bn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Vn(null,void 0);t=mn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Wn(n,i,o):n.add(i,o)}return n}function Hn(t,e){qn(t),e=Gn(t,e),En(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,En((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&wn(t)))}function Kn(t,e){return qn(t),e=Gn(t,e),En(t.a.b,e)}function Wn(t,e,n){Hn(t,e),0<n.length&&(t.c=null,t.a.set(Gn(t,e),Q(n)),t.b+=n.length)}function zn(t){var e=new Vn;return e.c=t.c,t.a&&(e.a=new _n(t.a),e.b=t.b),e}function Gn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Qn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(s=n[i],"function"!=typeof s&&(r.push(o),$n(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":$n(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Yn,t,e),e.join("")}function Yn(){}(t=Vn.prototype).add=function(t,e){qn(this),this.c=null,t=Gn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){qn(this),this.a.forEach(function(t,e){V(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){qn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){qn(this);var e=[];if("string"==typeof t)Kn(this,t)&&(e=G(e,this.a.get(Gn(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return qn(this),this.c=null,Kn(this,t=Gn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.W(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Xn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function $n(t,e){e.push('"',t.replace(Jn,function(t){var e=Xn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Xn[t]=e),e}),'"')}function Zn(){var t=mr();return Ht&&Zt&&11==Zt||/Edge\/\d+/.test(t)}function tr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function er(t,e){e=e||l.window;var n="about:blank";t&&(n=Nt(Rt(t)||xt)),e.location.href=n}function nr(t){return!!((t=(t||mr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function rr(t){t=t||l.window;try{t.close()}catch(t){}}function ir(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=mr().toLowerCase(),r&&(e.target=r,it(n,"crios/")&&(e.target="_blank")),vr(mr())==pr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:Rt(void 0!==n.href?n.href:String(n))||xt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(pt(s=ae(document,"A"),"HTMLAnchorElement"),e=e instanceof Ct?e:Pt(e),s.href=Nt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Ft("",r,n,s),t=Nt(e),s&&(Wt&&it(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+jt(t)+'">',t=new Lt(t=(r=bt())?r.createHTML(t):t,0,Mt),r=s.document)&&(r.write((o=t)instanceof Lt&&o.constructor===Lt?o.a:(D("expected object of type SafeHtml, got '"+o+"' of type "+p(o)),"type_error:SafeHtml")),r.close())):(s=Ft(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ar(){var e=null;return new pe(function(t){"complete"==l.document.readyState?t():(e=function(){t()},en(window,"load",e))}).o(function(t){throw nn(window,"load",e),t})}function ur(t){return t=t||mr(),!("file:"!==Ir()&&"ionic:"!==Ir()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function cr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function hr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function lr(){return Xl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Xl.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function fr(){var t=lr();return"ReactNative"===t||"Node"===t}var pr="Firefox",dr="Chrome";function vr(t){var e=t.toLowerCase();return it(e,"opera/")||it(e,"opr/")||it(e,"opios/")?"Opera":it(e,"iemobile")?"IEMobile":it(e,"msie")||it(e,"trident/")?"IE":it(e,"edge/")?"Edge":it(e,"firefox/")?pr:it(e,"silk/")?"Silk":it(e,"blackberry")?"Blackberry":it(e,"webos")?"Webos":!it(e,"safari/")||it(e,"chrome/")||it(e,"crios/")||it(e,"android")?!it(e,"chrome/")&&!it(e,"crios/")||it(e,"edge/")?it(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":dr:"Safari"}var yr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function gr(t,e){e=e||[];var n,r=[],i={};for(n in yr)i[yr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=lr())?r=vr(i=mr()):"Worker"===r&&(r=vr(i=mr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function mr(){return l.navigator&&l.navigator.userAgent||""}function br(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function _r(){try{var t=l.localStorage,e=Ar();if(t)return t.setItem(e,"1"),t.removeItem(e),!Zn()||!!l.indexedDB}catch(t){return hr()&&!!l.indexedDB}return!1}function wr(){return(Er()||"chrome-extension:"===Ir()||ur())&&!fr()&&_r()&&!hr()}function Er(){return"http:"===Ir()||"https:"===Ir()}function Ir(){return l.location&&l.location.protocol||null}function Tr(t){return!nr(t=t||mr())&&vr(t)!=pr}function Sr(t){return void 0===t?null:Qn(t)}function Cr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Nr(t){if(null!==t)return JSON.parse(t)}function Ar(t){return t||Math.floor(1e9*Math.random()).toString()}function kr(t){return"Safari"!=vr(t=t||mr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Or(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Rr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=mr(),e=lr(),this.b=nr(t)||"ReactNative"===e}function Pr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Dr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function xr(){return br("fireauth.oauthhelper",l)||br("fireauth.iframe",l)}Rr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Er()&&"chrome-extension:"!==Ir()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Lr,Mr={};function Fr(t){Mr[t]||(Mr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Ur={};Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:2}),Lr=2==Ur.abcd}catch(t){Lr=!1}function jr(t,e,n){Lr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Vr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&jr(t,n,e[n])}function qr(t){var e={};return Vr(e,t),e}function Br(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)jr(e,n,Br(t[n]));return e}function Hr(t){var e=t&&(t[Qr]?"phone":null);if(!(e&&t&&t[Gr]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");jr(this,"uid",t[Gr]),jr(this,"displayName",t[Wr]||null);var n=null;t[zr]&&(n=new Date(t[zr]).toUTCString()),jr(this,"enrollmentTime",n),jr(this,"factorId",e)}function Kr(t){try{var e=new Yr(t)}catch(t){e=null}return e}Hr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Wr="displayName",zr="enrolledAt",Gr="mfaEnrollmentId",Qr="phoneInfo";function Yr(t){Hr.call(this,t),jr(this,"phoneNumber",t[Qr])}function Xr(t){var e={},n=t[ti],r=t[ni],i=t[ri];if(t=Kr(t[ei]),!i||i!=$r&&i!=Zr&&!n||i==Zr&&!r||i==Jr&&!t)throw Error("Invalid checkActionCode response!");i==Zr?(e[oi]=n||null,e[ai]=n||null,e[ii]=r):(e[oi]=r||null,e[ai]=r||null,e[ii]=n||null),e[si]=t||null,jr(this,ci,i),jr(this,ui,Br(e))}w(Yr,Hr),Yr.prototype.w=function(){var t=Yr.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Jr="REVERT_SECOND_FACTOR_ADDITION",$r="EMAIL_SIGNIN",Zr="VERIFY_AND_CHANGE_EMAIL",ti="email",ei="mfaInfo",ni="newEmail",ri="requestType",ii="email",oi="fromEmail",si="multiFactorInfo",ai="previousEmail",ui="data",ci="operation";function hi(t){var e=kn(t=On(t),li)||null,n=kn(t,fi)||null,r=(r=kn(t,vi)||null)&&gi[r]||null;if(!e||!n||!r)throw new I("argument-error",li+", "+fi+"and "+vi+" are required in a valid action code URL.");Vr(this,{apiKey:e,operation:r,code:n,continueUrl:kn(t,pi)||null,languageCode:kn(t,di)||null,tenantId:kn(t,yi)||null})}var li="apiKey",fi="oobCode",pi="continueUrl",di="languageCode",vi="mode",yi="tenantId",gi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Jr,signIn:$r,verifyAndChangeEmail:Zr,verifyEmail:"VERIFY_EMAIL"};function mi(t){try{return new hi(t)}catch(t){return null}}function bi(t){var e=t[Ti];if(void 0===e)throw new I("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new I("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[_i])&&"object"==typeof r){e=r[Ni];var n=r[Si],r=r[Ci];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new I("argument-error",Si+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new I("argument-error",Ci+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new I("argument-error",Ni+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new I("missing-android-pkg-name")}}else if(void 0!==r)throw new I("argument-error",_i+" property must be a non null object when specified.");if(this.f=null,(e=t[Ii])&&"object"==typeof e){if("string"==typeof(e=e[Ai])&&e.length)this.f=e;else if(void 0!==e)throw new I("argument-error",Ai+" property must be a non empty string when specified.")}else if(void 0!==e)throw new I("argument-error",Ii+" property must be a non null object when specified.");if(void 0!==(e=t[Ei])&&"boolean"!=typeof e)throw new I("argument-error",Ei+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[wi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new I("argument-error",wi+" property must be a non empty string when specified.");this.i=t||null}var _i="android",wi="dynamicLinkDomain",Ei="handleCodeInApp",Ii="iOS",Ti="url",Si="installApp",Ci="minimumVersion",Ni="packageName",Ai="bundleId";function ki(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Oi=null;function Ri(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Oi[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Oi){Oi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Oi[o]&&(Oi[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}function Pi(t){var e=xi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Di(t){try{return new Pi(t)}catch(t){return null}}function xi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Ri(t))}catch(t){}return null}Pi.prototype.T=function(){return this.f},Pi.prototype.l=function(){return this.c},Pi.prototype.toString=function(){return this.h};var Li="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Mi=["client_id","response_type","scope","redirect_uri","state"],Fi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Mi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Mi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Mi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Li},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Ui(t){for(var e in Fi)if(Fi[e].fa==t)return Fi[e];return null}function ji(t){var e={};e["facebook.com"]=Ki,e["google.com"]=zi,e["github.com"]=Wi,e["twitter.com"]=Gi;var n=t&&t[qi];try{if(n)return new(e[n]?e[n]:Hi)(t);if(void 0!==t[Vi])return new Bi(t)}catch(t){}return null}var Vi="idToken",qi="providerId";function Bi(t){var e,n=t[qi];if(n||!t[Vi]||(e=Di(t[Vi]))&&e.b&&(n=e.b),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),jr(this,"providerId",n),jr(this,"isNewUser",e)}function Hi(t){Bi.call(this,t),jr(this,"profile",Br((t=Nr(t.rawUserInfo||"{}"))||{}))}function Ki(t){if(Hi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Wi(t){if(Hi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",this.profile&&this.profile.login||null)}function zi(t){if(Hi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Gi(t){if(Hi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",t.screenName||null)}function Qi(t){var e=kn(r=On(t),"link"),n=kn(On(e),"link"),r=kn(r,"deep_link_id");return kn(On(r),"link")||r||n||e||t}function Yi(t,e){if(!t&&!e)throw new I("internal-error","Internal assert: no raw session string available");if(t&&e)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Xi:Ji}w(Hi,Bi),w(Ki,Hi),w(Wi,Hi),w(zi,Hi),w(Gi,Hi);var Xi="enroll",Ji="signin";function $i(){}function Zi(t,n){return t.then(function(t){if(t[Bs]){var e=Di(t[Bs]);if(!e||n!=e.i)throw new I("user-mismatch");return t}throw new I("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==C+"user-not-found"?new I("user-mismatch"):t})}function to(t,e){if(!e)throw new I("internal-error","failed to construct a credential");this.a=e,jr(this,"providerId",t),jr(this,"signInMethod",t)}function eo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function no(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new to(t.providerId,t.pendingToken)}catch(t){}return null}function ro(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&jr(this,"idToken",e.idToken),e.accessToken&&jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");jr(this,"accessToken",e.oauthToken),jr(this,"secret",e.oauthTokenSecret)}jr(this,"providerId",t),jr(this,"signInMethod",n)}function io(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Bn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function oo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new ro(t.providerId,e,t.signInMethod)}catch(t){}}return null}function so(t,e){this.Qc=e||[],Vr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Ui(t)||{}).Ja||null,this.ob=null}function ao(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');so.call(this,t,[])}function uo(t){so.call(this,t,Mi),this.a=[]}function co(){uo.call(this,"facebook.com")}function ho(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new co).credential({accessToken:e})}function lo(){uo.call(this,"github.com")}function fo(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new lo).credential({accessToken:e})}function po(){uo.call(this,"google.com"),this.Ca("profile")}function vo(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new po).credential({idToken:n,accessToken:e})}function yo(){so.call(this,"twitter.com",Li)}function go(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ro("twitter.com",n,"twitter.com")}function mo(t,e,n){this.a=t,this.f=e,jr(this,"providerId","password"),jr(this,"signInMethod",n===_o.EMAIL_LINK_SIGN_IN_METHOD?_o.EMAIL_LINK_SIGN_IN_METHOD:_o.EMAIL_PASSWORD_SIGN_IN_METHOD)}function bo(t){return t&&t.email&&t.password?new mo(t.email,t.password,t.signInMethod):null}function _o(){Vr(this,{providerId:"password",isOAuthProvider:!1})}function wo(t,e){if(!(e=Eo(e)))throw new I("argument-error","Invalid email link!");return new mo(t,e.code,_o.EMAIL_LINK_SIGN_IN_METHOD)}function Eo(t){return(t=mi(t=Qi(t)))&&t.operation===$r?t:null}function Io(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new I("internal-error");this.a=t,jr(this,"providerId","phone"),this.fa="phone",jr(this,"signInMethod","phone")}function To(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new Io(n)}return null}function So(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Co(t){try{this.a=t||Xl.auth()}catch(t){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Vr(this,{providerId:"phone",isOAuthProvider:!1})}function No(t,e){if(!t)throw new I("missing-verification-id");if(!e)throw new I("missing-verification-code");return new Io({eb:t,cb:e})}function Ao(t){if(t.temporaryProof&&t.phoneNumber)return new Io({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return vo(o,n);case"facebook.com":return ho(n);case"github.com":return fo(n);case"twitter.com":return go(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new to(e,s):new ro(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new uo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function ko(t){if(!t.isOAuthProvider)throw new I("invalid-oauth-provider")}function Oo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function Ro(t){return(t=t||{}).type?new Oo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function Po(){this.b=null,this.a=[]}Yi.prototype.Ha=function(){return this.a?_e(this.a):_e(this.b)},Yi.prototype.w=function(){return this.type==Xi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},$i.prototype.ka=function(){},$i.prototype.b=function(){},$i.prototype.c=function(){},$i.prototype.w=function(){},to.prototype.ka=function(t){return ha(t,eo(this))},to.prototype.b=function(t,e){var n=eo(this);return n.idToken=e,la(t,n)},to.prototype.c=function(t,e){return Zi(fa(t,eo(this)),e)},to.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ro.prototype.ka=function(t){return ha(t,io(this))},ro.prototype.b=function(t,e){var n=io(this);return n.idToken=e,la(t,n)},ro.prototype.c=function(t,e){return Zi(fa(t,io(this)),e)},ro.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},so.prototype.Ka=function(t){return this.Ib=ht(t),this},w(ao,so),w(uo,so),uo.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},uo.prototype.Qb=function(){return Q(this.a)},uo.prototype.credential=function(t,e){e=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!e.idToken&&!e.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new ro(this.providerId,e,this.providerId)},w(co,uo),jr(co,"PROVIDER_ID","facebook.com"),jr(co,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(lo,uo),jr(lo,"PROVIDER_ID","github.com"),jr(lo,"GITHUB_SIGN_IN_METHOD","github.com"),w(po,uo),jr(po,"PROVIDER_ID","google.com"),jr(po,"GOOGLE_SIGN_IN_METHOD","google.com"),w(yo,so),jr(yo,"PROVIDER_ID","twitter.com"),jr(yo,"TWITTER_SIGN_IN_METHOD","twitter.com"),mo.prototype.ka=function(t){return this.signInMethod==_o.EMAIL_LINK_SIGN_IN_METHOD?Ga(t,_a,{email:this.a,oobCode:this.f}):Ga(t,Ba,{email:this.a,password:this.f})},mo.prototype.b=function(t,e){return this.signInMethod==_o.EMAIL_LINK_SIGN_IN_METHOD?Ga(t,wa,{idToken:e,email:this.a,oobCode:this.f}):Ga(t,xa,{idToken:e,email:this.a,password:this.f})},mo.prototype.c=function(t,e){return Zi(this.ka(t),e)},mo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Vr(_o,{PROVIDER_ID:"password"}),Vr(_o,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Vr(_o,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Io.prototype.ka=function(t){return t.fb(So(this))},Io.prototype.b=function(t,e){var n=So(this);return n.idToken=e,Ga(t,Ka,n)},Io.prototype.c=function(t,e){var n=So(this);return n.operation="REAUTH",Zi(t=Ga(t,Wa,n),e)},Io.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Co.prototype.fb=function(r,i){var o=this.a.a;return _e(i.verify()).then(function(n){if("string"!=typeof n)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=y(r)?r.session:null,e=y(r)?r.phoneNumber:r,t=t&&t.type==Xi?t.Ha().then(function(t){return Ga(o,Ma,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Ji?t.Ha().then(function(t){return e=o,t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:n}},Ga(e,Fa,t).then(function(t){return t.phoneResponseInfo.sessionInfo});var e}):Ga(o,Pa,{phoneNumber:e,recaptchaToken:n});return t.then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},Vr(Co,{PROVIDER_ID:"phone"}),Vr(Co,{PHONE_SIGN_IN_METHOD:"phone"}),Oo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Oo.prototype.T=function(){return this.h},Oo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Do,xo=null;function Lo(t){var e="unauthorized-domain",n=void 0,r=On(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ut("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ut("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",I.call(this,e,n)}function Mo(t,e,n){I.call(this,t,n),(t=e||{}).Jb&&jr(this,"email",t.Jb),t.ea&&jr(this,"phoneNumber",t.ea),t.credential&&jr(this,"credential",t.credential),t.Zb&&jr(this,"tenantId",t.Zb)}function Fo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:Ao(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new I(e,t.message||void 0);return new Mo(e,n,t.message)}return null}function Uo(){}function jo(t){return t.c||(t.c=t.b())}function Vo(){}function qo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Bo(){}function Ho(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.qc,this),this.a.onerror=m(this.Sb,this),this.a.onprogress=m(this.rc,this),this.a.ontimeout=m(this.vc,this)}function Ko(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Wo(t,e,n){this.reset(t,e,n,void 0,void 0)}function zo(t){this.f=t,this.b=this.c=this.a=null}function Go(t,e){this.name=t,this.value=e}w(Lo,I),w(Mo,I),Mo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&ft(t,e),t},Mo.prototype.toJSON=function(){return this.w()},Uo.prototype.c=null,w(Vo,Uo),Vo.prototype.a=function(){var t=qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Vo.prototype.b=function(){var t={};return qo(this)&&(t[0]=!0,t[1]=!0),t},Do=new Vo,w(Bo,Uo),Bo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ho;throw Error("Unsupported browser")},Bo.prototype.b=function(){return{}},(t=Ho.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ko(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Ko(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Ko(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Wo.prototype.a=null,Wo.prototype.reset=function(t,e,n,r,i){delete this.a},Go.prototype.toString=function(){return this.name};var Qo=new Go("SEVERE",1e3),Yo=new Go("WARNING",900),Xo=new Go("CONFIG",700),Jo=new Go("FINE",500);zo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(D("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new Wo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var $o,Zo={},ts=null;function es(t){var e,n,r;return ts||(ts=new zo(""),(Zo[""]=ts).c=Xo),(e=Zo[t])||(e=new zo(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=es(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,Zo[t]=e),e}function ns(t,e){t&&t.log(Jo,e,void 0)}function rs(t){this.f=t}function is(t){fn.call(this),this.u=t,this.h=void 0,this.readyState=os,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=es("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(rs,Uo),rs.prototype.a=function(){return new is(this.f)},rs.prototype.b=($o={},function(){return $o}),w(is,fn);var os=0;function ss(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function as(t){t.readyState=4,t.g=null,t.c=null,t.m=null,us(t)}function us(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function cs(t){fn.call(this),this.headers=new _n,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=hs,this.u=this.S=!1}(t=is.prototype).open=function(t,e){if(this.readyState!=os)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,us(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,as(this)),this.readyState=os},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,us(this)),this.a&&(this.readyState=3,us(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ss(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){var e;this.a&&((e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?as:us)(this),3==this.readyState&&ss(this))},t.tc=function(t){this.a&&(this.response=this.responseText=t,as(this))},t.sc=function(t){this.a&&(this.response=t,as(this))},t.Ua=function(t){var e=this.i;e&&e.log(Yo,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&as(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Yo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Yo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(is.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(cs,fn);var hs="";cs.prototype.b=es("goog.net.XhrIo");var ls=/^https?$/i,fs=["POST","PUT"];function ps(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=(e.D?e.D:Do).a(),e.C=e.D?jo(e.D):jo(Do),e.a.onreadystatechange=m(e.Vb,e);try{ns(e.b,Es(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return ns(e.b,Es(e,"Error opening Xhr: "+t.message)),void vs(e,t)}t=r||"";var o,s=new _n(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)V(t,e,void 0);else for(var n=bn(t),r=mn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=ds,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=l.FormData&&t instanceof l.FormData,!K(fs,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{bs(e),0<e.g&&(e.u=(o=e.a,Ht&&$t(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),ns(e.b,Es(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ma,e)):e.s=yn(e.Ma,e.g,e)),ns(e.b,Es(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){ns(e.b,Es(e,"Send error: "+t.message)),vs(e,t)}}function ds(t){return"content-type"==t.toLowerCase()}function vs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ys(t),ms(t)}function ys(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function gs(e){if(e.c&&void 0!==h)if(e.C[1]&&4==_s(e)&&2==ws(e))ns(e.b,Es(e,"Local request error detected and ignored"));else if(e.i&&4==_s(e))yn(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==_s(e)){ns(e.b,Es(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=ws(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((t=s)||((n=0===o)&&(!(i=String(e.l).match(In)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!ls.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<_s(e)?e.a.statusText:""}catch(t){ns(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+ws(e)+"]",ys(e)}}finally{ms(e)}}}function ms(e,t){if(e.a){bs(e);var n=e.a,r=e.C[0]?s:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Qo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function bs(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function _s(t){return t.a?t.a.readyState:0}function ws(t){try{return 2<_s(t)?t.a.status:-1}catch(t){return-1}}function Es(t,e){return e+" ["+t.R+" "+t.l+" "+ws(t)+"]"}function Is(t){var e=xs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ts(t,e,n){t.a=!0,t.c=n,t.f=!e,As(t)}function Ss(t){if(t.a){if(!t.v)throw new ks;t.v=!1}}function Cs(t,e,n,r){t.g.push([e,n,r]),t.a&&As(t)}function Ns(t){return H(t.g,function(t){return v(t[1])})}function As(e){var n,r;e.h&&e.a&&Ns(e)&&(n=e.h,(r=Ps[n])&&(l.clearTimeout(r.a),delete Ps[n]),e.h=0),e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var a=i.call(s||e.s,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(O(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,Ns(e)||(r=!0)}}e.c=n,t&&(a=m(e.m,e,!0),t=m(e.m,e,!1),n instanceof Is?(Cs(n,a,t),n.C=!0):n.then(a,t)),r&&(n=new Rs(n),Ps[n.a]=n,e.h=n.a)}function ks(){R.call(this)}function Os(){R.call(this)}function Rs(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=cs.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ns(this.b,Es(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ns(this.b,Es(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ms(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ms(this,!0)),cs.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?gs(this):this.Jc())},t.Jc=function(){gs(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case hs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Qo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ns(this.b,"Can not get response: "+t.message),null}},Is.prototype.cancel=function(t){var e;this.a?this.c instanceof Is&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Os,Ss(this),Ts(this,!1,t)))},Is.prototype.m=function(t,e){this.i=!1,Ts(this,t,e)},Is.prototype.then=function(t,e,n){var r,i,o=new pe(function(t,e){r=t,i=e});return Cs(this,r,function(t){t instanceof Os?o.cancel():i(t)}),o.then(t,e,n)},Is.prototype.$goog_Thenable=!0,w(ks,R),ks.prototype.message="Deferred has already fired",ks.prototype.name="AlreadyCalledError",w(Os,R),Os.prototype.message="Deferred was canceled",Os.prototype.name="CanceledError",Rs.prototype.c=function(){throw delete Ps[this.a],this.b};var Ps={};function Ds(t){var e=document,n=wt(t).toString(),r=ae(document,"SCRIPT"),i={Wb:r,Ma:void 0},o=new Is(i),s=window.setTimeout(function(){Ls(r,!0);var t=new Us(Fs,"Timeout reached for loading script "+n);Ss(o),Ts(o,!1,t)},5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Ls(r,!1,s),Ss(o),Ts(o,!0,null))},r.onerror=function(){Ls(r,!0,s);var t=new Us(Ms,"Error while loading script "+n);Ss(o),Ts(o,!1,t)},ft(i={},{type:"text/javascript",charset:"UTF-8"}),ne(r,i),i=t,pt(t=r,"HTMLScriptElement"),t.src=wt(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=l?f(i.document):(null===a&&(a=f(l.document)),a))&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function xs(){var t;this&&this.Wb&&((t=this.Wb)&&"SCRIPT"==t.tagName&&Ls(t,!0,this.Ma))}function Ls(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ms=0,Fs=1;function Us(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function js(t){this.f=t}function Vs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Hs,this.g=ht(t.secureTokenHeaders||Ks),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Ws,this.a=ht(t.firebaseHeaders||zs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==lr(),!(n=l.XMLHttpRequest||n&&Xl.INTERNAL.node&&Xl.INTERNAL.node.XMLHttpRequest)&&!hr())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new rs(self):fr()?this.f=new js(n):this.f=new Bo,this.b=null}w(Us,R),w(js,Uo),js.prototype.a=function(){return new this.f},js.prototype.b=function(){return{}};var qs,Bs="idToken",Hs=new Rr(3e4,6e4),Ks={"Content-Type":"application/x-www-form-urlencoded"},Ws=new Rr(3e4,6e4),zs={"Content-Type":"application/json"};function Gs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Qs(t,e){e&&(t.l=Ys("https://securetoken.googleapis.com/v1/token",e),t.h=Ys("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Ys("https://identitytoolkit.googleapis.com/v2/",e))}function Ys(t,e){return t=On(t),e=On(e.url),t.f=t.a+t.f,Sn(t,e.c),t.a=e.a,Cn(t,e.g),t.toString()}function Xs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Js(t,e,n,r,i,o,s){var a;(t=((a=vr(a=mr())==dr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Ht&&Zt&&!(9<Zt))&&!hr()?(qs=qs||new pe(function(t,e){!function(t,e){{((window.gapi||{}).client||{}).request?t():(l[Zs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Cs(t,null,e,void 0)}(Ds(Et($s,{onload:Zs})),function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}),m(t.s,t)):m(t.u,t))(e,n,r,i,o,s)}Vs.prototype.T=function(){return this.b},Vs.prototype.u=function(t,n,e,r,i,o){if(hr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new cs(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),pn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ns(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),dn(a,"ready",function(){s&&clearTimeout(s),Me(this)}),dn(a,"timeout",function(){s&&clearTimeout(s),Me(this),n&&n(null)}),ps(a,t,e,r,i)};var $s=new dt(mt,"https://apis.google.com/js/client.js?onload=%{onload}"),Zs="__fcb"+Math.floor(1e6*Math.random()).toString();function ta(t,e,n,r,i,o,s){var a=On(e+n);An(a,"key",t.c),s&&An(a,"cb",_().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&An(a,c,i[c]);return new pe(function(e,n){Js(t,a.toString(),function(t){t?t.error?n(Ya(t,o||{})):e(t):n(new I("network-request-failed"))},r,u?void 0:Qn(Cr(i)),t.a,t.v.get())})}function ea(t){if("string"!=typeof(t=t.email)||!sr.test(t))throw new I("invalid-email")}function na(t){"email"in t&&ea(t)}function ra(t){if(!t[Bs]){if(t.mfaPendingCredential)throw new I("multi-factor-auth-required",null,ht(t));throw new I("internal-error")}}function ia(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new I("internal-error")}else{if(!t.sessionInfo)throw new I("missing-verification-id");if(!t.code)throw new I("missing-verification-code")}}Vs.prototype.s=function(t,n,r,i,o){var s=this;qs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Vs.prototype.zb=function(){return Ga(this,La,{})},Vs.prototype.Bb=function(t,e){return Ga(this,Da,{idToken:t,email:e})},Vs.prototype.Cb=function(t,e){return Ga(this,xa,{idToken:t,password:e})};var oa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function sa(t){if(!t.phoneVerificationInfo)throw new I("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new I("missing-verification-code")}function aa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new I("internal-error")}function ua(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Kn(t=new Vn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ca(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Fo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Fo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Fo(t)):t.errorMessage&&(e=Qa(t.errorMessage)),e)throw e;ra(t)}function ha(t,e){return e.returnIdpCredential=!0,Ga(t,Ua,e)}function la(t,e){return e.returnIdpCredential=!0,Ga(t,Va,e)}function fa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ga(t,ja,e)}function pa(t){if(!t.oobCode)throw new I("invalid-action-code")}(t=Vs.prototype).Db=function(t,r){var i={idToken:t},o=[];return ut(oa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Ga(this,Da,i)},t.vb=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),Ga(this,Aa,t)},t.wb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),Ga(this,Sa,t)},t.ub=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ga(this,Ca,t)},t.Eb=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ga(this,Na,t)},t.fb=function(t){return Ga(this,Ha,t)},t.nb=function(t,e){return Ga(this,Ra,{oobCode:t,newPassword:e})},t.Ra=function(t){return Ga(this,va,{oobCode:t})},t.jb=function(t){return Ga(this,da,{oobCode:t})};var da={endpoint:"setAccountInfo",A:pa,Z:"email",B:!0},va={endpoint:"resetPassword",A:pa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new I("internal-error")},B:!0},ya={endpoint:"signupNewUser",A:function(t){if(ea(t),!t.password)throw new I("weak-password")},G:ra,V:!0,B:!0},ga={endpoint:"createAuthUri",B:!0},ma={endpoint:"deleteAccount",N:["idToken"]},ba={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new I("internal-error")}},_a={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ea,G:ra,V:!0,B:!0},wa={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ea,G:ra,V:!0},Ea={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:sa,G:ra,B:!0,Na:!0},Ia={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:sa,G:ra,B:!0,Na:!0},Ta={endpoint:"getAccountInfo"},Sa={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new I("internal-error");ea(t)},Z:"email",B:!0},Ca={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",B:!0},Na={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",B:!0},Aa={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new I("internal-error");ea(t)},Z:"email",B:!0},ka={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Oa={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new I("internal-error")}},Ra={endpoint:"resetPassword",A:pa,Z:"email",B:!0},Pa={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Da={endpoint:"setAccountInfo",N:["idToken"],A:na,V:!0},xa={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(na(t),!t.password)throw new I("weak-password")},G:ra,V:!0},La={endpoint:"signupNewUser",G:ra,V:!0,B:!0},Ma={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new I("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Fa={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Ua={endpoint:"verifyAssertion",A:aa,Ya:ua,G:ca,V:!0,B:!0},ja={endpoint:"verifyAssertion",A:aa,Ya:ua,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new I("user-not-found");if(t.errorMessage)throw Qa(t.errorMessage);ra(t)},V:!0,B:!0},Va={endpoint:"verifyAssertion",A:function(t){if(aa(t),!t.idToken)throw new I("internal-error")},Ya:ua,G:ca,V:!0},qa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new I("invalid-custom-token")},G:ra,V:!0,B:!0},Ba={endpoint:"verifyPassword",A:function(t){if(ea(t),!t.password)throw new I("wrong-password")},G:ra,V:!0,B:!0},Ha={endpoint:"verifyPhoneNumber",A:ia,G:ra,B:!0},Ka={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new I("internal-error");ia(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Fo(t);ra(t)}},Wa={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ia,G:ra,B:!0},za={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Bs]^!!t.refreshToken)throw new I("internal-error")},B:!0,Na:!0};function Ga(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.N))return we(new I("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return _e(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ta(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new I("internal-error");return r[e.Z]})}function Qa(t){return Ya({error:{errors:[{message:t}],code:400,message:t}})}function Ya(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new I(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",ft(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new I(i[n],e);return!e&&t&&(e=Sr(t)),new I("internal-error",e)}function Xa(t){var o;this.b=t,this.a=null,this.rb=(o=this,(tu||(tu=new pe(function(t,e){function n(){Or(),br("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Or(),e(Error("Network Error"))},timeout:$a.get()})}var r;br("gapi.iframes.Iframe")?t():br("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){br("gapi.load")?n():e(Error("Network Error"))},_e(Ds(r=Et(Ja,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw tu=null,t}))).then(function(){return new pe(function(r,i){br("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Za.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Ja=new dt(mt,"https://apis.google.com/js/api.js?onload=%{onload}"),$a=new Rr(3e4,6e4),Za=new Rr(5e3,15e3),tu=null;function eu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Rn((t=On(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Rn("https",this.l,null,"/__/auth/iframe"),this.a=t,An(this.a,"apiKey",this.h),An(this.a,"appName",this.i),this.b=null,this.c=[]}function nu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function ru(t){try{return Xl.app(t).auth().Ga()}catch(t){return[]}}function iu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function ou(t){var a=tr();return Ga(t,ka,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=On(a)).c,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?On(i).a==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(or.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Lo(tr())})}function su(i){return i.m||(i.m=ar().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=ru(i.b),(r=new eu(i.s,i.g,i.b,i.f)).f=t,r.b=e,r.c=Q(n||[]),i.u=r.toString()),i.v=new Xa(i.u),function(r){if(!r.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.v,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Ro(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",_e(e)}return e.status="ERROR",_e(e)})}(i)})),i.m}function au(t){return t.l||(t.C=t.c?gr(t.c,ru(t.b)):null,t.l=new Vs(t.g,k(t.i),t.C),t.f&&Qs(t.l,t.f)),t.l}function uu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new nu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ht(u||null),t.f=c,t.yb(h).toString()}function cu(t){if(this.a=t||Xl.INTERNAL.reactNative&&Xl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function hu(t){this.b=t,this.a={},this.f=m(this.c,this)}eu.prototype.toString=function(){return this.f?An(this.a,"v",this.f):Hn(this.a.b,"v"),this.b?An(this.a,"eid",this.b):Hn(this.a.b,"eid"),this.c.length?An(this.a,"fw",this.c.join(",")):Hn(this.a.b,"fw"),this.a.toString()},nu.prototype.yb=function(t){return this.h=t,this},nu.prototype.toString=function(){var t;if(An(t=this.v?Rn((t=On(this.v.url)).c,t.a,t.g,"/emulator/auth/handler"):Rn("https",this.u,null,"/__/auth/handler"),"apiKey",this.s),An(t,"appName",this.c),An(t,"authType",this.m),this.a.isOAuthProvider){var e,n=this.a;try{var r=Xl.app(this.c).auth().la()}catch(t){r=null}for(e in n.ob=r,An(t,"providerId",this.a.providerId),n=Cr((r=this.a).Ib))n[e]=n[e].toString();e=r.Qc,n=ht(n);for(var i=0;i<e.length;i++){var o=e[i];o in n&&delete n[o]}r.pb&&r.ob&&!n[r.pb]&&(n[r.pb]=r.ob),ct(n)||An(t,"customParameters",Sr(n))}if("function"==typeof this.a.Qb&&((r=this.a.Qb()).length&&An(t,"scopes",r.join(","))),this.l?An(t,"redirectUrl",this.l):Hn(t.b,"redirectUrl"),this.g?An(t,"eventId",this.g):Hn(t.b,"eventId"),this.i?An(t,"v",this.i):Hn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!kn(t,s)&&An(t,s,this.b[s]);return this.h?An(t,"tid",this.h):Hn(t.b,"tid"),this.f?An(t,"eid",this.f):Hn(t.b,"eid"),(s=ru(this.c)).length&&An(t,"fw",s.join(",")),t.toString()},(t=iu.prototype).Ob=function(e,n,t){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){var t,r;r={type:"webStorageSupport"},su(t=o).then(function(){return e=t.v,n=r,e.rb.then(function(){return new pe(function(t){e.a.send(n.type,n,t,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&rr(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new pe(function(e){return function t(){gn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return gn(t).then(function(){n(r)})})},t.Xb=function(){var t=mr();return!Tr(t)&&!kr(t)},t.Tb=function(){return!1},t.Mb=function(e,t,n,r,i,o,s,a){if(!e)return we(new I("popup-blocked"));if(s&&!Tr())return this.ma().o(function(t){rr(e),i(t)}),r(),_e();this.a||(this.a=ou(au(this)));var u=this;return this.a.then(function(){var t=u.ma().o(function(t){throw rr(e),i(t),t});return r(),t}).then(function(){ko(n),s||er(uu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,a,u.f),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=ou(au(this)));var i=this;return this.a.then(function(){ko(e),er(uu(i.s,i.g,i.b,t,e,tr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return su(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new I("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(e){z(this.h,function(t){return t==e})},(t=cu.prototype).get=function(t){return _e(this.a.getItem(t)).then(function(t){return t&&Nr(t)})},t.set=function(t,e){return _e(this.a.setItem(t,Sr(e)))},t.U=function(t){return _e(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var lu,fu=[];function pu(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function du(t){this.a=t}function vu(t){this.c=t,this.b=!1,this.a=[]}function yu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return we(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new pe(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return gu(r,c),t}).o(function(t){throw gu(r,c),t})}function gu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),z(t.a,function(t){return t==e}))}function mu(){if(!Eu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t,e,n,r=this;hr()&&self?(this.v=(n=hr()?self:null,V(fu,function(t){t.b==n&&(e=t)}),e||(e=new hu(n),fu.push(e)),e),pu(this.v,"keyChanged",function(t,n){return Nu(r).then(function(e){return 0<e.length&&V(r.a,function(t){t(e)}),{keyProcessed:K(e,n.key)}})}),pu(this.v,"ping",function(){return _e(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?_e().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):_e(null)).then(function(t){(r.h=t)&&(r.g=new vu(new du(t)),yu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&K(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function bu(i){return new pe(function(e,n){var t=i.m.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new pe(function(t,e){var n=r.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return bu(i)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}function _u(t){return t.i||(t.i=bu(t)),t.i}function wu(i,t){var o=0;return new pe(function e(n,r){_u(i).then(t).then(n).o(function(t){return 3<++o?void r(t):_u(i).then(function(t){return t.close(),i.i=void 0,e(n,r)}).o(function(t){r(t)})})})}function Eu(){try{return l.indexedDB}catch(t){return}}function Iu(t){return t.objectStore("firebaseLocalStorage")}function Tu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Su(t){return new pe(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Cu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?yu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):_e();var n}function Nu(r){return _u(r).then(function(t){var i=Iu(Tu(t,!1));return i.getAll?Su(i.getAll()):new pe(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Au(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ku(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=_e().then(function(){if(Eu()){var e=Ar(),n="__sak"+e;return lu=lu||new mu,(i=lu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.U(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){V(r.a,function(t){t(e)})}),t})}function Ou(){this.a={},this.type="inMemory"}function Ru(){if(!function(){var t="Node"==lr();if(!(t=Pu()||t&&Xl.INTERNAL.node&&Xl.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Pu()||Xl.INTERNAL.node.localStorage,this.type="localStorage"}function Pu(){try{var t=l.localStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Du(){this.type="nullStorage"}function xu(){if(!function(){var t="Node"==lr();if(!(t=Lu()||t&&Xl.INTERNAL.node&&Xl.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Lu()||Xl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Lu(){try{var t=l.sessionStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Mu(){var t={};t.Browser=ju,t.Node=Vu,t.ReactNative=qu,t.Worker=Bu,this.a=t[lr()]}hu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],V(t,function(t){e.push(_e().then(function(){return t(n.origin,n.data.data)}))}),Ie(e).then(function(t){var e=[];V(t,function(t){e.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),V(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},du.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},vu.prototype.close=function(){for(;0<this.a.length;)gu(this,this.a[0]);this.b=!0},(t=mu.prototype).set=function(r,i){var o=this,s=!1;return wu(this,function(t){return Su((t=Iu(Tu(t,!0))).get(r))}).then(function(n){return wu(o,function(t){if(t=Iu(Tu(t,!0)),n)return n.value=i,Su(t.put(n));o.b++,s=!0;var e={};return e.fbase_key=r,e.value=i,Su(t.add(e))})}).then(function(){return o.c[r]=i,Cu(o,r)}).oa(function(){s&&o.b--})},t.get=function(e){return wu(this,function(t){return Su(Iu(Tu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.U=function(e){var n=this,r=!1;return wu(this,function(t){return r=!0,n.b++,Su(Iu(Tu(t,!0)).delete(e))}).then(function(){return delete n.c[e],Cu(n,e)}).oa(function(){r&&n.b--})},t.ca=function(t){var n;0==this.a.length&&(Au(n=this),function e(){n.f=setTimeout(function(){n.l=Nu(n).then(function(e){0<e.length&&V(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){z(this.a,function(t){return t==e}),0==this.a.length&&Au(this)},(t=ku.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.U=function(e){return this.b.then(function(t){return t.U(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){z(this.a,function(t){return t==e})},(t=Ou.prototype).get=function(t){return _e(this.a[t])},t.set=function(t,e){return this.a[t]=e,_e()},t.U=function(t){return delete this.a[t],_e()},t.ca=function(){},t.ia=function(){},(t=Ru.prototype).get=function(t){var e=this;return _e().then(function(){return Nr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return _e().then(function(){var t=Sr(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return _e().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&Ze(l.window,"storage",t)},t.ia=function(t){l.window&&nn(l.window,"storage",t)},(t=Du.prototype).get=function(){return _e(null)},t.set=function(){return _e()},t.U=function(){return _e()},t.ca=function(){},t.ia=function(){},(t=xu.prototype).get=function(t){var e=this;return _e().then(function(){return Nr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return _e().then(function(){var t=Sr(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return _e().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Fu,Uu,ju={F:Ru,bb:xu},Vu={F:Ru,bb:xu},qu={F:cu,bb:Du},Bu={F:Ru,bb:Du},Hu={rd:"local",NONE:"none",td:"session"};function Ku(){var t=!(kr(mr())||!cr()),e=Tr(),n=_r();this.m=t,this.h=e,this.l=n,this.a={},t=Fu=Fu||new Mu;try{this.g=!Zn()&&xr()||!l.indexedDB?new t.a.F:new ku(new(hr()?Ou:t.a.F))}catch(t){this.g=new Ou,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Ou}this.v=new Ou,this.f=m(this.Yb,this),this.b={}}function Wu(){return Uu=Uu||new Ku}function zu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Gu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Qu(t,e,n){return n=Gu(e,n),"local"==e.F&&(t.b[n]=null),zu(t,e.F).U(n)}function Yu(t){t.c&&(clearInterval(t.c),t.c=null)}function Xu(t){this.a=t,this.b=Wu()}(t=Ku.prototype).get=function(t,e){return zu(this,t.F).get(Gu(t,e))},t.set=function(e,t,n){var r=Gu(e,n),i=this,o=zu(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Gu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ct(this.a)&&(zu(this,"local").ca(this.f),this.h||(Zn()||!xr())&&l.indexedDB||!this.l||(Yu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Be({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Yb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Gu(t,e),this.a[t]&&(z(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(zu(this,"local").ia(this.f),Yu(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?zu(this,"local").ia(this.f):Yu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.mb(e))};Ht&&Zt&&10==Zt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,m(this.mb,this))},t.mb=function(t){this.a[t]&&V(this.a[t],function(t){t()})};var Ju,$u={name:"authEvent",F:"local"};function Zu(){this.a=Wu()}function tc(t,e){this.b=ec,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Ju&&(Ju=l.Int32Array?new Int32Array(uc):uc),this.reset()}w(tc,function(){this.b=-1});for(var ec=64,nc=ec-1,rc=[],ic=0;ic<nc;ic++)rc[ic]=0;var oc=G(128,rc);function sc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Ju[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function ac(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(sc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(sc(t),i=0)}}t.c=i,t.g+=n}tc.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Q(this.h)};var uc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function cc(){tc.call(this,8,hc)}w(cc,tc);var hc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function lc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new Zu,this.g=new Xu(this.h),this.f=null,this.b=[],this.a=this.c=null}function fc(t){return new I("invalid-cordova-configuration",t)}function pc(t){var e=new cc;ac(e,t),t=[];var n=8*e.g;e.c<56?ac(e,oc,56-e.c):ac(e,oc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(sc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return B(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function dc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function vc(a){return a.f||(a.f=a.ma().then(function(){return new pe(function(n){function e(r){t=!0,s&&s.cancel(),yc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,-1!=(n=Qi(r.url)).indexOf("/__/auth/callback")&&(e=(e="object"==typeof(e=Nr(kn(e=On(n),"firebaseError")||null))?T(e):null)?new Oo(t.c,t.b,null,null,e,null,t.T()):new Oo(t.c,t.b,n,t.f,null,null,t.T())),n=e||o),dc(i,n)})}var i,o,t,s,r;a.Ea(function t(e){return n(e),a.Sa(t),!1}),i=a,o=new Oo("unknown",null,null,null,new I("no-auth-event")),t=!1,s=gn(500).then(function(){return yc(i).then(function(){t||dc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(br("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},xo=xo||new Po,function(t){var n=xo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=br("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function yc(e){var t,n=null;return(t=e.g).b.get($u,t.a).then(Ro).then(function(t){return n=t,Qu((t=e.g).b,$u,t.a)}).then(function(){return n})}function gc(t){this.a=t,this.b=Wu()}(t=lc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(ur(void 0)?ar().then(function(){return new pe(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):we(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof br("universalLinks.subscribe",l))throw fc("cordova-universal-links-plugin-fix is not installed");if(void 0===br("BuildInfo.packageName",l))throw fc("cordova-plugin-buildinfo is not installed");if("function"!=typeof br("cordova.plugins.browsertab.openUrl",l))throw fc("cordova-plugin-browsertab is not installed");if("function"!=typeof br("cordova.InAppBrowser.open",l))throw fc("cordova-plugin-inappbrowser is not installed")},function(){throw new I("cordova-not-ready")})},t.Ob=function(t,e){return e(new I("operation-not-supported-in-this-environment")),_e()},t.Mb=function(){return we(new I("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return we(new I("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=_e().then(function(){return ko(e),vc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Oo(t,r,null,o,new I("no-auth-event"),null,i),a=br("BuildInfo.packageName",l);if("string"!=typeof a)throw new I("invalid-cordova-configuration");var u=br("BuildInfo.displayName",l),c={};if(mr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!mr().toLowerCase().match(/android/))return we(new I("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=pc(o),c.sessionId=o;var h=uu(n.v,n.i,n.l,t,e,null,r,n.m,c,n.u,i,n.s);return n.ma().then(function(){var t=n.h;return n.C.a.set($u,s.w(),t)}).then(function(){var t=br("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new I("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=br("cordova.plugins.browsertab.openUrl",l)))throw new I("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=br("cordova.InAppBrowser.open",l)))throw new I("invalid-cordova-configuration");t=mr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new pe(function(e,t){a=function(){var t=br("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s=s||gn(2e3).then(function(){t(new I("redirect-cancelled-by-user"))})},c=function(){Pr()&&u()},o.addEventListener("resume",u,!1),mr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return yc(i).then(function(){throw t})})}).oa(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Sa(a),i.c=null})},t.Ea=function(e){this.b.push(e),vc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Oo("unknown",null,null,null,new I("no-auth-event")),e(t))})},t.Sa=function(e){z(this.b,function(t){return t==e})};var mc={name:"pendingRedirect",F:"session"};function bc(t){return Qu(t.b,mc,t.a)}function _c(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Lc,this.C=new Vc,this.g=new gc(Dc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=wc(this.D,this.v,this.m,S,this.J)}function wc(t,e,n,r,i){var o=Xl.SDK_VERSION||null;return new(ur()?lc:iu)(t,e,n,o,r,i)}function Ec(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.ma().o(function(t){throw e.a==n&&e.reset(),t})}function Ic(n){n.a.Xb()&&Ec(n).o(function(t){var e=new Oo("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));kc(t)&&n.s(e)}),n.a.Tb()||Mc(n.b)}function Tc(n,t){K(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(mc,t.a).then(function(t){return"pending"==t}).then(function(t){t?bc(n.g).then(function(){Ec(n).o(function(t){var e=new Oo("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));kc(t)&&n.s(e)})}):Ic(n)}).o(function(){Ic(n)})}function Sc(t,e){z(t.h,function(t){return t==e})}_c.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=wc(this.D,this.v,this.m,null,this.J),this.i={}},_c.prototype.s=function(t){if(!t)throw new I("invalid-auth-event");if(6e5<=_()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=_())),e=!0;break}}return Mc(this.b),e};var Cc=new Rr(2e3,1e4),Nc=new Rr(3e4,6e4);function Ac(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function kc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Oc(e,t,n,r,i){var o,s;return(s=e.g).b.set(mc,"pending",s.a).then(function(){return e.a.Nb(t,n,r,i).o(function(t){if(kc(t))throw new I("operation-not-supported-in-this-environment");return o=t,bc(e.g).then(function(){throw o})}).then(function(){return e.a.$b()?new pe(function(){}):bc(e.g).then(function(){return e.qa()}).then(function(){}).o(function(){})})})}function Rc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},Cc.get())}_c.prototype.qa=function(){return this.b.qa()};var Pc={};function Dc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function xc(t,e,n,r){var i=Dc(e,n,r);return Pc[i]||(Pc[i]=new _c(t,e,n,r)),Pc[i]}function Lc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Mc(t){t.g||(t.g=!0,jc(t,!1,null,null))}function Fc(t){t.g&&!t.i&&jc(t,!1,null,null)}function Uc(t,e){if(t.b=function(){return _e(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function jc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return we(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Uc(t,n):Uc(t,{user:null}),t.f=[],t.c=[]}function Vc(){}function qc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Bc(t,e){this.a=e,jr(this,"verificationId",t)}function Hc(t,e,n,r){return new Co(t).fb(e,n).then(function(t){return new Bc(t,r)})}function Kc(t){var e=xi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Vr(this,{token:t,expirationTime:Dr(1e3*e.exp),authTime:Dr(1e3*e.auth_time),issuedAtTime:Dr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Wc(t,e,n){var r=e&&e[Gc];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ht(e),this.g=n,this.c=new Yi(null,r),this.b=[];var i=this;V(e[zc]||[],function(t){(t=Kr(t))&&i.b.push(t)}),jr(this,"auth",this.a),jr(this,"session",this.c),jr(this,"hints",this.b)}Lc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Lc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(jc(this,!0,null,t.a),_e()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.T(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){jc(e,a,t,null)}).o(function(t){jc(e,a,null,t)})}(this,t,e):we(new I("invalid-auth-event")):(jc(this,!1,null,null),_e())):we(new I("invalid-auth-event"))},Lc.prototype.qa=function(){var i=this;return new pe(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new I("timeout"),n.a&&n.a.cancel(),n.a=gn(Nc.get()).then(function(){n.b||(n.g=!0,jc(n,!0,null,r))}))})},Vc.prototype.h=function(t,e){var n,r,i,o,s;t?(n=t.c,r=t.b,t.a?(e.na(t.c,null,t.a,t.b),_e()):e.Fa(n,r)?(i=e,o=(t=t).b,s=t.c,i.Fa(s,o)(t.g,t.f,t.T(),t.i).then(function(t){i.na(s,t,null,o)}).o(function(t){i.na(s,null,t,o)})):we(new I("invalid-auth-event"))):we(new I("invalid-auth-event"))},Bc.prototype.confirm=function(t){return t=No(this.verificationId,t),this.a(t)};var zc="mfaInfo",Gc="mfaPendingCredential";function Qc(t,e,n,r){I.call(this,"multi-factor-auth-required",r,e),this.b=new Wc(t,e,n),jr(this,"resolver",this.b)}function Yc(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Qc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Xc(){}function Jc(t){jr(this,"factorId",t.fa),this.a=t}function $c(t){if(Jc.call(this,t),this.a.fa!=Co.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Zc(t,e){for(var n in qe.call(this,t),e)this[n]=e[n]}function th(t,e){this.a=t,this.b=[],this.c=m(this.yc,this),Ze(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Gr]=t.uid),t.displayName&&(n[Wr]=t.displayName),t.enrollmentTime&&(n[zr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Qr]=t.phoneNumber);try{e=new Yr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),eh(this,r)}function eh(t,e){t.b=e,jr(t,"enrolledFactors",e)}function nh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function rh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function ih(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function oh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function sh(t,e){t.b=Di(e[Bs]||""),t.a=e.refreshToken,oh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function ah(e,t){return r=e.f,i=t,new pe(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Js(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ya(t)):t.access_token&&t.refresh_token?e(t):n(new I("internal-error")):n(new I("network-request-failed"))},"POST",Bn(i).toString(),r.g,r.m.get()):n(new I("internal-error"))}).then(function(t){return e.b=Di(t.access_token),e.a=t.refresh_token,oh(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function uh(t,e){this.a=t||null,this.b=e||null,Vr(this,{lastSignInTime:Dr(e||null),creationTime:Dr(t||null)})}function ch(t,e,n,r,i,o){Vr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function hh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r,i=Xl.SDK_VERSION?gr(Xl.SDK_VERSION):null;this.a=new Vs(this.l,k(S),i),t.emulatorConfig&&Qs(this.a,t.emulatorConfig),this.b=new ih(this.a),mh(this,e[Bs]),sh(this.b,e),jr(this,"refreshToken",this.b.a),wh(this,n||{}),fn.call(this),this.R=!1,this.s&&wr()&&(this.i=xc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=(r=this,new nh(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=r.b.c-Date.now()-3e5;return 0<t?t:0})),this.aa=m(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){Qs(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){ph(o,t.f)},this.ba=null,this.O=new th(this,n),jr(this,"multiFactor",this.O)}function lh(t,e){t.ja&&nn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&Ze(e,"languageCodeChanged",t.Oa)}function fh(t,e){t.X&&nn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&Ze(e,"emulatorConfigChanged",t.Aa)}function ph(t,e){t.$=e,Xs(t.a,Xl.SDK_VERSION?gr(Xl.SDK_VERSION,t.$):null)}function dh(t,e){t.ba&&nn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&Ze(e,"frameworkChanged",t.Ba)}function vh(e){try{return Xl.app(e.m).auth()}catch(t){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function yh(t){t.D||t.u.b||(t.u.start(),nn(t,"tokenChanged",t.aa),Ze(t,"tokenChanged",t.aa))}function gh(t){nn(t,"tokenChanged",t.aa),t.u.stop()}function mh(t,e){t.za=e,jr(t,"_lat",e)}function bh(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ie(e).then(function(){return t})}function _h(t){t.i&&!t.R&&(t.R=!0,Tc(t.i,t))}function wh(t,e){Vr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new uh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Eh(){}function Ih(t){return _e().then(function(){if(t.D)throw new I("app-deleted")})}function Th(t){return B(t.providerData,function(t){return t.providerId})}function Sh(t,e){e&&(Ch(t,e.providerId),t.providerData.push(e))}function Ch(t,e){z(t.providerData,function(t){return t.providerId==e})}function Nh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&jr(t,e,n)}function Ah(e,t){var n,r;e!=t&&(Vr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?jr(e,"metadata",new uh((r=t.metadata).a,r.b)):jr(e,"metadata",new uh),V(t.providerData,function(t){Sh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,n.c=r.c,jr(e,"refreshToken",e.b.a),eh(e.O,t.O.b))}function kh(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,Ga((e=i).a,Ta,{idToken:n}).then(m(e.Kc,e)).then(function(){return r||Nh(i,"isAnonymous",!1),t})})}function Oh(t,e){e[Bs]&&t.za!=e[Bs]&&(sh(t.b,e),t.dispatchEvent(new Zc("tokenChanged")),mh(t,e[Bs]),Nh(t,"refreshToken",t.b.a))}function Rh(t,e){return kh(t).then(function(){if(K(Th(t),e))return bh(t).then(function(){throw new I("provider-already-linked")})})}function Ph(t,e,n){return qr({user:t,credential:Ao(e),additionalUserInfo:e=ji(e),operationType:n})}function Dh(t,e){return Oh(t,e),t.reload().then(function(){return t})}function xh(n,r,t,e,i){if(!wr())return we(new I("operation-not-supported-in-this-environment"));if(n.h&&!i)return we(n.h);var o=Ui(t.providerId),s=Ar(n.uid+":::"),a=null;(!Tr()||cr())&&n.s&&t.isOAuthProvider&&(a=uu(n.s,n.l,n.m,r,t,null,s,Xl.SDK_VERSION||null,null,null,n.tenantId));var u=ir(a,o&&o.ua,o&&o.ta);return e=e().then(function(){if(Mh(n),!i)return n.I().then(function(){})}).then(function(){return Ac(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new pe(function(t,e){n.na(r,null,new I("cancelled-popup-request"),n.g||null),n.f=t,n.C=e,n.g=s,n.c=Rc(n.i,n,r,u,s)})}).then(function(t){return u&&rr(u),t?qr(t):null}).o(function(t){throw u&&rr(u),t}),Fh(n,e,i)}function Lh(e,t,n,r,i){if(!wr())return we(new I("operation-not-supported-in-this-environment"));if(e.h&&!i)return we(e.h);var o=null,s=Ar(e.uid+":::");return r=r().then(function(){if(Mh(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=s,bh(e)}).then(function(t){return e.ha&&(t=(t=e.ha).b.set(Vh,e.w(),t.a)),t}).then(function(){return Oc(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ha)return qh(e.ha);throw o}).then(function(){if(o)throw o}),Fh(e,r,i)}function Mh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Fh(n,t,e){var r,i=(t=t,e=e,(r=n).h&&!e?(t.cancel(),we(r.h)):t.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Zc("userInvalidated")),r.h=t),t}));return n.J.push(i),i.oa(function(){W(n.J,i)}),i.o(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Yc(t.w(),vh(n),m(n.jc,n))),e||t})}function Uh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Bs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new hh(e,n,t);return t.providerData&&V(t.providerData,function(t){t&&Sh(i,qr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function jh(t){this.a=t,this.b=Wu()}Wc.prototype.Rc=function(t){var n=this;return t.sb(this.a.a,this.c).then(function(t){var e=ht(n.f);return delete e[zc],delete e[Gc],ft(e,t),n.g(e)})},w(Qc,I),Xc.prototype.sb=function(t,e,n){return e.type==Xi?(o=this,s=t,a=n,e.Ha().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),ft(t,{phoneVerificationInfo:So(o.a)}),Ga(s,Ea,t)})):(r=this,i=t,e.Ha().then(function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:So(r.a)}),Ga(i,Ia,t)}));var r,i,o,s,a},w(Jc,Xc),w($c,Jc),w(Zc,qe),(t=th.prototype).yc=function(t){var e;eh(this,(t=t.hd,e=[],V(t.mfaInfo||[],function(t){(t=Kr(t))&&e.push(t)}),e))},t.Rb=function(){return this.a.I().then(function(t){return new Yi(t,null)})},t.fc=function(e,n){var r=this,i=this.a.a;return this.Rb().then(function(t){return e.sb(i,t,n)}).then(function(t){return Oh(r.a,t),r.a.reload()})},t.bd=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Ga(e,za,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=q(n.b,function(t){return t.uid!=r});return eh(n,e),Oh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:B(this.b,function(t){return t.w()})}}},nh.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=gn(rh(n,t)).then(function(){return e=l.document,n=null,Pr()||!e?_e():new pe(function(t){n=function(){Pr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},nh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ih.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ih.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?we(new I("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?ah(this,{grant_type:"refresh_token",refresh_token:this.a}):_e(null):_e({accessToken:this.b.toString(),refreshToken:this.a})},uh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(hh,fn),hh.prototype.wa=function(t){this.ya=t,Gs(this.a,t)},hh.prototype.la=function(){return this.ya},hh.prototype.Ga=function(){return Q(this.$)},hh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},jr(hh.prototype,"providerId","firebase"),(t=hh.prototype).reload=function(){var t=this;return Fh(this,Ih(this).then(function(){return kh(t).then(function(){return bh(t)}).then(Eh)}))},t.oc=function(t){return this.I(t).then(function(t){return new Kc(t)})},t.I=function(t){var e=this;return Fh(this,Ih(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new I("internal-error");return t.accessToken!=e.za&&(mh(e,t.accessToken),e.dispatchEvent(new Zc("tokenChanged"))),Nh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new I("internal-error");wh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?B(e,function(t){return new ch(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)Sh(this,n[r]);Nh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Zc("userReloaded",{hd:t}))},t.Lc=function(t){return Fr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Fh(this,t.c(this.a,this.uid).then(function(t){return Oh(e,t),n=Ph(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Fr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(e){var n=this,r=null;return Fh(this,Rh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Ph(n,t,"link"),Dh(n,t)}).then(function(){return r}))},t.Dc=function(t,e){var n=this;return Fh(this,Rh(this,"phone").then(function(){return Hc(vh(n),t,e,m(n.qb,n))}))},t.Mc=function(t,e){var n=this;return Fh(this,_e().then(function(){return Hc(vh(n),t,e,m(n.tb,n))}),!0)},t.Bb=function(e){var n=this;return Fh(this,this.I().then(function(t){return n.a.Bb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.ed=function(e){var n=this;return Fh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Oh(n,t),n.reload()}))},t.Cb=function(e){var n=this;return Fh(this,this.I().then(function(t){return n.a.Cb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Ih(this);var n=this;return Fh(this,this.I().then(function(t){return n.a.Db(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Oh(n,t),Nh(n,"displayName",t.displayName||null),Nh(n,"photoURL",t.photoUrl||null),V(n.providerData,function(t){"password"===t.providerId&&(jr(t,"displayName",n.displayName),jr(t,"photoURL",n.photoURL))}),bh(n)}).then(Eh))},t.cd=function(e){var n=this;return Fh(this,kh(this).then(function(t){return K(Th(n),e)?Ga(n.a,ba,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return V(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),V(Th(n),function(t){e[t]||Ch(n,t)}),e[Co.PROVIDER_ID]||jr(n,"phoneNumber",null),bh(n)}):bh(n).then(function(){throw new I("no-such-provider")})}))},t.delete=function(){var e=this;return Fh(this,this.I().then(function(t){return Ga(e.a,ma,{idToken:t})}).then(function(){e.dispatchEvent(new Zc("userDeleted"))})).then(function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");lh(e,null),fh(e,null),dh(e,null),e.J=[],e.D=!0,gh(e),jr(e,"refreshToken",null),e.i&&Sc(e.i,e)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?m(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?m(this.Lb,this):null},t.Ec=function(t){var e=this;return xh(this,"linkViaPopup",t,function(){return Rh(e,t.providerId).then(function(){return bh(e)})},!1)},t.Nc=function(t){return xh(this,"reauthViaPopup",t,function(){return _e()},!0)},t.Fc=function(t){var e=this;return Lh(this,"linkViaRedirect",t,function(){return Rh(e,t.providerId)},!1)},t.Oc=function(t){return Lh(this,"reauthViaRedirect",t,function(){return _e()},!0)},t.Kb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return la(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Ph(i,t,"link"),Dh(i,t)}).then(function(){return o}),Fh(this,t)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Fh(this,_e().then(function(){return Zi(fa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Ph(i,t,"reauthenticate"),Oh(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(e){var n=this,r=null;return Fh(this,this.I().then(function(t){return r=t,void 0===e||ct(e)?{}:ki(new bi(e))}).then(function(t){return n.a.ub(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Eb=function(e,n){var r=this,i=null;return Fh(this,this.I().then(function(t){return i=t,void 0===n||ct(n)?{}:ki(new bi(n))}).then(function(t){return r.a.Eb(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Fh(this,t=Zi(_e(t),n.uid).then(function(t){return e=Ph(n,t,"reauthenticate"),Oh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ft(e,this.metadata.w()),V(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),ft(e,this.O.w()),e};var Vh={name:"redirectUser",F:"session"};function qh(t){return Qu(t.b,Vh,t.a)}function Bh(t){var e,n,r,i;this.a=t,this.b=Wu(),this.c=null,this.f=(n=Wh("local"),r=Wh("session"),i=Wh("none"),function(n,r,i){var o=Gu(r,i),s=zu(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=Nr(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Kh,e.a).then(function(t){return t?Wh(t):n})})})}).then(function(t){return e.c=t,Hh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Wh("local"),this.a,m(this.g,this))}function Hh(t,e){var n,a,r=[];for(n in Hu)Hu[n]!==e&&r.push(Qu(t.b,Wh(Hu[n]),t.a));return r.push(Qu(t.b,Kh,t.a)),a=r,new pe(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Ee(a[s],b(t,s),o);else n(i)})}Bh.prototype.g=function(){var e=this,n=Wh("local");Yh(this,function(){return _e().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Hh(e,"local").then(function(){e.c=n})})})};var Kh={name:"persistence",F:"session"};function Wh(t){return{name:"authUser",F:t}}function zh(t,e){return Yh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Gh(t){return Yh(t,function(){return Qu(t.b,t.c,t.a)})}function Qh(t,e,n){return Yh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Uh(t||{})})})}function Yh(t,e){return t.f=t.f.then(e,e),t.f}function Xh(t){if(this.l=!1,jr(this,"settings",new qc),jr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new I("invalid-api-key");var n,e,r,i,o,s;t=Xl.SDK_VERSION?gr(Xl.SDK_VERSION):null,this.a=new Vs(this.app.options&&this.app.options.apiKey,k(S),t),this.R=[],this.s=[],this.O=[],this.hb=Xl.INTERNAL.createSubscribe(m(this.zc,this)),this.X=void 0,this.bc=Xl.INTERNAL.createSubscribe(m(this.Ac,this)),rl(this,null),this.i=new Bh(this.app.options.apiKey+":"+this.app.name),this.D=new jh(this.app.options.apiKey+":"+this.app.name),this.$=ul(this,(e=(n=this).app.options.authDomain,t=function(e){var t=function(t,e){return t.b.get(Vh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Uh(t||{})})}(e.D,e.app.options.authDomain).then(function(t){return(e.m=t)&&(t.ha=e.D),qh(e.D)});return ul(e,t)}(n).then(function(){return Qh(n.i,e,n.P)}).then(function(e){return e?(e.ha=n.D,n.m&&(n.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return zh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Gh(n.i)})):null}).then(function(t){rl(n,t||null)}),ul(n,t))),this.h=ul(this,(r=this).$.then(function(){return el(r)}).o(function(){}).then(function(){if(!r.l)return r.ja()}).o(function(){}).then(function(){var t;r.l||(r.ba=!0,(t=r.i).b.addListener(Wh("local"),t.a,r.ja))})),this.ba=!1,this.ja=m(this.Zc,this),this.Ba=m(this.da,this),this.ya=m(this.mc,this),this.za=m(this.wc,this),this.Aa=m(this.xc,this),this.b=null,o=(i=this).app.options.authDomain,s=i.app.options.apiKey,o&&wr()&&(i.Oa=i.$.then(function(){var t;if(!i.l)return i.b=xc(o,s,i.app.name,i.P),Tc(i.b,i),ol(i)&&_h(ol(i)),i.m&&(_h(i.m),(t=i.m).wa(i.la()),lh(t,i),ph(t=i.m,i.J),dh(t,i),Qs((t=i.m).a,i.P),fh(t,i),i.m=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Gc,this),this.u=0,fn.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){var t;return t=this.P?qr({protocol:(t=On(this.P.url)).c,host:t.a,port:t.g,options:qr({disableWarnings:this.P.ec})}):null},enumerable:!1}),this.J=[],this.P=null}function Jh(t){qe.call(this,"languageCodeChanged"),this.h=t}function $h(t){qe.call(this,"emulatorConfigChanged"),this.c=t}function Zh(t){qe.call(this,"frameworkChanged"),this.f=t}function tl(t){return t.Oa||we(new I("auth-domain-config-required"))}function el(t){if(!wr())return we(new I("operation-not-supported-in-this-environment"));var e=tl(t).then(function(){return t.b.qa()}).then(function(t){return t?qr(t):null});return ul(t,e)}function nl(o,s){var a={};return a.apiKey=o.app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.P&&(a.emulatorConfig=o.P),o.$.then(function(){return t=a,e=s,n=o.D,r=o.Ga(),i=new hh(t,e),n&&(i.ha=n),r&&ph(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return ol(o)&&t.uid==ol(o).uid?Ah(ol(o),t):(rl(o,t),_h(t)),o.da(t)}).then(function(){al(o)})}function rl(t,e){var n,r;ol(t)&&(n=ol(t),r=t.Ba,z(n.S,function(t){return t==r}),nn(ol(t),"tokenChanged",t.ya),nn(ol(t),"userDeleted",t.za),nn(ol(t),"userInvalidated",t.Aa),gh(ol(t))),e&&(e.S.push(t.Ba),Ze(e,"tokenChanged",t.ya),Ze(e,"userDeleted",t.za),Ze(e,"userInvalidated",t.Aa),0<t.u&&yh(e)),jr(t,"currentUser",e),e&&(e.wa(t.la()),lh(e,t),ph(e,t.J),dh(e,t),Qs(e.a,t.P),fh(e,t))}function il(n,t){var e=null,r=null;return ul(n,t.then(function(t){return e=Ao(t),r=ji(t),nl(n,t)},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Yc(t.w(),n,m(n.kc,n))),e||t}).then(function(){return qr({user:ol(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function ol(t){return t.currentUser}function sl(t){return ol(t)&&ol(t)._lat||null}function al(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](sl(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](sl(t))}}function ul(t,e){return t.R.push(e),e.oa(function(){W(t.R,e)}),e}function cl(){}function hl(){this.a={},this.b=1e12}Bh.prototype.xb=function(e){var n=null,r=this;return function(t){var e=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");t:{for(r in Hu)if(Hu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(lr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Eu()&&"none"!==t)throw n;break;default:if(!_r()&&"none"!==t)throw n}}(e),Yh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Hh(r,e)}).then(function(){if(r.c=Wh(e),n)return r.b.set(r.c,n,r.a)}):_e()})},w(Xh,fn),w(Jh,qe),w($h,qe),w(Zh,qe),(t=Xh.prototype).xb=function(t){return t=this.i.xb(t),ul(this,t)},t.wa=function(t){this.aa===t||this.l||(this.aa=t,Gs(this.a,this.aa),this.dispatchEvent(new Jh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,n=e,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!n&&ar().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.P={url:t,ec:e},this.settings.ib=!0,Qs(this.a,this.P),this.dispatchEvent(new $h(this.P))}var n},t.Gc=function(t){this.J.push(t),Xs(this.a,Xl.SDK_VERSION?gr(Xl.SDK_VERSION,this.J):null),this.dispatchEvent(new Zh(this.J))},t.Ga=function(){return Q(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:ol(this)&&ol(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return il(i,ha(i.a,o))})},t.Xc=function(e){if(!wr())return we(new I("operation-not-supported-in-this-environment"));var n=this,t=Ui(e.providerId),r=Ar(),i=null;(!Tr()||cr())&&this.app.options.authDomain&&e.isOAuthProvider&&(i=uu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Xl.SDK_VERSION||null,null,null,this.T(),this.P));var o=ir(i,t&&t.ua,t&&t.ta);return ul(this,t=tl(this).then(function(t){return Ac(t,o,"signInViaPopup",e,r,!!i,n.T())}).then(function(){return new pe(function(t,e){n.na("signInViaPopup",null,new I("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=r,n.c=Rc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&rr(o),t?qr(t):null}).o(function(t){throw o&&rr(o),t}))},t.Yc=function(t){if(!wr())return we(new I("operation-not-supported-in-this-environment"));var e=this;return ul(this,tl(this).then(function(){return Yh(t=e.i,function(){return t.b.set(Kh,t.c.F,t.a)});var t}).then(function(){return Oc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var e=this;return el(this).then(function(t){return e.b&&Fc(e.b.b),t}).o(function(t){throw e.b&&Fc(e.b.b),t})},t.dd=function(t){if(!t)return we(new I("null-user"));if(this.S!=t.tenantId)return we(new I("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u=(r=t,i=n,o=e.D,s=e.Ga(),a=r.b,(n={})[Bs]=a.b&&a.b.toString(),n.refreshToken=a.a,i=new hh(i||{apiKey:r.l,authDomain:r.s,appName:r.m},n),o&&(i.ha=o),s&&ph(i,s),Ah(i,r),i);return ul(this,this.h.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return ol(e)&&t.uid==ol(e).uid?(Ah(ol(e),t),e.da(t)):(rl(e,u),_h(u),e.da(u))}).then(function(){al(e)}))},t.Ab=function(){var t=this,e=this.h.then(function(){return t.b&&Fc(t.b.b),ol(t)?(rl(t,null),Gh(t.i).then(function(){al(t)})):_e()});return ul(this,e)},t.Zc=function(){var r=this;return Qh(this.i,this.app.options.authDomain).then(function(t){if(!r.l){var e,n;if((n=ol(r)&&t)&&(n=ol(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return Ah(ol(r),t),ol(r).I();(ol(r)||t)&&(rl(r,t),t&&(_h(t),t.ha=r.D),r.b&&Tc(r.b,r),al(r))}})},t.da=function(t){return zh(this.i,t)},t.mc=function(){al(this),this.da(ol(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return il(e,_e(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(ol(e))})},t.Ac=function(t){var e,n,r=this;n=function(){t.next(ol(r))},(e=this).O.push(n),ul(e,e.h.then(function(){!e.l&&K(e.O,n)&&e.X!==e.getUid()&&(e.X=e.getUid(),n(sl(e)))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(ol(r)):"function"==typeof t.next&&t.next(ol(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(ol(r)):"function"==typeof t.next&&t.next(ol(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this,n=this.h.then(function(){return ol(e)?ol(e).I(t).then(function(t){return{accessToken:t}}):null});return ul(this,n)},t.Tc=function(t){var n=this;return this.h.then(function(){return il(n,Ga(n.a,qa,{token:t}))}).then(function(t){var e=t.user;return Nh(e,"isAnonymous",!1),n.da(e),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return il(n,Ga(n.a,Ba,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return il(n,Ga(n.a,ya,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return il(e,t.ka(e.a))})},t.Sc=function(t){return Fr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var n=this;return this.h.then(function(){var t=ol(n);if(t&&t.isAnonymous){var e=qr({providerId:null,isNewUser:!1});return qr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return il(n,n.a.zb()).then(function(t){var e=t.user;return Nh(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return ol(this)&&ol(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ol(this)&&yh(ol(this))},t.Pc=function(e){var n=this;V(this.s,function(t){t==e&&n.u--}),this.u<0&&(this.u=0),0==this.u&&ol(this)&&gh(ol(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),ul(this,this.h.then(function(){e.l||K(e.s,t)&&t(sl(e))}))},t.removeAuthTokenListener=function(e){z(this.s,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Wh("local"),t.a,this.ja),this.b&&(Sc(this.b,this),Fc(this.b.b)),Promise.resolve()},t.hc=function(t){return ul(this,Ga(this.a,ga,{identifier:t,continueUri:Er()?tr():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Bc=function(t){return!!Eo(t)},t.wb=function(e,n){var r=this;return ul(this,_e().then(function(){var t=new bi(n);if(!t.c)throw new I("argument-error",Ei+" must be true when sending sign in link to email");return ki(t)}).then(function(t){return r.a.wb(e,t)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return ul(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return ul(this,this.a.Ra(t).then(function(t){return new Xr(t)}))},t.jb=function(t){return ul(this,this.a.jb(t).then(function(){}))},t.vb=function(e,t){var n=this;return ul(this,_e().then(function(){return void 0===t||ct(t)?{}:ki(new bi(t))}).then(function(t){return n.a.vb(e,t)}).then(function(){}))},t.Wc=function(t,e){return ul(this,Hc(this,t,e,m(this.$a,this)))},t.Vc=function(n,r){var i=this;return ul(this,_e().then(function(){var t=r||tr(),e=wo(n,t);if(!(t=Eo(t)))throw new I("argument-error","Invalid email link!");if(t.tenantId!==i.T())throw new I("tenant-id-mismatch");return i.$a(e)}))},cl.prototype.render=function(){},cl.prototype.reset=function(){},cl.prototype.getResponse=function(){},cl.prototype.execute=function(){};var ll=null;function fl(t,e){return(e=pl(e))&&t.a[e]||null}function pl(t){return(t=void 0===t?1e12:t)?t.toString():null}function dl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ze(this.f,"click",this.i)}function vl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function yl(){}function gl(){}hl.prototype.render=function(t,e){return this.a[this.b.toString()]=new dl(t,e),this.b++},hl.prototype.reset=function(t){var e=fl(this,t);t=pl(t),e&&t&&(e.delete(),delete this.a[t])},hl.prototype.getResponse=function(t){return(t=fl(this,t))?t.getResponse():null},hl.prototype.execute=function(t){(t=fl(this,t))&&t.execute()},dl.prototype.getResponse=function(){return vl(this),this.b},dl.prototype.execute=function(){vl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},dl.prototype.delete=function(){vl(this),this.g=!0,clearTimeout(this.a),this.a=null,nn(this.f,"click",this.i)},jr(yl,"FACTOR_ID","phone"),gl.prototype.g=function(){return _e(ll=ll||new hl)},gl.prototype.c=function(){};var ml=null;function bl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var _l=new dt(mt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),wl=new Rr(3e4,6e4);bl.prototype.g=function(i){var o=this;return new pe(function(t,e){var r=setTimeout(function(){e(new I("network-request-failed"))},wl.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new I("internal-error"))),delete l[o.a]},_e(Ds(Et(_l,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},bl.prototype.c=function(){this.b--};var El=null;function Il(t,e,n,r,i,o,s){if(jr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s=s?ml=ml||new gl:El=El||new bl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Cl])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Nl],!l.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Vs(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[Tl];this.a[Tl]=function(t){var e;Al(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=br(u,l))&&e(t)};var c=this.a[Sl];this.a[Sl]=function(){var t;Al(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=br(c,l))&&t()}}var Tl="callback",Sl="expired-callback",Cl="sitekey",Nl="size";function Al(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function kl(t,e){return t.h.push(e),e.oa(function(){W(t.h,e)}),e}function Ol(t){if(t.D)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function Rl(t,e,n){var r=!1;try{this.b=n||Xl.app()}catch(t){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Xl.SDK_VERSION?gr(Xl.SDK_VERSION,o):null,Il.call(this,n,t,e,function(){try{var e=i.b.auth().la()}catch(t){e=null}return e},o,k(S),r)}function Pl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Dl.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=Dl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new I("argument-error",t+" failed: "+r)}(t=Il.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=kl(this,_e().then(function(){if(Er()&&!hr())return ar();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.u())}).then(function(t){return e.g=t,Ga(e.s,Oa,{})}).then(function(t){e.a[Cl]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},t.render=function(){Ol(this);var n=this;return kl(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.v,n.i||(t=ee(e),e=se("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Ol(this);var i=this;return kl(this,this.render().then(function(e){return new pe(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,z(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Ol(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ol(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ee(this.v);for(;t=e.firstChild;)e.removeChild(t)}},w(Rl,Il);var Dl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function xl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Ll(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Ml(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:y}}function Fl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Ul(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function jl(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ka||!e)}}}function Vl(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}}function ql(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Bl(t,e){return y(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Hl(t){return y(t)&&"string"==typeof t.uid}function Kl(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Wl(e,n,t,r){return{name:t||"",K:e.K+" or "+n.K,optional:!!r,M:function(t){return e.M(t)||n.M(t)}}}function zl(t,e){for(var n in e){var r=e[n].name;t[r]=Yl(r,t[n],e[n].j)}}function Gl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){Pl(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Ql(t,e,n,r){t[e]=Yl(e,n,r)}function Yl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Pl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}zl(Xh.prototype,{jb:{name:"applyActionCode",j:[xl("code")]},Ra:{name:"checkActionCode",j:[xl("code")]},nb:{name:"confirmPasswordReset",j:[xl("code"),xl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[xl("email"),xl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[xl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[xl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Wl(Ml(),Fl(),"nextOrObserver"),Fl("opt_error",!0),Fl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Wl(Ml(),Fl(),"nextOrObserver"),Fl("opt_error",!0),Fl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[xl("email"),Wl(Ml("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[xl("email"),Ml("actionCodeSettings")]},xb:{name:"setPersistence",j:[xl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[jl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[jl()]},Tc:{name:"signInWithCustomToken",j:[xl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[xl("email"),xl("password")]},Vc:{name:"signInWithEmailLink",j:[xl("email"),xl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[xl("phoneNumber"),Kl()]},Xc:{name:"signInWithPopup",j:[ql()]},Yc:{name:"signInWithRedirect",j:[ql()]},dd:{name:"updateCurrentUser",j:[Wl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof hh)}},Ul(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[xl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[xl("url"),Ml("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[xl("code")]}}),Gl(Xh.prototype,{lc:{name:"languageCode",kb:Wl(xl(),Ul(),"languageCode")},ti:{name:"tenantId",kb:Wl(xl(),Ul(),"tenantId")}}),(Xh.Persistence=Hu).LOCAL="local",Xh.Persistence.SESSION="session",Xh.Persistence.NONE="none",zl(hh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Ll("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ll("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[jl()]},qb:{name:"linkWithCredential",j:[jl()]},Dc:{name:"linkWithPhoneNumber",j:[xl("phoneNumber"),Kl()]},Ec:{name:"linkWithPopup",j:[ql()]},Fc:{name:"linkWithRedirect",j:[ql()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[jl()]},tb:{name:"reauthenticateWithCredential",j:[jl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[xl("phoneNumber"),Kl()]},Nc:{name:"reauthenticateWithPopup",j:[ql()]},Oc:{name:"reauthenticateWithRedirect",j:[ql()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Wl(Ml("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[xl(null,!0)]},cd:{name:"unlink",j:[xl("provider")]},Bb:{name:"updateEmail",j:[xl("email")]},Cb:{name:"updatePassword",j:[xl("password")]},ed:{name:"updatePhoneNumber",j:[jl("phone")]},Db:{name:"updateProfile",j:[Ml("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[xl("email"),Wl(Ml("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]}}),zl(hl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),zl(cl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),zl(pe.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Gl(qc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Ll("appVerificationDisabledForTesting")}}),zl(Bc.prototype,{confirm:{name:"confirm",j:[xl("verificationCode")]}}),Ql($i,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[oo,bo,To,no],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Wl(xl(),Ml(),"json")]),Ql(_o,"credential",function(t,e){return new mo(t,e)},[xl("email"),xl("password")]),zl(mo.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),zl(co.prototype,{Ca:{name:"addScope",j:[xl("scope")]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(co,"credential",ho,[Wl(xl(),Ml(),"token")]),Ql(_o,"credentialWithLink",wo,[xl("email"),xl("emailLink")]),zl(lo.prototype,{Ca:{name:"addScope",j:[xl("scope")]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(lo,"credential",fo,[Wl(xl(),Ml(),"token")]),zl(po.prototype,{Ca:{name:"addScope",j:[xl("scope")]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(po,"credential",vo,[Wl(xl(),Wl(Ml(),Ul()),"idToken"),Wl(xl(),Ul(),"accessToken",!0)]),zl(yo.prototype,{Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(yo,"credential",go,[Wl(xl(),Ml(),"token"),xl("secret",!0)]),zl(uo.prototype,{Ca:{name:"addScope",j:[xl("scope")]},credential:{name:"credential",j:[Wl(xl(),Wl(Ml(),Ul()),"optionsOrIdToken"),Wl(xl(),Ul(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),zl(ro.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),zl(to.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Ql(Co,"credential",No,[xl("verificationId"),xl("verificationCode")]),zl(Co.prototype,{fb:{name:"verifyPhoneNumber",j:[Wl(xl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Bl(t.session,Xi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Bl(t.session,Ji)&&Hl(t.multiFactorHint):t.session&&t.multiFactorUid?Bl(t.session,Ji)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Kl()]}}),zl(Io.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),zl(I.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),zl(Mo.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),zl(Lo.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),zl(Qc.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),zl(Wc.prototype,{Rc:{name:"resolveSignIn",j:[Vl()]}}),zl(th.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Vl(),xl("displayName",!0)]},bd:{name:"unenroll",j:[Wl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Hl},xl(),"multiFactorInfoIdentifier")]}}),zl(Rl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ql(hi,"parseLink",mi,[xl("link")]),Ql(yl,"assertion",function(t){return new $c(t)},[jl("phone")]),function(){if(void 0===Xl||!Xl.INTERNAL||!Xl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$r,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Jr,VERIFY_AND_CHANGE_EMAIL:Zr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Xh,AuthCredential:$i,Error:I};Ql(t,"EmailAuthProvider",_o,[]),Ql(t,"FacebookAuthProvider",co,[]),Ql(t,"GithubAuthProvider",lo,[]),Ql(t,"GoogleAuthProvider",po,[]),Ql(t,"TwitterAuthProvider",yo,[]),Ql(t,"OAuthProvider",uo,[xl("providerId")]),Ql(t,"SAMLAuthProvider",ao,[xl("providerId")]),Ql(t,"PhoneAuthProvider",Co,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Xh)}}]),Ql(t,"RecaptchaVerifier",Rl,[Wl(xl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Ml("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Xl.app.App)}}]),Ql(t,"ActionCodeURL",hi,[]),Ql(t,"PhoneMultiFactorGenerator",yl,[]),Xl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Xh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Xl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.nc,t),addAuthTokenListener:m(t.cc,t),removeAuthTokenListener:m(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Xl.registerVersion("@firebase/auth","0.16.2"),Xl.INTERNAL.extendNamespace({User:hh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var $s=(Zs.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Zo(e))},Zs.prototype.get=function(t){t=this.domStorage_.getItem(this.prefixedName_(t));return null==t?null:$o(t)},Zs.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Zs.prototype.prefixedName_=function(t){return this.prefix_+t},Zs.prototype.toString=function(){return this.domStorage_.toString()},Zs);function Zs(t){this.domStorage_=t,this.prefix_="firebase:"}var ta=(ea.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},ea.prototype.get=function(t){return es(this.cache_,t)?this.cache_[t]:null},ea.prototype.remove=function(t){delete this.cache_[t]},ea);function ea(){this.cache_={},this.isInMemoryStorage=!0}function na(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,Oo(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new os).update(e),t=t.digest(),Po.encodeByteArray(t)}function ra(t,e){Oo(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(da.logLevel=ks.VERBOSE,ga=da.log.bind(da),e&&pa.set("logging_enabled",!0)):"function"==typeof t?ga=t:(ga=null,pa.remove("logging_enabled"))}function ia(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+ya.apply(void 0,So(t));da.error(n)}function oa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+ya.apply(void 0,So(t));throw da.error(n),new Error(n)}function sa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+ya.apply(void 0,So(t));da.warn(n)}function aa(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function ua(t,e){return t===e?0:t<e?-1:1}function ca(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Zo(e))}function ha(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var la,Gn=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $s(e)}}catch(t){}return new ta},fa=Gn("localStorage"),pa=Gn("sessionStorage"),da=new Ls("@firebase/database"),va=(la=1,function(){return la++}),ya=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=ya.apply(null,i):n+="object"==typeof i?Zo(i):i,n+=" "}return n},ga=null,ma=!0,ba=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===ma&&(ma=!1,null===ga&&!0===pa.get("logging_enabled")&&ra(!0)),ga&&(t=ya.apply(null,e),ga(t))},_a=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ba.apply(void 0,So([n],t))}},wa="[MIN_NAME]",Ea="[MAX_NAME]",Ia=function(t,e){if(t===e)return 0;if(t===wa||e===Ea)return-1;if(e===wa||t===Ea)return 1;var n=Pa(t),r=Pa(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},Ta=function(t){if("object"!=typeof t||null===t)return Zo(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=Zo(n[i]),r+=":",r+=Ta(t[n[i]]);return r+="}"};function Sa(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function Ca(t){var e,n,r,i;Oo(!aa(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function Na(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw sa("Exception was thrown by user callback.",t),e},Math.floor(0))}}function Aa(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var ka=new RegExp("^-?(0*)\\d{1,10}$"),Oa=-2147483648,Ra=2147483647,Pa=function(t){if(ka.test(t)){t=Number(t);if(Oa<=t&&t<=Ra)return t}return null},Da=(Object.defineProperty(xa,"Empty",{get:function(){return new xa("")},enumerable:!1,configurable:!0}),xa.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},xa.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},xa.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new xa(this.pieces_,t)},xa.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},xa.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},xa.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},xa.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},xa.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new xa(t,0)},xa.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof xa)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else for(var r=t.split("/"),n=0;n<r.length;n++)0<r[n].length&&e.push(r[n]);return new xa(e,0)},xa.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},xa.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return xa.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},xa.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Ia(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},xa.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},xa.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},xa);function xa(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var La=(Object.defineProperty(Ma,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(Ma,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),Ma.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=vs(t),this.checkValid_()},Ma.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=vs(t),0<this.parts_.length&&--this.byteLength_},Ma.prototype.checkValid_=function(){if(this.byteLength_>Ma.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Ma.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Ma.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ma.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Ma.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Ma);function Ma(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=vs(this.parts_[n]);this.checkValid_()}var Fa=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ua="websocket",ja="long_polling",Va=(qa.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},qa.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},qa.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},qa.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},qa.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&fa.set("host:"+this.host,this.internalHost))},qa.prototype.connectionURL=function(t,e){var n;if(Oo("string"==typeof t,"typeof type must == string"),Oo("object"==typeof e,"typeof params must == object"),t===Ua)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==ja)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Sa(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},qa.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},qa.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return t+this.host+"/"+e},qa);function qa(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=fa.get("host:"+t)||this.host}function Ba(t,e){var n=tu(t),r=n.namespace;return"firebase.com"===n.domain&&oa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||oa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&sa("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),t="ws"===n.scheme||"wss"===n.scheme,{repoInfo:new Va(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new Da(n.pathString)}}function Ha(t){return"string"==typeof t&&0!==t.length&&!eu.test(t)}function Ka(t){return"string"==typeof t&&0!==t.length&&!nu.test(t)}function Wa(t){return null===t||"string"==typeof t||"number"==typeof t&&!aa(t)||t&&"object"==typeof t&&es(t,".sv")}function za(t,e,n,r,i){i&&void 0===n||iu(fs(t,e,i),n,r)}function Ga(t,e,n,r,i){if(!i||void 0!==n){var o=fs(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Sa(n,function(t,e){t=new Da(t);if(iu(o,e,r.child(t)),".priority"===t.getBack()&&!Wa(e))throw new Error(o+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(t)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Ha(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Da.comparePaths);var s=null;for(r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function Qa(t,e,n,r){if(!r||void 0!==n){if(aa(n))throw new Error(fs(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Wa(n))throw new Error(fs(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Ya(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(fs(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Xa(t,e,n,r){if(!(r&&void 0===n||Ha(n)))throw new Error(fs(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Ja(t,e,n,r){if(!(r&&void 0===n||Ka(n)))throw new Error(fs(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function $a(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function Za(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Ha(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&(r=(r=r)&&r.replace(/^\/*\.info(\/|$)/,"/"),!Ka(r)))throw new Error(fs(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var tu=function(t){var e,n,r,i="",o="",s="",a="",u="",c=!0,h="https",l=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(h=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(a=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Io(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):sa("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===h||"wss"===h,l=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),s=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=s),"ns"in n&&(u=n.ns)),{host:i,port:l,domain:o,subdomain:s,secure:c,scheme:h,pathString:a,namespace:u}},eu=/[\[\].#$\/\u0000-\u001F\u007F]/,nu=/[\[\].#$\u0000-\u001F\u007F]/,ru=10485760,iu=function(n,t,e){var r=e instanceof Da?new La(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(aa(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>ru/3&&vs(t)>ru)throw new Error(n+"contains a string greater than "+ru+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(Sa(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Ha(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),iu(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ou=(su.prototype.cancel=function(t){ls("OnDisconnect.cancel",0,1,arguments.length),ps("OnDisconnect.cancel",1,t,!0);var e=new Lo;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},su.prototype.remove=function(t){ls("OnDisconnect.remove",0,1,arguments.length),$a("OnDisconnect.remove",this.path_),ps("OnDisconnect.remove",1,t,!0);var e=new Lo;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},su.prototype.set=function(t,e){ls("OnDisconnect.set",1,2,arguments.length),$a("OnDisconnect.set",this.path_),za("OnDisconnect.set",1,t,this.path_,!1),ps("OnDisconnect.set",2,e,!0);var n=new Lo;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},su.prototype.setWithPriority=function(t,e,n){ls("OnDisconnect.setWithPriority",2,3,arguments.length),$a("OnDisconnect.setWithPriority",this.path_),za("OnDisconnect.setWithPriority",1,t,this.path_,!1),Qa("OnDisconnect.setWithPriority",2,e,!1),ps("OnDisconnect.setWithPriority",3,n,!0);var r=new Lo;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},su.prototype.update=function(t,e){if(ls("OnDisconnect.update",1,2,arguments.length),$a("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,sa("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ga("OnDisconnect.update",1,t,this.path_,!1),ps("OnDisconnect.update",2,e,!0);var i=new Lo;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},su);function su(t,e){this.repo_=t,this.path_=e}var au=(uu.prototype.toJSON=function(){return ls("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},uu);function uu(t,e){this.committed=t,this.snapshot=e}var cu,hu,lu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fu=(cu=0,hu=[],function(t){var e=t===cu;cu=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=lu.charAt(t%64),t=Math.floor(t/64);Oo(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===hu[r];r--)hu[r]=0;hu[r]++}else for(r=0;r<12;r++)hu[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=lu.charAt(hu[r]);return Oo(20===i.length,"nextPushId: Length should be 20."),i}),pu=(du.Wrap=function(t,e){return new du(t,e)},du);function du(t,e){this.name=t,this.node=e}var vu,vt=(yu.prototype.getCompare=function(){return this.compare.bind(this)},yu.prototype.indexedValueChanged=function(t,e){t=new pu(wa,t),e=new pu(wa,e);return 0!==this.compare(t,e)},yu.prototype.minPost=function(){return pu.MIN},yu);function yu(){}var gu,mu=(bo(bu,gu=vt),Object.defineProperty(bu,"__EMPTY_NODE",{get:function(){return vu},set:function(t){vu=t},enumerable:!1,configurable:!0}),bu.prototype.compare=function(t,e){return Ia(t.name,e.name)},bu.prototype.isDefinedOn=function(t){throw Ro("KeyIndex.isDefinedOn not expected to be called.")},bu.prototype.indexedValueChanged=function(t,e){return!1},bu.prototype.minPost=function(){return pu.MIN},bu.prototype.maxPost=function(){return new pu(Ea,vu)},bu.prototype.makePost=function(t,e){return Oo("string"==typeof t,"KeyIndex indexValue must always be a string."),new pu(t,vu)},bu.prototype.toString=function(){return".key"},bu);function bu(){return null!==gu&&gu.apply(this,arguments)||this}var _u,wu=new mu;function Eu(t){return"number"==typeof t?"number:"+Ca(t):"string:"+t}var Iu,Tu,Su,Cu,Nu=function(t){var e;t.isLeafNode()?(e=t.val(),Oo("string"==typeof e||"number"==typeof e||"object"==typeof e&&es(e,".sv"),"Priority must be a string or number.")):Oo(t===_u||t.isEmpty(),"priority of unexpected type."),Oo(t===_u||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Au=(Object.defineProperty(ku,"__childrenNodeConstructor",{get:function(){return Iu},set:function(t){Iu=t},enumerable:!1,configurable:!0}),ku.prototype.isLeafNode=function(){return!0},ku.prototype.getPriority=function(){return this.priorityNode_},ku.prototype.updatePriority=function(t){return new ku(this.value_,t)},ku.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:ku.__childrenNodeConstructor.EMPTY_NODE},ku.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:ku.__childrenNodeConstructor.EMPTY_NODE},ku.prototype.hasChild=function(){return!1},ku.prototype.getPredecessorChildName=function(t,e){return null},ku.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:ku.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},ku.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Oo(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,ku.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},ku.prototype.isEmpty=function(){return!1},ku.prototype.numChildren=function(){return 0},ku.prototype.forEachChild=function(t,e){return!1},ku.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},ku.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+Eu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?Ca(this.value_):this.value_,this.lazyHash_=na(t)),this.lazyHash_},ku.prototype.getValue=function(){return this.value_},ku.prototype.compareTo=function(t){return t===ku.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof ku.__childrenNodeConstructor?-1:(Oo(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},ku.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=ku.VALUE_TYPE_ORDER.indexOf(e),i=ku.VALUE_TYPE_ORDER.indexOf(n);return Oo(0<=r,"Unknown leaf type: "+e),Oo(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},ku.prototype.withIndex=function(){return this},ku.prototype.isIndexed=function(){return!0},ku.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},ku.VALUE_TYPE_ORDER=["object","boolean","number","string"],ku);function ku(t,e){void 0===e&&(e=ku.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Oo(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Nu(this.priorityNode_)}function Ou(){return null!==Cu&&Cu.apply(this,arguments)||this}var Ru=new(bo(Ou,Cu=vt),Ou.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),r=n.compareTo(r);return 0===r?Ia(t.name,e.name):r},Ou.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Ou.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Ou.prototype.minPost=function(){return pu.MIN},Ou.prototype.maxPost=function(){return new pu(Ea,new Au("[PRIORITY-POST]",Su))},Ou.prototype.makePost=function(t,e){t=Tu(t);return new pu(e,new Au("[PRIORITY-POST]",t))},Ou.prototype.toString=function(){return".priority"},Ou),Pu=(Du.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},Du.prototype.hasNext=function(){return 0<this.nodeStack_.length},Du.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Du);function Du(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var xu=(Lu.prototype.copy=function(t,e,n,r,i){return new Lu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Lu.prototype.count=function(){return this.left.count()+1+this.right.count()},Lu.prototype.isEmpty=function(){return!1},Lu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Lu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Lu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Lu.prototype.minKey=function(){return this.min_().key},Lu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Lu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Lu.prototype.removeMin_=function(){if(this.left.isEmpty())return Fu.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Lu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return Fu.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Lu.prototype.isRed_=function(){return this.color},Lu.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Lu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Lu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Lu.prototype.rotateLeft_=function(){var t=this.copy(null,null,Lu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Lu.prototype.rotateRight_=function(){var t=this.copy(null,null,Lu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Lu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Lu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Lu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Lu.RED=!0,Lu.BLACK=!1,Lu);function Lu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Lu.RED,this.left=null!=r?r:Fu.EMPTY_NODE,this.right=null!=i?i:Fu.EMPTY_NODE}Mu.prototype.copy=function(t,e,n,r,i){return this},Mu.prototype.insert=function(t,e,n){return new xu(t,e,null)},Mu.prototype.remove=function(t,e){return this},Mu.prototype.count=function(){return 0},Mu.prototype.isEmpty=function(){return!0},Mu.prototype.inorderTraversal=function(t){return!1},Mu.prototype.reverseTraversal=function(t){return!1},Mu.prototype.minKey=function(){return null},Mu.prototype.maxKey=function(){return null},Mu.prototype.check_=function(){return 0},Mu.prototype.isRed_=function(){return!1},dt=Mu;function Mu(){}var Fu=(Uu.prototype.insert=function(t,e){return new Uu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,xu.BLACK,null,null))},Uu.prototype.remove=function(t){return new Uu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,xu.BLACK,null,null))},Uu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Uu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Uu.prototype.isEmpty=function(){return this.root_.isEmpty()},Uu.prototype.count=function(){return this.root_.count()},Uu.prototype.minKey=function(){return this.root_.minKey()},Uu.prototype.maxKey=function(){return this.root_.maxKey()},Uu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Uu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Uu.prototype.getIterator=function(t){return new Pu(this.root_,null,this.comparator_,!1,t)},Uu.prototype.getIteratorFrom=function(t,e){return new Pu(this.root_,t,this.comparator_,!1,e)},Uu.prototype.getReverseIteratorFrom=function(t,e){return new Pu(this.root_,t,this.comparator_,!0,e)},Uu.prototype.getReverseIterator=function(t){return new Pu(this.root_,null,this.comparator_,!0,t)},Uu.EMPTY_NODE=new dt,Uu);function Uu(t,e){void 0===e&&(e=Uu.EMPTY_NODE),this.comparator_=t,this.root_=e}var ju=Math.log(2),Vu=(qu.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},qu);function qu(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/ju,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Bu,Hu,Ku=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return r=c[t],i=h?h(r):r,new xu(i,r.node,xu.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new xu(i,r.node,xu.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t;t=l(1+n,r),r=c[n],n=h?h(r):r;o(new xu(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},s=0;s<t.count;++s){var a=t.nextBitIsOne(),u=Math.pow(2,t.count-(s+1));a?r(u,xu.BLACK):(r(u,xu.BLACK),r(u,xu.RED))}return n}(new Vu(c.length));return new Fu(e||t,n)},Wu={},zu=(Object.defineProperty(Gu,"Default",{get:function(){return Oo(Ru,"ChildrenNode.ts has not been loaded"),Bu=Bu||new Gu({".priority":Wu},{".priority":Ru})},enumerable:!1,configurable:!0}),Gu.prototype.get=function(t){var e=ns(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Fu?e:null},Gu.prototype.hasIndex=function(t){return es(this.indexSet_,t.toString())},Gu.prototype.addIndex=function(t,e){Oo(t!==wu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(pu.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Ku(r,t.getCompare()):Wu;var a=t.toString(),u=_o({},this.indexSet_);u[a]=t;e=_o({},this.indexes_);return e[a]=n,new Gu(e,u)},Gu.prototype.addToIndexes=function(s,a){var u=this;return new Gu(is(this.indexes_,function(t,e){var n=ns(u.indexSet_,e);if(Oo(n,"Missing index implementation for "+e),t===Wu){if(n.isDefinedOn(s.node)){for(var r=[],i=a.getIterator(pu.Wrap),o=i.getNext();o;)o.name!==s.name&&r.push(o),o=i.getNext();return r.push(s),Ku(r,n.getCompare())}return Wu}n=a.get(s.name);return n&&(t=t.remove(new pu(s.name,n))),t.insert(s,s.node)}),this.indexSet_)},Gu.prototype.removeFromIndexes=function(n,r){return new Gu(is(this.indexes_,function(t){if(t===Wu)return t;var e=r.get(n.name);return e?t.remove(new pu(n.name,e)):t}),this.indexSet_)},Gu);function Gu(t,e){this.indexes_=t,this.indexSet_=e}function Qu(t,e){return Ia(t.name,e.name)}function Yu(t,e){return Ia(t,e)}var Xu,Ju=(Object.defineProperty($u,"EMPTY_NODE",{get:function(){return Hu=Hu||new $u(new Fu(Yu),null,zu.Default)},enumerable:!1,configurable:!0}),$u.prototype.isLeafNode=function(){return!1},$u.prototype.getPriority=function(){return this.priorityNode_||Hu},$u.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new $u(this.children_,t,this.indexMap_)},$u.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();t=this.children_.get(t);return null===t?Hu:t},$u.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},$u.prototype.hasChild=function(t){return null!==this.children_.get(t)},$u.prototype.updateImmediateChild=function(t,e){if(Oo(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new pu(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?Hu:this.priorityNode_;return new $u(r,n,i)},$u.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Oo(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");e=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,e)},$u.prototype.isEmpty=function(){return this.children_.isEmpty()},$u.prototype.numChildren=function(){return this.children_.count()},$u.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Ru,function(t,e){r[t]=e.val(n),i++,s&&$u.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},$u.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+Eu(this.getPriority().val())+":"),this.forEachChild(Ru,function(t,e){e=e.hash();""!==e&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":na(n)),this.lazyHash_},$u.prototype.getPredecessorChildName=function(t,e,n){n=this.resolveIndex_(n);if(n){e=n.getPredecessorKey(new pu(t,e));return e?e.name:null}return this.children_.getPredecessorKey(t)},$u.prototype.getFirstChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.minKey();return t&&t.name}return this.children_.minKey()},$u.prototype.getFirstChild=function(t){t=this.getFirstChildName(t);return t?new pu(t,this.children_.get(t)):null},$u.prototype.getLastChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.maxKey();return t&&t.name}return this.children_.maxKey()},$u.prototype.getLastChild=function(t){t=this.getLastChildName(t);return t?new pu(t,this.children_.get(t)):null},$u.prototype.forEachChild=function(t,e){t=this.resolveIndex_(t);return t?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},$u.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},$u.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,pu.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},$u.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},$u.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,pu.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},$u.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===tc?-1:0},$u.prototype.withIndex=function(t){if(t===wu||this.indexMap_.hasIndex(t))return this;t=this.indexMap_.addIndex(t,this.children_);return new $u(this.children_,this.priorityNode_,t)},$u.prototype.isIndexed=function(t){return t===wu||this.indexMap_.hasIndex(t)},$u.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(Ru),n=t.getIterator(Ru),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},$u.prototype.resolveIndex_=function(t){return t===wu?null:this.indexMap_.get(t.toString())},$u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,$u);function $u(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Nu(this.priorityNode_),this.children_.isEmpty()&&Oo(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Zu(){return Xu.call(this,new Fu(Yu),Ju.EMPTY_NODE,zu.Default)||this}var tc=new(bo(Zu,Xu=Ju),Zu.prototype.compareTo=function(t){return t===this?0:1},Zu.prototype.equals=function(t){return t===this},Zu.prototype.getPriority=function(){return this},Zu.prototype.getImmediateChild=function(t){return Ju.EMPTY_NODE},Zu.prototype.isEmpty=function(){return!1},Zu);Object.defineProperties(pu,{MIN:{value:new pu(wa,Ju.EMPTY_NODE)},MAX:{value:new pu(Ea,tc)}}),mu.__EMPTY_NODE=Ju.EMPTY_NODE,Au.__childrenNodeConstructor=Ju,_u=tc,Su=tc;var ec,nc=!0;function rc(n,t){if(void 0===t&&(t=null),null===n)return Ju.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),Oo(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Au(n,rc(t));if(n instanceof Array||!nc){var r=Ju.EMPTY_NODE;return Sa(n,function(t,e){es(n,t)&&"."!==t.substring(0,1)&&(!(e=rc(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(rc(t))}var i=[],o=!1;if(Sa(n,function(t,e){"."!==t.substring(0,1)&&((e=rc(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new pu(t,e))))}),0===i.length)return Ju.EMPTY_NODE;var e=Ku(i,Qu,function(t){return t.name},Yu);if(o){var s=Ku(i,Ru.getCompare());return new Ju(e,rc(t),new zu({".priority":s},{".priority":Ru}))}return new Ju(e,rc(t),zu.Default)}function ic(){return null!==ec&&ec.apply(this,arguments)||this}Tu=rc;var oc,sc=new(bo(ic,ec=vt),ic.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Ia(t.name,e.name):n},ic.prototype.isDefinedOn=function(t){return!0},ic.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},ic.prototype.minPost=function(){return pu.MIN},ic.prototype.maxPost=function(){return pu.MAX},ic.prototype.makePost=function(t,e){t=rc(t);return new pu(e,t)},ic.prototype.toString=function(){return".value"},ic),ac=(bo(uc,oc=vt),uc.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},uc.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},uc.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),r=n.compareTo(r);return 0===r?Ia(t.name,e.name):r},uc.prototype.makePost=function(t,e){t=rc(t),t=Ju.EMPTY_NODE.updateChild(this.indexPath_,t);return new pu(e,t)},uc.prototype.maxPost=function(){var t=Ju.EMPTY_NODE.updateChild(this.indexPath_,tc);return new pu(Ea,t)},uc.prototype.toString=function(){return this.indexPath_.slice().join("/")},uc);function uc(t){var e=oc.call(this)||this;return e.indexPath_=t,Oo(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var cc=(hc.prototype.val=function(){return ls("DataSnapshot.val",0,0,arguments.length),this.node_.val()},hc.prototype.exportVal=function(){return ls("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},hc.prototype.toJSON=function(){return ls("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},hc.prototype.exists=function(){return ls("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},hc.prototype.child=function(t){ls("DataSnapshot.child",0,1,arguments.length),t=String(t),Ja("DataSnapshot.child",1,t,!1);var e=new Da(t),t=this.ref_.child(e);return new hc(this.node_.getChild(e),t,Ru)},hc.prototype.hasChild=function(t){ls("DataSnapshot.hasChild",1,1,arguments.length),Ja("DataSnapshot.hasChild",1,t,!1);t=new Da(t);return!this.node_.getChild(t).isEmpty()},hc.prototype.getPriority=function(){return ls("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},hc.prototype.forEach=function(n){var r=this;return ls("DataSnapshot.forEach",1,1,arguments.length),ps("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new hc(e,r.ref_.child(t),Ru))})},hc.prototype.hasChildren=function(){return ls("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(hc.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),hc.prototype.numChildren=function(){return ls("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},hc.prototype.getRef=function(){return ls("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(hc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),hc);function hc(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var lc=(fc.prototype.getPath=function(){var t=this.snapshot.getRef();return("value"===this.eventType?t:t.getParent()).path},fc.prototype.getEventType=function(){return this.eventType},fc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},fc.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Zo(this.snapshot.exportVal())},fc);function fc(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var pc=(dc.prototype.getPath=function(){return this.path},dc.prototype.getEventType=function(){return"cancel"},dc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},dc.prototype.toString=function(){return this.path.toString()+":cancel"},dc);function dc(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var vc=(yc.prototype.respondsTo=function(t){return"value"===t},yc.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new lc("value",this,new cc(t.snapshotNode,e.getRef(),n))},yc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Oo(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},yc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new pc(this,t,e):null},yc.prototype.matches=function(t){return t instanceof yc&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},yc.prototype.hasAnyCallback=function(){return null!==this.callback_},yc);function yc(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var gc,mc=(bc.prototype.respondsTo=function(t){t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t;return es(this.callbacks_,t)},bc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new pc(this,t,e):null},bc.prototype.createEvent=function(t,e){Oo(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),e=e.getQueryParams().getIndex();return new lc(t.type,this,new cc(t.snapshotNode,n,e),t.prevName)},bc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Oo(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},bc.prototype.matches=function(e){var n=this;if(e instanceof bc){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});t=t[0],r=r[0];return!(r!==t||e.callbacks_[t]&&this.callbacks_[r]&&e.callbacks_[t]!==this.callbacks_[r])}}}return!1},bc.prototype.hasAnyCallback=function(){return null!==this.callbacks_},bc);function bc(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var _c=(Object.defineProperty(wc,"__referenceConstructor",{get:function(){return Oo(gc,"Reference.ts has not been loaded"),gc},set:function(t){gc=t},enumerable:!1,configurable:!0}),wc.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===wu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){var o=t.getIndexStartName();if(!(o===wa||t.hasStartAfter()&&o===Ea))throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){o=t.getIndexEndName();if(!(o===Ea||t.hasEndBefore()&&o===wa))throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ru){if(null!=e&&!Wa(e)||null!=n&&!Wa(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Oo(t.getIndex()instanceof ac||t.getIndex()===sc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},wc.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},wc.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},wc.prototype.getQueryParams=function(){return this.queryParams_},wc.prototype.getRef=function(){return ls("Query.ref",0,0,arguments.length),new wc.__referenceConstructor(this.repo,this.path)},wc.prototype.on=function(t,e,n,r){ls("Query.on",2,4,arguments.length),Ya("Query.on",1,t,!1),ps("Query.on",2,e,!1);n=wc.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,n.cancel,n.context):((r={})[t]=e,this.onChildEvent(r,n.cancel,n.context)),e},wc.prototype.onValueEvent=function(t,e,n){n=new vc(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,n)},wc.prototype.onChildEvent=function(t,e,n){n=new mc(t,e,n);this.repo.addEventCallbackForQuery(this,n)},wc.prototype.off=function(t,e,n){ls("Query.off",0,3,arguments.length),Ya("Query.off",1,t,!0),ps("Query.off",2,e,!0),ds("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new vc(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new mc(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},wc.prototype.get=function(){return this.repo.getValue(this)},wc.prototype.once=function(e,n,t,r){var i=this;ls("Query.once",1,4,arguments.length),Ya("Query.once",1,e,!1),ps("Query.once",2,n,!0);var o=wc.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new Lo;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},wc.prototype.limitToFirst=function(t){if(ls("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new wc(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},wc.prototype.limitToLast=function(t){if(ls("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new wc(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},wc.prototype.orderByChild=function(t){if(ls("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Ja("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");t=new Da(t);if(t.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");t=new ac(t),t=this.queryParams_.orderBy(t);return wc.validateQueryEndpoints_(t),new wc(this.repo,this.path,t,!0)},wc.prototype.orderByKey=function(){ls("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(wu);return wc.validateQueryEndpoints_(t),new wc(this.repo,this.path,t,!0)},wc.prototype.orderByPriority=function(){ls("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Ru);return wc.validateQueryEndpoints_(t),new wc(this.repo,this.path,t,!0)},wc.prototype.orderByValue=function(){ls("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(sc);return wc.validateQueryEndpoints_(t),new wc(this.repo,this.path,t,!0)},wc.prototype.startAt=function(t,e){void 0===t&&(t=null),ls("Query.startAt",0,2,arguments.length),za("Query.startAt",1,t,this.path,!0),Xa("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(wc.validateLimit_(n),wc.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new wc(this.repo,this.path,n,this.orderByCalled_)},wc.prototype.startAfter=function(t,e){void 0===t&&(t=null),ls("Query.startAfter",0,2,arguments.length),za("Query.startAfter",1,t,this.path,!1),Xa("Query.startAfter",2,e,!0);e=this.queryParams_.startAfter(t,e);if(wc.validateLimit_(e),wc.validateQueryEndpoints_(e),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new wc(this.repo,this.path,e,this.orderByCalled_)},wc.prototype.endAt=function(t,e){void 0===t&&(t=null),ls("Query.endAt",0,2,arguments.length),za("Query.endAt",1,t,this.path,!0),Xa("Query.endAt",2,e,!0);e=this.queryParams_.endAt(t,e);if(wc.validateLimit_(e),wc.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new wc(this.repo,this.path,e,this.orderByCalled_)},wc.prototype.endBefore=function(t,e){void 0===t&&(t=null),ls("Query.endBefore",0,2,arguments.length),za("Query.endBefore",1,t,this.path,!1),Xa("Query.endBefore",2,e,!0);e=this.queryParams_.endBefore(t,e);if(wc.validateLimit_(e),wc.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new wc(this.repo,this.path,e,this.orderByCalled_)},wc.prototype.equalTo=function(t,e){if(ls("Query.equalTo",1,2,arguments.length),za("Query.equalTo",1,t,this.path,!1),Xa("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},wc.prototype.toString=function(){return ls("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},wc.prototype.toJSON=function(){return ls("Query.toJSON",0,1,arguments.length),this.toString()},wc.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},wc.prototype.queryIdentifier=function(){var t=this.queryObject(),t=Ta(t);return"{}"===t?"default":t},wc.prototype.isEqual=function(t){if(ls("Query.isEqual",1,1,arguments.length),!(t instanceof wc)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var e=this.repo===t.repo,n=this.path.equals(t.path),t=this.queryIdentifier()===t.queryIdentifier();return e&&n&&t},wc.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,ps(t,3,r.cancel,!0),r.context=n,ds(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(fs(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(wc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),wc);function wc(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var Ec=(Ic.prototype.getImmediateChild=function(t){return new Ic(this.node_.getImmediateChild(t))},Ic.prototype.node=function(){return this.node_},Ic);function Ic(t){this.node_=t}var Tc=(Sc.prototype.getImmediateChild=function(t){t=this.path_.child(t);return new Sc(this.syncTree_,t)},Sc.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},Sc);function Sc(t,e){this.syncTree_=t,this.path_=e}function Cc(t,e,n,r){return Rc(e,new Tc(n,t),r)}function Nc(t,e,n){return Rc(t,new Ec(e),n)}var Ac=function(t,e,n){return t&&"object"==typeof t?(Oo(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?kc(t[".sv"],e,n):"object"==typeof t[".sv"]?Oc(t[".sv"],e):void Oo(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},kc=function(t,e,n){if("timestamp"===t)return n.timestamp;Oo(!1,"Unexpected server value: "+t)},Oc=function(t,e,n){t.hasOwnProperty("increment")||Oo(!1,"Unexpected server value: "+JSON.stringify(t,null,2));t=t.increment;"number"!=typeof t&&Oo(!1,"Unexpected increment value: "+t);e=e.node();if(Oo(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode())return t;e=e.getValue();return"number"!=typeof e?t:e+t};function Rc(t,r,i){var e=t.getPriority().val(),n=Ac(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,e=Ac(o.getValue(),r,i);return e!==o.getValue()||n!==o.getPriority().val()?new Au(e,rc(n)):t}var t=t,s=t;return n!==t.getPriority().val()&&(s=s.updatePriority(new Au(n))),t.forEachChild(Ru,function(t,e){var n=Rc(e,r.getImmediateChild(t),i);n!==e&&(s=s.updateImmediateChild(t,n))}),s}var Pc,Dc=(xc.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},xc.prototype.remember=function(t,e){var n;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new xc),n=this.children.get(n),t=t.popFront(),n.remember(t,e))},xc.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Ru,function(t,e){n.remember(new Da(t),e)}),this.forget(t)}if(0<this.children.size){e=t.getFront();return t=t.popFront(),this.children.has(e)&&this.children.get(e).forget(t)&&this.children.delete(e),0===this.children.size}return!0},xc.prototype.forEachTree=function(n,r){null!==this.value?r(n,this.value):this.forEachChild(function(t,e){t=new Da(n.toString()+"/"+t);e.forEachTree(t,r)})},xc.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},xc);function xc(){this.value=null,this.children=new Map}(Gn=Pc=Pc||{})[Gn.OVERWRITE=0]="OVERWRITE",Gn[Gn.MERGE=1]="MERGE",Gn[Gn.ACK_USER_WRITE=2]="ACK_USER_WRITE",Gn[Gn.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Lc=(Mc.User=new Mc(!0,!1,null,!1),Mc.Server=new Mc(!1,!0,null,!1),Mc.forServerTaggedQuery=function(t){return new Mc(!1,!0,t,!0)},Mc);function Mc(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Oo(!r||e,"Tagged queries must be from server.")}var Fc,Uc=(jc.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Oo(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new Da(t));return new jc(Da.Empty,e,this.revert)}return Oo(this.path.getFront()===t,"operationForChild called for unrelated child."),new jc(this.path.popFront(),this.affectedTree,this.revert)},jc);function jc(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Pc.ACK_USER_WRITE,this.source=Lc.User}var Vc=(qc.fromObject=function(t){var n=qc.Empty;return Sa(t,function(t,e){n=n.set(new Da(t),e)}),n},qc.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},qc.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Da.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;e=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==e?null:{path:new Da(n).child(e.path),value:e.value}},qc.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},qc.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),e=this.children.get(e);return null!==e?e.subtree(t.popFront()):qc.Empty},qc.prototype.set=function(t,e){if(t.isEmpty())return new qc(e,this.children);var n=t.getFront(),e=(this.children.get(n)||qc.Empty).set(t.popFront(),e),e=this.children.insert(n,e);return new qc(this.value,e)},qc.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?qc.Empty:new qc(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){n=n.remove(t.popFront()),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n);return null===this.value&&t.isEmpty()?qc.Empty:new qc(this.value,t)}return this},qc.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),e=this.children.get(e);return e?e.get(t.popFront()):null},qc.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),t=(this.children.get(n)||qc.Empty).setTree(t.popFront(),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new qc(this.value,e)},qc.prototype.fold=function(t){return this.fold_(Da.Empty,t)},qc.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},qc.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Da.Empty,e)},qc.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),r=this.children.get(i);return r?r.findOnPath_(t.popFront(),e.child(i),n):null},qc.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Da.Empty,e)},qc.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):qc.Empty},qc.prototype.foreach=function(t){this.foreach_(Da.Empty,t)},qc.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},qc.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},qc.Empty=new qc(null),qc);function qc(t,e){void 0===e&&(e=Fc=Fc||new Fu(ua)),this.value=t,this.children=e}var Bc=(Hc.prototype.operationForChild=function(t){return this.path.isEmpty()?new Hc(this.source,Da.Empty):new Hc(this.source,this.path.popFront())},Hc);function Hc(t,e){this.source=t,this.path=e,this.type=Pc.LISTEN_COMPLETE}var Kc=(Wc.prototype.operationForChild=function(t){return this.path.isEmpty()?new Wc(this.source,Da.Empty,this.snap.getImmediateChild(t)):new Wc(this.source,this.path.popFront(),this.snap)},Wc);function Wc(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Pc.OVERWRITE}var zc=(Gc.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new Da(t));return e.isEmpty()?null:e.value?new Kc(this.source,Da.Empty,e.value):new Gc(this.source,Da.Empty,e)}return Oo(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Gc(this.source,this.path.popFront(),this.children)},Gc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Gc);function Gc(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Pc.MERGE}var Qc=(Yc.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Yc.prototype.isFiltered=function(){return this.filtered_},Yc.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;t=t.getFront();return this.isCompleteForChild(t)},Yc.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Yc.prototype.getNode=function(){return this.node_},Yc);function Yc(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var Xc=(Jc.prototype.updateEventSnap=function(t,e,n){return new Jc(new Qc(t,e,n),this.serverCache_)},Jc.prototype.updateServerSnap=function(t,e,n){return new Jc(this.eventCache_,new Qc(t,e,n))},Jc.prototype.getEventCache=function(){return this.eventCache_},Jc.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Jc.prototype.getServerCache=function(){return this.serverCache_},Jc.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Jc.Empty=new Jc(new Qc(Ju.EMPTY_NODE,!1,!1),new Qc(Ju.EMPTY_NODE,!1,!1)),Jc);function Jc(t,e){this.eventCache_=t,this.serverCache_=e}var $c=(Zc.valueChange=function(t){return new Zc(Zc.VALUE,t)},Zc.childAddedChange=function(t,e){return new Zc(Zc.CHILD_ADDED,e,t)},Zc.childRemovedChange=function(t,e){return new Zc(Zc.CHILD_REMOVED,e,t)},Zc.childChangedChange=function(t,e,n){return new Zc(Zc.CHILD_CHANGED,e,t,n)},Zc.childMovedChange=function(t,e){return new Zc(Zc.CHILD_MOVED,e,t)},Zc.CHILD_ADDED="child_added",Zc.CHILD_REMOVED="child_removed",Zc.CHILD_CHANGED="child_changed",Zc.CHILD_MOVED="child_moved",Zc.VALUE="value",Zc);function Zc(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var th=(eh.prototype.updateChild=function(t,e,n,r,i,o){Oo(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange($c.childRemovedChange(e,s)):Oo(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange($c.childAddedChange(e,n)):o.trackChildChange($c.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},eh.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Ru,function(t,e){n.hasChild(t)||i.trackChildChange($c.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(Ru,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange($c.childChangedChange(t,e,n)):i.trackChildChange($c.childAddedChange(t,e))})),n.withIndex(this.index_)},eh.prototype.updatePriority=function(t,e){return t.isEmpty()?Ju.EMPTY_NODE:t.updatePriority(e)},eh.prototype.filtersNodes=function(){return!1},eh.prototype.getIndexedFilter=function(){return this},eh.prototype.getIndex=function(){return this.index_},eh);function eh(t){this.index_=t}var nh=(rh.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Oo(e===$c.CHILD_ADDED||e===$c.CHILD_CHANGED||e===$c.CHILD_REMOVED,"Only child changes supported for tracking"),Oo(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===$c.CHILD_ADDED&&i===$c.CHILD_REMOVED)this.changeMap.set(n,$c.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===$c.CHILD_REMOVED&&i===$c.CHILD_ADDED)this.changeMap.delete(n);else if(e===$c.CHILD_REMOVED&&i===$c.CHILD_CHANGED)this.changeMap.set(n,$c.childRemovedChange(n,r.oldSnap));else if(e===$c.CHILD_CHANGED&&i===$c.CHILD_ADDED)this.changeMap.set(n,$c.childAddedChange(n,t.snapshotNode));else{if(e!==$c.CHILD_CHANGED||i!==$c.CHILD_CHANGED)throw Ro("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,$c.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},rh.prototype.getChanges=function(){return Array.from(this.changeMap.values())},rh);function rh(){this.changeMap=new Map}function ih(){}var oh=new(ih.prototype.getCompleteChild=function(t){return null},ih.prototype.getChildAfterChild=function(t,e,n){return null},ih),sh=(ah.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);e=null!=this.optCompleteServerCache_?new Qc(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,e)},ah.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),t=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===t.length?null:t[0]},ah);function ah(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var uh=function(t,e){this.viewCache=t,this.changes=e},ch=(hh.prototype.assertIndexed=function(t){Oo(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Oo(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},hh.prototype.applyOperation=function(t,e,n,r){var i=new nh;if(e.type===Pc.OVERWRITE)var o=e,s=o.source.fromUser?this.applyUserOverwrite_(t,o.path,o.snap,n,r,i):(Oo(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered()&&!o.path.isEmpty(),this.applyServerOverwrite_(t,o.path,o.snap,n,r,a,i));else if(e.type===Pc.MERGE){o=e;s=o.source.fromUser?this.applyUserMerge_(t,o.path,o.children,n,r,i):(Oo(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,o.path,o.children,n,r,a,i))}else if(e.type===Pc.ACK_USER_WRITE){var a=e;s=a.revert?this.revertUserWrite_(t,a.path,n,r,i):this.ackUserWrite_(t,a.path,a.affectedTree,n,r,i)}else{if(e.type!==Pc.LISTEN_COMPLETE)throw Ro("Unknown operation type: "+e.type);s=this.listenComplete_(t,e.path,n,i)}i=i.getChanges();return hh.maybeAddValueEvent_(t,s,i),new uh(s,i)},hh.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push($c.valueChange(e.getCompleteEventSnap())))},hh.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=void 0,l=void 0;return h=e.isEmpty()?(Oo(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(s=(s=t.getCompleteServerSnap())instanceof Ju?s:Ju.EMPTY_NODE,s=n.calcCompleteEventChildren(s),this.filter_.updateFullNode(t.getEventCache().getNode(),s,i)):(a=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),a,i))):".priority"===(a=e.getFront())?(Oo(1===e.getLength(),"Can't have a priority with additional path components"),u=o.getNode(),l=t.getServerCache().getNode(),null!=(c=n.calcEventCacheAfterServerOverwrite(e,u,l))?this.filter_.updatePriority(u,c):o.getNode()):(u=e.popFront(),c=void 0,null!=(c=o.isCompleteForChild(a)?(l=t.getServerCache().getNode(),null!=(l=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),l))?o.getNode().getImmediateChild(a).updateChild(u,l):o.getNode().getImmediateChild(a)):n.calcCompleteChild(a,t.getServerCache()))?this.filter_.updateChild(o.getNode(),a,c,u,r,i):o.getNode()),t.updateEventSnap(h,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},hh.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{o=e.getFront();if(!a.isCompleteForPath(e)&&1<e.getLength())return t;c=e.popFront(),n=a.getNode().getImmediateChild(o).updateChild(c,n);h=".priority"===o?u.updatePriority(a.getNode(),n):u.updateChild(a.getNode(),o,n,c,oh,null)}u=t.updateServerSnap(h,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),i=new sh(r,u,i);return this.generateEventCacheAfterServerEvent_(u,e,r,i,s)},hh.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new sh(r,t,i);return e.isEmpty()?(a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(a,!0,this.filter_.filtersNodes())):".priority"===(s=e.getFront())?(a=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered())):(r=e.popFront(),i=u.getNode().getImmediateChild(s),a=void 0,a=r.isEmpty()?n:null!=(e=c.getCompleteChild(s))?".priority"===r.getBack()&&e.getChild(r.parent()).isEmpty()?e:e.updateChild(r,n):Ju.EMPTY_NODE,i.equals(a)?t:(o=this.filter_.updateChild(u.getNode(),s,a,r,c,o),t.updateEventSnap(o,u.isFullyInitialized(),this.filter_.filtersNodes())))},hh.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},hh.prototype.applyUserMerge_=function(n,r,t,i,o,s){var a=this,u=n;return t.foreach(function(t,e){t=r.child(t);hh.cacheHasChild_(n,t.getFront())&&(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),t.foreach(function(t,e){t=r.child(t);hh.cacheHasChild_(n,t.getFront())||(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),u},hh.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},hh.prototype.applyServerMerge_=function(r,t,e,i,o,s,a){var u=this;if(r.getServerCache().getNode().isEmpty()&&!r.getServerCache().isFullyInitialized())return r;var c=r,e=t.isEmpty()?e:Vc.Empty.setTree(t,e),h=r.getServerCache().getNode();return e.children.inorderTraversal(function(t,e){var n;h.hasChild(t)&&(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new Da(t),e,i,o,s,a))}),e.children.inorderTraversal(function(t,e){var n=!r.getServerCache().isCompleteForChild(t)&&null==e.value;h.hasChild(t)||n||(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new Da(t),e,i,o,s,a))}),c},hh.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=Vc.Empty;return a.getNode().forEachChild(wu,function(t,e){u=u.set(new Da(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=Vc.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},hh.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),i=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(i,e,n,oh,r)},hh.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u=new sh(n,t,r),c=t.getEventCache().getNode(),r=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=void 0,a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),Oo(s instanceof Ju,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),r=this.filter_.updateFullNode(c,a,i)):(s=e.getFront(),null==(a=n.calcCompleteChild(s,t.getServerCache()))&&t.getServerCache().isCompleteForChild(s)&&(a=c.getImmediateChild(s)),(r=null!=a?this.filter_.updateChild(c,s,a,e.popFront(),u,i):t.getEventCache().getNode().hasChild(s)?this.filter_.updateChild(c,s,Ju.EMPTY_NODE,e.popFront(),u,i):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(r=this.filter_.updateFullNode(r,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Da.Empty),t.updateEventSnap(r,o,this.filter_.filtersNodes())},hh);function hh(t){this.filter_=t}var lh=(fh.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===$c.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push($c.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,$c.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,$c.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,$c.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,$c.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,$c.VALUE,t,n,e),i},fh.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,t=t.filter(function(t){return t.type===e});t.sort(this.compareChanges_.bind(this)),t.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},fh.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},fh.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Ro("Should only compare child_ events.");t=new pu(t.childName,t.snapshotNode),e=new pu(e.childName,e.snapshotNode);return this.index_.compare(t,e)},fh);function fh(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var ph,dh=(vh.prototype.getQuery=function(){return this.query_},vh.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},vh.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},vh.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},vh.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},vh.prototype.removeEventRegistration=function(t,e){var n,r=[];if(e&&(Oo(null==t,"A cancel should cancel all event registrations."),n=this.query_.path,this.eventRegistrations_.forEach(function(t){t=t.createCancelEvent(e,n);t&&r.push(t)})),t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return r},vh.prototype.applyOperation=function(t,e,n){t.type===Pc.MERGE&&null!==t.source.queryId&&(Oo(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Oo(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,n=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(n.viewCache),Oo(n.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=n.viewCache,this.generateEventsForChanges_(n.changes,n.viewCache.getEventCache().getNode(),null)},vh.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ru,function(t,e){n.push($c.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push($c.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},vh.prototype.generateEventsForChanges_=function(t,e,n){n=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,n)},vh);function vh(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new th(n.getIndex()),i=n.getNodeFilter();this.processor_=new ch(i);var o=e.getServerCache(),t=e.getEventCache(),n=r.updateFullNode(Ju.EMPTY_NODE,o.getNode(),null),e=i.updateFullNode(Ju.EMPTY_NODE,t.getNode(),null),r=new Qc(n,o.isFullyInitialized(),r.filtersNodes()),i=new Qc(e,t.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Xc(i,r),this.eventGenerator_=new lh(this.query_)}var yh=(Object.defineProperty(gh,"__referenceConstructor",{get:function(){return Oo(ph,"Reference.ts has not been loaded"),ph},set:function(t){Oo(!ph,"__referenceConstructor has already been defined"),ph=t},enumerable:!1,configurable:!0}),gh.prototype.isEmpty=function(){return 0===this.views.size},gh.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Oo(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=Io(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},gh.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a=t.queryIdentifier(),u=this.views.get(a);return u||(s=!1,s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof Ju?n.calcCompleteEventChildren(r):Ju.EMPTY_NODE,!1),i=new Xc(new Qc(o,s,!1),new Qc(r,i,!1)),u=new dh(t,i),this.views.set(a,u)),u.addEventRegistration(e),u.getInitialEvents(e)},gh.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=Io(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=To(h.value,2),f=l[0],p=l[1],a=a.concat(p.removeEventRegistration(e,n));p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new gh.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},gh.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=Io(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},gh.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=Io(this.views.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r||s.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},gh.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();t=t.queryIdentifier();return this.views.get(t)},gh.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},gh.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},gh.prototype.getCompleteView=function(){var e,t;try{for(var n=Io(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},gh);function gh(){this.views=new Map}var mh=(bh.prototype.addWrite=function(t,e){if(t.isEmpty())return new bh(new Vc(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,n=Da.relativePath(r,t),i=i.updateChild(n,e);return new bh(this.writeTree_.set(r,i))}e=new Vc(e);return new bh(this.writeTree_.setTree(t,e))},bh.prototype.addWrites=function(n,t){var r=this;return Sa(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},bh.prototype.removeWrite=function(t){return t.isEmpty()?bh.Empty:new bh(this.writeTree_.setTree(t,Vc.Empty))},bh.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},bh.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Da.relativePath(e.path,t)):null},bh.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ru,function(t,e){n.push(new pu(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new pu(t,e.value))}),n},bh.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new bh(null!=e?new Vc(e):this.writeTree_.subtree(t))},bh.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},bh.prototype.apply=function(t){return function n(r,t,i){{if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Oo(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}}(Da.Empty,this.writeTree_,t)},bh.Empty=new bh(new Vc(null)),bh);function bh(t){this.writeTree_=t}var _h=(wh.prototype.childWrites=function(t){return new Eh(t,this)},wh.prototype.addOverwrite=function(t,e,n,r){Oo(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},wh.prototype.addMerge=function(t,e,n){Oo(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},wh.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},wh.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});Oo(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Sa(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},wh.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},wh.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(Da.Empty)){var o=wh.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),s=t||Ju.EMPTY_NODE;return o.apply(s)}return null}o=this.visibleWrites_.getCompleteNode(e);if(null!=o)return o;o=this.visibleWrites_.childCompoundWrite(e);if(o.isEmpty())return t;if(null!=t||o.hasCompleteWrite(Da.Empty)){var s=t||Ju.EMPTY_NODE;return o.apply(s)}return null},wh.prototype.calcCompleteEventChildren=function(t,e){var n=Ju.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Ru,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Ru,function(t,e){e=i.childCompoundWrite(new Da(t)).apply(e);n=n.updateImmediateChild(t,e)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},wh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Oo(n||r,"Either existingEventSnap or existingServerSnap must exist");t=t.child(e);if(this.visibleWrites_.hasCompleteWrite(t))return null;t=this.visibleWrites_.childCompoundWrite(t);return t.isEmpty()?r.getChild(e):t.apply(r.getChild(e))},wh.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),t=this.visibleWrites_.getCompleteNode(r);return null!=t?t:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},wh.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},wh.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),t=a.getCompleteNode(Da.Empty);if(null!=t)s=t;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),l=h.getNext();l&&u.length<r;)0!==c(l,n)&&u.push(l),l=h.getNext();return u},wh.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},wh.prototype.resetTree_=function(){this.visibleWrites_=wh.layerTree_(this.allWrites_,wh.DefaultFilter_,Da.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},wh.DefaultFilter_=function(t){return t.visible},wh.layerTree_=function(t,e,n){for(var r=mh.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=Da.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=Da.relativePath(s,n),r=r.addWrite(Da.Empty,o.snap.getChild(a)));else{if(!o.children)throw Ro("WriteRecord should have .snap or .children");n.contains(s)?(a=Da.relativePath(n,s),r=r.addWrites(a,o.children)):s.contains(n)&&((a=Da.relativePath(s,n)).isEmpty()?r=r.addWrites(Da.Empty,o.children):(o=ns(o.children,a.getFront()))&&(a=o.getChild(a.popFront()),r=r.addWrite(Da.Empty,a)))}}}return r},wh);function wh(){this.visibleWrites_=mh.Empty,this.allWrites_=[],this.lastWriteId_=-1}var Eh=(Ih.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},Ih.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},Ih.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},Ih.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},Ih.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},Ih.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},Ih.prototype.child=function(t){return new Ih(this.treePath_.child(t),this.writeTree_)},Ih);function Ih(t,e){this.treePath_=t,this.writeTree_=e}var Th=(Sh.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Kc(Lc.User,t,e)):[]},Sh.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);e=Vc.fromObject(e);return this.applyOperationToSyncPoints_(new zc(Lc.User,t,e))},Sh.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Vc.Empty;return null!=n.snap?r=r.set(Da.Empty,!0):Sa(n.children,function(t,e){r=r.set(new Da(t),e)}),this.applyOperationToSyncPoints_(new Uc(n.path,r,e))}return[]},Sh.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Kc(Lc.Server,t,e))},Sh.prototype.applyServerMerge=function(t,e){e=Vc.fromObject(e);return this.applyOperationToSyncPoints_(new zc(Lc.Server,t,e))},Sh.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Bc(Lc.Server,t))},Sh.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];n=Sh.parseQueryKey_(r),r=n.path,n=n.queryId,t=Da.relativePath(r,t),e=new Kc(Lc.forServerTaggedQuery(n),t,e);return this.applyTaggedOperation_(r,e)},Sh.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){n=Sh.parseQueryKey_(r),r=n.path,n=n.queryId,t=Da.relativePath(r,t),e=Vc.fromObject(e),e=new zc(Lc.forServerTaggedQuery(n),t,e);return this.applyTaggedOperation_(r,e)}return[]},Sh.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){e=Sh.parseQueryKey_(n),n=e.path,e=e.queryId,t=Da.relativePath(n,t),t=new Bc(Lc.forServerTaggedQuery(e),t);return this.applyTaggedOperation_(n,t)}return[]},Sh.prototype.addEventRegistration=function(t,e){var n=t.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,function(t,e){t=Da.relativePath(t,n);r=r||e.getCompleteServerCache(t),i=i||e.hasCompleteView()});var o=this.syncPointTree_.get(n);o?(i=i||o.hasCompleteView(),r=r||o.getCompleteServerCache(Da.Empty)):(o=new yh,this.syncPointTree_=this.syncPointTree_.set(n,o)),null!=r?c=!0:(c=!1,r=Ju.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild(function(t,e){e=e.getCompleteServerCache(Da.Empty);e&&(r=r.updateImmediateChild(t,e))}));var s,a=o.viewExistsForQuery(t);a||t.getQueryParams().loadsAllData()||(u=Sh.makeQueryKey_(t),Oo(!this.queryToTagMap.has(u),"View does not exist, but we have a tag"),s=Sh.getNextQueryTag_(),this.queryToTagMap.set(u,s),this.tagToQueryMap.set(s,u));var u=this.pendingWriteTree_.childWrites(n),c=o.addEventRegistration(t,e,u,r,c);return a||i||(o=o.viewForQuery(t),c=c.concat(this.setupListener_(t,o))),c},Sh.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));e=a.removed,s=a.events,o=-1!==e.findIndex(function(t){return t.getQueryParams().loadsAllData()}),a=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(o&&!a){i=this.syncPointTree_.subtree(i);if(!i.isEmpty())for(var u=this.collectDistinctViewsForSubTree_(i),c=0;c<u.length;++c){var h=u[c],l=h.getQuery(),h=this.createListenerForView_(h);this.listenProvider_.startListening(Sh.queryForListening_(l),this.tagForQuery_(l),h.hashFn,h.onComplete)}}!a&&0<e.length&&!n&&(o?this.listenProvider_.stopListening(Sh.queryForListening_(t),null):e.forEach(function(t){var e=r.queryToTagMap.get(Sh.makeQueryKey_(t));r.listenProvider_.stopListening(Sh.queryForListening_(t),e)})),this.removeTags_(e)}return s},Sh.prototype.calcCompleteEventCache=function(n,t){var e=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(n,function(t,e){t=Da.relativePath(t,n),t=e.getCompleteServerCache(t);if(t)return t});return e.calcCompleteEventCache(n,r,t,!0)},Sh.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Sa(n,function(t,e){r=r.concat(e)}),r})},Sh.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r=t[e];r.getQueryParams().loadsAllData()||(n=Sh.makeQueryKey_(r),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},Sh.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},Sh.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),e=this.createListenerForView_(e),e=this.listenProvider_.startListening(Sh.queryForListening_(t),r,e.hashFn,e.onComplete),n=this.syncPointTree_.subtree(n);if(r)Oo(!n.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var i=n.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),Sa(n,function(t,e){r=r.concat(e)}),r}),o=0;o<i.length;++o){var s=i[o];this.listenProvider_.stopListening(Sh.queryForListening_(s),this.tagForQuery_(s))}return e},Sh.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Ju.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);t=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");n=new Error(t+" at "+e.path.toString()+": "+n);return n.code=t.toUpperCase(),n}(t,n);return e.removeEventRegistration(n,null,t)}}},Sh.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},Sh.parseQueryKey_=function(t){var e=t.indexOf("$");return Oo(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Da(t.substr(0,e))}},Sh.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},Sh.prototype.tagForQuery_=function(t){t=Sh.makeQueryKey_(t);return this.queryToTagMap.get(t)},Sh.getNextQueryTag_=function(){return Sh.nextQueryTag_++},Sh.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Oo(n,"Missing sync point for query tag that we're tracking");t=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,t,null)},Sh.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Da.Empty))},Sh.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Da.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Da.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);return u&&a&&(e=n?n.getImmediateChild(s):null,s=r.child(s),o=o.concat(this.applyOperationHelper_(a,u,e,s))),i&&(o=o.concat(i.applyOperation(t,r,n))),o},Sh.prototype.applyOperationDescendantsHelper_=function(i,t,o,s){var a=this,e=t.get(Da.Empty);null==o&&null!=e&&(o=e.getCompleteServerCache(Da.Empty));var u=[];return t.children.inorderTraversal(function(t,e){var n=o?o.getImmediateChild(t):null,r=s.child(t),t=i.operationForChild(t);t&&(u=u.concat(a.applyOperationDescendantsHelper_(t,e,n,r)))}),e&&(u=u.concat(e.applyOperation(i,s,o))),u},Sh.nextQueryTag_=1,Sh);function Sh(t){this.listenProvider_=t,this.syncPointTree_=Vc.Empty,this.pendingWriteTree_=new _h,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var Ch=(Nh.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Nh.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Nh);function Nh(){this.rootNode_=Ju.EMPTY_NODE}var Ah=(kh.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),es(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},kh.prototype.get=function(){return Do(this.counters_)},kh);function kh(){this.counters_={}}var Oh=(Rh.getCollection=function(t){t=t.toString();return this.collections_[t]||(this.collections_[t]=new Ah),this.collections_[t]},Rh.getOrCreateReporter=function(t,e){t=t.toString();return this.reporters_[t]||(this.reporters_[t]=e()),this.reporters_[t]},Rh.collections_={},Rh.reporters_={},Rh);function Rh(){}var Ph=(Dh.prototype.get=function(){var t=this.collection_.get(),n=_o({},t);return this.last_&&Sa(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Dh);function Dh(t){this.collection_=t,this.last_=null}var xh=(Lh.prototype.includeStat=function(t){this.statsToReport_[t]=!0},Lh.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;Sa(t,function(t,e){0<e&&es(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),Aa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Lh);function Lh(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ph(t);t=1e4+2e4*Math.random();Aa(this.reportStats_.bind(this),Math.floor(t))}var Mh=(Fh.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Uh(i)),e.add(r)}e&&this.eventLists_.push(e)},Fh.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},Fh.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},Fh.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Fh);function Fh(){this.eventLists_=[],this.recursionDepth_=0}var Uh=(jh.prototype.add=function(t){this.events_.push(t)},jh.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),ga&&ba("event: "+n.toString()),Na(e))}},jh.prototype.getPath=function(){return this.path_},jh);function jh(t){this.path_=t,this.events_=[]}Vh.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=So(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Vh.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});t=this.getInitialEvent(t);t&&e.apply(n,t)},Vh.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Vh.prototype.validateEventType_=function(e){Oo(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},dt=Vh;function Vh(t){this.allowedEvents_=t,this.listeners_={},Oo(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var qh,Bh=(bo(Hh,qh=dt),Hh.getInstance=function(){return new Hh},Hh.prototype.getInitialEvent=function(t){return Oo("visible"===t,"Unknown event type: "+t),[this.visible_]},Hh);function Hh(){var e,t,n=qh.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Kh,Wh=(bo(zh,Kh=dt),zh.getInstance=function(){return new zh},zh.prototype.getInitialEvent=function(t){return Oo("online"===t,"Unknown event type: "+t),[this.online_]},zh.prototype.currentlyOnline=function(){return this.online_},zh);function zh(){var t=Kh.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Uo()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Gh=(Qh.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Qh.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum];){if("break"===function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&Na(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}())break}},Qh);function Qh(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Yh="pLPCommand",Xh="pRTLPCB",Jh=($h.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Gh(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;s.isClosed_||(s.scriptTagHolder=new Zh(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=To(t,5),r=n[0],i=n[1],o=n[2];n[3],n[4];if(s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=To(t,2),r=n[0],n=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,n)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.hostname&&Fa.test(location.hostname)&&(t.r="f"),t=s.urlFn(t),s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},$h.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},$h.forceAllow=function(){$h.forceAllow_=!0},$h.forceDisallow=function(){$h.forceDisallow_=!0},$h.isAvailable=function(){return!!$h.forceAllow_||!($h.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},$h.prototype.markConnectionHealthy=function(){},$h.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},$h.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},$h.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},$h.prototype.send=function(t){t=Zo(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var t=function(t){t=No(t);return Po.encodeByteArray(t,!0)}(t),e=ha(t,1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},$h.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},$h.prototype.incrementIncomingBytes_=function(t){t=Zo(t).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},$h);function $h(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_a(t),this.stats_=Oh.getCollection(e),this.urlFn=function(t){return e.connectionURL(ja,t)}}var Zh=(tl.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ba("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},tl.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},tl.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},tl.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+e.length<=1870))break;var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},tl.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},tl.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);function r(){n.outstandingRequests.delete(e),n.newRequest_()}var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},tl.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){ba("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},tl);function tl(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=va(),window[Yh+this.uniqueCallbackIdentifier]=t,window[Xh+this.uniqueCallbackIdentifier]=e,this.myIFrame=tl.createIFrame_();e="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(e='<script>document.domain="'+document.domain+'";<\/script>');var i="<html><body>"+e+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){ba("frame writing exception"),t.stack&&ba(t.stack),ba(t)}}var el="";function nl(t){el=t}var rl=null;"undefined"!=typeof MozWebSocket?rl=MozWebSocket:"undefined"!=typeof WebSocket&&(rl=WebSocket);var il=(ol.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.hostname&&Fa.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(Ua,r)},ol.prototype.open=function(e,t){var n,r=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fa.set("previous_websocket_failure",!0);try{qo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new rl(this.connURL,[],n))}catch(t){this.log_("Error instantiating WebSocket.");e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");t=t.message||t.data;t&&r.log_(t),r.onClosed_()}},ol.prototype.start=function(){},ol.forceDisallow=function(){ol.forceDisallow_=!0},ol.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&((t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)),!e&&null!==rl&&!ol.forceDisallow_},ol.previouslyFailed=function(){return fa.isInMemoryStorage||!0===fa.get("previous_websocket_failure")},ol.prototype.markConnectionHealthy=function(){fa.remove("previous_websocket_failure")},ol.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=$o(t),this.onMessage(t))},ol.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},ol.prototype.extractFrameCount_=function(t){if(Oo(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},ol.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(t):null!==(t=this.extractFrameCount_(t))&&this.appendFrame_(t))},ol.prototype.send=function(t){this.resetKeepAlive();t=Zo(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=ha(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},ol.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},ol.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},ol.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},ol.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},ol.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},ol.responsesRequiredToBeHealthy=2,ol.healthyTimeout=3e4,ol);function ol(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_a(this.connId),this.stats_=Oh.getCollection(e),this.connURL=ol.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var sl=(Object.defineProperty(al,"ALL_TRANSPORTS",{get:function(){return[Jh,il]},enumerable:!1,configurable:!0}),al.prototype.initTransports_=function(t){var e,n,r=il&&il.isAvailable(),i=r&&!il.previouslyFailed();if(t.webSocketOnly&&(r||sa("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[il];else{var o=this.transports_=[];try{for(var s=Io(al.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},al.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},al.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},al);function al(t){this.initTransports_(t)}var ul=(cl.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(this.healthyTimeout_=Aa(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},cl.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},cl.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},cl.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},cl.prototype.sendRequest=function(t){t={t:"d",d:t};this.sendData_(t)},cl.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},cl.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},cl.prototype.onSecondaryMessageReceived_=function(t){var e=ca("t",t),t=ca("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},cl.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},cl.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},cl.prototype.onPrimaryMessageReceived_=function(t){var e=ca("t",t),t=ca("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},cl.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},cl.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},cl.prototype.onControl_=function(t){var e=ca("t",t);if("d"in t){t=t.d;if("h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?ia("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ia("Unknown control packet command: "+e)}},cl.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&sa("Protocol version mismatch detected"),this.tryStartUpgrade_())},cl.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},cl.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),Aa(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},cl.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},cl.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Aa(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},cl.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},cl.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},cl.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},cl.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},cl.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},cl.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},cl.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},cl);function cl(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_a("c:"+this.id+":"),this.transportManager_=new sl(e),this.log_("Connection created"),this.start_()}hl.prototype.put=function(t,e,n,r){},hl.prototype.merge=function(t,e,n,r){},hl.prototype.refreshAuthToken=function(t){},hl.prototype.onDisconnectPut=function(t,e,n){},hl.prototype.onDisconnectMerge=function(t,e,n){},hl.prototype.onDisconnectCancel=function(t,e){},hl.prototype.reportStats=function(t){},mu=hl;function hl(){}var ll,fl=1e3,pl=3e5,dl=(bo(vl,ll=mu),vl.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(Zo(e)),Oo(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},vl.prototype.get=function(t){var n=this,r=new Lo,i={p:t.path.toString(),q:t.queryObject()},e={action:"g",request:i,onComplete:function(t){var e=t.d;"ok"===t.s?(n.onDataUpdate_(i.p,e,!1,null),r.resolve(e)):r.reject(e)}};this.outstandingGets_.push(e),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=n.outstandingGets_[o];void 0!==t&&e===t&&(delete n.outstandingGets_[o],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),n.log_("get "+o+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),r.promise},vl.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Oo(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Oo(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");n={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},vl.prototype.sendGet_=function(e){var n=this,r=this.outstandingGets_[e];this.sendRequest("g",r.request,function(t){delete n.outstandingGets_[e],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),r.onComplete&&r.onComplete(t)})},vl.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;vl.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},vl.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&es(t,"w")&&(t=ns(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',e=e.path.toString(),sa("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},vl.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},vl.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){t=ts(t).claims;return"object"==typeof t&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},vl.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=function(t){t=ts(t).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(n=this.authToken_)?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},vl.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Oo(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},vl.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);t={p:t};r&&(t.q=n,t.t=r),this.sendRequest("n",t)},vl.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},vl.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},vl.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},vl.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n};this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},vl.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},vl.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},vl.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n};void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++;r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},vl.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},vl.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},vl.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Zo(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},vl.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):ia("Unrecognized action received from server: "+Zo(t)+"\nAre you using the latest client?")},vl.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},vl.prototype.scheduleConnect_=function(t){var e=this;Oo(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},vl.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},vl.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=fl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},vl.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=fl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},vl.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t,h=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+vl.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){Oo(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?ba("getToken() completed but was canceled"):(ba("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new ul(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){sa(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(h.repoInfo_.nodeAdmin&&sa(t),c())}))},vl.prototype.interrupt=function(t){ba("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},vl.prototype.resume=function(t){ba("Resuming connection for reason: "+t),delete this.interruptReasons_[t],rs(this.interruptReasons_)&&(this.reconnectDelay_=fl,this.realtime_||this.scheduleConnect_(0))},vl.prototype.handleTimestamp_=function(t){t-=(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},vl.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},vl.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return Ta(t)}).join("$"):"default",e=this.removeListen_(t,e);e&&e.onComplete&&e.onComplete("permission_denied")},vl.prototype.removeListen_=function(t,e){var n,r=new Da(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},vl.prototype.onAuthRevoked_=function(t,e){ba("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},vl.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},vl.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=Io(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Io(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},vl.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+el.replace(/\./g,"-")]=1,Uo()?t["framework.cordova"]=1:Vo()&&(t["framework.reactnative"]=1),this.reportStats(t)},vl.prototype.shouldReconnect_=function(){var t=Wh.getInstance().currentlyOnline();return rs(this.interruptReasons_)&&t},vl.nextPersistentConnectionId_=0,vl.nextConnectionId_=0,vl);function vl(t,e,n,r,i,o,s){var a=ll.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=vl.nextPersistentConnectionId_++,a.log_=_a("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingGets_=[],a.outstandingPutCount_=0,a.outstandingGetCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=fl,a.maxReconnectDelay_=pl,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!qo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Bh.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&Wh.getInstance().on("online",a.onOnline_,a),a}var yl,gl=(bo(ml,yl=mu),ml.prototype.reportStats=function(t){throw new Error("Method not implemented.")},ml.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Oo(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},ml.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=ml.getListenId_(t,n),a={};this.listens_[s]=a;t=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(o+".json",t,function(t,e){404===t&&(t=e=null),null===t&&i.onDataUpdate_(o,e,!1,n),ns(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},ml.prototype.unlisten=function(t,e){e=ml.getListenId_(t,e);delete this.listens_[e]},ml.prototype.get=function(t){var n=this,e=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new Lo;return this.restRequest_(r+".json",e,function(t,e){404===t&&(t=e=null),null===t?(n.onDataUpdate_(r,e,!1,null),i.resolve(e)):i.reject(new Error(e))}),i.promise},ml.prototype.refreshAuthToken=function(t){},ml.prototype.restRequest_=function(r,i,o){var s=this;void 0===i&&(i={}),i.format="export",this.authTokenProvider_.getToken(!1).then(function(t){t=t&&t.accessToken;t&&(i.auth=t);var e=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+r+"?ns="+s.repoInfo_.namespace+function(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}(i);s.log_("Sending REST request for "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(o&&4===n.readyState){s.log_("REST Response for "+e+" received. status:",n.status,"response:",n.responseText);var t=null;if(200<=n.status&&n.status<300){try{t=$o(n.responseText)}catch(t){sa("Failed to parse JSON response for "+e+": "+n.responseText)}o(null,t)}else 401!==n.status&&404!==n.status&&sa("Got unsuccessful REST response for "+e+" Status: "+n.status),o(n.status);o=null}},n.open("GET",e,!0),n.send()})},ml);function ml(t,e,n){var r=yl.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=_a("p:rest:"),r.listens_={},r}var bl="repo_interrupt",_l=(wl.prototype.start=function(){var s=this;if(this.stats_=Oh.getCollection(this.repoInfo_),this.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new gl(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var t=this.app.options.databaseAuthVariableOverride;if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Zo(t)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new dl(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,t),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=Oh.getOrCreateReporter(this.repoInfo_,function(){return new xh(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new Ch,this.infoSyncTree_=new Th({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Th({startListening:function(n,t,e,r){return s.server_.listen(n,e,t,function(t,e){e=r(t,e);s.eventQueue_.raiseEventsForChangedPath(n.path,e)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})},wl.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},wl.prototype.name=function(){return this.repoInfo_.namespace},wl.prototype.serverTime=function(){var t=this.infoData_.getNode(new Da(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},wl.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},wl.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Da(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s=[],t=i;0<(s=r?n?(o=is(e,function(t){return rc(t)}),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(o=rc(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,o,r)):n?(n=is(e,function(t){return rc(t)}),this.serverSyncTree_.applyServerMerge(i,n)):(e=rc(e),this.serverSyncTree_.applyServerOverwrite(i,e))).length&&(t=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(t,s)},wl.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},wl.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},wl.prototype.onServerInfoUpdate_=function(t){var n=this;Sa(t,function(t,e){n.updateInfo_(t,e)})},wl.prototype.updateInfo_=function(t,e){t=new Da("/.info/"+t),e=rc(e);this.infoData_.updateSnapshot(t,e);e=this.infoSyncTree_.applyServerOverwrite(t,e);this.eventQueue_.raiseEventsForChangedPath(t,e)},wl.prototype.getNextWriteId_=function(){return this.nextWriteId_++},wl.prototype.getValue=function(n){var r=this,t=this.serverSyncTree_.calcCompleteEventCache(n.path);return t.isEmpty()?this.server_.get(n).then(function(t){var e=rc(t),t=r.serverSyncTree_.applyServerOverwrite(n.path,e);return r.eventQueue_.raiseEventsAtPath(n.path,t),Promise.resolve(new cc(e,n.getRef(),n.getQueryParams().getIndex()))},function(t){return r.log_("get for query "+Zo(n)+" failed: "+t),Promise.reject(new Error(t))}):Promise.resolve(new cc(t,n.getRef(),n.getQueryParams().getIndex()))},wl.prototype.setWithPriority=function(r,t,e,i){var o=this;this.log_("set",{path:r.toString(),value:t,priority:e});var n=this.generateServerValues(),t=rc(t,e),e=this.serverSyncTree_.calcCompleteEventCache(r),n=Nc(t,e,n),s=this.getNextWriteId_(),n=this.serverSyncTree_.applyUserOverwrite(r,n,s,!0);this.eventQueue_.queueEvents(n),this.server_.put(r.toString(),t.val(!0),function(t,e){var n="ok"===t;n||sa("set at "+r+" failed: "+t);n=o.serverSyncTree_.ackUserWrite(s,!n);o.eventQueue_.raiseEventsForChangedPath(r,n),o.callOnCompleteCallback(i,t,e)});t=this.abortTransactions_(r);this.rerunTransactions_(t),this.eventQueue_.raiseEventsForChangedPath(t,[])},wl.prototype.update=function(i,t,o){var s=this;this.log_("update",{path:i.toString(),value:t});var a,e,n=!0,r=this.generateServerValues(),u={};Sa(t,function(t,e){n=!1,u[t]=Cc(i.child(t),rc(e),s.serverSyncTree_,r)}),n?(ba("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(o,"ok")):(a=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(i,u,a),this.eventQueue_.queueEvents(e),this.server_.merge(i.toString(),t,function(t,e){var n="ok"===t;n||sa("update at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(a,!n),n=0<r.length?s.rerunTransactions_(i):i;s.eventQueue_.raiseEventsForChangedPath(n,r),s.callOnCompleteCallback(o,t,e)}),Sa(t,function(t){t=s.abortTransactions_(i.child(t));s.rerunTransactions_(t)}),this.eventQueue_.raiseEventsForChangedPath(i,[]))},wl.prototype.runOnDisconnectEvents_=function(){var n=this;this.log_("onDisconnectEvents");var r=this.generateServerValues(),i=new Dc;this.onDisconnect_.forEachTree(Da.Empty,function(t,e){e=Cc(t,e,n.serverSyncTree_,r);i.remember(t,e)});var o=[];i.forEachTree(Da.Empty,function(t,e){o=o.concat(n.serverSyncTree_.applyServerOverwrite(t,e));t=n.abortTransactions_(t);n.rerunTransactions_(t)}),this.onDisconnect_=new Dc,this.eventQueue_.raiseEventsForChangedPath(Da.Empty,o)},wl.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},wl.prototype.onDisconnectSet=function(n,t,r){var i=this,o=rc(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},wl.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=rc(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},wl.prototype.onDisconnectUpdate=function(n,r,i){var o=this;if(rs(r))return ba("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(n.toString(),r,function(t,e){"ok"===t&&Sa(r,function(t,e){e=rc(e);o.onDisconnect_.remember(n.child(t),e)}),o.callOnCompleteCallback(i,t,e)})},wl.prototype.addEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).addEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,e)},wl.prototype.removeEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).removeEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,e)},wl.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(bl)},wl.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(bl)},wl.prototype.stats=function(t){var i;void 0===t&&(t=!1),"undefined"!=typeof console&&(t=t?(this.statsListener_||(this.statsListener_=new Ph(this.stats_)),this.statsListener_.get()):this.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),Sa(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},wl.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},wl.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),ba.apply(void 0,So([n],t))},wl.prototype.callOnCompleteCallback=function(n,r,i){n&&Na(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})},Object.defineProperty(wl.prototype,"database",{get:function(){return this.__database||(this.__database=new Bl(this))},enumerable:!1,configurable:!0}),wl);function wl(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Mh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Dc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}var El=(Il.prototype.getStartPost=function(){return this.startPost_},Il.prototype.getEndPost=function(){return this.endPost_},Il.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Il.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new pu(e,n))||(n=Ju.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Il.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Ju.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(Ju.EMPTY_NODE),i=this;return e.forEachChild(Ru,function(t,e){i.matches(new pu(t,e))||(r=r.updateImmediateChild(t,Ju.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},Il.prototype.updatePriority=function(t,e){return t},Il.prototype.filtersNodes=function(){return!0},Il.prototype.getIndexedFilter=function(){return this.indexedFilter_},Il.prototype.getIndex=function(){return this.index_},Il.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Il.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Il);function Il(t){this.indexedFilter_=new th(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Il.getStartPost_(t),this.endPost_=Il.getEndPost_(t)}var Tl=(Sl.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new pu(e,n))||(n=Ju.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Sl.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Ju.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Ju.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Ju.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();){s=i.getNext();!l&&h(u,s)<=0&&(l=!0),l&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,Ju.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Sl.prototype.updatePriority=function(t,e){return t},Sl.prototype.filtersNodes=function(){return!0},Sl.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Sl.prototype.getIndex=function(){return this.index_},Sl.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;Oo(a.numChildren()===this.limit_,"");var u=new pu(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange($c.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange($c.childRemovedChange(e,l));l=a.updateImmediateChild(e,Ju.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange($c.childAddedChange(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange($c.childRemovedChange(c.name,c.node)),i.trackChildChange($c.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Ju.EMPTY_NODE)):t},Sl);function Sl(t){this.rangedFilter_=new El(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Cl=(Nl.prototype.hasStart=function(){return this.startSet_},Nl.prototype.hasStartAfter=function(){return this.startAfterSet_},Nl.prototype.hasEndBefore=function(){return this.endBeforeSet_},Nl.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Nl.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Nl.prototype.getIndexStartValue=function(){return Oo(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Nl.prototype.getIndexStartName=function(){return Oo(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wa},Nl.prototype.hasEnd=function(){return this.endSet_},Nl.prototype.getIndexEndValue=function(){return Oo(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Nl.prototype.getIndexEndName=function(){return Oo(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ea},Nl.prototype.hasLimit=function(){return this.limitSet_},Nl.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Nl.prototype.getLimit=function(){return Oo(this.limitSet_,"Only valid if limit has been set"),this.limit_},Nl.prototype.getIndex=function(){return this.index_},Nl.prototype.copy_=function(){var t=new Nl;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Nl.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Nl.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Nl.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Nl.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Nl.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Nl.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Nl.prototype.startAfter=function(t,e){e=null==e?Ea:function(t){if(t===""+Ra)return"-";var e=Pa(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;if(-1===i)return Ea;e=n[i],e=lu.charAt(lu.indexOf(e)+1);return n[i]=e,n.slice(0,i+1).join("")}(e),e=this.startAt(t,e);return e.startAfterSet_=!0,e},Nl.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Nl.prototype.endBefore=function(t,e){e=null==e?wa:function(t){if(t===""+Oa)return wa;var e=Pa(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+Ra:(delete n[n.length-1],n.join("")):(n[n.length-1]=lu.charAt(lu.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}(e),e=this.endAt(t,e);return e.endBeforeSet_=!0,e},Nl.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Nl.prototype.getQueryObject=function(){var t,e=Nl.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==Ru&&(n[e.INDEX]=this.index_.toString()),n},Nl.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Nl.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ru},Nl.prototype.getNodeFilter=function(){return this.loadsAllData()?new th(this.getIndex()):new(this.hasLimit()?Tl:El)(this)},Nl.prototype.toRestQueryStringParameters=function(){var t,e=Nl.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Ru?e.PRIORITY_INDEX:this.index_===sc?e.VALUE_INDEX:this.index_===wu?e.KEY_INDEX:(Oo(this.index_ instanceof ac,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=Zo(t),this.startSet_&&(n[e.START_AT]=Zo(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+Zo(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=Zo(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+Zo(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Nl.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Nl.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Nl.DEFAULT=new Nl,Nl);function Nl(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ru}var Al,kl=(bo(Ol,Al=_c),Ol.prototype.getKey=function(){return ls("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Ol.prototype.child=function(t){var e,n,r,i;return ls("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Da||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),Ja(e,n,r,i)):Ja("Reference.child",1,t,!1)),new Ol(this.repo,this.path.child(t))},Ol.prototype.getParent=function(){ls("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Ol(this.repo,t)},Ol.prototype.getRoot=function(){ls("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Ol.prototype.databaseProp=function(){return this.repo.database},Ol.prototype.set=function(t,e){ls("Reference.set",1,2,arguments.length),$a("Reference.set",this.path),za("Reference.set",1,t,this.path,!1),ps("Reference.set",2,e,!0);var n=new Lo;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Ol.prototype.update=function(t,e){if(ls("Reference.update",1,2,arguments.length),$a("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,sa("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ga("Reference.update",1,t,this.path,!1),ps("Reference.update",2,e,!0);var i=new Lo;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Ol.prototype.setWithPriority=function(t,e,n){if(ls("Reference.setWithPriority",2,3,arguments.length),$a("Reference.setWithPriority",this.path),za("Reference.setWithPriority",1,t,this.path,!1),Qa("Reference.setWithPriority",2,e,!1),ps("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Lo;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Ol.prototype.remove=function(t){return ls("Reference.remove",0,1,arguments.length),$a("Reference.remove",this.path),ps("Reference.remove",1,t,!0),this.set(null,t)},Ol.prototype.transaction=function(t,r,e){if(ls("Reference.transaction",1,3,arguments.length),$a("Reference.transaction",this.path),ps("Reference.transaction",1,t,!1),ps("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(fs(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new Lo;"function"==typeof r&&i.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new au(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Ol.prototype.setPriority=function(t,e){ls("Reference.setPriority",1,2,arguments.length),$a("Reference.setPriority",this.path),Qa("Reference.setPriority",1,t,!1),ps("Reference.setPriority",2,e,!0);var n=new Lo;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Ol.prototype.push=function(t,e){ls("Reference.push",0,2,arguments.length),$a("Reference.push",this.path),za("Reference.push",1,t,this.path,!0),ps("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=fu(n),n=this.child(r),i=this.child(r),t=null!=t?n.set(t,e).then(function(){return i}):Promise.resolve(i);return n.then=t.then.bind(t),n.catch=t.then.bind(t,void 0),"function"==typeof e&&t.catch(function(){}),n},Ol.prototype.onDisconnect=function(){return $a("Reference.onDisconnect",this.path),new ou(this.repo,this.path)},Object.defineProperty(Ol.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(Ol.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Ol.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Ol.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Ol);function Ol(t,e){if(!(t instanceof _l))throw new Error("new Reference() no longer supported - use app.database().");return Al.call(this,t,e,Cl.DEFAULT,!1)||this}_c.__referenceConstructor=kl,yh.__referenceConstructor=kl;var Rl,Pl=function(){this.children={},this.childCount=0,this.value=null},Dl=(xl.prototype.subTree=function(t){for(var e=t instanceof Da?t:new Da(t),n=this,r=e.getFront();null!==r;)n=new xl(r,n,ns(n.node_.children,r)||new Pl),r=(e=e.popFront()).getFront();return n},xl.prototype.getValue=function(){return this.node_.value},xl.prototype.setValue=function(t){Oo(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},xl.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},xl.prototype.hasChildren=function(){return 0<this.node_.childCount},xl.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},xl.prototype.forEachChild=function(n){var r=this;Sa(this.node_.children,function(t,e){n(new xl(t,r,e))})},xl.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},xl.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},xl.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},xl.prototype.path=function(){return new Da(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},xl.prototype.name=function(){return this.name_},xl.prototype.parent=function(){return this.parent_},xl.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},xl.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=es(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},xl);function xl(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Pl),this.name_=t,this.parent_=e,this.node_=n}(vt=Rl=Rl||{})[vt.RUN=0]="RUN",vt[vt.SENT=1]="SENT",vt[vt.COMPLETED=2]="COMPLETED",vt[vt.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",vt[vt.NEEDS_ABORT=4]="NEEDS_ABORT",_l.MAX_TRANSACTION_RETRIES_=25,_l.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Dl},_l.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new kl(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:va(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},e=this.getLatestState_(t);s.currentInputSnapshot=e;var a,n=s.update(e.val());void 0===n?(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&(a=new cc(s.currentInputSnapshot,new kl(this,s.path),Ru),s.onComplete(null,!1,a))):(iu("transaction failed: Data returned ",n,s.path),s.status=Rl.RUN,(a=(r=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(s),r.setValue(a),r=void 0,"object"==typeof n&&null!==n&&es(n,".priority")?(r=ns(n,".priority"),Oo(Wa(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):r=(this.serverSyncTree_.calcCompleteEventCache(t)||Ju.EMPTY_NODE).getPriority().val(),a=this.generateServerValues(),r=rc(n,r),a=Nc(r,e,a),s.currentOutputSnapshotRaw=r,s.currentOutputSnapshotResolved=a,s.currentWriteId=this.getNextWriteId_(),s=this.serverSyncTree_.applyUserOverwrite(t,a,s.currentWriteId,s.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,s),this.sendReadyTransactions_())},_l.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Ju.EMPTY_NODE},_l.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),Oo(0<e.length,"Sending zero length transaction queue"),e.every(function(t){return t.status===Rl.RUN})&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild(function(t){n.sendReadyTransactions_(t)})},_l.prototype.sendTransactionQueue_=function(s,a){for(var u=this,t=a.map(function(t){return t.currentWriteId}),e=this.getLatestState_(s,t),n=e,t=e.hash(),r=0;r<a.length;r++){var i=a[r];Oo(i.status===Rl.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=Rl.SENT,i.retryCount++;var o=Da.relativePath(s,i.path),n=n.updateChild(o,i.currentOutputSnapshotRaw)}var e=n.val(!0),c=s;this.server_.put(c.toString(),e,function(t){u.log_("transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i=[],o=0;o<a.length;o++){a[o].status=Rl.COMPLETED,e=e.concat(u.serverSyncTree_.ackUserWrite(a[o].currentWriteId)),a[o].onComplete&&(n=a[o].currentOutputSnapshotResolved,r=new kl(u,a[o].path),r=new cc(n,r,Ru),i.push(a[o].onComplete.bind(null,null,!0,r))),a[o].unwatcher()}u.pruneCompletedTransactionsBelowNode_(u.transactionQueueTree_.subTree(s)),u.sendReadyTransactions_(),u.eventQueue_.raiseEventsForChangedPath(s,e);for(o=0;o<i.length;o++)Na(i[o])}else{if("datastale"===t)for(o=0;o<a.length;o++)a[o].status===Rl.SENT_NEEDS_ABORT?a[o].status=Rl.NEEDS_ABORT:a[o].status=Rl.RUN;else{sa("transaction at "+c.toString()+" failed: "+t);for(o=0;o<a.length;o++)a[o].status=Rl.NEEDS_ABORT,a[o].abortReason=t}u.rerunTransactions_(s)}},t)},_l.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),t=e.path(),e=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(e,t),t},_l.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===Rl.RUN}).map(function(t){return t.currentWriteId}),o=0;o<t.length;o++){var s,a,u,c=t[o],h=Da.relativePath(e,c.path),l=!1,f=void 0;Oo(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===Rl.NEEDS_ABORT?(l=!0,f=c.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):c.status===Rl.RUN&&(r=c.retryCount>=_l.MAX_TRANSACTION_RETRIES_?(l=!0,f="maxretry",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):(s=this.getLatestState_(c.path,i),c.currentInputSnapshot=s,void 0!==(u=t[o].update(s.val()))?(iu("transaction failed: Data returned ",u,c.path),a=rc(u),"object"==typeof u&&null!=u&&es(u,".priority")||(a=a.updatePriority(s.getPriority())),h=c.currentWriteId,u=this.generateServerValues(),u=Nc(a,s,u),c.currentOutputSnapshotRaw=a,c.currentOutputSnapshotResolved=u,c.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(h),1),(r=r.concat(this.serverSyncTree_.applyUserOverwrite(c.path,u,c.currentWriteId,c.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(h,!0))):(l=!0,f="nodata",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],l&&(t[o].status=Rl.COMPLETED,c=t[o].unwatcher,setTimeout(c,Math.floor(0)),t[o].onComplete&&("nodata"===f?(l=new kl(this,t[o].path),c=t[o].currentInputSnapshot,l=new cc(c,l,Ru),n.push(t[o].onComplete.bind(null,null,!1,l))):n.push(t[o].onComplete.bind(null,new Error(f),!1,null))))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(o=0;o<n.length;o++)Na(n[o]);this.sendReadyTransactions_()}},_l.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},_l.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},_l.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},_l.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Rl.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},_l.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),t=this.transactionQueueTree_.subTree(t);return t.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(t),t.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},_l.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++){e[o].status===Rl.SENT_NEEDS_ABORT||(e[o].status===Rl.SENT?(Oo(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Rl.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Oo(e[o].status===Rl.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)Na(n[o])}};var Ll=(Ml.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(ba("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},Ml.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},Ml.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},Ml.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',sa(t)},Ml);function Ml(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Fl=(Ul.prototype.getToken=function(t){return Promise.resolve({accessToken:Ul.EMULATOR_AUTH_TOKEN})},Ul.prototype.addTokenChangeListener=function(t){t(Ul.EMULATOR_AUTH_TOKEN)},Ul.prototype.removeTokenChangeListener=function(t){},Ul.prototype.notifyForInvalidToken=function(){},Ul.EMULATOR_AUTH_TOKEN="owner",Ul);function Ul(){}var jl,Vl=(ql.getInstance=function(){return jl=jl||new ql},ql.prototype.interrupt=function(){var e,t,n,r;try{for(var i=Io(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Io(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},ql.prototype.resume=function(){var e,t,n,r;try{for(var i=Io(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Io(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},ql.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Va(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Fl)},ql.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||oa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ba("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Ba(i,r),a=s.repoInfo,n=void 0;"undefined"!=typeof process&&(n=process.env.FIREBASE_DATABASE_EMULATOR_HOST),n?(o=!0,i="http://"+n+"?ns="+a.namespace,a=(s=Ba(i,r)).repoInfo):o=!s.repoInfo.secure;e=r&&o?new Fl:new Ll(t,e);return Za("Invalid Firebase Database URL",1,s),s.path.isEmpty()||oa("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,e).database},ql.prototype.deleteRepo=function(t){var e=ns(this.repos_,t.app.name);e&&ns(e,t.key)===t||oa("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},ql.prototype.createRepo=function(t,e,n){var r=ns(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=ns(r,t.toURLString());return i&&oa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new _l(t,this.useRestClient_,e,n),r[t.toURLString()]=i},ql.prototype.forceRestClient=function(t){this.useRestClient_=t},ql);function ql(){this.repos_={},this.useRestClient_=!1}var Bl=(Object.defineProperty(Hl.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(Hl.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new kl(this.repo_,Da.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(Hl.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),Hl.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?oa("Cannot call useEmulator() after instance has already been initialized."):Vl.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},Hl.prototype.ref=function(t){return this.checkDeleted_("ref"),ls("database.ref",0,1,arguments.length),t instanceof kl?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},Hl.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),ls(e,1,1,arguments.length);var n=Ba(t,this.repo_.repoInfo_.nodeAdmin);Za(e,1,n);t=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||t.host===this.repo_.repoInfo_.host||oa(e+": Host name does not match the current database: (found "+t.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Hl.prototype.checkDeleted_=function(t){null===this.repoInternal_&&oa("Cannot call "+t+" on a deleted database.")},Hl.prototype.goOffline=function(){ls("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Hl.prototype.goOnline=function(){ls("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Hl.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},Hl);function Hl(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return wo(e,void 0,void 0,function(){return Eo(this,function(t){return this.checkDeleted_("delete"),Vl.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof _l||oa("Don't call new Database() directly - please use firebase.database().")}var Kl=Object.freeze({__proto__:null,forceLongPolling:function(){il.forceDisallow(),Jh.forceAllow()},forceWebSockets:function(){Jh.forceDisallow()},isWebSocketsAvailable:function(){return il.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return nl(r),(r=new Ts("auth-internal",new Cs("database-standalone"))).setComponent(new ws("auth-internal",function(){return i},"PRIVATE")),{instance:Vl.getInstance().databaseFromApp(e,r,n,t),namespace:o}}}),Gn=dl;dl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},dl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Wl,zl=Object.freeze({__proto__:null,DataConnection:Gn,RealTimeConnection:ul,hijackHash:function(i){var o=dl.prototype.put;return dl.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){dl.prototype.put=o}},ConnectionTarget:Va,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Vl.getInstance().forceRestClient(t)}}),Gl=Bl.ServerValue;nl((Wl=Xl).SDK_VERSION),Wl.INTERNAL.registerComponent(new ws("database",function(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return Vl.getInstance().databaseFromApp(n,t,e)},"PUBLIC").setServiceProps({Reference:kl,Query:_c,Database:Bl,DataSnapshot:cc,enableLogging:ra,INTERNAL:Kl,ServerValue:Gl,TEST_ACCESS:zl}).setMultipleInstances(!0)),Wl.registerVersion("@firebase/database","0.9.1-2021026232412");var Ql=function(t,e){return(Ql=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Yl(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var dt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Jl={},$l=dt||self;function Zl(){}function tf(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ef(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var nf="closure_uid_"+(1e9*Math.random()>>>0),rf=0;function of(t,e,n){return t.call.apply(t.bind,arguments)}function sf(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function af(t,e,n){return(af=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?of:sf).apply(null,arguments)}function uf(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function cf(){return Date.now()}function hf(t,o){function e(){}e.prototype=o.prototype,t.X=o.prototype,t.prototype=new e,(t.prototype.constructor=t).Kb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function lf(){this.j=this.j,this.i=this.i}lf.prototype.j=!1,lf.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,nf)&&t[nf]||(t[nf]=++rf))},lf.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var ff=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},pf=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function df(){return Array.prototype.concat.apply([],arguments)}function vf(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function yf(t){return/^[\s\xa0]*$/.test(t)}var gf,mf=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function bf(t,e){return-1!=t.indexOf(e)}function _f(t,e){return t<e?-1:e<t?1:0}t:{var wf=$l.navigator;if(wf){wf=wf.userAgent;if(wf){gf=wf;break t}}gf=""}function Ef(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function If(t){var e,n={};for(e in t)n[e]=t[e];return n}var Tf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sf(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Tf.length;i++)e=Tf[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Cf(t){return Cf[" "](t),t}Cf[" "]=Zl;var Nf,Af=bf(gf,"Opera"),kf=bf(gf,"Trident")||bf(gf,"MSIE"),Of=bf(gf,"Edge"),Rf=Of||kf,Pf=bf(gf,"Gecko")&&!(bf(gf.toLowerCase(),"webkit")&&!bf(gf,"Edge"))&&!(bf(gf,"Trident")||bf(gf,"MSIE"))&&!bf(gf,"Edge"),Df=bf(gf.toLowerCase(),"webkit")&&!bf(gf,"Edge");function xf(){var t=$l.document;return t?t.documentMode:void 0}t:{var Lf="",Mf=(Mf=gf,Pf?/rv:([^\);]+)(\)|;)/.exec(Mf):Of?/Edge\/([\d\.]+)/.exec(Mf):kf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Mf):Df?/WebKit\/(\S+)/.exec(Mf):Af?/(?:Version)[ \/]?(\S+)/.exec(Mf):void 0);if(Mf&&(Lf=Mf?Mf[1]:""),kf){Mf=xf();if(null!=Mf&&Mf>parseFloat(Lf)){Nf=String(Mf);break t}}Nf=Lf}var Ff={};function Uf(a){return t=a,e=function(){for(var t=0,e=mf(String(Nf)).split("."),n=mf(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=_f(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||_f(0==o[2].length,0==s[2].length)||_f(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Ff,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var jf=$l.document&&kf?xf()||(parseInt(Nf,10)||void 0):void 0,Vf=!kf||9<=Number(jf),qf=kf&&!Uf("9"),Bf=function(){if(!$l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{$l.addEventListener("test",Zl,e),$l.removeEventListener("test",Zl,e)}catch(t){}return t}();function Hf(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Kf(t,e){if(Hf.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Pf){t:{try{Cf(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Wf[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Hf.prototype.b=function(){this.defaultPrevented=!0},hf(Kf,Hf);var Wf={2:"touch",3:"pen",4:"mouse"};Kf.prototype.b=function(){Kf.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,qf)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var zf="closure_listenable_"+(1e6*Math.random()|0),Gf=0;function Qf(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Gf,this.Y=this.Z=!1}function Yf(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Xf(t){this.src=t,this.a={},this.b=0}function Jf(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=ff(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Yf(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function $f(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Xf.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=$f(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Qf(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Zf="closure_lm_"+(1e6*Math.random()|0),tp={};function ep(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=cp(r);return e&&e[zf]?e.wa(n,r,ef(i)?!!i.capture:!!i,o):np(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ep(t,e[o],n,r,i);return null}return n=cp(n),t&&t[zf]?t.va(e,n,ef(r)?!!r.capture:!!r,i):np(t,e,n,!1,r,i)}function np(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ef(i)?!!i.capture:!!i;if(s&&!Vf)return null;var a,u,c=ap(t);if(c||(t[Zf]=c=new Xf(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=sp,r=u=Vf?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Bf||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ip(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function rp(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[zf]?Jf(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ip(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ap(e))?(Jf(n,t),0==n.b&&(n.src=null,e[Zf]=null)):Yf(t)))}function ip(t){return t in tp?tp[t]:tp[t]="on"+t}function op(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&rp(t),n.call(r,e)}function sp(t,e){if(t.Y)return!0;if(Vf)return op(t,new Kf(e,this));if(!e)t:{e=["window","event"];for(var n=$l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return op(t,e=new Kf(e,this))}function ap(t){return(t=t[Zf])instanceof Xf?t:null}var up="__closure_events_fn_"+(1e9*Math.random()>>>0);function cp(e){return"function"==typeof e?e:(e[up]||(e[up]=function(t){return e.handleEvent(t)}),e[up])}function hp(){lf.call(this),this.c=new Xf(this),(this.J=this).C=null}function lp(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new Hf(e,t):e instanceof Hf?e.target=e.target||t:(s=e,Sf(e=new Hf(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=fp(o,r,!0,e)&&s;if(s=fp(o=e.a=t,r,!0,e)&&s,s=fp(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=fp(o=e.a=n[i],r,!1,e)&&s}function fp(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Jf(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}hf(hp,lf),hp.prototype[zf]=!0,(mu=hp.prototype).addEventListener=function(t,e,n,r){ep(this,t,e,n,r)},mu.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=ef(i)?!!i.capture:!!i,r=cp(r),e&&e[zf]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=$f(s=e.a[n],r,i,o))&&(Yf(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&ap(e))&&(n=e.a[n.toString()],e=-1,n&&(e=$f(n,r,i,o)),(r=-1<e?n[e]:null)&&rp(r))}(this,t,e,n,r)},mu.G=function(){if(hp.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Yf(n[r]);delete e.a[t],e.b--}}this.C=null},mu.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},mu.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var pp=$l.JSON.stringify;function dp(){this.b=this.a=null}var vp,yp=(gp.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new gp(function(){return new mp},function(t){t.reset()}));function gp(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function mp(){this.next=this.b=this.a=null}function bp(t,e){var n;vp||(n=$l.Promise.resolve(void 0),vp=function(){n.then(Ep)}),_p||(vp(),_p=!0),wp.add(t,e)}dp.prototype.add=function(t,e){var n=yp.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},mp.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var _p=!(mp.prototype.reset=function(){this.next=this.b=this.a=null}),wp=new dp;function Ep(){for(var t,e;n=e=void 0,n=null,(e=wp).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){$l.setTimeout(function(){throw t},0)}(t)}var n=yp;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}_p=!1}function Ip(t,e){hp.call(this),this.b=t||1,this.a=e||$l,this.f=af(this.Za,this),this.g=cf()}function Tp(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Sp(t,e,n){if("function"==typeof t)n&&(t=af(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=af(t.handleEvent,t)}return 2147483647<Number(e)?-1:$l.setTimeout(t,e||0)}hf(Ip,hp),(mu=Ip.prototype).aa=!1,mu.M=null,mu.Za=function(){var t;this.aa&&(0<(t=cf()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),lp(this,"tick"),this.aa&&(Tp(this),this.start())))},mu.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=cf())},mu.G=function(){Ip.X.G.call(this),Tp(this),delete this.a};var Cp,Np,Ap,kp=(Ql(Np=Rp,Ap=Cp=lf),Np.prototype=null===Ap?Object.create(Ap):(Op.prototype=Ap.prototype,new Op),Rp.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=Sp(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},Rp.prototype.G=function(){Cp.prototype.G.call(this),this.a&&($l.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},Rp);function Op(){this.constructor=Np}function Rp(t,e){var n=Cp.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function Pp(t){lf.call(this),this.b=t,this.a={}}hf(Pp,lf);var Dp=[];function xp(t,e,n,r){Array.isArray(n)||(n&&(Dp[0]=n.toString()),n=Dp);for(var i=0;i<n.length;i++){var o=ep(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Lp(t){Ef(t.a,function(t,e){this.a.hasOwnProperty(e)&&rp(t)},t),t.a={}}function Mp(){this.a=!0}function Fp(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return pp(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}Pp.prototype.G=function(){Pp.X.G.call(this),Lp(this)},Pp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mp.prototype.info=function(){};var Up={},jp=null;function Vp(){return jp=jp||new hp}function qp(t){Hf.call(this,Up.Fa,t)}function Bp(t){var e=Vp();lp(e,new qp(e))}function Hp(t,e){Hf.call(this,Up.STAT_EVENT,t),this.stat=e}function Kp(t){var e=Vp();lp(e,new Hp(e,t))}function Wp(t){Hf.call(this,Up.Ga,t)}function zp(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return $l.setTimeout(function(){t()},e)}Up.Fa="serverreachability",hf(qp,Hf),Up.STAT_EVENT="statevent",hf(Hp,Hf),Up.Ga="timingevent",hf(Wp,Hf);vt={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Gn={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Gp(){}function Qp(t){var e;return(e=t.a)||(e=t.a={}),e}function Yp(){}Gp.prototype.a=null;var Xp,dt={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Jp(){Hf.call(this,"d")}function $p(){Hf.call(this,"c")}function Zp(){}function td(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Pp(this),this.P=ed,t=Rf?125:void 0,this.R=new Ip(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}hf(Jp,Hf),hf($p,Hf),hf(Zp,Gp),Xp=new Zp;var ed=45e3,nd={},rd={};function id(t,e,n){t.H=1,t.i=Sd(bd(e)),t.j=n,t.I=!0,od(t,null)}function od(t,e){t.u=cf(),ad(t),t.l=bd(t.i);var s,a,u,c,h,l,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Ud(n.b,"t",r),t.D=0,t.a=Rv(t.g,t.g.C?e:null),0<t.O&&(t.F=new kp(af(t.Ca,t,t.a),t.O)),xp(t.J,t.a,"readystatechange",t.Xa),e=t.B?If(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Bp(1),s=t.c,a=t.m,u=t.l,c=t.f,h=t.S,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function sd(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var a=(a=n,o=i=void 0,i=(r=t).D,-1==(o=a.indexOf("\n",i))?rd:(i=Number(a.substring(i,o)),isNaN(i)?nd:(o+=1)+i>a.length?rd:(a=a.substr(o,i),r.D=o+i,a)));if(a==rd){4==e&&(t.h=4,Kp(14),s=!1),Fp(t.c,t.f,null,"[Incomplete Response]");break}if(a==nd){t.h=4,Kp(15),Fp(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}Fp(t.c,t.f,a,null),fd(t,a)}4==e&&0==n.length&&(t.h=1,Kp(16),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Iv(e),e.F=!0,Kp(11))):(Fp(t.c,t.f,n,"[Invalid Chunked Response]"),ld(t),hd(t))}function ad(t){t.T=cf()+t.P,ud(t,t.P)}function ud(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=zp(af(t.Va,t),e)}function cd(t){t.o&&($l.clearTimeout(t.o),t.o=null)}function hd(t){0==t.g.v||t.A||Cv(t.g,t)}function ld(t){cd(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Tp(t.R),Lp(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function fd(t,e){try{var n,r,i,o,s,a=t.g;if(0!=a.v&&(a.a==t||Wd(a.b,t)))if(a.I=t.N,!t.C&&Wd(a.b,t)&&3==a.v){try{var u=a.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!a.j){if(a.a){if(!(a.a.u+3e3<t.u))break t;Sv(a),dv(a)}Ev(a),Kp(18)}}else a.oa=c[1],0<a.oa-a.P&&c[2]<37500&&a.H&&0==a.o&&!a.m&&(a.m=zp(af(a.Sa,a),6e3));if(Kd(a.b)<=1&&a.ea){try{a.ea()}catch(t){}a.ea=void 0}}else Av(a,11)}else if(!t.C&&a.a!=t||Sv(a),!yf(e))for(e=u=a.ka.a.parse(e),u=0;u<e.length;u++){c=e[u],a.P=c[0],c=c[1],2==a.v?"c"==c[0]?(a.J=c[1],a.ga=c[2],null!=(r=c[3])&&(a.ha=r,a.c.info("VER="+a.ha)),null!=(o=c[4])&&(a.pa=o,a.c.info("SVER="+a.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,a.D=n,a.c.info("backChannelRequestTimeoutMs_="+n)),n=a,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(bf(r,"spdy")||bf(r,"quic")||bf(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(zd(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,Td(n.B,n.A,s))),a.v=3,a.f&&a.f.ta(),a.U&&(a.N=cf()-t.u,a.c.info("Handshake RTT: "+a.N+"ms")),i=t,(n=a).la=Ov(n,n.C?n.ga:null,n.fa),i.C?(Gd(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(cd(o),ad(o)),n.a=i):wv(n),0<a.g.length&&gv(a)):"stop"!=c[0]&&"close"!=c[0]||Av(a,7):3==a.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Av(a,7):pv(a):"noop"!=c[0]&&a.f&&a.f.sa(c),a.o=0)}Bp(4)}catch(t){}}function pd(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(tf(t)||"string"==typeof t)pf(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(tf(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(tf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function dd(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof dd)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function vd(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];yd(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)yd(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function yd(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(mu=td.prototype).setTimeout=function(t){this.P=t},mu.Xa=function(t){t=t.target;var e=this.F;e&&3==cv(t)?e.f():this.Ca(t)},mu.Ca=function(t){try{if(t==this.a)t:{var e=cv(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!Rf&&!this.a.$())){this.A||4!=e||7==n||Bp(8==n||r<=0?3:2),cd(this);var i=this.a.W();this.N=i;n=this.a.$();if(this.b=200==i,r=this.c,a=this.m,u=this.l,c=this.f,h=this.S,l=e,f=i,r.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+h+"]: "+a+"\n"+u+"\n"+l+" "+f}),this.b){if(this.U&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!yf(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,Kp(12),ld(this),hd(this);break t}Fp(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,fd(this,s)}this.I?(sd(this,e,n),Rf&&this.b&&3==e&&(xp(this.J,this.R,"tick",this.Wa),this.R.start())):(Fp(this.c,this.f,n,null),fd(this,n)),4==e&&ld(this),this.b&&!this.A&&(4==e?Cv(this.g,this):(this.b=!1,ad(this)))}else 400==i&&0<n.indexOf("Unknown SID")?(this.h=3,Kp(12)):(this.h=0,Kp(13)),ld(this),hd(this)}}}catch(t){}var a,u,c,h,l,f},mu.Wa=function(){var t,e;this.a&&(t=cv(this.a),e=this.a.$(),this.D<e.length&&(cd(this),sd(this,t,e),this.b&&4!=t&&ad(this)))},mu.cancel=function(){this.A=!0,ld(this)},mu.Va=function(){this.o=null;var t,e,n=cf();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(Bp(3),Kp(17)),ld(this),this.h=2,hd(this)):ud(this,this.T-n)},(mu=dd.prototype).K=function(){vd(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},mu.L=function(){return vd(this),this.a.concat()},mu.get=function(t,e){return yd(this.b,t)?this.b[t]:e},mu.set=function(t,e){yd(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},mu.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var gd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function md(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof md?(this.a=void 0!==e?e:t.a,_d(this,t.f),this.j=t.j,wd(this,t.c),Ed(this,t.h),this.g=t.g,e=t.b,(n=new xd).c=e.c,e.a&&(n.a=new dd(e.a),n.b=e.b),Id(this,n),this.i=t.i):t&&(n=String(t).match(gd))?(this.a=!!e,_d(this,n[1]||"",!0),this.j=Cd(n[2]||""),wd(this,n[3]||"",!0),Ed(this,n[4]),this.g=Cd(n[5]||"",!0),Id(this,n[6]||"",!0),this.i=Cd(n[7]||"")):(this.a=!!e,this.b=new xd(null,this.a))}function bd(t){return new md(t)}function _d(t,e,n){t.f=n?Cd(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function wd(t,e,n){t.c=n?Cd(e,!0):e}function Ed(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Id(t,e,n){var r,i;e instanceof xd?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(Ld(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Md(this,e),Ud(this,n,t))},r)),r.f=i):(n||(e=Nd(e,Pd)),t.b=new xd(e,t.a))}function Td(t,e,n){t.b.set(e,n)}function Sd(t){return Td(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^cf()).toString(36)),t}function Cd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Nd(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ad),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ad(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}md.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Nd(e,kd,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Nd(e,kd,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Nd(n,"/"==n.charAt(0)?Rd:Od,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Nd(n,Dd)),t.join("")};var kd=/[#\/\?@]/g,Od=/[#\?:]/g,Rd=/[#\?]/g,Pd=/[#\?@]/g,Dd=/#/g;function xd(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ld(n){n.a||(n.a=new dd,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Md(t,e){Ld(t),e=jd(t,e),yd(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,yd((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&vd(t)))}function Fd(t,e){return Ld(t),e=jd(t,e),yd(t.a.b,e)}function Ud(t,e,n){Md(t,e),0<n.length&&(t.c=null,t.a.set(jd(t,e),vf(n)),t.b+=n.length)}function jd(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(mu=xd.prototype).add=function(t,e){Ld(this),this.c=null,t=jd(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},mu.forEach=function(n,r){Ld(this),this.a.forEach(function(t,e){pf(t,function(t){n.call(r,t,e,this)},this)},this)},mu.L=function(){Ld(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},mu.K=function(t){Ld(this);var e=[];if("string"==typeof t)Fd(this,t)&&(e=df(e,this.a.get(jd(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=df(e,t[n])}return e},mu.set=function(t,e){return Ld(this),this.c=null,Fd(this,t=jd(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},mu.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},mu.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Vd=function(t,e){this.b=t,this.a=e};function qd(t){this.g=t||Bd,t=$l.PerformanceNavigationTiming?0<(t=$l.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!($l.ia&&$l.ia.ya&&$l.ia.ya()&&$l.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Bd=10;function Hd(t){return t.b||t.a&&t.a.size>=t.f}function Kd(t){return t.b?1:t.a?t.a.size:0}function Wd(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function zd(t,e){t.a?t.a.add(e):t.b=e}function Gd(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Qd(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return vf(t.c);var r=t.c;try{for(var i=Yl(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Yd(){}function Xd(){this.a=new Yd}function Jd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}qd.prototype.cancel=function(){var e,t;if(this.c=Qd(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Yl(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},Yd.prototype.stringify=function(t){return $l.JSON.stringify(t,void 0)},Yd.prototype.parse=function(t){return $l.JSON.parse(t,void 0)};var $d=$l.JSON.parse;function Zd(t){hp.call(this),this.headers=new dd,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=tv,this.D=this.F=!1}hf(Zd,hp);var tv="",ev=/^https?$/i,nv=["POST","PUT"];function rv(t){return"content-type"==t.toLowerCase()}function iv(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ov(t),av(t)}function ov(t){t.u||(t.u=!0,lp(t,"complete"),lp(t,"error"))}function sv(t){if(t.b&&void 0!==Jl&&(!t.s[1]||4!=cv(t)||2!=t.W()))if(t.l&&4==cv(t))Sp(t.za,0,t);else if(lp(t,"readystatechange"),4==cv(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}(e=s)||((n=0===o)&&(!(i=String(t.B).match(gd)[1]||null)&&$l.self&&$l.self.location&&(i=(r=$l.self.location.protocol).substr(0,r.length-1)),n=!ev.test(i?i.toLowerCase():"")),e=n);if(e)lp(t,"complete"),lp(t,"success");else{t.h=6;try{var a=2<cv(t)?t.a.statusText:""}catch(o){a=""}t.f=a+" ["+t.W()+"]",ov(t)}}finally{av(t)}}}function av(t,e){if(t.a){uv(t);var n=t.a,r=t.s[0]?Zl:null;t.a=null,t.s=null,e||lp(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function uv(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&($l.clearTimeout(t.m),t.m=null)}function cv(t){return t.a?t.a.readyState:0}function hv(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Ef(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Td(t,e,n))}function lv(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function fv(t){this.pa=0,this.g=[],this.c=new Mp,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=lv("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=lv("baseRetryDelayMs",5e3,t),this.Ra=lv("retryDelaySeedMs",1e4,t),this.Ma=lv("forwardChannelMaxRetries",2,t),this.ma=lv("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new qd(t&&t.concurrentRequestLimit),this.ka=new Xd,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function pv(t){var e,n;vv(t),3==t.v&&(e=t.R++,Td(n=bd(t.B),"SID",t.J),Td(n,"RID",e),Td(n,"TYPE","terminate"),bv(t,n),(e=new td(t,t.c,e,void 0)).H=2,e.i=Sd(bd(n)),n=!1,$l.navigator&&$l.navigator.sendBeacon&&(n=$l.navigator.sendBeacon(e.i.toString(),"")),!n&&$l.Image&&((new Image).src=e.i,n=!0),n||(e.a=Rv(e.g,null),e.a.ba(e.i)),e.u=cf(),ad(e)),kv(t)}function dv(t){t.a&&(Iv(t),t.a.cancel(),t.a=null)}function vv(t){dv(t),t.j&&($l.clearTimeout(t.j),t.j=null),Sv(t),t.b.cancel(),t.h&&("number"==typeof t.h&&$l.clearTimeout(t.h),t.h=null)}function yv(t,e){t.g.push(new Vd(t.Oa++,e)),3==t.v&&gv(t)}function gv(t){Hd(t.b)||t.h||(t.h=!0,bp(t.Ba,t),t.u=0)}function mv(t,e){var n=e?e.f:t.R++,r=bd(t.B);Td(r,"SID",t.J),Td(r,"RID",n),Td(r,"AID",t.P),bv(t,r),t.i&&t.l&&hv(r,t.i,t.l),n=new td(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=_v(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),zd(t.b,n),id(n,r,e)}function bv(t,n){t.f&&pd({},function(t,e){Td(n,e,t)})}function _v(t,e,n){n=Math.min(t.g.length,n);var r=t.f?af(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r,e){var i=e||"";try{pd(t,function(t,e){var n=t;ef(t)&&(n=pp(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function wv(t){t.a||t.j||(t.T=1,bp(t.Aa,t),t.o=0)}function Ev(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=zp(af(t.Aa,t),Nv(t,t.o)),t.o++,1)}function Iv(t){null!=t.s&&($l.clearTimeout(t.s),t.s=null)}function Tv(t){t.a=new td(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=bd(t.la);Td(e,"RID","rpc"),Td(e,"SID",t.J),Td(e,"CI",t.H?"0":"1"),Td(e,"AID",t.P),bv(t,e),Td(e,"TYPE","xmlhttp"),t.i&&t.l&&hv(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Sd(bd(e)),n.j=null,n.I=!0,od(n,t)}function Sv(t){null!=t.m&&($l.clearTimeout(t.m),t.m=null)}function Cv(t,e){var n,r=null;if(t.a==e){Sv(t),Iv(t),t.a=null;var i=2}else{if(!Wd(t.b,e))return;r=e.s,Gd(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b){1==i?(r=e.j?e.j.length:0,e=cf()-e.u,n=t.u,lp(i=Vp(),new Wp(i)),gv(t)):wv(t)}else if(3==(n=e.h)||0==n&&0<t.I||!(1==i&&function(t,e){if(!(Kd(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)))return t.h=zp(af(t.Ba,t,e),Nv(t,t.u)),t.u++,1}}(t,e)||2==i&&Ev(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:Av(t,5);break;case 4:Av(t,10);break;case 3:Av(t,6);break;default:Av(t,2)}}function Nv(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Av(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=af(t.Ya,t),r||(r=new md("//www.google.com/images/cleardot.gif"),$l.location&&"http"==$l.location.protocol||_d(r,"https"),Sd(r)),n=r.toString(),r=o,o=new Mp,$l.Image?((i=new Image).onload=uf(Jd,o,i,"TestLoadImage: loaded",!0,r),i.onerror=uf(Jd,o,i,"TestLoadImage: error",!1,r),i.onabort=uf(Jd,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=uf(Jd,o,i,"TestLoadImage: timeout",!1,r),$l.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):Kp(2),t.v=0,t.f&&t.f.ra(e),kv(t),vv(t)}function kv(t){t.v=0,t.I=-1,t.f&&(0==Qd(t.b).length&&0==t.g.length||(t.b.c.length=0,vf(t.g),t.g.length=0),t.f.qa())}function Ov(t,e,n){var r,i,o,s,a,u=(s=n)instanceof md?bd(s):new md(s,void 0);return""!=u.c?(e&&wd(u,e+"."+u.c),Ed(u,u.h)):(a=$l.location,r=a.protocol,i=e?e+"."+a.hostname:a.hostname,o=+a.port,s=n,a=new md(null,void 0),r&&_d(a,r),i&&wd(a,i),o&&Ed(a,o),s&&(a.g=s),u=a),t.V&&Ef(t.V,function(t,e){Td(u,e,t)}),e=t.A,n=t.na,e&&n&&Td(u,e,n),Td(u,"VER",t.ha),bv(t,u),u}function Rv(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Zd(t.Na)).F=t.C,e}function Pv(){}function Dv(){if(kf&&!(10<=Number(jf)))throw Error("Environmental error: no available transport.")}function xv(t,e){hp.call(this),this.a=new fv(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!yf(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!yf(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Fv(this)}function Lv(t){Jp.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Mv(){$p.call(this),this.status=1}function Fv(t){this.a=t}(mu=Zd.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Qp(this.H):Qp(Xp),this.a.onreadystatechange=af(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void iv(this,t)}t=n||"";var i,o=new dd(this.headers);r&&pd(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=rv,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=$l.FormData&&t instanceof $l.FormData,0<=ff(nv,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{uv(this),0<this.o&&((this.D=(i=this.a,kf&&Uf(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=af(this.xa,this)):this.m=Sp(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){iv(this,t)}},mu.xa=function(){void 0!==Jl&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,lp(this,"timeout"),this.abort(8))},mu.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,lp(this,"complete"),lp(this,"abort"),av(this))},mu.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),av(this,!0)),Zd.X.G.call(this)},mu.za=function(){this.j||(this.A||this.l||this.g?sv(this):this.Ua())},mu.Ua=function(){sv(this)},mu.W=function(){try{return 2<cv(this)?this.a.status:-1}catch(t){return-1}},mu.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},mu.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),$d(e)}},mu.ua=function(){return this.h},mu.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(mu=fv.prototype).ha=8,mu.v=1,mu.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new td(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Sf(r=If(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=_v(this,n,e),Td(i=bd(this.B),"RID",t),Td(i,"CVER",22),this.A&&Td(i,"X-HTTP-Session-Id",this.A),bv(this,i),this.i&&r&&hv(i,this.i,r),zd(this.b,n),this.Ia&&Td(i,"TYPE","init"),this.da?(Td(i,"$req",e),Td(i,"SID","null"),n.U=!0,id(n,i,null)):id(n,i,e),this.v=2}}else 3==this.v&&(t?mv(this,t):0==this.g.length||Hd(this.b)||mv(this))},mu.Aa=function(){var t;this.j=null,Tv(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=zp(af(this.Ta,this),t))},mu.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Kp(10),dv(this),Tv(this))},mu.Sa=function(){null!=this.m&&(this.m=null,dv(this),Ev(this),Kp(19))},mu.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Kp(2)):(this.c.info("Failed to ping google.com"),Kp(1))},(mu=Pv.prototype).ta=function(){},mu.sa=function(){},mu.ra=function(){},mu.qa=function(){},mu.Ja=function(){},Dv.prototype.a=function(t,e){return new xv(t,e)},hf(xv,hp),xv.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Kp(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Ov(t,null,t.fa),gv(t)},xv.prototype.close=function(){pv(this.a)},xv.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,yv(this.a,e)):this.l?((e={}).__data__=pp(t),yv(this.a,e)):yv(this.a,t)},xv.prototype.G=function(){this.a.f=null,delete this.f,pv(this.a),delete this.a,xv.X.G.call(this)},hf(Lv,Jp),hf(Mv,$p),hf(Fv,Pv),Fv.prototype.ta=function(){lp(this.a,"a")},Fv.prototype.sa=function(t){lp(this.a,new Lv(t))},Fv.prototype.ra=function(t){lp(this.a,new Mv)},Fv.prototype.qa=function(){lp(this.a,"b")},Dv.prototype.createWebChannel=Dv.prototype.a,xv.prototype.send=xv.prototype.h,xv.prototype.open=xv.prototype.g,vt.NO_ERROR=0,vt.TIMEOUT=8,vt.HTTP_ERROR=6,Gn.COMPLETE="complete",(Yp.EventType=dt).OPEN="a",dt.CLOSE="b",dt.ERROR="c",dt.MESSAGE="d",hp.prototype.listen=hp.prototype.va,Zd.prototype.listenOnce=Zd.prototype.wa,Zd.prototype.getLastError=Zd.prototype.Qa,Zd.prototype.getLastErrorCode=Zd.prototype.ua,Zd.prototype.getStatus=Zd.prototype.W,Zd.prototype.getResponseJson=Zd.prototype.Pa,Zd.prototype.getResponseText=Zd.prototype.$,Zd.prototype.send=Zd.prototype.ba;var Uv=Vp,jv=vt,Vv=Gn,qv=Up,Bv=10,Hv=11,Kv=Yp,Wv=Zd,zv="8.2.5-2021026232412",Gv=new Ls("@firebase/firestore");function Qv(){return Gv.logLevel}function Yv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Gv.logLevel<=ks.DEBUG&&(e=n.map($v),Gv.debug.apply(Gv,Co(["Firestore ("+zv+"): "+t],e)))}function Xv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Gv.logLevel<=ks.ERROR&&(e=n.map($v),Gv.error.apply(Gv,Co(["Firestore ("+zv+"): "+t],e)))}function Jv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Gv.logLevel<=ks.WARN&&(e=n.map($v),Gv.warn.apply(Gv,Co(["Firestore ("+zv+"): "+t],e)))}function $v(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Zv(t){void 0===t&&(t="Unexpected state");t="FIRESTORE ("+zv+") INTERNAL ASSERTION FAILED: "+t;throw Xv(t),new Error(t)}function ty(t){t||Zv()}var ey=(ny.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},ny);function ny(){}function ry(t,e){return t<e?-1:e<t?1:0}function iy(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function oy(t){return t+"\0"}var sy=(ay.fromBase64String=function(t){return new ay(atob(t))},ay.fromUint8Array=function(t){return new ay(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},ay.prototype.toBase64=function(){return t=this.i,btoa(t);var t},ay.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},ay.prototype.o=function(){return 2*this.i.length},ay.prototype.u=function(t){return ry(this.i,t.i)},ay.prototype.isEqual=function(t){return this.i===t.i},ay);function ay(t){this.i=t}sy.h=new sy("");var uy,cy={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hy=(bo(dy,uy=Error),dy),ly=(py.fromBase64String=function(t){try{return new py(sy.fromBase64String(t))}catch(t){throw new hy(cy.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},py.fromUint8Array=function(t){return new py(sy.fromUint8Array(t))},py.prototype.toBase64=function(){return this.l.toBase64()},py.prototype.toUint8Array=function(){return this.l.toUint8Array()},py.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},py.prototype.isEqual=function(t){return this.l.isEqual(t.l)},py),fy=function(t){this._=t};function py(t){this.l=t}function dy(t,e){var n=this;return(n=uy.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function vy(){if("undefined"==typeof Uint8Array)throw new hy(cy.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function yy(){if("undefined"==typeof atob)throw new hy(cy.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var gy,my=(bo(Ty,gy=fy),Ty.fromBase64String=function(t){return yy(),new Ty(ly.fromBase64String(t))},Ty.fromUint8Array=function(t){return vy(),new Ty(ly.fromUint8Array(t))},Ty.prototype.toBase64=function(){return yy(),this._.toBase64()},Ty.prototype.toUint8Array=function(){return vy(),this._.toUint8Array()},Ty.prototype.isEqual=function(t){return this._.isEqual(t._)},Ty.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},Ty),by=function(t,e,n,r,i,o){this.T=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.I=o},_y=(Object.defineProperty(Iy.prototype,"m",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),Iy.prototype.isEqual=function(t){return t instanceof Iy&&t.projectId===this.projectId&&t.database===this.database},Iy),wy=(Ey.prototype.A=function(){return null!=this.uid},Ey.prototype.R=function(){return this.A()?"uid:"+this.uid:"anonymous-user"},Ey.prototype.isEqual=function(t){return t.uid===this.uid},Ey);function Ey(t){this.uid=t}function Iy(t,e){this.projectId=t,this.database=e||"(default)"}function Ty(){return null!==gy&&gy.apply(this,arguments)||this}wy.UNAUTHENTICATED=new wy(null),wy.P=new wy("google-credentials-uid"),wy.g=new wy("first-party-uid");function Sy(t,e){this.user=e,this.type="OAuth",this.V={},this.V.Authorization="Bearer "+t}var Cy=(Ly.prototype.getToken=function(){return Promise.resolve(null)},Ly.prototype.v=function(){},Ly.prototype.S=function(t){(this.p=t)(wy.UNAUTHENTICATED)},Ly.prototype.D=function(){this.p=null},Ly),Ny=(xy.prototype.getToken=function(){var e=this,n=this.F,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.F!==n?(Yv("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(ty("string"==typeof t.accessToken),new Sy(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},xy.prototype.v=function(){this.forceRefresh=!0},xy.prototype.S=function(t){this.p=t,this.N&&t(this.currentUser)},xy.prototype.D=function(){this.auth&&this.auth.removeAuthTokenListener(this.C),this.C=null,this.p=null},xy.prototype.O=function(){var t=this.auth&&this.auth.getUid();return ty(null===t||"string"==typeof t),new wy(t)},xy),Ay=(Object.defineProperty(Dy.prototype,"V",{get:function(){var t={"X-Goog-AuthUser":this.M},e=this.k.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),Dy),ky=(Py.prototype.getToken=function(){return Promise.resolve(new Ay(this.k,this.M))},Py.prototype.S=function(t){t(wy.g)},Py.prototype.D=function(){},Py.prototype.v=function(){},Py),Oy=(Ry.prototype.L=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Ry.prototype.next=function(){var t=++this.previousValue;return this.B&&this.B(t),t},Ry);function Ry(t,e){var n=this;this.previousValue=t,e&&(e.$=function(t){return n.L(t)},this.B=function(t){return e.q(t)})}function Py(t,e){this.k=t,this.M=e}function Dy(t,e){this.k=t,this.M=e,this.type="FirstParty",this.user=wy.g}function xy(t){var e=this;this.C=null,this.currentUser=wy.UNAUTHENTICATED,this.N=!1,this.F=0,this.p=null,this.forceRefresh=!1,this.C=function(){e.F++,e.currentUser=e.O(),e.N=!0,e.p&&e.p(e.currentUser)},this.F=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.C):(this.C(null),t.get().then(function(t){e.auth=t,e.C&&e.auth.addAuthTokenListener(e.C)},function(){}))}function Ly(){this.p=null}Oy.U=-1;var My,Fy,Uy=(Yy.now=function(){return Yy.fromMillis(Date.now())},Yy.fromDate=function(t){return Yy.fromMillis(t.getTime())},Yy.fromMillis=function(t){var e=Math.floor(t/1e3);return new Yy(e,1e6*(t-1e3*e))},Yy.prototype.toDate=function(){return new Date(this.toMillis())},Yy.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Yy.prototype.K=function(t){return this.seconds===t.seconds?ry(this.nanoseconds,t.nanoseconds):ry(this.seconds,t.seconds)},Yy.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Yy.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Yy.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},Yy.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Yy),jy=(Qy.W=function(t){return new Qy(t)},Qy.min=function(){return new Qy(new Uy(0,0))},Qy.prototype.u=function(t){return this.timestamp.K(t.timestamp)},Qy.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Qy.prototype.j=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Qy.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Qy.prototype.G=function(){return this.timestamp},Qy),vt=(Object.defineProperty(Gy.prototype,"length",{get:function(){return this.H},enumerable:!1,configurable:!0}),Gy.prototype.isEqual=function(t){return 0===Gy.J(this,t)},Gy.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Gy?t.forEach(function(t){e.push(t)}):e.push(t),this.Y(e)},Gy.prototype.limit=function(){return this.offset+this.length},Gy.prototype.X=function(t){return t=void 0===t?1:t,this.Y(this.segments,this.offset+t,this.length-t)},Gy.prototype.Z=function(){return this.Y(this.segments,this.offset,this.length-1)},Gy.prototype.tt=function(){return this.segments[this.offset]},Gy.prototype.et=function(){return this.get(this.length-1)},Gy.prototype.get=function(t){return this.segments[this.offset+t]},Gy.prototype.nt=function(){return 0===this.length},Gy.prototype.st=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Gy.prototype.it=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Gy.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Gy.prototype.rt=function(){return this.segments.slice(this.offset,this.limit())},Gy.J=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Gy),Vy=(bo(zy,Fy=vt),zy.prototype.Y=function(t,e,n){return new zy(t,e,n)},zy.prototype.ot=function(){return this.rt().join("/")},zy.prototype.toString=function(){return this.ot()},zy.ct=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new hy(cy.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new zy(n)},zy.at=function(){return new zy([])},zy),qy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,By=(bo(Wy,My=vt),Wy.prototype.Y=function(t,e,n){return new Wy(t,e,n)},Wy.ut=function(t){return qy.test(t)},Wy.prototype.ot=function(){return this.rt().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wy.ut(t)||(t="`"+t+"`"),t}).join(".")},Wy.prototype.toString=function(){return this.ot()},Wy.prototype.ht=function(){return 1===this.length&&"__name__"===this.get(0)},Wy.lt=function(){return new Wy(["__name__"])},Wy._t=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new hy(cy.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new hy(cy.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new hy(cy.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new hy(cy.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Wy(e)},Wy.at=function(){return new Wy([])},Wy),Hy=(Ky.ft=function(t){return new Ky(Vy.ct(t))},Ky.dt=function(t){return new Ky(Vy.ct(t).X(5))},Ky.prototype.wt=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Ky.prototype.isEqual=function(t){return null!==t&&0===Vy.J(this.path,t.path)},Ky.prototype.toString=function(){return this.path.toString()},Ky.J=function(t,e){return Vy.J(t.path,e.path)},Ky.Et=function(t){return t.length%2==0},Ky.Tt=function(t){return new Ky(new Vy(t.slice()))},Ky);function Ky(t){this.path=t}function Wy(){return null!==My&&My.apply(this,arguments)||this}function zy(){return null!==Fy&&Fy.apply(this,arguments)||this}function Gy(t,e,n){void 0===e?e=0:e>t.length&&Zv(),void 0===n?n=t.length-e:n>t.length-e&&Zv(),this.segments=t,this.offset=e,this.H=n}function Qy(t){this.timestamp=t}function Yy(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new hy(cy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new hy(cy.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new hy(cy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new hy(cy.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Xy(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Jy(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $y(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Zy=(eg.prototype.It=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].st(t))return!0;return!1},eg.prototype.isEqual=function(t){return iy(this.fields,t.fields,function(t,e){return t.isEqual(e)})},eg),tg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eg(t){(this.fields=t).sort(By.J)}function ng(t){if(ty(!!t),"string"!=typeof t)return{seconds:rg(t.seconds),nanos:rg(t.nanos)};var e=0,n=tg.exec(t);ty(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function rg(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ig(t){return"string"==typeof t?sy.fromBase64String(t):sy.fromUint8Array(t)}function og(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function sg(t){t=ng(t.mapValue.fields.__local_write_time__.timestampValue);return new Uy(t.seconds,t.nanos)}function ag(t){return null==t}function ug(t){return 0===t&&1/t==-1/0}function cg(t){return"number"==typeof t&&Number.isInteger(t)&&!ug(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function hg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?og(t)?4:10:Zv()}function lg(r,i){var t,e=hg(r);if(e!==hg(i))return!1;switch(e){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return sg(r).isEqual(sg(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=ng(r.timestampValue),t=ng(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return t=i,ig(r.bytesValue).isEqual(ig(t.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,rg((t=r).geoPointValue.latitude)===rg(e.geoPointValue.latitude)&&rg(t.geoPointValue.longitude)===rg(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return rg(t.integerValue)===rg(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=rg(t.doubleValue),e=rg(e.doubleValue);return t===e?ug(t)===ug(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return iy(r.arrayValue.values||[],i.arrayValue.values||[],lg);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(Xy(e)!==Xy(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!lg(e[t],n[t])))return!1;return!0}();default:return Zv()}}function fg(t,e){return void 0!==(t.values||[]).find(function(t){return lg(t,e)})}function pg(t,e){var n,r,i=hg(t),o=hg(e);if(i!==o)return ry(i,o);switch(i){case 0:return 0;case 1:return ry(t.booleanValue,e.booleanValue);case 2:return n=e,r=rg(t.integerValue||t.doubleValue),n=rg(n.integerValue||n.doubleValue),r<n?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return dg(t.timestampValue,e.timestampValue);case 4:return dg(sg(t),sg(e));case 5:return ry(t.stringValue,e.stringValue);case 6:return function(t,e){t=ig(t),e=ig(e);return t.u(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ry(n[i],r[i]);if(0!==o)return o}return ry(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return i=t.geoPointValue,r=e.geoPointValue,0!==(n=ry(rg(i.latitude),rg(r.latitude)))?n:ry(rg(i.longitude),rg(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=pg(n[i],r[i]);if(o)return o}return ry(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=ry(r[s],o[s]);if(0!==a)return a;a=pg(n[r[s]],i[o[s]]);if(0!==a)return a}return ry(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Zv()}}function dg(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ry(t,e);var n=ng(t),t=ng(e),e=ry(n.seconds,t.seconds);return 0!==e?e:ry(n.nanos,t.nanos)}function vg(t){return function s(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var t=ng(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ig(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,Hy.dt(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=s(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(t.mapValue):Zv();var e}(t)}function yg(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.ot()}}function gg(t){return t&&"integerValue"in t}function mg(t){return!!t&&"arrayValue"in t}function bg(t){return t&&"nullValue"in t}function _g(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wg(t){return t&&"mapValue"in t}var Eg=(Sg.empty=function(){return new Sg({mapValue:{}})},Sg.prototype.field=function(t){if(t.nt())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!wg(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.et()])||null},Sg.prototype.isEqual=function(t){return lg(this.proto,t.proto)},Sg),Ig=(Tg.prototype.set=function(t,e){return this.Pt(t,e),this},Tg.prototype.delete=function(t){return this.Pt(t,null),this},Tg.prototype.Pt=function(t,e){for(var n=this.Rt,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===hg(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.et(),e)},Tg.prototype.yt=function(){var t=this.gt(By.at(),this.Rt);return null!=t?new Eg(t):this.At},Tg.prototype.gt=function(r,t){var i=this,o=!1,e=this.At.field(r),s=wg(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.gt(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},Tg);function Tg(t){void 0===t&&(t=Eg.empty()),this.At=t,this.Rt=new Map}function Sg(t){this.proto=t}var Cg,Ng,Ag,Gn=function(t,e){this.key=t,this.version=e},kg=(bo(Lg,Ag=Gn),Lg.prototype.field=function(t){return this.Vt.field(t)},Lg.prototype.data=function(){return this.Vt},Lg.prototype.vt=function(){return this.Vt.proto},Lg.prototype.isEqual=function(t){return t instanceof Lg&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.bt===t.bt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Vt.isEqual(t.Vt)},Lg.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Vt.toString()+", {hasLocalMutations: "+this.bt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Lg.prototype,"hasPendingWrites",{get:function(){return this.bt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Lg),Og=(bo(xg,Ng=Gn),xg.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(xg.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),xg.prototype.isEqual=function(t){return t instanceof xg&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},xg),Rg=(bo(Dg,Cg=Gn),Dg.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Dg.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Dg.prototype.isEqual=function(t){return t instanceof Dg&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Dg),Pg=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.St=null};function Dg(){return null!==Cg&&Cg.apply(this,arguments)||this}function xg(t,e,n){var r=this;return(r=Ng.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Lg(t,e,n,r){var i=this;return(i=Ag.call(this,t,e)||this).Vt=n,i.bt=!!r.bt,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Mg(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Pg(t,e,n,r,i,o,s)}function Fg(t){var e=t;return null===e.St&&(t=e.path.ot(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.ot()+t.op.toString()+vg(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.ot()+t.dir}).join(","),ag(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=fm(e.startAt)),e.endAt&&(t+="|ub:",t+=fm(e.endAt)),e.St=t),e.St}function Ug(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!lg(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vm(t.startAt,e.startAt)&&vm(t.endAt,e.endAt)}function jg(t){return Hy.Et(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Vg,qg=(bo(Bg,Vg=function(){}),Bg.create=function(t,e,n){return t.ht()?"in"===e||"not-in"===e?this.Dt(t,e,n):new zg(t,e,n):"array-contains"===e?new rm(t,n):"in"===e?new im(t,n):"not-in"===e?new om(t,n):"array-contains-any"===e?new sm(t,n):new Bg(t,e,n)},Bg.Dt=function(t,e,n){return new("in"===e?Gg:Qg)(t,n)},Bg.prototype.matches=function(t){t=t.field(this.field);return"!="===this.op?null!==t&&this.Ct(pg(t,this.value)):null!==t&&hg(this.value)===hg(t)&&this.Ct(pg(t,this.value))},Bg.prototype.Ct=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Zv()}},Bg.prototype.xt=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},Bg);function Bg(t,e,n){var r=this;return(r=Vg.call(this)||this).field=t,r.op=e,r.value=n,r}var Hg,Kg,Wg,zg=(bo(Jg,Wg=qg),Jg.prototype.matches=function(t){t=Hy.J(t.key,this.key);return this.Ct(t)},Jg),Gg=(bo(Xg,Kg=qg),Xg.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},Xg),Qg=(bo(Yg,Hg=qg),Yg.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},Yg);function Yg(t,e){var n=this;return(n=Hg.call(this,t,"not-in",e)||this).keys=$g(0,e),n}function Xg(t,e){var n=this;return(n=Kg.call(this,t,"in",e)||this).keys=$g(0,e),n}function Jg(t,e,n){var r=this;return(r=Wg.call(this,t,e,n)||this).key=Hy.dt(n.referenceValue),r}function $g(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return Hy.dt(t.referenceValue)})}var Zg,tm,em,nm,rm=(bo(lm,nm=qg),lm.prototype.matches=function(t){t=t.field(this.field);return mg(t)&&fg(t.arrayValue,this.value)},lm),im=(bo(hm,em=qg),hm.prototype.matches=function(t){t=t.field(this.field);return null!==t&&fg(this.value.arrayValue,t)},hm),om=(bo(cm,tm=qg),cm.prototype.matches=function(t){if(fg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.field(this.field);return null!==t&&!fg(this.value.arrayValue,t)},cm),sm=(bo(um,Zg=qg),um.prototype.matches=function(t){var e=this,t=t.field(this.field);return!(!mg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return fg(e.value.arrayValue,t)})},um),am=function(t,e){this.position=t,this.before=e};function um(t,e){return Zg.call(this,t,"array-contains-any",e)||this}function cm(t,e){return tm.call(this,t,"not-in",e)||this}function hm(t,e){return em.call(this,t,"in",e)||this}function lm(t,e){return nm.call(this,t,"array-contains",e)||this}function fm(t){return(t.before?"b":"a")+":"+t.position.map(vg).join(",")}var pm=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function dm(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.ht()?Hy.J(Hy.dt(s.referenceValue),n.key):pg(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function vm(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!lg(t.position[n],e.position[n]))return!1;return!0}var ym=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Nt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Ft=null,this.Ot=null,this.startAt,this.endAt};function gm(t,e,n,r,i,o,s,a){return new ym(t,e,n,r,i,o,s,a)}function mm(t){return new ym(t)}function bm(t){return!ag(t.limit)&&"F"===t.limitType}function _m(t){return!ag(t.limit)&&"L"===t.limitType}function wm(t){return 0<t.Nt.length?t.Nt[0].field:null}function Em(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.xt())return r.field}return null}function Im(t){return null!==t.collectionGroup}function Tm(t){var e=t;if(null===e.Ft){e.Ft=[];var n=Em(e),t=wm(e);if(null!==n&&null===t)n.ht()||e.Ft.push(new pm(n)),e.Ft.push(new pm(By.lt(),"asc"));else{for(var r=!1,i=0,o=e.Nt;i<o.length;i++){var s=o[i];e.Ft.push(s),s.field.ht()&&(r=!0)}r||(n=0<e.Nt.length?e.Nt[e.Nt.length-1].dir:"asc",e.Ft.push(new pm(By.lt(),n)))}}return e.Ft}function Sm(t){var e=t;if(!e.Ot)if("F"===e.limitType)e.Ot=Mg(e.path,e.collectionGroup,Tm(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Tm(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new pm(o.field,s))}var a=e.endAt?new am(e.endAt.position,!e.endAt.before):null,t=e.startAt?new am(e.startAt.position,!e.startAt.before):null;e.Ot=Mg(e.path,e.collectionGroup,n,e.filters,e.limit,a,t)}return e.Ot}function Cm(t,e,n){return new ym(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Nm(t,e){return Ug(Sm(t),Sm(e))&&t.limitType===e.limitType}function Am(t){return Fg(Sm(t))+"|lt:"+t.limitType}function km(t){return"Query(target="+(e=Sm(t),n=e.path.ot(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.ot()+" "+t.op+" "+vg(t.value)}).join(", ")+"]"),ag(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.ot()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+fm(e.startAt)),e.endAt&&(n+=", endAt: "+fm(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function Om(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.wt(e.collectionGroup)&&e.path.st(n):Hy.Et(e.path)?e.path.isEqual(n):e.path.it(n))&&function(t){for(var e=0,n=i.Nt;e<n.length;e++){var r=n[e];if(!r.field.ht()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||dm(t.startAt,Tm(t),n))&&(!t.endAt||!dm(t.endAt,Tm(t),n)));var e,n}function Rm(a){return function(t,e){for(var n=!1,r=0,i=Tm(a);r<i.length;r++){var o=i[r],s=function(t,r,e){e=t.field.ht()?Hy.J(r.key,e.key):function(t,e){var n=r.field(t),t=e.field(t);return null!==n&&null!==t?pg(n,t):Zv()}(t.field,e);switch(t.dir){case"asc":return e;case"desc":return-1*e;default:return Zv()}}(o,t,e);if(0!==s)return s;n=n||o.field.ht()}return 0}}var Pm=(Dm.prototype.$t=function(t){return new Dm(this.target,this.targetId,this.kt,t,this.Mt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Dm.prototype.Lt=function(t,e){return new Dm(this.target,this.targetId,this.kt,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Dm.prototype.Bt=function(t){return new Dm(this.target,this.targetId,this.kt,this.sequenceNumber,this.Mt,t,this.resumeToken)},Dm);function Dm(t,e,n,r,i,o,s){void 0===i&&(i=jy.min()),void 0===o&&(o=jy.min()),void 0===s&&(s=sy.h),this.target=t,this.targetId=e,this.kt=n,this.sequenceNumber=r,this.Mt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function xm(t,e){if(t.qt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ug(e)?"-0":e}}function Lm(t){return{integerValue:""+t}}function Mm(t,e){return cg(e)?Lm(e):xm(t,e)}vt=function(){this.Ut=void 0};function Fm(t,e){return t instanceof Xm?gg(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var Um,jm,Vm=(bo(Hm,jm=vt),Hm),qm=(bo(Bm,Um=vt),Bm);function Bm(t){var e=this;return(e=Um.call(this)||this).elements=t,e}function Hm(){return null!==jm&&jm.apply(this,arguments)||this}function Km(t,e){for(var n=Zm(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return lg(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var Wm,zm=(bo(Gm,Wm=vt),Gm);function Gm(t){var e=this;return(e=Wm.call(this)||this).elements=t,e}function Qm(t,e){for(var n=Zm(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!lg(t,e)})}(i[r]);return{arrayValue:{values:n}}}var Ym,Xm=(bo(Jm,Ym=vt),Jm);function Jm(t,e){var n=this;return(n=Ym.call(this)||this).Kt=t,n.Qt=e,n}function $m(t){return rg(t.integerValue||t.doubleValue)}function Zm(t){return mg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function tb(t,e){this.version=t,this.transformResults=e}var eb=function(t,e){this.field=t,this.transform=e},nb=(rb.Wt=function(){return new rb},rb.exists=function(t){return new rb(void 0,t)},rb.updateTime=function(t){return new rb(t)},Object.defineProperty(rb.prototype,"jt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),rb.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},rb);function rb(t,e){this.updateTime=t,this.exists=e}function ib(t,e){return void 0!==t.updateTime?e instanceof kg&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof kg}Gn=function(){};function ob(t,e,n,r){return t instanceof hb?function(t,e,n){if(!ib(t.Gt,e))return e;var r=t.value,n=yb(t.fieldTransforms,n,e),r=gb(t.fieldTransforms,r,n),e=ab(e);return new kg(t.key,e,r,{bt:!0})}(t,e,r):t instanceof lb?function(t,e,n){if(!ib(t.Gt,e))return e;var r=ab(e),e=db(t,e,yb(t.fieldTransforms,n,e));return new kg(t.key,r,e,{bt:!0})}(t,e,r):(e=e,ib((t=t).Gt,e)?new Og(t.key,jy.min()):e)}function sb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Gt.isEqual(e.Gt)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&iy(n,r,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof qm&&e instanceof qm||t instanceof zm&&e instanceof zm?iy(t.elements,e.elements,lg):t instanceof Xm&&e instanceof Xm?lg(t.Qt,e.Qt):t instanceof Vm&&e instanceof Vm)})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.zt.isEqual(e.zt));var n,r}function ab(t){return t instanceof kg?t.version:jy.min()}var ub,cb,hb=(bo(pb,cb=Gn),pb),lb=(bo(fb,ub=Gn),fb);function fb(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=ub.call(this)||this).key=t,o.data=e,o.zt=n,o.Gt=r,o.fieldTransforms=i,o.type=1,o}function pb(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=cb.call(this)||this).key=t,i.value=e,i.Gt=n,i.fieldTransforms=r,i.type=0,i}function db(t,e,n){var r,i,o;return i=t,e=r=e instanceof kg?e.data():Eg.empty(),o=new Ig(e),i.zt.fields.forEach(function(t){var e;t.nt()||(null!==(e=i.data.field(t))?o.set(t,e):o.delete(t))}),r=o.yt(),gb(t.fieldTransforms,r,n)}function vb(t,e,n){var r=[];ty(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof kg&&(a=e.field(o.field)),r.push((o=s,s=a,a=n[i],o instanceof qm?Km(o,s):o instanceof zm?Qm(o,s):a))}return r}function yb(t,e,n){for(var r,i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof kg&&(c=n.field(a.field)),i.push((r=c,a=e,c=void 0,(u=u)instanceof Vm?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof qm?Km(u,r):u instanceof zm?Qm(u,r):(u=Fm(c=u,r),r=$m(u)+$m(c.Qt),gg(u)&&gg(c.Qt)?Lm(r):xm(c.Kt,r))))}return i}function gb(t,e,n){for(var r=new Ig(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.yt()}function mb(t){this.count=t}var bb,_b,wb,Eb=(bo(Sb,wb=Gn),Sb),Ib=(bo(Tb,_b=Gn),Tb);function Tb(t,e){var n=this;return(n=_b.call(this)||this).key=t,n.Gt=e,n.type=3,n.fieldTransforms=[],n}function Sb(t,e){var n=this;return(n=wb.call(this)||this).key=t,n.Gt=e,n.type=2,n.fieldTransforms=[],n}function Cb(t){switch(t){case cy.OK:return Zv(),0;case cy.CANCELLED:case cy.UNKNOWN:case cy.DEADLINE_EXCEEDED:case cy.RESOURCE_EXHAUSTED:case cy.INTERNAL:case cy.UNAVAILABLE:case cy.UNAUTHENTICATED:return;case cy.INVALID_ARGUMENT:case cy.NOT_FOUND:case cy.ALREADY_EXISTS:case cy.PERMISSION_DENIED:case cy.FAILED_PRECONDITION:case cy.ABORTED:case cy.OUT_OF_RANGE:case cy.UNIMPLEMENTED:case cy.DATA_LOSS:return 1;default:return Zv(),0}}function Nb(t){if(void 0===t)return Xv("GRPC error has no .code"),cy.UNKNOWN;switch(t){case bb.OK:return cy.OK;case bb.CANCELLED:return cy.CANCELLED;case bb.UNKNOWN:return cy.UNKNOWN;case bb.DEADLINE_EXCEEDED:return cy.DEADLINE_EXCEEDED;case bb.RESOURCE_EXHAUSTED:return cy.RESOURCE_EXHAUSTED;case bb.INTERNAL:return cy.INTERNAL;case bb.UNAVAILABLE:return cy.UNAVAILABLE;case bb.UNAUTHENTICATED:return cy.UNAUTHENTICATED;case bb.INVALID_ARGUMENT:return cy.INVALID_ARGUMENT;case bb.NOT_FOUND:return cy.NOT_FOUND;case bb.ALREADY_EXISTS:return cy.ALREADY_EXISTS;case bb.PERMISSION_DENIED:return cy.PERMISSION_DENIED;case bb.FAILED_PRECONDITION:return cy.FAILED_PRECONDITION;case bb.ABORTED:return cy.ABORTED;case bb.OUT_OF_RANGE:return cy.OUT_OF_RANGE;case bb.UNIMPLEMENTED:return cy.UNIMPLEMENTED;case bb.DATA_LOSS:return cy.DATA_LOSS;default:return Zv()}}(vt=bb=bb||{})[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";var Ab=(Db.prototype.Ht=function(t,e){return new Db(this.J,this.root.Ht(t,e,this.J).copy(null,null,Ob.Jt,null,null))},Db.prototype.remove=function(t){return new Db(this.J,this.root.remove(t,this.J).copy(null,null,Ob.Jt,null,null))},Db.prototype.get=function(t){for(var e=this.root;!e.nt();){var n=this.J(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Db.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.nt();){var r=this.J(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Db.prototype.nt=function(){return this.root.nt()},Object.defineProperty(Db.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Db.prototype.Yt=function(){return this.root.Yt()},Db.prototype.Xt=function(){return this.root.Xt()},Db.prototype.Zt=function(t){return this.root.Zt(t)},Db.prototype.forEach=function(n){this.Zt(function(t,e){return n(t,e),!1})},Db.prototype.toString=function(){var n=[];return this.Zt(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Db.prototype.te=function(t){return this.root.te(t)},Db.prototype.ee=function(){return new kb(this.root,null,this.J,!1)},Db.prototype.ne=function(t){return new kb(this.root,t,this.J,!1)},Db.prototype.se=function(){return new kb(this.root,null,this.J,!0)},Db.prototype.ie=function(t){return new kb(this.root,t,this.J,!0)},Db),kb=(Pb.prototype.ce=function(){var t=this.oe.pop(),e={key:t.key,value:t.value};if(this.re)for(t=t.left;!t.nt();)this.oe.push(t),t=t.right;else for(t=t.right;!t.nt();)this.oe.push(t),t=t.left;return e},Pb.prototype.ae=function(){return 0<this.oe.length},Pb.prototype.ue=function(){if(0===this.oe.length)return null;var t=this.oe[this.oe.length-1];return{key:t.key,value:t.value}},Pb),Ob=(Rb.prototype.copy=function(t,e,n,r,i){return new Rb(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Rb.prototype.nt=function(){return!1},Rb.prototype.Zt=function(t){return this.left.Zt(t)||t(this.key,this.value)||this.right.Zt(t)},Rb.prototype.te=function(t){return this.right.te(t)||t(this.key,this.value)||this.left.te(t)},Rb.prototype.min=function(){return this.left.nt()?this:this.left.min()},Rb.prototype.Yt=function(){return this.min().key},Rb.prototype.Xt=function(){return this.right.nt()?this.key:this.right.Xt()},Rb.prototype.Ht=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Ht(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Ht(t,e,n))).he()},Rb.prototype.le=function(){if(this.left.nt())return Rb.EMPTY;var t=this;return t.left._e()||t.left.left._e()||(t=t.fe()),(t=t.copy(null,null,null,t.left.le(),null)).he()},Rb.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.nt()||r.left._e()||r.left.left._e()||(r=r.fe()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left._e()&&(r=r.de()),r.right.nt()||r.right._e()||r.right.left._e()||(r=r.we()),0===e(t,r.key)){if(r.right.nt())return Rb.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.le())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.he()},Rb.prototype._e=function(){return this.color},Rb.prototype.he=function(){var t=this;return t.right._e()&&!t.left._e()&&(t=t.Ee()),t.left._e()&&t.left.left._e()&&(t=t.de()),t.left._e()&&t.right._e()&&(t=t.Te()),t},Rb.prototype.fe=function(){var t=this.Te();return t.right.left._e()&&(t=(t=(t=t.copy(null,null,null,null,t.right.de())).Ee()).Te()),t},Rb.prototype.we=function(){var t=this.Te();return t.left.left._e()&&(t=(t=t.de()).Te()),t},Rb.prototype.Ee=function(){var t=this.copy(null,null,Rb.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Rb.prototype.de=function(){var t=this.copy(null,null,Rb.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Rb.prototype.Te=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Rb.prototype.Ie=function(){var t=this.me();return Math.pow(2,t)<=this.size+1},Rb.prototype.me=function(){if(this._e()&&this.left._e())throw Zv();if(this.right._e())throw Zv();var t=this.left.me();if(t!==this.right.me())throw Zv();return t+(this._e()?0:1)},Rb);function Rb(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Rb.RED,this.left=null!=r?r:Rb.EMPTY,this.right=null!=i?i:Rb.EMPTY,this.size=this.left.size+1+this.right.size}function Pb(t,e,n,r){this.re=r,this.oe=[];for(var i=1;!t.nt();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.re?t.left:t.right;else{if(0===i){this.oe.push(t);break}this.oe.push(t),t=this.re?t.right:t.left}}function Db(t,e){this.J=t,this.root=e||Ob.EMPTY}function xb(){this.size=0}Ob.EMPTY=null,Ob.RED=!0,Ob.Jt=!1,Ob.EMPTY=(Object.defineProperty(xb.prototype,"key",{get:function(){throw Zv()},enumerable:!1,configurable:!0}),Object.defineProperty(xb.prototype,"value",{get:function(){throw Zv()},enumerable:!1,configurable:!0}),Object.defineProperty(xb.prototype,"color",{get:function(){throw Zv()},enumerable:!1,configurable:!0}),Object.defineProperty(xb.prototype,"left",{get:function(){throw Zv()},enumerable:!1,configurable:!0}),Object.defineProperty(xb.prototype,"right",{get:function(){throw Zv()},enumerable:!1,configurable:!0}),xb.prototype.copy=function(t,e,n,r,i){return this},xb.prototype.Ht=function(t,e,n){return new Ob(t,e)},xb.prototype.remove=function(t,e){return this},xb.prototype.nt=function(){return!0},xb.prototype.Zt=function(t){return!1},xb.prototype.te=function(t){return!1},xb.prototype.Yt=function(){return null},xb.prototype.Xt=function(){return null},xb.prototype._e=function(){return!1},xb.prototype.Ie=function(){return!0},xb.prototype.me=function(){return 0},new xb);var Lb=(jb.prototype.has=function(t){return null!==this.data.get(t)},jb.prototype.first=function(){return this.data.Yt()},jb.prototype.last=function(){return this.data.Xt()},Object.defineProperty(jb.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),jb.prototype.indexOf=function(t){return this.data.indexOf(t)},jb.prototype.forEach=function(n){this.data.Zt(function(t,e){return n(t),!1})},jb.prototype.Ae=function(t,e){for(var n=this.data.ne(t[0]);n.ae();){var r=n.ce();if(0<=this.J(r.key,t[1]))return;e(r.key)}},jb.prototype.Re=function(t,e){for(var n=void 0!==e?this.data.ne(e):this.data.ee();n.ae();)if(!t(n.ce().key))return},jb.prototype.Pe=function(t){t=this.data.ne(t);return t.ae()?t.ce().key:null},jb.prototype.ee=function(){return new Mb(this.data.ee())},jb.prototype.ne=function(t){return new Mb(this.data.ne(t))},jb.prototype.add=function(t){return this.copy(this.data.remove(t).Ht(t,!0))},jb.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},jb.prototype.nt=function(){return this.data.nt()},jb.prototype.ye=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},jb.prototype.isEqual=function(t){if(!(t instanceof jb))return!1;if(this.size!==t.size)return!1;for(var e=this.data.ee(),n=t.data.ee();e.ae();){var r=e.ce().key,i=n.ce().key;if(0!==this.J(r,i))return!1}return!0},jb.prototype.rt=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},jb.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},jb.prototype.copy=function(t){var e=new jb(this.J);return e.data=t,e},jb),Mb=(Ub.prototype.ce=function(){return this.ge.ce().key},Ub.prototype.ae=function(){return this.ge.ae()},Ub),Fb=new Ab(Hy.J);function Ub(t){this.ge=t}function jb(t){this.J=t,this.data=new Ab(this.J)}var Vb=new Ab(Hy.J);var qb=new Ab(Hy.J);var Bb=new Lb(Hy.J);function Hb(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Bb,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var Kb=new Lb(ry);var Wb=(a_.be=function(t){return new a_(t.J)},a_.prototype.has=function(t){return null!=this.Ve.get(t)},a_.prototype.get=function(t){return this.Ve.get(t)},a_.prototype.first=function(){return this.pe.Yt()},a_.prototype.last=function(){return this.pe.Xt()},a_.prototype.nt=function(){return this.pe.nt()},a_.prototype.indexOf=function(t){t=this.Ve.get(t);return t?this.pe.indexOf(t):-1},Object.defineProperty(a_.prototype,"size",{get:function(){return this.pe.size},enumerable:!1,configurable:!0}),a_.prototype.forEach=function(n){this.pe.Zt(function(t,e){return n(t),!1})},a_.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ve.Ht(t.key,t),e.pe.Ht(t,null))},a_.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ve.remove(t),this.pe.remove(e)):this},a_.prototype.isEqual=function(t){if(!(t instanceof a_))return!1;if(this.size!==t.size)return!1;for(var e=this.pe.ee(),n=t.pe.ee();e.ae();){var r=e.ce().key,i=n.ce().key;if(!r.isEqual(i))return!1}return!0},a_.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},a_.prototype.copy=function(t,e){var n=new a_;return n.J=this.J,n.Ve=t,n.pe=e,n},a_),zb=(s_.prototype.track=function(t){var e=t.doc.key,n=this.ve.get(e);!n||0!==t.type&&3===n.type?this.ve=this.ve.Ht(e,t):3===t.type&&1!==n.type?this.ve=this.ve.Ht(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.ve=this.ve.Ht(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.ve=this.ve.remove(e):1===t.type&&2===n.type?this.ve=this.ve.Ht(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.ve=this.ve.Ht(e,{type:2,doc:t.doc}):Zv()},s_.prototype.Se=function(){var n=[];return this.ve.Zt(function(t,e){n.push(e)}),n},s_),Gb=(o_.Fe=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new o_(t,e,Wb.be(e),i,n,r,!0,!1)},Object.defineProperty(o_.prototype,"hasPendingWrites",{get:function(){return!this.Ce.nt()},enumerable:!1,configurable:!0}),o_.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.xe===t.xe&&this.Ce.isEqual(t.Ce)&&Nm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.De.isEqual(t.De)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},o_),Qb=(i_.Le=function(t,e){var n=new Map;return n.set(t,Yb.Be(t,e)),new i_(jy.min(),n,Kb,Fb,Hb())},i_),Yb=(r_.Be=function(t,e){return new r_(sy.h,e,Hb(),Hb(),Hb())},r_),Xb=function(t,e,n,r){this.We=t,this.removedTargetIds=e,this.key=n,this.je=r},Jb=function(t,e){this.targetId=t,this.Ge=e},$b=function(t,e,n,r){void 0===n&&(n=sy.h),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Zb=(Object.defineProperty(n_.prototype,"qe",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),Object.defineProperty(n_.prototype,"resumeToken",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(n_.prototype,"Ze",{get:function(){return 0!==this.ze},enumerable:!1,configurable:!0}),Object.defineProperty(n_.prototype,"tn",{get:function(){return this.Xe},enumerable:!1,configurable:!0}),n_.prototype.en=function(t){0<t.o()&&(this.Xe=!0,this.Je=t)},n_.prototype.nn=function(){var n=Hb(),r=Hb(),i=Hb();return this.He.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:Zv()}}),new Yb(this.Je,this.Ye,n,r,i)},n_.prototype.sn=function(){this.Xe=!1,this.He=c_()},n_.prototype.rn=function(t,e){this.Xe=!0,this.He=this.He.Ht(t,e)},n_.prototype.on=function(t){this.Xe=!0,this.He=this.He.remove(t)},n_.prototype.cn=function(){this.ze+=1},n_.prototype.an=function(){--this.ze},n_.prototype.un=function(){this.Xe=!0,this.Ye=!0},n_),t_=(e_.prototype.wn=function(t){for(var e=0,n=t.We;e<n.length;e++){var r=n[e];t.je instanceof kg?this.En(r,t.je):t.je instanceof Og&&this.Tn(r,t.key,t.je)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.Tn(r,t.key,t.je)},e_.prototype.In=function(n){var r=this;this.mn(n,function(t){var e=r.An(t);switch(n.state){case 0:r.Rn(t)&&e.en(n.resumeToken);break;case 1:e.an(),e.Ze||e.sn(),e.en(n.resumeToken);break;case 2:e.an(),e.Ze||r.removeTarget(t);break;case 3:r.Rn(t)&&(e.un(),e.en(n.resumeToken));break;case 4:r.Rn(t)&&(r.Pn(t),e.en(n.resumeToken));break;default:Zv()}})},e_.prototype.mn=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.ln.forEach(function(t,e){r.Rn(e)&&n(e)})},e_.prototype.yn=function(t){var e=t.targetId,n=t.Ge.count,t=this.gn(e);t&&(jg(t=t.target)?0===n?(t=new Hy(t.path),this.Tn(e,t,new Og(t,jy.min()))):ty(1===n):this.Vn(e)!==n&&(this.Pn(e),this.dn=this.dn.add(e)))},e_.prototype.pn=function(r){var i=this,o=new Map;this.ln.forEach(function(t,e){var n=i.gn(e);n&&(t.qe&&jg(n.target)&&(n=new Hy(n.target.path),null!==i._n.get(n)||i.bn(e,n)||i.Tn(e,n,new Og(n,r))),t.tn&&(o.set(e,t.nn()),t.sn()))});var s=Hb();this.fn.forEach(function(t,e){var n=!0;e.Re(function(t){t=i.gn(t);return!t||2===t.kt||(n=!1)}),n&&(s=s.add(t))});var t=new Qb(r,o,this.dn,this._n,s);return this._n=Fb,this.fn=u_(),this.dn=new Lb(ry),t},e_.prototype.En=function(t,e){var n;this.Rn(t)&&(n=this.bn(t,e.key)?2:0,this.An(t).rn(e.key,n),this._n=this._n.Ht(e.key,e),this.fn=this.fn.Ht(e.key,this.vn(e.key).add(t)))},e_.prototype.Tn=function(t,e,n){var r;this.Rn(t)&&(r=this.An(t),this.bn(t,e)?r.rn(e,1):r.on(e),this.fn=this.fn.Ht(e,this.vn(e).delete(t)),n&&(this._n=this._n.Ht(e,n)))},e_.prototype.removeTarget=function(t){this.ln.delete(t)},e_.prototype.Vn=function(t){var e=this.An(t).nn();return this.hn.Sn(t).size+e.Ue.size-e.Ke.size},e_.prototype.cn=function(t){this.An(t).cn()},e_.prototype.An=function(t){var e=this.ln.get(t);return e||(e=new Zb,this.ln.set(t,e)),e},e_.prototype.vn=function(t){var e=this.fn.get(t);return e||(e=new Lb(ry),this.fn=this.fn.Ht(t,e)),e},e_.prototype.Rn=function(t){var e=null!==this.gn(t);return e||Yv("WatchChangeAggregator","Detected inactive target",t),e},e_.prototype.gn=function(t){var e=this.ln.get(t);return e&&e.Ze?null:this.hn.Dn(t)},e_.prototype.Pn=function(e){var n=this;this.ln.set(e,new Zb),this.hn.Sn(e).forEach(function(t){n.Tn(e,t,null)})},e_.prototype.bn=function(t,e){return this.hn.Sn(t).has(e)},e_);function e_(t){this.hn=t,this.ln=new Map,this._n=Fb,this.fn=u_(),this.dn=new Lb(ry)}function n_(){this.ze=0,this.He=c_(),this.Je=sy.h,this.Ye=!1,this.Xe=!0}function r_(t,e,n,r,i){this.resumeToken=t,this.qe=e,this.Ue=n,this.Qe=r,this.Ke=i}function i_(t,e,n,r,i){this.Mt=t,this.Oe=e,this.ke=n,this.Me=r,this.$e=i}function o_(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.De=n,this.docChanges=r,this.Ce=i,this.fromCache=o,this.xe=s,this.Ne=a}function s_(){this.ve=new Ab(Hy.J)}function a_(n){this.J=n?function(t,e){return n(t,e)||Hy.J(t.key,e.key)}:function(t,e){return Hy.J(t.key,e.key)},this.Ve=Vb,this.pe=new Ab(this.J)}function u_(){return new Ab(Hy.J)}function c_(){return new Ab(Hy.J)}var h_={asc:"ASCENDING",desc:"DESCENDING"},l_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f_=function(t,e){this.T=t,this.qt=e};function p_(t,e){return t.qt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function d_(t,e){return t.qt?e.toBase64():e.toUint8Array()}function v_(t){return ty(!!t),jy.W((t=ng(t),new Uy(t.seconds,t.nanos)))}function y_(t,e){return new Vy(["projects",t.projectId,"databases",t.database]).child("documents").child(e).ot()}function g_(t){t=Vy.ct(t);return ty(M_(t)),t}function m_(t,e){return y_(t.T,e.path)}function b_(t,e){e=g_(e);if(e.get(1)!==t.T.projectId)throw new hy(cy.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.T.projectId);if(e.get(3)!==t.T.database)throw new hy(cy.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.T.database);return new Hy(I_(e))}function __(t,e){return y_(t.T,e)}function w_(t){t=g_(t);return 4===t.length?Vy.at():I_(t)}function E_(t){return new Vy(["projects",t.T.projectId,"databases",t.T.database]).ot()}function I_(t){return ty(4<t.length&&"documents"===t.get(4)),t.X(5)}function T_(t,e,n){return{name:m_(t,e),fields:n.proto.mapValue.fields}}function S_(t,e,n){var r=b_(t,e.name),t=v_(e.updateTime),e=new Eg({mapValue:{fields:e.fields}});return new kg(r,t,e,{hasCommittedMutations:!!n})}function C_(t,e){var n,r,i;if(e instanceof hb)n={update:T_(t,e.key,e.value)};else if(e instanceof Eb)n={delete:m_(t,e.key)};else if(e instanceof lb)n={update:T_(t,e.key,e.data),updateMask:(i=e.zt,r=[],i.fields.forEach(function(t){return r.push(t.ot())}),{fieldPaths:r})};else{if(!(e instanceof Ib))return Zv();n={verify:m_(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof Vm)return{fieldPath:t.field.ot(),setToServerValue:"REQUEST_TIME"};if(e instanceof qm)return{fieldPath:t.field.ot(),appendMissingElements:{values:e.elements}};if(e instanceof zm)return{fieldPath:t.field.ot(),removeAllFromArray:{values:e.elements}};if(e instanceof Xm)return{fieldPath:t.field.ot(),increment:e.Qt};throw Zv()})),e.Gt.jt||(n.currentDocument=void 0!==(i=e.Gt).updateTime?{updateTime:(e=t,t=i.updateTime,p_(e,t.G()))}:void 0!==i.exists?{exists:i.exists}:Zv()),n}function N_(e,t){var n=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?nb.updateTime(v_(s.updateTime)):void 0!==s.exists?nb.exists(s.exists):nb.Wt():nb.Wt(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(t,e){var n,r=null;"setToServerValue"in e?(ty("REQUEST_TIME"===e.setToServerValue),r=new Vm):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new qm(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new zm(n)):"increment"in e?r=new Xm(t,e.increment):Zv();e=By._t(e.fieldPath);return new eb(e,r)}(e,t)}):[];if(t.update){t.update.name;var i=b_(e,t.update.name),o=new Eg({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=(s=t.updateMask.fieldPaths||[],new Zy(s.map(function(t){return By._t(t)})));return new lb(i,o,s,n,r)}return new hb(i,o,n,r)}if(t.delete){r=b_(e,t.delete);return new Eb(r,n)}if(t.verify){t=b_(e,t.verify);return new Ib(t,n)}return Zv()}function A_(t,e){return{documents:[__(t,e.path)]}}function k_(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=__(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=__(t,r.Z()),n.structuredQuery.from=[{collectionId:r.et()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(_g(t.value))return{unaryFilter:{field:D_(t.field),op:"IS_NAN"}};if(bg(t.value))return{unaryFilter:{field:D_(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(_g(t.value))return{unaryFilter:{field:D_(t.field),op:"IS_NOT_NAN"}};if(bg(t.value))return{unaryFilter:{field:D_(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:D_(t.field),op:(e=t.op,l_[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:D_((t=t).field),direction:(t=t.dir,h_[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.qt||ag(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=R_(e.startAt)),e.endAt&&(n.structuredQuery.endAt=R_(e.endAt)),n}function O_(t){var e=w_(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(ty(1===r),(s=n.from[0]).allDescendants?i=s.collectionId:e=e.child(s.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[L_(t)]:void 0!==t.fieldFilter?[(n=t,qg.create(x_(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Zv()}}(),n.fieldFilter.value))]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):Zv():[];var n}(n.where));t=[];n.orderBy&&(t=n.orderBy.map(function(t){return new pm(x_((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));r=null;n.limit&&(r=ag(a="object"==typeof(a=n.limit)?a.value:a)?null:a);var s=null;n.startAt&&(s=P_(n.startAt));var a=null;return n.endAt&&(a=P_(n.endAt)),gm(e,i,t,o,r,"F",s,a)}function R_(t){return{before:t.before,values:t.position}}function P_(t){var e=!!t.before,t=t.values||[];return new am(t,e)}function D_(t){return{fieldPath:t.ot()}}function x_(t){return By._t(t.fieldPath)}function L_(t){switch(t.unaryFilter.op){case"IS_NAN":var e=x_(t.unaryFilter.field);return qg.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=x_(t.unaryFilter.field);return qg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":n=x_(t.unaryFilter.field);return qg.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":t=x_(t.unaryFilter.field);return qg.create(t,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Zv()}}function M_(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}var F_,U_=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},j_=(Q_.prototype.catch=function(t){return this.next(void 0,t)},Q_.prototype.next=function(r,i){var o=this;return this.Fn&&Zv(),this.Fn=!0,this.Nn?this.error?this.On(i,this.error):this.kn(r,this.result):new Q_(function(e,n){o.Cn=function(t){o.kn(r,t).next(e,n)},o.xn=function(t){o.On(i,t).next(e,n)}})},Q_.prototype.Mn=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},Q_.prototype.$n=function(t){try{var e=t();return e instanceof Q_?e:Q_.resolve(e)}catch(t){return Q_.reject(t)}},Q_.prototype.kn=function(t,e){return t?this.$n(function(){return t(e)}):Q_.resolve(e)},Q_.prototype.On=function(t,e){return t?this.$n(function(){return t(e)}):Q_.reject(e)},Q_.resolve=function(n){return new Q_(function(t,e){t(n)})},Q_.reject=function(n){return new Q_(function(t,e){e(n)})},Q_.Ln=function(t){return new Q_(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},Q_.Bn=function(t){for(var n=Q_.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?Q_.resolve(t):e()})}(r[e]);return n},Q_.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.Ln(i)},Q_),V_=(G_.open=function(t,e,n,r){try{return new G_(e,t.transaction(r,n))}catch(t){throw new H_(e,t)}},Object.defineProperty(G_.prototype,"Un",{get:function(){return this.qn.promise},enumerable:!1,configurable:!0}),G_.prototype.abort=function(t){t&&this.qn.reject(t),this.aborted||(Yv("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},G_.prototype.store=function(t){t=this.transaction.objectStore(t);return new X_(t)},G_),q_=(z_.delete=function(t){return Yv("SimpleDb","Removing database:",t),$_(window.indexedDB.deleteDatabase(t)).Mn()},z_.Wn=function(){if("undefined"==typeof indexedDB)return!1;if(z_.jn())return!0;var t=Fo(),e=z_.Kn(t),n=0<e&&e<10,e=z_.Gn(t),e=0<e&&e<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||e)},z_.jn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.zn)},z_.Hn=function(t,e){return t.store(e)},z_.Kn=function(t){t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},z_.Gn=function(t){t=t.match(/Android ([\d.]+)/i),t=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(t)},z_.prototype.Jn=function(o){return wo(this,void 0,void 0,function(){var e,i=this;return Eo(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(Yv("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result;e(t)},r.onblocked=function(){n(new H_(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){t=t.target.error;"VersionError"===t.name?n(new hy(cy.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new H_(o,t))},r.onupgradeneeded=function(t){Yv("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.Qn.Yn(e,r.transaction,t.oldVersion,i.version).next(function(){Yv("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.Xn&&(this.db.onversionchange=function(t){return i.Xn(t)}),this.db)]}})})},z_.prototype.Zn=function(e){this.Xn=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},z_.prototype.runTransaction=function(a,n,u,c){return wo(this,void 0,void 0,function(){var i,o,s,e;return Eo(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,s.Jn(a)];case 2:return s.db=t.sent(),e=V_.open(s.db,a,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),j_.reject(t)}).Mn(),r={},n.catch(function(){}),[4,e.Un];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,Yv("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),s.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},s=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},z_.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},z_),B_=(Object.defineProperty(W_.prototype,"Nn",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(W_.prototype,"ss",{get:function(){return this.ns},enumerable:!1,configurable:!0}),Object.defineProperty(W_.prototype,"cursor",{set:function(t){this.ts=t},enumerable:!1,configurable:!0}),W_.prototype.done=function(){this.es=!0},W_.prototype.rs=function(t){this.ns=t},W_.prototype.delete=function(){return $_(this.ts.delete())},W_),H_=(bo(K_,F_=hy),K_);function K_(t,e){var n=this;return(n=F_.call(this,cy.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function W_(t){this.ts=t,this.es=!1,this.ns=null}function z_(t,e,n){this.name=t,this.version=e,this.Qn=n,12.2===z_.Kn(Fo())&&Xv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function G_(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.qn=new U_,this.transaction.oncomplete=function(){n.qn.resolve()},this.transaction.onabort=function(){t.error?n.qn.reject(new H_(e,t.error)):n.qn.resolve()},this.transaction.onerror=function(t){t=tw(t.target.error);n.qn.reject(new H_(e,t))}}function Q_(t){var e=this;this.Cn=null,this.xn=null,this.result=void 0,this.error=void 0,this.Nn=!1,this.Fn=!1,t(function(t){e.Nn=!0,e.result=t,e.Cn&&e.Cn(t)},function(t){e.Nn=!0,e.error=t,e.xn&&e.xn(t)})}function Y_(t){return"IndexedDbTransactionError"===t.name}var X_=(J_.prototype.put=function(t,e){t=void 0!==e?(Yv("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Yv("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return $_(t)},J_.prototype.add=function(t){return Yv("SimpleDb","ADD",this.store.name,t,t),$_(this.store.add(t))},J_.prototype.get=function(e){var n=this;return $_(this.store.get(e)).next(function(t){return void 0===t&&(t=null),Yv("SimpleDb","GET",n.store.name,e,t),t})},J_.prototype.delete=function(t){return Yv("SimpleDb","DELETE",this.store.name,t),$_(this.store.delete(t))},J_.prototype.count=function(){return Yv("SimpleDb","COUNT",this.store.name),$_(this.store.count())},J_.prototype.os=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.cs(e,function(t,e){n.push(e)}).next(function(){return n})},J_.prototype.us=function(t,e){Yv("SimpleDb","DELETE ALL",this.store.name);e=this.options(t,e);e.hs=!1;e=this.cursor(e);return this.cs(e,function(t,e,n){return n.delete()})},J_.prototype.ls=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.cs(n,e)},J_.prototype._s=function(r){var t=this.cursor({});return new j_(function(n,e){t.onerror=function(t){t=tw(t.target.error);e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},J_.prototype.cs=function(t,i){var o=[];return new j_(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new B_(n),(t=i(n.primaryKey,n.value,e))instanceof j_&&(t=t.catch(function(t){return e.done(),j_.reject(t)}),o.push(t)),e.Nn?r():null===e.ss?n.continue():n.continue(e.ss)):r()}}).next(function(){return j_.Ln(o)})},J_.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},J_.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.hs?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},J_);function J_(t){this.store=t}function $_(t){return new j_(function(e,n){t.onsuccess=function(t){t=t.target.result;e(t)},t.onerror=function(t){t=tw(t.target.error);n(t)}})}var Z_=!1;function tw(t){var e=q_.Kn(Fo());if(12.2<=e&&e<13){e="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(e)){var n=new hy("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Z_||(Z_=!0,setTimeout(function(){throw n},0)),n}}return t}var ew=(nw.Is=function(t,e,n,r,i){i=new nw(t,e,Date.now()+n,r,i);return i.start(n),i},nw.prototype.start=function(t){var e=this;this.As=setTimeout(function(){return e.Rs()},t)},nw.prototype.Ps=function(){return this.Rs()},nw.prototype.cancel=function(t){null!==this.As&&(this.clearTimeout(),this.Ts.reject(new hy(cy.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},nw.prototype.Rs=function(){var e=this;this.fs.ys(function(){return null!==e.As?(e.clearTimeout(),e.op().then(function(t){return e.Ts.resolve(t)})):Promise.resolve()})},nw.prototype.clearTimeout=function(){null!==this.As&&(this.Es(this),clearTimeout(this.As),this.As=null)},nw);function nw(t,e,n,r,i){this.fs=t,this.ds=e,this.ws=n,this.op=r,this.Es=i,this.Ts=new U_,this.then=this.Ts.promise.then.bind(this.Ts.promise),this.Ts.promise.catch(function(t){})}function rw(t,e){if(Xv("AsyncQueue",e+": "+t),Y_(t))return new hy(cy.UNAVAILABLE,e+": "+t);throw t}var iw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Gn=(ow.prototype.Vs=function(t){this.gs.push(t)},ow.prototype.ps=function(){this.gs.forEach(function(t){return t()})},ow);function ow(){this.gs=[]}function sw(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=aw(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return aw(e)}function aw(t){return t+""}function uw(t){var e=t.length;if(ty(2<=e),2===e)return ty(""===t.charAt(0)&&""===t.charAt(1)),Vy.at();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&Zv(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Zv()}o=s+2}return new Vy(r)}function cw(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var hw=function(t,e){this.seconds=t,this.nanoseconds=e};cw.store="owner",cw.key="owner";function lw(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}lw.store="mutationQueues",lw.keyPath="userId";function fw(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}fw.store="mutations",fw.keyPath="batchId",fw.userMutationsIndex="userMutationsIndex",fw.userMutationsKeyPath=["userId","batchId"];var pw=(dw.prefixForUser=function(t){return[t]},dw.prefixForPath=function(t,e){return[t,sw(e)]},dw.key=function(t,e,n){return[t,sw(e),n]},dw);function dw(){}pw.store="documentMutations",pw.PLACEHOLDER=new pw;function vw(t,e){this.path=t,this.readTime=e}function yw(t,e){this.path=t,this.version=e}var gw=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};gw.store="remoteDocuments",gw.readTimeIndex="readTimeIndex",gw.readTimeIndexPath="readTime",gw.collectionReadTimeIndex="collectionReadTimeIndex",gw.collectionReadTimeIndexPath=["parentPath","readTime"];function mw(t){this.byteSize=t}mw.store="remoteDocumentGlobal",mw.key="remoteDocumentGlobalKey";function bw(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}bw.store="targets",bw.keyPath="targetId",bw.queryTargetsIndexName="queryTargetsIndex",bw.queryTargetsKeyPath=["canonicalId","targetId"];var _w=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};_w.store="targetDocuments",_w.keyPath=["targetId","path"],_w.documentTargetsIndex="documentTargetsIndex",_w.documentTargetsKeyPath=["path","targetId"];function ww(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}ww.key="targetGlobalKey",ww.store="targetGlobal";function Ew(t,e){this.collectionId=t,this.parent=e}Ew.store="collectionParents",Ew.keyPath=["collectionId","parent"];function Iw(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}Iw.store="clientMetadata",Iw.keyPath="clientId";function Tw(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}Tw.store="bundles",Tw.keyPath="bundleId";function Sw(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}Sw.store="namedQueries",Sw.keyPath="name";var Cw,Nw=Co(Co(Co(Co([lw.store,fw.store,pw.store,gw.store,bw.store,cw.store,ww.store,_w.store],[Iw.store]),[mw.store]),[Ew.store]),[Tw.store,Sw.store]),Aw=(bo(kw,Cw=Gn),kw);function kw(t,e){var n=this;return(n=Cw.call(this)||this).bs=t,n.vs=e,n}function Ow(t,e){return q_.Hn(t.bs,e)}var Rw=(Lw.prototype.Ds=function(t,e,n){for(var r,i,o,s,a,u,c=n.Cs,h=0;h<this.mutations.length;h++){var l=this.mutations[h];l.key.isEqual(t)&&(r=l,i=e,o=c[h],l=u=a=s=void 0,e=r instanceof hb?(a=o,l=(s=r).value,a.transformResults&&(u=vb(s.fieldTransforms,i,a.transformResults),l=gb(s.fieldTransforms,l,u)),new kg(s.key,a.version,l,{hasCommittedMutations:!0})):r instanceof lb?function(t,e,n){if(!ib(t.Gt,e))return new Rg(t.key,n.version);e=db(t,e,n.transformResults?vb(t.fieldTransforms,e,n.transformResults):[]);return new kg(t.key,n.version,e,{hasCommittedMutations:!0})}(r,i,o):new Og(r.key,o.version,{hasCommittedMutations:!0}))}return e},Lw.prototype.xs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(i=r[n]).key.isEqual(t)&&(e=ob(i,e,0,this.Ss));for(var i,o=0,s=this.mutations;o<s.length;o++){(i=s[o]).key.isEqual(t)&&(e=ob(i,e,0,this.Ss))}return e},Lw.prototype.Ns=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.xs(t.key,n.get(t.key));e&&(i=i.Ht(t.key,e))}),i},Lw.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Hb())},Lw.prototype.isEqual=function(t){return this.batchId===t.batchId&&iy(this.mutations,t.mutations,sb)&&iy(this.baseMutations,t.baseMutations,sb)},Lw),Pw=(xw.from=function(t,e,n){ty(t.mutations.length===n.length);for(var r=qb,i=t.mutations,o=0;o<i.length;o++)r=r.Ht(i[o].key,n[o].version);return new xw(t,e,n,r)},xw),Dw=function(t){this.ks=t};function xw(t,e,n,r){this.batch=t,this.Fs=e,this.Cs=n,this.Os=r}function Lw(t,e,n,r){this.batchId=t,this.Ss=e,this.baseMutations=n,this.mutations=r}function Mw(t,e){if(e.document)return S_(t.ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Hy.Tt(e.noDocument.path),r=qw(e.noDocument.readTime);return new Og(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){n=Hy.Tt(e.unknownDocument.path),r=qw(e.unknownDocument.version);return new Rg(n,r)}return Zv()}function Fw(t,e,n){var r=Uw(n),n=e.key.path.Z().rt();if(e instanceof kg){var i={name:m_(o=t.ks,(s=e).key),fields:s.vt().mapValue.fields,updateTime:p_(o,s.version.G())},o=e.hasCommittedMutations;return new gw(null,null,i,o,r,n)}if(e instanceof Og){var s=e.key.path.rt(),i=Vw(e.version),o=e.hasCommittedMutations;return new gw(null,new vw(s,i),null,o,r,n)}if(e instanceof Rg){o=e.key.path.rt(),e=Vw(e.version);return new gw(new yw(o,e),null,null,!0,r,n)}return Zv()}function Uw(t){t=t.G();return[t.seconds,t.nanoseconds]}function jw(t){t=new Uy(t[0],t[1]);return jy.W(t)}function Vw(t){t=t.G();return new hw(t.seconds,t.nanoseconds)}function qw(t){t=new Uy(t.seconds,t.nanoseconds);return jy.W(t)}function Bw(e,t){for(var n=(t.baseMutations||[]).map(function(t){return N_(e.ks,t)}),r=t.mutations.length-1;0<=r;--r){var i=t.mutations[r];void 0!==(null==i?void 0:i.transform)&&(t.mutations[r-1].updateTransforms=i.transform.fieldTransforms,t.mutations.splice(r,1),--r)}var o=t.mutations.map(function(t){return N_(e.ks,t)}),s=Uy.fromMillis(t.localWriteTimeMs);return new Rw(t.batchId,s,n,o)}function Hw(t){var e=qw(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?qw(t.lastLimboFreeSnapshotVersion):jy.min(),r=void 0!==t.query.documents?(ty(1===(r=t.query).documents.length),Sm(mm(w_(r.documents[0])))):Sm(O_(t.query));return new Pm(r,t.targetId,0,t.lastListenSequenceNumber,e,n,sy.fromBase64String(t.resumeToken))}function Kw(t,e){var n=Vw(e.Mt),r=Vw(e.lastLimboFreeSnapshotVersion),i=(jg(e.target)?A_:k_)(t.ks,e.target),t=e.resumeToken.toBase64();return new bw(e.targetId,Fg(e.target),n,t,e.sequenceNumber,r,i)}function Ww(t){var e=O_({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Cm(e,e.limit,"L"):e}var zw=(Gw.prototype.Ms=function(t,e){return Qw(t).get(e).next(function(t){if(t)return{id:(t=t).bundleId,createTime:qw(t.createTime),version:t.version}})},Gw.prototype.$s=function(t,e){return Qw(t).put({bundleId:(e=e).id,createTime:Vw(v_(e.createTime)),version:e.version})},Gw.prototype.Ls=function(t,e){return Yw(t).get(e).next(function(t){if(t)return{name:(t=t).name,query:Ww(t.bundledQuery),readTime:qw(t.readTime)}})},Gw.prototype.Bs=function(t,e){return Yw(t).put({name:(e=e).name,readTime:Vw(v_(e.readTime)),bundledQuery:e.bundledQuery})},Gw);function Gw(){}function Qw(t){return Ow(t,Tw.store)}function Yw(t){return Ow(t,Sw.store)}var Xw=(eE.prototype.Us=function(t,e){return this.qs.add(e),j_.resolve()},eE.prototype.Qs=function(t,e){return j_.resolve(this.qs.getEntries(e))},eE),Jw=(tE.prototype.add=function(t){var e=t.et(),n=t.Z(),r=this.index[e]||new Lb(Vy.J),t=!r.has(n);return this.index[e]=r.add(n),t},tE.prototype.has=function(t){var e=t.et(),t=t.Z(),e=this.index[e];return e&&e.has(t)},tE.prototype.getEntries=function(t){return(this.index[t]||new Lb(Vy.J)).rt()},tE),$w=(Zw.prototype.Us=function(t,e){var n=this;if(this.Ks.has(e))return j_.resolve();var r=e.et(),i=e.Z();t.Vs(function(){n.Ks.add(e)});i={collectionId:r,parent:sw(i)};return nE(t).put(i)},Zw.prototype.Qs=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[oy(i),""],!1,!0);return nE(t).os(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(uw(r.parent))}return o})},Zw);function Zw(){this.Ks=new Jw}function tE(){this.index={}}function eE(){this.qs=new Jw}function nE(t){return Ow(t,Ew.store)}var rE={Ws:!1,js:0,Gs:0,zs:0},iE=(oE.Xs=function(t){return new oE(t,oE.Zs,oE.ti)},oE);function oE(t,e,n){this.Hs=t,this.Js=e,this.Ys=n}function sE(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){if(e.code!==cy.FAILED_PRECONDITION||e.message!==iw)throw e;return Yv("LocalStore","Unexpectedly lost primary lease"),[2]})})}iE.Zs=10,iE.ti=1e3,iE.ei=new iE(41943040,iE.Zs,iE.ti),iE.ni=new iE(-1,0,0);var aE=(cE.prototype.get=function(t){var e=this.si(t),e=this.ri[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.ii(o,t))return i}},cE.prototype.has=function(t){return void 0!==this.get(t)},cE.prototype.set=function(t,e){var n=this.si(t),r=this.ri[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.ii(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ri[n]=[[t,e]]},cE.prototype.delete=function(t){var e=this.si(t),n=this.ri[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.ii(n[r][0],t))return 1===n.length?delete this.ri[e]:n.splice(r,1),!0;return!1},cE.prototype.forEach=function(s){Jy(this.ri,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];s(o,i)}})},cE.prototype.nt=function(){return $y(this.ri)},cE),vt=(uE.prototype.ai=function(t){t=this.oi.get(t);return t?t.readTime:jy.min()},uE.prototype.ui=function(t,e){this.hi(),this.oi.set(t.key,{li:t,readTime:e})},uE.prototype._i=function(t,e){void 0===e&&(e=null),this.hi(),this.oi.set(t,{li:null,readTime:e})},uE.prototype.fi=function(t,e){this.hi();var n=this.oi.get(e);return void 0!==n?j_.resolve(n.li):this.di(t,e)},uE.prototype.getEntries=function(t,e){return this.wi(t,e)},uE.prototype.apply=function(t){return this.hi(),this.ci=!0,this.Ei(t)},uE.prototype.hi=function(){},uE);function uE(){this.oi=new aE(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.ci=!1}function cE(t,e){this.si=t,this.ii=e,this.ri={}}function hE(t,e,n){var r=t.store(fw.store),i=t.store(pw.store),o=[],t=IDBKeyRange.only(n.batchId),s=0,t=r.ls({range:t},function(t,e,n){return s++,n.delete()});o.push(t.next(function(){ty(1===s)}));for(var a=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=pw.key(e,h.key.path,n.batchId);o.push(i.delete(l)),a.push(h.key)}return j_.Ln(o).next(function(){return a})}function lE(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Zv();e=t.noDocument}return JSON.stringify(e).length}var fE=(pE.Ai=function(t,e,n,r){return ty(""!==t.uid),new pE(t.A()?t.uid:"",e,n,r)},pE.prototype.Ri=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vE(t).ls({index:fw.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},pE.prototype.Pi=function(d,v,y,g){var m=this,b=yE(d),_=vE(d);return _.add({}).next(function(t){ty("number"==typeof t);for(var e,n,r,i,o,s=new Rw(t,v,y,g),a=(e=m.Kt,n=m.userId,i=(r=s).baseMutations.map(function(t){return C_(e.ks,t)}),o=r.mutations.map(function(t){return C_(e.ks,t)}),new fw(n,r.batchId,r.Ss.toMillis(),i,o)),u=[],c=new Lb(function(t,e){return ry(t.ot(),e.ot())}),h=0,l=g;h<l.length;h++){var f=l[h],p=pw.key(m.userId,f.key.path,t),c=c.add(f.key.path.Z());u.push(_.put(a)),u.push(b.put(p,pw.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Ti.Us(d,t))}),d.Vs(function(){m.mi[t]=s.keys()}),j_.Ln(u).next(function(){return s})})},pE.prototype.yi=function(t,e){var n=this;return vE(t).get(e).next(function(t){return t?(ty(t.userId===n.userId),Bw(n.Kt,t)):null})},pE.prototype.gi=function(t,e){var n=this;return this.mi[e]?j_.resolve(this.mi[e]):this.yi(t,e).next(function(t){if(t){t=t.keys();return n.mi[e]=t}return null})},pE.prototype.Vi=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return vE(t).ls({index:fw.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(ty(e.batchId>=i),o=Bw(r.Kt,e)),n.done()}).next(function(){return o})},pE.prototype.pi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return vE(t).ls({index:fw.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},pE.prototype.bi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vE(t).os(fw.userMutationsIndex,n).next(function(t){return t.map(function(t){return Bw(e.Kt,t)})})},pE.prototype.vi=function(o,s){var a=this,t=pw.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),u=[];return yE(o).ls({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=uw(i);if(r===a.userId&&s.path.isEqual(i))return vE(o).get(t).next(function(t){if(!t)throw Zv();ty(t.userId===a.userId),u.push(Bw(a.Kt,t))});n.done()}).next(function(){return u})},pE.prototype.Si=function(e,t){var s=this,a=new Lb(ry),n=[];return t.forEach(function(o){var t=pw.prefixForPath(s.userId,o.path),t=IDBKeyRange.lowerBound(t),t=yE(e).ls({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=uw(i);r===s.userId&&o.path.isEqual(i)?a=a.add(t):n.done()});n.push(t)}),j_.Ln(n).next(function(){return s.Di(e,a)})},pE.prototype.Ci=function(t,e){var o=this,s=e.path,a=s.length+1,e=pw.prefixForPath(this.userId,s),e=IDBKeyRange.lowerBound(e),u=new Lb(ry);return yE(t).ls({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=uw(i);r===o.userId&&s.st(i)?i.length===a&&(u=u.add(t)):n.done()}).next(function(){return o.Di(t,u)})},pE.prototype.Di=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(vE(e).get(t).next(function(t){if(null===t)throw Zv();ty(t.userId===n.userId),r.push(Bw(n.Kt,t))}))}),j_.Ln(i).next(function(){return r})},pE.prototype.xi=function(e,n){var r=this;return hE(e.bs,this.userId,n).next(function(t){return e.Vs(function(){r.Ni(n.batchId)}),j_.forEach(t,function(t){return r.Ii.Fi(e,t)})})},pE.prototype.Ni=function(t){delete this.mi[t]},pE.prototype.Oi=function(e){var i=this;return this.Ri(e).next(function(t){if(!t)return j_.resolve();var t=IDBKeyRange.lowerBound(pw.prefixForUser(i.userId)),r=[];return yE(e).ls({range:t},function(t,e,n){t[0]===i.userId?(t=uw(t[1]),r.push(t)):n.done()}).next(function(){ty(0===r.length)})})},pE.prototype.ki=function(t,e){return dE(t,this.userId,e)},pE.prototype.Mi=function(t){var e=this;return gE(t).get(this.userId).next(function(t){return t||new lw(e.userId,-1,"")})},pE);function pE(t,e,n,r){this.userId=t,this.Kt=e,this.Ti=n,this.Ii=r,this.mi={}}function dE(t,o,e){var e=pw.prefixForPath(o,e.path),s=e[1],e=IDBKeyRange.lowerBound(e),a=!1;return yE(t).ls({range:e,hs:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function vE(t){return Ow(t,fw.store)}function yE(t){return Ow(t,pw.store)}function gE(t){return Ow(t,lw.store)}var mE=(wE.prototype.next=function(){return this.$i+=2,this.$i},wE.Li=function(){return new wE(0)},wE.Bi=function(){return new wE(-1)},wE),bE=(_E.prototype.qi=function(n){var r=this;return this.Ui(n).next(function(t){var e=new mE(t.highestTargetId);return t.highestTargetId=e.next(),r.Qi(n,t).next(function(){return t.highestTargetId})})},_E.prototype.Ki=function(t){return this.Ui(t).next(function(t){return jy.W(new Uy(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},_E.prototype.Wi=function(t){return this.Ui(t).next(function(t){return t.highestListenSequenceNumber})},_E.prototype.ji=function(e,n,r){var i=this;return this.Ui(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.G()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Qi(e,t)})},_E.prototype.Gi=function(e,n){var r=this;return this.zi(e,n).next(function(){return r.Ui(e).next(function(t){return t.targetCount+=1,r.Hi(n,t),r.Qi(e,t)})})},_E.prototype.Ji=function(t,e){return this.zi(t,e)},_E.prototype.Yi=function(e,t){var n=this;return this.Xi(e,t.targetId).next(function(){return EE(e).delete(t.targetId)}).next(function(){return n.Ui(e)}).next(function(t){return ty(0<t.targetCount),--t.targetCount,n.Qi(e,t)})},_E.prototype.Zi=function(n,r,i){var o=this,s=0,a=[];return EE(n).ls(function(t,e){e=Hw(e);e.sequenceNumber<=r&&null===i.get(e.targetId)&&(s++,a.push(o.Yi(n,e)))}).next(function(){return j_.Ln(a)}).next(function(){return s})},_E.prototype.mn=function(t,n){return EE(t).ls(function(t,e){e=Hw(e);n(e)})},_E.prototype.Ui=function(t){return IE(t).get(ww.key).next(function(t){return ty(null!==t),t})},_E.prototype.Qi=function(t,e){return IE(t).put(ww.key,e)},_E.prototype.zi=function(t,e){return EE(t).put(Kw(this.Kt,e))},_E.prototype.Hi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},_E.prototype.tr=function(t){return this.Ui(t).next(function(t){return t.targetCount})},_E.prototype.er=function(t,r){var e=Fg(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return EE(t).ls({range:e,index:bw.queryTargetsIndexName},function(t,e,n){e=Hw(e);Ug(r,e.target)&&(i=e,n.done())}).next(function(){return i})},_E.prototype.nr=function(n,t,r){var i=this,o=[],s=TE(n);return t.forEach(function(t){var e=sw(t.path);o.push(s.put(new _w(r,e))),o.push(i.Ii.sr(n,r,t))}),j_.Ln(o)},_E.prototype.ir=function(n,t,r){var i=this,o=TE(n);return j_.forEach(t,function(t){var e=sw(t.path);return j_.Ln([o.delete([r,e]),i.Ii.rr(n,r,t)])})},_E.prototype.Xi=function(t,e){t=TE(t),e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},_E.prototype.cr=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=TE(t),r=Hb();return t.ls({range:e,hs:!0},function(t,e,n){t=uw(t[1]),t=new Hy(t);r=r.add(t)}).next(function(){return r})},_E.prototype.ki=function(t,e){var e=sw(e.path),e=IDBKeyRange.bound([e],[oy(e)],!1,!0),i=0;return TE(t).ls({index:_w.documentTargetsIndex,hs:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},_E.prototype.Dn=function(t,e){return EE(t).get(e).next(function(t){return t?Hw(t):null})},_E);function _E(t,e){this.Ii=t,this.Kt=e}function wE(t){this.$i=t}function EE(t){return Ow(t,bw.store)}function IE(t){return Ow(t,ww.store)}function TE(t){return Ow(t,_w.store)}function SE(t,e){var n=t[0],r=t[1],t=e[0],e=e[1],t=ry(n,t);return 0===t?ry(r,e):t}var CE=(DE.prototype.hr=function(){return++this.ur},DE.prototype.lr=function(t){var e=[t,this.hr()];this.buffer.size<this.ar?this.buffer=this.buffer.add(e):SE(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(DE.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),DE),NE=(PE.prototype.start=function(t){-1!==this._r.params.Hs&&this.Er(t)},PE.prototype.stop=function(){this.wr&&(this.wr.cancel(),this.wr=null)},Object.defineProperty(PE.prototype,"Tr",{get:function(){return null!==this.wr},enumerable:!1,configurable:!0}),PE.prototype.Er=function(n){var t=this,e=this.dr?3e5:6e4;Yv("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.wr=this.fs.Ir("lru_garbage_collection",e,function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:this.wr=null,this.dr=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.mr(this._r)];case 2:return t.sent(),[3,7];case 3:return Y_(e=t.sent())?(Yv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,sE(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.Er(n)];case 8:return t.sent(),[2]}})})})},PE),AE=(RE.prototype.Rr=function(t,e){return this.Ar.Pr(t).next(function(t){return Math.floor(e/100*t)})},RE.prototype.yr=function(t,e){var n=this;if(0===e)return j_.resolve(Oy.U);var r=new CE(e);return this.Ar.mn(t,function(t){return r.lr(t.sequenceNumber)}).next(function(){return n.Ar.gr(t,function(t){return r.lr(t)})}).next(function(){return r.maxValue})},RE.prototype.Zi=function(t,e,n){return this.Ar.Zi(t,e,n)},RE.prototype.Vr=function(t,e){return this.Ar.Vr(t,e)},RE.prototype.pr=function(e,n){var r=this;return-1===this.params.Hs?(Yv("LruGarbageCollector","Garbage collection skipped; disabled"),j_.resolve(rE)):this.br(e).next(function(t){return t<r.params.Hs?(Yv("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.Hs),rE):r.vr(e,n)})},RE.prototype.br=function(t){return this.Ar.br(t)},RE.prototype.vr=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.Rr(e,this.params.Js).next(function(t){return i=t>h.params.Ys?(Yv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.Ys+" from "+t),h.params.Ys):t,s=Date.now(),h.yr(e,i)}).next(function(t){return r=t,a=Date.now(),h.Zi(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.Vr(e,r)}).next(function(t){return c=Date.now(),Qv()<=ks.DEBUG&&Yv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),j_.resolve({Ws:!0,js:i,Gs:o,zs:t})})},RE),kE=(OE.prototype.Pr=function(t){var n=this.Sr(t);return this.db.Dr().tr(t).next(function(e){return n.next(function(t){return e+t})})},OE.prototype.Sr=function(t){var e=0;return this.gr(t,function(t){e++}).next(function(){return e})},OE.prototype.mn=function(t,e){return this.db.Dr().mn(t,e)},OE.prototype.gr=function(t,n){return this.Cr(t,function(t,e){return n(e)})},OE.prototype.sr=function(t,e,n){return xE(t,n)},OE.prototype.rr=function(t,e,n){return xE(t,n)},OE.prototype.Zi=function(t,e,n){return this.db.Dr().Zi(t,e,n)},OE.prototype.Fi=xE,OE.prototype.Nr=function(t,e){return r=e,i=!1,gE(n=t)._s(function(t){return dE(n,t,r).next(function(t){return t&&(i=!0),j_.resolve(!t)})}).next(function(){return i});var n,r,i},OE.prototype.Vr=function(n,r){var i=this,o=this.db.Or().Fr(),s=[],a=0;return this.Cr(n,function(e,t){t<=r&&(t=i.Nr(n,e).next(function(t){if(!t)return a++,o.fi(n,e).next(function(){return o._i(e),TE(n).delete([0,sw(e.path)])})}),s.push(t))}).next(function(){return j_.Ln(s)}).next(function(){return o.apply(n)}).next(function(){return a})},OE.prototype.removeTarget=function(t,e){e=e.$t(t.vs);return this.db.Dr().Ji(t,e)},OE.prototype.kr=xE,OE.prototype.Cr=function(t,r){var i,t=TE(t),o=Oy.U;return t.ls({index:_w.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==Oy.U&&r(new Hy(uw(i)),o),o=e,i=t):o=Oy.U}).next(function(){o!==Oy.U&&r(new Hy(uw(i)),o)})},OE.prototype.br=function(t){return this.db.Or().Mr(t)},OE);function OE(t,e){this.db=t,this._r=new AE(this,e)}function RE(t,e){this.Ar=t,this.params=e}function PE(t,e){this._r=t,this.fs=e,this.dr=!1,this.wr=null}function DE(t){this.ar=t,this.buffer=new Lb(SE),this.ur=0}function xE(t,e){return TE(t).put((t=t.vs,new _w(0,sw(e.path),t)))}var LE,ME=(jE.prototype.ui=function(t,e,n){return qE(t).put(BE(e),n)},jE.prototype._i=function(t,e){t=qE(t),e=BE(e);return t.delete(e)},jE.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.$r(e,t)})},jE.prototype.fi=function(t,e){var n=this;return qE(t).get(BE(e)).next(function(t){return n.Lr(t)})},jE.prototype.Br=function(t,e){var n=this;return qE(t).get(BE(e)).next(function(t){var e=n.Lr(t);return e?{li:e,size:lE(t)}:null})},jE.prototype.getEntries=function(t,e){var n=this,r=Fb;return this.qr(t,e,function(t,e){e=n.Lr(e);r=r.Ht(t,e)}).next(function(){return r})},jE.prototype.Ur=function(t,e){var r=this,i=Fb,o=new Ab(Hy.J);return this.qr(t,e,function(t,e){var n=r.Lr(e);o=n?(i=i.Ht(t,n),o.Ht(t,lE(e))):(i=i.Ht(t,null),o.Ht(t,0))}).next(function(){return{Qr:i,Kr:o}})},jE.prototype.qr=function(t,e,i){if(e.nt())return j_.resolve();var n=IDBKeyRange.bound(e.first().path.rt(),e.last().path.rt()),o=e.ee(),s=o.ce();return qE(t).ls({range:n},function(t,e,n){for(var r=Hy.Tt(t);s&&Hy.J(s,r)<0;)i(s,null),s=o.ce();s&&s.isEqual(r)&&(i(s,e),s=o.ae()?o.ce():null),s?n.rs(s.path.rt()):n.done()}).next(function(){for(;s;)i(s,null),s=o.ae()?o.ce():null})},jE.prototype.Wr=function(t,r,e){var n,i=this,o=Vb,s=r.path.length+1,a={};return e.isEqual(jy.min())?(n=r.path.rt(),a.range=IDBKeyRange.lowerBound(n)):(n=r.path.rt(),e=Uw(e),a.range=IDBKeyRange.lowerBound([n,e],!0),a.index=gw.collectionReadTimeIndex),qE(t).ls(a,function(t,e,n){t.length===s&&(e=Mw(i.Kt,e),r.path.st(e.key.path)?e instanceof kg&&Om(r,e)&&(o=o.Ht(e.key,e)):n.done())}).next(function(){return o})},jE.prototype.Fr=function(t){return new FE(this,!!t&&t.jr)},jE.prototype.Mr=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},jE.prototype.getMetadata=function(t){return VE(t).get(mw.key).next(function(t){return ty(!!t),t})},jE.prototype.$r=function(t,e){return VE(t).put(mw.key,e)},jE.prototype.Lr=function(t){if(t){t=Mw(this.Kt,t);return t instanceof Og&&t.version.isEqual(jy.min())?null:t}return null},jE),FE=(bo(UE,LE=vt),UE.prototype.Ei=function(i){var o=this,s=[],a=0,u=new Lb(function(t,e){return ry(t.ot(),e.ot())});return this.oi.forEach(function(t,e){var n,r=o.zr.get(t);e.li?(n=Fw(o.Gr.Kt,e.li,o.ai(t)),u=u.add(t.path.Z()),e=lE(n),a+=e-r,s.push(o.Gr.ui(i,t,n))):(a-=r,o.jr?(r=Fw(o.Gr.Kt,new Og(t,jy.min()),o.ai(t)),s.push(o.Gr.ui(i,t,r))):s.push(o.Gr._i(i,t)))}),u.forEach(function(t){s.push(o.Gr.Ti.Us(i,t))}),s.push(this.Gr.updateMetadata(i,a)),j_.Ln(s)},UE.prototype.di=function(t,e){var n=this;return this.Gr.Br(t,e).next(function(t){return null===t?(n.zr.set(e,0),null):(n.zr.set(e,t.size),t.li)})},UE.prototype.wi=function(t,e){var n=this;return this.Gr.Ur(t,e).next(function(t){var e=t.Qr;return t.Kr.forEach(function(t,e){n.zr.set(t,e)}),e})},UE);function UE(t,e){var n=this;return(n=LE.call(this)||this).Gr=t,n.jr=e,n.zr=new aE(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function jE(t,e){this.Kt=t,this.Ti=e}function VE(t){return Ow(t,mw.store)}function qE(t){return Ow(t,gw.store)}function BE(t){return t.path.rt()}var HE=(KE.prototype.Yn=function(e,n,t,r){var i=this;ty(t<r&&0<=t&&r<=11);var o=new V_("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(cw.store),(s=e).createObjectStore(lw.store,{keyPath:lw.keyPath}),s.createObjectStore(fw.store,{keyPath:fw.keyPath,autoIncrement:!0}).createIndex(fw.userMutationsIndex,fw.userMutationsKeyPath,{unique:!0}),s.createObjectStore(pw.store),WE(e),e.createObjectStore(gw.store));var s,a=j_.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(_w.store),s.deleteObjectStore(bw.store),s.deleteObjectStore(ww.store),WE(e)),a=a.next(function(){return t=o.store(ww.store),e=new ww(0,0,jy.min().G(),0),t.put(ww.key,e);var t,e})),t<4&&4<=r&&(0!==t&&(a=a.next(function(){return n=e,(r=o).store(fw.store).os().next(function(t){n.deleteObjectStore(fw.store),n.createObjectStore(fw.store,{keyPath:fw.keyPath,autoIncrement:!0}).createIndex(fw.userMutationsIndex,fw.userMutationsKeyPath,{unique:!0});var e=r.store(fw.store),t=t.map(function(t){return e.put(t)});return j_.Ln(t)});var n,r})),a=a.next(function(){e.createObjectStore(Iw.store,{keyPath:Iw.keyPath})})),t<5&&5<=r&&(a=a.next(function(){return i.Hr(o)})),t<6&&6<=r&&(a=a.next(function(){return e.createObjectStore(mw.store),i.Jr(o)})),t<7&&7<=r&&(a=a.next(function(){return i.Yr(o)})),t<8&&8<=r&&(a=a.next(function(){return i.Xr(e,o)})),t<9&&9<=r&&(a=a.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(gw.store)).createIndex(gw.readTimeIndex,gw.readTimeIndexPath,{unique:!1}),t.createIndex(gw.collectionReadTimeIndex,gw.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(a=a.next(function(){return i.Zr(o)})),t<11&&11<=r&&(a=a.next(function(){e.createObjectStore(Tw.store,{keyPath:Tw.keyPath}),e.createObjectStore(Sw.store,{keyPath:Sw.keyPath})})),a},KE.prototype.Jr=function(e){var n=0;return e.store(gw.store).ls(function(t,e){n+=lE(e)}).next(function(){var t=new mw(n);return e.store(mw.store).put(mw.key,t)})},KE.prototype.Hr=function(n){var r=this,t=n.store(lw.store),i=n.store(fw.store);return t.os().next(function(t){return j_.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.os(fw.userMutationsIndex,t).next(function(t){return j_.forEach(t,function(t){ty(t.userId===e.userId);t=Bw(r.Kt,t);return hE(n,e.userId,t).next(function(){})})})})})},KE.prototype.Yr=function(t){var o=t.store(_w.store),e=t.store(gw.store);return t.store(ww.store).get(ww.key).next(function(r){var i=[];return e.ls(function(t,e){var n=new Vy(t),t=[0,sw(n)];i.push(o.get(t).next(function(t){return t?j_.resolve():o.put(new _w(0,sw(n),r.highestListenSequenceNumber))}))}).next(function(){return j_.Ln(i)})})},KE.prototype.Xr=function(t,e){t.createObjectStore(Ew.store,{keyPath:Ew.keyPath});function r(t){if(i.add(t)){var e=t.et(),t=t.Z();return n.put({collectionId:e,parent:sw(t)})}}var n=e.store(Ew.store),i=new Jw;return e.store(gw.store).ls({hs:!0},function(t,e){t=new Vy(t);return r(t.Z())}).next(function(){return e.store(pw.store).ls({hs:!0},function(t,e){t[0];var n=t[1],n=(t[2],uw(n));return r(n.Z())})})},KE.prototype.Zr=function(t){var n=this,r=t.store(bw.store);return r.ls(function(t,e){e=Hw(e),e=Kw(n.Kt,e);return r.put(e)})},KE);function KE(t){this.Kt=t}function WE(t){t.createObjectStore(_w.store,{keyPath:_w.keyPath}).createIndex(_w.documentTargetsIndex,_w.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(bw.store,{keyPath:bw.keyPath}).createIndex(bw.queryTargetsIndexName,bw.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ww.store)}var zE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",GE=(QE.prototype.start=function(){var e=this;return this.Io().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new hy(cy.FAILED_PRECONDITION,zE);return e.mo(),e.Ao(),e.Ro(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.fo.Wi(t)})}).then(function(t){e.io=new Oy(t,e.no)}).then(function(){e.ro=!0}).catch(function(t){return e._o&&e._o.close(),Promise.reject(t)})},QE.prototype.Po=function(n){var t=this;return this.ho=function(e){return wo(t,void 0,void 0,function(){return Eo(this,function(t){return this.Tr?[2,n(e)]:[2]})})},n(this.isPrimary)},QE.prototype.yo=function(n){var t=this;this._o.Zn(function(e){return wo(t,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},QE.prototype.Vo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.eo.ys(function(){return wo(e,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return this.Tr?[4,this.Io()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},QE.prototype.Io=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return XE(e).put(new Iw(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.po(e).next(function(t){t||(n.isPrimary=!1,n.eo.bo(function(){return n.ho(!1)}))})}).next(function(){return n.vo(e)}).next(function(t){return n.isPrimary&&!t?n.So(e).next(function(){return!1}):!!t&&n.Do(e).next(function(){return!0})})}).catch(function(t){if(Y_(t))return Yv("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return Yv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.eo.bo(function(){return n.ho(t)}),n.isPrimary=t})},QE.prototype.po=function(t){var e=this;return YE(t).get(cw.key).next(function(t){return j_.resolve(e.Co(t))})},QE.prototype.xo=function(t){return XE(t).delete(this.clientId)},QE.prototype.No=function(){return wo(this,void 0,void 0,function(){var e,n,r,i,o=this;return Eo(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.Fo(this.uo,18e5)?[3,2]:(this.uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=Ow(t,Iw.store);return r.os().next(function(t){var e=o.Oo(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return j_.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.To)for(n=0,r=e;n<r.length;n++)i=r[n],this.To.removeItem(this.ko(i.clientId));t.label=2;case 2:return[2]}})})},QE.prototype.Ro=function(){var t=this;this.ao=this.eo.Ir("client_metadata_refresh",4e3,function(){return t.Io().then(function(){return t.No()}).then(function(){return t.Ro()})})},QE.prototype.Co=function(t){return!!t&&t.ownerId===this.clientId},QE.prototype.vo=function(e){var r=this;return this.so?j_.resolve(!0):YE(e).get(cw.key).next(function(t){if(null!==t&&r.Fo(t.leaseTimestampMs,5e3)&&!r.Mo(t.ownerId)){if(r.Co(t)&&r.networkEnabled)return!0;if(!r.Co(t)){if(!t.allowTabSynchronization)throw new hy(cy.FAILED_PRECONDITION,zE);return!1}}return!(!r.networkEnabled||!r.inForeground)||XE(e).os().next(function(t){return void 0===r.Oo(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&Yv("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},QE.prototype.$o=function(){return wo(this,void 0,void 0,function(){var n=this;return Eo(this,function(t){switch(t.label){case 0:return this.ro=!1,this.Lo(),this.ao&&(this.ao.cancel(),this.ao=null),this.Bo(),this.qo(),[4,this._o.runTransaction("shutdown","readwrite",[cw.store,Iw.store],function(t){var e=new Aw(t,Oy.U);return n.So(e).next(function(){return n.xo(e)})})];case 1:return t.sent(),this._o.close(),this.Uo(),[2]}})})},QE.prototype.Oo=function(t,e){var n=this;return t.filter(function(t){return n.Fo(t.updateTimeMs,e)&&!n.Mo(t.clientId)})},QE.prototype.Qo=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return XE(t).os().next(function(t){return e.Oo(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(QE.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),QE.prototype.Ko=function(t){return fE.Ai(t,this.Kt,this.Ti,this.Ii)},QE.prototype.Dr=function(){return this.fo},QE.prototype.Or=function(){return this.wo},QE.prototype.Wo=function(){return this.Ti},QE.prototype.jo=function(){return this.Eo},QE.prototype.runTransaction=function(e,n,r){var i=this;Yv("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this._o.runTransaction(e,t,Nw,function(t){return o=new Aw(t,i.io?i.io.next():Oy.U),"readwrite-primary"===n?i.po(o).next(function(t){return!!t||i.vo(o)}).next(function(t){if(!t)throw Xv("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.eo.bo(function(){return i.ho(!1)}),new hy(cy.FAILED_PRECONDITION,iw);return r(o)}).next(function(t){return i.Do(o).next(function(){return t})}):i.Go(o).next(function(){return r(o)})}).then(function(t){return o.ps(),t})},QE.prototype.Go=function(t){var e=this;return YE(t).get(cw.key).next(function(t){if(null!==t&&e.Fo(t.leaseTimestampMs,5e3)&&!e.Mo(t.ownerId)&&!e.Co(t)&&!(e.so||e.allowTabSynchronization&&t.allowTabSynchronization))throw new hy(cy.FAILED_PRECONDITION,zE)})},QE.prototype.Do=function(t){var e=new cw(this.clientId,this.allowTabSynchronization,Date.now());return YE(t).put(cw.key,e)},QE.Wn=function(){return q_.Wn()},QE.prototype.So=function(t){var e=this,n=YE(t);return n.get(cw.key).next(function(t){return e.Co(t)?(Yv("IndexedDbPersistence","Releasing primary lease."),n.delete(cw.key)):j_.resolve()})},QE.prototype.Fo=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Xv("Detected an update time that is in the future: "+t+" > "+n),1))},QE.prototype.mo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.co=function(){t.eo.ys(function(){return t.inForeground="visible"===t.document.visibilityState,t.Io()})},this.document.addEventListener("visibilitychange",this.co),this.inForeground="visible"===this.document.visibilityState)},QE.prototype.Bo=function(){this.co&&(this.document.removeEventListener("visibilitychange",this.co),this.co=null)},QE.prototype.Ao=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.oo=function(){e.Lo(),e.eo.ys(function(){return e.$o()})},this.window.addEventListener("unload",this.oo))},QE.prototype.qo=function(){this.oo&&(this.window.removeEventListener("unload",this.oo),this.oo=null)},QE.prototype.Mo=function(t){try{var e=null!==(null===(e=this.To)||void 0===e?void 0:e.getItem(this.ko(t)));return Yv("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Xv("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},QE.prototype.Lo=function(){if(this.To)try{this.To.setItem(this.ko(this.clientId),String(Date.now()))}catch(t){Xv("Failed to set zombie client id.",t)}},QE.prototype.Uo=function(){if(this.To)try{this.To.removeItem(this.ko(this.clientId))}catch(t){}},QE.prototype.ko=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},QE);function QE(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.eo=i,this.window=o,this.document=s,this.no=u,this.so=c,this.io=null,this.ro=!1,this.isPrimary=!1,this.networkEnabled=!0,this.oo=null,this.inForeground=!1,this.co=null,this.ao=null,this.uo=Number.NEGATIVE_INFINITY,this.ho=function(t){return Promise.resolve()},!QE.Wn())throw new hy(cy.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ii=new kE(this,r),this.lo=e+"main",this.Kt=new Dw(a),this._o=new q_(this.lo,11,new HE(this.Kt)),this.fo=new bE(this.Ii,this.Kt),this.Ti=new $w,this.wo=(e=this.Kt,a=this.Ti,new ME(e,a)),this.Eo=new zw,this.window&&this.window.localStorage?this.To=this.window.localStorage:(this.To=null,!1===c&&Xv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function YE(t){return Ow(t,cw.store)}function XE(t){return Ow(t,Iw.store)}function JE(t,e){var n=t.projectId;return t.m||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function $E(t,e){this.progress=t,this.zo=e}var ZE=(sI.prototype.Jo=function(e,n){var r=this;return this.Ho.vi(e,n).next(function(t){return r.Yo(e,n,t)})},sI.prototype.Yo=function(t,r,i){return this.wo.fi(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].xs(r,t);return t})},sI.prototype.Xo=function(t,e,i){var o=Fb;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].xs(t,e);o=o.Ht(t,e)}),o},sI.prototype.Zo=function(e,t){var n=this;return this.wo.getEntries(e,t).next(function(t){return n.tc(e,t)})},sI.prototype.tc=function(e,r){var i=this;return this.Ho.Si(e,r).next(function(t){var t=i.Xo(e,r,t),n=Fb;return t.forEach(function(t,e){e=e||new Og(t,jy.min()),n=n.Ht(t,e)}),n})},sI.prototype.Wr=function(t,e,n){return r=e,Hy.Et(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.ec(t,e.path):Im(e)?this.nc(t,e,n):this.sc(t,e,n);var r},sI.prototype.ec=function(t,e){return this.Jo(t,new Hy(e)).next(function(t){var e=Vb;return t instanceof kg&&(e=e.Ht(t.key,t)),e})},sI.prototype.nc=function(n,r,i){var o=this,s=r.collectionGroup,a=Vb;return this.Ti.Qs(n,s).next(function(t){return j_.forEach(t,function(t){var e,e=(e=r,t=t.child(s),new ym(t,null,e.Nt.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.sc(n,e,i).next(function(t){t.forEach(function(t,e){a=a.Ht(t,e)})})}).next(function(){return a})})},sI.prototype.sc=function(e,n,t){var u,c,r=this;return this.wo.Wr(e,n,t).next(function(t){return u=t,r.Ho.Ci(e,n)}).next(function(t){return c=t,r.ic(e,c,u).next(function(t){u=t;for(var e=0,n=c;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,s=ob(s,u.get(a),0,r.Ss);u=s instanceof kg?u.Ht(a,s):u.remove(a)}})}).next(function(){return u.forEach(function(t,e){Om(n,e)||(u=u.remove(t))}),u})},sI.prototype.ic=function(t,e,n){for(var r=Hb(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof lb&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.wo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof kg&&(c=c.Ht(t,e))}),c})},sI),tI=(oI.cc=function(t,e){for(var n=Hb(),r=Hb(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new oI(t,e.fromCache,n,r)},oI),eI=(iI.prototype.ac=function(t){this.uc=t},iI.prototype.Wr=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.Nt.length||1===r.Nt.length&&r.Nt[0].field.ht())||i.isEqual(jy.min())?this.hc(e,r):this.uc.Zo(e,o).next(function(t){var n=s.lc(r,t);return(bm(r)||_m(r))&&s._c(r.limitType,n,o,i)?s.hc(e,r):(Qv()<=ks.DEBUG&&Yv("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),km(r)),s.uc.Wr(e,r,i).next(function(e){return n.forEach(function(t){e=e.Ht(t.key,t)}),e}))})},iI.prototype.lc=function(n,t){var r=new Lb(Rm(n));return t.forEach(function(t,e){e instanceof kg&&Om(n,e)&&(r=r.add(e))}),r},iI.prototype._c=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version.u(r))},iI.prototype.hc=function(t,e){return Qv()<=ks.DEBUG&&Yv("QueryEngine","Using full collection scan to execute query:",km(e)),this.uc.Wr(t,e,jy.min())},iI),nI=(rI.prototype.mr=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.pr(t,n.dc)})},rI);function rI(t,e,n,r){this.persistence=t,this.fc=e,this.Kt=r,this.dc=new Ab(ry),this.wc=new aE(Fg,Ug),this.Ec=jy.min(),this.Ho=t.Ko(n),this.Tc=t.Or(),this.fo=t.Dr(),this.Ic=new ZE(this.Tc,this.Ho,this.persistence.Wo()),this.Eo=t.jo(),this.fc.ac(this.Ic)}function iI(){}function oI(t,e,n,r){this.targetId=t,this.fromCache=e,this.rc=n,this.oc=r}function sI(t,e,n){this.wo=t,this.Ho=e,this.Ti=n}function aI(t,e,n,r){return new nI(t,e,n,r)}function uI(i,o){return wo(this,void 0,void 0,function(){var e,n,m,r;return Eo(this,function(t){switch(t.label){case 0:return n=(e=i).Ho,m=e.Ic,[4,e.persistence.runTransaction("Handle user change","readonly",function(y){var g;return e.Ho.bi(y).next(function(t){return g=t,n=e.persistence.Ko(o),m=new ZE(e.Tc,n,e.persistence.Wo()),n.bi(y)}).next(function(t){for(var e=[],n=[],r=Hb(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Zo(y,r).next(function(t){return{mc:t,Ac:e,Rc:n}})})})];case 1:return r=t.sent(),[2,(e.Ho=n,e.Ic=m,e.fc.ac(e.Ic),r)]}})})}function cI(t,h){var l=t;return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,s,n,a,u=h.batch.keys(),c=l.Tc.Fr({jr:!0});return e=l,r=t,o=c,s=(i=h).batch,n=s.keys(),a=j_.resolve(),n.forEach(function(n){a=a.next(function(){return o.fi(r,n)}).next(function(t){var e=t,t=i.Os.get(n);ty(null!==t),(!e||e.version.u(t)<0)&&(e=s.Ds(n,e,i))&&o.ui(e,i.Fs)})}),a.next(function(){return e.Ho.xi(r,s)}).next(function(){return c.apply(t)}).next(function(){return l.Ho.Oi(t)}).next(function(){return l.Ic.Zo(t,u)})})}function hI(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.fo.Ki(t)})}function lI(t,r){var u=t,c=r.Mt,h=u.dc;return u.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=u.Tc.Fr({jr:!0});h=u.dc;var a=[];r.Oe.forEach(function(t,e){var n,r,i,o=h.get(e);o&&(a.push(u.fo.ir(s,t.Ke,e).next(function(){return u.fo.nr(s,t.Ue,e)})),0<(i=t.resumeToken).o()&&(n=o.Lt(i,c).$t(s.vs),h=h.Ht(e,n),r=o,i=t,ty(0<(o=n).resumeToken.o()),(0===r.resumeToken.o()||3e8<=o.Mt.j()-r.Mt.j()||0<i.Ue.size+i.Qe.size+i.Ke.size)&&a.push(u.fo.Ji(s,n))))});var e,n=Fb;return r.Me.forEach(function(t,e){r.$e.has(t)&&a.push(u.persistence.Ii.kr(s,t))}),a.push(fI(s,t,r.Me,c,void 0).next(function(t){n=t})),c.isEqual(jy.min())||(e=u.fo.Ki(s).next(function(t){return u.fo.ji(s,s.vs,c)}),a.push(e)),j_.Ln(a).next(function(){return t.apply(s)}).next(function(){return u.Ic.tc(s,n)})}).then(function(t){return u.dc=h,t})}function fI(t,s,e,a,u){var n=Hb();return e.forEach(function(t){return n=n.add(t)}),s.getEntries(t,n).next(function(i){var o=Fb;return e.forEach(function(t,e){var n=i.get(t),r=(null==u?void 0:u.get(t))||a;e instanceof Og&&e.version.isEqual(jy.min())?(s._i(t,r),o=o.Ht(t,e)):null==n||0<e.version.u(n.version)||0===e.version.u(n.version)&&n.hasPendingWrites?(s.ui(e,r),o=o.Ht(t,e)):Yv("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o})}function pI(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.fo.er(e,r).next(function(t){return t?(n=t,j_.resolve(n)):i.fo.qi(e).next(function(t){return n=new Pm(r,t,0,e.vs),i.fo.Gi(e,n).next(function(){return n})})})}).then(function(t){var e=i.dc.get(t.targetId);return(null===e||0<t.Mt.u(e.Mt))&&(i.dc=i.dc.Ht(t.targetId,t),i.wc.set(r,t.targetId)),t})}function dI(i,o,s){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:n=(e=i).dc.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.Ii.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!Y_(r=t.sent()))throw r;return Yv("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.dc=e.dc.remove(o),e.wc.delete(n.target),[2]}})})}function vI(t,o,s){var a=t,u=jy.min(),c=Hb();return a.persistence.runTransaction("Execute query","readonly",function(e){return t=a,n=e,r=Sm(o),(void 0!==(t=(i=t).wc.get(r))?j_.resolve(i.dc.get(t)):i.fo.er(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,a.fo.cr(e,t.targetId).next(function(t){c=t})}).next(function(){return a.fc.Wr(e,o,s?u:jy.min(),s?c:Hb())}).next(function(t){return{documents:t,Pc:c}});var t,n,r,i})}function yI(t,e){var n=t,r=n.fo,t=n.dc.get(e);return t?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Dn(t,e).next(function(t){return t?t.target:null})})}function gI(t){var s=t;return s.persistence.runTransaction("Get new document changes","readonly",function(t){return e=s.Tc,n=t,t=s.Ec,r=e,i=Fb,o=Uw(t),t=qE(n),n=IDBKeyRange.lowerBound(o,!0),t.ls({index:gw.readTimeIndex,range:n},function(t,e){var n=Mw(r.Kt,e);i=i.Ht(n.key,n),o=e.readTime}).next(function(){return{zo:i,readTime:jw(o)}});var e,n,r,i,o}).then(function(t){var e=t.zo,t=t.readTime;return s.Ec=t,e})}function mI(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=qE(t),r=jy.min(),t.ls({index:gw.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=jw(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.Ec=t})]})})}var bI,_I,wI=(VI.prototype.Ms=function(t,e){return j_.resolve(this.bc.get(e))},VI.prototype.$s=function(t,e){return this.bc.set(e.id,{id:e.id,version:e.version,createTime:v_(e.createTime)}),j_.resolve()},VI.prototype.Ls=function(t,e){return j_.resolve(this.vc.get(e))},VI.prototype.Bs=function(t,e){return this.vc.set(e.name,{name:(e=e).name,query:Ww(e.bundledQuery),readTime:v_(e.readTime)}),j_.resolve()},VI),EI=(jI.prototype.nt=function(){return this.Sc.nt()},jI.prototype.sr=function(t,e){e=new II(t,e);this.Sc=this.Sc.add(e),this.Cc=this.Cc.add(e)},jI.prototype.Nc=function(t,e){var n=this;t.forEach(function(t){return n.sr(t,e)})},jI.prototype.rr=function(t,e){this.Fc(new II(t,e))},jI.prototype.Oc=function(t,e){var n=this;t.forEach(function(t){return n.rr(t,e)})},jI.prototype.kc=function(t){var e=this,n=new Hy(new Vy([])),r=new II(n,t),t=new II(n,t+1),i=[];return this.Cc.Ae([r,t],function(t){e.Fc(t),i.push(t.key)}),i},jI.prototype.Mc=function(){var e=this;this.Sc.forEach(function(t){return e.Fc(t)})},jI.prototype.Fc=function(t){this.Sc=this.Sc.delete(t),this.Cc=this.Cc.delete(t)},jI.prototype.$c=function(t){var e=new Hy(new Vy([])),n=new II(e,t),t=new II(e,t+1),r=Hb();return this.Cc.Ae([n,t],function(t){r=r.add(t.key)}),r},jI.prototype.ki=function(t){var e=new II(t,0),e=this.Sc.Pe(e);return null!==e&&t.isEqual(e.key)},jI),II=(UI.Dc=function(t,e){return Hy.J(t.key,e.key)||ry(t.Lc,e.Lc)},UI.xc=function(t,e){return ry(t.Lc,e.Lc)||Hy.J(t.key,e.key)},UI),TI=(FI.prototype.Ri=function(t){return j_.resolve(0===this.Ho.length)},FI.prototype.Pi=function(t,e,n,r){var i=this.Bc;this.Bc++,0<this.Ho.length&&this.Ho[this.Ho.length-1];n=new Rw(i,e,n,r);this.Ho.push(n);for(var o=0,s=r;o<s.length;o++){var a=s[o];this.qc=this.qc.add(new II(a.key,i)),this.Ti.Us(t,a.key.path.Z())}return j_.resolve(n)},FI.prototype.yi=function(t,e){return j_.resolve(this.Uc(e))},FI.prototype.Vi=function(t,e){e+=1,e=this.Qc(e),e=e<0?0:e;return j_.resolve(this.Ho.length>e?this.Ho[e]:null)},FI.prototype.pi=function(){return j_.resolve(0===this.Ho.length?-1:this.Bc-1)},FI.prototype.bi=function(t){return j_.resolve(this.Ho.slice())},FI.prototype.vi=function(t,e){var n=this,r=new II(e,0),e=new II(e,Number.POSITIVE_INFINITY),i=[];return this.qc.Ae([r,e],function(t){t=n.Uc(t.Lc);i.push(t)}),j_.resolve(i)},FI.prototype.Si=function(t,e){var n=this,r=new Lb(ry);return e.forEach(function(t){var e=new II(t,0),t=new II(t,Number.POSITIVE_INFINITY);n.qc.Ae([e,t],function(t){r=r.add(t.Lc)})}),j_.resolve(this.Kc(r))},FI.prototype.Ci=function(t,e){var n=e.path,r=n.length+1,e=n;Hy.Et(e)||(e=e.child(""));var e=new II(new Hy(e),0),i=new Lb(ry);return this.qc.Re(function(t){var e=t.key.path;return!!n.st(e)&&(e.length===r&&(i=i.add(t.Lc)),!0)},e),j_.resolve(this.Kc(i))},FI.prototype.Kc=function(t){var e=this,n=[];return t.forEach(function(t){t=e.Uc(t);null!==t&&n.push(t)}),n},FI.prototype.xi=function(n,r){var i=this;ty(0===this.Wc(r.batchId,"removed")),this.Ho.shift();var o=this.qc;return j_.forEach(r.mutations,function(t){var e=new II(t.key,r.batchId);return o=o.delete(e),i.Ii.Fi(n,t.key)}).next(function(){i.qc=o})},FI.prototype.Ni=function(t){},FI.prototype.ki=function(t,e){var n=new II(e,0),n=this.qc.Pe(n);return j_.resolve(e.isEqual(n&&n.key))},FI.prototype.Oi=function(t){return this.Ho.length,j_.resolve()},FI.prototype.Wc=function(t,e){return this.Qc(t)},FI.prototype.Qc=function(t){return 0===this.Ho.length?0:t-this.Ho[0].batchId},FI.prototype.Uc=function(t){t=this.Qc(t);return t<0||t>=this.Ho.length?null:this.Ho[t]},FI),SI=(MI.prototype.ui=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.jc(e);return this.docs=this.docs.Ht(r,{li:e,size:i,readTime:n}),this.size+=i-o,this.Ti.Us(t,r.path.Z())},MI.prototype._i=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},MI.prototype.fi=function(t,e){e=this.docs.get(e);return j_.resolve(e?e.li:null)},MI.prototype.getEntries=function(t,e){var n=this,r=Fb;return e.forEach(function(t){var e=n.docs.get(t);r=r.Ht(t,e?e.li:null)}),j_.resolve(r)},MI.prototype.Wr=function(t,e,n){for(var r=Vb,i=new Hy(e.path.child("")),o=this.docs.ne(i);o.ae();){var s=o.ce(),a=s.key,u=s.value,s=u.li,u=u.readTime;if(!e.path.st(a.path))break;u.u(n)<=0||s instanceof kg&&Om(e,s)&&(r=r.Ht(s.key,s))}return j_.resolve(r)},MI.prototype.Gc=function(t,e){return j_.forEach(this.docs,function(t){return e(t)})},MI.prototype.Fr=function(t){return new CI(this)},MI.prototype.Mr=function(t){return j_.resolve(this.size)},MI),CI=(bo(LI,_I=vt),LI.prototype.Ei=function(n){var r=this,i=[];return this.oi.forEach(function(t,e){e&&e.li?i.push(r.Gr.ui(n,e.li,r.ai(t))):r.Gr._i(t)}),j_.Ln(i)},LI.prototype.di=function(t,e){return this.Gr.fi(t,e)},LI.prototype.wi=function(t,e){return this.Gr.getEntries(t,e)},LI),NI=(xI.prototype.mn=function(t,n){return this.zc.forEach(function(t,e){return n(e)}),j_.resolve()},xI.prototype.Ki=function(t){return j_.resolve(this.lastRemoteSnapshotVersion)},xI.prototype.Wi=function(t){return j_.resolve(this.Hc)},xI.prototype.qi=function(t){return this.highestTargetId=this.Yc.next(),j_.resolve(this.highestTargetId)},xI.prototype.ji=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Hc&&(this.Hc=e),j_.resolve()},xI.prototype.zi=function(t){this.zc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Yc=new mE(e),this.highestTargetId=e),t.sequenceNumber>this.Hc&&(this.Hc=t.sequenceNumber)},xI.prototype.Gi=function(t,e){return this.zi(e),this.targetCount+=1,j_.resolve()},xI.prototype.Ji=function(t,e){return this.zi(e),j_.resolve()},xI.prototype.Yi=function(t,e){return this.zc.delete(e.target),this.Jc.kc(e.targetId),--this.targetCount,j_.resolve()},xI.prototype.Zi=function(n,r,i){var o=this,s=0,a=[];return this.zc.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.zc.delete(t),a.push(o.Xi(n,e.targetId)),s++)}),j_.Ln(a).next(function(){return s})},xI.prototype.tr=function(t){return j_.resolve(this.targetCount)},xI.prototype.er=function(t,e){e=this.zc.get(e)||null;return j_.resolve(e)},xI.prototype.nr=function(t,e,n){return this.Jc.Nc(e,n),j_.resolve()},xI.prototype.ir=function(e,t,n){this.Jc.Oc(t,n);var r=this.persistence.Ii,i=[];return r&&t.forEach(function(t){i.push(r.Fi(e,t))}),j_.Ln(i)},xI.prototype.Xi=function(t,e){return this.Jc.kc(e),j_.resolve()},xI.prototype.cr=function(t,e){e=this.Jc.$c(e);return j_.resolve(e)},xI.prototype.ki=function(t,e){return j_.resolve(this.Jc.ki(e))},xI),AI=(DI.prototype.start=function(){return Promise.resolve()},DI.prototype.$o=function(){return this.ro=!1,Promise.resolve()},Object.defineProperty(DI.prototype,"Tr",{get:function(){return this.ro},enumerable:!1,configurable:!0}),DI.prototype.yo=function(){},DI.prototype.Vo=function(){},DI.prototype.Wo=function(){return this.Ti},DI.prototype.Ko=function(t){var e=this.Xc[t.R()];return e||(e=new TI(this.Ti,this.Ii),this.Xc[t.R()]=e),e},DI.prototype.Dr=function(){return this.fo},DI.prototype.Or=function(){return this.wo},DI.prototype.jo=function(){return this.Eo},DI.prototype.runTransaction=function(t,e,n){var r=this;Yv("MemoryPersistence","Starting transaction:",t);var i=new kI(this.io.next());return this.Ii.ta(),n(i).next(function(t){return r.Ii.ea(i).next(function(){return t})}).Mn().then(function(t){return i.ps(),t})},DI.prototype.na=function(e,n){return j_.Bn(Object.values(this.Xc).map(function(t){return function(){return t.ki(e,n)}}))},DI),kI=(bo(PI,bI=Gn),PI),OI=(RI.ra=function(t){return new RI(t)},Object.defineProperty(RI.prototype,"oa",{get:function(){if(this.ia)return this.ia;throw Zv()},enumerable:!1,configurable:!0}),RI.prototype.sr=function(t,e,n){return this.sa.sr(n,e),this.oa.delete(n.toString()),j_.resolve()},RI.prototype.rr=function(t,e,n){return this.sa.rr(n,e),this.oa.add(n.toString()),j_.resolve()},RI.prototype.Fi=function(t,e){return this.oa.add(e.toString()),j_.resolve()},RI.prototype.removeTarget=function(t,e){var n=this;this.sa.kc(e.targetId).forEach(function(t){return n.oa.add(t.toString())});var r=this.persistence.Dr();return r.cr(t,e.targetId).next(function(t){t.forEach(function(t){return n.oa.add(t.toString())})}).next(function(){return r.Yi(t,e)})},RI.prototype.ta=function(){this.ia=new Set},RI.prototype.ea=function(n){var r=this,i=this.persistence.Or().Fr();return j_.forEach(this.oa,function(t){var e=Hy.ft(t);return r.ca(n,e).next(function(t){t||i._i(e)})}).next(function(){return r.ia=null,i.apply(n)})},RI.prototype.kr=function(t,e){var n=this;return this.ca(t,e).next(function(t){t?n.oa.delete(e.toString()):n.oa.add(e.toString())})},RI.prototype.Zc=function(t){return 0},RI.prototype.ca=function(t,e){var n=this;return j_.Bn([function(){return j_.resolve(n.sa.ki(e))},function(){return n.persistence.Dr().ki(t,e)},function(){return n.persistence.na(t,e)}])},RI);function RI(t){this.persistence=t,this.sa=new EI,this.ia=null}function PI(t){var e=this;return(e=bI.call(this)||this).vs=t,e}function DI(t,e){var n=this;this.Xc={},this.io=new Oy(0),this.ro=!1,this.ro=!0,this.Ii=t(this),this.fo=new NI(this),this.Ti=new Xw,this.wo=(t=this.Ti,new SI(t,function(t){return n.Ii.Zc(t)})),this.Kt=new Dw(e),this.Eo=new wI(this.Kt)}function xI(t){this.persistence=t,this.zc=new aE(Fg,Ug),this.lastRemoteSnapshotVersion=jy.min(),this.highestTargetId=0,this.Hc=0,this.Jc=new EI,this.targetCount=0,this.Yc=mE.Li()}function LI(t){var e=this;return(e=_I.call(this)||this).Gr=t,e}function MI(t,e){this.Ti=t,this.jc=e,this.docs=new Ab(Hy.J),this.size=0}function FI(t,e){this.Ti=t,this.Ii=e,this.Ho=[],this.Bc=1,this.qc=new Lb(II.Dc)}function UI(t,e){this.key=t,this.Lc=e}function jI(){this.Sc=new Lb(II.Dc),this.Cc=new Lb(II.xc)}function VI(t){this.Kt=t,this.bc=new Map,this.vc=new Map}function qI(t,e){return"firestore_clients_"+t+"_"+e}function BI(t,e,n){n="firestore_mutations_"+t+"_"+n;return e.A()&&(n+="_"+e.uid),n}function HI(t,e){return"firestore_targets_"+t+"_"+e}var KI,WI=(dT.aa=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new hy(r.error.code,r.error.message)),i?new dT(t,e,r.state,o):(Xv("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},dT.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},dT),zI=(pT.aa=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new hy(n.error.code,n.error.message)),r?new pT(t,n.state,i):(Xv("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},pT.prototype.ua=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},pT),GI=(fT.aa=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Kb,o=0;r&&o<n.activeTargetIds.length;++o)r=cg(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new fT(t,i):(Xv("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},fT),QI=(lT.aa=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new lT(e.clientId,e.onlineState):(Xv("SharedClientState","Failed to parse online state: "+t),null)},lT),YI=(hT.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},hT.prototype.la=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},hT.prototype.ua=function(){var t={activeTargetIds:this.activeTargetIds.rt(),updateTimeMs:Date.now()};return JSON.stringify(t)},hT),XI=(cT.Wn=function(t){return!(!t||!t.localStorage)},cT.prototype.start=function(){return wo(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return Eo(this,function(t){switch(t.label){case 0:return[4,this.fa.Qo()];case 1:for(s=t.sent(),e=0,n=s;e<n.length;e++)(r=n[e])!==this._a&&(i=this.getItem(qI(this.persistenceKey,r)))&&(o=GI.aa(r,i))&&(this.Ta=this.Ta.Ht(o.clientId,o));for(this.pa(),(s=this.storage.getItem(this.ga))&&(a=this.ba(s))&&this.va(a),u=0,c=this.Ia;u<c.length;u++)h=c[u],this.Ea(h);return this.Ia=[],this.window.addEventListener("unload",function(){return l.$o()}),this.Tr=!0,[2]}})})},cT.prototype.q=function(t){this.setItem(this.Aa,JSON.stringify(t))},cT.prototype.Sa=function(){return this.Da(this.Ta)},cT.prototype.Ca=function(n){var r=!1;return this.Ta.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},cT.prototype.xa=function(t){this.Na(t,"pending")},cT.prototype.Fa=function(t,e,n){this.Na(t,e,n),this.Oa(t)},cT.prototype.ka=function(t){var e,n="not-current";return this.Ca(t)&&(!(e=this.storage.getItem(HI(this.persistenceKey,t)))||(e=zI.aa(t,e))&&(n=e.state)),this.Ma.ha(t),this.pa(),n},cT.prototype.$a=function(t){this.Ma.la(t),this.pa()},cT.prototype.La=function(t){return this.Ma.activeTargetIds.has(t)},cT.prototype.Ba=function(t){this.removeItem(HI(this.persistenceKey,t))},cT.prototype.qa=function(t,e,n){this.Ua(t,e,n)},cT.prototype.Qa=function(t,e,n){var r=this;e.forEach(function(t){r.Oa(t)}),this.currentUser=t,n.forEach(function(t){r.xa(t)})},cT.prototype.Ka=function(t){this.Wa(t)},cT.prototype.ja=function(){this.Ga()},cT.prototype.$o=function(){this.Tr&&(this.window.removeEventListener("storage",this.wa),this.removeItem(this.ma),this.Tr=!1)},cT.prototype.getItem=function(t){var e=this.storage.getItem(t);return Yv("SharedClientState","READ",t,e),e},cT.prototype.setItem=function(t,e){Yv("SharedClientState","SET",t,e),this.storage.setItem(t,e)},cT.prototype.removeItem=function(t){Yv("SharedClientState","REMOVE",t),this.storage.removeItem(t)},cT.prototype.Ea=function(t){var e=this,o=t;if(o.storageArea===this.storage){if(Yv("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ma)return void Xv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.eo.bo(function(){return wo(e,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){if(this.Tr){if(null!==o.key)if(this.Ra.test(o.key)){if(null==o.newValue)return e=this.za(o.key),[2,this.Ha(e,null)];if(e=this.Ja(o.key,o.newValue))return[2,this.Ha(e.clientId,e)]}else if(this.Pa.test(o.key)){if(null!==o.newValue&&(n=this.Ya(o.key,o.newValue)))return[2,this.Xa(n)]}else if(this.ya.test(o.key)){if(null!==o.newValue&&(r=this.Za(o.key,o.newValue)))return[2,this.tu(r)]}else if(o.key===this.ga){if(null!==o.newValue&&(i=this.ba(o.newValue)))return[2,this.va(i)]}else if(o.key===this.Aa)(i=function(t){var e=Oy.U;if(null!=t)try{var n=JSON.parse(t);ty("number"==typeof n),e=n}catch(t){Xv("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(o.newValue))!==Oy.U&&this.$(i);else if(o.key===this.Va)return[2,this.fa.eu()]}else this.Ia.push(o);return[2]})})})}},Object.defineProperty(cT.prototype,"Ma",{get:function(){return this.Ta.get(this._a)},enumerable:!1,configurable:!0}),cT.prototype.pa=function(){this.setItem(this.ma,this.Ma.ua())},cT.prototype.Na=function(t,e,n){n=new WI(this.currentUser,t,e,n),t=BI(this.persistenceKey,this.currentUser,t);this.setItem(t,n.ua())},cT.prototype.Oa=function(t){t=BI(this.persistenceKey,this.currentUser,t);this.removeItem(t)},cT.prototype.Wa=function(t){t={clientId:this._a,onlineState:t};this.storage.setItem(this.ga,JSON.stringify(t))},cT.prototype.Ua=function(t,e,n){var r=HI(this.persistenceKey,t),n=new zI(t,e,n);this.setItem(r,n.ua())},cT.prototype.Ga=function(){this.setItem(this.Va,"value-not-used")},cT.prototype.za=function(t){t=this.Ra.exec(t);return t?t[1]:null},cT.prototype.Ja=function(t,e){t=this.za(t);return GI.aa(t,e)},cT.prototype.Ya=function(t,e){var n=this.Pa.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return WI.aa(new wy(n),t,e)},cT.prototype.Za=function(t,e){t=this.ya.exec(t),t=Number(t[1]);return zI.aa(t,e)},cT.prototype.ba=function(t){return QI.aa(t)},cT.prototype.Xa=function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.fa.nu(e.batchId,e.state,e.error)]:(Yv("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},cT.prototype.tu=function(t){return this.fa.su(t.targetId,t.state,t.error)},cT.prototype.Ha=function(t,e){var n=this,r=e?this.Ta.Ht(t,e):this.Ta.remove(t),i=this.Da(this.Ta),o=this.Da(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.fa.iu(s,a).then(function(){n.Ta=r})},cT.prototype.va=function(t){this.Ta.get(t.clientId)&&this.da(t.onlineState)},cT.prototype.Da=function(t){var n=Kb;return t.forEach(function(t,e){n=n.ye(e.activeTargetIds)}),n},cT),JI=(uT.prototype.xa=function(t){},uT.prototype.Fa=function(t,e,n){},uT.prototype.ka=function(t){return this.ru.ha(t),this.ou[t]||"not-current"},uT.prototype.qa=function(t,e,n){this.ou[t]=e},uT.prototype.$a=function(t){this.ru.la(t)},uT.prototype.La=function(t){return this.ru.activeTargetIds.has(t)},uT.prototype.Ba=function(t){delete this.ou[t]},uT.prototype.Sa=function(){return this.ru.activeTargetIds},uT.prototype.Ca=function(t){return this.ru.activeTargetIds.has(t)},uT.prototype.start=function(){return this.ru=new YI,Promise.resolve()},uT.prototype.Qa=function(t,e,n){},uT.prototype.Ka=function(t){},uT.prototype.$o=function(){},uT.prototype.q=function(t){},uT.prototype.ja=function(){},uT),$I=(aT.prototype.cu=function(t){},aT.prototype.$o=function(){},aT),ZI=(sT.prototype.cu=function(t){this._u.push(t)},sT.prototype.$o=function(){window.removeEventListener("online",this.au),window.removeEventListener("offline",this.hu)},sT.prototype.fu=function(){window.addEventListener("online",this.au),window.addEventListener("offline",this.hu)},sT.prototype.uu=function(){Yv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(0)},sT.prototype.lu=function(){Yv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this._u;t<e.length;t++)(0,e[t])(1)},sT.Wn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},sT),tT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},eT=(oT.prototype.Eu=function(t){this.Tu=t},oT.prototype.Iu=function(t){this.mu=t},oT.prototype.onMessage=function(t){this.Au=t},oT.prototype.close=function(){this.wu()},oT.prototype.send=function(t){this.du(t)},oT.prototype.Ru=function(){this.Tu()},oT.prototype.Pu=function(t){this.mu(t)},oT.prototype.yu=function(t){this.Au(t)},oT),nT=(iT.prototype.bu=function(e,t,n,r){var i=this.vu(e,t);Yv("RestConnection","Sending: ",i,n);t={};return this.Su(t,r),this.Du(e,i,t,n).then(function(t){return Yv("RestConnection","Received: ",t),t},function(t){throw Jv("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},iT.prototype.Cu=function(t,e,n,r){return this.bu(t,e,n,r)},iT.prototype.Su=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.5-2021026232412",t["Content-Type"]="text/plain",e)for(var n in e.V)e.V.hasOwnProperty(n)&&(t[n]=e.V[n])},iT.prototype.vu=function(t,e){t=tT[t];return this.Vu+"/v1/"+e+":"+t},bo(rT,KI=iT),rT.prototype.Du=function(o,e,s,a){return new Promise(function(n,r){var i=new Wv;i.listenOnce(Vv.COMPLETE,function(){try{switch(i.getLastErrorCode()){case jv.NO_ERROR:var t=i.getResponseJson();Yv("Connection","XHR received:",JSON.stringify(t)),n(t);break;case jv.TIMEOUT:Yv("Connection",'RPC "'+o+'" timed out'),r(new hy(cy.DEADLINE_EXCEEDED,"Request time out"));break;case jv.HTTP_ERROR:var e=i.getStatus();Yv("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace(/_/g,"-"),e=0<=Object.values(cy).indexOf(e)?e:cy.UNKNOWN,r(new hy(e,t.message))):r(new hy(cy.UNKNOWN,"Server responded with status "+i.getStatus())):r(new hy(cy.UNAVAILABLE,"Connection failed."));break;default:Zv()}}finally{Yv("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(a);i.send(e,"POST",t,s,15)})},rT.prototype.xu=function(t,e){var n=[this.Vu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Dv,i=Uv(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.T.projectId+"/databases/"+this.T.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.I};this.Su(t.initMessageHeaders,e),Uo()||Vo()||0<=Fo().indexOf("Electron/")||(0<=(e=Fo()).indexOf("MSIE ")||0<=e.indexOf("Trident/"))||0<=Fo().indexOf("MSAppHost/")||jo()||(t.httpHeadersOverwriteParam="$httpHeaders");n=n.join("");Yv("Connection","Creating WebChannel: "+n,t);var o=r.createWebChannel(n,t),s=!1,a=!1,u=new eT({du:function(t){a?Yv("Connection","Not sending because WebChannel is closed:",t):(s||(Yv("Connection","Opening WebChannel transport."),o.open(),s=!0),Yv("Connection","WebChannel sending:",t),o.send(t))},wu:function(){return o.close()}}),t=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(o,Kv.EventType.OPEN,function(){a||Yv("Connection","WebChannel transport opened.")}),t(o,Kv.EventType.CLOSE,function(){a||(a=!0,Yv("Connection","WebChannel transport closed"),u.Pu())}),t(o,Kv.EventType.ERROR,function(t){a||(a=!0,Jv("Connection","WebChannel transport errored:",t),u.Pu(new hy(cy.UNAVAILABLE,"The operation could not be completed")))}),t(o,Kv.EventType.MESSAGE,function(t){var e,n,r,i;a||(ty(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Yv("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=bb[r];if(void 0!==t)return Nb(t)}(),i=n.message,void 0===t&&(t=cy.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),a=!0,u.Pu(new hy(t,i)),o.close()):(Yv("Connection","WebChannel received:",e),u.yu(e)))}),t(i,qv.STAT_EVENT,function(t){t.stat===Bv?Yv("Connection","Detected buffering proxy"):t.stat===Hv&&Yv("Connection","Detected no buffering proxy")}),setTimeout(function(){u.Ru()},0),u},rT);function rT(t){var e=this;return(e=KI.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.I=t.I,e}function iT(t){this.gu=t,this.T=t.T;var e=t.ssl?"https":"http";this.Vu=e+"://"+t.host,this.pu="projects/"+this.T.projectId+"/databases/"+this.T.database+"/documents"}function oT(t){this.du=t.du,this.wu=t.wu}function sT(){var t=this;this.au=function(){return t.uu()},this.hu=function(){return t.lu()},this._u=[],this.fu()}function aT(){}function uT(){this.ru=new YI,this.ou={},this.da=null,this.$=null}function cT(t,e,n,r,i){this.window=t,this.eo=e,this.persistenceKey=n,this._a=r,this.fa=null,this.da=null,this.$=null,this.wa=this.Ea.bind(this),this.Ta=new Ab(ry),this.Tr=!1,this.Ia=[];n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ma=qI(this.persistenceKey,this._a),this.Aa="firestore_sequence_number_"+this.persistenceKey,this.Ta=this.Ta.Ht(this._a,new YI),this.Ra=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Pa=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.ya=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.ga="firestore_online_state_"+this.persistenceKey,this.Va="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.wa)}function hT(){this.activeTargetIds=Kb}function lT(t,e){this.clientId=t,this.onlineState=e}function fT(t,e){this.clientId=t,this.activeTargetIds=e}function pT(t,e,n){this.targetId=t,this.state=e,this.error=n}function dT(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function vT(){return"undefined"!=typeof window?window:null}function yT(){return"undefined"!=typeof document?document:null}function gT(t){return new f_(t,!0)}function mT(t,e,n,r,i){var o=this;this.Sh=t,this.Dh=e,this.fs=n,this.Ch={},this.xh=[],this.Nh=new Map,this.Fh=new Set,this.Oh=[],this.kh=i,this.kh.cu(function(t){n.ys(function(){return wo(o,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return qT(this)?(Yv("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return(e=n).Fh.add(4),[4,xT(e)];case 1:return t.sent(),e.Mh.set("Unknown"),e.Fh.delete(4),[4,DT(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Mh=new CT(n,r)}var bT,_T,wT,ET=(PT.prototype.reset=function(){this.ku=0},PT.prototype.Lu=function(){this.ku=this.Ou},PT.prototype.Bu=function(t){var e=this;this.cancel();var n=Math.floor(this.ku+this.qu()),r=Math.max(0,Date.now()-this.$u),i=Math.max(0,n-r);0<i&&Yv("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ku+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Mu=this.eo.Ir(this.ds,i,function(){return e.$u=Date.now(),t()}),this.ku*=this.Fu,this.ku<this.Nu&&(this.ku=this.Nu),this.ku>this.Ou&&(this.ku=this.Ou)},PT.prototype.Uu=function(){null!==this.Mu&&(this.Mu.Ps(),this.Mu=null)},PT.prototype.cancel=function(){null!==this.Mu&&(this.Mu.cancel(),this.Mu=null)},PT.prototype.qu=function(){return(Math.random()-.5)*this.ku},PT),vt=(RT.prototype.Hu=function(){return 1===this.state||2===this.state||4===this.state},RT.prototype.Ju=function(){return 2===this.state},RT.prototype.start=function(){3!==this.state?this.auth():this.Yu()},RT.prototype.stop=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return this.Hu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},RT.prototype.Xu=function(){this.state=0,this.zu.reset()},RT.prototype.Zu=function(){var t=this;this.Ju()&&null===this.Gu&&(this.Gu=this.eo.Ir(this.Qu,6e4,function(){return t.th()}))},RT.prototype.eh=function(t){this.nh(),this.stream.send(t)},RT.prototype.th=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return this.Ju()?[2,this.close(0)]:[2]})})},RT.prototype.nh=function(){this.Gu&&(this.Gu.cancel(),this.Gu=null)},RT.prototype.close=function(e,n){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return this.nh(),this.zu.cancel(),this.ju++,3!==e?this.zu.reset():n&&n.code===cy.RESOURCE_EXHAUSTED?(Xv(n.toString()),Xv("Using maximum backoff delay to prevent overloading the backend."),this.zu.Lu()):n&&n.code===cy.UNAUTHENTICATED&&this.Wu.v(),null!==this.stream&&(this.sh(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Iu(n)];case 1:return t.sent(),[2]}})})},RT.prototype.sh=function(){},RT.prototype.auth=function(){var n=this;this.state=1;var t=this.ih(this.ju),e=this.ju;this.Wu.getToken().then(function(t){n.ju===e&&n.rh(t)},function(e){t(function(){var t=new hy(cy.UNKNOWN,"Fetching auth token failed: "+e.message);return n.oh(t)})})},RT.prototype.rh=function(t){var e=this,n=this.ih(this.ju);this.stream=this.ah(t),this.stream.Eu(function(){n(function(){return e.state=2,e.listener.Eu()})}),this.stream.Iu(function(t){n(function(){return e.oh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},RT.prototype.Yu=function(){var t=this;this.state=4,this.zu.Bu(function(){return wo(t,void 0,void 0,function(){return Eo(this,function(t){return this.state=0,this.start(),[2]})})})},RT.prototype.oh=function(t){return Yv("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},RT.prototype.ih=function(e){var n=this;return function(t){n.eo.ys(function(){return n.ju===e?t():(Yv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},RT),IT=(bo(OT,wT=vt),OT.prototype.ah=function(t){return this.Ku.xu("Listen",t)},OT.prototype.onMessage=function(t){this.zu.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Zv(),r=e.targetChange.targetIds||[],i=(s=e.targetChange.resumeToken,t.qt?(ty(void 0===s||"string"==typeof s),sy.fromBase64String(s||"")):(ty(void 0===s||s instanceof Uint8Array),sy.fromUint8Array(s||new Uint8Array))),o=(a=e.targetChange.cause)&&(u=void 0===(c=a).code?cy.UNKNOWN:Nb(c.code),new hy(u,c.message||"")),s=new $b(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime,r=b_(t,n.document.name),i=v_(n.document.updateTime);var a=new Eg({mapValue:{fields:n.document.fields}}),u=(o=new kg(r,i,a,{}),n.targetIds||[]),c=n.removedTargetIds||[];s=new Xb(u,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=b_(t,n.document),i=n.readTime?v_(n.readTime):jy.min(),a=new Og(r,i),o=n.removedTargetIds||[],s=new Xb([],o,a.key,a);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=b_(t,n.document),i=n.removedTargetIds||[],s=new Xb([],i,r,null);else{if(!("filter"in e))return Zv();e.filter;e=e.filter;e.targetId,n=e.count||0,r=new mb(n),i=e.targetId,s=new Jb(i,r)}return s}(this.Kt,t),t=function(t){if(!("targetChange"in t))return jy.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?v_(t.readTime):jy.min()}(t);return this.listener.uh(e,t)},OT.prototype.hh=function(t){var e,n,r,i={};i.database=E_(this.Kt),i.addTarget=(e=this.Kt,(r=jg(r=(n=t).target)?{documents:A_(e,r)}:{query:k_(e,r)}).targetId=n.targetId,0<n.resumeToken.o()?r.resumeToken=d_(e,n.resumeToken):0<n.Mt.u(jy.min())&&(r.readTime=p_(e,n.Mt.G())),r);var o,t=(this.Kt,o=t,null==(t=function(){switch(o.kt){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Zv()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.eh(i)},OT.prototype.lh=function(t){var e={};e.database=E_(this.Kt),e.removeTarget=t,this.eh(e)},OT),TT=(bo(kT,_T=vt),Object.defineProperty(kT.prototype,"fh",{get:function(){return this._h},enumerable:!1,configurable:!0}),kT.prototype.start=function(){this._h=!1,this.lastStreamToken=void 0,_T.prototype.start.call(this)},kT.prototype.sh=function(){this._h&&this.dh([])},kT.prototype.ah=function(t){return this.Ku.xu("Write",t)},kT.prototype.onMessage=function(t){if(ty(!!t.streamToken),this.lastStreamToken=t.streamToken,this._h){this.zu.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(ty(void 0!==r),n.map(function(t){return function(t,e){var n=t.updateTime?v_(t.updateTime):v_(e);n.isEqual(jy.min())&&(n=v_(e));e=null;return t.transformResults&&0<t.transformResults.length&&(e=t.transformResults),new tb(n,e)}(t,r)})):[]),n=v_(t.commitTime);return this.listener.wh(n,e)}var n,r;return ty(!t.writeResults||0===t.writeResults.length),this._h=!0,this.listener.Eh()},kT.prototype.Th=function(){var t={};t.database=E_(this.Kt),this.eh(t)},kT.prototype.dh=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return C_(e.Kt,t)})};this.eh(t)},kT),ST=(bo(AT,bT=function(){}),AT.prototype.mh=function(){if(this.Ih)throw new hy(cy.FAILED_PRECONDITION,"The client has already been terminated.")},AT.prototype.bu=function(e,n,r){var i=this;return this.mh(),this.credentials.getToken().then(function(t){return i.Ku.bu(e,n,r,t)}).catch(function(t){throw t.code===cy.UNAUTHENTICATED&&i.credentials.v(),t})},AT.prototype.Cu=function(e,n,r){var i=this;return this.mh(),this.credentials.getToken().then(function(t){return i.Ku.Cu(e,n,r,t)}).catch(function(t){throw t.code===cy.UNAUTHENTICATED&&i.credentials.v(),t})},AT.prototype.terminate=function(){this.Ih=!1},AT),CT=(NT.prototype.yh=function(){var t=this;0===this.Ah&&(this.gh("Unknown"),this.Rh=this.fs.Ir("online_state_timeout",1e4,function(){return t.Rh=null,t.Vh("Backend didn't respond within 10 seconds."),t.gh("Offline"),Promise.resolve()}))},NT.prototype.ph=function(t){"Online"===this.state?this.gh("Unknown"):(this.Ah++,1<=this.Ah&&(this.bh(),this.Vh("Connection failed 1 times. Most recent error: "+t.toString()),this.gh("Offline")))},NT.prototype.set=function(t){this.bh(),this.Ah=0,"Online"===t&&(this.Ph=!1),this.gh(t)},NT.prototype.gh=function(t){t!==this.state&&(this.state=t,this.da(t))},NT.prototype.Vh=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Ph?(Xv(t),this.Ph=!1):Yv("OnlineStateTracker",t)},NT.prototype.bh=function(){null!==this.Rh&&(this.Rh.cancel(),this.Rh=null)},NT);function NT(t,e){this.fs=t,this.da=e,this.state="Unknown",this.Ah=0,this.Rh=null,this.Ph=!0}function AT(t,e,n){var r=this;return(r=bT.call(this)||this).credentials=t,r.Ku=e,r.Kt=n,r.Ih=!1,r}function kT(t,e,n,r,i){var o=this;return(o=_T.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).Kt=r,o._h=!1,o}function OT(t,e,n,r,i){var o=this;return(o=wT.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).Kt=r,o}function RT(t,e,n,r,i,o){this.eo=t,this.Qu=n,this.Ku=r,this.Wu=i,this.listener=o,this.state=0,this.ju=0,this.Gu=null,this.stream=null,this.zu=new ET(t,e)}function PT(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.eo=t,this.ds=e,this.Nu=n,this.Fu=r,this.Ou=i,this.ku=0,this.Mu=null,this.$u=Date.now(),this.reset()}function DT(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:if(!qT(r))return[3,4];e=0,n=r.Oh,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function xT(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:e=0,n=r.Oh,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function LT(t,e){t.Nh.has(e.targetId)||(t.Nh.set(e.targetId,e),VT(t)?jT(t):XT(t).Ju()&&FT(t,e))}function MT(t,e){var n=t,t=XT(n);n.Nh.delete(e),t.Ju()&&UT(n,e),0===n.Nh.size&&(t.Ju()?t.Zu():qT(n)&&n.Mh.set("Unknown"))}function FT(t,e){t.$h.cn(e.targetId),XT(t).hh(e)}function UT(t,e){t.$h.cn(e),XT(t).lh(e)}function jT(e){e.$h=new t_({Sn:function(t){return e.Ch.Sn(t)},Dn:function(t){return e.Nh.get(t)||null}}),XT(e).start(),e.Mh.yh()}function VT(t){return qT(t)&&!XT(t).Hu()&&0<t.Nh.size}function qT(t){return 0===t.Fh.size}function BT(t){t.$h=void 0}function HT(s,a,u){return wo(this,void 0,void 0,function(){var n,o;return Eo(this,function(t){switch(t.label){case 0:if(s.Mh.set("Online"),!(a instanceof $b&&2===a.state&&a.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.Nh.has(i)?[4,o.Ch.Lh(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.Nh.delete(i),o.$h.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,a)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Yv("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),n),[4,KT(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(a instanceof Xb?s.$h.wn(a):a instanceof Jb?s.$h.yn(a):s.$h.In(a),u.isEqual(jy.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,hI(s.Sh)];case 8:return o=t.sent(),0<=u.u(o)?[4,(i=u,(e=(r=s).$h.pn(i)).Oe.forEach(function(t,e){var n;0<t.resumeToken.o()&&((n=r.Nh.get(e))&&r.Nh.set(e,n.Lt(t.resumeToken,i)))}),e.ke.forEach(function(t){var e=r.Nh.get(t);e&&(r.Nh.set(t,e.Lt(sy.h,e.Mt)),UT(r,t),e=new Pm(e.target,t,1,e.sequenceNumber),FT(r,e))}),r.Ch.Bh(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Yv("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,KT(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function KT(n,r,i){return wo(this,void 0,void 0,function(){var e=this;return Eo(this,function(t){switch(t.label){case 0:if(!Y_(r))throw r;return n.Fh.add(1),[4,xT(n)];case 1:return t.sent(),n.Mh.set("Offline"),i=i||function(){return hI(n.Sh)},n.fs.bo(function(){return wo(e,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return Yv("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Fh.delete(1),[4,DT(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function WT(e,n){return n().catch(function(t){return KT(e,t,n)})}function zT(u){return wo(this,void 0,void 0,function(){var i,o,s,a;return Eo(this,function(t){switch(t.label){case 0:o=JT(i=u),s=0<i.xh.length?i.xh[i.xh.length-1].batchId:-1,t.label=1;case 1:if(!(qT(i)&&i.xh.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.Sh,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r.Ho.Vi(t,n)}))];case 3:return null===(a=t.sent())?(0===i.xh.length&&o.Zu(),[3,7]):(s=a.batchId,function(t,e){t.xh.push(e);t=JT(t);t.Ju()&&t.fh&&t.dh(e.mutations)}(i,a),[3,6]);case 4:return a=t.sent(),[4,KT(i,a)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return GT(i)&&QT(i),[2]}var e,n,r})})}function GT(t){return qT(t)&&!JT(t).Hu()&&0<t.xh.length}function QT(t){JT(t).start()}function YT(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=n,r?(e.Fh.delete(2),[4,DT(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Fh.add(2),[4,xT(e)]);case 3:t.sent(),e.Mh.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function XT(n){var t,e,r,i=this;return n.Qh||(n.Qh=(t=n.Dh,e=n.fs,r={Eu:function(n){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return n.Nh.forEach(function(t,e){FT(n,t)}),[2]})})}.bind(null,n),Iu:function(e,n){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return BT(e),VT(e)?(e.Mh.ph(n),jT(e)):e.Mh.set("Unknown"),[2]})})}.bind(null,n),uh:HT.bind(null,n)},t.mh(),new IT(e,t.Ku,t.credentials,t.Kt,r)),n.Oh.push(function(e){return wo(i,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return e?(n.Qh.Xu(),VT(n)?jT(n):n.Mh.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.Qh.stop()];case 2:t.sent(),BT(n),t.label=3;case 3:return[2]}})})})),n.Qh}function JT(n){var t,e,r,i=this;return n.Kh||(n.Kh=(t=n.Dh,e=n.fs,r={Eu:function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return JT(e).Th(),[2]})})}.bind(null,n),Iu:function(e,n){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return n&&JT(e).fh?[4,function(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return Cb(n=i.code)&&n!==cy.ABORTED?(e=r.xh.shift(),JT(r).Xu(),[4,WT(r,function(){return r.Ch.Uh(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,zT(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return GT(e)&&QT(e),[2]}})})}.bind(null,n),Eh:function(o){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){for(e=JT(o),n=0,r=o.xh;n<r.length;n++)i=r[n],e.dh(i.mutations);return[2]})})}.bind(null,n),wh:function(r,i,o){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return e=r.xh.shift(),n=Pw.from(e,i,o),[4,WT(r,function(){return r.Ch.qh(n)})];case 1:return t.sent(),[4,zT(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.mh(),new TT(e,t.Ku,t.credentials,t.Kt,r)),n.Oh.push(function(e){return wo(i,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return e?(n.Kh.Xu(),[4,zT(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.Kh.stop()];case 3:t.sent(),0<n.xh.length&&(Yv("RemoteStore","Stopping write stream with "+n.xh.length+" pending writes"),n.xh=[]),t.label=4;case 4:return[2]}})})})),n.Kh}function $T(){this.queries=new aE(Am,Nm),this.onlineState="Unknown",this.jh=new Set}var ZT=function(){this.Wh=void 0,this.listeners=[]};function tS(s,a){return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:if(e=s,n=a.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new ZT),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.Gh(n)];case 2:return o.Wh=t.sent(),[3,4];case 3:return o=t.sent(),o=rw(o,"Initialization of query '"+km(a.query)+"' failed"),[2,void a.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(a),a.zh(e.onlineState),i.Wh&&a.Hh(i.Wh)&&nS(e),[2]}})})}function eS(s,a){return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){return e=s,n=a.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(a))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.Jh(n))]:[2]})})}function nS(t){t.jh.forEach(function(t){t.next()})}var rS=(hS.prototype.Hh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Gb(t.query,t.docs,t.De,e,t.Ce,t.fromCache,t.xe,!0)}var o=!1;return this.Xh?this.tl(t)&&(this.Yh.next(t),o=!0):this.el(t,this.onlineState)&&(this.nl(t),o=!0),this.Zh=t,o},hS.prototype.onError=function(t){this.Yh.error(t)},hS.prototype.zh=function(t){this.onlineState=t;var e=!1;return this.Zh&&!this.Xh&&this.el(this.Zh,t)&&(this.nl(this.Zh),e=!0),e},hS.prototype.el=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.sl&&n||t.docs.nt()&&"Offline"!==e)},hS.prototype.tl=function(t){if(0<t.docChanges.length)return!0;var e=this.Zh&&this.Zh.hasPendingWrites!==t.hasPendingWrites;return!(!t.xe&&!e)&&!0===this.options.includeMetadataChanges},hS.prototype.nl=function(t){t=Gb.Fe(t.query,t.docs,t.Ce,t.fromCache),this.Xh=!0,this.Yh.next(t)},hS),iS=(cS.prototype.il=function(){return"metadata"in this.payload},cS),oS=(uS.prototype.yc=function(t){return b_(this.Kt,t)},uS.prototype.gc=function(t){return t.metadata.exists?S_(this.Kt,t.document,!1):new Og(this.yc(t.metadata.name),this.Vc(t.metadata.readTime))},uS.prototype.Vc=v_,uS),sS=(aS.prototype.ol=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},aS.prototype.cl=function(t){for(var e=new Map,n=new oS(this.Kt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.yc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||Hb()).add(s);e.set(c,h)}}return e},aS.prototype.complete=function(){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:return[4,function(l,f,p,d){return wo(this,void 0,void 0,function(){var n,r,i,o,e,s,a,u,c,h;return Eo(this,function(t){switch(t.label){case 0:for(n=l,r=Hb(),i=Fb,o=qb,e=0,s=p;e<s.length;e++)a=s[e],u=f.yc(a.metadata.name),a.document&&(r=r.add(u)),i=i.Ht(u,f.gc(a)),o=o.Ht(u,f.Vc(a.metadata.readTime));return c=n.Tc.Fr({jr:!0}),[4,pI(n,Sm(mm(Vy.ct("__bundle__/docs/"+d))))];case 1:return h=t.sent(),[2,n.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return fI(e,c,i,jy.min(),o).next(function(t){return c.apply(e),t}).next(function(t){return n.fo.Xi(e,h.targetId).next(function(){return n.fo.nr(e,r,h.targetId)}).next(function(){return n.Ic.tc(e,t)})})})]}})})}(this.Sh,new oS(this.Kt),this.documents,this.rl.id)];case 1:e=t.sent(),n=this.cl(this.documents),r=0,i=this.queries,t.label=2;case 2:return r<i.length?(i=i[r],[4,function(e,i,o){return void 0===o&&(o=Hb()),wo(this,void 0,void 0,function(){var n,r;return Eo(this,function(t){switch(t.label){case 0:return[4,pI(e,Sm(Ww(i.bundledQuery)))];case 1:return n=t.sent(),[2,(r=e).persistence.runTransaction("Save named query","readwrite",function(t){var e=v_(i.readTime);if(0<=n.Mt.u(e))return r.Eo.Bs(t,i);e=n.Lt(sy.h,e);return r.dc=r.dc.Ht(e.targetId,e),r.fo.Ji(t,e).next(function(){return r.fo.Xi(t,n.targetId)}).next(function(){return r.fo.nr(t,o,n.targetId)}).next(function(){return r.Eo.Bs(t,i)})})]}})})}(this.Sh,i,n.get(i.name))]):[3,5];case 3:t.sent(),t.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new $E(Object.assign({},this.progress),e))]}})})},aS);function aS(t,e,n){this.rl=t,this.Sh=e,this.Kt=n,this.queries=[],this.documents=[],this.progress=lS(t)}function uS(t){this.Kt=t}function cS(t,e){this.payload=t,this.byteLength=e}function hS(t,e,n){this.query=t,this.Yh=e,this.Xh=!1,this.Zh=null,this.onlineState="Unknown",this.options=n||{}}function lS(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var fS=function(t){this.key=t},pS=function(t){this.key=t},dS=(Object.defineProperty(bS.prototype,"fl",{get:function(){return this.al},enumerable:!1,configurable:!0}),bS.prototype.dl=function(t,e){var s=this,a=e?e.wl:new zb,u=(e||this)._l,c=(e||this).Ce,h=u,l=!1,f=bm(this.query)&&u.size===this.query.limit?u.last():null,p=_m(this.query)&&u.size===this.query.limit?u.first():null;if(t.Zt(function(t,e){var n=u.get(t),r=(r=e instanceof kg?e:null)&&(Om(s.query,r)?r:null),i=!!n&&s.Ce.has(n.key),o=!!r&&(r.bt||s.Ce.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(a.track({type:3,doc:r}),e=!0):s.El(n,r)||(a.track({type:2,doc:r}),e=!0,(f&&0<s.ll(r,f)||p&&s.ll(r,p)<0)&&(l=!0)):!n&&r?(a.track({type:0,doc:r}),e=!0):n&&!r&&(a.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),bm(this.query)||_m(this.query))for(;h.size>this.query.limit;){var n=bm(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);a.track({type:1,doc:n})}return{_l:h,wl:a,_c:l,Ce:c}},bS.prototype.El=function(t,e){return t.bt&&e.hasCommittedMutations&&!e.bt},bS.prototype.Ei=function(t,e,n){var o=this,r=this._l;this._l=t._l,this.Ce=t.Ce;var i=t.wl.Se();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.ll(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zv()}}var r,i}),this.Tl(n);var s=e?this.Il():[],n=0===this.hl.size&&this.qe?1:0,e=n!==this.ul;return this.ul=n,0!==i.length||e?{snapshot:new Gb(this.query,t._l,r,i,t.Ce,0==n,e,!1),ml:s}:{ml:s}},bS.prototype.zh=function(t){return this.qe&&"Offline"===t?(this.qe=!1,this.Ei({_l:this._l,wl:new zb,Ce:this.Ce,_c:!1},!1)):{ml:[]}},bS.prototype.Al=function(t){return!this.al.has(t)&&!!this._l.has(t)&&!this._l.get(t).bt},bS.prototype.Tl=function(t){var e=this;t&&(t.Ue.forEach(function(t){return e.al=e.al.add(t)}),t.Qe.forEach(function(t){}),t.Ke.forEach(function(t){return e.al=e.al.delete(t)}),this.qe=t.qe)},bS.prototype.Il=function(){var e=this;if(!this.qe)return[];var n=this.hl;this.hl=Hb(),this._l.forEach(function(t){e.Al(t.key)&&(e.hl=e.hl.add(t.key))});var r=[];return n.forEach(function(t){e.hl.has(t)||r.push(new pS(t))}),this.hl.forEach(function(t){n.has(t)||r.push(new fS(t))}),r},bS.prototype.Rl=function(t){this.al=t.Pc,this.hl=Hb();t=this.dl(t.documents);return this.Ei(t,!0)},bS.prototype.Pl=function(){return Gb.Fe(this.query,this._l,this.Ce,0===this.ul)},bS),vS=function(t,e,n){this.query=t,this.targetId=e,this.view=n},yS=function(t){this.key=t,this.yl=!1},gS=(Object.defineProperty(mS.prototype,"Ll",{get:function(){return!0===this.$l},enumerable:!1,configurable:!0}),mS);function mS(t,e,n,r,i,o){this.Sh=t,this.gl=e,this.Vl=n,this.pl=r,this.currentUser=i,this.bl=o,this.vl={},this.Sl=new aE(Am,Nm),this.Dl=new Map,this.Cl=[],this.xl=new Ab(Hy.J),this.Nl=new Map,this.Fl=new EI,this.Ol={},this.kl=new Map,this.Ml=mE.Bi(),this.onlineState="Unknown",this.$l=void 0}function bS(t,e){this.query=t,this.al=e,this.ul=null,this.qe=!1,this.hl=Hb(),this.Ce=Hb(),this.ll=Rm(t),this._l=new Wb(this.ll)}function _S(i,o,s,a){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return i.Bl=function(t,e,n){return function(r,i,o,s){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return(e=i.view.dl(o))._c?[4,vI(r.Sh,i.query,!1).then(function(t){t=t.documents;return i.view.dl(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.Oe.get(i.targetId),n=i.view.Ei(e,r.Ll,n),[2,(OS(r,i.targetId,n.ml),n.snapshot)]}})})}(i,t,e,n)},[4,vI(i.Sh,o,!0)];case 1:return n=t.sent(),r=new dS(o,n.Pc),e=r.dl(n.documents),n=Yb.Be(s,a&&"Offline"!==i.onlineState),n=r.Ei(e,i.Ll,n),OS(i,s,n.ml),r=new vS(o,s,r),[2,(i.Sl.set(o,r),i.Dl.has(s)?i.Dl.get(s).push(o):i.Dl.set(s,[o]),n.snapshot)]}})})}function wS(f,p,d){return wo(this,void 0,void 0,function(){var s,a;return Eo(this,function(t){switch(t.label){case 0:a=jS(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=a.Sh,u=p,h=i,l=Uy.now(),o=u.reduce(function(t,e){return t.add(e.key)},Hb()),h.persistence.runTransaction("Locally write mutations","readwrite",function(a){return h.Ic.Zo(a,o).next(function(t){c=t;for(var e,n=[],r=0,i=u;r<i.length;r++){var o=i[r],s=(e=o,s=c.get(o.key),function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof kg?e.field(o.field):void 0,s=Fm(o.transform,s||null);null!=s&&(n=(null==n?new Ig:n).set(o.field,s))}return n?n.yt():null}(e.fieldTransforms,s));null!=s&&n.push(new lb(o.key,s,function s(t){var a=[];return Jy(t.fields||{},function(t,e){var n=new By([t]);if(wg(e))if(0===(e=s(e.mapValue).fields).length)a.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];a.push(n.child(o))}else a.push(n)}),new Zy(a)}(s.proto.mapValue),nb.exists(!0)))}return h.Ho.Pi(a,l,n,u)})}).then(function(t){var e=t.Ns(c);return{batchId:t.batchId,oi:e}}))];case 2:return s=t.sent(),a.pl.xa(s.batchId),e=a,n=s.batchId,r=d,i=(i=(i=e.Ol[e.currentUser.R()])||new Ab(ry)).Ht(n,r),e.Ol[e.currentUser.R()]=i,[4,PS(a,s.oi)];case 3:return t.sent(),[4,zT(a.gl)];case 4:return t.sent(),[3,6];case 5:return a=t.sent(),a=rw(a,"Failed to persist write"),d.reject(a),[3,6];case 6:return[2]}var e,n,r,i,u,c,h,l,o})})}function ES(r,i){return wo(this,void 0,void 0,function(){var n,e;return Eo(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,lI(n.Sh,i)];case 2:return e=t.sent(),i.Oe.forEach(function(t,e){e=n.Nl.get(e);e&&(ty(t.Ue.size+t.Qe.size+t.Ke.size<=1),0<t.Ue.size?e.yl=!0:0<t.Qe.size?ty(e.yl):0<t.Ke.size&&(ty(e.yl),e.yl=!1))}),[4,PS(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,sE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function IS(t,n,e){var r,t=t;(t.Ll&&0===e||!t.Ll&&1===e)&&(r=[],t.Sl.forEach(function(t,e){e=e.view.zh(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].zh(i)&&(o=!0)}),o&&nS(t)}(t.Vl,n),r.length&&t.vl.uh(r),t.onlineState=n,t.Ll&&t.pl.Ka(n))}function TS(s,a,u){return wo(this,void 0,void 0,function(){var n,o;return Eo(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Sh,r=a,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.Ho.yi(e,r).next(function(t){return ty(null!==t),n=t.keys(),i.Ho.xi(e,t)}).next(function(){return i.Ho.Oi(e)}).next(function(){return i.Ic.Zo(e,n)})}))];case 2:return o=t.sent(),NS(n,a,u),CS(n,a),n.pl.Fa(a,"rejected",u),[4,PS(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,sE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}function SS(o,s){return wo(this,void 0,void 0,function(){var n,r,i;return Eo(this,function(t){switch(t.label){case 0:qT((n=o).gl)||Yv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.Sh).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Ho.pi(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.kl.get(r)||[]).push(s),n.kl.set(r,i),[3,4]);case 3:return i=t.sent(),i=rw(i,"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function CS(t,e){(t.kl.get(e)||[]).forEach(function(t){t.resolve()}),t.kl.delete(e)}function NS(t,e,n){var r=t,i=r.Ol[r.currentUser.R()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Ol[r.currentUser.R()]=i)}function AS(e,t,n){void 0===n&&(n=null),e.pl.$a(t);for(var r=0,i=e.Dl.get(t);r<i.length;r++){var o=i[r];e.Sl.delete(o),n&&e.vl.ql(o,n)}e.Dl.delete(t),e.Ll&&e.Fl.kc(t).forEach(function(t){e.Fl.ki(t)||kS(e,t)})}function kS(t,e){var n=t.xl.get(e);null!==n&&(MT(t.gl,n),t.xl=t.xl.remove(e),t.Nl.delete(n),RS(t))}function OS(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof fS?(t.Fl.sr(o.key,e),function(t,e){e=e.key;t.xl.get(e)||(Yv("SyncEngine","New document in limbo: "+e),t.Cl.push(e),RS(t))}(t,o)):o instanceof pS?(Yv("SyncEngine","Document no longer in limbo: "+o.key),t.Fl.rr(o.key,e),t.Fl.ki(o.key)||kS(t,o.key)):Zv()}}function RS(t){for(;0<t.Cl.length&&t.xl.size<t.bl;){var e=t.Cl.shift(),n=t.Ml.next();t.Nl.set(n,new yS(e)),t.xl=t.xl.Ht(e,n),LT(t.gl,new Pm(Sm(mm(e.path)),n,2,Oy.U))}}function PS(e,s,a){return wo(this,void 0,void 0,function(){var n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Sl.nt()?[3,3]:(n.Sl.forEach(function(t,e){o.push(n.Bl(e,s,a).then(function(t){t&&(n.Ll&&n.pl.qa(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=tI.cc(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.vl.uh(r),[4,function(u,c){return wo(this,void 0,void 0,function(){var r,e,n,i,o,s,a;return Eo(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return j_.forEach(c,function(e){return j_.forEach(e.rc,function(t){return r.persistence.Ii.sr(n,e.targetId,t)}).next(function(){return j_.forEach(e.oc,function(t){return r.persistence.Ii.rr(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!Y_(e=t.sent()))throw e;return Yv("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)a=i[n],o=a.targetId,a.fromCache||(s=r.dc.get(o),a=s.Mt,a=s.Bt(a),r.dc=r.dc.Ht(o,a));return[2]}})})}(n.Sh,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function DS(i,o){return wo(this,void 0,void 0,function(){var n,r;return Eo(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Yv("SyncEngine","User change. New user:",o.R()),[4,uI(n.Sh,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).kl.forEach(function(t){t.forEach(function(t){t.reject(new hy(cy.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.kl.clear(),n.pl.Qa(o,r.Ac,r.Rc),[4,PS(n,r.mc)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function xS(a,u,c,h){return wo(this,void 0,void 0,function(){var o,s;return Eo(this,function(t){switch(t.label){case 0:return[4,(e=(o=a).Sh,n=u,i=(r=e).Ho,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.gi(e,n).next(function(t){return t?r.Ic.Zo(e,t):j_.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,zT(o.gl)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(NS(o,u,h||null),CS(o,u),o.Sh.Ho.Ni(u)):Zv(),t.label=4;case 4:return[4,PS(o,s)];case 5:return t.sent(),[3,7];case 6:Yv("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}function LS(h,l){return wo(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return Eo(this,function(t){switch(t.label){case 0:return US(r=h),jS(r),!0!==l||!0===r.$l?[3,3]:(e=r.pl.Sa(),[4,MS(r,e.rt())]);case 1:return i=t.sent(),r.$l=!0,[4,YT(r.gl,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],LT(r.gl,a);return[3,7];case 3:return!1!==l||!1===r.$l?[3,7]:(u=[],c=Promise.resolve(),r.Dl.forEach(function(t,e){r.pl.La(e)?u.push(e):c=c.then(function(){return AS(r,e),dI(r.Sh,e,!0)}),MT(r.gl,e)}),[4,c]);case 4:return t.sent(),[4,MS(r,u)];case 5:return t.sent(),(n=r).Nl.forEach(function(t,e){MT(n.gl,e)}),n.Fl.Mc(),n.Nl=new Map,n.xl=new Ab(Hy.J),r.$l=!1,[4,YT(r.gl,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}function MS(p,d){return wo(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f;return Eo(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.Dl.get(s))&&0!==u.length?[4,pI(e.Sh,Sm(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.Sl.get(l),[4,function(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,vI((e=r).Sh,i.query,!0)];case 1:return n=t.sent(),n=i.view.Rl(n),[2,(e.Ll&&OS(e,i.targetId,n.ml),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,yI(e.Sh,s)];case 8:return f=t.sent(),[4,pI(e.Sh,f)];case 9:return a=t.sent(),[4,_S(e,FS(f),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.vl.uh(r),n)]}})})}function FS(t){return gm(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function US(t){return t.gl.Ch.Bh=ES.bind(null,t),t.gl.Ch.Sn=function(t,e){var n=t;if((t=n.Nl.get(e))&&t.yl)return Hb().add(t.key);var r=Hb();if(!(e=n.Dl.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.Sl.get(s),r=r.ye(s.view.fl);return r}.bind(null,t),t.gl.Ch.Lh=function(o,s,a){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:return(e=o).pl.qa(s,"rejected",a),i=e.Nl.get(s),(n=i&&i.key)?(r=(r=new Ab(Hy.J)).Ht(n,new Og(n,jy.min())),i=Hb().add(n),i=new Qb(jy.min(),new Map,new Lb(ry),r,i),[4,ES(e,i)]):[3,2];case 1:return t.sent(),e.xl=e.xl.remove(n),e.Nl.delete(s),RS(e),[3,4];case 2:return[4,dI(e.Sh,s,!1).then(function(){return AS(e,s,a)}).catch(sE)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.vl.uh=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,a=n.queries.get(a);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hh(s)&&(r=!0);a.Wh=s}}r&&nS(n)}.bind(null,t.Vl),t.vl.ql=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.Vl),t}function jS(t){return t.gl.Ch.qh=function(i,o){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,cI(e.Sh,o)];case 2:return r=t.sent(),NS(e,n,null),CS(e,n),e.pl.Fa(n,"acknowledged"),[4,PS(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,sE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,t),t.gl.Ch.Uh=TS.bind(null,t),t}function VS(t,e,n){var r=t;(function(f,p,d){return wo(this,void 0,void 0,function(){var a,u,c,h,l;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,14,,15]),[4,p.getMetadata()];case 1:return a=t.sent(),[4,(r=f.Sh,o=r,s=v_((i=a).createTime),o.persistence.runTransaction("hasNewerBundle","readonly",function(t){return o.Eo.Ms(t,i.id)}).then(function(t){return!!t&&0<=t.createTime.u(s)}))];case 2:return t.sent()?[4,p.close()]:[3,4];case 3:return[2,(t.sent(),void d.Ul({taskState:"Success",documentsLoaded:a.totalDocuments,bytesLoaded:a.totalBytes,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}))];case 4:return d.Ql(lS(a)),u=new sS(a,f.Sh,p.Kt),[4,p.Kl()];case 5:c=t.sent(),t.label=6;case 6:return c?[4,u.ol(c)]:[3,10];case 7:return(h=t.sent())&&d.Ql(h),[4,p.Kl()];case 8:c=t.sent(),t.label=9;case 9:return[3,6];case 10:return[4,u.complete()];case 11:return l=t.sent(),[4,PS(f,l.zo,void 0)];case 12:return t.sent(),[4,(r=f.Sh,e=a,(n=r).persistence.runTransaction("Save bundle","readwrite",function(t){return n.Eo.$s(t,e)}))];case 13:return t.sent(),d.Ul(l.progress),[3,15];case 14:return Jv("SyncEngine","Loading bundle failed with "+(l=t.sent())),d.Wl(l),[3,15];case 15:return[2]}var e,n,r,i,o,s})})})(r,e,n).then(function(){r.pl.ja()})}var qS,BS,HS=(XS.prototype.initialize=function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return this.Kt=gT(e.gu.T),this.pl=this.jl(e),this.persistence=this.Gl(e),[4,this.persistence.start()];case 1:return t.sent(),this.zl=this.Hl(e),this.Sh=this.Jl(e),[2]}})})},XS.prototype.Hl=function(t){return null},XS.prototype.Jl=function(t){return aI(this.persistence,new eI,t.Yl,this.Kt)},XS.prototype.Gl=function(t){return new AI(OI.ra,this.Kt)},XS.prototype.jl=function(t){return new JI},XS.prototype.terminate=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.pl.$o()];case 1:return t.sent(),[4,this.persistence.$o()];case 2:return t.sent(),[2]}})})},XS),KS=(bo(YS,BS=HS),YS.prototype.initialize=function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,BS.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,mI(this.Sh)];case 2:return t.sent(),[4,this.Xl.initialize(this,e)];case 3:return t.sent(),[4,jS(this.Xl.fa)];case 4:return t.sent(),[4,zT(this.Xl.gl)];case 5:return t.sent(),[2]}})})},YS.prototype.Jl=function(t){return aI(this.persistence,new eI,t.Yl,this.Kt)},YS.prototype.Hl=function(t){var e=this.persistence.Ii._r;return new NE(e,t.fs)},YS.prototype.Gl=function(t){var e=JE(t.gu.T,t.gu.persistenceKey),n=void 0!==this.cacheSizeBytes?iE.Xs(this.cacheSizeBytes):iE.ei;return new GE(this.synchronizeTabs,e,t.clientId,n,t.fs,vT(),yT(),this.Kt,this.pl,!!this.forceOwnership)},YS.prototype.jl=function(t){return new JI},YS),WS=(bo(QS,qS=KS),QS.prototype.initialize=function(r){return wo(this,void 0,void 0,function(){var e,n=this;return Eo(this,function(t){switch(t.label){case 0:return[4,qS.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Xl.fa,this.pl instanceof XI?(this.pl.fa={nu:xS.bind(null,e),su:function(i,o,s,a){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return(e=i).$l?(Yv("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.Dl.has(o))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,gI(e.Sh)];case 3:return n=t.sent(),r=Qb.Le(o,"current"===s),[4,PS(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,dI(e.Sh,o,!0)];case 6:return t.sent(),AS(e,o,a),[3,8];case 7:Zv(),t.label=8;case 8:return[2]}})})}.bind(null,e),iu:function(c,h,l){return wo(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u;return Eo(this,function(t){switch(t.label){case 0:if(!(n=US(c)).$l)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.Dl.has(r)?(Yv("SyncEngine","Adding an already active target "+r),[3,5]):[4,yI(n.Sh,r)]):[3,6];case 2:return i=t.sent(),[4,pI(n.Sh,i)];case 3:return o=t.sent(),[4,_S(n,FS(i),o.targetId,!1)];case 4:t.sent(),LT(n.gl,o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return Eo(this,function(t){switch(t.label){case 0:return n.Dl.has(e)?[4,dI(n.Sh,e,!1).then(function(){MT(n.gl,e),AS(n,e)}).catch(sE)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=0,u=l,t.label=7;case 7:return a<u.length?(u=u[a],[5,s(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})}.bind(null,e),Qo:function(t){return t.Sh.persistence.Qo()}.bind(null,e),eu:function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){return[2,gI((e=n).Sh).then(function(t){return PS(e,t)})]})})}.bind(null,e)},[4,this.pl.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.Po(function(e){return wo(n,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,LS(this.Xl.fa,e)];case 1:return t.sent(),this.zl&&(e&&!this.zl.Tr?this.zl.start(this.Sh):e||this.zl.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},QS.prototype.jl=function(t){var e=vT();if(!XI.Wn(e))throw new hy(cy.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=JE(t.gu.T,t.gu.persistenceKey);return new XI(e,t.fs,n,t.clientId,t.Yl)},QS),zS=(GS.prototype.initialize=function(n,r){return wo(this,void 0,void 0,function(){var e=this;return Eo(this,function(t){switch(t.label){case 0:return this.Sh?[3,2]:(this.Sh=n.Sh,this.pl=n.pl,this.Dh=this.Zl(r),this.gl=this.t_(r),this.Vl=this.e_(r),this.fa=this.n_(r,!n.synchronizeTabs),this.pl.da=function(t){return IS(e.fa,t,1)},this.gl.Ch.s_=DS.bind(null,this.fa),[4,YT(this.gl,this.fa.Ll)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},GS.prototype.e_=function(t){return new $T},GS.prototype.Zl=function(t){var e=gT(t.gu.T),n=(n=t.gu,new nT(n));return t=t.credentials,new ST(t,n,e)},GS.prototype.t_=function(t){var e=this,n=this.Sh,r=this.Dh,i=t.fs,o=function(t){return IS(e.fa,t,0)},t=new(ZI.Wn()?ZI:$I);return new mT(n,r,i,o,t)},GS.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){o=new gS(t,e,n,r,i,o);return s&&(o.$l=!0),o}(this.Sh,this.gl,this.Vl,this.pl,t.Yl,t.bl,e)},GS.prototype.terminate=function(){return function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=n,Yv("RemoteStore","RemoteStore shutting down."),e.Fh.add(5),[4,xT(e)];case 1:return t.sent(),e.kh.$o(),e.Mh.set("Unknown"),[2]}})})}(this.gl)},GS);function GS(){}function QS(t,e){var n=this;return(n=qS.call(this,t,e,!1)||this).Xl=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function YS(t,e,n){var r=this;return(r=BS.call(this)||this).Xl=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function XS(){this.synchronizeTabs=!1}function JS(n,r){void 0===r&&(r=10240);var i=0;return{read:function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){return i<n.byteLength?(e={value:n.slice(i,i+r),done:!1},[2,(i+=r,e)]):[2,{done:!0}]})})},cancel:function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return[2]})})},releaseLock:function(){}}}var $S=(iC.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},iC.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},iC.prototype.r_=function(){this.muted=!0},iC.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},iC),ZS=(rC.prototype.close=function(){return this.o_.cancel()},rC.prototype.getMetadata=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return[2,this.metadata.promise]})})},rC.prototype.Kl=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.a_())]}})})},rC.prototype.a_=function(){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return[4,this.u_()];case 1:return null===(e=t.sent())?[2,null]:(r=this.c_.decode(e),n=Number(r),isNaN(n)&&this.h_("length string ("+r+") is not valid number"),[4,this.l_(n)]);case 2:return r=t.sent(),[2,new iS(JSON.parse(r),e.length+n)]}})})},rC.prototype.__=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},rC.prototype.u_=function(){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return this.__()<0?[4,this.f_()]:[3,3];case 1:if(t.sent())return[3,3];t.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.__())<0&&this.h_("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),n)])}})})},rC.prototype.l_=function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return this.buffer.length<n?[4,this.f_()]:[3,3];case 1:t.sent()&&this.h_("Reached the end of bundle when more is expected."),t.label=2;case 2:return[3,0];case 3:return e=this.c_.decode(this.buffer.slice(0,n)),[2,(this.buffer=this.buffer.slice(n),e)]}})})},rC.prototype.h_=function(t){throw this.o_.cancel(),new Error("Invalid bundle format: "+t)},rC.prototype.f_=function(){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,this.o_.read()];case 1:return(e=t.sent()).done||((n=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n),[2,e.done]}})})},rC),tC=(nC.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},nC),eC=function(t){this._methodName=t};function nC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new hy(cy.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.d_=new By(t)}function rC(t,e){var n=this;this.o_=t,this.Kt=e,this.metadata=new U_,this.buffer=new Uint8Array,this.c_=new TextDecoder("utf-8"),this.a_().then(function(t){t&&t.il()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}function iC(t){this.observer=t,this.muted=!1}function oC(t,e,n){if(!n)throw new hy(cy.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function sC(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new hy(cy.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function aC(t,e,n,r){if(!0===e&&!0===r)throw new hy(cy.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function uC(t){if(!Hy.Et(t))throw new hy(cy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function cC(t){if(Hy.Et(t))throw new hy(cy.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function hC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Zv();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function lC(t,e){if("_delegate"in t&&(t=t._),t instanceof e)return t;if(e.name===t.constructor.name)throw new hy(cy.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");t=hC(t);throw new hy(cy.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function fC(t,e){if(e<=0)throw new hy(cy.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var pC,dC=(TC.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},TC),vC=new Map,yC=(Object.defineProperty(IC.prototype,"app",{get:function(){if(!this.A_)throw new hy(cy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(IC.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(IC.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),IC.prototype.g_=function(t){if(this.T_)throw new hy(cy.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new dC(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Cy;switch(t.type){case"gapi":var e=t.client;return ty(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ky(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new hy(cy.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},IC.prototype.V_=function(){return this.E_},IC.prototype.p_=function(){return this.T_=!0,this.E_},IC.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},IC.prototype.toJSON=function(){return{app:this.A_,T:this.I_,settings:this.E_}},IC.prototype.b_=function(){return(t=vC.get(this))&&(Yv("ComponentProvider","Removing Datastore"),vC.delete(this),t.terminate()),Promise.resolve();var t},IC),gC=(Object.defineProperty(EC.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(EC.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(EC.prototype,"path",{get:function(){return this.S_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(EC.prototype,"parent",{get:function(){return new bC(this.firestore,this.v_,this.S_.path.Z())},enumerable:!1,configurable:!0}),EC.prototype.withConverter=function(t){return new EC(this.firestore,t,this.S_)},EC),mC=(wC.prototype.withConverter=function(t){return new wC(this.firestore,t,this.C_)},wC),bC=(bo(_C,pC=mC),Object.defineProperty(_C.prototype,"id",{get:function(){return this.C_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(_C.prototype,"path",{get:function(){return this.C_.path.ot()},enumerable:!1,configurable:!0}),Object.defineProperty(_C.prototype,"parent",{get:function(){var t=this.D_.Z();return t.nt()?null:new gC(this.firestore,null,new Hy(t))},enumerable:!1,configurable:!0}),_C.prototype.withConverter=function(t){return new _C(this.firestore,t,this.D_)},_C);function _C(t,e,n){var r=this;return(r=pC.call(this,t,e,mm(n))||this).firestore=t,r.D_=n,r.type="collection",r}function wC(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}function EC(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}function IC(t,e){this.w_="(lite)",this.E_=new dC({}),this.T_=!1,t instanceof _y?(this.I_=t,this.m_=new Cy):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new hy(cy.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _y(t.options.projectId)}(t),this.m_=new Ny(e))}function TC(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new hy(cy.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new hy(cy.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,aC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function SC(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof fy&&(t=t._),oC("collection","path",e),t instanceof yC)return cC(n=Vy.ct.apply(Vy,Co([e],r))),new bC(t,null,n);if(!(t instanceof gC||t instanceof bC))throw new hy(cy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return cC(n=Vy.ct.apply(Vy,Co([t.path],r)).child(Vy.ct(e))),new bC(t.firestore,null,n)}function CC(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof fy&&(t=t._),1===arguments.length&&(e=ey.t()),oC("doc","path",e),t instanceof yC)return uC(n=Vy.ct.apply(Vy,Co([e],r))),new gC(t,null,new Hy(n));if(!(t instanceof gC||t instanceof bC))throw new hy(cy.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return uC(n=t.D_.child(Vy.ct.apply(Vy,Co([e],r)))),new gC(t.firestore,t instanceof bC?t.v_:null,new Hy(n))}function NC(t,e){return t instanceof fy&&(t=t._),e instanceof fy&&(e=e._),(t instanceof gC||t instanceof bC)&&(e instanceof gC||e instanceof bC)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function AC(t,e){return t instanceof fy&&(t=t._),e instanceof fy&&(e=e._),t instanceof mC&&e instanceof mC&&t.firestore===e.firestore&&Nm(t.C_,e.C_)&&t.v_===e.v_}var kC=(Object.defineProperty(LC.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(LC.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),LC.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},LC.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},LC.prototype.K=function(t){return ry(this.x_,t.x_)||ry(this.N_,t.N_)},LC),OC=/^__.*__$/,RC=(xC.prototype.F_=function(t,e){return null!==this.zt?new lb(t,this.data,this.zt,e,this.fieldTransforms):new hb(t,this.data,e,this.fieldTransforms)},xC),PC=(DC.prototype.F_=function(t,e){return new lb(t,this.data,this.zt,e,this.fieldTransforms)},DC);function DC(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}function xC(t,e,n){this.data=t,this.zt=e,this.fieldTransforms=n}function LC(t,e){if(!isFinite(t)||t<-90||90<t)throw new hy(cy.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new hy(cy.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}function MC(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Zv()}}var FC=(Object.defineProperty(VC.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(VC.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),VC.prototype.M_=function(t){return new VC(Object.assign(Object.assign({},this.settings),t),this.T,this.Kt,this.ignoreUndefinedProperties,this.fieldTransforms,this.zt)},VC.prototype.L_=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.M_({path:e,B_:!1});return e.q_(t),e},VC.prototype.U_=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.M_({path:t,B_:!1});return t.O_(),t},VC.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},VC.prototype.K_=function(t){return vN(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},VC.prototype.contains=function(e){return void 0!==this.zt.find(function(t){return e.st(t)})||void 0!==this.fieldTransforms.find(function(t){return e.st(t.field)})},VC.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},VC.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(MC(this.k_)&&OC.test(t))throw this.K_('Document fields cannot begin and end with "__"')},VC),UC=(jC.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new FC({k_:t,methodName:e,j_:n,path:By.at(),B_:!1,W_:r},this.T,this.Kt,this.ignoreUndefinedProperties)},jC);function jC(t,e,n){this.T=t,this.ignoreUndefinedProperties=e,this.Kt=n||gT(t)}function VC(t,e,n,r,i,o){this.settings=t,this.T=e,this.Kt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.zt=o||[]}function qC(t){var e=t.p_(),n=gT(t.I_);return new UC(t.I_,!!e.ignoreUndefinedProperties,n)}function BC(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);lN("Data must be an object, but it was:",s,r);var a,u,r=cN(r,s);if(o.merge)a=new Zy(s.zt),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=fN(e,l[h],n);if(!s.contains(f))throw new hy(cy.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");yN(c,f)||c.push(f)}a=new Zy(c),u=s.fieldTransforms.filter(function(t){return a.It(t.field)})}else a=null,u=s.fieldTransforms;return new RC(new Eg(r),a,u)}var HC,KC=(bo(WC,HC=eC),WC.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.zt.push(t.path),null},WC.prototype.isEqual=function(t){return t instanceof WC},WC);function WC(){return null!==HC&&HC.apply(this,arguments)||this}function zC(t,e,n){return new FC({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.T,e.Kt,e.ignoreUndefinedProperties)}var GC,QC,YC,XC,JC=(bo(iN,XC=eC),iN.prototype.z_=function(t){return new eb(t.path,new Vm)},iN.prototype.isEqual=function(t){return t instanceof iN},iN),$C=(bo(rN,YC=eC),rN.prototype.z_=function(t){var e=zC(this,t,!0),n=this.H_.map(function(t){return uN(t,e)}),n=new qm(n);return new eb(t.path,n)},rN.prototype.isEqual=function(t){return this===t},rN),ZC=(bo(nN,QC=eC),nN.prototype.z_=function(t){var e=zC(this,t,!0),n=this.H_.map(function(t){return uN(t,e)}),n=new zm(n);return new eb(t.path,n)},nN.prototype.isEqual=function(t){return this===t},nN),tN=(bo(eN,GC=eC),eN.prototype.z_=function(t){var e=new Xm(t.Kt,Mm(t.Kt,this.J_));return new eb(t.path,e)},eN.prototype.isEqual=function(t){return this===t},eN);function eN(t,e){var n=this;return(n=GC.call(this,t)||this).J_=e,n}function nN(t,e){var n=this;return(n=QC.call(this,t)||this).H_=e,n}function rN(t,e){var n=this;return(n=YC.call(this,t)||this).H_=e,n}function iN(){return null!==XC&&XC.apply(this,arguments)||this}function oN(t,r,i,e){var o=t.G_(1,r,i);lN("Data must be an object, but it was:",o,e);var s=[],a=new Ig;Jy(e,function(t,e){var n=dN(r,t,i);e instanceof fy&&(e=e._);t=o.U_(n);e instanceof KC?s.push(n):null!=(t=uN(e,t))&&(s.push(n),a.set(n,t))});e=new Zy(s);return new PC(a.yt(),e,o.fieldTransforms)}function sN(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[fN(e,r,n)],u=[i];if(o.length%2!=0)throw new hy(cy.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(fN(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=new Ig,v=a.length-1;0<=v;--v){yN(p,a[v])||(h=a[v],(l=u[v])instanceof fy&&(l=l._),f=s.U_(h),l instanceof KC?p.push(h):null!=(f=uN(l,f))&&(p.push(h),d.set(h,f)))}i=new Zy(p);return new PC(d.yt(),i,s.fieldTransforms)}function aN(t,e,n,r){return void 0===r&&(r=!1),uN(n,t.G_(r?4:3,e))}function uN(s,t){if(s instanceof fy&&(s=s._),hN(s))return lN("Unsupported field value:",t,s),cN(s,t);if(s instanceof eC)return function(t,e){if(!MC(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");t=t.z_(e);t&&e.fieldTransforms.push(t)}(s,t),null;if(t.path&&t.zt.push(t.path),s instanceof Array){if(t.settings.B_&&4!==t.k_)throw t.K_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=uN(i[r],t.Q_(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(t instanceof fy&&(t=t._),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Mm(e.Kt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Uy.fromDate(t);return{timestampValue:p_(e.Kt,n)}}if(t instanceof Uy)return n=new Uy(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:p_(e.Kt,n)};if(t instanceof kC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ly)return{bytesValue:d_(e.Kt,t.l)};if(t instanceof gC){n=e.T;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:y_(t.firestore.I_||e.T,t.S_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.K_("Unsupported field value: "+hC(t))}(s,t)}function cN(t,n){var r={};return $y(t)?n.path&&0<n.path.length&&n.zt.push(n.path):Jy(t,function(t,e){e=uN(e,n.L_(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function hN(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Uy||t instanceof kC||t instanceof ly||t instanceof gC||t instanceof eC)}function lN(t,e,n){if(!hN(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){n=hC(n);throw"an object"===n?e.K_(t+" a custom object"):e.K_(t+" "+n)}var r}function fN(t,e,n){if(e instanceof fy&&(e=e._),e instanceof tC)return e.d_;if("string"==typeof e)return dN(t,e);throw vN("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var pN=new RegExp("[~\\*/\\[\\]]");function dN(e,n,r){if(0<=n.search(pN))throw vN("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(tC.bind.apply(tC,Co([void 0],n.split("."))))).d_}catch(t){throw vN("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function vN(t,e,n,r,i){var o=r&&!r.nt(),s=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new hy(cy.INVALID_ARGUMENT,(e+=". ")+t+n)}function yN(t,e){return t.some(function(t){return t.isEqual(e)})}var gN=(EN.prototype.ef=function(r){return wo(this,void 0,void 0,function(){var e,n=this;return Eo(this,function(t){switch(t.label){case 0:if(this.nf(),0<this.mutations.length)throw new hy(cy.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return wo(this,void 0,void 0,function(){var n,e,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return e=E_((n=s).Kt)+"/documents",r={documents:a.map(function(t){return m_(n.Kt,t)})},[4,n.Cu("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.Kt,"found"in(t=t)?function(t,e){ty(!!e.found),e.found.name,e.found.updateTime;var n=b_(t,e.found.name),t=v_(e.found.updateTime),e=new Eg({mapValue:{fields:e.found.fields}});return new kg(n,t,e,{})}(e,t):"missing"in t?function(t,e){ty(!!e.missing),ty(!!e.readTime);t=b_(t,e.missing),e=v_(e.readTime);return new Og(t,e)}(e,t):Zv());i.set(t.key.toString(),t)}),o=[],[2,(a.forEach(function(t){t=i.get(t.toString());ty(!!t),o.push(t)}),o)]}})})}(this.Dh,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof Og||t instanceof kg?n.sf(t):Zv()}),e)]}})})},EN.prototype.set=function(t,e){this.write(e.F_(t,this.Gt(t))),this.tf.add(t.toString())},EN.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},EN.prototype.delete=function(t){this.write(new Eb(t,this.Gt(t))),this.tf.add(t.toString())},EN.prototype.commit=function(){return wo(this,void 0,void 0,function(){var e,n=this;return Eo(this,function(t){switch(t.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return e=this.Y_,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=Hy.ft(e);n.mutations.push(new Ib(e,n.Gt(e)))}),[4,function(i,o){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return n=E_((e=i).Kt)+"/documents",r={writes:o.map(function(t){return C_(e.Kt,t)})},[4,e.bu("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.Dh,this.mutations)];case 1:return t.sent(),this.X_=!0,[2]}})})},EN.prototype.sf=function(t){var e;if(t instanceof kg)e=t.version;else{if(!(t instanceof Og))throw Zv();e=jy.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new hy(cy.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},EN.prototype.Gt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?nb.updateTime(e):nb.Wt()},EN.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(this.tf.has(t.toString())||!e)return nb.exists(!0);if(e.isEqual(jy.min()))throw new hy(cy.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nb.updateTime(e)},EN.prototype.write=function(t){this.nf(),this.mutations.push(t)},EN.prototype.nf=function(){},EN),mN=(wN.prototype.run=function(){this.af()},wN.prototype.af=function(){var t=this;this.zu.Bu(function(){return wo(t,void 0,void 0,function(){var e,n,r=this;return Eo(this,function(t){return e=new gN(this.Dh),(n=this.uf(e))&&n.then(function(t){r.fs.ys(function(){return e.commit().then(function(){r.Ts.resolve(t)}).catch(function(t){r.hf(t)})})}).catch(function(t){r.hf(t)}),[2]})})})},wN.prototype.uf=function(t){try{var e=this.updateFunction(t);return!ag(e)&&e.catch&&e.then?e:(this.Ts.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ts.reject(t),null}},wN.prototype.hf=function(t){var e=this;0<this.cf&&this.lf(t)?(--this.cf,this.fs.ys(function(){return e.af(),Promise.resolve()})):this.Ts.reject(t)},wN.prototype.lf=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!Cb(t)},wN),bN=(_N.prototype.getConfiguration=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,this.N.promise];case 1:return[2,(t.sent(),{fs:this.fs,gu:this.gu,clientId:this.clientId,credentials:this.credentials,Yl:this.user,bl:100})]}})})},_N.prototype.ff=function(t){var e=this;this._f=t,this.N.promise.then(function(){return e._f(e.user)})},_N.prototype.df=function(){if(this.fs.wf)throw new hy(cy.FAILED_PRECONDITION,"The client has already been terminated.")},_N.prototype.terminate=function(){var t=this;this.fs.Ef();var n=new U_;return this.fs.Tf(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.D(),n.resolve(),[3,6];case 5:return e=t.sent(),e=rw(e,"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},_N);function _N(t,e,n){var r=this;this.credentials=t,this.fs=e,this.gu=n,this.user=wy.UNAUTHENTICATED,this.clientId=ey.t(),this._f=function(){},this.N=new U_,this.credentials.S(function(t){Yv("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.N.resolve()})}function wN(t,e,n,r){this.fs=t,this.Dh=e,this.updateFunction=n,this.Ts=r,this.cf=5,this.zu=new ET(this.fs,"transaction_retry")}function EN(t){this.Dh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}function IN(i,o){return wo(this,void 0,void 0,function(){var e,n,r=this;return Eo(this,function(t){switch(t.label){case 0:return i.fs.Af(),Yv("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return e=t.sent(),[4,o.initialize(e)];case 2:return t.sent(),n=e.Yl,i.ff(function(e){n.isEqual(e)||(n=e,i.fs.bo(function(){return wo(r,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,uI(o.Sh,e)];case 1:return t.sent(),[2]}})})}))}),o.persistence.yo(function(){return i.terminate()}),i.mf=o,[2]}})})}function TN(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return r.fs.Af(),[4,SN(r)];case 1:return e=t.sent(),Yv("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.ff(function(t){return r.fs.bo(function(){return function(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return(e=r).fs.Af(),Yv("RemoteStore","RemoteStore received new credentials"),n=qT(e),e.Fh.add(3),[4,xT(e)];case 1:return t.sent(),n&&e.Mh.set("Unknown"),[4,e.Ch.s_(i)];case 2:return t.sent(),e.Fh.delete(3),[4,DT(e)];case 3:return t.sent(),[2]}})})}(i.gl,t)})}),r.If=i,[2]}})})}function SN(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return e.mf?[3,2]:(Yv("FirestoreClient","Using default OfflineComponentProvider"),[4,IN(e,new HS)]);case 1:t.sent(),t.label=2;case 2:return[2,e.mf]}})})}function CN(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return e.If?[3,2]:(Yv("FirestoreClient","Using default OnlineComponentProvider"),[4,TN(e,new zS)]);case 1:t.sent(),t.label=2;case 2:return[2,e.If]}})})}function NN(t){return SN(t).then(function(t){return t.persistence})}function AN(t){return SN(t).then(function(t){return t.Sh})}function kN(t){return CN(t).then(function(t){return t.gl})}function ON(t){return CN(t).then(function(t){return t.fa})}function RN(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,CN(r)];case 1:return e=t.sent(),[2,((n=e.Vl).Gh=function(s,a){return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return e=US(s),(o=e.Sl.get(a))?(n=o.targetId,e.pl.ka(n),r=o.view.Pl(),[3,4]):[3,1];case 1:return[4,pI(e.Sh,Sm(a))];case 2:return i=t.sent(),o=e.pl.ka(i.targetId),n=i.targetId,[4,_S(e,a,n,"current"===o)];case 3:r=t.sent(),e.Ll&&LT(e.gl,i),t.label=4;case 4:return[2,r]}})})}.bind(null,e.fa),n.Jh=function(i,o){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return n=(e=i).Sl.get(o),1<(r=e.Dl.get(n.targetId)).length?[2,(e.Dl.set(n.targetId,r.filter(function(t){return!Nm(t,o)})),void e.Sl.delete(o))]:e.Ll?(e.pl.$a(n.targetId),e.pl.Ca(n.targetId)?[3,2]:[4,dI(e.Sh,n.targetId,!1).then(function(){e.pl.Ba(n.targetId),MT(e.gl,n.targetId),AS(e,n.targetId)}).catch(sE)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return AS(e,n.targetId),[4,dI(e.Sh,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.fa),n)]}})})}function PN(n,r,i){var t=this;void 0===i&&(i={});var o=new U_;return n.fs.ys(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(n,r,i,o,s){var t=new $S({next:function(t){r.ys(function(){return eS(n,a)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new hy(cy.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new hy(cy.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),a=new rS(mm(i.path),t,{includeMetadataChanges:!0,sl:!0});return tS(n,a)},[4,RN(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.fs,r,i,o])]}})})}),o.promise}function DN(n,r,i){var t=this;void 0===i&&(i={});var o=new U_;return n.fs.ys(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new $S({next:function(t){n.ys(function(){return eS(e,s)}),t.fromCache&&"server"===r.source?i.reject(new hy(cy.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new rS(t,o,{includeMetadataChanges:!0,sl:!0});return tS(e,s)},[4,RN(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.fs,r,i,o])]}})})}),o.promise}var xN,LN=(Object.defineProperty(UN.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),UN.prototype.ys=function(t){this.enqueue(t)},UN.prototype.Tf=function(t){this.Sf(),this.Df(t)},UN.prototype.Ef=function(){var t;this.yf||(this.yf=!0,(t=yT())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf))},UN.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},UN.prototype.bo=function(t){var e=this;this.ys(function(){return e.Pf.push(t),e.Cf()})},UN.prototype.Cf=function(){return wo(this,void 0,void 0,function(){var e,n=this;return Eo(this,function(t){switch(t.label){case 0:if(0===this.Pf.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return t.sent(),this.Pf.shift(),this.zu.reset(),[3,4];case 3:if(!Y_(e=t.sent()))throw e;return Yv("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.Pf.length&&this.zu.Bu(function(){return n.Cf()}),t.label=5;case 5:return[2]}})})},UN.prototype.Df=function(t){var r=this,e=this.Rf.then(function(){return r.pf=!0,t().catch(function(t){throw r.Vf=t,r.pf=!1,Xv("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.pf=!1,t})});return this.Rf=e},UN.prototype.Ir=function(t,e,n){var r=this;this.Sf(),-1<this.bf.indexOf(t)&&(e=0);n=ew.Is(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(n),n},UN.prototype.Sf=function(){this.Vf&&Zv()},UN.prototype.Af=function(){},UN.prototype.Nf=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,e=this.Rf];case 1:t.sent(),t.label=2;case 2:if(e!==this.Rf)return[3,0];t.label=3;case 3:return[2]}})})},UN.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].ds===t)return!0;return!1},UN.prototype.Of=function(r){var i=this;return this.Nf().then(function(){i.gf.sort(function(t,e){return t.ws-e.ws});for(var t=0,e=i.gf;t<e.length;t++){var n=e[t];if(n.Ps(),"all"!==r&&n.ds===r)break}return i.Nf()})},UN.prototype.kf=function(t){this.bf.push(t)},UN.prototype.xf=function(t){t=this.gf.indexOf(t);this.gf.splice(t,1)},UN),MN=(bo(FN,xN=yC),FN.prototype.b_=function(){return this.$f||VN(this),this.$f.terminate()},FN);function FN(t,e){var n=this;return(n=xN.call(this,t,e)||this).Mf=new LN,n.w_="name"in t?t.name:"[DEFAULT]",n}function UN(){var e=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.zu=new ET(this,"async_queue_retry"),this.vf=function(){var t=yT();t&&Yv("AsyncQueue","Visibility state changed to "+t.visibilityState),e.zu.Uu()};var t=yT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.vf)}function jN(t){return t.$f||VN(t),t.$f.df(),t.$f}function VN(t){var e,n,r=t.p_(),r=(e=t.I_,n=t.w_,new by(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.$f=new bN(t.m_,t.Mf,r)}function qN(n,r,i){var t=this,o=new U_;return n.fs.enqueue(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,IN(n,i)];case 1:return t.sent(),[4,TN(n,r)];case 2:return t.sent(),o.resolve(),[3,4];case 3:if(!("FirebaseError"===(t=e=t.sent()).name?t.code===cy.FAILED_PRECONDITION||t.code===cy.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),o.reject(e),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function BN(t){if(t.R_||t.P_)throw new hy(cy.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var HN,Gn=(QN.prototype.Lf=function(t,e){switch(void 0===e&&(e="none"),hg(t)){case 0:return null;case 1:return t.booleanValue;case 2:return rg(t.integerValue||t.doubleValue);case 3:return this.Bf(t.timestampValue);case 4:return this.qf(t,e);case 5:return t.stringValue;case 6:return this.Uf(ig(t.bytesValue));case 7:return this.Qf(t.referenceValue);case 8:return this.Kf(t.geoPointValue);case 9:return this.Wf(t.arrayValue,e);case 10:return this.jf(t.mapValue,e);default:throw Zv()}},QN.prototype.jf=function(t,n){var r=this,i={};return Jy(t.fields||{},function(t,e){i[t]=r.Lf(e,n)}),i},QN.prototype.Kf=function(t){return new kC(rg(t.latitude),rg(t.longitude))},QN.prototype.Wf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Lf(t,e)})},QN.prototype.qf=function(t,e){switch(e){case"previous":var n=function t(e){e=e.mapValue.fields.__previous_value__;return og(e)?t(e):e}(t);return null==n?null:this.Lf(n,e);case"estimate":return this.Bf(sg(t));default:return null}},QN.prototype.Bf=function(t){t=ng(t);return new Uy(t.seconds,t.nanos)},QN.prototype.Gf=function(t,e){var n=Vy.ct(t);ty(M_(n));t=new _y(n.get(1),n.get(3)),n=new Hy(n.X(5));return t.isEqual(e)||Xv("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},QN),KN=(Object.defineProperty(GN.prototype,"id",{get:function(){return this.S_.path.et()},enumerable:!1,configurable:!0}),Object.defineProperty(GN.prototype,"ref",{get:function(){return new gC(this.zf,this.v_,this.S_)},enumerable:!1,configurable:!0}),GN.prototype.exists=function(){return null!==this.Jf},GN.prototype.data=function(){if(this.Jf){if(this.v_){var t=new WN(this.zf,this.Hf,this.S_,this.Jf,null);return this.v_.fromFirestore(t)}return this.Hf.Lf(this.Jf.vt())}},GN.prototype.get=function(t){if(this.Jf){t=this.Jf.data().field(YN("DocumentSnapshot.get",t));if(null!==t)return this.Hf.Lf(t)}},GN),WN=(bo(zN,HN=KN),zN.prototype.data=function(){return HN.prototype.data.call(this)},zN);function zN(){return null!==HN&&HN.apply(this,arguments)||this}function GN(t,e,n,r,i){this.zf=t,this.Hf=e,this.S_=n,this.Jf=r,this.v_=i}function QN(){}function YN(t,e){return"string"==typeof e?dN(t,e):(e instanceof fy?e._:e).d_}function XN(t){if(_m(t)&&0===t.Nt.length)throw new hy(cy.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}vt=function(){};function JN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){t=i[r].Yf(t)}return t}var $N,ZN,tA,eA,nA,rA=(bo(fA,nA=vt),fA.prototype.Yf=function(t){var e=qC(t.firestore),e=function(t,e,n,r,i,o){if(r.ht()){if("array-contains"===i||"array-contains-any"===i)throw new hy(cy.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){vA(o,i);for(var s=[],a=0,u=o;a<u.length;a++){var c=u[a];s.push(dA(n,t,c))}h={arrayValue:{values:s}}}else h=dA(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||vA(o,i),h=aN(e,"where",o,"in"===i||"not-in"===i);var h=qg.create(r,i,h);return function(t,e){if(e.xt()){var n=Em(t);if(null!==n&&!n.isEqual(e.field))throw new hy(cy.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=wm(t);null!==n&&yA(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new hy(cy.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new hy(cy.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(t.C_,e,t.firestore.I_,this.Xf,this.Zf,this.td);return new mC(t.firestore,t.v_,(t=t.C_,e=t.filters.concat([e]),new ym(t.path,t.collectionGroup,t.Nt.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},fA),iA=(bo(lA,eA=vt),lA.prototype.Yf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new hy(cy.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new hy(cy.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new pm(e,n);return e=r,null!==wm(n=t)||null!==(t=Em(n))&&yA(0,t,e.field),r}(t.C_,this.Xf,this.ed);return new mC(t.firestore,t.v_,(t=t.C_,e=t.Nt.concat([e]),new ym(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},lA),oA=(bo(hA,tA=vt),hA.prototype.Yf=function(t){return new mC(t.firestore,t.v_,Cm(t.C_,this.nd,this.sd))},hA),sA=(bo(cA,ZN=vt),cA.prototype.Yf=function(t){var e=pA(t,this.type,this.rd,this.od);return new mC(t.firestore,t.v_,(t=t.C_,e=e,new ym(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},cA),aA=(bo(uA,$N=vt),uA.prototype.Yf=function(t){var e=pA(t,this.type,this.rd,this.od);return new mC(t.firestore,t.v_,(t=t.C_,e=e,new ym(t.path,t.collectionGroup,t.Nt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},uA);function uA(t,e,n){var r=this;return(r=$N.call(this)||this).type=t,r.rd=e,r.od=n,r}function cA(t,e,n){var r=this;return(r=ZN.call(this)||this).type=t,r.rd=e,r.od=n,r}function hA(t,e,n){var r=this;return(r=tA.call(this)||this).type=t,r.nd=e,r.sd=n,r}function lA(t,e){var n=this;return(n=eA.call(this)||this).Xf=t,n.ed=e,n.type="orderBy",n}function fA(t,e,n){var r=this;return(r=nA.call(this)||this).Xf=t,r.Zf=e,r.td=n,r.type="where",r}function pA(t,c,e,n){if(e[0]instanceof fy&&(e[0]=e[0]._),e[0]instanceof KN)return function(t,e,n,r){if(!n)throw new hy(cy.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=Tm(t);o<s.length;o++){var a=s[o];if(a.field.ht())i.push(yg(e,n.key));else{var u=n.field(a.field);if(og(u))throw new hy(cy.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){a=a.field.ot();throw new hy(cy.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}i.push(u)}}return new am(i,r)}(t.C_,t.firestore.I_,e[0].Jf,n);var r=qC(t.firestore);return function(t,e,n,r,i,o){var s=t.Nt;if(i.length>s.length)throw new hy(cy.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ht()){if("string"!=typeof c)throw new hy(cy.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Im(t)&&-1!==c.indexOf("/"))throw new hy(cy.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Vy.ct(c));if(!Hy.Et(h))throw new hy(cy.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new Hy(h);a.push(yg(e,h))}else{c=aN(n,r,c);a.push(c)}}return new am(a,o)}(t.C_,t.firestore.I_,r,c,e,n)}function dA(t,e,n){if(n instanceof fy&&(n=n._),"string"==typeof n){if(""===n)throw new hy(cy.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Im(e)&&-1!==n.indexOf("/"))throw new hy(cy.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(Vy.ct(n));if(!Hy.Et(e))throw new hy(cy.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return yg(t,new Hy(e))}if(n instanceof gC)return yg(t,n.S_);throw new hy(cy.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+hC(n)+".")}function vA(t,e){if(!Array.isArray(t)||0===t.length)throw new hy(cy.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new hy(cy.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function yA(t,e,n){if(!n.isEqual(e))throw new hy(cy.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function gA(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}function mA(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var bA,_A,wA,EA=(bo(RA,wA=Gn),RA.prototype.Uf=function(t){return new ly(t)},RA.prototype.Qf=function(t){t=this.Gf(t,this.firestore.I_);return new gC(this.firestore,null,t)},RA),IA=(OA.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},OA),TA=(bo(kA,_A=KN),kA.prototype.exists=function(){return _A.prototype.exists.call(this)},kA.prototype.data=function(t){if(void 0===t&&(t={}),this.Jf){if(this.v_){var e=new SA(this.zf,this.Hf,this.S_,this.Jf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Hf.Lf(this.Jf.vt(),t.serverTimestamps)}},kA.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Jf){t=this.Jf.data().field(YN("DocumentSnapshot.get",t));if(null!==t)return this.Hf.Lf(t,e.serverTimestamps)}},kA),SA=(bo(AA,bA=TA),AA.prototype.data=function(t){return void 0===t&&(t={}),bA.prototype.data.call(this,t)},AA),CA=(Object.defineProperty(NA.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(NA.prototype,"size",{get:function(){return this.ud.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(NA.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),NA.prototype.forEach=function(e,n){var r=this;this.ud.docs.forEach(function(t){e.call(n,new SA(r.zf,r.Hf,t.key,t,new IA(r.ud.Ce.has(t.key),r.ud.fromCache),r.query.v_))})},NA.prototype.docChanges=function(t){void 0===t&&(t={});t=!!t.includeMetadataChanges;if(t&&this.ud.Ne)throw new hy(cy.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.hd&&this.ld===t||(this.hd=function(i,e){if(i.ud.De.nt()){var n=0;return i.ud.docChanges.map(function(t){var e=new SA(i.zf,i.Hf,t.doc.key,t.doc,new IA(i.ud.Ce.has(t.doc.key),i.ud.fromCache),i.query.v_);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i.ud.De;return i.ud.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new SA(i.zf,i.Hf,t.doc.key,t.doc,new IA(i.ud.Ce.has(t.doc.key),i.ud.fromCache),i.query.v_),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zv()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this,t),this.ld=t),this.hd},NA);function NA(t,e,n,r){this.zf=t,this.Hf=e,this.ud=r,this.metadata=new IA(r.hasPendingWrites,r.fromCache),this.query=n}function AA(){return null!==bA&&bA.apply(this,arguments)||this}function kA(t,e,n,r,i,o){var s=this;return(s=_A.call(this,t,e,n,r,o)||this).zf=t,s.ad=t,s.metadata=i,s}function OA(t,e){this.hasPendingWrites=t,this.fromCache=e}function RA(t){var e=this;return(e=wA.call(this)||this).firestore=t,e}function PA(t,e){return t instanceof TA&&e instanceof TA?t.zf===e.zf&&t.S_.isEqual(e.S_)&&(null===t.Jf?null===e.Jf:t.Jf.isEqual(e.Jf))&&t.v_===e.v_:t instanceof CA&&e instanceof CA&&t.zf===e.zf&&AC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.ud.isEqual(e.ud)}var DA,xA=(bo(LA,DA=Gn),LA.prototype.Uf=function(t){return new ly(t)},LA.prototype.Qf=function(t){t=this.Gf(t,this.firestore.I_);return new gC(this.firestore,null,t)},LA);function LA(t){var e=this;return(e=DA.call(this)||this).firestore=t,e}function MA(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=lC(t,gC);var o=lC(t.firestore,MN),s=qC(o);return e instanceof fy&&(e=e._),UA(o,[("string"==typeof e||e instanceof tC?sN(s,"updateDoc",t.S_,e,n,r):oN(s,"updateDoc",t.S_,e)).F_(t.S_,nb.exists(!0))])}function FA(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e instanceof fy&&(e=e._);var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||gA(n[i])||(r=n[i],i++);var o,s,a,u,c,h,l={includeMetadataChanges:r.includeMetadataChanges};return gA(n[i])&&(o=n[i],n[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),n[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),n[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),e instanceof gC?(a=lC(e.firestore,MN),u=mm(e.S_.path),h={next:function(t){n[i]&&n[i](jA(a,e,t))},error:n[i+1],complete:n[i+2]}):(s=lC(e,mC),a=lC(s.firestore,MN),u=s.C_,c=new xA(a),h={next:function(t){n[i]&&n[i](new CA(a,c,s,t))},error:n[i+1],complete:n[i+2]},XN(e.C_)),function(n,t,e){var r=this,i=new $S(h),o=new rS(t,i,e);return n.fs.ys(function(){return wo(r,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=tS,[4,RN(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.r_(),n.fs.ys(function(){return wo(r,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=eS,[4,RN(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(jN(a),u,l)}function UA(t,e){return function(n,r){var t=this,i=new U_;return n.fs.ys(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=wS,[4,ON(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(jN(t),e)}function jA(t,e,n){var r=n.docs.get(e.S_),i=new xA(t);return new TA(t,i,e.S_,r,new IA(n.hasPendingWrites,n.fromCache),e.v_)}var VA=(qA.prototype.set=function(t,e,n){this.Ed();t=BA(t,this.zf),e=mA(t.v_,e,n),n=BC(this.wd,"WriteBatch.set",t.S_,e,null!==t.v_,n);return this.fd.push(n.F_(t.S_,nb.Wt())),this},qA.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Ed();t=BA(t,this.zf);return e instanceof fy&&(e=e._),e="string"==typeof e||e instanceof tC?sN(this.wd,"WriteBatch.update",t.S_,e,n,r):oN(this.wd,"WriteBatch.update",t.S_,e),this.fd.push(e.F_(t.S_,nb.exists(!0))),this},qA.prototype.delete=function(t){this.Ed();t=BA(t,this.zf);return this.fd=this.fd.concat(new Eb(t.S_,nb.Wt())),this},qA.prototype.commit=function(){return this.Ed(),this.dd=!0,0<this.fd.length?this._d(this.fd):Promise.resolve()},qA.prototype.Ed=function(){if(this.dd)throw new hy(cy.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},qA);function qA(t,e){this.zf=t,this._d=e,this.fd=[],this.dd=!1,this.wd=qC(t)}function BA(t,e){if(t instanceof fy&&(t=t._),t.firestore!==e)throw new hy(cy.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var HA,KA,WA,zA=(tk.prototype.get=function(t){var e=this,n=BA(t,this.zf),r=new EA(this.zf);return this.Td.ef([n.S_]).then(function(t){if(!t||1!==t.length)return Zv();t=t[0];if(t instanceof Og)return new KN(e.zf,r,n.S_,null,n.v_);if(t instanceof kg)return new KN(e.zf,r,t.key,t,n.v_);throw Zv()})},tk.prototype.set=function(t,e,n){t=BA(t,this.zf),e=mA(t.v_,e,n),n=BC(this.wd,"Transaction.set",t.S_,e,null!==t.v_,n);return this.Td.set(t.S_,n),this},tk.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=BA(t,this.zf);return e instanceof fy&&(e=e._),e="string"==typeof e||e instanceof tC?sN(this.wd,"Transaction.update",t.S_,e,n,r):oN(this.wd,"Transaction.update",t.S_,e),this.Td.update(t.S_,e),this},tk.prototype.delete=function(t){t=BA(t,this.zf);return this.Td.delete(t.S_),this},bo(ZA,WA=tk),ZA.prototype.get=function(t){var e=this,n=BA(t,this.zf),r=new xA(this.zf);return WA.prototype.get.call(this,t).then(function(t){return new TA(e.zf,r,n.S_,t.Jf,new IA(!1,!1),n.v_)})},ZA),GA=($A.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){BN(t=lC(t,MN));var n=jN(t),r=t.p_(),t=new zS;return qN(n,t,new KS(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._,{forceOwnership:e})},$A.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){BN(t=lC(t,MN));var e=jN(t),n=t.p_(),t=new zS;return qN(e,t,new WS(t,n.cacheSizeBytes))}(t._)},$A.prototype.clearIndexedDbPersistence=function(t){return function(n){var t=this;if(n.R_&&!n.P_)throw new hy(cy.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new U_;return n.Mf.Tf(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return q_.Wn()?(e=n+"main",[4,q_.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(JE(n.I_,n.w_))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise}(t._)},$A),QA=(bo(JA,KA=fy),Object.defineProperty(JA.prototype,"I_",{get:function(){return this._.I_},enumerable:!1,configurable:!0}),JA.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._.V_()),t)).merge,this._.g_(t)},JA.prototype.useEmulator=function(t,e){var n,r;n=this._,r=t,t=e,"firestore.googleapis.com"!==(e=(n=lC(n,yC)).V_()).host&&e.host!==r&&Jv("Host has been set in both settings() and useEmulator(), emulator host will be used"),n.g_(Object.assign(Object.assign({},e),{host:r+":"+t,ssl:!1}))},JA.prototype.enableNetwork=function(){return function(r){var t=this;return r.fs.enqueue(function(){return wo(t,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,NN(r)];case 1:return e=t.sent(),[4,kN(r)];case 2:return n=t.sent(),[2,(e.Vo(!0),(t=n).Fh.delete(0),DT(t))]}})})})}(jN(lC(this._,MN)))},JA.prototype.disableNetwork=function(){return function(r){var t=this;return r.fs.enqueue(function(){return wo(t,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,NN(r)];case 1:return e=t.sent(),[4,kN(r)];case 2:return n=t.sent(),[2,(e.Vo(!1),function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return(e=n).Fh.add(0),[4,xT(e)];case 1:return t.sent(),e.Mh.set("Offline"),[2]}})})}(n))]}})})})}(jN(lC(this._,MN)))},JA.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&aC("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Id.enableMultiTabIndexedDbPersistence(this):this.Id.enableIndexedDbPersistence(this,n)},JA.prototype.clearPersistence=function(){return this.Id.clearIndexedDbPersistence(this)},JA.prototype.terminate=function(){return this.md&&(this.md._removeServiceInstance("firestore"),this.md._removeServiceInstance("firestore-exp")),this._._delete()},JA.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new U_;return n.fs.ys(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=SS,[4,ON(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(jN(lC(this._,MN)))},JA.prototype.onSnapshotsInSync=function(t){return e=this._,t=t,function(n,t){var e=this,r=new $S(t);return n.fs.ys(function(){return wo(e,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(t,e){t.jh.add(e),e.next()},[4,RN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),function(){r.r_(),n.fs.ys(function(){return wo(e,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(t,e){t.jh.delete(e)},[4,RN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}}(jN(lC(e,MN)),gA(t)?t:{next:t});var e},Object.defineProperty(JA.prototype,"app",{get:function(){if(!this.md)throw new hy(cy.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.md},enumerable:!1,configurable:!0}),JA.prototype.collection=function(t){try{return new Nk(this,SC(this._,t))}catch(t){throw pk(t,"collection()","Firestore.collection()")}},JA.prototype.doc=function(t){try{return new lk(this,CC(this._,t))}catch(t){throw pk(t,"doc()","Firestore.doc()")}},JA.prototype.collectionGroup=function(t){try{return new Tk(this,function(t,e){if(t=lC(t,yC),oC("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new hy(cy.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new mC(t,null,(e=e,new ym(Vy.at(),e)))}(this._,t))}catch(t){throw pk(t,"collectionGroup()","Firestore.collectionGroup()")}},JA.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new U_;return n.fs.ys(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,CN(n).then(function(t){return t.Dh})];case 1:return e=t.sent(),new mN(n.fs,e,r,i).run(),[2]}})})}),i.promise}(jN(n=this._),function(t){return t=new zA(n,t),e(new ik(r,t))})},JA.prototype.batch=function(){var e=this;return jN(this._),new ok(new VA(this._,function(t){return UA(e._,t)}))},JA.prototype.loadBundle=function(t){throw new hy(cy.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},JA.prototype.namedQuery=function(t){throw new hy(cy.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},JA),YA=(bo(XA,HA=Gn),XA.prototype.Uf=function(t){return new my(new ly(t))},XA.prototype.Qf=function(t){t=this.Gf(t,this.firestore.I_);return lk.Ad(t,this.firestore,null)},XA);function XA(t){var e=this;return(e=HA.call(this)||this).firestore=t,e}function JA(t,e,n){var r=this;return(r=KA.call(this,e)||this).Id=n,r.INTERNAL={delete:function(){return r.terminate()}},t instanceof _y||(r.md=t),r}function $A(){}function ZA(t,e){var n=this;return(n=WA.call(this,t,e)||this).zf=t,n}function tk(t,e){this.zf=t,this.Td=e,this.wd=qC(t)}var ek,nk,rk,ik=(bo(ck,rk=fy),ck.prototype.get=function(t){var e=this,n=xk(t);return this._.get(n).then(function(t){return new Ek(e.zf,new TA(e.zf._,e.Hf,t.S_,t.Jf,t.metadata,n.v_))})},ck.prototype.set=function(t,e,n){t=xk(t);return n?(sC("Transaction.set",n),this._.set(t,e,n)):this._.set(t,e),this},ck.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=xk(t);return 2===arguments.length?this._.update(o,e):(t=this._).update.apply(t,Co([o,e,n],r)),this},ck.prototype.delete=function(t){t=xk(t);return this._.delete(t),this},ck),ok=(bo(uk,nk=fy),uk.prototype.set=function(t,e,n){t=xk(t);return n?(sC("WriteBatch.set",n),this._.set(t,e,n)):this._.set(t,e),this},uk.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=xk(t);return 2===arguments.length?this._.update(o,e):(t=this._).update.apply(t,Co([o,e,n],r)),this},uk.prototype.delete=function(t){t=xk(t);return this._.delete(t),this},uk.prototype.commit=function(){return this._.commit()},uk),sk=(bo(ak,ek=fy),ak.prototype.fromFirestore=function(t,e){t=new SA(this.zf._,this.Hf,t.S_,t.Jf,t.metadata,null);return this._.fromFirestore(new Ik(this.zf,t),null!=e?e:{})},ak.prototype.toFirestore=function(t,e){return e?this._.toFirestore(t,e):this._.toFirestore(t)},ak.Rd=function(t,e){var n=ak.Pd,r=n.get(t);r||(r=new WeakMap,n.set(t,r));n=r.get(e);return n||(n=new ak(t,new YA(t),e),r.set(e,n)),n},ak);function ak(t,e,n){var r=this;return(r=ek.call(this,n)||this).zf=t,r.Hf=e,r}function uk(){return null!==nk&&nk.apply(this,arguments)||this}function ck(t,e){var n=this;return(n=rk.call(this,e)||this).zf=t,n.Hf=new YA(t),n}sk.Pd=new WeakMap;var hk,lk=(bo(fk,hk=fy),fk.yd=function(t,e,n){if(t.length%2!=0)throw new hy(cy.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.ot()+" has "+t.length);return new fk(e,new gC(e._,n,new Hy(t)))},fk.Ad=function(t,e,n){return new fk(e,new gC(e._,n,t))},Object.defineProperty(fk.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(fk.prototype,"parent",{get:function(){return new Nk(this.firestore,this._.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(fk.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),fk.prototype.collection=function(t){try{return new Nk(this.firestore,SC(this._,t))}catch(t){throw pk(t,"collection()","DocumentReference.collection()")}},fk.prototype.isEqual=function(t){return t instanceof fy&&(t=t._),t instanceof gC&&NC(this._,t)},fk.prototype.set=function(t,e){e=sC("DocumentReference.set",e);try{return function(t,e,n){t=lC(t,gC);var r=lC(t.firestore,MN),e=mA(t.v_,e,n);return UA(r,[BC(qC(r),"setDoc",t.S_,e,null!==t.v_,n).F_(t.S_,nb.Wt())])}(this._,t,e)}catch(t){throw pk(t,"setDoc()","DocumentReference.set()")}},fk.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?MA(this._,t):MA.apply(void 0,Co([this._,t,e],n))}catch(t){throw pk(t,"updateDoc()","DocumentReference.update()")}},fk.prototype.delete=function(){return UA(lC((t=this._).firestore,MN),[new Eb(t.S_,nb.Wt())]);var t},fk.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=dk(t),i=vk(t,function(t){return new Ek(e.firestore,new TA(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))});return FA(this._,r,i)},fk.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=lC(e,gC);var n=lC(e.firestore,MN),t=jN(n),r=new xA(n);return function(n,r){var t=this,i=new U_;return n.fs.ys(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(o,s,a){return wo(this,void 0,void 0,function(){var r,i;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=s,(n=o).persistence.runTransaction("read document","readonly",function(t){return n.Ic.Jo(t,e)}))];case 1:return(i=t.sent())instanceof kg?a.resolve(i):i instanceof Og?a.resolve(null):a.reject(new hy(cy.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),i=rw(r,"Failed to get document '"+s+" from cache"),a.reject(i),[3,3];case 3:return[2]}var e,n})})},[4,AN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.S_).then(function(t){return new TA(n,r,e.S_,t,new IA(t instanceof kg&&t.bt,!0),e.v_)})}:"server"===(null==t?void 0:t.source)?function(e){e=lC(e,gC);var n=lC(e.firestore,MN);return PN(jN(n),e.S_,{source:"server"}).then(function(t){return jA(n,e,t)})}:function(e){e=lC(e,gC);var n=lC(e.firestore,MN);return PN(jN(n),e.S_).then(function(t){return jA(n,e,t)})})(this._).then(function(t){return new Ek(e.firestore,new TA(e.firestore._,e.Hf,t.S_,t.Jf,t.metadata,e._.v_))})},fk.prototype.withConverter=function(t){return new fk(this.firestore,this._.withConverter(sk.Rd(this.firestore,t)))},fk);function fk(t,e){var n=this;return(n=hk.call(this,e)||this).firestore=t,n.Hf=new YA(t),n}function pk(t,e,n){return t.message=t.message.replace(e,n),t}function dk(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!gA(r))return r}return{}}function vk(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=gA(t[0])?t[0]:gA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var yk,gk,mk,bk,_k,wk,Ek=(bo(Dk,wk=fy),Object.defineProperty(Dk.prototype,"ref",{get:function(){return new lk(this.zf,this._.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(Dk.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(Dk.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(Dk.prototype,"exists",{get:function(){return this._.exists()},enumerable:!1,configurable:!0}),Dk.prototype.data=function(t){return this._.data(t)},Dk.prototype.get=function(t,e){return this._.get(t,e)},Dk.prototype.isEqual=function(t){return PA(this._,t._)},Dk),Ik=(bo(Pk,_k=Ek),Pk.prototype.data=function(t){return this._.data(t)},Pk),Tk=(bo(Rk,bk=fy),Rk.prototype.where=function(t,e,n){try{return new Rk(this.firestore,JN(this._,(r=n,i=e,o=YN("where",t),new rA(o,i,r))))}catch(t){throw pk(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},Rk.prototype.orderBy=function(n,t){try{return new Rk(this.firestore,JN(this._,function(t){void 0===t&&(t="asc");var e=t,t=YN("orderBy",n);return new iA(t,e)}(t)))}catch(n){throw pk(n,/(orderBy|where)\(\)/,"Query.$1()")}},Rk.prototype.limit=function(t){try{return new Rk(this.firestore,JN(this._,(fC("limit",e=t),new oA("limit",e,"F"))))}catch(t){throw pk(t,"limit()","Query.limit()")}var e},Rk.prototype.limitToLast=function(t){try{return new Rk(this.firestore,JN(this._,(fC("limitToLast",e=t),new oA("limitToLast",e,"L"))))}catch(t){throw pk(t,"limitToLast()","Query.limitToLast()")}var e},Rk.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new Rk(this.firestore,JN(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sA("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw pk(t,"startAt()","Query.startAt()")}},Rk.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new Rk(this.firestore,JN(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sA("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw pk(t,"startAfter()","Query.startAfter()")}},Rk.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new Rk(this.firestore,JN(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new aA("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw pk(t,"endBefore()","Query.endBefore()")}},Rk.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new Rk(this.firestore,JN(this._,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new aA("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw pk(t,"endAt()","Query.endAt()")}},Rk.prototype.isEqual=function(t){return AC(this._,t._)},Rk.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=lC(e,mC);var n=lC(e.firestore,MN),t=jN(n),r=new xA(n);return function(n,r){var t=this,i=new U_;return n.fs.ys(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(i,o,s){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,vI(i,o,!0)];case 1:return r=t.sent(),e=new dS(o,r.Pc),n=e.dl(r.documents),n=e.Ei(n,!1),s.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),r=rw(n,"Failed to execute query '"+o+" against cache"),s.reject(r),[3,3];case 3:return[2]}})})},[4,AN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.C_).then(function(t){return new CA(n,r,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){e=lC(e,mC);var n=lC(e.firestore,MN),t=jN(n),r=new xA(n);return DN(t,e.C_,{source:"server"}).then(function(t){return new CA(n,r,e,t)})}:function(e){e=lC(e,mC);var n=lC(e.firestore,MN),t=jN(n),r=new xA(n);return XN(e.C_),DN(t,e.C_).then(function(t){return new CA(n,r,e,t)})})(this._).then(function(t){return new Ck(e.firestore,new CA(e.firestore._,e.Hf,e._,t.ud))})},Rk.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=dk(t),i=vk(t,function(t){return new Ck(e.firestore,new CA(e.firestore._,e.Hf,e._,t.ud))});return FA(this._,r,i)},Rk.prototype.withConverter=function(t){return new Rk(this.firestore,this._.withConverter(sk.Rd(this.firestore,t)))},Rk),Sk=(bo(Ok,mk=fy),Object.defineProperty(Ok.prototype,"type",{get:function(){return this._.type},enumerable:!1,configurable:!0}),Object.defineProperty(Ok.prototype,"doc",{get:function(){return new Ik(this.zf,this._.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(Ok.prototype,"oldIndex",{get:function(){return this._.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(Ok.prototype,"newIndex",{get:function(){return this._.newIndex},enumerable:!1,configurable:!0}),Ok),Ck=(bo(kk,gk=fy),Object.defineProperty(kk.prototype,"query",{get:function(){return new Tk(this.zf,this._.query)},enumerable:!1,configurable:!0}),Object.defineProperty(kk.prototype,"metadata",{get:function(){return this._.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(kk.prototype,"size",{get:function(){return this._.size},enumerable:!1,configurable:!0}),Object.defineProperty(kk.prototype,"empty",{get:function(){return this._.empty},enumerable:!1,configurable:!0}),Object.defineProperty(kk.prototype,"docs",{get:function(){var e=this;return this._.docs.map(function(t){return new Ik(e.zf,t)})},enumerable:!1,configurable:!0}),kk.prototype.docChanges=function(t){var e=this;return this._.docChanges(t).map(function(t){return new Sk(e.zf,t)})},kk.prototype.forEach=function(e,n){var r=this;this._.forEach(function(t){e.call(n,new Ik(r.zf,t))})},kk.prototype.isEqual=function(t){return PA(this._,t._)},kk),Nk=(bo(Ak,yk=Tk),Object.defineProperty(Ak.prototype,"id",{get:function(){return this._.id},enumerable:!1,configurable:!0}),Object.defineProperty(Ak.prototype,"path",{get:function(){return this._.path},enumerable:!1,configurable:!0}),Object.defineProperty(Ak.prototype,"parent",{get:function(){var t=this._.parent;return t?new lk(this.firestore,t):null},enumerable:!1,configurable:!0}),Ak.prototype.doc=function(t){try{return new lk(this.firestore,void 0===t?CC(this._):CC(this._,t))}catch(t){throw pk(t,"doc()","CollectionReference.doc()")}},Ak.prototype.add=function(t){var e,n,r,i=this;return e=this._,n=t,t=lC(e.firestore,MN),r=CC(e),n=mA(e.v_,n),UA(t,[BC(qC(e.firestore),"addDoc",r.S_,n,null!==e.v_,{}).F_(r.S_,nb.exists(!1))]).then(function(){return r}).then(function(t){return new lk(i.firestore,t)})},Ak.prototype.isEqual=function(t){return NC(this._,t._)},Ak.prototype.withConverter=function(t){return new Ak(this.firestore,this._.withConverter(sk.Rd(this.firestore,t)))},Ak);function Ak(t,e){var n=this;return(n=yk.call(this,t,e)||this).firestore=t,n._=e,n}function kk(t,e){var n=this;return(n=gk.call(this,e)||this).zf=t,n}function Ok(t,e){var n=this;return(n=mk.call(this,e)||this).zf=t,n}function Rk(t,e){var n=this;return(n=bk.call(this,e)||this).firestore=t,n.Hf=new YA(t),n}function Pk(){return null!==_k&&_k.apply(this,arguments)||this}function Dk(t,e){var n=this;return(n=wk.call(this,e)||this).zf=t,n}function xk(t){return t instanceof fy&&(t=t._),lC(t,gC)}var Lk,Mk,vt=(bo(Vk,Mk=fy),Vk.documentId=function(){return new Vk(By.lt().ot())},Vk.prototype.isEqual=function(t){return t instanceof fy&&(t=t._),t instanceof tC&&this._.d_.isEqual(t.d_)},Vk),Gn=(bo(jk,Lk=fy),jk.serverTimestamp=function(){var t=new JC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new jk(t)},jk.delete=function(){var t=new KC("deleteField");return t._methodName="FieldValue.delete",new jk(t)},jk.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new $C("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new jk(n)},jk.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ZC("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new jk(n)},jk.increment=function(t){t=new tN("increment",t);return t._methodName="FieldValue.increment",new jk(t)},jk.prototype.isEqual=function(t){return this._.isEqual(t._)},jk),Fk=(Uk.prototype.onProgress=function(t,e,n){this.gd={next:t,error:e,complete:n}},Uk.prototype.catch=function(t){return this.Vd.promise.catch(t)},Uk.prototype.then=function(t,e){return this.Vd.promise.then(t,e)},Uk.prototype.Ul=function(t){this.Ql(t),this.gd.complete&&this.gd.complete(),this.Vd.resolve(t)},Uk.prototype.Wl=function(t){this.pd.taskState="Error",this.gd.next&&this.gd.next(this.pd),this.gd.error&&this.gd.error(t),this.Vd.reject(t)},Uk.prototype.Ql=function(t){this.pd=t,this.gd.next&&this.gd.next(t)},Uk);function Uk(){this.gd={},this.Vd=new U_,this.pd={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function jk(){return null!==Lk&&Lk.apply(this,arguments)||this}function Vk(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Mk.call(this,new(tC.bind.apply(tC,Co([void 0],t))))||this}function qk(t,s){var e=new Fk;return function(n,t,r){var e,i=this,o=(e=s,t=gT(t),e=function(t){if(t instanceof Uint8Array)return JS(t,void 0);if(t instanceof ArrayBuffer)return JS(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),new ZS(e,t));n.fs.ys(function(){return wo(i,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=VS,[4,ON(n)];case 1:return e.apply(void 0,[t.sent(),o,r]),[2]}})})})}(jN(t._),t.I_,e),e}var Bk,Hk,Kk={Firestore:QA,GeoPoint:kC,Timestamp:Uy,Blob:my,Transaction:ik,WriteBatch:ok,DocumentReference:lk,DocumentSnapshot:Ek,Query:Tk,QueryDocumentSnapshot:Ik,QuerySnapshot:Ck,CollectionReference:Nk,FieldPath:vt,FieldValue:Gn,setLogLevel:function(t){Gv.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(Bk=Xl).INTERNAL.registerComponent(new ws("firestore",function(t){var e=t.getProvider("app").getImmediate();return e=e,t=t.getProvider("auth-internal"),new QA(e,new MN(e,t),new GA)},"PUBLIC").setServiceProps(Object.assign({},Kk))),Bk.registerVersion("@firebase/firestore","2.1.4-2021026232412"),(Hk=QA).prototype.loadBundle=function(t){return qk(this,t)},Hk.prototype.namedQuery=function(t){return t=t,function(n,r){var t=this;return n.fs.enqueue(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Eo.Ls(t,e)})},[4,AN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}(jN((e=this)._),t).then(function(t){return t?new Tk(e,new mC(e._,null,t.query)):null});var e};var Wk,zk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Gk=(bo(Qk,Wk=Error),Qk);function Qk(t,e,n){e=Wk.call(this,e)||this;return Object.setPrototypeOf(e,Qk.prototype),e.code=t,e.details=n,e}function Yk(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!zk[a])return new Gk("internal","internal");r=zk[a],i=a}a=s.message;"string"==typeof a&&(i=a),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new Gk(r,i,o)}var Xk=(Jk.prototype.getAuthToken=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},Jk.prototype.getInstanceIdToken=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},Jk.prototype.getContext=function(){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},Jk);function Jk(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function $k(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var Zk=(tO.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return $k(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},tO.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?$k(t,function(t){return e.decode(t)}):t},tO);function tO(){}var eO=(Object.defineProperty(nO.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),nO.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},nO.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},nO.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},nO.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},nO.prototype.postJSON=function(r,i,o){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:o["Content-Type"]="application/json",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},nO.prototype.call=function(c,h,l){return wo(this,void 0,void 0,function(){var i,o,s,a,u;return Eo(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},s={},[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new Gk("deadline-exceeded","deadline-exceeded"))},n)}),u=(a={timer:r,promise:e}).timer,a=a.promise,[4,Promise.race([rO(u,this.postJSON(i,o,s)),a,rO(u,this.cancelAllRequests)])];case 2:if(!(a=t.sent()))throw new Gk("cancelled","Firebase Functions instance was deleted.");if(u=Yk(a.status,a.json,this.serializer))throw u;if(!a.json)throw new Gk("internal","Response is not valid JSON object.");if(void 0===(u=a.json.data)&&(u=a.json.result),void 0===u)throw new Gk("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},nO);function nO(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new Zk,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new Xk(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}function rO(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}var iO,oO,sO;function aO(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function uO(n,r,i){var o,t=new Promise(function(t,e){aO(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function cO(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function hO(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return uO(this[n],t,arguments)})})}function lO(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function fO(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=uO(t,n,arguments)).then(function(t){if(t)return new dO(t,e.request)});var t,e})})}function pO(t){this._index=t}function dO(t,e){this._cursor=t,this._request=e}function vO(t){this._store=t}function yO(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function gO(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new yO(n)}function mO(t){this._db=t}function bO(t,e,n){var e=uO(indexedDB,"open",[t,e]),r=e.request;return r&&(r.onupgradeneeded=function(t){n&&n(new gO(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new mO(t)})}function _O(t){return uO(indexedDB,"deleteDatabase",[t])}iO=Xl,oO=fetch.bind(self),sO={Functions:eO},iO.INTERNAL.registerComponent(new ws("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),t=t.getProvider("messaging");return new eO(n,r,t,e,oO)},"PUBLIC").setServiceProps(sO).setMultipleInstances(!0)),Xl.registerVersion("@firebase/functions","0.6.1-2021026232412"),cO(pO,"_index",["name","keyPath","multiEntry","unique"]),hO(pO,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),fO(pO,"_index",IDBIndex,["openCursor","openKeyCursor"]),cO(dO,"_cursor",["direction","key","primaryKey","value"]),hO(dO,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(dO.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),aO(e._request).then(function(t){if(t)return new dO(t,e._request)})})})}),vO.prototype.createIndex=function(){return new pO(this._store.createIndex.apply(this._store,arguments))},vO.prototype.index=function(){return new pO(this._store.index.apply(this._store,arguments))},cO(vO,"_store",["name","keyPath","indexNames","autoIncrement"]),hO(vO,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),fO(vO,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),lO(vO,"_store",IDBObjectStore,["deleteIndex"]),yO.prototype.objectStore=function(){return new vO(this._tx.objectStore.apply(this._tx,arguments))},cO(yO,"_tx",["objectStoreNames","mode"]),lO(yO,"_tx",IDBTransaction,["abort"]),gO.prototype.createObjectStore=function(){return new vO(this._db.createObjectStore.apply(this._db,arguments))},cO(gO,"_db",["name","version","objectStoreNames"]),lO(gO,"_db",IDBDatabase,["deleteObjectStore","close"]),mO.prototype.transaction=function(){return new yO(this._db.transaction.apply(this._db,arguments))},cO(mO,"_db",["name","version","objectStoreNames"]),lO(mO,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[vO,pO].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[pO,vO].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var wO="0.4.19-2021026232412",EO=1e4,IO="w:"+wO,TO="FIS_v2",SO="https://firebaseinstallations.googleapis.com/v1",CO=36e5,Gn=((vt={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',vt["not-registered"]="Firebase Installation is not registered.",vt["installation-not-found"]="Firebase Installation not found.",vt["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',vt["app-offline"]="Could not process request. Application offline.",vt["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",vt),NO=new Yo("installations","Installations",Gn);function AO(t){return t instanceof Go&&t.code.includes("request-failed")}function kO(t){t=t.projectId;return SO+"/projects/"+t+"/installations"}function OO(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function RO(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent(),e=e.error,[2,NO.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function PO(t){t=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function DO(t,e){e=e.refreshToken,t=PO(t);return t.append("Authorization",TO+" "+e),t}function xO(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function LO(e){return new Promise(function(t){setTimeout(t,e)})}var MO=/^[cdef][\w-]{21}$/,FO="";function UO(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;t=function(t){return btoa(String.fromCharCode.apply(String,So(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return MO.test(t)?t:FO}catch(t){return FO}}function jO(t){return t.appName+"!"+t.appId}var VO=new Map;function qO(t,e){t=jO(t);BO(t,e),function(t,e){var n=KO();n&&n.postMessage({key:t,fid:e});WO()}(t,e)}function BO(t,e){var n,r,i=VO.get(t);if(i)try{for(var o=Io(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var HO=null;function KO(){return!HO&&"BroadcastChannel"in self&&((HO=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){BO(t.data.key,t.data.fid)}),HO}function WO(){0===VO.size&&HO&&(HO.close(),HO=null)}var zO,GO="firebase-installations-database",QO=1,YO="firebase-installations-store",XO=null;function JO(){return XO=XO||bO(GO,QO,function(t){0===t.oldVersion&&t.createObjectStore(YO)})}function $O(o,s){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:return e=jO(o),[4,JO()];case 1:return r=t.sent(),n=r.transaction(YO,"readwrite"),[4,(r=n.objectStore(YO)).get(e)];case 2:return i=t.sent(),[4,r.put(s,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===s.fid||qO(o,s.fid),[2,s]}})})}function ZO(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return e=jO(r),[4,JO()];case 1:return n=t.sent(),[4,(n=n.transaction(YO,"readwrite")).objectStore(YO).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function tR(s,a){return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return e=jO(s),[4,JO()];case 1:return r=t.sent(),n=r.transaction(YO,"readwrite"),[4,(r=n.objectStore(YO)).get(e)];case 2:return i=t.sent(),void 0!==(o=a(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||qO(s,o.fid),[2,o]}})})}function eR(i){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return[4,tR(i,function(t){t=rR(t||{fid:UO(),registrationStatus:0}),t=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(i){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return[4,nR(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,LO(100)];case 3:return t.sent(),[4,nR(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,eR(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(NO.create("app-offline"));return{installationEntry:e,registrationPromise:n}}e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},t=function(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(s,t){var a=t.fid;return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return e=kO(s),n=PO(s),o={fid:a,authVersion:TO,appId:s.appId,sdkVersion:IO},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,xO(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,{fid:o.fid||a,registrationStatus:2,refreshToken:o.refreshToken,authToken:OO(o.authToken)}];case 3:return[4,RO("Create Installation",i)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,$O(r,e)];case 2:return AO(n=t.sent())&&409===n.customData.serverCode?[4,ZO(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,$O(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,e);return{installationEntry:e,registrationPromise:t}}}(i,t);return e=t.registrationPromise,t.installationEntry})];case 1:return(n=t.sent()).fid!==FO?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=t.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function nR(t){return tR(t,function(t){if(!t)throw NO.create("installation-not-found");return rR(t)})}function rR(t){return 1===(e=t).registrationStatus&&e.registrationTime+EO<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function iR(t,s){var a=t.appConfig,u=t.platformLoggerProvider;return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return kO(t)+"/"+e+"/authTokens:generate"}(a,s),n=DO(a,s),(o=u.getImmediate({optional:!0}))&&n.append("x-firebase-client",o.getPlatformInfoString()),o={installation:{sdkVersion:IO}},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,xO(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,OO(o)];case 3:return[4,RO("Generate Auth Token",i)];case 4:throw t.sent()}})})}function oR(i,o){return void 0===o&&(o=!1),wo(this,void 0,void 0,function(){var r,e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,tR(i.appConfig,function(t){if(!aR(t))throw NO.create("not-registered");var e,n=t.authToken;if(o||2!==(e=n).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+CO}(e)){if(1===n.requestStatus)return r=function(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,sR(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,LO(100)];case 3:return t.sent(),[4,sR(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,oR(n,r)]:[2,e]}})})}(i,o),t;if(!navigator.onLine)throw NO.create("app-offline");n=(e=t,n={requestStatus:1,requestTime:Date.now()},_o(_o({},e),{authToken:n}));return r=function(i,o){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,iR(i,o)];case 1:return e=t.sent(),r=_o(_o({},o),{authToken:e}),[4,$O(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!AO(n=t.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,ZO(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=_o(_o({},o),{authToken:{requestStatus:0}}),[4,$O(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return t})];case 1:return e=t.sent(),r?[4,r]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function sR(t){return tR(t,function(t){if(!aR(t))throw NO.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+EO<Date.now()?_o(_o({},t),{authToken:{requestStatus:0}}):t})}function aR(t){return void 0!==t&&2===t.registrationStatus}function uR(e,n){return void 0===n&&(n=!1),wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,eR(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,oR(e,n)];case 2:return[2,t.sent().token]}})})}function cR(i,o){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return kO(t)+"/"+e}(i,o),r=DO(i,o),n={method:"DELETE",headers:r},[4,xO(function(){return fetch(e,n)})];case 1:return(r=t.sent()).ok?[3,3]:[4,RO("Delete Installation",r)];case 2:throw t.sent();case 3:return[2]}})})}function hR(t,r){var i=t.appConfig;return function(t,e){KO();var n=jO(t);(t=VO.get(n))||(t=new Set,VO.set(n,t)),t.add(e)}(i,r),function(){var t,e,n;e=r,n=jO(t=i),(t=VO.get(n))&&(t.delete(e),0===t.size&&VO.delete(n),WO())}}function lR(t){return NO.create("missing-app-config-values",{valueName:t})}(zO=Xl).INTERNAL.registerComponent(new ws("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw lR("App Configuration");if(!t.name)throw lR("App Name");try{for(var r=Io(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw lR(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,eR(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||oR(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return uR(n,t)},delete:function(){return function(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,tR(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw NO.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw NO.create("app-offline");case 3:return[4,cR(e,n)];case 4:return t.sent(),[4,ZO(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return hR(n,t)}}},"PUBLIC")),zO.registerVersion("@firebase/installations",wO);var fR,Gn=((vt={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',vt["only-available-in-window"]="This method is available in a Window context.",vt["only-available-in-sw"]="This method is available in a service worker context.",vt["permission-default"]="The notification permission was not granted and dismissed instead.",vt["permission-blocked"]="The notification permission was not granted and blocked instead.",vt["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",vt["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",vt["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",vt["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",vt["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",vt["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",vt["token-update-no-token"]="FCM returned no token when updating the user to push.",vt["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",vt["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",vt["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",vt["invalid-vapid-key"]="The public VAPID key must be a string.",vt["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",vt),pR=new Yo("messaging","Messaging",Gn),dR="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",vR="https://fcmregistrations.googleapis.com/v1",yR="FCM_MSG",gR="google.c.a.c_id";function mR(t){t=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,So(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(vt=fR=fR||{}).PUSH_RECEIVED="push-received",vt.NOTIFICATION_CLICKED="notification-clicked";var bR="fcm_token_details_db",_R=5,wR="fcm_token_object_Store";function ER(s){return wo(this,void 0,void 0,function(){var e,o,n=this;return Eo(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(bR))return[2,null];t.label=2;case 2:return o=null,[4,bO(bR,_R,function(i){return wo(n,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return i.oldVersion<2?[2]:i.objectStoreNames.contains(wR)?[4,(r=i.transaction.objectStore(wR)).index("fcmSenderId").get(s)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:mR(n.vapidKey)}}}else(3===i.oldVersion||4===i.oldVersion)&&(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:mR(n.auth),p256dh:mR(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:mR(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,_O(bR)];case 4:return t.sent(),[4,_O("fcm_vapid_details_db")];case 5:return t.sent(),[4,_O("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(o)?o:null]}})})}var IR="firebase-messaging-database",TR=1,SR="firebase-messaging-store",CR=null;function NR(){return CR=CR||bO(IR,TR,function(t){0===t.oldVersion&&t.createObjectStore(SR)})}function AR(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return e=OR(r),[4,NR()];case 1:return[4,t.sent().transaction(SR).objectStore(SR).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,ER(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,kR(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function kR(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return e=OR(r),[4,NR()];case 1:return n=t.sent(),[4,(n=n.transaction(SR,"readwrite")).objectStore(SR).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function OR(t){return t.appConfig.appId}function RR(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,DR(r)];case 1:e=t.sent(),e={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(PR(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,pR.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),pR.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function PR(t){t=t.projectId;return vR+"/projects/"+t+"/registrations"}function DR(t){var n=t.appConfig,r=t.installations;return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function xR(t){var e=t.p256dh,n=t.auth,r=t.endpoint,t=t.vapidKey,e={web:{endpoint:r,auth:n,p256dh:e}};return t!==dR&&(e.web.applicationPubKey=t),e}function LR(c,h,l){return wo(this,void 0,void 0,function(){var s,a,u;return Eo(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw pR.create("permission-blocked");return[4,function(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(h,l)];case 1:return u=t.sent(),[4,AR(c)];case 2:return s=t.sent(),a={vapidKey:l,swScope:h.scope,endpoint:u.endpoint,auth:mR(u.getKey("auth")),p256dh:mR(u.getKey("p256dh"))},s?[3,3]:[2,FR(c,a)];case 3:if(e=s.subscriptionOptions,r=(n=a).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,e=n.p256dh===e.p256dh,r&&i&&o&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,RR(c,s.token)];case 5:return t.sent(),[3,7];case 6:return u=t.sent(),console.warn(u),[3,7];case 7:return[2,FR(c,a)];case 8:return Date.now()>=s.createTime+6048e5?[2,function(i,o,s){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,s){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:return[4,DR(o)];case 1:e=t.sent(),n=xR(s.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(PR(o.appConfig)+"/"+s.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),pR.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,pR.create("token-update-failed",{errorInfo:i});if(!r.token)throw pR.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=_o(_o({},i),{token:e,createTime:Date.now()}),[4,kR(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,MR(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:s.token,createTime:Date.now(),subscriptionOptions:a},c,h)]:[2,s.token];case 9:return[2]}var e,n,r,i,o})})}function MR(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,AR(n)];case 1:return(e=t.sent())?[4,RR(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return e=OR(r),[4,NR()];case 1:return n=t.sent(),[4,(n=n.transaction(SR,"readwrite")).objectStore(SR).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function FR(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,function(o,s){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:return[4,DR(o)];case 1:e=t.sent(),n=xR(s),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(PR(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),pR.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,pR.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw pR.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e=t.sent(),e={token:e,createTime:Date.now(),subscriptionOptions:r},[4,kR(n,e)];case 2:return t.sent(),[2,e.token]}})})}function UR(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(!e.notification)return;t.notification={};var n=e.notification.title;n&&(t.notification.title=n);n=e.notification.body;n&&(t.notification.body=n);e=e.notification.image;e&&(t.notification.image=e)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);e=e.fcmOptions.analytics_label;e&&(t.fcmOptions.analyticsLabel=e)}(e,t),e}function jR(t){return"object"==typeof t&&t&&gR in t}function VR(e){return new Promise(function(t){setTimeout(t,e)})}var qR=(Object.defineProperty(BR.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),BR.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw pR.create("invalid-bg-handler");this.bgMessageHandler=t},BR.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},BR.prototype.getToken=function(){var n;return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,AR(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:dR,t.label=2;case 2:return[2,LR(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},BR.prototype.deleteToken=function(){return MR(this.firebaseDependencies,self.registration)},BR.prototype.requestPermission=function(){throw pR.create("only-available-in-window")},BR.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw pR.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw pR.create("invalid-vapid-key");this.vapidKey=t},BR.prototype.useServiceWorker=function(){throw pR.create("only-available-in-window")},BR.prototype.onMessage=function(){throw pR.create("only-available-in-window")},BR.prototype.onTokenRefresh=function(){throw pR.create("only-available-in-window")},BR.prototype.onPush=function(a){return wo(this,void 0,void 0,function(){var i,o,s;return Eo(this,function(t){switch(t.label){case 0:return(s=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(a))?[4,HR()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(i=t.sent(),i.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=fR.PUSH_RECEIVED;try{for(var i=Io(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(i,s)]:(o=!1,s.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed.");return self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((r=_o({},(e=s).notification)).data=((n={})[yR]=e,n),r))]:[3,3]);case 2:t.sent(),o=!0,t.label=3;case 3:return!0===o&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(s=UR(s),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[4,VR(1e3)]);case 4:return t.sent(),[2]}var e,n,r})})},BR.prototype.onSubChange=function(n){var r;return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,MR(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,AR(this.firebaseDependencies)];case 3:return e=t.sent(),[4,MR(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,LR(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:dR)];case 5:return t.sent(),[2]}})})},BR.prototype.onNotificationClick=function(s){var a;return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return(e=null===(a=null===(a=s.notification)||void 0===a?void 0:a.data)||void 0===a?void 0:a[yR])?s.action?[2]:(s.stopImmediatePropagation(),s.notification.close(),(n=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;if(n)return n;return jR(t.data)?self.location.origin:null}(e))?(r=new URL(n,self.location.href),i=new URL(self.location.origin),r.host!==i.host?[2]:[4,function(u){return wo(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Eo(this,function(t){switch(t.label){case 0:return[4,HR()];case 1:e=t.sent();try{for(n=Io(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}(r)]):[2]):[2];case 1:return(o=t.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return o=t.sent(),[4,VR(3e3)];case 3:return t.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=t.sent(),t.label=6;case 6:return o?(e.messageType=fR.NOTIFICATION_CLICKED,e.isFirebaseMessaging=!0,[2,o.postMessage(e)]):[2]}})})},BR);function BR(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function HR(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var KR=(Object.defineProperty(WR.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),WR.prototype.messageEventListener=function(i){return wo(this,void 0,void 0,function(){var n,r;return Eo(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===fR.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),jR(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},WR.prototype.getVapidKey=function(){return this.vapidKey},WR.prototype.getSwReg=function(){return this.swRegistration},WR.prototype.getToken=function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw pR.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,LR(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},WR.prototype.updateVapidKey=function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=dR),[2]})})},WR.prototype.updateSwReg=function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw pR.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},WR.prototype.registerDefaultSw=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),pR.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},WR.prototype.deleteToken=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,MR(this.firebaseDependencies,this.swRegistration)]}})})},WR.prototype.requestPermission=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?pR.create("permission-blocked"):pR.create("permission-default")}})})},WR.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw pR.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw pR.create("invalid-vapid-key");this.vapidKey=t},WR.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw pR.create("invalid-sw-registration");if(this.swRegistration)throw pR.create("use-sw-after-get-token");this.swRegistration=t},WR.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},WR.prototype.setBackgroundMessageHandler=function(){throw pR.create("only-available-in-sw")},WR.prototype.onBackgroundMessage=function(){throw pR.create("only-available-in-sw")},WR.prototype.onTokenRefresh=function(){return function(){}},WR.prototype.logEvent=function(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case fR.NOTIFICATION_CLICKED:return"notification_open";case fR.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[gR],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},WR);function WR(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function zR(t){return pR.create("missing-app-config-values",{valueName:t})}Gn={isSupported:GR};function GR(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Xl.INTERNAL.registerComponent(new ws("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw zR("App Configuration Object");if(!t.name)throw zR("App Name");var r=t.options;try{for(var i=Io(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw zR(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!GR())throw pR.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?qR:KR)(t)},"PUBLIC").setServiceProps(Gn));var QR,YR="firebasestorage.googleapis.com",XR="storageBucket",JR=(bo($R,QR=Go),$R.prototype._codeEquals=function(t){return ZR(t)===this.code},Object.defineProperty($R.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty($R.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),$R);function $R(t,e){t=QR.call(this,ZR(t),"Firebase Storage: "+e+" ("+ZR(t)+")")||this;return t.customData={serverResponse:null},Object.setPrototypeOf(t,$R.prototype),t}function ZR(t){return"storage/"+t}function tP(){return new JR("unknown","An unknown error occurred, please check the error payload for server response.")}function eP(){return new JR("canceled","User canceled the upload/download.")}function nP(){return new JR("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function rP(t){return new JR("invalid-argument",t)}function iP(){return new JR("app-deleted","The Firebase app was deleted.")}function oP(t){return new JR("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sP(t,e){return new JR("invalid-format","String does not match format '"+t+"': "+e)}function aP(t){throw new JR("internal-error","Internal error: "+t)}var uP={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},cP=function(t,e){this.data=t,this.contentType=e||null};function hP(t,e){switch(t){case uP.RAW:return new cP(lP(e));case uP.BASE64:case uP.BASE64URL:return new cP(fP(t,e));case uP.DATA_URL:return new cP(function(t){t=new pP(t);return t.base64?fP(uP.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw sP(uP.DATA_URL,"Malformed data URL.")}return lP(e)}(t.rest)}(e),new pP(e).contentType)}throw tP()}function lP(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function fP(e,t){switch(e){case uP.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw sP(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case uP.BASE64URL:r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n)throw sP(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(t)}catch(t){throw sP(e,"Invalid character found")}for(var o=new Uint8Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}var pP=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw sP(uP.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)};var dP,vP={STATE_CHANGED:"state_changed"},yP={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gP(t){switch(t){case"running":case"pausing":case"canceling":return yP.RUNNING;case"paused":return yP.PAUSED;case"success":return yP.SUCCESS;case"canceled":return yP.CANCELED;case"error":default:return yP.ERROR}}(vt=dP=dP||{})[vt.NO_ERROR=0]="NO_ERROR",vt[vt.NETWORK_ERROR=1]="NETWORK_ERROR",vt[vt.ABORT=2]="ABORT";var mP=(bP.prototype.send=function(t,e,n,r){if(this.sent_)throw aP("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},bP.prototype.getErrorCode=function(){if(!this.sent_)throw aP("cannot .getErrorCode() before sending");return this.errorCode_},bP.prototype.getStatus=function(){if(!this.sent_)throw aP("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},bP.prototype.getResponseText=function(){if(!this.sent_)throw aP("cannot .getResponseText() before sending");return this.xhr_.responseText},bP.prototype.abort=function(){this.xhr_.abort()},bP.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},bP.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},bP.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},bP);function bP(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=dP.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=dP.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=dP.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var _P=(wP.prototype.createXhrIo=function(){return new mP},wP);function wP(){}function EP(t){return"string"==typeof t||t instanceof String}function IP(t){return TP()&&t instanceof Blob}function TP(){return"undefined"!=typeof Blob}function SP(t,e,n,r){if(r<e)throw rP("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw rP("Invalid value for '"+t+"'. Expected "+n+" or less.")}function CP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(TP())return new Blob(t);throw new JR("unsupported-environment","This browser doesn't seem to support creating Blobs")}var NP=(AP.prototype.size=function(){return this.size_},AP.prototype.type=function(){return this.type_},AP.prototype.slice=function(t,e){if(IP(this.data_)){var n=this.data_,r=(i=t,r=e,(n=n).webkitSlice?n.webkitSlice(i,r):n.mozSlice?n.mozSlice(i,r):n.slice?n.slice(i,r):null);return null===r?null:new AP(r)}var i,r;return new AP(new Uint8Array(this.data_.buffer,t,e-t),!0)},AP.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(TP()){var n=t.map(function(t){return t instanceof AP?t.data_:t});return new AP(CP.apply(null,n))}var n=t.map(function(t){return EP(t)?hP(uP.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new AP(i,!0)},AP.prototype.uploadData=function(){return this.data_},AP);function AP(t,e){var n=0,r="";IP(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var kP=(Object.defineProperty(OP.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(OP.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),OP.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},OP.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},OP.makeFromBucketSpec=function(e){var t;try{t=OP.makeFromUrl(e)}catch(t){return new OP(e,"")}if(""===t.path)return t;throw new JR("invalid-default-bucket","Invalid default bucket '"+e+"'.")},OP.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)";var r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=YR.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){e=new OP(c[u.indices.bucket],c[u.indices.path]||"");u.postModify(e);break}}if(null==e)throw new JR("invalid-url","Invalid URL '"+t+"'.");return e},OP);function OP(t,e){this.bucket=t,this.path_=e}function RP(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function PP(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function DP(t){return"https://"+YR+"/v0"+t}function xP(t){var e,n=encodeURIComponent,r="?";for(e in t){t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&")}return r=r.slice(0,-1)}function LP(t,e){return e}var MP=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||LP},FP=null;function UP(){if(FP)return FP;var t=[];t.push(new MP("bucket")),t.push(new MP("generation")),t.push(new MP("metageneration")),t.push(new MP("name","fullPath",!0));var e=new MP("name");e.xform=function(t,e){return!EP(e=e)||e.length<2?e:PP(e)},t.push(e);e=new MP("size");return e.xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new MP("timeCreated")),t.push(new MP("updated")),t.push(new MP("md5Hash",null,!0)),t.push(new MP("cacheControl",null,!0)),t.push(new MP("contentDisposition",null,!0)),t.push(new MP("contentEncoding",null,!0)),t.push(new MP("contentLanguage",null,!0)),t.push(new MP("contentType",null,!0)),t.push(new MP("metadata","customMetadata",!0)),FP=t}function jP(n,r){Object.defineProperty(n,"ref",{get:function(){var t=n.bucket,e=n.fullPath,e=new kP(t,e);return r._makeStorageReference(e)}})}function VP(t,e,n){e=RP(e);if(null===e)return null;return function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return jP(r,t),r}(t,e,n)}function qP(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var BP="prefixes",HP="items";function KP(t,e,n){n=RP(n);if(null===n)return null;return function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[BP])for(var i=0,o=n[BP];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new kP(e,s));r.prefixes.push(a)}if(n[HP])for(var u=0,c=n[HP];u<c.length;u++){var h=c[u],a=t._makeStorageReference(new kP(e,h.name));r.items.push(a)}return r}(t,e,n)}var WP=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function zP(t){if(!t)throw tP()}function GP(n,r){return function(t,e){return zP(null!==(e=VP(n,e,r))),e}}function QP(n,r){return function(t,e){return zP(null!==(e=KP(n,r,e))),e}}function YP(r,i){return function(t,e){var n=VP(r,e,i);return zP(null!==n),function(r,t){if(null===(t=RP(t)))return null;if(!EP(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var i=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return DP("/b/"+i(e)+"/o/"+i(n))+xP({alt:"media",token:t})})[0]}(n,e)}}function XP(i){return function(t,e){var n,r=401===t.getStatus()?new JR("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new JR("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new JR("unauthorized","User does not have permission to access '"+r+"'.")):e;return r.serverResponse=e.serverResponse,r}}function JP(r){var i=XP(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new JR("object-not-found","Object '"+t+"' does not exist.")),n.serverResponse=e.serverResponse,n}}function $P(t,e,n){var r=DP(e.fullServerUrl()),i=t.maxOperationRetryTime,i=new WP(r,"GET",GP(t,n),i);return i.errorHandler=JP(e),i}function ZP(t,e,n){n=Object.assign({},n);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function tD(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=ZP(e,r,i),i="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+qP(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",a="\r\n--"+a+"--",r=NP.getBlob(i,r,a);if(null===r)throw nP();a={name:u.fullPath},u=DP(o),o=t.maxUploadRetryTime,o=new WP(u,"POST",GP(t,n),o);return o.urlParams=a,o.headers=s,o.body=r.uploadData(),o.errorHandler=XP(e),o}var eD=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function nD(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){zP(!1)}return zP(!!n&&-1!==(e||["active"]).indexOf(n)),n}function rD(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=ZP(e,r,i),i={name:s.fullPath},o=DP(o),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},n=qP(s,n),t=t.maxUploadRetryTime;t=new WP(o,"POST",function(t){var e;nD(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){zP(!1)}return zP(EP(e)),e},t);return t.urlParams=i,t.headers=r,t.body=n,t.errorHandler=XP(e),t}function iD(t,e,n,i){t=t.maxUploadRetryTime,t=new WP(n,"POST",function(t){var e=nD(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){zP(!1)}n||zP(!1);var r=Number(n);return zP(!isNaN(r)),new eD(r,i.size(),"final"===e)},t);return t.headers={"X-Goog-Upload-Command":"query"},t.errorHandler=XP(e),t}function oD(t,o,e,s,n,a,r,i){var u=new eD(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw new JR("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;0<n&&(h=Math.min(h,n));r=u.current,n=r+h,c={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},r=s.slice(r,n);if(null===r)throw nP();n=o.maxUploadRetryTime,n=new WP(e,"POST",function(t,e){var n=nD(t,["active","final"]),r=u.current+h,i=s.size(),e="final"===n?GP(o,a)(t,e):null;return new eD(r,i,"final"===n,e)},n);return n.headers=c,n.body=r.uploadData(),n.progressCallback=i||null,n.errorHandler=XP(t),n}var sD=function(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(t=t,this.next=t.next,this.error=t.error,this.complete=t.complete)};function aD(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var uD=(cD.prototype._makeProgressCallback=function(){var e=this,n=this._transferred;return function(t){return e._updateProgress(n+t)}},cD.prototype._shouldDoResumable=function(t){return 262144<t.size()},cD.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},cD.prototype._resolveToken=function(e){var n=this;this._ref.storage._getAuthToken().then(function(t){switch(n._state){case"running":e(t);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused")}})},cD.prototype._createResumable=function(){var n=this;this._resolveToken(function(t){var e=rD(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._uploadUrl=t,n._needToFetchStatus=!1,n.completeTransitions_()},n._errorHandler)})},cD.prototype._fetchStatus=function(){var n=this,r=this._uploadUrl;this._resolveToken(function(t){var e=iD(n._ref.storage,n._ref._location,r,n._blob),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._updateProgress(t.current),n._needToFetchStatus=!1,t.finalized&&(n._needToFetchMetadata=!0),n.completeTransitions_()},n._errorHandler)})},cD.prototype._continueUpload=function(){var n=this,r=262144*this._chunkMultiplier,i=new eD(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken(function(t){var e;try{e=oD(n._ref._location,n._ref.storage,o,n._blob,r,n._mappings,i,n._makeProgressCallback())}catch(t){return n._error=t,void n._transition("error")}t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._increaseMultiplier(),n._request=void 0,n._updateProgress(t.current),t.finalized?(n._metadata=t.metadata,n._transition("success")):n.completeTransitions_()},n._errorHandler)})},cD.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},cD.prototype._fetchMetadata=function(){var n=this;this._resolveToken(function(t){var e=$P(n._ref.storage,n._ref._location,n._mappings),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._transition("success")},n._metadataErrorHandler)})},cD.prototype._oneShotUpload=function(){var n=this;this._resolveToken(function(t){var e=tD(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._updateProgress(n._blob.size()),n._transition("success")},n._errorHandler)})},cD.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},cD.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=eP(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},cD.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(cD.prototype,"snapshot",{get:function(){var t=gP(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),cD.prototype.on=function(t,e,n,r){var i=this,o=new sD(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},cD.prototype.then=function(t,e){return this._promise.then(t,e)},cD.prototype.catch=function(t){return this.then(null,t)},cD.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},cD.prototype._removeObserver=function(t){t=this._observers.indexOf(t);-1!==t&&this._observers.splice(t,1)},cD.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},cD.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(gP(this._state)){case yP.SUCCESS:aD(this._resolve.bind(null,this.snapshot))();break;case yP.CANCELED:case yP.ERROR:aD(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},cD.prototype._notifyObserver=function(t){switch(gP(this._state)){case yP.RUNNING:case yP.PAUSED:t.next&&aD(t.next.bind(t,this.snapshot))();break;case yP.SUCCESS:t.complete&&aD(t.complete.bind(t))();break;case yP.CANCELED:case yP.ERROR:t.error&&aD(t.error.bind(t,this._error))();break;default:t.error&&aD(t.error.bind(t,this._error))()}},cD.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},cD.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},cD.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},cD);function cD(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=UP(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}var hD=(lD.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},lD.prototype._newRef=function(t,e){return new lD(t,e)},Object.defineProperty(lD.prototype,"root",{get:function(){var t=new kP(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(lD.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(lD.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(lD.prototype,"name",{get:function(){return PP(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(lD.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(lD.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;t=new kP(this._location.bucket,t);return new lD(this._service,t)},enumerable:!1,configurable:!0}),lD.prototype._throwIfRoot=function(t){if(""===this._location.path)throw oP(t)},lD);function lD(t,e){this._service=t,this._location=e instanceof kP?e:kP.makeFromUrl(e)}function fD(t){var e={prefixes:[],items:[]};return function r(i,o,s){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,pD(i,{pageToken:s})];case 1:return e=t.sent(),(n=o.prefixes).push.apply(n,e.prefixes),(n=o.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,r(i,o,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(t,e).then(function(){return e})}function pD(u,c){return wo(this,void 0,void 0,function(){var s,a;return Eo(this,function(t){switch(t.label){case 0:return null!=c&&"number"==typeof c.maxResults&&SP("options.maxResults",1,1e3,c.maxResults),[4,u.storage._getAuthToken()];case 1:return s=t.sent(),a=c||{},e=u.storage,n=u._location,r="/",i=a.pageToken,o=a.maxResults,t={},n.isRoot?t.prefix="":t.prefix=n.path+"/",r&&0<r.length&&(t.delimiter=r),i&&(t.pageToken=i),o&&(t.maxResults=o),i=DP(n.bucketOnlyServerUrl()),o=e.maxOperationRetryTime,(o=new WP(i,"GET",QP(e,n.bucket),o)).urlParams=t,o.errorHandler=XP(n),[2,u.storage._makeRequest(o,s).getPromise()]}var e,n,r,i,o})})}function dD(a,u){return wo(this,void 0,void 0,function(){var s;return Eo(this,function(t){switch(t.label){case 0:return a._throwIfRoot("updateMetadata"),[4,a.storage._getAuthToken()];case 1:return s=t.sent(),e=a.storage,n=a._location,r=u,i=UP(),o=DP(n.fullServerUrl()),t=qP(r,i),r=e.maxOperationRetryTime,(r=new WP(o,"PATCH",GP(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=t,r.errorHandler=JP(n),[2,a.storage._makeRequest(r,s).getPromise()]}var e,n,r,i,o})})}function vD(s){return wo(this,void 0,void 0,function(){var o;return Eo(this,function(t){switch(t.label){case 0:return s._throwIfRoot("getDownloadURL"),[4,s.storage._getAuthToken()];case 1:return o=t.sent(),e=s.storage,n=s._location,r=UP(),i=DP(n.fullServerUrl()),t=e.maxOperationRetryTime,(t=new WP(i,"GET",YP(e,r),t)).errorHandler=JP(n),[2,s.storage._makeRequest(t,o).getPromise().then(function(t){if(null===t)throw new JR("no-download-url","The given file does not have any download URLs.");return t})]}var e,n,r,i})})}function yD(i){return wo(this,void 0,void 0,function(){var r;return Eo(this,function(t){switch(t.label){case 0:return i._throwIfRoot("deleteObject"),[4,i.storage._getAuthToken()];case 1:return r=t.sent(),e=i.storage,n=i._location,t=DP(n.fullServerUrl()),e=e.maxOperationRetryTime,(e=new WP(t,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=JP(n),[2,i.storage._makeRequest(e,r).getPromise()]}var e,n})})}function gD(t,e){var n,e=(n=t._location.path,e=(e=e).split("/").filter(function(t){return 0<t.length}).join("/"),0===n.length?e:n+"/"+e),e=new kP(t._location.bucket,e);return new hD(t.storage,e)}var mD=(Object.defineProperty(bD.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(bD.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(bD.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(bD.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),bD);function bD(t,e,n){this._delegate=t,this.task=e,this.ref=n}var _D=(Object.defineProperty(wD.prototype,"snapshot",{get:function(){return new mD(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),wD.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new mD(t,n,n._ref))},t)},wD.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new mD(t,i,i._ref))}:{next:e.next?function(t){return e.next(new mD(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},wD);function wD(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}var ED=(Object.defineProperty(ID.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new TD(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(ID.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new TD(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(ID.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),ID);function ID(t,e){this._delegate=t,this._service=e}var TD=(Object.defineProperty(SD.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(SD.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(SD.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),SD.prototype.toString=function(){return this._delegate.toString()},SD.prototype.child=function(t){return new SD(gD(this._delegate,t),this.storage)},Object.defineProperty(SD.prototype,"root",{get:function(){return new SD(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(SD.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new SD(t,this.storage)},enumerable:!1,configurable:!0}),SD.prototype.put=function(t,e){return this._throwIfRoot("put"),new _D((n=this._delegate,t=t,e=e,n._throwIfRoot("uploadBytesResumable"),new uD(n,new NP(t),e)),this);var n},SD.prototype.putString=function(t,e,n){void 0===e&&(e=uP.RAW),this._throwIfRoot("putString");t=hP(e,t),n=_o({},n);return null==n.contentType&&null!=t.contentType&&(n.contentType=t.contentType),new _D(new uD(this._delegate,new NP(t.data,!0),n),this)},SD.prototype.listAll=function(){var e=this;return fD(this._delegate).then(function(t){return new ED(t,e.storage)})},SD.prototype.list=function(t){var e=this;return pD(this._delegate,t).then(function(t){return new ED(t,e.storage)})},SD.prototype.getMetadata=function(){return function(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return r._throwIfRoot("getMetadata"),[4,r.storage._getAuthToken()];case 1:return e=t.sent(),n=$P(r.storage,r._location,UP()),[2,r.storage._makeRequest(n,e).getPromise()]}})})}(this._delegate)},SD.prototype.updateMetadata=function(t){return dD(this._delegate,t)},SD.prototype.getDownloadURL=function(){return vD(this._delegate)},SD.prototype.delete=function(){return this._throwIfRoot("delete"),yD(this._delegate)},SD.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw oP(t)},SD);function SD(t,e){this._delegate=t,this.storage=e}var CD=(ND.prototype.getPromise=function(){return this.promise_},ND.prototype.cancel=function(t){},ND);function ND(t){this.promise_=Promise.reject(t)}var AD=(kD.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());void 0!==s?r(s):r()}catch(t){i(t)}else null!==o?((n=tP()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?iP:eP)()):i(n=new JR("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,Co([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new OD(!1,null,!0)):this.backoffId_=(e=function(r,t){function i(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new OD(!1,null,!0)):(t=c.pool_.createXhrIo(),c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(i),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(i),c.pendingXhr_=null;var e=t.getErrorCode()===dP.NO_ERROR,n=t.getStatus();e&&!c.isRetryStatusCode_(n)?(n=-1!==c.successCodes_.indexOf(n),r(!0,new OD(n,t))):(t=t.getErrorCode()===dP.ABORT,r(!1,new OD(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},kD.prototype.getPromise=function(){return this.promise_},kD.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},kD.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},kD);function kD(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var OD=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function RD(t){return/^[A-Za-z]+:\/\//.test(t)}function PD(t,e){if(t instanceof xD){var n=t;if(null==n._bucket)throw new JR("no-default-bucket","No default bucket found. Did you set the '"+XR+"' property when initializing the app?");n=new hD(n,n._bucket);return null!=e?PD(n,e):n}if(void 0===e)return t;if(e.includes(".."))throw rP('`path` param cannot contain ".."');return gD(t,e)}function DD(t,e){if(e&&RD(e)){if(t instanceof xD)return new hD(t,e);throw rP("To use ref(service, url), the first argument must be a Storage instance.")}return PD(t,e)}var xD=(Object.defineProperty(LD.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){SP("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(LD.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){SP("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),LD.prototype._getAuthToken=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},LD.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},LD.prototype._makeStorageReference=function(t){return new hD(this,t)},LD.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new CD(iP());var r,i,o,s,a,u,c=(r=t,i=this._appId,o=e,s=this._pool,a=this._firebaseVersion,u=xP(r.urlParams),t=r.url+u,e=Object.assign({},r.headers),u=e,(i=i)&&(u["X-Firebase-GMPID"]=i),i=e,null!==(o=o)&&0<o.length&&(i.Authorization="Firebase "+o),a=a,e["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager"),new AD(t,r.method,e,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s));return this._requests.add(c),c.getPromise().then(function(){return n._requests.delete(c)},function(){return n._requests.delete(c)}),c},LD);function LD(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?kP.makeFromBucketSpec(r):null==(r=null==(r=this.app.options)?void 0:r[XR])?null:kP.makeFromBucketSpec(r)}var MD=(Object.defineProperty(FD.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(FD.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),FD.prototype.ref=function(t){if(RD(t))throw rP("ref() expected a child path but got a URL, use refFromURL instead.");return new TD(DD(this._delegate,t),this)},FD.prototype.refFromURL=function(t){if(!RD(t))throw rP("refFromURL() expected a full URL but got a child path, use ref() instead.");try{kP.makeFromUrl(t)}catch(t){throw rP("refFromUrl() expected a valid full URL but got an invalid one.")}return new TD(DD(this._delegate,t),this)},FD.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},FD.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},FD);function FD(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var UD,jD;function VD(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return new MD(n,new xD(n,t,new _P,e,Xl.SDK_VERSION))}jD={TaskState:yP,TaskEvent:vP,StringFormat:uP,Storage:xD,Reference:TD},(UD=Xl).INTERNAL.registerComponent(new ws("storage",VD,"PUBLIC").setServiceProps(jD).setMultipleInstances(!0)),UD.registerVersion("@firebase/storage","0.4.2-2021026232412");var qD,BD,HD="0.4.5-2021026232412",KD=HD,WD="FB-PERF-TRACE-MEASURE",zD="@firebase/performance/config",GD="@firebase/performance/configexpire",Gn="Performance",vt=((vt={})["trace started"]="Trace {$traceName} was started before.",vt["trace stopped"]="Trace {$traceName} is not running.",vt["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",vt["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",vt["no window"]="Window is not available.",vt["no app id"]="App id is not available.",vt["no project id"]="Project id is not available.",vt["no api key"]="Api key is not available.",vt["invalid cc log"]="Attempted to queue invalid cc event",vt["FB not default"]="Performance can only start when Firebase app instance is the default one.",vt["RC response not ok"]="RC response is not ok",vt["invalid attribute name"]="Attribute name {$attributeName} is invalid.",vt["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",vt["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",vt["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",vt),QD=new Yo("performance",Gn,vt),YD=new Ls(Gn);YD.logLevel=ks.INFO;var XD,JD=($D.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},$D.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},$D.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},$D.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},$D.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},$D.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},$D.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Bo()||(YD.info("IndexedDB is not supported by current browswer"),!1):(YD.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},$D.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},$D.getInstance=function(){return void 0===qD&&(qD=new $D(BD)),qD},$D);function $D(t){if(!(this.window=t))throw QD.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function ZD(t,e){var n=t.length-e.length;if(n<0||1<n)throw QD.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var tx,ex,nx=(rx.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw QD.create("no app id");return t},rx.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw QD.create("no project id");return t},rx.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw QD.create("no api key");return t},rx.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},rx.getInstance=function(){return void 0===XD&&(XD=new rx),XD},rx);function rx(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ZD("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ZD("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(Gn=ex=ex||{})[Gn.UNKNOWN=0]="UNKNOWN",Gn[Gn.VISIBLE=1]="VISIBLE",Gn[Gn.HIDDEN=2]="HIDDEN";var ix=["firebase_","google_","ga_"],ox=new RegExp("^[a-zA-Z]\\w*$");function sx(){switch(JD.getInstance().document.visibilityState){case"visible":return ex.VISIBLE;case"hidden":return ex.HIDDEN;default:return ex.UNKNOWN}}var ax="0.0.1",ux={loggingEnabled:!0},cx="FIREBASE_INSTALLATIONS_AUTH";function hx(t){var n,e=function(){var t=JD.getInstance().localStorage;if(!t)return;var e=t.getItem(GD);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(zD);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(fx(e),Promise.resolve()):(n=t,function(){var t=nx.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+nx.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+nx.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:cx+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:nx.getInstance().getAppId(),app_version:KD,sdk_version:ax})});return fetch(t).then(function(t){if(t.ok)return t.json();throw QD.create("RC response not ok")})}).catch(function(){YD.info(lx)}).then(fx).then(function(t){var e=JD.getInstance().localStorage;if(!t||!e)return;e.setItem(zD,JSON.stringify(t)),e.setItem(GD,String(Date.now()+60*nx.getInstance().configTimeToLive*60*1e3))},function(){}))}var lx="Could not fetch config, will use default configs";function fx(t){if(!t)return t;var e=nx.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):ux.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=px(e.tracesSamplingRate),e.logNetworkAfterSampling=px(e.networkRequestsSamplingRate),t}function px(t){return Math.random()<=t}var dx,vx=1;function yx(){return vx=2,dx=dx||function(){var n=JD.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=nx.getInstance().installationsService.getId()).then(function(t){tx=t}),t;var t}).then(hx).then(gx,gx)}function gx(){vx=3}var mx,bx=1e4,_x=5500,wx=3,Ex=1e3,Ix=wx,Tx=[],Sx=!1;function Cx(t){setTimeout(function(){var t,e;if(0!==Ix)return Tx.length?(t=Tx.splice(0,Ex),e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,r){return function(t){var e=nx.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||YD.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=bx;isNaN(e)||(n=Math.max(e,n));t=t.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(Tx=Co(r,Tx),YD.info("Retry transport request later.")),Ix=wx,Cx(n)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:nx.getInstance().logSource,log_event:e},t).catch(function(){Tx=Co(t,Tx),Ix--,YD.info("Tries left: "+Ix+"."),Cx(bx)})):Cx(bx)},t)}function Nx(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw QD.create("invalid cc log");Tx=Co(Tx,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function Ax(t,e){(mx=mx||Nx(Rx))(t,e)}function kx(t){var e=nx.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&JD.getInstance().requiredApisAvailable()&&(t.isAuto&&sx()!==ex.VISIBLE||(3===vx?Ox(t):yx().then(function(){return Ox(t)},function(){return Ox(t)})))}function Ox(t){var e;!tx||(e=nx.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return Ax(t,1)},0)}function Rx(t,e){return(0===e?function(t){t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:Px(),network_request_metric:t};return JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);t=t.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);e={application_info:Px(),trace_metric:e};return JSON.stringify(e)})(t)}function Px(){return{google_app_id:nx.getInstance().getAppId(),app_instance_id:tx,web_app_info:{sdk_version:KD,page_url:JD.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=JD.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:sx(),effective_connection_type:function(){var t=JD.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var Dx=["_fp","_fcp","_fid"];var xx=(Lx.prototype.start=function(){if(1!==this.state)throw QD.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},Lx.prototype.stop=function(){if(2!==this.state)throw QD.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),kx(this)},Lx.prototype.record=function(t,e,n){if(t<=0)throw QD.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw QD.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=_o({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}kx(this)},Lx.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},Lx.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<Dx.indexOf(n))&&n.startsWith("_"))throw QD.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&YD.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},Lx.prototype.getMetric=function(t){return this.counters[t]||0},Lx.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length)&&(!ix.some(function(t){return n.startsWith(t)})&&!!n.match(ox)),r=0!==(r=e).length&&r.length<=100;if(i&&r)this.customAttributes[t]=e;else{if(!i)throw QD.create("invalid attribute name",{attributeName:t});if(!r)throw QD.create("invalid attribute value",{attributeValue:e})}},Lx.prototype.getAttribute=function(t){return this.customAttributes[t]},Lx.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},Lx.prototype.getAttributes=function(){return _o({},this.customAttributes)},Lx.prototype.setStartTime=function(t){this.startTimeUs=t},Lx.prototype.setDuration=function(t){this.durationUs=t},Lx.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),t=t&&t[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},Lx.createOobTrace=function(t,e,n){var r,i=JD.getInstance().getUrl();i&&(r=new Lx("_wt_"+i,!0),i=Math.floor(1e3*JD.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),kx(r))},Lx.createUserTimingTrace=function(t){kx(new Lx(t,!1,t))},Lx);function Lx(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=JD.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||WD+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function Mx(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=JD.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=nx.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return Ax(e,0)},0)))}var Fx=5e3;function Ux(){tx&&(setTimeout(function(){var t=JD.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){xx.createOobTrace(e,n),r=void 0},Fx),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),xx.createOobTrace(e,n,t))})):xx.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=JD.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){Mx(r[n])}t.setupObserver("resource",Mx)},0),setTimeout(function(){for(var t=JD.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){jx(r[n])}t.setupObserver("measure",jx)},0))}function jx(t){t=t.name;t.substring(0,WD.length)!==WD&&xx.createUserTimingTrace(t)}var Vx=(qx.prototype.trace=function(t){return new xx(t)},Object.defineProperty(qx.prototype,"instrumentationEnabled",{get:function(){return nx.getInstance().instrumentationEnabled},set:function(t){nx.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(qx.prototype,"dataCollectionEnabled",{get:function(){return nx.getInstance().dataCollectionEnabled},set:function(t){nx.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),qx);function qx(t){this.app=t,JD.getInstance().requiredApisAvailable()&&Ho().then(function(t){t&&(Sx||(Cx(_x),Sx=!0),yx().then(Ux,Ux))}).catch(function(t){YD.info("Environment doesn't support IndexedDB: "+t)})}var Bx;function Hx(t,e){if("[DEFAULT]"!==t.name)throw QD.create("FB not default");if("undefined"==typeof window)throw QD.create("no window");return BD=window,nx.getInstance().firebaseAppInstance=t,nx.getInstance().installationsService=e,new Vx(t)}(Bx=Xl).INTERNAL.registerComponent(new ws("performance",function(t){var e=t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate();return Hx(e,t)},"PUBLIC")),Bx.registerVersion("@firebase/performance",HD);var Kx,Wx,zx="firebase_id",Gx="origin",Qx=6e4,Yx="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xx="https://www.googletagmanager.com/gtag/js";(Gn=Kx=Kx||{}).EVENT="event",Gn.SET="set",Gn.CONFIG="config",(Gn=Wx=Wx||{}).ADD_SHIPPING_INFO="add_shipping_info",Gn.ADD_PAYMENT_INFO="add_payment_info",Gn.ADD_TO_CART="add_to_cart",Gn.ADD_TO_WISHLIST="add_to_wishlist",Gn.BEGIN_CHECKOUT="begin_checkout",Gn.CHECKOUT_PROGRESS="checkout_progress",Gn.EXCEPTION="exception",Gn.GENERATE_LEAD="generate_lead",Gn.LOGIN="login",Gn.PAGE_VIEW="page_view",Gn.PURCHASE="purchase",Gn.REFUND="refund",Gn.REMOVE_FROM_CART="remove_from_cart",Gn.SCREEN_VIEW="screen_view",Gn.SEARCH="search",Gn.SELECT_CONTENT="select_content",Gn.SELECT_ITEM="select_item",Gn.SELECT_PROMOTION="select_promotion",Gn.SET_CHECKOUT_OPTION="set_checkout_option",Gn.SHARE="share",Gn.SIGN_UP="sign_up",Gn.TIMING_COMPLETE="timing_complete",Gn.VIEW_CART="view_cart",Gn.VIEW_ITEM="view_item",Gn.VIEW_ITEM_LIST="view_item_list",Gn.VIEW_PROMOTION="view_promotion",Gn.VIEW_SEARCH_RESULTS="view_search_results";var Jx=new Ls("@firebase/analytics");function $x(o,s,a,u){return function(n,r,i){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==Kx.EVENT?[3,2]:[4,function(u,c,h,l,f){return wo(this,void 0,void 0,function(){var n,r,e,i,o,s,a;return Eo(this,function(t){switch(t.label){case 0:return(t.trys.push([0,4,,5]),n=[],f&&f.send_to)?(a=f.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e}),t=t&&c[t.appId];if(!t)return n=[],"break";n.push(t)},i=0,o=a;i<o.length&&(s=o[i],"break"!==e(s));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(Kx.EVENT,l,f||{}),[3,5];case 4:return a=t.sent(),Jx.error(a),[3,5];case 5:return[2]}})})}(o,s,a,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==Kx.CONFIG?[3,4]:[4,function(r,i,o,s,a,u){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:e=s[a],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return n=t.sent(),(n=n.find(function(t){return t.measurementId===a}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),Jx.error(n),[3,8];case 8:return r(Kx.CONFIG,a,u),[2]}})})}(o,s,a,u,r,i)];case 3:return t.sent(),[3,5];case 4:o(Kx.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),Jx.error(e),[3,7];case 7:return[2]}})})}}var Gn=((Gn={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Gn["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Gn["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Gn["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Gn["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Gn["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Gn["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Gn["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Gn["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Gn),Zx=new Yo("analytics","Analytics",Gn),tL=30;function eL(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var nL=new(eL.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},eL.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},eL.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},eL);function rL(o){var s;return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=Yx.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(s=i.error)&&void 0!==s&&s.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw Zx.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}function iL(a,u,c){return void 0===u&&(u=nL),wo(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return Eo(this,function(t){if(i=a.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw Zx.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new sL,setTimeout(function(){return wo(s,void 0,void 0,function(){return Eo(this,function(t){return o.abort(),[2]})})},void 0!==c?c:Qx),[2,function u(c,t,h,l){var f=t.throttleEndTimeMillis,p=t.backoffCount;void 0===l&&(l=nL);return wo(this,void 0,void 0,function(){var e,n,r,s,a;return Eo(this,function(t){switch(t.label){case 0:e=c.appId,n=c.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(i=h,o=f,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(Zx.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 2:return t.sent(),[3,4];case 3:if(s=t.sent(),n)return Jx.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:n}];throw s;case 4:return t.trys.push([4,6,,7]),[4,rL(c)];case 5:return a=t.sent(),l.deleteThrottleMetadata(e),[2,a];case 6:if(oL(r=t.sent()))return s=503===Number(r.customData.httpStatus)?_s(p,l.intervalMillis,tL):_s(p,l.intervalMillis),a={throttleEndTimeMillis:Date.now()+s,backoffCount:p+1},l.setThrottleMetadata(e,a),Jx.debug("Calling attemptFetch again in "+s+" millis"),[2,u(c,a,h,l)];if(l.deleteThrottleMetadata(e),n)return Jx.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}var i,o})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw Zx.create("no-api-key")})})}function oL(t){if(t instanceof Go&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}var sL=(aL.prototype.addEventListener=function(t){this.listeners.push(t)},aL.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},aL);function aL(){this.listeners=[]}function uL(i,o,s,a,u){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return(e=iL(i)).then(function(t){s[t.measurementId]=t.appId,i.options.measurementId&&t.measurementId!==i.options.measurementId&&Jx.warn("The measurement ID in the local Firebase config ("+i.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return Jx.error(t)}),o.push(e),n=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return Bo()?[3,1]:(Jx.warn(Zx.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,Ho()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),Jx.warn(Zx.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?a.getId():void 0}),[4,Promise.all([e,n])];case 1:return r=t.sent(),e=r[0],n=r[1],u("js",new Date),(r={})[Gx]="firebase",r.update=!0,r=r,null!=n&&(r[zx]=n),u(Kx.CONFIG,e.measurementId,r),[2,e.measurementId]}})})}var cL,hL,lL={},fL=[],pL={},dL="dataLayer",vL="gtag",yL=!1;function gL(t){if(yL)throw Zx.create("already-initialized");t.dataLayerName&&(dL=t.dataLayerName),t.gtagName&&(vL=t.gtagName)}function mL(t,e){n=[],jo()&&n.push("This is a browser extension environment."),Ko()||n.push("Cookies are not available."),0<n.length&&(n=n.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=Zx.create("invalid-analytics-context",{errorInfo:n}),Jx.warn(n.message));var n,r,i,o,s,a,u=t.options.appId;if(!u)throw Zx.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Zx.create("no-api-key");Jx.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=lL[u])throw Zx.create("already-exists",{id:u});return yL||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Xx))return r}}()||(s=dL,(a=document.createElement("script")).src=Xx+"?l="+s,a.async=!0,document.head.appendChild(a)),i=dL,o=[],Array.isArray(window[i])?o=window[i]:window[i]=o,n=lL,s=fL,a=pL,r=dL,i=vL,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)},window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=$x(o,n,s,a),i={gtagCore:o,wrappedGtag:window[i]},hL=i.wrappedGtag,cL=i.gtagCore,yL=!0),lL[u]=uL(t,fL,pL,e,cL),{app:t,logEvent:function(t,e,n){(function(n,r,i,o,s){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return s&&s.global?(n(Kx.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=_o(_o({},o),{send_to:e}),n(Kx.EVENT,i,e),t.label=3;case 3:return[2]}})})})(hL,lL[u],t,e,n).catch(function(t){return Jx.error(t)})},setCurrentScreen:function(t,e){(function(n,r,i,o){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return o&&o.global?(n(Kx.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(Kx.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})})(hL,lL[u],t,e).catch(function(t){return Jx.error(t)})},setUserId:function(t,e){(function(n,r,i,o){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return o&&o.global?(n(Kx.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(Kx.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})})(hL,lL[u],t,e).catch(function(t){return Jx.error(t)})},setUserProperties:function(t,e){(function(s,a,u,c){return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return s(Kx.SET,e),[2,Promise.resolve()];case 1:return[4,a];case 2:o=t.sent(),s(Kx.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})})(hL,lL[u],t,e).catch(function(t){return Jx.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})})(lL[u],t).catch(function(t){return Jx.error(t)})},INTERNAL:{delete:function(){return delete lL[u],Promise.resolve()}}}}var bL,_L="analytics";function wL(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:if(jo())return[2,!1];if(!Ko())return[2,!1];if(!Bo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Ho()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}(bL=Xl).INTERNAL.registerComponent(new ws(_L,function(t){return mL(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:gL,EventName:Wx,isSupported:wL})),bL.INTERNAL.registerComponent(new ws("analytics-internal",function(t){try{return{logEvent:t.getProvider(_L).getImmediate().logEvent}}catch(t){throw Zx.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),bL.registerVersion("@firebase/analytics","0.6.2-2021026232412");var EL=(IL.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},IL.prototype.fetch=function(i){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return(r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e))?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},IL);function IL(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var Gn=((Gn={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Gn["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Gn["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Gn["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Gn["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Gn["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Gn["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Gn["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Gn["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Gn["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Gn["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Gn["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Gn["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Gn),TL=new Yo("remoteconfig","Remote Config",Gn);var SL=(CL.prototype.fetch=function(f){return wo(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l;return Eo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),TL.create(o,{originalErrorMessage:i.message});case 6:if(s=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),TL.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?s=500:"NO_CHANGE"===c?s=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==s&&200!==s)throw TL.create("fetch-status",{httpStatus:s});return[2,{status:s,eTag:a,config:u}]}var e})})},CL);function CL(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var NL=(AL.prototype.addEventListener=function(t){this.listeners.push(t)},AL.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},AL);function AL(){this.listeners=[]}var kL=["1","true","t","yes","y","on"],OL=(RL.prototype.asString=function(){return this._value},RL.prototype.asBoolean=function(){return"static"!==this._source&&0<=kL.indexOf(this._value.toLowerCase())},RL.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},RL.prototype.getSource=function(){return this._source},RL);function RL(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var PL=(DL.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ks.DEBUG;break;case"silent":this._logger.logLevel=ks.SILENT;break;default:this._logger.logLevel=ks.ERROR}},Object.defineProperty(DL.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(DL.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),DL.prototype.activate=function(){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},DL.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},DL.prototype.fetch=function(){return wo(this,void 0,void 0,function(){var r,i,o,s=this;return Eo(this,function(t){switch(t.label){case 0:r=new NL,setTimeout(function(){return wo(s,void 0,void 0,function(){return Eo(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof Go&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},DL.prototype.fetchAndActivate=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},DL.prototype.getAll=function(){var n=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(_o(_o({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},DL.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},DL.prototype.getNumber=function(t){return this.getValue(t).asNumber()},DL.prototype.getString=function(t){return this.getValue(t).asString()},DL.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new OL("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new OL("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new OL("static"))},DL);function DL(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function xL(t,e){t=t.target.error||void 0;return TL.create(e,{originalErrorMessage:t&&t.message})}var LL="app_namespace_store",ML="firebase_remote_config",FL=1;var UL=(jL.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},jL.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},jL.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},jL.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},jL.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},jL.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},jL.prototype.getActiveConfig=function(){return this.get("active_config")},jL.prototype.setActiveConfig=function(t){return this.set("active_config",t)},jL.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},jL.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},jL.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},jL.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},jL.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},jL.prototype.get=function(a){return wo(this,void 0,void 0,function(){var o,s=this;return Eo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([LL],"readonly").objectStore(LL),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){n(xL(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result;e(t?t.value:void 0)}}catch(t){n(TL.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},jL.prototype.set=function(a,u){return wo(this,void 0,void 0,function(){var o,s=this;return Eo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([LL],"readwrite").objectStore(LL),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(xL(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(TL.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},jL.prototype.delete=function(a){return wo(this,void 0,void 0,function(){var o,s=this;return Eo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([LL],"readwrite").objectStore(LL),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(xL(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(TL.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},jL.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},jL);function jL(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(ML,FL);t.onerror=function(t){n(xL(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(LL,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var VL=(qL.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},qL.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},qL.prototype.getActiveConfig=function(){return this.activeConfig},qL.prototype.loadFromStorage=function(){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},qL.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},qL.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},qL.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},qL);function qL(t){this.storage=t}var BL=(HL.prototype.fetch=function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},HL.prototype.attemptFetch=function(r,t){var s=t.throttleEndTimeMillis,a=t.backoffCount;return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,(i=r.signal,o=s,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(TL.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(r)];case 3:return e=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,e];case 5:if(!function(t){if(t instanceof Go&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}(n=t.sent()))throw n;return n={throttleEndTimeMillis:Date.now()+_s(a),backoffCount:a+1},[4,this.storage.setThrottleMetadata(n)];case 6:return t.sent(),[2,this.attemptFetch(r,n)];case 7:return[2]}var i,o})})},HL);function HL(t,e){this.client=t,this.storage=e}var KL,WL="@firebase/remote-config";return(KL=Xl).INTERNAL.registerComponent(new ws("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw TL.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw TL.create("registration-project-id");if(!s)throw TL.create("registration-api-key");if(!a)throw TL.create("registration-app-id");e=e||"firebase";var u=new UL(a,n.name,e),t=new VL(u),i=new Ls(WL);i.logLevel=ks.ERROR;a=new SL(r,KL.SDK_VERSION,e,o,s,a),a=new BL(a,u),a=new EL(a,u,t,i),i=new PL(n,a,t,u,i);return i.ensureInitialized(),i},"PUBLIC").setMultipleInstances(!0)),KL.registerVersion(WL,"0.1.30-2021026232412"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Xl.registerVersion("firebase","8.2.5-2021026232412","cdn"),Xl});
//# sourceMappingURL=firebase.js.map
