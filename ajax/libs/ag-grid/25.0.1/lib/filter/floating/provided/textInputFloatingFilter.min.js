"use strict";var __extends=this&&this.__extends||function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};return function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),__decorate=this&&this.__decorate||function(t,e,i,n){var r,o=arguments.length,a=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;0<=s;s--)(r=t[s])&&(a=(o<3?r(a):3<o?r(e,i,a):r(e,i))||a);return 3<o&&a&&Object.defineProperty(e,i,a),a},__metadata=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(exports,"__esModule",{value:!0});var componentAnnotations_1=require("../../../widgets/componentAnnotations"),utils_1=require("../../../utils"),constants_1=require("../../../constants"),providedFilter_1=require("../../provided/providedFilter"),context_1=require("../../../context/context"),simpleFloatingFilter_1=require("./simpleFloatingFilter"),TextInputFloatingFilter=function(i){function t(){return null!==i&&i.apply(this,arguments)||this}return __extends(t,i),t.prototype.postConstruct=function(){this.setTemplate('<div class="ag-input-wrapper" role="presentation">\n                <input ref="eFloatingFilterText" class="ag-floating-filter-input">\n            </div>')},t.prototype.getDefaultDebounceMs=function(){return 500},t.prototype.onParentModelChanged=function(t,e){this.isEventFromFloatingFilter(e)||(this.setLastTypeFromModel(t),e=this.getTextFromModel(t),this.eFloatingFilterText.value=e,t=this.canWeEditAfterModelFromParentFilter(t),this.setEditable(t))},t.prototype.init=function(t){i.prototype.init.call(this,t),this.params=t,this.applyActive=providedFilter_1.ProvidedFilter.isUseApplyButton(this.params.filterParams);var e=providedFilter_1.ProvidedFilter.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),e=utils_1._.debounce(this.syncUpWithParentFilter.bind(this),e);this.addDestroyableEventListener(this.eFloatingFilterText,"input",e),this.addDestroyableEventListener(this.eFloatingFilterText,"keypress",e),this.addDestroyableEventListener(this.eFloatingFilterText,"keydown",e);t=t.column.getDefinition();t.filterParams&&t.filterParams.filterOptions&&1===t.filterParams.filterOptions.length&&"inRange"===t.filterParams.filterOptions[0]&&(this.eFloatingFilterText.disabled=!0)},t.prototype.syncUpWithParentFilter=function(t){var e=this,i=this.eFloatingFilterText.value,t=utils_1._.isKeyPressed(t,constants_1.Constants.KEY_ENTER);this.applyActive&&!t||this.params.parentFilterInstance(function(t){t&&t.onFloatingFilterChanged(e.getLastType(),i)})},t.prototype.setEditable=function(t){this.eFloatingFilterText.disabled=!t},__decorate([componentAnnotations_1.RefSelector("eFloatingFilterText"),__metadata("design:type",HTMLInputElement)],t.prototype,"eFloatingFilterText",void 0),__decorate([context_1.PostConstruct,__metadata("design:type",Function),__metadata("design:paramtypes",[]),__metadata("design:returntype",void 0)],t.prototype,"postConstruct",null),t}(simpleFloatingFilter_1.SimpleFloatingFilter);exports.TextInputFloatingFilter=TextInputFloatingFilter;