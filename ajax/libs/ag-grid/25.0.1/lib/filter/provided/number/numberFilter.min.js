"use strict";var __extends=this&&this.__extends||function(){var o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),__decorate=this&&this.__decorate||function(e,t,i,o){var r,l=arguments.length,n=l<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(n=(l<3?r(n):3<l?r(t,i,n):r(t,i))||n);return 3<l&&n&&Object.defineProperty(t,i,n),n},__metadata=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(exports,"__esModule",{value:!0});var componentAnnotations_1=require("../../../widgets/componentAnnotations"),utils_1=require("../../../utils"),simpleFilter_1=require("../simpleFilter"),scalerFilter_1=require("../scalerFilter"),NumberFilter=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return __extends(r,t),r.prototype.mapRangeFromModel=function(e){return{from:e.filter,to:e.filterTo}},r.prototype.getDefaultDebounceMs=function(){return 500},r.prototype.resetUiToDefaults=function(){t.prototype.resetUiToDefaults.call(this),this.eValueFrom1.value=null,this.eValueFrom2.value=null,this.eValueTo1.value=null,this.eValueTo2.value=null},r.prototype.setConditionIntoUi=function(e,t){var i=t===simpleFilter_1.ConditionPosition.One,t=i?this.eValueFrom1:this.eValueFrom2,i=i?this.eValueTo1:this.eValueTo2;t.value=e?""+e.filter:null,i.value=e?""+e.filterTo:null},r.prototype.setValueFromFloatingFilter=function(e){this.eValueFrom1.value=e,this.eValueFrom2.value=null,this.eValueTo1.value=null,this.eValueTo2.value=null},r.prototype.comparator=function(){return function(e,t){return e===t?0:e<t?1:t<e?-1:void 0}},r.prototype.setParams=function(e){t.prototype.setParams.call(this,e),this.addValueChangedListeners()},r.prototype.addValueChangedListeners=function(){function e(){return t.onUiChanged()}var t=this;this.addDestroyableEventListener(this.eValueFrom1,"input",e),this.addDestroyableEventListener(this.eValueFrom2,"input",e),this.addDestroyableEventListener(this.eValueTo1,"input",e),this.addDestroyableEventListener(this.eValueTo2,"input",e)},r.prototype.afterGuiAttached=function(){this.eValueFrom1.focus()},r.prototype.getDefaultFilterOptions=function(){return r.DEFAULT_FILTER_OPTIONS},r.prototype.createValueTemplate=function(e){var t=e===simpleFilter_1.ConditionPosition.One?"1":"2",e=this.translate.bind(this);return'<div class="ag-filter-body" ref="eCondition'+t+'Body" role="presentation">\n            <div class="ag-input-wrapper" role="presentation">\n                <input class="ag-filter-filter" ref="eValueFrom'+t+'" type="text" placeholder="'+e("filterOoo")+'"/>\n            </div>\n             <div class="ag-input-wrapper ag-filter-number-to" ref="ePanel'+t+'" role="presentation">\n                <input class="ag-filter-filter" ref="eValueTo'+t+'" type="text" placeholder="'+e("filterOoo")+'"/>\n            </div>\n        </div>'},r.prototype.isConditionUiComplete=function(e){var t=e===simpleFilter_1.ConditionPosition.One,i=t?this.getCondition1Type():this.getCondition2Type(),e=t?this.eValueFrom1:this.eValueFrom2,t=t?this.eValueTo1:this.eValueTo2,e=this.stringToFloat(e.value),t=this.stringToFloat(t.value);return i!==simpleFilter_1.SimpleFilter.EMPTY&&(!!this.doesFilterHaveHiddenInput(i)||(i===simpleFilter_1.SimpleFilter.IN_RANGE?null!=e&&null!=t:null!=e))},r.prototype.areSimpleModelsEqual=function(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type},r.prototype.getFilterType=function(){return r.FILTER_TYPE},r.prototype.stringToFloat=function(e){e=utils_1._.makeNull(e);return e&&""===e.trim()&&(e=null),null!=e?parseFloat(e):null},r.prototype.createCondition=function(e){var t=e===simpleFilter_1.ConditionPosition.One,i=t?this.getCondition1Type():this.getCondition2Type(),o=t?this.eValueFrom1:this.eValueFrom2,e=this.stringToFloat(o.value),o=t?this.eValueTo1:this.eValueTo2,t=this.stringToFloat(o.value),o={filterType:r.FILTER_TYPE,type:i};return this.doesFilterHaveHiddenInput(i)||(o.filter=e,o.filterTo=t),o},r.prototype.updateUiVisibility=function(){t.prototype.updateUiVisibility.call(this);var e=this.showValueFrom(this.getCondition1Type());utils_1._.setDisplayed(this.eValueFrom1,e);e=this.showValueTo(this.getCondition1Type());utils_1._.setDisplayed(this.eValueTo1,e);e=this.showValueFrom(this.getCondition2Type());utils_1._.setDisplayed(this.eValueFrom2,e);e=this.showValueTo(this.getCondition2Type());utils_1._.setDisplayed(this.eValueTo2,e)},r.FILTER_TYPE="number",r.DEFAULT_FILTER_OPTIONS=[scalerFilter_1.ScalerFilter.EQUALS,scalerFilter_1.ScalerFilter.NOT_EQUAL,scalerFilter_1.ScalerFilter.LESS_THAN,scalerFilter_1.ScalerFilter.LESS_THAN_OR_EQUAL,scalerFilter_1.ScalerFilter.GREATER_THAN,scalerFilter_1.ScalerFilter.GREATER_THAN_OR_EQUAL,scalerFilter_1.ScalerFilter.IN_RANGE],__decorate([componentAnnotations_1.RefSelector("eValueFrom1"),__metadata("design:type",HTMLInputElement)],r.prototype,"eValueFrom1",void 0),__decorate([componentAnnotations_1.RefSelector("eValueFrom2"),__metadata("design:type",HTMLInputElement)],r.prototype,"eValueFrom2",void 0),__decorate([componentAnnotations_1.RefSelector("eValueTo1"),__metadata("design:type",HTMLInputElement)],r.prototype,"eValueTo1",void 0),__decorate([componentAnnotations_1.RefSelector("eValueTo2"),__metadata("design:type",HTMLInputElement)],r.prototype,"eValueTo2",void 0),r}(scalerFilter_1.ScalerFilter);exports.NumberFilter=NumberFilter;