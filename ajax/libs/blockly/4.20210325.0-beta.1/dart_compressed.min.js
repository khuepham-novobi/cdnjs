!function(t,r){"function"==typeof define&&define.amd?define(["./blockly_compressed.js"],r):"object"==typeof exports?module.exports=r(require("./blockly_compressed.js")):t.Blockly.Dart=r(t.Blockly)}(this,function(s){"use strict";return s.Dart=new s.Generator("Dart"),s.Dart.addReservedWords("assert,break,case,catch,class,const,continue,default,do,else,enum,extends,false,final,finally,for,if,in,is,new,null,rethrow,return,super,switch,this,throw,true,try,var,void,while,with,print,identityHashCode,identical,BidirectionalIterator,Comparable,double,Function,int,Invocation,Iterable,Iterator,List,Map,Match,num,Pattern,RegExp,Set,StackTrace,String,StringSink,Type,bool,DateTime,Deprecated,Duration,Expando,Null,Object,RuneIterator,Runes,Stopwatch,StringBuffer,Symbol,Uri,Comparator,AbstractClassInstantiationError,ArgumentError,AssertionError,CastError,ConcurrentModificationError,CyclicInitializationError,Error,Exception,FallThroughError,FormatException,IntegerDivisionByZeroException,NoSuchMethodError,NullThrownError,OutOfMemoryError,RangeError,StackOverflowError,StateError,TypeError,UnimplementedError,UnsupportedError"),s.Dart.ORDER_ATOMIC=0,s.Dart.ORDER_UNARY_POSTFIX=1,s.Dart.ORDER_UNARY_PREFIX=2,s.Dart.ORDER_MULTIPLICATIVE=3,s.Dart.ORDER_ADDITIVE=4,s.Dart.ORDER_SHIFT=5,s.Dart.ORDER_BITWISE_AND=6,s.Dart.ORDER_BITWISE_XOR=7,s.Dart.ORDER_BITWISE_OR=8,s.Dart.ORDER_RELATIONAL=9,s.Dart.ORDER_EQUALITY=10,s.Dart.ORDER_LOGICAL_AND=11,s.Dart.ORDER_LOGICAL_OR=12,s.Dart.ORDER_IF_NULL=13,s.Dart.ORDER_CONDITIONAL=14,s.Dart.ORDER_CASCADE=15,s.Dart.ORDER_ASSIGNMENT=16,s.Dart.ORDER_NONE=99,s.Dart.isInitialized=!1,s.Dart.init=function(t){s.Dart.definitions_=Object.create(null),s.Dart.functionNames_=Object.create(null),s.Dart.variableDB_?s.Dart.variableDB_.reset():s.Dart.variableDB_=new s.Names(s.Dart.RESERVED_WORDS_),s.Dart.variableDB_.setVariableMap(t.getVariableMap());for(var r=[],a=s.Variables.allDeveloperVariables(t),e=0;e<a.length;e++)r.push(s.Dart.variableDB_.getName(a[e],s.Names.DEVELOPER_VARIABLE_TYPE));for(t=s.Variables.allUsedVarModels(t),e=0;e<t.length;e++)r.push(s.Dart.variableDB_.getName(t[e].getId(),s.VARIABLE_CATEGORY_NAME));r.length&&(s.Dart.definitions_.variables="var "+r.join(", ")+";"),this.isInitialized=!0},s.Dart.finish=function(t){t="main() {\n"+(t=t&&s.Dart.prefixLines(t,s.Dart.INDENT))+"}";var r,a=[],e=[];for(r in s.Dart.definitions_){var n=s.Dart.definitions_[r];(n.match(/^import\s/)?a:e).push(n)}return delete s.Dart.definitions_,delete s.Dart.functionNames_,s.Dart.variableDB_.reset(),(a.join("\n")+"\n\n"+e.join("\n\n")).replace(/\n\n+/g,"\n\n").replace(/\n*$/,"\n\n\n")+t},s.Dart.scrubNakedValue=function(t){return t+";\n"},s.Dart.quote_=function(t){return"'"+(t=t.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/\$/g,"\\$").replace(/'/g,"\\'"))+"'"},s.Dart.multiline_quote_=function(t){return t.split(/\n/g).map(s.Dart.quote_).join(" + '\\n' + \n")},s.Dart.scrub_=function(t,r,a){var e="";if(!t.outputConnection||!t.outputConnection.targetConnection){var n=t.getCommentText();n&&(n=s.utils.string.wrap(n,s.Dart.COMMENT_WRAP-3),e=t.getProcedureDef?e+s.Dart.prefixLines(n+"\n","/// "):e+s.Dart.prefixLines(n+"\n","// "));for(var i=0;i<t.inputList.length;i++)t.inputList[i].type==s.INPUT_VALUE&&(n=t.inputList[i].connection.targetBlock())&&(n=s.Dart.allNestedComments(n))&&(e+=s.Dart.prefixLines(n,"// "))}return t=t.nextConnection&&t.nextConnection.targetBlock(),e+r+(a=a?"":s.Dart.blockToCode(t))},s.Dart.getAdjusted=function(t,r,a,e,n){a=a||0,n=n||s.Dart.ORDER_NONE,t.workspace.options.oneBasedIndex&&a--;var i,D=t.workspace.options.oneBasedIndex?"1":"0";return t=a?s.Dart.valueToCode(t,r,s.Dart.ORDER_ADDITIVE)||D:e?s.Dart.valueToCode(t,r,s.Dart.ORDER_UNARY_PREFIX)||D:s.Dart.valueToCode(t,r,n)||D,s.isNumber(t)?(t=parseInt(t,10)+a,e&&(t=-t)):(0<a?(t=t+" + "+a,i=s.Dart.ORDER_ADDITIVE):a<0&&(t=t+" - "+-a,i=s.Dart.ORDER_ADDITIVE),e&&(t=a?"-("+t+")":"-"+t,i=s.Dart.ORDER_UNARY_PREFIX),i=Math.floor(i),n=Math.floor(n),i&&i<=n&&(t="("+t+")")),t},s.Dart.colour={},s.Dart.addReservedWords("Math"),s.Dart.colour_picker=function(t){return[s.Dart.quote_(t.getFieldValue("COLOUR")),s.Dart.ORDER_ATOMIC]},s.Dart.colour_random=function(t){return s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",[s.Dart.provideFunction_("colour_random",["String "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"() {","  String hex = '0123456789abcdef';","  var rnd = new Math.Random();","  return '#${hex[rnd.nextInt(16)]}${hex[rnd.nextInt(16)]}'","      '${hex[rnd.nextInt(16)]}${hex[rnd.nextInt(16)]}'","      '${hex[rnd.nextInt(16)]}${hex[rnd.nextInt(16)]}';","}"])+"()",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.colour_rgb=function(t){var r=s.Dart.valueToCode(t,"RED",s.Dart.ORDER_NONE)||0,a=s.Dart.valueToCode(t,"GREEN",s.Dart.ORDER_NONE)||0;return t=s.Dart.valueToCode(t,"BLUE",s.Dart.ORDER_NONE)||0,s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",[s.Dart.provideFunction_("colour_rgb",["String "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(num r, num g, num b) {","  num rn = (Math.max(Math.min(r, 100), 0) * 2.55).round();","  String rs = rn.toInt().toRadixString(16);","  rs = '0$rs';","  rs = rs.substring(rs.length - 2);","  num gn = (Math.max(Math.min(g, 100), 0) * 2.55).round();","  String gs = gn.toInt().toRadixString(16);","  gs = '0$gs';","  gs = gs.substring(gs.length - 2);","  num bn = (Math.max(Math.min(b, 100), 0) * 2.55).round();","  String bs = bn.toInt().toRadixString(16);","  bs = '0$bs';","  bs = bs.substring(bs.length - 2);","  return '#$rs$gs$bs';","}"])+"("+r+", "+a+", "+t+")",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.colour_blend=function(t){var r=s.Dart.valueToCode(t,"COLOUR1",s.Dart.ORDER_NONE)||"'#000000'",a=s.Dart.valueToCode(t,"COLOUR2",s.Dart.ORDER_NONE)||"'#000000'";return t=s.Dart.valueToCode(t,"RATIO",s.Dart.ORDER_NONE)||.5,s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",[s.Dart.provideFunction_("colour_blend",["String "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String c1, String c2, num ratio) {","  ratio = Math.max(Math.min(ratio, 1), 0);","  int r1 = int.parse('0x${c1.substring(1, 3)}');","  int g1 = int.parse('0x${c1.substring(3, 5)}');","  int b1 = int.parse('0x${c1.substring(5, 7)}');","  int r2 = int.parse('0x${c2.substring(1, 3)}');","  int g2 = int.parse('0x${c2.substring(3, 5)}');","  int b2 = int.parse('0x${c2.substring(5, 7)}');","  num rn = (r1 * (1 - ratio) + r2 * ratio).round();","  String rs = rn.toInt().toRadixString(16);","  num gn = (g1 * (1 - ratio) + g2 * ratio).round();","  String gs = gn.toInt().toRadixString(16);","  num bn = (b1 * (1 - ratio) + b2 * ratio).round();","  String bs = bn.toInt().toRadixString(16);","  rs = '0$rs';","  rs = rs.substring(rs.length - 2);","  gs = '0$gs';","  gs = gs.substring(gs.length - 2);","  bs = '0$bs';","  bs = bs.substring(bs.length - 2);","  return '#$rs$gs$bs';","}"])+"("+r+", "+a+", "+t+")",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.lists={},s.Dart.addReservedWords("Math"),s.Dart.lists_create_empty=function(t){return["[]",s.Dart.ORDER_ATOMIC]},s.Dart.lists_create_with=function(t){for(var r=Array(t.itemCount_),a=0;a<t.itemCount_;a++)r[a]=s.Dart.valueToCode(t,"ADD"+a,s.Dart.ORDER_NONE)||"null";return["["+r.join(", ")+"]",s.Dart.ORDER_ATOMIC]},s.Dart.lists_repeat=function(t){var r=s.Dart.valueToCode(t,"ITEM",s.Dart.ORDER_NONE)||"null";return["new List.filled("+(s.Dart.valueToCode(t,"NUM",s.Dart.ORDER_NONE)||"0")+", "+r+")",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.lists_length=function(t){return[(s.Dart.valueToCode(t,"VALUE",s.Dart.ORDER_UNARY_POSTFIX)||"[]")+".length",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.lists_isEmpty=function(t){return[(s.Dart.valueToCode(t,"VALUE",s.Dart.ORDER_UNARY_POSTFIX)||"[]")+".isEmpty",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.lists_indexOf=function(t){var r="FIRST"==t.getFieldValue("END")?"indexOf":"lastIndexOf",a=s.Dart.valueToCode(t,"FIND",s.Dart.ORDER_NONE)||"''",r=(s.Dart.valueToCode(t,"VALUE",s.Dart.ORDER_UNARY_POSTFIX)||"[]")+"."+r+"("+a+")";return t.workspace.options.oneBasedIndex?[r+" + 1",s.Dart.ORDER_ADDITIVE]:[r,s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.lists_getIndex=function(t){function r(){var t=s.Dart.variableDB_.getDistinctName("tmp_list",s.VARIABLE_CATEGORY_NAME),r="List "+t+" = "+n+";\n";return n=t,r}var a=t.getFieldValue("MODE")||"GET",e=t.getFieldValue("WHERE")||"FROM_START",n=s.Dart.valueToCode(t,"VALUE","RANDOM"==e||"FROM_END"==e?s.Dart.ORDER_NONE:s.Dart.ORDER_UNARY_POSTFIX)||"[]";if(("RANDOM"!=e||"REMOVE"!=a)&&"FROM_END"!=e||n.match(/^\w+$/))switch(e){case"FIRST":if("GET"==a)return[n+".first",s.Dart.ORDER_UNARY_POSTFIX];if("GET_REMOVE"==a)return[n+".removeAt(0)",s.Dart.ORDER_UNARY_POSTFIX];if("REMOVE"==a)return n+".removeAt(0);\n";break;case"LAST":if("GET"==a)return[n+".last",s.Dart.ORDER_UNARY_POSTFIX];if("GET_REMOVE"==a)return[n+".removeLast()",s.Dart.ORDER_UNARY_POSTFIX];if("REMOVE"==a)return n+".removeLast();\n";break;case"FROM_START":if(e=s.Dart.getAdjusted(t,"AT"),"GET"==a)return[n+"["+e+"]",s.Dart.ORDER_UNARY_POSTFIX];if("GET_REMOVE"==a)return[n+".removeAt("+e+")",s.Dart.ORDER_UNARY_POSTFIX];if("REMOVE"==a)return n+".removeAt("+e+");\n";break;case"FROM_END":if(e=s.Dart.getAdjusted(t,"AT",1,!1,s.Dart.ORDER_ADDITIVE),"GET"==a)return[n+"["+n+".length - "+e+"]",s.Dart.ORDER_UNARY_POSTFIX];if("GET_REMOVE"==a||"REMOVE"==a){if(t=n+".removeAt("+n+".length - "+e+")","GET_REMOVE"==a)return[t,s.Dart.ORDER_UNARY_POSTFIX];if("REMOVE"==a)return t+";\n"}break;case"RANDOM":if(s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;","REMOVE"==a)return"int "+(a=s.Dart.variableDB_.getDistinctName("tmp_x",s.VARIABLE_CATEGORY_NAME))+" = new Math.Random().nextInt("+n+".length);\n"+n+".removeAt("+a+");\n";if("GET"==a)return[(a=s.Dart.provideFunction_("lists_get_random_item",["dynamic "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List my_list) {","  int x = new Math.Random().nextInt(my_list.length);","  return my_list[x];","}"]))+"("+n+")",s.Dart.ORDER_UNARY_POSTFIX];if("GET_REMOVE"==a)return[(a=s.Dart.provideFunction_("lists_remove_random_item",["dynamic "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List my_list) {","  int x = new Math.Random().nextInt(my_list.length);","  return my_list.removeAt(x);","}"]))+"("+n+")",s.Dart.ORDER_UNARY_POSTFIX]}else{if("RANDOM"==e)return s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",(t=r())+"int "+(a=s.Dart.variableDB_.getDistinctName("tmp_x",s.VARIABLE_CATEGORY_NAME))+" = new Math.Random().nextInt("+n+".length);\n"+n+".removeAt("+a+");\n";if("REMOVE"==a)return e=s.Dart.getAdjusted(t,"AT",1,!1,s.Dart.ORDER_ADDITIVE),(t=r())+(n+".removeAt(")+n+".length - "+e+");\n";if("GET"==a)return e=s.Dart.getAdjusted(t,"AT",1),[(a=s.Dart.provideFunction_("lists_get_from_end",["dynamic "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List my_list, num x) {","  x = my_list.length - x;","  return my_list[x];","}"]))+"("+n+", "+e+")",s.Dart.ORDER_UNARY_POSTFIX];if("GET_REMOVE"==a)return e=s.Dart.getAdjusted(t,"AT",1),[(a=s.Dart.provideFunction_("lists_remove_from_end",["dynamic "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List my_list, num x) {","  x = my_list.length - x;","  return my_list.removeAt(x);","}"]))+"("+n+", "+e+")",s.Dart.ORDER_UNARY_POSTFIX]}throw Error("Unhandled combination (lists_getIndex).")},s.Dart.lists_setIndex=function(t){function r(){if(n.match(/^\w+$/))return"";var t=s.Dart.variableDB_.getDistinctName("tmp_list",s.VARIABLE_CATEGORY_NAME),r="List "+t+" = "+n+";\n";return n=t,r}var a=t.getFieldValue("MODE")||"GET",e=t.getFieldValue("WHERE")||"FROM_START",n=s.Dart.valueToCode(t,"LIST",s.Dart.ORDER_UNARY_POSTFIX)||"[]",i=s.Dart.valueToCode(t,"TO",s.Dart.ORDER_ASSIGNMENT)||"null";switch(e){case"FIRST":if("SET"==a)return n+"[0] = "+i+";\n";if("INSERT"==a)return n+".insert(0, "+i+");\n";break;case"LAST":if("SET"==a)return(t=r())+(n+"[")+n+".length - 1] = "+i+";\n";if("INSERT"==a)return n+".add("+i+");\n";break;case"FROM_START":if(e=s.Dart.getAdjusted(t,"AT"),"SET"==a)return n+"["+e+"] = "+i+";\n";if("INSERT"==a)return n+".insert("+e+", "+i+");\n";break;case"FROM_END":if(e=s.Dart.getAdjusted(t,"AT",1,!1,s.Dart.ORDER_ADDITIVE),t=r(),"SET"==a)return t+(n+"[")+n+".length - "+e+"] = "+i+";\n";if("INSERT"==a)return t+(n+".insert(")+n+".length - "+e+", "+i+");\n";break;case"RANDOM":if(s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",t=r(),t+="int "+(e=s.Dart.variableDB_.getDistinctName("tmp_x",s.VARIABLE_CATEGORY_NAME))+" = new Math.Random().nextInt("+n+".length);\n","SET"==a)return t+(n+"[")+e+"] = "+i+";\n";if("INSERT"==a)return t+(n+".insert(")+e+", "+i+");\n"}throw Error("Unhandled combination (lists_setIndex).")},s.Dart.lists_getSublist=function(t){var r=s.Dart.valueToCode(t,"LIST",s.Dart.ORDER_UNARY_POSTFIX)||"[]",a=t.getFieldValue("WHERE1"),e=t.getFieldValue("WHERE2");if(r.match(/^\w+$/)||"FROM_END"!=a&&"FROM_START"==e){switch(a){case"FROM_START":var n=s.Dart.getAdjusted(t,"AT1");break;case"FROM_END":n=r+".length - "+(n=s.Dart.getAdjusted(t,"AT1",1,!1,s.Dart.ORDER_ADDITIVE));break;case"FIRST":n="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(e){case"FROM_START":var i=s.Dart.getAdjusted(t,"AT2",1);break;case"FROM_END":i=r+".length - "+(i=s.Dart.getAdjusted(t,"AT2",0,!1,s.Dart.ORDER_ADDITIVE));break;case"LAST":break;default:throw Error("Unhandled option (lists_getSublist).")}t="LAST"==e?r+".sublist("+n+")":r+".sublist("+n+", "+i+")"}else n=s.Dart.getAdjusted(t,"AT1"),i=s.Dart.getAdjusted(t,"AT2"),t=s.Dart.provideFunction_("lists_get_sublist",["List "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List list, String where1, num at1, String where2, num at2) {","  int getAt(String where, num at) {","    if (where == 'FROM_END') {","      at = list.length - 1 - at;","    } else if (where == 'FIRST') {","      at = 0;","    } else if (where == 'LAST') {","      at = list.length - 1;","    } else if (where != 'FROM_START') {","      throw 'Unhandled option (lists_getSublist).';","    }","    return at;","  }","  at1 = getAt(where1, at1);","  at2 = getAt(where2, at2) + 1;","  return list.sublist(at1, at2);","}"])+"("+r+", '"+a+"', "+n+", '"+e+"', "+i+")";return[t,s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.lists_sort=function(t){var r=s.Dart.valueToCode(t,"LIST",s.Dart.ORDER_NONE)||"[]",a="1"===t.getFieldValue("DIRECTION")?1:-1;return t=t.getFieldValue("TYPE"),[s.Dart.provideFunction_("lists_sort",["List "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List list, String type, int direction) {","  var compareFuncs = {",'    "NUMERIC": (a, b) => (direction * a.compareTo(b)).toInt(),','    "TEXT": (a, b) => direction * a.toString().compareTo(b.toString()),','    "IGNORE_CASE": ',"       (a, b) => direction * ","      a.toString().toLowerCase().compareTo(b.toString().toLowerCase())","  };","  list = new List.from(list);","  var compare = compareFuncs[type];","  list.sort(compare);","  return list;","}"])+"("+r+', "'+t+'", '+a+")",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.lists_split=function(t){var r=s.Dart.valueToCode(t,"INPUT",s.Dart.ORDER_UNARY_POSTFIX),a=s.Dart.valueToCode(t,"DELIM",s.Dart.ORDER_NONE)||"''";if("SPLIT"==(t=t.getFieldValue("MODE")))r=r||"''",t="split";else{if("JOIN"!=t)throw Error("Unknown mode: "+t);r=r||"[]",t="join"}return[r+"."+t+"("+a+")",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.lists_reverse=function(t){return["new List.from("+(s.Dart.valueToCode(t,"LIST",s.Dart.ORDER_NONE)||"[]")+".reversed)",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.logic={},s.Dart.controls_if=function(t){var r=0,a="";s.Dart.STATEMENT_PREFIX&&(a+=s.Dart.injectId(s.Dart.STATEMENT_PREFIX,t));do{var e=s.Dart.valueToCode(t,"IF"+r,s.Dart.ORDER_NONE)||"false",n=s.Dart.statementToCode(t,"DO"+r)}while(s.Dart.STATEMENT_SUFFIX&&(n=s.Dart.prefixLines(s.Dart.injectId(s.Dart.STATEMENT_SUFFIX,t),s.Dart.INDENT)+n),a+=(0<r?"else ":"")+"if ("+e+") {\n"+n+"}",++r,t.getInput("IF"+r));return(t.getInput("ELSE")||s.Dart.STATEMENT_SUFFIX)&&(n=s.Dart.statementToCode(t,"ELSE"),s.Dart.STATEMENT_SUFFIX&&(n=s.Dart.prefixLines(s.Dart.injectId(s.Dart.STATEMENT_SUFFIX,t),s.Dart.INDENT)+n),a+=" else {\n"+n+"}"),a+"\n"},s.Dart.controls_ifelse=s.Dart.controls_if,s.Dart.logic_compare=function(t){var r={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[t.getFieldValue("OP")],a="=="==r||"!="==r?s.Dart.ORDER_EQUALITY:s.Dart.ORDER_RELATIONAL;return[(s.Dart.valueToCode(t,"A",a)||"0")+" "+r+" "+(t=s.Dart.valueToCode(t,"B",a)||"0"),a]},s.Dart.logic_operation=function(t){var r,a="AND"==t.getFieldValue("OP")?"&&":"||",e="&&"==a?s.Dart.ORDER_LOGICAL_AND:s.Dart.ORDER_LOGICAL_OR,n=s.Dart.valueToCode(t,"A",e);return t=s.Dart.valueToCode(t,"B",e),t=n||t?(r="&&"==a?"true":"false",n=n||r,t||r):n="false",[n+" "+a+" "+t,e]},s.Dart.logic_negate=function(t){var r=s.Dart.ORDER_UNARY_PREFIX;return["!"+(s.Dart.valueToCode(t,"BOOL",r)||"true"),r]},s.Dart.logic_boolean=function(t){return["TRUE"==t.getFieldValue("BOOL")?"true":"false",s.Dart.ORDER_ATOMIC]},s.Dart.logic_null=function(t){return["null",s.Dart.ORDER_ATOMIC]},s.Dart.logic_ternary=function(t){return[(s.Dart.valueToCode(t,"IF",s.Dart.ORDER_CONDITIONAL)||"false")+" ? "+(s.Dart.valueToCode(t,"THEN",s.Dart.ORDER_CONDITIONAL)||"null")+" : "+(t=s.Dart.valueToCode(t,"ELSE",s.Dart.ORDER_CONDITIONAL)||"null"),s.Dart.ORDER_CONDITIONAL]},s.Dart.loops={},s.Dart.controls_repeat_ext=function(t){var r=t.getField("TIMES")?String(Number(t.getFieldValue("TIMES"))):s.Dart.valueToCode(t,"TIMES",s.Dart.ORDER_ASSIGNMENT)||"0",a=s.Dart.statementToCode(t,"DO"),a=s.Dart.addLoopTrap(a,t);t="";var e=s.Dart.variableDB_.getDistinctName("count",s.VARIABLE_CATEGORY_NAME),n=r;return r.match(/^\w+$/)||s.isNumber(r)||(t+="var "+(n=s.Dart.variableDB_.getDistinctName("repeat_end",s.VARIABLE_CATEGORY_NAME))+" = "+r+";\n"),t+"for (int "+e+" = 0; "+e+" < "+n+"; "+e+"++) {\n"+a+"}\n"},s.Dart.controls_repeat=s.Dart.controls_repeat_ext,s.Dart.controls_whileUntil=function(t){var r="UNTIL"==t.getFieldValue("MODE"),a=s.Dart.valueToCode(t,"BOOL",r?s.Dart.ORDER_UNARY_PREFIX:s.Dart.ORDER_NONE)||"false",e=s.Dart.statementToCode(t,"DO");return r&&(a="!"+a),"while ("+a+") {\n"+(e=s.Dart.addLoopTrap(e,t))+"}\n"},s.Dart.controls_for=function(t){var r,a=s.Dart.variableDB_.getName(t.getFieldValue("VAR"),s.VARIABLE_CATEGORY_NAME),e=s.Dart.valueToCode(t,"FROM",s.Dart.ORDER_ASSIGNMENT)||"0",n=s.Dart.valueToCode(t,"TO",s.Dart.ORDER_ASSIGNMENT)||"0",i=s.Dart.valueToCode(t,"BY",s.Dart.ORDER_ASSIGNMENT)||"1",D=s.Dart.statementToCode(t,"DO"),D=s.Dart.addLoopTrap(D,t);return s.isNumber(e)&&s.isNumber(n)&&s.isNumber(i)?(t="for ("+a+" = "+e+"; "+a+((r=Number(e)<=Number(n))?" <= ":" >= ")+n+"; "+a,t=(1==(a=Math.abs(Number(i)))?t+(r?"++":"--"):t+(r?" += ":" -= ")+a)+") {\n"+D+"}\n"):(t="",(r=e).match(/^\w+$/)||s.isNumber(e)||(t+="var "+(r=s.Dart.variableDB_.getDistinctName(a+"_start",s.VARIABLE_CATEGORY_NAME))+" = "+e+";\n"),(e=n).match(/^\w+$/)||s.isNumber(n)||(t+="var "+(e=s.Dart.variableDB_.getDistinctName(a+"_end",s.VARIABLE_CATEGORY_NAME))+" = "+n+";\n"),t+="num "+(n=s.Dart.variableDB_.getDistinctName(a+"_inc",s.VARIABLE_CATEGORY_NAME))+" = ",t=(t=s.isNumber(i)?t+(Math.abs(i)+";\n"):t+"("+i+").abs();\n")+"if ("+r+" > "+e+") {\n"+(s.Dart.INDENT+n)+" = -"+n+";\n",t+="}\n",t+="for ("+a+" = "+r+"; "+n+" >= 0 ? "+a+" <= "+e+" : "+a+" >= "+e+"; "+a+" += "+n+") {\n"+D+"}\n"),t},s.Dart.controls_forEach=function(t){var r=s.Dart.variableDB_.getName(t.getFieldValue("VAR"),s.VARIABLE_CATEGORY_NAME),a=s.Dart.valueToCode(t,"LIST",s.Dart.ORDER_ASSIGNMENT)||"[]",e=s.Dart.statementToCode(t,"DO");return"for (var "+r+" in "+a+") {\n"+(e=s.Dart.addLoopTrap(e,t))+"}\n"},s.Dart.controls_flow_statements=function(t){var r,a="";switch(s.Dart.STATEMENT_PREFIX&&(a+=s.Dart.injectId(s.Dart.STATEMENT_PREFIX,t)),s.Dart.STATEMENT_SUFFIX&&(a+=s.Dart.injectId(s.Dart.STATEMENT_SUFFIX,t)),!s.Dart.STATEMENT_PREFIX||(r=s.Constants.Loops.CONTROL_FLOW_IN_LOOP_CHECK_MIXIN.getSurroundLoop(t))&&!r.suppressPrefixSuffix&&(a+=s.Dart.injectId(s.Dart.STATEMENT_PREFIX,r)),t.getFieldValue("FLOW")){case"BREAK":return a+"break;\n";case"CONTINUE":return a+"continue;\n"}throw Error("Unknown flow statement.")},s.Dart.math={},s.Dart.addReservedWords("Math"),s.Dart.math_number=function(t){var r=1/0==(t=Number(t.getFieldValue("NUM")))?(t="double.infinity",s.Dart.ORDER_UNARY_POSTFIX):-1/0==t?(t="-double.infinity",s.Dart.ORDER_UNARY_PREFIX):t<0?s.Dart.ORDER_UNARY_PREFIX:s.Dart.ORDER_ATOMIC;return[t,r]},s.Dart.math_arithmetic=function(t){var r=(a={ADD:[" + ",s.Dart.ORDER_ADDITIVE],MINUS:[" - ",s.Dart.ORDER_ADDITIVE],MULTIPLY:[" * ",s.Dart.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",s.Dart.ORDER_MULTIPLICATIVE],POWER:[null,s.Dart.ORDER_NONE]}[t.getFieldValue("OP")])[0],a=a[1],e=s.Dart.valueToCode(t,"A",a)||"0";return t=s.Dart.valueToCode(t,"B",a)||"0",r?[e+r+t,a]:(s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",["Math.pow("+e+", "+t+")",s.Dart.ORDER_UNARY_POSTFIX])},s.Dart.math_single=function(t){var r=t.getFieldValue("OP");if("NEG"==r)return"-"==(t=s.Dart.valueToCode(t,"NUM",s.Dart.ORDER_UNARY_PREFIX)||"0")[0]&&(t=" "+t),["-"+t,s.Dart.ORDER_UNARY_PREFIX];switch(s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",t="ABS"==r||"ROUND"==r.substring(0,5)?s.Dart.valueToCode(t,"NUM",s.Dart.ORDER_UNARY_POSTFIX)||"0":"SIN"==r||"COS"==r||"TAN"==r?s.Dart.valueToCode(t,"NUM",s.Dart.ORDER_MULTIPLICATIVE)||"0":s.Dart.valueToCode(t,"NUM",s.Dart.ORDER_NONE)||"0",r){case"ABS":var a=t+".abs()";break;case"ROOT":a="Math.sqrt("+t+")";break;case"LN":a="Math.log("+t+")";break;case"EXP":a="Math.exp("+t+")";break;case"POW10":a="Math.pow(10,"+t+")";break;case"ROUND":a=t+".round()";break;case"ROUNDUP":a=t+".ceil()";break;case"ROUNDDOWN":a=t+".floor()";break;case"SIN":a="Math.sin("+t+" / 180 * Math.pi)";break;case"COS":a="Math.cos("+t+" / 180 * Math.pi)";break;case"TAN":a="Math.tan("+t+" / 180 * Math.pi)"}if(a)return[a,s.Dart.ORDER_UNARY_POSTFIX];switch(r){case"LOG10":a="Math.log("+t+") / Math.log(10)";break;case"ASIN":a="Math.asin("+t+") / Math.pi * 180";break;case"ACOS":a="Math.acos("+t+") / Math.pi * 180";break;case"ATAN":a="Math.atan("+t+") / Math.pi * 180";break;default:throw Error("Unknown math operator: "+r)}return[a,s.Dart.ORDER_MULTIPLICATIVE]},s.Dart.math_constant=function(t){var r={PI:["Math.pi",s.Dart.ORDER_UNARY_POSTFIX],E:["Math.e",s.Dart.ORDER_UNARY_POSTFIX],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",s.Dart.ORDER_MULTIPLICATIVE],SQRT2:["Math.sqrt2",s.Dart.ORDER_UNARY_POSTFIX],SQRT1_2:["Math.sqrt1_2",s.Dart.ORDER_UNARY_POSTFIX],INFINITY:["double.infinity",s.Dart.ORDER_ATOMIC]};return"INFINITY"!=(t=t.getFieldValue("CONSTANT"))&&(s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;"),r[t]},s.Dart.math_number_property=function(t){var r=s.Dart.valueToCode(t,"NUMBER_TO_CHECK",s.Dart.ORDER_MULTIPLICATIVE);if(!r)return["false",s.Dart.ORDER_ATOMIC];var a=t.getFieldValue("PROPERTY");if("PRIME"==a)return s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",[s.Dart.provideFunction_("math_isPrime",["bool "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(n) {","  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods","  if (n == 2 || n == 3) {","    return true;","  }","  // False if n is null, negative, is 1, or not whole.","  // And false if n is divisible by 2 or 3.","  if (n == null || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {","    return false;","  }","  // Check all the numbers of form 6k +/- 1, up to sqrt(n).","  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {","    if (n % (x - 1) == 0 || n % (x + 1) == 0) {","      return false;","    }","  }","  return true;","}"])+"("+r+")",s.Dart.ORDER_UNARY_POSTFIX];switch(a){case"EVEN":var e=r+" % 2 == 0";break;case"ODD":e=r+" % 2 == 1";break;case"WHOLE":e=r+" % 1 == 0";break;case"POSITIVE":e=r+" > 0";break;case"NEGATIVE":e=r+" < 0";break;case"DIVISIBLE_BY":if(!(t=s.Dart.valueToCode(t,"DIVISOR",s.Dart.ORDER_MULTIPLICATIVE)))return["false",s.Dart.ORDER_ATOMIC];e=r+" % "+t+" == 0"}return[e,s.Dart.ORDER_EQUALITY]},s.Dart.math_change=function(t){var r=s.Dart.valueToCode(t,"DELTA",s.Dart.ORDER_ADDITIVE)||"0";return(t=s.Dart.variableDB_.getName(t.getFieldValue("VAR"),s.VARIABLE_CATEGORY_NAME))+" = ("+t+" is num ? "+t+" : 0) + "+r+";\n"},s.Dart.math_round=s.Dart.math_single,s.Dart.math_trig=s.Dart.math_single,s.Dart.math_on_list=function(t){var r=t.getFieldValue("OP");switch(t=s.Dart.valueToCode(t,"LIST",s.Dart.ORDER_NONE)||"[]",r){case"SUM":r=(r=s.Dart.provideFunction_("math_sum",["num "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List<num> myList) {","  num sumVal = 0;","  myList.forEach((num entry) {sumVal += entry;});","  return sumVal;","}"]))+"("+t+")";break;case"MIN":s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",r=(r=s.Dart.provideFunction_("math_min",["num "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List<num> myList) {","  if (myList.isEmpty) return null;","  num minVal = myList[0];","  myList.forEach((num entry) {minVal = Math.min(minVal, entry);});","  return minVal;","}"]))+"("+t+")";break;case"MAX":s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",r=(r=s.Dart.provideFunction_("math_max",["num "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List<num> myList) {","  if (myList.isEmpty) return null;","  num maxVal = myList[0];","  myList.forEach((num entry) {maxVal = Math.max(maxVal, entry);});","  return maxVal;","}"]))+"("+t+")";break;case"AVERAGE":r=(r=s.Dart.provideFunction_("math_mean",["num "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List myList) {","  // First filter list for numbers only.","  List localList = new List.from(myList);","  localList.removeWhere((a) => a is! num);","  if (localList.isEmpty) return null;","  num sumVal = 0;","  localList.forEach((var entry) {sumVal += entry;});","  return sumVal / localList.length;","}"]))+"("+t+")";break;case"MEDIAN":r=(r=s.Dart.provideFunction_("math_median",["num "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List myList) {","  // First filter list for numbers only, then sort, then return middle value","  // or the average of two middle values if list has an even number of elements.","  List localList = new List.from(myList);","  localList.removeWhere((a) => a is! num);","  if (localList.isEmpty) return null;","  localList.sort((a, b) => (a - b));","  int index = localList.length ~/ 2;","  if (localList.length % 2 == 1) {","    return localList[index];","  } else {","    return (localList[index - 1] + localList[index]) / 2;","  }","}"]))+"("+t+")";break;case"MODE":s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",r=(r=s.Dart.provideFunction_("math_modes",["List "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List values) {","  List modes = [];","  List counts = [];","  int maxCount = 0;","  for (int i = 0; i < values.length; i++) {","    var value = values[i];","    bool found = false;","    int thisCount;","    for (int j = 0; j < counts.length; j++) {","      if (counts[j][0] == value) {","        thisCount = ++counts[j][1];","        found = true;","        break;","      }","    }","    if (!found) {","      counts.add([value, 1]);","      thisCount = 1;","    }","    maxCount = Math.max(thisCount, maxCount);","  }","  for (int j = 0; j < counts.length; j++) {","    if (counts[j][1] == maxCount) {","        modes.add(counts[j][0]);","    }","  }","  return modes;","}"]))+"("+t+")";break;case"STD_DEV":s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",r=(r=s.Dart.provideFunction_("math_standard_deviation",["num "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List myList) {","  // First filter list for numbers only.","  List numbers = new List.from(myList);","  numbers.removeWhere((a) => a is! num);","  if (numbers.isEmpty) return null;","  num n = numbers.length;","  num sum = 0;","  numbers.forEach((x) => sum += x);","  num mean = sum / n;","  num sumSquare = 0;","  numbers.forEach((x) => sumSquare += Math.pow(x - mean, 2));","  return Math.sqrt(sumSquare / n);","}"]))+"("+t+")";break;case"RANDOM":s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",r=(r=s.Dart.provideFunction_("math_random_item",["dynamic "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(List myList) {","  int x = new Math.Random().nextInt(myList.length);","  return myList[x];","}"]))+"("+t+")";break;default:throw Error("Unknown operator: "+r)}return[r,s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.math_modulo=function(t){return[(s.Dart.valueToCode(t,"DIVIDEND",s.Dart.ORDER_MULTIPLICATIVE)||"0")+" % "+(t=s.Dart.valueToCode(t,"DIVISOR",s.Dart.ORDER_MULTIPLICATIVE)||"0"),s.Dart.ORDER_MULTIPLICATIVE]},s.Dart.math_constrain=function(t){return s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",["Math.min(Math.max("+(s.Dart.valueToCode(t,"VALUE",s.Dart.ORDER_NONE)||"0")+", "+(s.Dart.valueToCode(t,"LOW",s.Dart.ORDER_NONE)||"0")+"), "+(t=s.Dart.valueToCode(t,"HIGH",s.Dart.ORDER_NONE)||"double.infinity")+")",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.math_random_int=function(t){s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var r=s.Dart.valueToCode(t,"FROM",s.Dart.ORDER_NONE)||"0";return t=s.Dart.valueToCode(t,"TO",s.Dart.ORDER_NONE)||"0",[s.Dart.provideFunction_("math_random_int",["int "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(num a, num b) {","  if (a > b) {","    // Swap a and b to ensure a is smaller.","    num c = a;","    a = b;","    b = c;","  }","  return new Math.Random().nextInt(b - a + 1) + a;","}"])+"("+r+", "+t+")",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.math_random_float=function(t){return s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",["new Math.Random().nextDouble()",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.math_atan2=function(t){s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;";var r=s.Dart.valueToCode(t,"X",s.Dart.ORDER_NONE)||"0";return["Math.atan2("+(s.Dart.valueToCode(t,"Y",s.Dart.ORDER_NONE)||"0")+", "+r+") / Math.pi * 180",s.Dart.ORDER_MULTIPLICATIVE]},s.Dart.procedures={},s.Dart.procedures_defreturn=function(t){var r=s.Dart.variableDB_.getName(t.getFieldValue("NAME"),s.PROCEDURE_CATEGORY_NAME),a="";s.Dart.STATEMENT_PREFIX&&(a+=s.Dart.injectId(s.Dart.STATEMENT_PREFIX,t)),s.Dart.STATEMENT_SUFFIX&&(a+=s.Dart.injectId(s.Dart.STATEMENT_SUFFIX,t)),a=a&&s.Dart.prefixLines(a,s.Dart.INDENT);var e="";s.Dart.INFINITE_LOOP_TRAP&&(e=s.Dart.prefixLines(s.Dart.injectId(s.Dart.INFINITE_LOOP_TRAP,t),s.Dart.INDENT));for(var n=s.Dart.statementToCode(t,"STACK"),i=s.Dart.valueToCode(t,"RETURN",s.Dart.ORDER_NONE)||"",D=n&&i?a:"",o=(i=i&&s.Dart.INDENT+"return "+i+";\n")?"dynamic":"void",_=[],R=t.getVars(),E=0;E<R.length;E++)_[E]=s.Dart.variableDB_.getName(R[E],s.VARIABLE_CATEGORY_NAME);return a=o+" "+r+"("+_.join(", ")+") {\n"+a+e+n+D+i+"}",a=s.Dart.scrub_(t,a),s.Dart.definitions_["%"+r]=a,null},s.Dart.procedures_defnoreturn=s.Dart.procedures_defreturn,s.Dart.procedures_callreturn=function(t){for(var r=s.Dart.variableDB_.getName(t.getFieldValue("NAME"),s.PROCEDURE_CATEGORY_NAME),a=[],e=t.getVars(),n=0;n<e.length;n++)a[n]=s.Dart.valueToCode(t,"ARG"+n,s.Dart.ORDER_NONE)||"null";return[r+"("+a.join(", ")+")",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.procedures_callnoreturn=function(t){return s.Dart.procedures_callreturn(t)[0]+";\n"},s.Dart.procedures_ifreturn=function(t){var r="if ("+(s.Dart.valueToCode(t,"CONDITION",s.Dart.ORDER_NONE)||"false")+") {\n";return s.Dart.STATEMENT_SUFFIX&&(r+=s.Dart.prefixLines(s.Dart.injectId(s.Dart.STATEMENT_SUFFIX,t),s.Dart.INDENT)),t.hasReturnValue_?(t=s.Dart.valueToCode(t,"VALUE",s.Dart.ORDER_NONE)||"null",r+=s.Dart.INDENT+"return "+t+";\n"):r+=s.Dart.INDENT+"return;\n",r+"}\n"},s.Dart.texts={},s.Dart.addReservedWords("Html,Math"),s.Dart.text=function(t){return[s.Dart.quote_(t.getFieldValue("TEXT")),s.Dart.ORDER_ATOMIC]},s.Dart.text_multiline=function(t){var r=-1!=(t=s.Dart.multiline_quote_(t.getFieldValue("TEXT"))).indexOf("+")?s.Dart.ORDER_ADDITIVE:s.Dart.ORDER_ATOMIC;return[t,r]},s.Dart.text_join=function(t){switch(t.itemCount_){case 0:return["''",s.Dart.ORDER_ATOMIC];case 1:return[(s.Dart.valueToCode(t,"ADD0",s.Dart.ORDER_UNARY_POSTFIX)||"''")+".toString()",s.Dart.ORDER_UNARY_POSTFIX];default:for(var r=Array(t.itemCount_),a=0;a<t.itemCount_;a++)r[a]=s.Dart.valueToCode(t,"ADD"+a,s.Dart.ORDER_NONE)||"''";return[t="["+r.join(",")+"].join()",s.Dart.ORDER_UNARY_POSTFIX]}},s.Dart.text_append=function(t){var r=s.Dart.variableDB_.getName(t.getFieldValue("VAR"),s.VARIABLE_CATEGORY_NAME);return r+" = ["+r+", "+(t=s.Dart.valueToCode(t,"TEXT",s.Dart.ORDER_NONE)||"''")+"].join();\n"},s.Dart.text_length=function(t){return[(s.Dart.valueToCode(t,"VALUE",s.Dart.ORDER_UNARY_POSTFIX)||"''")+".length",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.text_isEmpty=function(t){return[(s.Dart.valueToCode(t,"VALUE",s.Dart.ORDER_UNARY_POSTFIX)||"''")+".isEmpty",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.text_indexOf=function(t){var r="FIRST"==t.getFieldValue("END")?"indexOf":"lastIndexOf",a=s.Dart.valueToCode(t,"FIND",s.Dart.ORDER_NONE)||"''",r=(s.Dart.valueToCode(t,"VALUE",s.Dart.ORDER_UNARY_POSTFIX)||"''")+"."+r+"("+a+")";return t.workspace.options.oneBasedIndex?[r+" + 1",s.Dart.ORDER_ADDITIVE]:[r,s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.text_charAt=function(t){var r=t.getFieldValue("WHERE")||"FROM_START",a=s.Dart.valueToCode(t,"VALUE","FIRST"==r||"FROM_START"==r?s.Dart.ORDER_UNARY_POSTFIX:s.Dart.ORDER_NONE)||"''";switch(r){case"FIRST":return[a+"[0]",s.Dart.ORDER_UNARY_POSTFIX];case"FROM_START":return[a+"["+(t=s.Dart.getAdjusted(t,"AT"))+"]",s.Dart.ORDER_UNARY_POSTFIX];case"LAST":case"FROM_END":return t=s.Dart.getAdjusted(t,"AT",1),[(r=s.Dart.provideFunction_("text_get_from_end",["String "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String text, num x) {","  return text[text.length - x];","}"]))+"("+a+", "+t+")",s.Dart.ORDER_UNARY_POSTFIX];case"RANDOM":return s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",[(r=s.Dart.provideFunction_("text_random_letter",["String "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String text) {","  int x = new Math.Random().nextInt(text.length);","  return text[x];","}"]))+"("+a+")",s.Dart.ORDER_UNARY_POSTFIX]}throw Error("Unhandled option (text_charAt).")},s.Dart.text_getSubstring=function(t){var r=t.getFieldValue("WHERE1"),a=t.getFieldValue("WHERE2"),e="FROM_END"!=r&&"FROM_START"==a,n=s.Dart.valueToCode(t,"STRING",e?s.Dart.ORDER_UNARY_POSTFIX:s.Dart.ORDER_NONE)||"''";if("FIRST"==r&&"LAST"==a)return[n,s.Dart.ORDER_NONE];if(n.match(/^'?\w+'?$/)||e){switch(r){case"FROM_START":e=s.Dart.getAdjusted(t,"AT1");break;case"FROM_END":e=n+".length - "+(e=s.Dart.getAdjusted(t,"AT1",1,!1,s.Dart.ORDER_ADDITIVE));break;case"FIRST":e="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(a){case"FROM_START":var i=s.Dart.getAdjusted(t,"AT2",1);break;case"FROM_END":i=n+".length - "+(i=s.Dart.getAdjusted(t,"AT2",0,!1,s.Dart.ORDER_ADDITIVE));break;case"LAST":break;default:throw Error("Unhandled option (text_getSubstring).")}t="LAST"==a?n+".substring("+e+")":n+".substring("+e+", "+i+")"}else e=s.Dart.getAdjusted(t,"AT1"),i=s.Dart.getAdjusted(t,"AT2"),t=s.Dart.provideFunction_("text_get_substring",["String "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String text, String where1, num at1, String where2, num at2) {","  int getAt(String where, num at) {","    if (where == 'FROM_END') {","      at = text.length - 1 - at;","    } else if (where == 'FIRST') {","      at = 0;","    } else if (where == 'LAST') {","      at = text.length - 1;","    } else if (where != 'FROM_START') {","      throw 'Unhandled option (text_getSubstring).';","    }","    return at;","  }","  at1 = getAt(where1, at1);","  at2 = getAt(where2, at2) + 1;","  return text.substring(at1, at2);","}"])+"("+n+", '"+r+"', "+e+", '"+a+"', "+i+")";return[t,s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.text_changeCase=function(t){var r={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[t.getFieldValue("CASE")];return t=s.Dart.valueToCode(t,"TEXT",r?s.Dart.ORDER_UNARY_POSTFIX:s.Dart.ORDER_NONE)||"''",[r?t+r:s.Dart.provideFunction_("text_toTitleCase",["String "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String str) {","  RegExp exp = new RegExp(r'\\b');","  List<String> list = str.split(exp);","  final title = new StringBuffer();","  for (String part in list) {","    if (part.length > 0) {","      title.write(part[0].toUpperCase());","      if (part.length > 0) {","        title.write(part.substring(1).toLowerCase());","      }","    }","  }","  return title.toString();","}"])+"("+t+")",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.text_trim=function(t){var r={LEFT:".replaceFirst(new RegExp(r'^\\s+'), '')",RIGHT:".replaceFirst(new RegExp(r'\\s+$'), '')",BOTH:".trim()"}[t.getFieldValue("MODE")];return[(s.Dart.valueToCode(t,"TEXT",s.Dart.ORDER_UNARY_POSTFIX)||"''")+r,s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.text_print=function(t){return"print("+(s.Dart.valueToCode(t,"TEXT",s.Dart.ORDER_NONE)||"''")+");\n"},s.Dart.text_prompt_ext=function(t){s.Dart.definitions_.import_dart_html="import 'dart:html' as Html;";var r="Html.window.prompt("+(t.getField("TEXT")?s.Dart.quote_(t.getFieldValue("TEXT")):s.Dart.valueToCode(t,"TEXT",s.Dart.ORDER_NONE)||"''")+", '')";return"NUMBER"==t.getFieldValue("TYPE")&&(s.Dart.definitions_.import_dart_math="import 'dart:math' as Math;",r="Math.parseDouble("+r+")"),[r,s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.text_prompt=s.Dart.text_prompt_ext,s.Dart.text_count=function(t){var r=s.Dart.valueToCode(t,"TEXT",s.Dart.ORDER_NONE)||"''";return t=s.Dart.valueToCode(t,"SUB",s.Dart.ORDER_NONE)||"''",[s.Dart.provideFunction_("text_count",["int "+s.Dart.FUNCTION_NAME_PLACEHOLDER_+"(String haystack, String needle) {","  if (needle.length == 0) {","    return haystack.length + 1;","  }","  int index = 0;","  int count = 0;","  while (index != -1) {","    index = haystack.indexOf(needle, index);","    if (index != -1) {","      count++;","     index += needle.length;","    }","  }","  return count;","}"])+"("+r+", "+t+")",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.text_replace=function(t){return[(s.Dart.valueToCode(t,"TEXT",s.Dart.ORDER_UNARY_POSTFIX)||"''")+".replaceAll("+(s.Dart.valueToCode(t,"FROM",s.Dart.ORDER_NONE)||"''")+", "+(t=s.Dart.valueToCode(t,"TO",s.Dart.ORDER_NONE)||"''")+")",s.Dart.ORDER_UNARY_POSTFIX]},s.Dart.text_reverse=function(t){return["new String.fromCharCodes("+(s.Dart.valueToCode(t,"TEXT",s.Dart.ORDER_UNARY_POSTFIX)||"''")+".runes.toList().reversed)",s.Dart.ORDER_UNARY_PREFIX]},s.Dart.variables={},s.Dart.variables_get=function(t){return[s.Dart.variableDB_.getName(t.getFieldValue("VAR"),s.VARIABLE_CATEGORY_NAME),s.Dart.ORDER_ATOMIC]},s.Dart.variables_set=function(t){var r=s.Dart.valueToCode(t,"VALUE",s.Dart.ORDER_ASSIGNMENT)||"0";return s.Dart.variableDB_.getName(t.getFieldValue("VAR"),s.VARIABLE_CATEGORY_NAME)+" = "+r+";\n"},s.Dart.variablesDynamic={},s.Dart.variables_get_dynamic=s.Dart.variables_get,s.Dart.variables_set_dynamic=s.Dart.variables_set,s.Dart});