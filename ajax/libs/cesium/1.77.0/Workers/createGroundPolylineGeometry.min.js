define(["./when-54c2dc71","./Check-6c0211bc","./Math-fc8cecf5","./Cartesian2-bddc1162","./Transforms-6f81ad4c","./RuntimeError-2109023a","./WebGLConstants-76bb35d1","./ComponentDatatype-6d99a1ee","./GeometryAttribute-700c1da0","./EncodedCartesian3-4df2eabb","./IntersectionTests-7f3bcd5c","./Plane-b6058d9b","./WebMercatorProjection-df58d479","./arrayRemoveDuplicates-ebc732b0","./ArcType-dc1c5aee","./EllipsoidRhumbLine-c704bf4c","./EllipsoidGeodesic-30fae80b"],function(B,e,_e,be,Oe,a,t,Pe,ke,Ae,j,r,n,G,V,Y,M){"use strict";function i(e){e=B.defaultValue(e,B.defaultValue.EMPTY_OBJECT),this._ellipsoid=B.defaultValue(e.ellipsoid,be.Ellipsoid.WGS84),this._rectangle=B.defaultValue(e.rectangle,be.Rectangle.MAX_VALUE),this._projection=new Oe.GeographicProjection(this._ellipsoid),this._numberOfLevelZeroTilesX=B.defaultValue(e.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=B.defaultValue(e.numberOfLevelZeroTilesY,1)}Object.defineProperties(i.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),i.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},i.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},i.prototype.rectangleToNativeRectangle=function(e,a){var t=_e.CesiumMath.toDegrees(e.west),n=_e.CesiumMath.toDegrees(e.south),i=_e.CesiumMath.toDegrees(e.east),e=_e.CesiumMath.toDegrees(e.north);return B.defined(a)?(a.west=t,a.south=n,a.east=i,a.north=e,a):new be.Rectangle(t,n,i,e)},i.prototype.tileXYToNativeRectangle=function(e,a,t,n){return(n=this.tileXYToRectangle(e,a,t,n)).west=_e.CesiumMath.toDegrees(n.west),n.south=_e.CesiumMath.toDegrees(n.south),n.east=_e.CesiumMath.toDegrees(n.east),n.north=_e.CesiumMath.toDegrees(n.north),n},i.prototype.tileXYToRectangle=function(e,a,t,n){var i=this._rectangle,r=this.getNumberOfXTilesAtLevel(t),s=this.getNumberOfYTilesAtLevel(t),r=e*(t=i.width/r)+i.west,e=(e+1)*t+i.west,t=i.height/s,s=i.north-a*t,t=i.north-(a+1)*t;return B.defined(n)||(n=new be.Rectangle(r,t,e,s)),n.west=r,n.south=t,n.east=e,n.north=s,n},i.prototype.positionToTileXY=function(e,a,t){var n=this._rectangle;if(be.Rectangle.contains(n,e)){var i=this.getNumberOfXTilesAtLevel(a),r=this.getNumberOfYTilesAtLevel(a),s=n.width/i,o=n.height/r,a=e.longitude;return n.east<n.west&&(a+=_e.CesiumMath.TWO_PI),i<=(s=(a-n.west)/s|0)&&(s=i-1),r<=(o=(n.north-e.latitude)/o|0)&&(o=r-1),B.defined(t)?(t.x=s,t.y=o,t):new be.Cartesian2(s,o)}};var s=new be.Cartesian3,o=new be.Cartesian3,l=new be.Cartographic,u=new be.Cartesian3,c=new be.Cartesian3,C=new Oe.BoundingSphere,d=new i,p=[new be.Cartographic,new be.Cartographic,new be.Cartographic,new be.Cartographic],h=new be.Cartesian2,Le={};function g(e){be.Cartographic.fromRadians(e.east,e.north,0,p[0]),be.Cartographic.fromRadians(e.west,e.north,0,p[1]),be.Cartographic.fromRadians(e.east,e.south,0,p[2]),be.Cartographic.fromRadians(e.west,e.south,0,p[3]);for(var a=0,t=0,n=0,i=0,r=Le._terrainHeightsMaxLevel,s=0;s<=r;++s){for(var o=!1,l=0;l<4;++l){var u=p[l];if(d.positionToTileXY(u,s,h),0===l)n=h.x,i=h.y;else if(n!==h.x||i!==h.y){o=!0;break}}if(o)break;a=n,t=i}if(0!==s)return{x:a,y:t,level:r<s?r:s-1}}Le.initialize=function(){var e=Le._initPromise;return B.defined(e)?e:(e=Oe.Resource.fetchJson(Oe.buildModuleUrl("Assets/approximateTerrainHeights.json")).then(function(e){Le._terrainHeights=e}),Le._initPromise=e)},Le.getMinimumMaximumHeights=function(e,a){a=B.defaultValue(a,be.Ellipsoid.WGS84);var t=g(e),n=Le._defaultMinTerrainHeight,i=Le._defaultMaxTerrainHeight;return B.defined(t)&&(t=t.level+"-"+t.x+"-"+t.y,t=Le._terrainHeights[t],B.defined(t)&&(n=t[0],i=t[1]),a.cartographicToCartesian(be.Rectangle.northeast(e,l),s),a.cartographicToCartesian(be.Rectangle.southwest(e,l),o),be.Cartesian3.midpoint(o,s,u),a=a.scaleToGeodeticSurface(u,c),n=B.defined(a)?(a=be.Cartesian3.distance(u,a),Math.min(n,-a)):Le._defaultMinTerrainHeight),{minimumTerrainHeight:n=Math.max(Le._defaultMinTerrainHeight,n),maximumTerrainHeight:i}},Le.getBoundingSphere=function(e,a){a=B.defaultValue(a,be.Ellipsoid.WGS84);var t=g(e),n=Le._defaultMaxTerrainHeight;B.defined(t)&&(i=t.level+"-"+t.x+"-"+t.y,i=Le._terrainHeights[i],B.defined(i)&&(n=i[1]));var i=Oe.BoundingSphere.fromRectangle3D(e,a,0);return Oe.BoundingSphere.fromRectangle3D(e,a,n,C),Oe.BoundingSphere.union(i,C,i)},Le._terrainHeightsMaxLevel=6,Le._defaultMaxTerrainHeight=9e3,Le._defaultMinTerrainHeight=-1e5,Le._terrainHeights=void 0,Le._initPromise=void 0,Object.defineProperties(Le,{initialized:{get:function(){return B.defined(Le._terrainHeights)}}});var F=[Oe.GeographicProjection,n.WebMercatorProjection],f=F.length,Se=Math.cos(_e.CesiumMath.toRadians(30)),m=Math.cos(_e.CesiumMath.toRadians(150)),q=0,X=1e3;function w(e){var a=(e=B.defaultValue(e,B.defaultValue.EMPTY_OBJECT)).positions;this.width=B.defaultValue(e.width,1),this._positions=a,this.granularity=B.defaultValue(e.granularity,9999),this.loop=B.defaultValue(e.loop,!1),this.arcType=B.defaultValue(e.arcType,V.ArcType.GEODESIC),this._ellipsoid=be.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(w.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+be.Ellipsoid.packedLength+1+1}}}),w.setProjectionAndEllipsoid=function(e,a){for(var t=0,n=0;n<f;n++)if(a instanceof F[n]){t=n;break}e._projectionIndex=t,e._ellipsoid=a.ellipsoid};var y=new be.Cartesian3,v=new be.Cartesian3,T=new be.Cartesian3;function W(e,a,t,n,i){var r=Z(n,e,0,y),t=Z(n,e,t,v),a=Z(n,a,0,T),t=Ie(t,r,v),r=Ie(a,r,T);return be.Cartesian3.cross(r,t,i),be.Cartesian3.normalize(i,i)}var E=new be.Cartographic,_=new be.Cartesian3,b=new be.Cartesian3,O=new be.Cartesian3;function U(e,a,t,n,i,r,s,o,l,u,c){var C;if(0!==i&&(r===V.ArcType.GEODESIC?C=new M.EllipsoidGeodesic(e,a,s):r===V.ArcType.RHUMB&&(C=new Y.EllipsoidRhumbLine(e,a,s)),!((r=C.surfaceDistance)<i)))for(var d=W(e,a,n,s,O),p=r/(i=Math.ceil(r/i)),h=p,g=i-1,f=o.length,m=0;m<g;m++){var w=C.interpolateUsingSurfaceDistance(h,E),y=Z(s,w,t,_),v=Z(s,w,n,b);be.Cartesian3.pack(d,o,f),be.Cartesian3.pack(y,l,f),be.Cartesian3.pack(v,u,f),c.push(w.latitude),c.push(w.longitude),f+=3,h+=p}}var P=new be.Cartographic;function Z(e,a,t,n){return be.Cartographic.clone(a,P),P.height=t,be.Cartographic.toCartesian(P,e,n)}function Ie(e,a,t){return be.Cartesian3.subtract(e,a,t),be.Cartesian3.normalize(t,t),t}function k(e,a,t,n){return n=Ie(e,a,n),n=be.Cartesian3.cross(n,t,n),n=be.Cartesian3.normalize(n,n),be.Cartesian3.cross(t,n,n)}w.pack=function(e,a,t){var n=B.defaultValue(t,0),i=e._positions,r=i.length;a[n++]=r;for(var s=0;s<r;++s){var o=i[s];be.Cartesian3.pack(o,a,n),n+=3}return a[n++]=e.granularity,a[n++]=e.loop?1:0,a[n++]=e.arcType,be.Ellipsoid.pack(e._ellipsoid,a,n),n+=be.Ellipsoid.packedLength,a[n++]=e._projectionIndex,a[n++]=e._scene3DOnly?1:0,a},w.unpack=function(e,a,t){for(var n=B.defaultValue(a,0),i=e[n++],r=new Array(i),s=0;s<i;s++)r[s]=be.Cartesian3.unpack(e,n),n+=3;var o=e[n++],l=1===e[n++],u=e[n++],c=be.Ellipsoid.unpack(e,n);n+=be.Ellipsoid.packedLength;var C=e[n++],a=1===e[n++];return B.defined(t)||(t=new w({positions:r})),t._positions=r,t.granularity=o,t.loop=l,t.arcType=u,t._ellipsoid=c,t._projectionIndex=C,t._scene3DOnly=a,t};var A=new be.Cartesian3,L=new be.Cartesian3,S=new be.Cartesian3,I=new be.Cartesian3;function J(e,a,t,n,i){return e=k(e,a,t=Ie(t,a,I),A),a=k(n,a,t,L),_e.CesiumMath.equalsEpsilon(be.Cartesian3.dot(e,a),-1,_e.CesiumMath.EPSILON5)?(i=be.Cartesian3.cross(t,e,i),be.Cartesian3.normalize(i,i)):(i=be.Cartesian3.add(a,e,i),i=be.Cartesian3.normalize(i,i),t=be.Cartesian3.cross(t,i,S),be.Cartesian3.dot(a,t)<0&&(i=be.Cartesian3.negate(i,i)),i)}var Q=r.Plane.fromPointNormal(be.Cartesian3.ZERO,be.Cartesian3.UNIT_Y),K=new be.Cartesian3,$=new be.Cartesian3,ee=new be.Cartesian3,ae=new be.Cartesian3,te=new be.Cartesian3,ne=new be.Cartesian3,ie=new be.Cartographic,re=new be.Cartographic,se=new be.Cartographic;w.createGeometry=function(e){var a,t,n,i,r=!e._scene3DOnly,s=e.loop,o=e._ellipsoid,l=e.granularity,u=e.arcType,c=new F[e._projectionIndex](o),C=q,d=X,p=e._positions,h=p.length;2===h&&(s=!1);for(var g,f,m,w=new Y.EllipsoidRhumbLine(void 0,void 0,o),y=[p[0]],v=0;v<h-1;v++)a=p[v],t=p[v+1],g=j.IntersectionTests.lineSegmentPlane(a,t,Q,ne),!B.defined(g)||be.Cartesian3.equalsEpsilon(g,a,_e.CesiumMath.EPSILON7)||be.Cartesian3.equalsEpsilon(g,t,_e.CesiumMath.EPSILON7)||(e.arcType===V.ArcType.GEODESIC?y.push(be.Cartesian3.clone(g)):e.arcType===V.ArcType.RHUMB&&(m=o.cartesianToCartographic(g,ie).longitude,n=o.cartesianToCartographic(a,ie),i=o.cartesianToCartographic(t,re),w.setEndPoints(n,i),f=w.findIntersectionWithLongitude(m,se),g=o.cartographicToCartesian(f,ne),!B.defined(g)||be.Cartesian3.equalsEpsilon(g,a,_e.CesiumMath.EPSILON7)||be.Cartesian3.equalsEpsilon(g,t,_e.CesiumMath.EPSILON7)||y.push(be.Cartesian3.clone(g)))),y.push(t);s&&(a=p[h-1],t=p[0],g=j.IntersectionTests.lineSegmentPlane(a,t,Q,ne),!B.defined(g)||be.Cartesian3.equalsEpsilon(g,a,_e.CesiumMath.EPSILON7)||be.Cartesian3.equalsEpsilon(g,t,_e.CesiumMath.EPSILON7)||(e.arcType===V.ArcType.GEODESIC?y.push(be.Cartesian3.clone(g)):e.arcType===V.ArcType.RHUMB&&(m=o.cartesianToCartographic(g,ie).longitude,n=o.cartesianToCartographic(a,ie),i=o.cartesianToCartographic(t,re),w.setEndPoints(n,i),f=w.findIntersectionWithLongitude(m,se),g=o.cartographicToCartesian(f,ne),!B.defined(g)||be.Cartesian3.equalsEpsilon(g,a,_e.CesiumMath.EPSILON7)||be.Cartesian3.equalsEpsilon(g,t,_e.CesiumMath.EPSILON7)||y.push(be.Cartesian3.clone(g)))));for(var M=y.length,T=new Array(M),v=0;v<M;v++){var E=be.Cartographic.fromCartesian(y[v],o);E.height=0,T[v]=E}if(!((M=(T=G.arrayRemoveDuplicates(T,be.Cartographic.equalsEpsilon)).length)<2)){var _=[],b=[],O=[],P=[],k=K,A=$,L=ee,S=ae,I=te,x=T[0],N=T[1],k=Z(o,T[M-1],C,k),S=Z(o,N,C,S);for(A=Z(o,x,C,A),L=Z(o,x,d,L),I=s?J(k,A,L,S,I):W(x,N,d,o,I),be.Cartesian3.pack(I,b,0),be.Cartesian3.pack(A,O,0),be.Cartesian3.pack(L,P,0),_.push(x.latitude),_.push(x.longitude),U(x,N,C,d,l,u,o,b,O,P,_),v=1;v<M-1;++v){k=be.Cartesian3.clone(A,k),A=be.Cartesian3.clone(S,A);var R=T[v];Z(o,R,d,L),Z(o,T[v+1],C,S),J(k,A,L,S,I),H=b.length,be.Cartesian3.pack(I,b,H),be.Cartesian3.pack(A,O,H),be.Cartesian3.pack(L,P,H),_.push(R.latitude),_.push(R.longitude),U(T[v],T[v+1],C,d,l,u,o,b,O,P,_)}var D=T[M-1],z=T[M-2],A=Z(o,D,C,A),L=Z(o,D,d,L),I=s?(N=T[0],J(k=Z(o,z,C,k),A,L,S=Z(o,N,C,S),I)):W(z,D,d,o,I),H=b.length;if(be.Cartesian3.pack(I,b,H),be.Cartesian3.pack(A,O,H),be.Cartesian3.pack(L,P,H),_.push(D.latitude),_.push(D.longitude),s){for(U(D,x,C,d,l,u,o,b,O,P,_),H=b.length,v=0;v<3;++v)b[H+v]=b[v],O[H+v]=O[v],P[H+v]=P[v];_.push(x.latitude),_.push(x.longitude)}return function(e,a,t,n,i,r,s){var o,l,u,c,C=a._ellipsoid,d=t.length/3-1,p=8*d,h=4*p,g=new(65535<p?Uint32Array:Uint16Array)(36*d),f=new Float64Array(3*p),m=new Float32Array(h),w=new Float32Array(h),y=new Float32Array(h),v=new Float32Array(h),M=new Float32Array(h);s&&(o=new Float32Array(h),l=new Float32Array(h),u=new Float32Array(h),c=new Float32Array(2*p));var T=r.length/2,E=0,_=ze;_.height=0;var b=He;b.height=0;var O=Be,P=je;if(s)for(S=0,I=1;I<T;I++)_.latitude=r[S],_.longitude=r[S+1],b.latitude=r[S+2],b.longitude=r[S+3],O=a.project(_,O),P=a.project(b,P),E+=be.Cartesian3.distance(O,P),S+=2;for(var k,A=n.length/3,P=be.Cartesian3.unpack(n,0,P),L=0,S=3,I=1;I<A;I++)O=be.Cartesian3.clone(P,O),P=be.Cartesian3.unpack(n,S,P),L+=be.Cartesian3.distance(O,P),S+=3;var x=0,N=0,R=0,D=0,z=!(S=3),H=be.Cartesian3.unpack(t,0,Ve),B=be.Cartesian3.unpack(n,0,je),j=be.Cartesian3.unpack(i,0,Fe);!e||xe(j,Ee=be.Cartesian3.unpack(t,t.length-6,Ge),H,B)&&(j=be.Cartesian3.negate(j,j));var G,V,Y,F,q,X,W,U=0,Z=0,J=0;for(I=0;I<d;I++){var Q=be.Cartesian3.clone(H,Ge),K=be.Cartesian3.clone(B,Be),$=be.Cartesian3.clone(j,Ye);z&&($=be.Cartesian3.negate($,$)),H=be.Cartesian3.unpack(t,S,Ve),B=be.Cartesian3.unpack(n,S,je),z=xe(j=be.Cartesian3.unpack(i,S,Fe),Q,H,B),_.latitude=r[x],_.longitude=r[x+1],b.latitude=r[x+2],b.longitude=r[x+3],s&&(ve=function(e,a){var t=Math.abs(e.longitude),n=Math.abs(a.longitude);if(_e.CesiumMath.equalsEpsilon(t,_e.CesiumMath.PI,_e.CesiumMath.EPSILON11)){var i=_e.CesiumMath.sign(a.longitude);return e.longitude=i*(t-_e.CesiumMath.EPSILON11),1}return _e.CesiumMath.equalsEpsilon(n,_e.CesiumMath.PI,_e.CesiumMath.EPSILON11)?(e=_e.CesiumMath.sign(e.longitude),a.longitude=e*(n-_e.CesiumMath.EPSILON11),2):0}(_,b),G=a.project(_,Qe),(Ce=Ie(V=a.project(b,Ke),G,ua)).y=Math.abs(Ce.y),Y=$e,F=ea,0===ve||be.Cartesian3.dot(Ce,be.Cartesian3.UNIT_Y)>Se?(Y=Ne(a,_,$,G,$e),F=Ne(a,b,j,V,ea)):1===ve?(F=Ne(a,b,j,V,ea),Y.x=0,Y.y=_e.CesiumMath.sign(_.longitude-Math.abs(b.longitude)),Y.z=0):(Y=Ne(a,_,$,G,$e),F.x=0,F.y=_e.CesiumMath.sign(_.longitude-b.longitude),F.z=0));var ee=be.Cartesian3.distance(K,B),ae=Ae.EncodedCartesian3.fromCartesian(Q,oa),te=be.Cartesian3.subtract(H,Q,aa),ne=be.Cartesian3.normalize(te,ia),ie=be.Cartesian3.subtract(K,Q,ta);ie=be.Cartesian3.normalize(ie,ie);var re=be.Cartesian3.cross(ne,ie,ia),re=be.Cartesian3.normalize(re,re),se=be.Cartesian3.cross(ie,$,ra),se=be.Cartesian3.normalize(se,se),oe=be.Cartesian3.subtract(B,H,na);oe=be.Cartesian3.normalize(oe,oe);var le=be.Cartesian3.cross(j,oe,sa),le=be.Cartesian3.normalize(le,le),ue=ee/L,ce=U/L,Ce=0,de=0,pe=0;for(s&&(Ce=be.Cartesian3.distance(G,V),q=Ae.EncodedCartesian3.fromCartesian(G,la),X=be.Cartesian3.subtract(V,G,ua),Me=(W=be.Cartesian3.normalize(X,ca)).x,W.x=W.y,W.y=-Me,de=Ce/E,pe=Z/E),k=0;k<8;k++){var he=D+4*k,ge=N+2*k,fe=he+3,me=k<4?1:-1,we=2===k||3===k||6===k||7===k?1:-1;be.Cartesian3.pack(ae.high,m,he),m[fe]=te.x,be.Cartesian3.pack(ae.low,w,he),w[fe]=te.y,be.Cartesian3.pack(se,y,he),y[fe]=te.z,be.Cartesian3.pack(le,v,he),v[fe]=ue*me,be.Cartesian3.pack(re,M,he);var ye=ce*we;0===ye&&we<0&&(ye=9),M[fe]=ye,s&&(o[he]=q.high.x,o[he+1]=q.high.y,o[he+2]=q.low.x,o[he+3]=q.low.y,u[he]=-Y.y,u[he+1]=Y.x,u[he+2]=F.y,u[he+3]=-F.x,l[he]=X.x,l[he+1]=X.y,l[he+2]=W.x,l[he+3]=W.y,c[ge]=de*me,0==(ye=pe*we)&&we<0&&(ye=9),c[ge+1]=ye)}var ve=Ze,ne=Je,ie=We,$=Ue,oe=be.Rectangle.fromCartographicArray(qe,Xe),Me=Le.getMinimumMaximumHeights(oe,C);J+=oe=Me.minimumTerrainHeight,J+=Me=Me.maximumTerrainHeight,Re(Q,K,oe,Me,ve,ie),Re(H,B,oe,Me,ne,$),Me=be.Cartesian3.multiplyByScalar(re,_e.CesiumMath.EPSILON5,Ca),be.Cartesian3.add(ve,Me,ve),be.Cartesian3.add(ne,Me,ne),be.Cartesian3.add(ie,Me,ie),be.Cartesian3.add($,Me,$),De(ve,ne),De(ie,$),be.Cartesian3.pack(ve,f,R),be.Cartesian3.pack(ne,f,R+3),be.Cartesian3.pack($,f,R+6),be.Cartesian3.pack(ie,f,R+9),Me=be.Cartesian3.multiplyByScalar(re,-2*_e.CesiumMath.EPSILON5,Ca),be.Cartesian3.add(ve,Me,ve),be.Cartesian3.add(ne,Me,ne),be.Cartesian3.add(ie,Me,ie),be.Cartesian3.add($,Me,$),De(ve,ne),De(ie,$),be.Cartesian3.pack(ve,f,R+12),be.Cartesian3.pack(ne,f,R+15),be.Cartesian3.pack($,f,R+18),be.Cartesian3.pack(ie,f,R+21),x+=2,S+=3,N+=16,R+=24,D+=32,U+=ee,Z+=Ce}var Te=S=0;for(I=0;I<d;I++){for(k=0;k<ha;k++)g[S+k]=pa[k]+Te;Te+=8,S+=ha}e=da,Oe.BoundingSphere.fromVertices(t,be.Cartesian3.ZERO,3,e[0]),Oe.BoundingSphere.fromVertices(n,be.Cartesian3.ZERO,3,e[1]);var Ee=Oe.BoundingSphere.fromBoundingSpheres(e);return Ee.radius+=J/(2*d),e={position:new ke.GeometryAttribute({componentDatatype:Pe.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:f}),startHiAndForwardOffsetX:ga(m),startLoAndForwardOffsetY:ga(w),startNormalAndForwardOffsetZ:ga(y),endNormalAndTextureCoordinateNormalizationX:ga(v),rightNormalAndTextureCoordinateNormalizationY:ga(M)},s&&(e.startHiLo2D=ga(o),e.offsetAndRight2D=ga(l),e.startEndNormals2D=ga(u),e.texcoordNormalization2D=new ke.GeometryAttribute({componentDatatype:Pe.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:c})),new ke.Geometry({attributes:e,indices:g,boundingSphere:Ee})}(s,c,O,P,b,_,r)}};var x=new be.Cartesian3,N=new Oe.Matrix3,R=new Oe.Quaternion;function xe(e,a,t,n){return a=Ie(t,a,x),a=be.Cartesian3.dot(a,e),(Se<a||a<m)&&(t=Ie(n,t,I),a=a<m?_e.CesiumMath.PI_OVER_TWO:-_e.CesiumMath.PI_OVER_TWO,a=Oe.Quaternion.fromAxisAngle(t,a,R),a=Oe.Matrix3.fromQuaternion(a,N),Oe.Matrix3.multiplyByVector(a,e,e),!0)}var D=new be.Cartographic,z=new be.Cartesian3,H=new be.Cartesian3;function Ne(e,a,t,n,i){var r=be.Cartographic.toCartesian(a,e._ellipsoid,z),s=be.Cartesian3.add(r,t,H),o=!1,l=e._ellipsoid,u=l.cartesianToCartographic(s,D);return Math.abs(a.longitude-u.longitude)>_e.CesiumMath.PI_OVER_TWO&&(o=!0,s=be.Cartesian3.subtract(r,t,H),u=l.cartesianToCartographic(s,D)),u.height=0,u=e.project(u,i),(i=be.Cartesian3.subtract(u,n,i)).z=0,i=be.Cartesian3.normalize(i,i),o&&be.Cartesian3.negate(i,i),i}var oe=new be.Cartesian3,le=new be.Cartesian3;function Re(e,a,t,n,i,r){var s=be.Cartesian3.subtract(a,e,oe);be.Cartesian3.normalize(s,s),t-=q,t=be.Cartesian3.multiplyByScalar(s,t,le),be.Cartesian3.add(e,t,i),n-=X,t=be.Cartesian3.multiplyByScalar(s,n,le),be.Cartesian3.add(a,t,r)}var ue=new be.Cartesian3;function De(e,a){var t=r.Plane.getPointDistance(Q,e),n=r.Plane.getPointDistance(Q,a),i=ue;_e.CesiumMath.equalsEpsilon(t,0,_e.CesiumMath.EPSILON2)?(i=Ie(a,e,i),be.Cartesian3.multiplyByScalar(i,_e.CesiumMath.EPSILON2,i),be.Cartesian3.add(e,i,e)):_e.CesiumMath.equalsEpsilon(n,0,_e.CesiumMath.EPSILON2)&&(i=Ie(e,a,i),be.Cartesian3.multiplyByScalar(i,_e.CesiumMath.EPSILON2,i),be.Cartesian3.add(a,i,a))}var ze=new be.Cartographic,He=new be.Cartographic,Be=new be.Cartesian3,je=new be.Cartesian3,Ge=new be.Cartesian3,Ve=new be.Cartesian3,Ye=new be.Cartesian3,Fe=new be.Cartesian3,qe=[ze,He],Xe=new be.Rectangle,We=new be.Cartesian3,Ue=new be.Cartesian3,Ze=new be.Cartesian3,Je=new be.Cartesian3,Qe=new be.Cartesian3,Ke=new be.Cartesian3,$e=new be.Cartesian3,ea=new be.Cartesian3,aa=new be.Cartesian3,ta=new be.Cartesian3,na=new be.Cartesian3,ia=new be.Cartesian3,ra=new be.Cartesian3,sa=new be.Cartesian3,oa=new Ae.EncodedCartesian3,la=new Ae.EncodedCartesian3,ua=new be.Cartesian3,ca=new be.Cartesian3,Ca=new be.Cartesian3,da=[new Oe.BoundingSphere,new Oe.BoundingSphere],pa=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],ha=pa.length;function ga(e){return new ke.GeometryAttribute({componentDatatype:Pe.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return w._projectNormal=Ne,function(e,a){return Le.initialize().then(function(){return B.defined(a)&&(e=w.unpack(e,a)),w.createGeometry(e)})}});