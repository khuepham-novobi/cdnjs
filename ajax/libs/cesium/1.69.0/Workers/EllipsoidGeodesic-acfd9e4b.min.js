define(["exports","./when-b43ff45e","./Check-d404a0fe","./Math-336da716","./Cartesian2-3c21ddb9"],function(t,p,a,U,S){"use strict";function b(t,a,i,n,e,s,r){i=t*i*(4+t*(4-3*i))/16;return(1-i)*t*a*(n+i*e*(r+i*s*(2*r*r-1)))}var q=new S.Cartesian3,w=new S.Cartesian3;function n(t,a,i,n){var e,s,r,h,o,d,u,c,M,l,g,_,p,f,m,v,C,H,O;S.Cartesian3.normalize(n.cartographicToCartesian(a,w),q),S.Cartesian3.normalize(n.cartographicToCartesian(i,w),w),function(t,a,i,n,e,s,r){var h,o=(a-i)/a,d=s-n,n=Math.atan((1-o)*Math.tan(e)),e=Math.atan((1-o)*Math.tan(r)),r=Math.cos(n),n=Math.sin(n),u=Math.cos(e),e=Math.sin(e),c=r*u,M=r*e,l=n*e,g=n*u,_=d,p=U.CesiumMath.TWO_PI,f=Math.cos(_),m=Math.sin(_);do{f=Math.cos(_),m=Math.sin(_);var v,C=M-g*f,H=Math.sqrt(u*u*m*m+C*C),O=l+c*f,S=Math.atan2(H,O),p=_,q=O-2*l/(h=0===H?(v=0,1):1-(v=c*m/H)*v)}while(isNaN(q)&&(q=0),_=d+b(o,v,h,S,H,O,q),Math.abs(_-p)>U.CesiumMath.EPSILON12);e=h*(a*a-i*i)/(i*i),n=e*(256+e*(e*(74-47*e)-128))/1024,a=q*q,n=i*(1+e*(4096+e*(e*(320-175*e)-768))/16384)*(S-n*H*(q+n*(O*(2*a-1)-n*q*(4*H*H-3)*(4*a-3)/6)/4)),a=Math.atan2(u*m,M-g*f),r=Math.atan2(r*m,M*f-g);t._distance=n,t._startHeading=a,t._endHeading=r,t._uSquared=e}(t,n.maximumRadius,n.minimumRadius,a.longitude,a.latitude,i.longitude,i.latitude),t._start=S.Cartographic.clone(a,t._start),t._end=S.Cartographic.clone(i,t._end),t._start.height=0,t._end.height=0,H=(O=t)._uSquared,r=((e=O._ellipsoid.maximumRadius)-(s=O._ellipsoid.minimumRadius))/e,h=Math.cos(O._startHeading),o=Math.sin(O._startHeading),d=(1-r)*Math.tan(O._start.latitude),c=(u=1/Math.sqrt(1+d*d))*d,M=Math.atan2(d,h),_=1-(g=(l=u*o)*l),p=Math.sqrt(_),v=1-3*(f=H/4)+35*(m=f*f)/4,C=1-5*f,H=(i=1+f-3*m/4+5*(n=m*f)/4-175*(a=m*m)/64)*M-(t=1-f+15*m/8-35*n/8)*Math.sin(2*M)*f/2-v*Math.sin(4*M)*m/16-C*Math.sin(6*M)*n/48-5*Math.sin(8*M)*a/512,(O=O._constants).a=e,O.b=s,O.f=r,O.cosineHeading=h,O.sineHeading=o,O.tanU=d,O.cosineU=u,O.sineU=c,O.sigma=M,O.sineAlpha=l,O.sineSquaredAlpha=g,O.cosineSquaredAlpha=_,O.cosineAlpha=p,O.u2Over4=f,O.u4Over16=m,O.u6Over64=n,O.u8Over256=a,O.a0=i,O.a1=t,O.a2=v,O.a3=C,O.distanceRatio=H}function i(t,a,i){i=p.defaultValue(i,S.Ellipsoid.WGS84);this._ellipsoid=i,this._start=new S.Cartographic,this._end=new S.Cartographic,this._constants={},this._startHeading=void 0,this._endHeading=void 0,this._distance=void 0,this._uSquared=void 0,p.defined(t)&&p.defined(a)&&n(this,t,a,i)}Object.defineProperties(i.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},surfaceDistance:{get:function(){return this._distance}},start:{get:function(){return this._start}},end:{get:function(){return this._end}},startHeading:{get:function(){return this._startHeading}},endHeading:{get:function(){return this._endHeading}}}),i.prototype.setEndPoints=function(t,a){n(this,t,a,this._ellipsoid)},i.prototype.interpolateUsingFraction=function(t,a){return this.interpolateUsingSurfaceDistance(this._distance*t,a)},i.prototype.interpolateUsingSurfaceDistance=function(t,a){var i=this._constants,n=i.distanceRatio+t/i.b,e=Math.cos(2*n),s=Math.cos(4*n),r=Math.cos(6*n),h=Math.sin(2*n),o=Math.sin(4*n),d=Math.sin(6*n),u=Math.sin(8*n),c=n*n,M=n*c,l=i.u8Over256,g=i.u2Over4,_=i.u6Over64,t=i.u4Over16,c=2*M*l*e/3+n*(1-g+7*t/4-15*_/4+579*l/64-(t-15*_/4+187*l/16)*e-(5*_/4-115*l/16)*s-29*l*r/16)+(g/2-t+71*_/32-85*l/16)*h+(5*t/16-5*_/4+383*l/96)*o-c*((_-11*l/2)*h+5*l*o/2)+(29*_/96-29*l/16)*d+539*l*u/1536,h=Math.asin(Math.sin(c)*i.cosineAlpha),o=Math.atan(i.a/i.b*Math.tan(h));c-=i.sigma;_=Math.cos(2*i.sigma+c),d=Math.sin(c),l=Math.cos(c),u=i.cosineU*l,h=i.sineU*d,_=Math.atan2(d*i.sineHeading,u-h*i.cosineHeading)-b(i.f,i.sineAlpha,i.cosineSquaredAlpha,c,d,l,_);return p.defined(a)?(a.longitude=this._start.longitude+_,a.latitude=o,a.height=0,a):new S.Cartographic(this._start.longitude+_,o,0)},t.EllipsoidGeodesic=i});