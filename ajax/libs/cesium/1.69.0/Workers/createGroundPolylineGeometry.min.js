define(["./when-b43ff45e","./Check-d404a0fe","./Math-336da716","./Cartesian2-3c21ddb9","./Transforms-ffcbad88","./RuntimeError-bf10f3d5","./WebGLConstants-56de22c0","./ComponentDatatype-8956ad9a","./GeometryAttribute-c9800e88","./EncodedCartesian3-bf440da4","./IntersectionTests-e522b831","./Plane-56dc8a69","./WebMercatorProjection-069c36ba","./arrayRemoveDuplicates-a7dee4b8","./ArcType-46047bc6","./EllipsoidRhumbLine-6daaa4d2","./EllipsoidGeodesic-acfd9e4b"],function(B,e,Ee,_e,Oe,a,t,be,Pe,ke,j,r,n,G,V,Y,M){"use strict";function i(e){e=B.defaultValue(e,B.defaultValue.EMPTY_OBJECT),this._ellipsoid=B.defaultValue(e.ellipsoid,_e.Ellipsoid.WGS84),this._rectangle=B.defaultValue(e.rectangle,_e.Rectangle.MAX_VALUE),this._projection=new Oe.GeographicProjection(this._ellipsoid),this._numberOfLevelZeroTilesX=B.defaultValue(e.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=B.defaultValue(e.numberOfLevelZeroTilesY,1)}Object.defineProperties(i.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),i.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},i.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},i.prototype.rectangleToNativeRectangle=function(e,a){var t=Ee.CesiumMath.toDegrees(e.west),n=Ee.CesiumMath.toDegrees(e.south),i=Ee.CesiumMath.toDegrees(e.east),e=Ee.CesiumMath.toDegrees(e.north);return B.defined(a)?(a.west=t,a.south=n,a.east=i,a.north=e,a):new _e.Rectangle(t,n,i,e)},i.prototype.tileXYToNativeRectangle=function(e,a,t,n){n=this.tileXYToRectangle(e,a,t,n);return n.west=Ee.CesiumMath.toDegrees(n.west),n.south=Ee.CesiumMath.toDegrees(n.south),n.east=Ee.CesiumMath.toDegrees(n.east),n.north=Ee.CesiumMath.toDegrees(n.north),n},i.prototype.tileXYToRectangle=function(e,a,t,n){var i=this._rectangle,r=this.getNumberOfXTilesAtLevel(t),s=this.getNumberOfYTilesAtLevel(t),t=i.width/r,r=e*t+i.west,e=(e+1)*t+i.west,t=i.height/s,s=i.north-a*t,t=i.north-(a+1)*t;return B.defined(n)||(n=new _e.Rectangle(r,t,e,s)),n.west=r,n.south=t,n.east=e,n.north=s,n},i.prototype.positionToTileXY=function(e,a,t){var n=this._rectangle;if(_e.Rectangle.contains(n,e)){var i=this.getNumberOfXTilesAtLevel(a),r=this.getNumberOfYTilesAtLevel(a),s=n.width/i,o=n.height/r,a=e.longitude;n.east<n.west&&(a+=Ee.CesiumMath.TWO_PI);s=(a-n.west)/s|0;i<=s&&(s=i-1);o=(n.north-e.latitude)/o|0;return r<=o&&(o=r-1),B.defined(t)?(t.x=s,t.y=o,t):new _e.Cartesian2(s,o)}};var s=new _e.Cartesian3,o=new _e.Cartesian3,l=new _e.Cartographic,u=new _e.Cartesian3,c=new _e.Cartesian3,C=new Oe.BoundingSphere,d=new i,p=[new _e.Cartographic,new _e.Cartographic,new _e.Cartographic,new _e.Cartographic],h=new _e.Cartesian2,Ae={};function g(e){_e.Cartographic.fromRadians(e.east,e.north,0,p[0]),_e.Cartographic.fromRadians(e.west,e.north,0,p[1]),_e.Cartographic.fromRadians(e.east,e.south,0,p[2]),_e.Cartographic.fromRadians(e.west,e.south,0,p[3]);for(var a=0,t=0,n=0,i=0,r=Ae._terrainHeightsMaxLevel,s=0;s<=r;++s){for(var o=!1,l=0;l<4;++l){var u=p[l];if(d.positionToTileXY(u,s,h),0===l)n=h.x,i=h.y;else if(n!==h.x||i!==h.y){o=!0;break}}if(o)break;a=n,t=i}if(0!==s)return{x:a,y:t,level:r<s?r:s-1}}Ae.initialize=function(){var e=Ae._initPromise;return B.defined(e)?e:(e=Oe.Resource.fetchJson(Oe.buildModuleUrl("Assets/approximateTerrainHeights.json")).then(function(e){Ae._terrainHeights=e}),Ae._initPromise=e)},Ae.getMinimumMaximumHeights=function(e,a){a=B.defaultValue(a,_e.Ellipsoid.WGS84);var t=g(e),n=Ae._defaultMinTerrainHeight,i=Ae._defaultMaxTerrainHeight;return B.defined(t)&&(t=t.level+"-"+t.x+"-"+t.y,t=Ae._terrainHeights[t],B.defined(t)&&(n=t[0],i=t[1]),a.cartographicToCartesian(_e.Rectangle.northeast(e,l),s),a.cartographicToCartesian(_e.Rectangle.southwest(e,l),o),_e.Cartesian3.midpoint(o,s,u),a=a.scaleToGeodeticSurface(u,c),n=B.defined(a)?(a=_e.Cartesian3.distance(u,a),Math.min(n,-a)):Ae._defaultMinTerrainHeight),{minimumTerrainHeight:n=Math.max(Ae._defaultMinTerrainHeight,n),maximumTerrainHeight:i}},Ae.getBoundingSphere=function(e,a){a=B.defaultValue(a,_e.Ellipsoid.WGS84);var t=g(e),n=Ae._defaultMaxTerrainHeight;B.defined(t)&&(i=t.level+"-"+t.x+"-"+t.y,i=Ae._terrainHeights[i],B.defined(i)&&(n=i[1]));var i=Oe.BoundingSphere.fromRectangle3D(e,a,0);return Oe.BoundingSphere.fromRectangle3D(e,a,n,C),Oe.BoundingSphere.union(i,C,i)},Ae._terrainHeightsMaxLevel=6,Ae._defaultMaxTerrainHeight=9e3,Ae._defaultMinTerrainHeight=-1e5,Ae._terrainHeights=void 0,Ae._initPromise=void 0,Object.defineProperties(Ae,{initialized:{get:function(){return B.defined(Ae._terrainHeights)}}});var F=[Oe.GeographicProjection,n.WebMercatorProjection],f=F.length,Le=Math.cos(Ee.CesiumMath.toRadians(30)),m=Math.cos(Ee.CesiumMath.toRadians(150)),q=0,X=1e3;function w(e){var a=(e=B.defaultValue(e,B.defaultValue.EMPTY_OBJECT)).positions;this.width=B.defaultValue(e.width,1),this._positions=a,this.granularity=B.defaultValue(e.granularity,9999),this.loop=B.defaultValue(e.loop,!1),this.arcType=B.defaultValue(e.arcType,V.ArcType.GEODESIC),this._ellipsoid=_e.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(w.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+_e.Ellipsoid.packedLength+1+1}}}),w.setProjectionAndEllipsoid=function(e,a){for(var t=0,n=0;n<f;n++)if(a instanceof F[n]){t=n;break}e._projectionIndex=t,e._ellipsoid=a.ellipsoid};var y=new _e.Cartesian3,v=new _e.Cartesian3,T=new _e.Cartesian3;function W(e,a,t,n,i){var r=Z(n,e,0,y),t=Z(n,e,t,v),a=Z(n,a,0,T),t=Se(t,r,v),r=Se(a,r,T);return _e.Cartesian3.cross(r,t,i),_e.Cartesian3.normalize(i,i)}var E=new _e.Cartographic,_=new _e.Cartesian3,O=new _e.Cartesian3,b=new _e.Cartesian3;function U(e,a,t,n,i,r,s,o,l,u,c){if(0!==i){var C;r===V.ArcType.GEODESIC?C=new M.EllipsoidGeodesic(e,a,s):r===V.ArcType.RHUMB&&(C=new Y.EllipsoidRhumbLine(e,a,s));r=C.surfaceDistance;if(!(r<i))for(var d=W(e,a,n,s,b),i=Math.ceil(r/i),p=r/i,h=p,g=i-1,f=o.length,m=0;m<g;m++){var w=C.interpolateUsingSurfaceDistance(h,E),y=Z(s,w,t,_),v=Z(s,w,n,O);_e.Cartesian3.pack(d,o,f),_e.Cartesian3.pack(y,l,f),_e.Cartesian3.pack(v,u,f),c.push(w.latitude),c.push(w.longitude),f+=3,h+=p}}}var P=new _e.Cartographic;function Z(e,a,t,n){return _e.Cartographic.clone(a,P),P.height=t,_e.Cartographic.toCartesian(P,e,n)}function Se(e,a,t){return _e.Cartesian3.subtract(e,a,t),_e.Cartesian3.normalize(t,t),t}function k(e,a,t,n){return n=Se(e,a,n),n=_e.Cartesian3.cross(n,t,n),n=_e.Cartesian3.normalize(n,n),_e.Cartesian3.cross(t,n,n)}w.pack=function(e,a,t){var n=B.defaultValue(t,0),i=e._positions,r=i.length;a[n++]=r;for(var s=0;s<r;++s){var o=i[s];_e.Cartesian3.pack(o,a,n),n+=3}return a[n++]=e.granularity,a[n++]=e.loop?1:0,a[n++]=e.arcType,_e.Ellipsoid.pack(e._ellipsoid,a,n),n+=_e.Ellipsoid.packedLength,a[n++]=e._projectionIndex,a[n++]=e._scene3DOnly?1:0,a},w.unpack=function(e,a,t){for(var n=B.defaultValue(a,0),i=e[n++],r=new Array(i),s=0;s<i;s++)r[s]=_e.Cartesian3.unpack(e,n),n+=3;var o=e[n++],l=1===e[n++],u=e[n++],c=_e.Ellipsoid.unpack(e,n);n+=_e.Ellipsoid.packedLength;var C=e[n++],a=1===e[n++];return B.defined(t)||(t=new w({positions:r})),t._positions=r,t.granularity=o,t.loop=l,t.arcType=u,t._ellipsoid=c,t._projectionIndex=C,t._scene3DOnly=a,t};var A=new _e.Cartesian3,L=new _e.Cartesian3,S=new _e.Cartesian3,I=new _e.Cartesian3;function J(e,a,t,n,i){t=Se(t,a,I),e=k(e,a,t,A),a=k(n,a,t,L);if(Ee.CesiumMath.equalsEpsilon(_e.Cartesian3.dot(e,a),-1,Ee.CesiumMath.EPSILON5))return i=_e.Cartesian3.cross(t,e,i),_e.Cartesian3.normalize(i,i);i=_e.Cartesian3.add(a,e,i),i=_e.Cartesian3.normalize(i,i);t=_e.Cartesian3.cross(t,i,S);return _e.Cartesian3.dot(a,t)<0&&(i=_e.Cartesian3.negate(i,i)),i}var Q=r.Plane.fromPointNormal(_e.Cartesian3.ZERO,_e.Cartesian3.UNIT_Y),K=new _e.Cartesian3,$=new _e.Cartesian3,ee=new _e.Cartesian3,ae=new _e.Cartesian3,te=new _e.Cartesian3,ne=new _e.Cartesian3,ie=new _e.Cartographic,re=new _e.Cartographic,se=new _e.Cartographic;w.createGeometry=function(e){var a,t,n,i,r,s=!e._scene3DOnly,o=e.loop,l=e._ellipsoid,u=e.granularity,c=e.arcType,C=new F[e._projectionIndex](l),d=q,p=X,h=e._positions,g=h.length;2===g&&(o=!1);for(var f,m,w,y=new Y.EllipsoidRhumbLine(void 0,void 0,l),v=[h[0]],M=0;M<g-1;M++)t=h[M],n=h[M+1],f=j.IntersectionTests.lineSegmentPlane(t,n,Q,ne),!B.defined(f)||_e.Cartesian3.equalsEpsilon(f,t,Ee.CesiumMath.EPSILON7)||_e.Cartesian3.equalsEpsilon(f,n,Ee.CesiumMath.EPSILON7)||(e.arcType===V.ArcType.GEODESIC?v.push(_e.Cartesian3.clone(f)):e.arcType===V.ArcType.RHUMB&&(w=l.cartesianToCartographic(f,ie).longitude,i=l.cartesianToCartographic(t,ie),r=l.cartesianToCartographic(n,re),y.setEndPoints(i,r),m=y.findIntersectionWithLongitude(w,se),f=l.cartographicToCartesian(m,ne),!B.defined(f)||_e.Cartesian3.equalsEpsilon(f,t,Ee.CesiumMath.EPSILON7)||_e.Cartesian3.equalsEpsilon(f,n,Ee.CesiumMath.EPSILON7)||v.push(_e.Cartesian3.clone(f)))),v.push(n);o&&(t=h[g-1],n=h[0],f=j.IntersectionTests.lineSegmentPlane(t,n,Q,ne),!B.defined(f)||_e.Cartesian3.equalsEpsilon(f,t,Ee.CesiumMath.EPSILON7)||_e.Cartesian3.equalsEpsilon(f,n,Ee.CesiumMath.EPSILON7)||(e.arcType===V.ArcType.GEODESIC?v.push(_e.Cartesian3.clone(f)):e.arcType===V.ArcType.RHUMB&&(w=l.cartesianToCartographic(f,ie).longitude,i=l.cartesianToCartographic(t,ie),r=l.cartesianToCartographic(n,re),y.setEndPoints(i,r),m=y.findIntersectionWithLongitude(w,se),f=l.cartographicToCartesian(m,ne),!B.defined(f)||_e.Cartesian3.equalsEpsilon(f,t,Ee.CesiumMath.EPSILON7)||_e.Cartesian3.equalsEpsilon(f,n,Ee.CesiumMath.EPSILON7)||v.push(_e.Cartesian3.clone(f)))));var T=v.length,E=new Array(T);for(M=0;M<T;M++){var _=_e.Cartographic.fromCartesian(v[M],l);_.height=0,E[M]=_}if(!((T=(E=G.arrayRemoveDuplicates(E,_e.Cartographic.equalsEpsilon)).length)<2)){var O=[],b=[],P=[],k=[],A=K,L=$,S=ee,I=ae,x=te,N=E[0],R=E[1],A=Z(l,E[T-1],d,A),I=Z(l,R,d,I),L=Z(l,N,d,L),S=Z(l,N,p,S);for(x=o?J(A,L,S,I,x):W(N,R,p,l,x),_e.Cartesian3.pack(x,b,0),_e.Cartesian3.pack(L,P,0),_e.Cartesian3.pack(S,k,0),O.push(N.latitude),O.push(N.longitude),U(N,R,d,p,u,c,l,b,P,k,O),M=1;M<T-1;++M){A=_e.Cartesian3.clone(L,A),L=_e.Cartesian3.clone(I,L);var D=E[M];Z(l,D,p,S),Z(l,E[M+1],d,I),J(A,L,S,I,x),a=b.length,_e.Cartesian3.pack(x,b,a),_e.Cartesian3.pack(L,P,a),_e.Cartesian3.pack(S,k,a),O.push(D.latitude),O.push(D.longitude),U(E[M],E[M+1],d,p,u,c,l,b,P,k,O)}var z=E[T-1],H=E[T-2];if(L=Z(l,z,d,L),S=Z(l,z,p,S),x=o?(R=E[0],J(A=Z(l,H,d,A),L,S,I=Z(l,R,d,I),x)):W(H,z,p,l,x),a=b.length,_e.Cartesian3.pack(x,b,a),_e.Cartesian3.pack(L,P,a),_e.Cartesian3.pack(S,k,a),O.push(z.latitude),O.push(z.longitude),o){for(U(z,N,d,p,u,c,l,b,P,k,O),a=b.length,M=0;M<3;++M)b[a+M]=b[M],P[a+M]=P[M],k[a+M]=k[M];O.push(N.latitude),O.push(N.longitude)}return function(e,a,t,n,i,r,s){var o,l,u,c,C=a._ellipsoid,d=t.length/3-1,p=8*d,h=4*p,g=new(65535<p?Uint32Array:Uint16Array)(36*d),f=new Float64Array(3*p),m=new Float32Array(h),w=new Float32Array(h),y=new Float32Array(h),v=new Float32Array(h),M=new Float32Array(h);s&&(o=new Float32Array(h),l=new Float32Array(h),u=new Float32Array(h),c=new Float32Array(2*p));var T=r.length/2,E=0,_=De;_.height=0;var O=ze;O.height=0;var b=He,P=Be;if(s)for(S=0,I=1;I<T;I++)_.latitude=r[S],_.longitude=r[S+1],O.latitude=r[S+2],O.longitude=r[S+3],b=a.project(_,b),P=a.project(O,P),E+=_e.Cartesian3.distance(b,P),S+=2;for(var k,A=n.length/3,P=_e.Cartesian3.unpack(n,0,P),L=0,S=3,I=1;I<A;I++)b=_e.Cartesian3.clone(P,b),P=_e.Cartesian3.unpack(n,S,P),L+=_e.Cartesian3.distance(b,P),S+=3;var x=0,N=0,R=0,D=0,z=!(S=3),H=_e.Cartesian3.unpack(t,0,Ge),B=_e.Cartesian3.unpack(n,0,Be),j=_e.Cartesian3.unpack(i,0,Ye);e&&Ie(j,_e.Cartesian3.unpack(t,t.length-6,je),H,B)&&(j=_e.Cartesian3.negate(j,j));var G=0,V=0,Y=0;for(I=0;I<d;I++){var F,q,X,W,U=_e.Cartesian3.clone(H,je),Z=_e.Cartesian3.clone(B,He),J=_e.Cartesian3.clone(j,Ve);z&&(J=_e.Cartesian3.negate(J,J)),H=_e.Cartesian3.unpack(t,S,Ge),B=_e.Cartesian3.unpack(n,S,Be),z=Ie(j=_e.Cartesian3.unpack(i,S,Ye),U,H,B),_.latitude=r[x],_.longitude=r[x+1],O.latitude=r[x+2],O.longitude=r[x+3],s&&(ve=function(e,a){var t=Math.abs(e.longitude),n=Math.abs(a.longitude);if(Ee.CesiumMath.equalsEpsilon(t,Ee.CesiumMath.PI,Ee.CesiumMath.EPSILON11)){var i=Ee.CesiumMath.sign(a.longitude);return e.longitude=i*(t-Ee.CesiumMath.EPSILON11),1}if(Ee.CesiumMath.equalsEpsilon(n,Ee.CesiumMath.PI,Ee.CesiumMath.EPSILON11)){e=Ee.CesiumMath.sign(e.longitude);return a.longitude=e*(n-Ee.CesiumMath.EPSILON11),2}return 0}(_,O),W=a.project(_,Je),(Ce=Se(F=a.project(O,Qe),W,la)).y=Math.abs(Ce.y),q=Ke,X=$e,0===ve||_e.Cartesian3.dot(Ce,_e.Cartesian3.UNIT_Y)>Le?(q=xe(a,_,J,W,Ke),X=xe(a,O,j,F,$e)):1===ve?(X=xe(a,O,j,F,$e),q.x=0,q.y=Ee.CesiumMath.sign(_.longitude-Math.abs(O.longitude)),q.z=0):(q=xe(a,_,J,W,Ke),X.x=0,X.y=Ee.CesiumMath.sign(_.longitude-O.longitude),X.z=0));var Q,K,$,ee=_e.Cartesian3.distance(Z,B),ae=ke.EncodedCartesian3.fromCartesian(U,sa),te=_e.Cartesian3.subtract(H,U,ea),ne=_e.Cartesian3.normalize(te,na),ie=_e.Cartesian3.subtract(Z,U,aa),ie=_e.Cartesian3.normalize(ie,ie),re=_e.Cartesian3.cross(ne,ie,na),re=_e.Cartesian3.normalize(re,re),se=_e.Cartesian3.cross(ie,J,ia),se=_e.Cartesian3.normalize(se,se),oe=_e.Cartesian3.subtract(B,H,ta),oe=_e.Cartesian3.normalize(oe,oe),le=_e.Cartesian3.cross(j,oe,ra),le=_e.Cartesian3.normalize(le,le),ue=ee/L,ce=G/L,Ce=0,de=0,pe=0;for(s&&(Ce=_e.Cartesian3.distance(W,F),Q=ke.EncodedCartesian3.fromCartesian(W,oa),K=_e.Cartesian3.subtract(F,W,la),Me=($=_e.Cartesian3.normalize(K,ua)).x,$.x=$.y,$.y=-Me,de=Ce/E,pe=V/E),k=0;k<8;k++){var he=D+4*k,ge=N+2*k,fe=he+3,me=k<4?1:-1,we=2===k||3===k||6===k||7===k?1:-1;_e.Cartesian3.pack(ae.high,m,he),m[fe]=te.x,_e.Cartesian3.pack(ae.low,w,he),w[fe]=te.y,_e.Cartesian3.pack(se,y,he),y[fe]=te.z,_e.Cartesian3.pack(le,v,he),v[fe]=ue*me,_e.Cartesian3.pack(re,M,he);var ye=ce*we;0===ye&&we<0&&(ye=9),M[fe]=ye,s&&(o[he]=Q.high.x,o[he+1]=Q.high.y,o[he+2]=Q.low.x,o[he+3]=Q.low.y,u[he]=-q.y,u[he+1]=q.x,u[he+2]=X.y,u[he+3]=-X.x,l[he]=K.x,l[he+1]=K.y,l[he+2]=$.x,l[he+3]=$.y,c[ge]=de*me,0==(ye=pe*we)&&we<0&&(ye=9),c[ge+1]=ye)}var ve=Ue,ne=Ze,ie=Xe,J=We,oe=_e.Rectangle.fromCartographicArray(Fe,qe),Me=Ae.getMinimumMaximumHeights(oe,C),oe=Me.minimumTerrainHeight,Me=Me.maximumTerrainHeight;Y+=oe,Y+=Me,Ne(U,Z,oe,Me,ve,ie),Ne(H,B,oe,Me,ne,J);Me=_e.Cartesian3.multiplyByScalar(re,Ee.CesiumMath.EPSILON5,ca);_e.Cartesian3.add(ve,Me,ve),_e.Cartesian3.add(ne,Me,ne),_e.Cartesian3.add(ie,Me,ie),_e.Cartesian3.add(J,Me,J),Re(ve,ne),Re(ie,J),_e.Cartesian3.pack(ve,f,R),_e.Cartesian3.pack(ne,f,R+3),_e.Cartesian3.pack(J,f,R+6),_e.Cartesian3.pack(ie,f,R+9),Me=_e.Cartesian3.multiplyByScalar(re,-2*Ee.CesiumMath.EPSILON5,ca),_e.Cartesian3.add(ve,Me,ve),_e.Cartesian3.add(ne,Me,ne),_e.Cartesian3.add(ie,Me,ie),_e.Cartesian3.add(J,Me,J),Re(ve,ne),Re(ie,J),_e.Cartesian3.pack(ve,f,R+12),_e.Cartesian3.pack(ne,f,R+15),_e.Cartesian3.pack(J,f,R+18),_e.Cartesian3.pack(ie,f,R+21),x+=2,S+=3,N+=16,R+=24,D+=32,G+=ee,V+=Ce}var Te=S=0;for(I=0;I<d;I++){for(k=0;k<pa;k++)g[S+k]=da[k]+Te;Te+=8,S+=pa}p=Ca;Oe.BoundingSphere.fromVertices(t,_e.Cartesian3.ZERO,3,p[0]),Oe.BoundingSphere.fromVertices(n,_e.Cartesian3.ZERO,3,p[1]);e=Oe.BoundingSphere.fromBoundingSpheres(p);e.radius+=Y/(2*d);p={position:new Pe.GeometryAttribute({componentDatatype:be.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:f}),startHiAndForwardOffsetX:ha(m),startLoAndForwardOffsetY:ha(w),startNormalAndForwardOffsetZ:ha(y),endNormalAndTextureCoordinateNormalizationX:ha(v),rightNormalAndTextureCoordinateNormalizationY:ha(M)};return s&&(p.startHiLo2D=ha(o),p.offsetAndRight2D=ha(l),p.startEndNormals2D=ha(u),p.texcoordNormalization2D=new Pe.GeometryAttribute({componentDatatype:be.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:c})),new Pe.Geometry({attributes:p,indices:g,boundingSphere:e})}(o,C,P,k,b,O,s)}};var x=new _e.Cartesian3,N=new Oe.Matrix3,R=new Oe.Quaternion;function Ie(e,a,t,n){a=Se(t,a,x),a=_e.Cartesian3.dot(a,e);if(Le<a||a<m){t=Se(n,t,I),a=a<m?Ee.CesiumMath.PI_OVER_TWO:-Ee.CesiumMath.PI_OVER_TWO,a=Oe.Quaternion.fromAxisAngle(t,a,R),a=Oe.Matrix3.fromQuaternion(a,N);return Oe.Matrix3.multiplyByVector(a,e,e),!0}return!1}var D=new _e.Cartographic,z=new _e.Cartesian3,H=new _e.Cartesian3;function xe(e,a,t,n,i){var r=_e.Cartographic.toCartesian(a,e._ellipsoid,z),s=_e.Cartesian3.add(r,t,H),o=!1,l=e._ellipsoid,u=l.cartesianToCartographic(s,D);Math.abs(a.longitude-u.longitude)>Ee.CesiumMath.PI_OVER_TWO&&(o=!0,s=_e.Cartesian3.subtract(r,t,H),u=l.cartesianToCartographic(s,D)),u.height=0;u=e.project(u,i);return(i=_e.Cartesian3.subtract(u,n,i)).z=0,i=_e.Cartesian3.normalize(i,i),o&&_e.Cartesian3.negate(i,i),i}var oe=new _e.Cartesian3,le=new _e.Cartesian3;function Ne(e,a,t,n,i,r){var s=_e.Cartesian3.subtract(a,e,oe);_e.Cartesian3.normalize(s,s);t-=q,t=_e.Cartesian3.multiplyByScalar(s,t,le);_e.Cartesian3.add(e,t,i);n-=X,t=_e.Cartesian3.multiplyByScalar(s,n,le);_e.Cartesian3.add(a,t,r)}var ue=new _e.Cartesian3;function Re(e,a){var t=r.Plane.getPointDistance(Q,e),n=r.Plane.getPointDistance(Q,a),i=ue;Ee.CesiumMath.equalsEpsilon(t,0,Ee.CesiumMath.EPSILON2)?(i=Se(a,e,i),_e.Cartesian3.multiplyByScalar(i,Ee.CesiumMath.EPSILON2,i),_e.Cartesian3.add(e,i,e)):Ee.CesiumMath.equalsEpsilon(n,0,Ee.CesiumMath.EPSILON2)&&(i=Se(e,a,i),_e.Cartesian3.multiplyByScalar(i,Ee.CesiumMath.EPSILON2,i),_e.Cartesian3.add(a,i,a))}var De=new _e.Cartographic,ze=new _e.Cartographic,He=new _e.Cartesian3,Be=new _e.Cartesian3,je=new _e.Cartesian3,Ge=new _e.Cartesian3,Ve=new _e.Cartesian3,Ye=new _e.Cartesian3,Fe=[De,ze],qe=new _e.Rectangle,Xe=new _e.Cartesian3,We=new _e.Cartesian3,Ue=new _e.Cartesian3,Ze=new _e.Cartesian3,Je=new _e.Cartesian3,Qe=new _e.Cartesian3,Ke=new _e.Cartesian3,$e=new _e.Cartesian3,ea=new _e.Cartesian3,aa=new _e.Cartesian3,ta=new _e.Cartesian3,na=new _e.Cartesian3,ia=new _e.Cartesian3,ra=new _e.Cartesian3,sa=new ke.EncodedCartesian3,oa=new ke.EncodedCartesian3,la=new _e.Cartesian3,ua=new _e.Cartesian3,ca=new _e.Cartesian3,Ca=[new Oe.BoundingSphere,new Oe.BoundingSphere],da=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],pa=da.length;function ha(e){return new Pe.GeometryAttribute({componentDatatype:be.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return w._projectNormal=xe,function(e,a){return Ae.initialize().then(function(){return B.defined(a)&&(e=w.unpack(e,a)),w.createGeometry(e)})}});