import{B as Behavior,d as deepQueryAll}from"./index-a5c9c958.js";class MenuBehavior extends Behavior{init(){this.setContext("menu",this,!0),this._items=[],this.on("keydown",this.onKeyDown.bind(this))}addItem(e){const t=this._items;t.includes(e)||(t.push(e),1===t.length?this.setCurrent(e):e.use("focus").then(e=>e.set("manual")))}removeItem(e){const t=this._items;t.includes(e)&&(t.splice(t.indexOf(e),1),this.setCurrent(t[0]))}setCurrent(e){const t=this.currentItem;if(e===t)return;const s=!!t&&t.host===document.activeElement;t&&t.host.blur(),e?(this.currentItem=e,this._items.map(t=>{const n=t===e,r=n?"auto":"manual";t.use("focus").then(e=>{if(e.set(r),n&&s){t.host.focus(),e.setEffect(!0);const s=t.host.NuAction;s&&s.isRadio()&&s.set(!0)}})})):this.currentItem=null}getItemsInOrder(e,t){return(deepQueryAll(this.host,e||"[nu-menuitem]")||[]).map(e=>e[t||"nuMenuItem"]).filter(e=>this._items.includes(e))}onKeyDown(e){const t=this.getItemsInOrder(),s=t.indexOf(this.currentItem);switch(e.key){case"ArrowDown":case"ArrowRight":s<t.length-1&&this.setCurrent(t[s+1]);break;case"ArrowUp":case"ArrowLeft":s>0&&this.setCurrent(t[s-1]);break;case"Home":this.setCurrent(t[0]);break;case"End":this.setCurrent(t[t.length-1]);break;default:return}e.stopPropagation(),e.preventDefault()}}export default MenuBehavior;