import"./index-0338ddf6.js";import{C as ConverterBehavior}from"./converter-212f1fa4.js";const COM="com",KEY="key",NAM="nam",NUM="num",PCT="pct",REX="rex",SPC="spc",STR="str",UNK="unk",PLS="pls",MNS="mns",MRK="mrk",IMP="imp",KEYWORD_RE=/^(a(bstract|lias|nd|rguments|rray|s(m|sert)?|uto)|b(ase|egin|ool(ean)?|reak|yte)|c(ase|atch|har|hecked|lass|lone|ompl|onst|ontinue)|de(bugger|cimal|clare|f(ault|er)?|init|l(egate|ete)?)|do|double|e(cho|ls?if|lse(if)?|nd|nsure|num|vent|x(cept|ec|p(licit|ort)|te(nds|nsion|rn)))|f(allthrough|alse|inal(ly)?|ixed|loat|or(each)?|riend|rom|unc(tion)?)|global|goto|guard|i(f|mp(lements|licit|ort)|n(it|clude(_once)?|line|out|stanceof|t(erface|ernal)?)?|s)|l(ambda|et|ock|ong)|m(odule|utable)|NaN|n(amespace|ative|ext|ew|il|ot|ull)|o(bject|perator|r|ut|verride)|p(ackage|arams|rivate|rotected|rotocol|ublic)|r(aise|e(adonly|do|f|gister|peat|quire(_once)?|scue|strict|try|turn))|s(byte|ealed|elf|hort|igned|izeof|tatic|tring|truct|ubscript|uper|ynchronized|witch)|t(emplate|hen|his|hrows?|ransient|rue|ry|ype(alias|def|id|name|of))|u(n(checked|def(ined)?|ion|less|signed|til)|se|sing)|v(ar|irtual|oid|olatile)|w(char_t|hen|here|hile|ith)|xor|yield)$/,TOKEN_RES=[[MRK,/#\[\[.+?]]#/],[IMP,/!\[\[.+?]]!/],[PLS,/(^|\n)\+\s.+($|\n)/],[MNS,/(^|\n)-\s.+($|\n)/],[NUM,/#([0-9a-f]{6}|[0-9a-f]{3})\b/],[COM,/(\/\/|#).*?(?=\n|$)/],[COM,/\/\*[\s\S]*?\*\//],[COM,/<!--[\s\S]*?-->/],[REX,/\/(\\\/|[^\n])*?\/(?=[^\w])/],[STR,/(['"])(\\\1|[\s\S])*?\1/],[NUM,/[+-]?([0-9]*\.?[0-9]+|[0-9]+\.?[0-9]*)([eE][+-]?[0-9]+)?/],[SPC,/\s+/],[NAM,/[\w-$]+/],[PCT,/[\\.,:;+\-*\/=<>()[\]{}|?!&@~]/],[UNK,/./]];function tokenize(e){const t=[],n=TOKEN_RES.length;let r=!1;for(;e;)for(let o=0;o<n;o+=1){let n=TOKEN_RES[o][1].exec(e);if(!n||0!==n.index)continue;let s=TOKEN_RES[o][0];if(s===REX&&r)continue;let l=n[0];s===NAM&&KEYWORD_RE.test(l)&&(s=KEY),s===SPC?l.indexOf("\n")>=0&&(r=!1):r=s===NUM||s===NAM,e=e.slice(l.length),t.push([s,l]);break}return t}const SYMBOL_MAP={pls:"+",mns:"+"},ATTR_MAP={pls:"plus",mns:"minus"};function codeToMarkup(e,t,n){const r=e.split("\n");r[0]&&!r[0].trim()&&r.splice(0,1),r[r.length-1]&&!r[r.length-1].trim()&&r.splice(-1,1);const o=r.find(e=>e.trim().length);if(!o)return"";const s=o.match(/^\s*/)[0];s&&(e=r.map(e=>e.replace(s,"")).join("\n"));let l=0,i=2;const a=tokenize(e);if(t){let e=1;a.forEach(t=>{if("spc"===t[0]){const n=t[1].match(/\n/g);n&&(e+=n.length)}}),i=1+String(e).length}function c(e){return Object.keys(n[e]).reduce((t,r)=>{return t+=`${r}="${n[e][r]}" `},"")}function u(e){const t=" ".repeat(i-String(l+1).length);return`${e?"":"\n"}<nu-el ${c(COM)} before="${++l}.${t}"></nu-el>`}return a.reduce(function(e,n){let r=n[0],o=ATTR_MAP[r]?` ${ATTR_MAP[r]}`:"",s=SYMBOL_MAP[r]?n[1].slice(2):n[1];return t&&r===SPC&&(s=s.replace(/\n/g,e=>u())),r!==MRK&&r!==IMP||(s=s.replace(/([!#]\[\[|]][!#])/g,"")),e+`<nu-el ${c(n[0])}${o}>${s}</nu-el>`},t?u(!0):"")}let themesDeclared=!1;const COM$1="com",KEY$1="key",NAM$1="nam",NUM$1="num",PCT$1="pct",REX$1="rex",SPC$1="spc",STR$1="str",UNK$1="unk",PLS$1="pls",MNS$1="mns",MRK$1="mrk",IMP$1="imp",NAMES=["com","key","nam","num","pct","rex","spc","str","unk","pls","mns",MRK$1,IMP$1],THEME_ATTRS={};class CodeBehavior extends ConverterBehavior{static get converter(){return codeToMarkup}init(){this.props.enumerate=(e=>(this.observe&&setTimeout(()=>this.observe()),null!=e)),super.init(),themesDeclared||declareThemes()}apply(e,t,n){n&&(e.innerHTML=n(t,this.enumerate,THEME_ATTRS))}prepareContent(e){return(e||"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/(^|\n)\s*(?=\n$)/g,"").replace(/\n\s*(?=(\n$|$))/g,"").replace(/^\n/,"").replace(/\n$/,"")}}function declareThemes(){themesDeclared=!0,NAMES.forEach(e=>{THEME_ATTRS[e]={style:`color: var(--${e}-color, var(--main-text-color)); background-color: var(--${e}-bg-color, transparent)`},e!==MRK$1&&e!==IMP$1||(THEME_ATTRS[e].radius=".5x")})}export default CodeBehavior;export{NAMES,THEME_ATTRS};