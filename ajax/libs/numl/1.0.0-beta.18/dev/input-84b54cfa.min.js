import{W as WidgetBehavior,h,i as isEqual}from"./index-0338ddf6.js";const AUTOCOMPLETE_MAP={email:"email",tel:"tel",url:"url"};class InputBehavior extends WidgetBehavior{static get params(){return{input:!0,localized:!1,tag:"input",type:"text"}}init(){const t=this.tagName=this.params.tag,{host:e}=this;if(this.ref=e.querySelector(t),!this.ref){const s=h(t);e.appendChild(s),this.ref=s}this.setType(),this.value=null,this.props.disabled=(()=>null!=this.transferAttr("disabled",this.ref)),this.props.autofocus=(()=>null!=this.transferAttr("autofocus",this.ref)),this.props.autocomplete=(()=>this.transferAttr("autocomplete",this.ref,AUTOCOMPLETE_MAP[this.params.type])),this.props.pattern=(()=>this.transferAttr("pattern",this.ref)),this.props.placeholder=(()=>this.transferAttr("placeholder",this.ref,"...")),super.init();const{ref:s}=this;if(null==this.value){const e="textarea"===t?s.textContent:s.value;e&&this.setValue(e,!0)}this.setFormValue(),s.addEventListener("input",t=>{t.stopPropagation(),this.setValue(s.value)}),s.addEventListener("change",t=>{t.stopPropagation(),this.emit("change",this.value)}),s.addEventListener("blur",()=>{e.id&&this.emit("nu-blur",e.nuId,{bubbles:!0})}),e.nuRef=s,e.hasAttribute("label")&&(e.nuChanged("label",null),e.removeAttribute("aria-label")),e.hasAttribute("labelledby")&&(e.nuChanged("label",null),e.removeAttribute("aria-labelledby")),this.inputGroup=null,this.linkContext("inputgroup",()=>{this.setEmpty()},"inputGroup"),e.addEventListener("keydown",e=>{"input"===t&&"Enter"===e.key&&this.doAction("submit")}),setTimeout(()=>{this.setEmpty()},500)}setEmpty(){if(!this.ref)return;this.setMod("placeholder",!this.ref.value);const t=this.inputGroup;t&&t.setMod("placeholder",!this.ref.value)}setValue(t,e){isEqual(this.value,t)||(this.value=t,this.setEmpty(),e||this.emit("input",this.value),this.setInputValue(t),this.setFormValue())}setInputValue(t){const{ref:e}=this,s=this.tagName;e&&("textarea"===s?e.textContent!==t&&(e.textContent=t):e.value!==t&&(e.value=t))}setType(){this.ref&&"input"===this.params.tag?this.ref.type=this.params.type:setTimeout(()=>this.setType())}}export default InputBehavior;