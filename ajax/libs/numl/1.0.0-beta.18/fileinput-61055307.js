import{W as t,z as e,i as s}from"./index-91d49467.js";export default class extends t{static get params(){return{input:!0,localized:!1,tag:"input",type:"file",acceptValue:!1,provideValue:!0}}init(){const t=this.tagName=this.params.tag,{host:s}=this,i=s.querySelector(t);if(i)this.ref=i;else{const t=e('<nu-block place="cover" opacity="0" overflow="n"><input/></nu-block>');s.appendChild(t),this.ref=t.querySelector("input")}this.setType(),this.value=null,this.props.disabled=()=>null!=this.transferAttr("disabled",this.ref),this.props.multiple=()=>null!=this.transferAttr("multiple",this.ref),this.props.accept=()=>this.transferAttr("accept",this.ref),this.props.placeholder=()=>this.transferAttr("placeholder",this.ref,"..."),super.init();const{ref:l}=this;l.addEventListener("input",(t=>{t.stopPropagation(),this.setValue(l.files)})),l.addEventListener("change",(t=>{t.stopPropagation(),this.emit("change",this.value)})),l.addEventListener("blur",(()=>{s.id&&this.emit("nu-blur",s.nuId,{bubbles:!0})})),s.nuRef=l,s.hasAttribute("label")&&(s.nuChanged("label",null),s.removeAttribute("aria-label")),s.hasAttribute("labelledby")&&(s.nuChanged("label",null),s.removeAttribute("aria-labelledby")),this.inputGroup=null,this.linkContext("inputgroup",(()=>{this.setEmptyMod()}),"inputGroup"),setTimeout((()=>{this.setEmptyMod()}),500)}setEmptyMod(){if(!this.ref)return;this.setMod("placeholder",!this.ref.value);const t=this.inputGroup;t&&t.setMod("placeholder",!this.ref.value)}setValue(t,e){if(t){if(!(t instanceof FileList)||s(this.value,t))return;this.value=this.multiple?t:t[0]}else this.value=null;this.params.provideValue&&this.setValueToContext(),this.setEmptyMod(),e||this.emit("input",this.value),this.setFormValue()}setType(){this.ref?this.ref.type=this.params.type:setTimeout((()=>this.setType()))}getTypedValue(t){return t}}
