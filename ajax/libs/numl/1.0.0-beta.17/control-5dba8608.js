import{g as e,l as t,s as l,R as s}from"./index-133d9ede.js";const i=/((|:)[a-z][a-z0-9-]+)([\s]|$|\[(!|)(\.|)([a-z0-9@-]+)(:([^)=\]]+)|)(=([^\]]+?)|)])/gi,n=["disabled","hidden","checked","pressed","selected","special"],a="control";export default class{constructor(t){this.host=t,this.apply=e(this.apply,this)}changed(e,t){"control"===e&&t&&this.apply(this.state,this.applyValue)}apply(e,a,r=!1){this.state=e,this.applyValue=a;const o="boolean"==typeof e,{host:u}=this,d=u.getAttribute("control");if(t("control triggered",e,a,d),!d)return;let p;const c=[];for(;p=i.exec(d);){let t,[i,d,h,y,f,b,g,A,S,$,m]=p;if(f=!!f,f&&o&&(e=!e),h)if(":root"===d)t=s;else{if(":self"!==d)continue;t=u}else t=u.nuQueryById(d);if(t)if(g){if(n.includes(g)&&(a=!0),null==m&&"boolean"==typeof a)r||l(t,g,e),c.push(t);else if(!r){let s,i;if(null==m)s=i=a;else{const e=m.split("|");s=e[0],i=e[1]||s}let n=s;g=g.replace(/^@/,"--");const r=g.startsWith("--");!1===e?n=null==s?null:S?`${i}${S||""}`:i:S&&(n=`${s}${S||""}`),b?t[g]=n:r?null!=n&&!1!==n?t.style.setProperty(g,String(n)):t.style.removeProperty(g):l(t,g,null!=n?String(n).replace(/@/g,(()=>a)):null)}}else r||(t.hidden=o?!e:!t.hidden),c.push(t)}if(c.length){const e=u.nuHasAria("labelledby");u.nuSetAria("controls",c.map((t=>(e||u.nuHasAria("labelledby")||u.hasAttribute("labelledby")||(u.nuSetAria("describedby",t.nuUniqId),t.setAttribute("aria-labelledby",u.nuUniqId)),t.nuUniqId))).filter((e=>e)).join(" "))}else u.nuSetAria("controls",null)}}export{a as CONTROL_ATTR};
