import{W as t,z as e,i}from"./index-133d9ede.js";export default class extends t{static get params(){return{input:!0,localized:!1,tag:"input",type:"file",acceptValue:!1,provideValue:!0}}init(){const t=this.tagName=this.params.tag,{host:i}=this,s=i.querySelector(t);if(s)this.ref=s;else{const t=e('<nu-block place="cover" opacity="0" overflow="n"><input/></nu-block>');i.appendChild(t),this.ref=t.querySelector("input")}this.setType(),this.value=null,this.props.disabled=()=>null!=this.transferAttr("disabled",this.ref),this.props.multiple=()=>null!=this.transferAttr("multiple",this.ref),this.props.placeholder=()=>this.transferAttr("placeholder",this.ref,"..."),super.init();const{ref:l}=this;l.addEventListener("input",(t=>{t.stopPropagation(),this.setValue(l.files)})),l.addEventListener("change",(t=>{t.stopPropagation(),this.emit("change",this.value)})),l.addEventListener("blur",(()=>{i.id&&this.emit("nu-blur",i.nuId,{bubbles:!0})})),i.nuRef=l,i.hasAttribute("label")&&(i.nuChanged("label",null),i.removeAttribute("aria-label")),i.hasAttribute("labelledby")&&(i.nuChanged("label",null),i.removeAttribute("aria-labelledby")),this.inputGroup=null,this.linkContext("inputgroup",(()=>{this.setEmptyMod()}),"inputGroup"),setTimeout((()=>{this.setEmptyMod()}),500)}setEmptyMod(){if(!this.ref)return;this.setMod("placeholder",!this.ref.value);const t=this.inputGroup;t&&t.setMod("placeholder",!this.ref.value)}setValue(t,e){if(t){if(!(t instanceof FileList)||i(this.value,t))return;this.value=this.multiple?t:t[0]}else this.value=null;this.params.provideValue&&this.setValueToContext(),this.setEmptyMod(),e||this.emit("input",this.value),this.setFormValue()}setType(){this.ref?this.ref.type=this.params.type:setTimeout((()=>this.setType()))}getTypedValue(t){return t}}
