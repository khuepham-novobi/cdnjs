import{g as asyncDebounce,l as log,s as setAttr,R as ROOT}from"./index-da59e341.js";const CONTROL_REGEXP=/((|:)[a-z][a-z0-9-]+)([\s]|$|\[(!|)(\.|)([a-z0-9@-]+)(:([^)=\]]+)|)(=([^\]]+?)|)])/gi,BOOL_ATTRS=["disabled","hidden","checked","pressed","selected","special"],CONTROL_ATTR="control";class ControlBehavior{constructor(e){this.host=e,this.apply=asyncDebounce(this.apply,this)}changed(e,t){e===CONTROL_ATTR&&t&&this.apply(this.state,this.applyValue)}apply(e,t,l=!1){this.state=e,this.applyValue=t;const s="boolean"==typeof e,{host:i}=this,n=i.getAttribute(CONTROL_ATTR);if(log("control triggered",e,t,n),!n)return;let a;const o=[];for(;a=CONTROL_REGEXP.exec(n);){let n,[r,u,c,d,p,h,y,O,T,b,f]=a;if((p=!!p)&&s&&(e=!e),c)if(":root"===u)n=ROOT;else{if(":self"!==u)continue;n=i}else n=i.nuQueryById(u);if(n)if(y){if(BOOL_ATTRS.includes(y)&&(t=!0),null==f&&"boolean"==typeof t)l||setAttr(n,y,e),o.push(n);else if(!l){let l,s;if(null==f)l=s=t;else{const e=f.split("|");l=e[0],s=e[1]||l}let i=l;const a=(y=y.replace(/^@/,"--")).startsWith("--");!1===e?i=null==l?null:T?`${s}${T||""}`:s:T&&(i=`${l}${T||""}`),h?n[y]=i:a?null!=i&&!1!==i?n.style.setProperty(y,String(i)):n.style.removeProperty(y):setAttr(n,y,null!=i?String(i).replace(/@/g,()=>t):null)}}else l||(n.hidden=s?!e:!n.hidden),o.push(n)}if(o.length){const e=i.nuHasAria("labelledby");i.nuSetAria("controls",o.map(t=>(e||i.nuHasAria("labelledby")||i.hasAttribute("labelledby")||(i.nuSetAria("describedby",t.nuUniqId),t.setAttribute("aria-labelledby",i.nuUniqId)),t.nuUniqId)).filter(e=>e).join(" "))}else i.nuSetAria("controls",null)}}export default ControlBehavior;export{CONTROL_ATTR};