import{B as e,d as t,R as n}from"./index-133d9ede.js";const r=window.history,o=function(e){return function(){const t=History.prototype[e].apply(r,arguments),n=new Event(e.toLowerCase());return window.dispatchEvent(n),t}};let s;function a(){const e=t(n,'[is-current-spy] > a[href^="#"]'),r=[];if(e.forEach((e=>{const t=e.getAttribute("href").slice(1),n=e.parentNode.nuQueryById(t);if(!n)return;const o=n.getBoundingClientRect().y;n&&r.push({link:e,id:t,target:n,offset:o,parent:e.parentNode})})),!r.length)return;r.sort(((e,t)=>t.offset-e.offset));let o=r.find((e=>e.offset<=1));o&&o.parent.nuSetMod("current",!0),r.forEach((e=>{e!==o&&e.parent.nuSetMod("current",!1)}))}function c(e){const t=e.href;e.parentNode&&e.parentNode.nuSetMod&&e.parentNode.nuSetMod("current",function(e){if(null==e)return!1;let t=location.href.replace(location.hash,"");return t=t.replace(/\/$/,""),(e=e.replace(/\/$/,""))===t}(t))}function i(e=!1){s&&!e||(e&&clearTimeout(s),s=setTimeout((()=>{s=null;const e=t(n,'[is-current-spy] > a:not([href^="#"])');a(),e.forEach(c)}),e?0:100))}r.pushState=o("pushState"),r.replaceState=o("replaceState"),["popstate","pushstate","replacestate"].forEach((e=>{window.addEventListener(e,(()=>{requestAnimationFrame(i),setTimeout(i,250)}),{passive:!0})})),["scroll","hashchange"].forEach((e=>{window.addEventListener(e,a,{passive:!0})})),setTimeout(i,50);export default class extends e{connected(){this.setMod("current-spy",!0),this.on("tap",(()=>{this.setMod("current",!0)}))}disconnected(){this.setMod("current-spy",!1)}}export{c as handleLinkState,i as handleLinksState};
